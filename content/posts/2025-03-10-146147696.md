---
layout: post
title: "机器翻译技术深度解析从统计模型到Transformer革命"
date: 2025-03-10 11:28:24 +0800
description: "机器翻译技术的演进史，本质是人类对语言认知的数字化探索。从基于短语的统计模型到基于自注意力的Transformer，每一次突破都推动着机器对语言理解的深入。然而，当前系统仍无法真正理解\"语言之魂\"——那些蕴含在文化背景、社会习俗中的微妙语义。未来的突破或将来自神经符号系统的结合，让机器既能把握统计规律，又能理解符号逻辑，最终实现真正的跨语言智能。参考文献声明：本文实验数据来自公开论文，代码示例仅用于教学目的。部分示意图引用自arXiv论文，版权归原作者所有。未觉池塘春草梦，阶前梧叶已秋声。"
keywords: "机器翻译技术深度解析：从统计模型到Transformer革命"
categories: ['Nlp']
tags: ['评估指标', '自然语言处理', '秋声工作室', '深度学习', '机器翻译', 'Transformer']
artid: "146147696"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146147696
    alt: "机器翻译技术深度解析从统计模型到Transformer革命"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146147696
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146147696
cover: https://bing.ee123.net/img/rand?artid=146147696
image: https://bing.ee123.net/img/rand?artid=146147696
img: https://bing.ee123.net/img/rand?artid=146147696
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     机器翻译技术深度解析：从统计模型到Transformer革命
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-tomorrow-night-eighties" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h3>
     <a id="httpsiblogcsdnimgcndirectfeb0aa80d5584b29b15b532ee0d8c4a7gifpic_center_1">
     </a>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/feb0aa80d5584b29b15b532ee0d8c4a7.gif#pic_center"/>
    </h3>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/9b42bb14ea9140d2ab2124aeba896ba5.png#pic_center">
      <br/>
      <em>
       图1：机器翻译技术演进时间轴（图片来源于网络）
      </em>
     </img>
    </p>
    <h3>
     <a id="_6">
     </a>
     引言
    </h3>
    <p>
     机器翻译技术的发展史堪称人工智能领域的缩影。1954年，IBM 701计算机首次实现俄语到英语的自动翻译，尽管输出结果充满语法错误，却开启了人类对跨语言沟通的自动化探索。历经六十余年的演进，如今的机器翻译系统已能处理上百种语言，支撑日均数十亿次的翻译请求。本文将深入解析统计机器翻译（SMT）与神经机器翻译（NMT）的核心技术差异，揭示Transformer架构的革命性突破，并通过数学推导和代码实例展现技术演进的内在逻辑。
    </p>
    <hr/>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/b3ddadb574f84f99b8976abf33512f73.gif#pic_center"/>
    </p>
    <h3>
     <a id="SMT_12">
     </a>
     一、统计机器翻译（SMT）：基于短语的翻译模型
    </h3>
    <h4>
     <a id="11__14">
     </a>
     1.1 模型架构设计原理
    </h4>
    <p>
     统计机器翻译系统可视为一个
     <strong>
      概率推理引擎
     </strong>
     ，其核心任务是求解最大后验概率：
    </p>
    <p>
     <span class="katex--display">
      <span class="katex-display">
       <span class="katex">
        <span class="katex-mathml">
         e 
          
         
           ^ 
          
         
        
          = 
         
        
          arg 
         
        
          ⁡ 
         
         
          
          
            max 
           
          
            ⁡ 
           
          
         
           e 
          
         
        
          P 
         
        
          ( 
         
        
          e 
         
        
          ∣ 
         
        
          f 
         
        
          ) 
         
        
          = 
         
        
          arg 
         
        
          ⁡ 
         
         
          
          
            max 
           
          
            ⁡ 
           
          
         
           e 
          
         
         
          
          
            P 
           
          
            ( 
           
          
            f 
           
          
            ∣ 
           
          
            e 
           
          
            ) 
           
          
            P 
           
          
            ( 
           
          
            e 
           
          
            ) 
           
          
          
          
            P 
           
          
            ( 
           
          
            f 
           
          
            ) 
           
          
         
        
       
         \hat{e} = \arg\max_e P(e|f) = \arg\max_e \frac{P(f|e)P(e)}{P(f)}
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.6944em;">
          </span>
          <span class="mord accent">
           <span class="vlist-t">
            <span class="vlist-r">
             <span class="vlist" style="height: 0.6944em;">
              <span class="" style="top: -3em;">
               <span class="pstrut" style="height: 3em;">
               </span>
               <span class="mord mathnormal">
                e
               </span>
              </span>
              <span class="" style="top: -3em;">
               <span class="pstrut" style="height: 3em;">
               </span>
               <span class="accent-body" style="left: -0.1944em;">
                <span class="mord">
                 ^
                </span>
               </span>
              </span>
             </span>
            </span>
           </span>
          </span>
          <span class="mspace" style="margin-right: 0.2778em;">
          </span>
          <span class="mrel">
           =
          </span>
          <span class="mspace" style="margin-right: 0.2778em;">
          </span>
         </span>
         <span class="base">
          <span class="strut" style="height: 1.45em; vertical-align: -0.7em;">
          </span>
          <span class="mop">
           ar
           <span style="margin-right: 0.0139em;">
            g
           </span>
          </span>
          <span class="mspace" style="margin-right: 0.1667em;">
          </span>
          <span class="mop op-limits">
           <span class="vlist-t vlist-t2">
            <span class="vlist-r">
             <span class="vlist" style="height: 0.4306em;">
              <span class="" style="top: -2.4em; margin-left: 0em;">
               <span class="pstrut" style="height: 3em;">
               </span>
               <span class="sizing reset-size6 size3 mtight">
                <span class="mord mathnormal mtight">
                 e
                </span>
               </span>
              </span>
              <span class="" style="top: -3em;">
               <span class="pstrut" style="height: 3em;">
               </span>
               <span class="">
                <span class="mop">
                 max
                </span>
               </span>
              </span>
             </span>
             <span class="vlist-s">
              ​
             </span>
            </span>
            <span class="vlist-r">
             <span class="vlist" style="height: 0.7em;">
              <span class="">
              </span>
             </span>
            </span>
           </span>
          </span>
          <span class="mspace" style="margin-right: 0.1667em;">
          </span>
          <span class="mord mathnormal" style="margin-right: 0.1389em;">
           P
          </span>
          <span class="mopen">
           (
          </span>
          <span class="mord mathnormal">
           e
          </span>
          <span class="mord">
           ∣
          </span>
          <span class="mord mathnormal" style="margin-right: 0.1076em;">
           f
          </span>
          <span class="mclose">
           )
          </span>
          <span class="mspace" style="margin-right: 0.2778em;">
          </span>
          <span class="mrel">
           =
          </span>
          <span class="mspace" style="margin-right: 0.2778em;">
          </span>
         </span>
         <span class="base">
          <span class="strut" style="height: 2.363em; vertical-align: -0.936em;">
          </span>
          <span class="mop">
           ar
           <span style="margin-right: 0.0139em;">
            g
           </span>
          </span>
          <span class="mspace" style="margin-right: 0.1667em;">
          </span>
          <span class="mop op-limits">
           <span class="vlist-t vlist-t2">
            <span class="vlist-r">
             <span class="vlist" style="height: 0.4306em;">
              <span class="" style="top: -2.4em; margin-left: 0em;">
               <span class="pstrut" style="height: 3em;">
               </span>
               <span class="sizing reset-size6 size3 mtight">
                <span class="mord mathnormal mtight">
                 e
                </span>
               </span>
              </span>
              <span class="" style="top: -3em;">
               <span class="pstrut" style="height: 3em;">
               </span>
               <span class="">
                <span class="mop">
                 max
                </span>
               </span>
              </span>
             </span>
             <span class="vlist-s">
              ​
             </span>
            </span>
            <span class="vlist-r">
             <span class="vlist" style="height: 0.7em;">
              <span class="">
              </span>
             </span>
            </span>
           </span>
          </span>
          <span class="mspace" style="margin-right: 0.1667em;">
          </span>
          <span class="mord">
           <span class="mopen nulldelimiter">
           </span>
           <span class="mfrac">
            <span class="vlist-t vlist-t2">
             <span class="vlist-r">
              <span class="vlist" style="height: 1.427em;">
               <span class="" style="top: -2.314em;">
                <span class="pstrut" style="height: 3em;">
                </span>
                <span class="mord">
                 <span class="mord mathnormal" style="margin-right: 0.1389em;">
                  P
                 </span>
                 <span class="mopen">
                  (
                 </span>
                 <span class="mord mathnormal" style="margin-right: 0.1076em;">
                  f
                 </span>
                 <span class="mclose">
                  )
                 </span>
                </span>
               </span>
               <span class="" style="top: -3.23em;">
                <span class="pstrut" style="height: 3em;">
                </span>
                <span class="frac-line" style="border-bottom-width: 0.04em;">
                </span>
               </span>
               <span class="" style="top: -3.677em;">
                <span class="pstrut" style="height: 3em;">
                </span>
                <span class="mord">
                 <span class="mord mathnormal" style="margin-right: 0.1389em;">
                  P
                 </span>
                 <span class="mopen">
                  (
                 </span>
                 <span class="mord mathnormal" style="margin-right: 0.1076em;">
                  f
                 </span>
                 <span class="mord">
                  ∣
                 </span>
                 <span class="mord mathnormal">
                  e
                 </span>
                 <span class="mclose">
                  )
                 </span>
                 <span class="mord mathnormal" style="margin-right: 0.1389em;">
                  P
                 </span>
                 <span class="mopen">
                  (
                 </span>
                 <span class="mord mathnormal">
                  e
                 </span>
                 <span class="mclose">
                  )
                 </span>
                </span>
               </span>
              </span>
              <span class="vlist-s">
               ​
              </span>
             </span>
             <span class="vlist-r">
              <span class="vlist" style="height: 0.936em;">
               <span class="">
               </span>
              </span>
             </span>
            </span>
           </span>
           <span class="mclose nulldelimiter">
           </span>
          </span>
         </span>
        </span>
       </span>
      </span>
     </span>
    </p>
    <p>
     由于分母
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        P 
        
       
         ( 
        
       
         f 
        
       
         ) 
        
       
      
        P(f)
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 1em; vertical-align: -0.25em;">
         </span>
         <span class="mord mathnormal" style="margin-right: 0.1389em;">
          P
         </span>
         <span class="mopen">
          (
         </span>
         <span class="mord mathnormal" style="margin-right: 0.1076em;">
          f
         </span>
         <span class="mclose">
          )
         </span>
        </span>
       </span>
      </span>
     </span>
     对优化无影响，目标简化为：
    </p>
    <p>
     <span class="katex--display">
      <span class="katex-display">
       <span class="katex">
        <span class="katex-mathml">
         e 
          
         
           ^ 
          
         
        
          = 
         
        
          arg 
         
        
          ⁡ 
         
         
          
          
            max 
           
          
            ⁡ 
           
          
         
           e 
          
         
        
          P 
         
        
          ( 
         
        
          f 
         
        
          ∣ 
         
        
          e 
         
        
          ) 
         
        
          P 
         
        
          ( 
         
        
          e 
         
        
          ) 
         
        
       
         \hat{e} = \arg\max_e P(f|e)P(e)
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.6944em;">
          </span>
          <span class="mord accent">
           <span class="vlist-t">
            <span class="vlist-r">
             <span class="vlist" style="height: 0.6944em;">
              <span class="" style="top: -3em;">
               <span class="pstrut" style="height: 3em;">
               </span>
               <span class="mord mathnormal">
                e
               </span>
              </span>
              <span class="" style="top: -3em;">
               <span class="pstrut" style="height: 3em;">
               </span>
               <span class="accent-body" style="left: -0.1944em;">
                <span class="mord">
                 ^
                </span>
               </span>
              </span>
             </span>
            </span>
           </span>
          </span>
          <span class="mspace" style="margin-right: 0.2778em;">
          </span>
          <span class="mrel">
           =
          </span>
          <span class="mspace" style="margin-right: 0.2778em;">
          </span>
         </span>
         <span class="base">
          <span class="strut" style="height: 1.45em; vertical-align: -0.7em;">
          </span>
          <span class="mop">
           ar
           <span style="margin-right: 0.0139em;">
            g
           </span>
          </span>
          <span class="mspace" style="margin-right: 0.1667em;">
          </span>
          <span class="mop op-limits">
           <span class="vlist-t vlist-t2">
            <span class="vlist-r">
             <span class="vlist" style="height: 0.4306em;">
              <span class="" style="top: -2.4em; margin-left: 0em;">
               <span class="pstrut" style="height: 3em;">
               </span>
               <span class="sizing reset-size6 size3 mtight">
                <span class="mord mathnormal mtight">
                 e
                </span>
               </span>
              </span>
              <span class="" style="top: -3em;">
               <span class="pstrut" style="height: 3em;">
               </span>
               <span class="">
                <span class="mop">
                 max
                </span>
               </span>
              </span>
             </span>
             <span class="vlist-s">
              ​
             </span>
            </span>
            <span class="vlist-r">
             <span class="vlist" style="height: 0.7em;">
              <span class="">
              </span>
             </span>
            </span>
           </span>
          </span>
          <span class="mspace" style="margin-right: 0.1667em;">
          </span>
          <span class="mord mathnormal" style="margin-right: 0.1389em;">
           P
          </span>
          <span class="mopen">
           (
          </span>
          <span class="mord mathnormal" style="margin-right: 0.1076em;">
           f
          </span>
          <span class="mord">
           ∣
          </span>
          <span class="mord mathnormal">
           e
          </span>
          <span class="mclose">
           )
          </span>
          <span class="mord mathnormal" style="margin-right: 0.1389em;">
           P
          </span>
          <span class="mopen">
           (
          </span>
          <span class="mord mathnormal">
           e
          </span>
          <span class="mclose">
           )
          </span>
         </span>
        </span>
       </span>
      </span>
     </span>
    </p>
    <p>
     <strong>
      组件详解
     </strong>
     ：
     <br/>
     •
     <strong>
      翻译模型
     </strong>
     ：建模
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        P 
        
       
         ( 
        
       
         f 
        
       
         ∣ 
        
       
         e 
        
       
         ) 
        
       
      
        P(f|e)
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 1em; vertical-align: -0.25em;">
         </span>
         <span class="mord mathnormal" style="margin-right: 0.1389em;">
          P
         </span>
         <span class="mopen">
          (
         </span>
         <span class="mord mathnormal" style="margin-right: 0.1076em;">
          f
         </span>
         <span class="mord">
          ∣
         </span>
         <span class="mord mathnormal">
          e
         </span>
         <span class="mclose">
          )
         </span>
        </span>
       </span>
      </span>
     </span>
     ，通过短语表存储双语短语对及其概率
     <br/>
     •
     <strong>
      语言模型
     </strong>
     ：建模
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        P 
        
       
         ( 
        
       
         e 
        
       
         ) 
        
       
      
        P(e)
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 1em; vertical-align: -0.25em;">
         </span>
         <span class="mord mathnormal" style="margin-right: 0.1389em;">
          P
         </span>
         <span class="mopen">
          (
         </span>
         <span class="mord mathnormal">
          e
         </span>
         <span class="mclose">
          )
         </span>
        </span>
       </span>
      </span>
     </span>
     ，常用3-gram或5-gram模型
     <br/>
     •
     <strong>
      解码器
     </strong>
     ：动态规划算法寻找最优路径
    </p>
    <pre><code class="prism language-python"><span class="token comment"># Moses工具包中的解码器核心逻辑（简化版）</span>
<span class="token keyword">class</span> <span class="token class-name">Decoder</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> phrase_table<span class="token punctuation">,</span> lm<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>phrase_table <span class="token operator">=</span> phrase_table
        self<span class="token punctuation">.</span>lm <span class="token operator">=</span> language_model

    <span class="token keyword">def</span> <span class="token function">decode</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> source_sentence<span class="token punctuation">)</span><span class="token punctuation">:</span>
        chart <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>  <span class="token comment"># 动态规划表格</span>
        n <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>source_sentence<span class="token punctuation">)</span>
        <span class="token comment"># 初始化：覆盖0个词的翻译假设</span>
        chart<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>Hypothesis<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                phrase <span class="token operator">=</span> source_sentence<span class="token punctuation">[</span>i<span class="token punctuation">:</span>j<span class="token punctuation">]</span>
                <span class="token keyword">if</span> phrase <span class="token keyword">in</span> self<span class="token punctuation">.</span>phrase_table<span class="token punctuation">:</span>
                    <span class="token keyword">for</span> hyp <span class="token keyword">in</span> chart<span class="token punctuation">.</span>get<span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                        new_hyp <span class="token operator">=</span> hyp<span class="token punctuation">.</span>extend<span class="token punctuation">(</span>phrase<span class="token punctuation">,</span> self<span class="token punctuation">.</span>phrase_table<span class="token punctuation">[</span>phrase<span class="token punctuation">]</span><span class="token punctuation">)</span>
                        chart<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span>new_hyp<span class="token punctuation">)</span>
        <span class="token comment"># 回溯最优路径</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>backtrack<span class="token punctuation">(</span>chart<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre>
    <h4>
     <a id="12__55">
     </a>
     1.2 短语抽取与训练流程
    </h4>
    <p>
     短语抽取是SMT的核心预处理步骤，其完整流程如下：
    </p>
    <h5>
     <a id="121__58">
     </a>
     1.2.1 词对齐算法
    </h5>
    <p>
     采用IBM Model 2进行词对齐训练，数学推导如下：
    </p>
    <p>
     <strong>
      训练目标
     </strong>
     ：最大化对数似然
     <br/>
     <span class="katex--display">
      <span class="katex-display">
       <span class="katex">
        <span class="katex-mathml">
         L 
         
        
          = 
         
         
         
           ∑ 
          
          
          
            ( 
           
          
            f 
           
          
            , 
           
          
            e 
           
          
            ) 
           
          
         
        
          log 
         
        
          ⁡ 
         
        
          P 
         
        
          ( 
         
        
          f 
         
        
          ∣ 
         
        
          e 
         
        
          ) 
         
        
          = 
         
         
         
           ∑ 
          
          
          
            ( 
           
          
            f 
           
          
            , 
           
          
            e 
           
          
            ) 
           
          
         
         
         
           ∑ 
          
          
          
            j 
           
          
            = 
           
          
            1 
           
          
         
           m 
          
         
        
          log 
         
        
          ⁡ 
         
         
         
           ∑ 
          
          
          
            i 
           
          
            = 
           
          
            0 
           
          
         
           l 
          
         
        
          t 
         
        
          ( 
         
         
         
           f 
          
         
           j 
          
         
        
          ∣ 
         
         
         
           e 
          
         
           i 
          
         
        
          ) 
         
        
          a 
         
        
          ( 
         
        
          i 
         
        
          ∣ 
         
        
          j 
         
        
          , 
         
        
          l 
         
        
          , 
         
        
          m 
         
        
          ) 
         
        
       
         \mathcal{L} = \sum_{(f,e)} \log P(f|e) = \sum_{(f,e)} \sum_{j=1}^{m} \log \sum_{i=0}^{l} t(f_j|e_i)a(i|j,l,m)
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.6833em;">
          </span>
          <span class="mord mathcal">
           L
          </span>
          <span class="mspace" style="margin-right: 0.2778em;">
          </span>
          <span class="mrel">
           =
          </span>
          <span class="mspace" style="margin-right: 0.2778em;">
          </span>
         </span>
         <span class="base">
          <span class="strut" style="height: 2.566em; vertical-align: -1.516em;">
          </span>
          <span class="mop op-limits">
           <span class="vlist-t vlist-t2">
            <span class="vlist-r">
             <span class="vlist" style="height: 1.05em;">
              <span class="" style="top: -1.809em; margin-left: 0em;">
               <span class="pstrut" style="height: 3.05em;">
               </span>
               <span class="sizing reset-size6 size3 mtight">
                <span class="mord mtight">
                 <span class="mopen mtight">
                  (
                 </span>
                 <span class="mord mathnormal mtight" style="margin-right: 0.1076em;">
                  f
                 </span>
                 <span class="mpunct mtight">
                  ,
                 </span>
                 <span class="mord mathnormal mtight">
                  e
                 </span>
                 <span class="mclose mtight">
                  )
                 </span>
                </span>
               </span>
              </span>
              <span class="" style="top: -3.05em;">
               <span class="pstrut" style="height: 3.05em;">
               </span>
               <span class="">
                <span class="mop op-symbol large-op">
                 ∑
                </span>
               </span>
              </span>
             </span>
             <span class="vlist-s">
              ​
             </span>
            </span>
            <span class="vlist-r">
             <span class="vlist" style="height: 1.516em;">
              <span class="">
              </span>
             </span>
            </span>
           </span>
          </span>
          <span class="mspace" style="margin-right: 0.1667em;">
          </span>
          <span class="mop">
           lo
           <span style="margin-right: 0.0139em;">
            g
           </span>
          </span>
          <span class="mspace" style="margin-right: 0.1667em;">
          </span>
          <span class="mord mathnormal" style="margin-right: 0.1389em;">
           P
          </span>
          <span class="mopen">
           (
          </span>
          <span class="mord mathnormal" style="margin-right: 0.1076em;">
           f
          </span>
          <span class="mord">
           ∣
          </span>
          <span class="mord mathnormal">
           e
          </span>
          <span class="mclose">
           )
          </span>
          <span class="mspace" style="margin-right: 0.2778em;">
          </span>
          <span class="mrel">
           =
          </span>
          <span class="mspace" style="margin-right: 0.2778em;">
          </span>
         </span>
         <span class="base">
          <span class="strut" style="height: 3.3521em; vertical-align: -1.516em;">
          </span>
          <span class="mop op-limits">
           <span class="vlist-t vlist-t2">
            <span class="vlist-r">
             <span class="vlist" style="height: 1.05em;">
              <span class="" style="top: -1.809em; margin-left: 0em;">
               <span class="pstrut" style="height: 3.05em;">
               </span>
               <span class="sizing reset-size6 size3 mtight">
                <span class="mord mtight">
                 <span class="mopen mtight">
                  (
                 </span>
                 <span class="mord mathnormal mtight" style="margin-right: 0.1076em;">
                  f
                 </span>
                 <span class="mpunct mtight">
                  ,
                 </span>
                 <span class="mord mathnormal mtight">
                  e
                 </span>
                 <span class="mclose mtight">
                  )
                 </span>
                </span>
               </span>
              </span>
              <span class="" style="top: -3.05em;">
               <span class="pstrut" style="height: 3.05em;">
               </span>
               <span class="">
                <span class="mop op-symbol large-op">
                 ∑
                </span>
               </span>
              </span>
             </span>
             <span class="vlist-s">
              ​
             </span>
            </span>
            <span class="vlist-r">
             <span class="vlist" style="height: 1.516em;">
              <span class="">
              </span>
             </span>
            </span>
           </span>
          </span>
          <span class="mspace" style="margin-right: 0.1667em;">
          </span>
          <span class="mop op-limits">
           <span class="vlist-t vlist-t2">
            <span class="vlist-r">
             <span class="vlist" style="height: 1.6514em;">
              <span class="" style="top: -1.8723em; margin-left: 0em;">
               <span class="pstrut" style="height: 3.05em;">
               </span>
               <span class="sizing reset-size6 size3 mtight">
                <span class="mord mtight">
                 <span class="mord mathnormal mtight" style="margin-right: 0.0572em;">
                  j
                 </span>
                 <span class="mrel mtight">
                  =
                 </span>
                 <span class="mord mtight">
                  1
                 </span>
                </span>
               </span>
              </span>
              <span class="" style="top: -3.05em;">
               <span class="pstrut" style="height: 3.05em;">
               </span>
               <span class="">
                <span class="mop op-symbol large-op">
                 ∑
                </span>
               </span>
              </span>
              <span class="" style="top: -4.3em; margin-left: 0em;">
               <span class="pstrut" style="height: 3.05em;">
               </span>
               <span class="sizing reset-size6 size3 mtight">
                <span class="mord mtight">
                 <span class="mord mathnormal mtight">
                  m
                 </span>
                </span>
               </span>
              </span>
             </span>
             <span class="vlist-s">
              ​
             </span>
            </span>
            <span class="vlist-r">
             <span class="vlist" style="height: 1.4138em;">
              <span class="">
              </span>
             </span>
            </span>
           </span>
          </span>
          <span class="mspace" style="margin-right: 0.1667em;">
          </span>
          <span class="mop">
           lo
           <span style="margin-right: 0.0139em;">
            g
           </span>
          </span>
          <span class="mspace" style="margin-right: 0.1667em;">
          </span>
          <span class="mop op-limits">
           <span class="vlist-t vlist-t2">
            <span class="vlist-r">
             <span class="vlist" style="height: 1.8361em;">
              <span class="" style="top: -1.8723em; margin-left: 0em;">
               <span class="pstrut" style="height: 3.05em;">
               </span>
               <span class="sizing reset-size6 size3 mtight">
                <span class="mord mtight">
                 <span class="mord mathnormal mtight">
                  i
                 </span>
                 <span class="mrel mtight">
                  =
                 </span>
                 <span class="mord mtight">
                  0
                 </span>
                </span>
               </span>
              </span>
              <span class="" style="top: -3.05em;">
               <span class="pstrut" style="height: 3.05em;">
               </span>
               <span class="">
                <span class="mop op-symbol large-op">
                 ∑
                </span>
               </span>
              </span>
              <span class="" style="top: -4.3em; margin-left: 0em;">
               <span class="pstrut" style="height: 3.05em;">
               </span>
               <span class="sizing reset-size6 size3 mtight">
                <span class="mord mtight">
                 <span class="mord mathnormal mtight" style="margin-right: 0.0197em;">
                  l
                 </span>
                </span>
               </span>
              </span>
             </span>
             <span class="vlist-s">
              ​
             </span>
            </span>
            <span class="vlist-r">
             <span class="vlist" style="height: 1.2777em;">
              <span class="">
              </span>
             </span>
            </span>
           </span>
          </span>
          <span class="mspace" style="margin-right: 0.1667em;">
          </span>
          <span class="mord mathnormal">
           t
          </span>
          <span class="mopen">
           (
          </span>
          <span class="mord">
           <span class="mord mathnormal" style="margin-right: 0.1076em;">
            f
           </span>
           <span class="msupsub">
            <span class="vlist-t vlist-t2">
             <span class="vlist-r">
              <span class="vlist" style="height: 0.3117em;">
               <span class="" style="top: -2.55em; margin-left: -0.1076em; margin-right: 0.05em;">
                <span class="pstrut" style="height: 2.7em;">
                </span>
                <span class="sizing reset-size6 size3 mtight">
                 <span class="mord mathnormal mtight" style="margin-right: 0.0572em;">
                  j
                 </span>
                </span>
               </span>
              </span>
              <span class="vlist-s">
               ​
              </span>
             </span>
             <span class="vlist-r">
              <span class="vlist" style="height: 0.2861em;">
               <span class="">
               </span>
              </span>
             </span>
            </span>
           </span>
          </span>
          <span class="mord">
           ∣
          </span>
          <span class="mord">
           <span class="mord mathnormal">
            e
           </span>
           <span class="msupsub">
            <span class="vlist-t vlist-t2">
             <span class="vlist-r">
              <span class="vlist" style="height: 0.3117em;">
               <span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;">
                <span class="pstrut" style="height: 2.7em;">
                </span>
                <span class="sizing reset-size6 size3 mtight">
                 <span class="mord mathnormal mtight">
                  i
                 </span>
                </span>
               </span>
              </span>
              <span class="vlist-s">
               ​
              </span>
             </span>
             <span class="vlist-r">
              <span class="vlist" style="height: 0.15em;">
               <span class="">
               </span>
              </span>
             </span>
            </span>
           </span>
          </span>
          <span class="mclose">
           )
          </span>
          <span class="mord mathnormal">
           a
          </span>
          <span class="mopen">
           (
          </span>
          <span class="mord mathnormal">
           i
          </span>
          <span class="mord">
           ∣
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0572em;">
           j
          </span>
          <span class="mpunct">
           ,
          </span>
          <span class="mspace" style="margin-right: 0.1667em;">
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0197em;">
           l
          </span>
          <span class="mpunct">
           ,
          </span>
          <span class="mspace" style="margin-right: 0.1667em;">
          </span>
          <span class="mord mathnormal">
           m
          </span>
          <span class="mclose">
           )
          </span>
         </span>
        </span>
       </span>
      </span>
     </span>
    </p>
    <p>
     <strong>
      EM算法步骤
     </strong>
     ：
    </p>
    <ol>
     <li>
      <strong>
       E步
      </strong>
      ：计算对齐概率
      <br/>
      <span class="katex--display">
       <span class="katex-display">
        <span class="katex">
         <span class="katex-mathml">
          P 
          
         
           ( 
          
          
          
            a 
           
          
            j 
           
          
         
           = 
          
         
           i 
          
         
           ∣ 
          
         
           f 
          
         
           , 
          
         
           e 
          
         
           ) 
          
         
           = 
          
          
           
           
             t 
            
           
             ( 
            
            
            
              f 
             
            
              j 
             
            
           
             ∣ 
            
            
            
              e 
             
            
              i 
             
            
           
             ) 
            
           
             a 
            
           
             ( 
            
           
             i 
            
           
             ∣ 
            
           
             j 
            
           
             , 
            
           
             l 
            
           
             , 
            
           
             m 
            
           
             ) 
            
           
           
            
            
              ∑ 
             
             
             
               k 
              
             
               = 
              
             
               0 
              
             
            
              l 
             
            
           
             t 
            
           
             ( 
            
            
            
              f 
             
            
              j 
             
            
           
             ∣ 
            
            
            
              e 
             
            
              k 
             
            
           
             ) 
            
           
             a 
            
           
             ( 
            
           
             k 
            
           
             ∣ 
            
           
             j 
            
           
             , 
            
           
             l 
            
           
             , 
            
           
             m 
            
           
             ) 
            
           
          
         
        
          P(a_j=i|f,e) = \frac{t(f_j|e_i)a(i|j,l,m)}{\sum_{k=0}^l t(f_j|e_k)a(k|j,l,m)}
         </span>
         <span class="katex-html">
          <span class="base">
           <span class="strut" style="height: 1.0361em; vertical-align: -0.2861em;">
           </span>
           <span class="mord mathnormal" style="margin-right: 0.1389em;">
            P
           </span>
           <span class="mopen">
            (
           </span>
           <span class="mord">
            <span class="mord mathnormal">
             a
            </span>
            <span class="msupsub">
             <span class="vlist-t vlist-t2">
              <span class="vlist-r">
               <span class="vlist" style="height: 0.3117em;">
                <span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;">
                 <span class="pstrut" style="height: 2.7em;">
                 </span>
                 <span class="sizing reset-size6 size3 mtight">
                  <span class="mord mathnormal mtight" style="margin-right: 0.0572em;">
                   j
                  </span>
                 </span>
                </span>
               </span>
               <span class="vlist-s">
                ​
               </span>
              </span>
              <span class="vlist-r">
               <span class="vlist" style="height: 0.2861em;">
                <span class="">
                </span>
               </span>
              </span>
             </span>
            </span>
           </span>
           <span class="mspace" style="margin-right: 0.2778em;">
           </span>
           <span class="mrel">
            =
           </span>
           <span class="mspace" style="margin-right: 0.2778em;">
           </span>
          </span>
          <span class="base">
           <span class="strut" style="height: 1em; vertical-align: -0.25em;">
           </span>
           <span class="mord mathnormal">
            i
           </span>
           <span class="mord">
            ∣
           </span>
           <span class="mord mathnormal" style="margin-right: 0.1076em;">
            f
           </span>
           <span class="mpunct">
            ,
           </span>
           <span class="mspace" style="margin-right: 0.1667em;">
           </span>
           <span class="mord mathnormal">
            e
           </span>
           <span class="mclose">
            )
           </span>
           <span class="mspace" style="margin-right: 0.2778em;">
           </span>
           <span class="mrel">
            =
           </span>
           <span class="mspace" style="margin-right: 0.2778em;">
           </span>
          </span>
          <span class="base">
           <span class="strut" style="height: 2.6057em; vertical-align: -1.1787em;">
           </span>
           <span class="mord">
            <span class="mopen nulldelimiter">
            </span>
            <span class="mfrac">
             <span class="vlist-t vlist-t2">
              <span class="vlist-r">
               <span class="vlist" style="height: 1.427em;">
                <span class="" style="top: -2.121em;">
                 <span class="pstrut" style="height: 3em;">
                 </span>
                 <span class="mord">
                  <span class="mop">
                   <span class="mop op-symbol small-op" style="position: relative; top: 0em;">
                    ∑
                   </span>
                   <span class="msupsub">
                    <span class="vlist-t vlist-t2">
                     <span class="vlist-r">
                      <span class="vlist" style="height: 0.989em;">
                       <span class="" style="top: -2.4003em; margin-left: 0em; margin-right: 0.05em;">
                        <span class="pstrut" style="height: 2.7em;">
                        </span>
                        <span class="sizing reset-size6 size3 mtight">
                         <span class="mord mtight">
                          <span class="mord mathnormal mtight" style="margin-right: 0.0315em;">
                           k
                          </span>
                          <span class="mrel mtight">
                           =
                          </span>
                          <span class="mord mtight">
                           0
                          </span>
                         </span>
                        </span>
                       </span>
                       <span class="" style="top: -3.2029em; margin-right: 0.05em;">
                        <span class="pstrut" style="height: 2.7em;">
                        </span>
                        <span class="sizing reset-size6 size3 mtight">
                         <span class="mord mathnormal mtight" style="margin-right: 0.0197em;">
                          l
                         </span>
                        </span>
                       </span>
                      </span>
                      <span class="vlist-s">
                       ​
                      </span>
                     </span>
                     <span class="vlist-r">
                      <span class="vlist" style="height: 0.2997em;">
                       <span class="">
                       </span>
                      </span>
                     </span>
                    </span>
                   </span>
                  </span>
                  <span class="mspace" style="margin-right: 0.1667em;">
                  </span>
                  <span class="mord mathnormal">
                   t
                  </span>
                  <span class="mopen">
                   (
                  </span>
                  <span class="mord">
                   <span class="mord mathnormal" style="margin-right: 0.1076em;">
                    f
                   </span>
                   <span class="msupsub">
                    <span class="vlist-t vlist-t2">
                     <span class="vlist-r">
                      <span class="vlist" style="height: 0.3117em;">
                       <span class="" style="top: -2.55em; margin-left: -0.1076em; margin-right: 0.05em;">
                        <span class="pstrut" style="height: 2.7em;">
                        </span>
                        <span class="sizing reset-size6 size3 mtight">
                         <span class="mord mathnormal mtight" style="margin-right: 0.0572em;">
                          j
                         </span>
                        </span>
                       </span>
                      </span>
                      <span class="vlist-s">
                       ​
                      </span>
                     </span>
                     <span class="vlist-r">
                      <span class="vlist" style="height: 0.2861em;">
                       <span class="">
                       </span>
                      </span>
                     </span>
                    </span>
                   </span>
                  </span>
                  <span class="mord">
                   ∣
                  </span>
                  <span class="mord">
                   <span class="mord mathnormal">
                    e
                   </span>
                   <span class="msupsub">
                    <span class="vlist-t vlist-t2">
                     <span class="vlist-r">
                      <span class="vlist" style="height: 0.3361em;">
                       <span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;">
                        <span class="pstrut" style="height: 2.7em;">
                        </span>
                        <span class="sizing reset-size6 size3 mtight">
                         <span class="mord mathnormal mtight" style="margin-right: 0.0315em;">
                          k
                         </span>
                        </span>
                       </span>
                      </span>
                      <span class="vlist-s">
                       ​
                      </span>
                     </span>
                     <span class="vlist-r">
                      <span class="vlist" style="height: 0.15em;">
                       <span class="">
                       </span>
                      </span>
                     </span>
                    </span>
                   </span>
                  </span>
                  <span class="mclose">
                   )
                  </span>
                  <span class="mord mathnormal">
                   a
                  </span>
                  <span class="mopen">
                   (
                  </span>
                  <span class="mord mathnormal" style="margin-right: 0.0315em;">
                   k
                  </span>
                  <span class="mord">
                   ∣
                  </span>
                  <span class="mord mathnormal" style="margin-right: 0.0572em;">
                   j
                  </span>
                  <span class="mpunct">
                   ,
                  </span>
                  <span class="mspace" style="margin-right: 0.1667em;">
                  </span>
                  <span class="mord mathnormal" style="margin-right: 0.0197em;">
                   l
                  </span>
                  <span class="mpunct">
                   ,
                  </span>
                  <span class="mspace" style="margin-right: 0.1667em;">
                  </span>
                  <span class="mord mathnormal">
                   m
                  </span>
                  <span class="mclose">
                   )
                  </span>
                 </span>
                </span>
                <span class="" style="top: -3.23em;">
                 <span class="pstrut" style="height: 3em;">
                 </span>
                 <span class="frac-line" style="border-bottom-width: 0.04em;">
                 </span>
                </span>
                <span class="" style="top: -3.677em;">
                 <span class="pstrut" style="height: 3em;">
                 </span>
                 <span class="mord">
                  <span class="mord mathnormal">
                   t
                  </span>
                  <span class="mopen">
                   (
                  </span>
                  <span class="mord">
                   <span class="mord mathnormal" style="margin-right: 0.1076em;">
                    f
                   </span>
                   <span class="msupsub">
                    <span class="vlist-t vlist-t2">
                     <span class="vlist-r">
                      <span class="vlist" style="height: 0.3117em;">
                       <span class="" style="top: -2.55em; margin-left: -0.1076em; margin-right: 0.05em;">
                        <span class="pstrut" style="height: 2.7em;">
                        </span>
                        <span class="sizing reset-size6 size3 mtight">
                         <span class="mord mathnormal mtight" style="margin-right: 0.0572em;">
                          j
                         </span>
                        </span>
                       </span>
                      </span>
                      <span class="vlist-s">
                       ​
                      </span>
                     </span>
                     <span class="vlist-r">
                      <span class="vlist" style="height: 0.2861em;">
                       <span class="">
                       </span>
                      </span>
                     </span>
                    </span>
                   </span>
                  </span>
                  <span class="mord">
                   ∣
                  </span>
                  <span class="mord">
                   <span class="mord mathnormal">
                    e
                   </span>
                   <span class="msupsub">
                    <span class="vlist-t vlist-t2">
                     <span class="vlist-r">
                      <span class="vlist" style="height: 0.3117em;">
                       <span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;">
                        <span class="pstrut" style="height: 2.7em;">
                        </span>
                        <span class="sizing reset-size6 size3 mtight">
                         <span class="mord mathnormal mtight">
                          i
                         </span>
                        </span>
                       </span>
                      </span>
                      <span class="vlist-s">
                       ​
                      </span>
                     </span>
                     <span class="vlist-r">
                      <span class="vlist" style="height: 0.15em;">
                       <span class="">
                       </span>
                      </span>
                     </span>
                    </span>
                   </span>
                  </span>
                  <span class="mclose">
                   )
                  </span>
                  <span class="mord mathnormal">
                   a
                  </span>
                  <span class="mopen">
                   (
                  </span>
                  <span class="mord mathnormal">
                   i
                  </span>
                  <span class="mord">
                   ∣
                  </span>
                  <span class="mord mathnormal" style="margin-right: 0.0572em;">
                   j
                  </span>
                  <span class="mpunct">
                   ,
                  </span>
                  <span class="mspace" style="margin-right: 0.1667em;">
                  </span>
                  <span class="mord mathnormal" style="margin-right: 0.0197em;">
                   l
                  </span>
                  <span class="mpunct">
                   ,
                  </span>
                  <span class="mspace" style="margin-right: 0.1667em;">
                  </span>
                  <span class="mord mathnormal">
                   m
                  </span>
                  <span class="mclose">
                   )
                  </span>
                 </span>
                </span>
               </span>
               <span class="vlist-s">
                ​
               </span>
              </span>
              <span class="vlist-r">
               <span class="vlist" style="height: 1.1787em;">
                <span class="">
                </span>
               </span>
              </span>
             </span>
            </span>
            <span class="mclose nulldelimiter">
            </span>
           </span>
          </span>
         </span>
        </span>
       </span>
      </span>
     </li>
     <li>
      <strong>
       M步
      </strong>
      ：更新参数
      <br/>
      <span class="katex--display">
       <span class="katex-display">
        <span class="katex">
         <span class="katex-mathml">
          t 
          
         
           ( 
          
         
           f 
          
         
           ∣ 
          
         
           e 
          
         
           ) 
          
         
           = 
          
          
           
           
             count 
            
           
             ( 
            
           
             f 
            
           
             , 
            
           
             e 
            
           
             ) 
            
           
           
            
            
              ∑ 
             
             
             
               f 
              
             
               ′ 
              
             
            
           
             count 
            
           
             ( 
            
            
            
              f 
             
            
              ′ 
             
            
           
             , 
            
           
             e 
            
           
             ) 
            
           
          
          
         
           a 
          
         
           ( 
          
         
           i 
          
         
           ∣ 
          
         
           j 
          
         
           , 
          
         
           l 
          
         
           , 
          
         
           m 
          
         
           ) 
          
         
           = 
          
          
           
           
             count 
            
           
             ( 
            
           
             i 
            
           
             , 
            
           
             j 
            
           
             , 
            
           
             l 
            
           
             , 
            
           
             m 
            
           
             ) 
            
           
           
            
            
              ∑ 
             
             
             
               k 
              
             
               = 
              
             
               0 
              
             
            
              l 
             
            
           
             count 
            
           
             ( 
            
           
             k 
            
           
             , 
            
           
             j 
            
           
             , 
            
           
             l 
            
           
             , 
            
           
             m 
            
           
             ) 
            
           
          
         
        
          t(f|e) = \frac{\text{count}(f,e)}{\sum_{f'}\text{count}(f',e)} \\ a(i|j,l,m) = \frac{\text{count}(i,j,l,m)}{\sum_{k=0}^l \text{count}(k,j,l,m)}
         </span>
         <span class="katex-html">
          <span class="base">
           <span class="strut" style="height: 1em; vertical-align: -0.25em;">
           </span>
           <span class="mord mathnormal">
            t
           </span>
           <span class="mopen">
            (
           </span>
           <span class="mord mathnormal" style="margin-right: 0.1076em;">
            f
           </span>
           <span class="mord">
            ∣
           </span>
           <span class="mord mathnormal">
            e
           </span>
           <span class="mclose">
            )
           </span>
           <span class="mspace" style="margin-right: 0.2778em;">
           </span>
           <span class="mrel">
            =
           </span>
           <span class="mspace" style="margin-right: 0.2778em;">
           </span>
          </span>
          <span class="base">
           <span class="strut" style="height: 2.5488em; vertical-align: -1.1218em;">
           </span>
           <span class="mord">
            <span class="mopen nulldelimiter">
            </span>
            <span class="mfrac">
             <span class="vlist-t vlist-t2">
              <span class="vlist-r">
               <span class="vlist" style="height: 1.427em;">
                <span class="" style="top: -2.314em;">
                 <span class="pstrut" style="height: 3em;">
                 </span>
                 <span class="mord">
                  <span class="mop">
                   <span class="mop op-symbol small-op" style="position: relative; top: 0em;">
                    ∑
                   </span>
                   <span class="msupsub">
                    <span class="vlist-t vlist-t2">
                     <span class="vlist-r">
                      <span class="vlist" style="height: 0.1864em;">
                       <span class="" style="top: -2.4003em; margin-left: 0em; margin-right: 0.05em;">
                        <span class="pstrut" style="height: 2.7em;">
                        </span>
                        <span class="sizing reset-size6 size3 mtight">
                         <span class="mord mtight">
                          <span class="mord mtight">
                           <span class="mord mathnormal mtight" style="margin-right: 0.1076em;">
                            f
                           </span>
                           <span class="msupsub">
                            <span class="vlist-t">
                             <span class="vlist-r">
                              <span class="vlist" style="height: 0.6828em;">
                               <span class="" style="top: -2.786em; margin-right: 0.0714em;">
                                <span class="pstrut" style="height: 2.5em;">
                                </span>
                                <span class="sizing reset-size3 size1 mtight">
                                 <span class="mord mtight">
                                  <span class="mord mtight">
                                   ′
                                  </span>
                                 </span>
                                </span>
                               </span>
                              </span>
                             </span>
                            </span>
                           </span>
                          </span>
                         </span>
                        </span>
                       </span>
                      </span>
                      <span class="vlist-s">
                       ​
                      </span>
                     </span>
                     <span class="vlist-r">
                      <span class="vlist" style="height: 0.4358em;">
                       <span class="">
                       </span>
                      </span>
                     </span>
                    </span>
                   </span>
                  </span>
                  <span class="mspace" style="margin-right: 0.1667em;">
                  </span>
                  <span class="mord text">
                   <span class="mord">
                    count
                   </span>
                  </span>
                  <span class="mopen">
                   (
                  </span>
                  <span class="mord">
                   <span class="mord mathnormal" style="margin-right: 0.1076em;">
                    f
                   </span>
                   <span class="msupsub">
                    <span class="vlist-t">
                     <span class="vlist-r">
                      <span class="vlist" style="height: 0.6779em;">
                       <span class="" style="top: -2.989em; margin-right: 0.05em;">
                        <span class="pstrut" style="height: 2.7em;">
                        </span>
                        <span class="sizing reset-size6 size3 mtight">
                         <span class="mord mtight">
                          <span class="mord mtight">
                           ′
                          </span>
                         </span>
                        </span>
                       </span>
                      </span>
                     </span>
                    </span>
                   </span>
                  </span>
                  <span class="mpunct">
                   ,
                  </span>
                  <span class="mspace" style="margin-right: 0.1667em;">
                  </span>
                  <span class="mord mathnormal">
                   e
                  </span>
                  <span class="mclose">
                   )
                  </span>
                 </span>
                </span>
                <span class="" style="top: -3.23em;">
                 <span class="pstrut" style="height: 3em;">
                 </span>
                 <span class="frac-line" style="border-bottom-width: 0.04em;">
                 </span>
                </span>
                <span class="" style="top: -3.677em;">
                 <span class="pstrut" style="height: 3em;">
                 </span>
                 <span class="mord">
                  <span class="mord text">
                   <span class="mord">
                    count
                   </span>
                  </span>
                  <span class="mopen">
                   (
                  </span>
                  <span class="mord mathnormal" style="margin-right: 0.1076em;">
                   f
                  </span>
                  <span class="mpunct">
                   ,
                  </span>
                  <span class="mspace" style="margin-right: 0.1667em;">
                  </span>
                  <span class="mord mathnormal">
                   e
                  </span>
                  <span class="mclose">
                   )
                  </span>
                 </span>
                </span>
               </span>
               <span class="vlist-s">
                ​
               </span>
              </span>
              <span class="vlist-r">
               <span class="vlist" style="height: 1.1218em;">
                <span class="">
                </span>
               </span>
              </span>
             </span>
            </span>
            <span class="mclose nulldelimiter">
            </span>
           </span>
          </span>
          <span class="mspace newline">
          </span>
          <span class="base">
           <span class="strut" style="height: 1em; vertical-align: -0.25em;">
           </span>
           <span class="mord mathnormal">
            a
           </span>
           <span class="mopen">
            (
           </span>
           <span class="mord mathnormal">
            i
           </span>
           <span class="mord">
            ∣
           </span>
           <span class="mord mathnormal" style="margin-right: 0.0572em;">
            j
           </span>
           <span class="mpunct">
            ,
           </span>
           <span class="mspace" style="margin-right: 0.1667em;">
           </span>
           <span class="mord mathnormal" style="margin-right: 0.0197em;">
            l
           </span>
           <span class="mpunct">
            ,
           </span>
           <span class="mspace" style="margin-right: 0.1667em;">
           </span>
           <span class="mord mathnormal">
            m
           </span>
           <span class="mclose">
            )
           </span>
           <span class="mspace" style="margin-right: 0.2778em;">
           </span>
           <span class="mrel">
            =
           </span>
           <span class="mspace" style="margin-right: 0.2778em;">
           </span>
          </span>
          <span class="base">
           <span class="strut" style="height: 2.6057em; vertical-align: -1.1787em;">
           </span>
           <span class="mord">
            <span class="mopen nulldelimiter">
            </span>
            <span class="mfrac">
             <span class="vlist-t vlist-t2">
              <span class="vlist-r">
               <span class="vlist" style="height: 1.427em;">
                <span class="" style="top: -2.121em;">
                 <span class="pstrut" style="height: 3em;">
                 </span>
                 <span class="mord">
                  <span class="mop">
                   <span class="mop op-symbol small-op" style="position: relative; top: 0em;">
                    ∑
                   </span>
                   <span class="msupsub">
                    <span class="vlist-t vlist-t2">
                     <span class="vlist-r">
                      <span class="vlist" style="height: 0.989em;">
                       <span class="" style="top: -2.4003em; margin-left: 0em; margin-right: 0.05em;">
                        <span class="pstrut" style="height: 2.7em;">
                        </span>
                        <span class="sizing reset-size6 size3 mtight">
                         <span class="mord mtight">
                          <span class="mord mathnormal mtight" style="margin-right: 0.0315em;">
                           k
                          </span>
                          <span class="mrel mtight">
                           =
                          </span>
                          <span class="mord mtight">
                           0
                          </span>
                         </span>
                        </span>
                       </span>
                       <span class="" style="top: -3.2029em; margin-right: 0.05em;">
                        <span class="pstrut" style="height: 2.7em;">
                        </span>
                        <span class="sizing reset-size6 size3 mtight">
                         <span class="mord mathnormal mtight" style="margin-right: 0.0197em;">
                          l
                         </span>
                        </span>
                       </span>
                      </span>
                      <span class="vlist-s">
                       ​
                      </span>
                     </span>
                     <span class="vlist-r">
                      <span class="vlist" style="height: 0.2997em;">
                       <span class="">
                       </span>
                      </span>
                     </span>
                    </span>
                   </span>
                  </span>
                  <span class="mspace" style="margin-right: 0.1667em;">
                  </span>
                  <span class="mord text">
                   <span class="mord">
                    count
                   </span>
                  </span>
                  <span class="mopen">
                   (
                  </span>
                  <span class="mord mathnormal" style="margin-right: 0.0315em;">
                   k
                  </span>
                  <span class="mpunct">
                   ,
                  </span>
                  <span class="mspace" style="margin-right: 0.1667em;">
                  </span>
                  <span class="mord mathnormal" style="margin-right: 0.0572em;">
                   j
                  </span>
                  <span class="mpunct">
                   ,
                  </span>
                  <span class="mspace" style="margin-right: 0.1667em;">
                  </span>
                  <span class="mord mathnormal" style="margin-right: 0.0197em;">
                   l
                  </span>
                  <span class="mpunct">
                   ,
                  </span>
                  <span class="mspace" style="margin-right: 0.1667em;">
                  </span>
                  <span class="mord mathnormal">
                   m
                  </span>
                  <span class="mclose">
                   )
                  </span>
                 </span>
                </span>
                <span class="" style="top: -3.23em;">
                 <span class="pstrut" style="height: 3em;">
                 </span>
                 <span class="frac-line" style="border-bottom-width: 0.04em;">
                 </span>
                </span>
                <span class="" style="top: -3.677em;">
                 <span class="pstrut" style="height: 3em;">
                 </span>
                 <span class="mord">
                  <span class="mord text">
                   <span class="mord">
                    count
                   </span>
                  </span>
                  <span class="mopen">
                   (
                  </span>
                  <span class="mord mathnormal">
                   i
                  </span>
                  <span class="mpunct">
                   ,
                  </span>
                  <span class="mspace" style="margin-right: 0.1667em;">
                  </span>
                  <span class="mord mathnormal" style="margin-right: 0.0572em;">
                   j
                  </span>
                  <span class="mpunct">
                   ,
                  </span>
                  <span class="mspace" style="margin-right: 0.1667em;">
                  </span>
                  <span class="mord mathnormal" style="margin-right: 0.0197em;">
                   l
                  </span>
                  <span class="mpunct">
                   ,
                  </span>
                  <span class="mspace" style="margin-right: 0.1667em;">
                  </span>
                  <span class="mord mathnormal">
                   m
                  </span>
                  <span class="mclose">
                   )
                  </span>
                 </span>
                </span>
               </span>
               <span class="vlist-s">
                ​
               </span>
              </span>
              <span class="vlist-r">
               <span class="vlist" style="height: 1.1787em;">
                <span class="">
                </span>
               </span>
              </span>
             </span>
            </span>
            <span class="mclose nulldelimiter">
            </span>
           </span>
          </span>
         </span>
        </span>
       </span>
      </span>
     </li>
    </ol>
    <h5>
     <a id="122__77">
     </a>
     1.2.2 短语抽取规则
    </h5>
    <p>
     从词对齐矩阵中抽取满足
     <strong>
      对称条件
     </strong>
     的短语对：
     <br/>
     •
     <strong>
      源短语位置
     </strong>
     ：
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        i 
         
        
          s 
         
        
       
      
        i_s
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.8095em; vertical-align: -0.15em;">
         </span>
         <span class="mord">
          <span class="mord mathnormal">
           i
          </span>
          <span class="msupsub">
           <span class="vlist-t vlist-t2">
            <span class="vlist-r">
             <span class="vlist" style="height: 0.1514em;">
              <span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;">
               <span class="pstrut" style="height: 2.7em;">
               </span>
               <span class="sizing reset-size6 size3 mtight">
                <span class="mord mathnormal mtight">
                 s
                </span>
               </span>
              </span>
             </span>
             <span class="vlist-s">
              ​
             </span>
            </span>
            <span class="vlist-r">
             <span class="vlist" style="height: 0.15em;">
              <span class="">
              </span>
             </span>
            </span>
           </span>
          </span>
         </span>
        </span>
       </span>
      </span>
     </span>
     到
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        j 
         
        
          s 
         
        
       
      
        j_s
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.854em; vertical-align: -0.1944em;">
         </span>
         <span class="mord">
          <span class="mord mathnormal" style="margin-right: 0.0572em;">
           j
          </span>
          <span class="msupsub">
           <span class="vlist-t vlist-t2">
            <span class="vlist-r">
             <span class="vlist" style="height: 0.1514em;">
              <span class="" style="top: -2.55em; margin-left: -0.0572em; margin-right: 0.05em;">
               <span class="pstrut" style="height: 2.7em;">
               </span>
               <span class="sizing reset-size6 size3 mtight">
                <span class="mord mathnormal mtight">
                 s
                </span>
               </span>
              </span>
             </span>
             <span class="vlist-s">
              ​
             </span>
            </span>
            <span class="vlist-r">
             <span class="vlist" style="height: 0.15em;">
              <span class="">
              </span>
             </span>
            </span>
           </span>
          </span>
         </span>
        </span>
       </span>
      </span>
     </span>
     <br/>
     •
     <strong>
      目标短语位置
     </strong>
     ：
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        i 
         
        
          t 
         
        
       
      
        i_t
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.8095em; vertical-align: -0.15em;">
         </span>
         <span class="mord">
          <span class="mord mathnormal">
           i
          </span>
          <span class="msupsub">
           <span class="vlist-t vlist-t2">
            <span class="vlist-r">
             <span class="vlist" style="height: 0.2806em;">
              <span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;">
               <span class="pstrut" style="height: 2.7em;">
               </span>
               <span class="sizing reset-size6 size3 mtight">
                <span class="mord mathnormal mtight">
                 t
                </span>
               </span>
              </span>
             </span>
             <span class="vlist-s">
              ​
             </span>
            </span>
            <span class="vlist-r">
             <span class="vlist" style="height: 0.15em;">
              <span class="">
              </span>
             </span>
            </span>
           </span>
          </span>
         </span>
        </span>
       </span>
      </span>
     </span>
     到
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        j 
         
        
          t 
         
        
       
      
        j_t
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.854em; vertical-align: -0.1944em;">
         </span>
         <span class="mord">
          <span class="mord mathnormal" style="margin-right: 0.0572em;">
           j
          </span>
          <span class="msupsub">
           <span class="vlist-t vlist-t2">
            <span class="vlist-r">
             <span class="vlist" style="height: 0.2806em;">
              <span class="" style="top: -2.55em; margin-left: -0.0572em; margin-right: 0.05em;">
               <span class="pstrut" style="height: 2.7em;">
               </span>
               <span class="sizing reset-size6 size3 mtight">
                <span class="mord mathnormal mtight">
                 t
                </span>
               </span>
              </span>
             </span>
             <span class="vlist-s">
              ​
             </span>
            </span>
            <span class="vlist-r">
             <span class="vlist" style="height: 0.15em;">
              <span class="">
              </span>
             </span>
            </span>
           </span>
          </span>
         </span>
        </span>
       </span>
      </span>
     </span>
     <br/>
     • 所有对齐连接必须位于矩形区域
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        [ 
        
        
        
          i 
         
        
          s 
         
        
       
         , 
        
        
        
          j 
         
        
          s 
         
        
       
         ] 
        
       
         × 
        
       
         [ 
        
        
        
          i 
         
        
          t 
         
        
       
         , 
        
        
        
          j 
         
        
          t 
         
        
       
         ] 
        
       
      
        [i_s,j_s] \times [i_t,j_t]
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 1em; vertical-align: -0.25em;">
         </span>
         <span class="mopen">
          [
         </span>
         <span class="mord">
          <span class="mord mathnormal">
           i
          </span>
          <span class="msupsub">
           <span class="vlist-t vlist-t2">
            <span class="vlist-r">
             <span class="vlist" style="height: 0.1514em;">
              <span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;">
               <span class="pstrut" style="height: 2.7em;">
               </span>
               <span class="sizing reset-size6 size3 mtight">
                <span class="mord mathnormal mtight">
                 s
                </span>
               </span>
              </span>
             </span>
             <span class="vlist-s">
              ​
             </span>
            </span>
            <span class="vlist-r">
             <span class="vlist" style="height: 0.15em;">
              <span class="">
              </span>
             </span>
            </span>
           </span>
          </span>
         </span>
         <span class="mpunct">
          ,
         </span>
         <span class="mspace" style="margin-right: 0.1667em;">
         </span>
         <span class="mord">
          <span class="mord mathnormal" style="margin-right: 0.0572em;">
           j
          </span>
          <span class="msupsub">
           <span class="vlist-t vlist-t2">
            <span class="vlist-r">
             <span class="vlist" style="height: 0.1514em;">
              <span class="" style="top: -2.55em; margin-left: -0.0572em; margin-right: 0.05em;">
               <span class="pstrut" style="height: 2.7em;">
               </span>
               <span class="sizing reset-size6 size3 mtight">
                <span class="mord mathnormal mtight">
                 s
                </span>
               </span>
              </span>
             </span>
             <span class="vlist-s">
              ​
             </span>
            </span>
            <span class="vlist-r">
             <span class="vlist" style="height: 0.15em;">
              <span class="">
              </span>
             </span>
            </span>
           </span>
          </span>
         </span>
         <span class="mclose">
          ]
         </span>
         <span class="mspace" style="margin-right: 0.2222em;">
         </span>
         <span class="mbin">
          ×
         </span>
         <span class="mspace" style="margin-right: 0.2222em;">
         </span>
        </span>
        <span class="base">
         <span class="strut" style="height: 1em; vertical-align: -0.25em;">
         </span>
         <span class="mopen">
          [
         </span>
         <span class="mord">
          <span class="mord mathnormal">
           i
          </span>
          <span class="msupsub">
           <span class="vlist-t vlist-t2">
            <span class="vlist-r">
             <span class="vlist" style="height: 0.2806em;">
              <span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;">
               <span class="pstrut" style="height: 2.7em;">
               </span>
               <span class="sizing reset-size6 size3 mtight">
                <span class="mord mathnormal mtight">
                 t
                </span>
               </span>
              </span>
             </span>
             <span class="vlist-s">
              ​
             </span>
            </span>
            <span class="vlist-r">
             <span class="vlist" style="height: 0.15em;">
              <span class="">
              </span>
             </span>
            </span>
           </span>
          </span>
         </span>
         <span class="mpunct">
          ,
         </span>
         <span class="mspace" style="margin-right: 0.1667em;">
         </span>
         <span class="mord">
          <span class="mord mathnormal" style="margin-right: 0.0572em;">
           j
          </span>
          <span class="msupsub">
           <span class="vlist-t vlist-t2">
            <span class="vlist-r">
             <span class="vlist" style="height: 0.2806em;">
              <span class="" style="top: -2.55em; margin-left: -0.0572em; margin-right: 0.05em;">
               <span class="pstrut" style="height: 2.7em;">
               </span>
               <span class="sizing reset-size6 size3 mtight">
                <span class="mord mathnormal mtight">
                 t
                </span>
               </span>
              </span>
             </span>
             <span class="vlist-s">
              ​
             </span>
            </span>
            <span class="vlist-r">
             <span class="vlist" style="height: 0.15em;">
              <span class="">
              </span>
             </span>
            </span>
           </span>
          </span>
         </span>
         <span class="mclose">
          ]
         </span>
        </span>
       </span>
      </span>
     </span>
     内
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/20e99073aac44699906007716600ed9d.png#pic_center"/>
    </p>
    <p>
     <em>
      图2：关键词抽取综述
     </em>
    </p>
    <h5>
     <a id="123__87">
     </a>
     1.2.3 特征权重训练
    </h5>
    <p>
     采用
     <strong>
      最小错误率训练
     </strong>
     （MERT）优化特征权重：
    </p>
    <p>
     <span class="katex--display">
      <span class="katex-display">
       <span class="katex">
        <span class="katex-mathml">
         λ 
          
         
           ^ 
          
         
        
          = 
         
        
          arg 
         
        
          ⁡ 
         
         
          
          
            min 
           
          
            ⁡ 
           
          
         
           λ 
          
         
         
         
           ∑ 
          
          
          
            k 
           
          
            = 
           
          
            1 
           
          
         
           K 
          
         
        
          Err 
         
        
          ( 
         
         
         
           e 
          
          
          
            ( 
           
          
            k 
           
          
            ) 
           
          
         
        
          , 
         
         
          
          
            e 
           
          
            ^ 
           
          
          
          
            ( 
           
          
            k 
           
          
            ) 
           
          
         
        
          ) 
         
        
       
         \hat{\lambda} = \arg\min_{\lambda} \sum_{k=1}^K \text{Err}(e^{(k)}, \hat{e}^{(k)})
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.9579em;">
          </span>
          <span class="mord accent">
           <span class="vlist-t">
            <span class="vlist-r">
             <span class="vlist" style="height: 0.9579em;">
              <span class="" style="top: -3em;">
               <span class="pstrut" style="height: 3em;">
               </span>
               <span class="mord mathnormal">
                λ
               </span>
              </span>
              <span class="" style="top: -3.2634em;">
               <span class="pstrut" style="height: 3em;">
               </span>
               <span class="accent-body" style="left: -0.25em;">
                <span class="mord">
                 ^
                </span>
               </span>
              </span>
             </span>
            </span>
           </span>
          </span>
          <span class="mspace" style="margin-right: 0.2778em;">
          </span>
          <span class="mrel">
           =
          </span>
          <span class="mspace" style="margin-right: 0.2778em;">
          </span>
         </span>
         <span class="base">
          <span class="strut" style="height: 3.1304em; vertical-align: -1.3021em;">
          </span>
          <span class="mop">
           ar
           <span style="margin-right: 0.0139em;">
            g
           </span>
          </span>
          <span class="mspace" style="margin-right: 0.1667em;">
          </span>
          <span class="mop op-limits">
           <span class="vlist-t vlist-t2">
            <span class="vlist-r">
             <span class="vlist" style="height: 0.6679em;">
              <span class="" style="top: -2.3479em; margin-left: 0em;">
               <span class="pstrut" style="height: 3em;">
               </span>
               <span class="sizing reset-size6 size3 mtight">
                <span class="mord mtight">
                 <span class="mord mathnormal mtight">
                  λ
                 </span>
                </span>
               </span>
              </span>
              <span class="" style="top: -3em;">
               <span class="pstrut" style="height: 3em;">
               </span>
               <span class="">
                <span class="mop">
                 min
                </span>
               </span>
              </span>
             </span>
             <span class="vlist-s">
              ​
             </span>
            </span>
            <span class="vlist-r">
             <span class="vlist" style="height: 0.7521em;">
              <span class="">
              </span>
             </span>
            </span>
           </span>
          </span>
          <span class="mspace" style="margin-right: 0.1667em;">
          </span>
          <span class="mop op-limits">
           <span class="vlist-t vlist-t2">
            <span class="vlist-r">
             <span class="vlist" style="height: 1.8283em;">
              <span class="" style="top: -1.8479em; margin-left: 0em;">
               <span class="pstrut" style="height: 3.05em;">
               </span>
               <span class="sizing reset-size6 size3 mtight">
                <span class="mord mtight">
                 <span class="mord mathnormal mtight" style="margin-right: 0.0315em;">
                  k
                 </span>
                 <span class="mrel mtight">
                  =
                 </span>
                 <span class="mord mtight">
                  1
                 </span>
                </span>
               </span>
              </span>
              <span class="" style="top: -3.05em;">
               <span class="pstrut" style="height: 3.05em;">
               </span>
               <span class="">
                <span class="mop op-symbol large-op">
                 ∑
                </span>
               </span>
              </span>
              <span class="" style="top: -4.3em; margin-left: 0em;">
               <span class="pstrut" style="height: 3.05em;">
               </span>
               <span class="sizing reset-size6 size3 mtight">
                <span class="mord mathnormal mtight" style="margin-right: 0.0715em;">
                 K
                </span>
               </span>
              </span>
             </span>
             <span class="vlist-s">
              ​
             </span>
            </span>
            <span class="vlist-r">
             <span class="vlist" style="height: 1.3021em;">
              <span class="">
              </span>
             </span>
            </span>
           </span>
          </span>
          <span class="mspace" style="margin-right: 0.1667em;">
          </span>
          <span class="mord text">
           <span class="mord">
            Err
           </span>
          </span>
          <span class="mopen">
           (
          </span>
          <span class="mord">
           <span class="mord mathnormal">
            e
           </span>
           <span class="msupsub">
            <span class="vlist-t">
             <span class="vlist-r">
              <span class="vlist" style="height: 0.938em;">
               <span class="" style="top: -3.113em; margin-right: 0.05em;">
                <span class="pstrut" style="height: 2.7em;">
                </span>
                <span class="sizing reset-size6 size3 mtight">
                 <span class="mord mtight">
                  <span class="mopen mtight">
                   (
                  </span>
                  <span class="mord mathnormal mtight" style="margin-right: 0.0315em;">
                   k
                  </span>
                  <span class="mclose mtight">
                   )
                  </span>
                 </span>
                </span>
               </span>
              </span>
             </span>
            </span>
           </span>
          </span>
          <span class="mpunct">
           ,
          </span>
          <span class="mspace" style="margin-right: 0.1667em;">
          </span>
          <span class="mord">
           <span class="mord accent">
            <span class="vlist-t">
             <span class="vlist-r">
              <span class="vlist" style="height: 0.6944em;">
               <span class="" style="top: -3em;">
                <span class="pstrut" style="height: 3em;">
                </span>
                <span class="mord mathnormal">
                 e
                </span>
               </span>
               <span class="" style="top: -3em;">
                <span class="pstrut" style="height: 3em;">
                </span>
                <span class="accent-body" style="left: -0.1944em;">
                 <span class="mord">
                  ^
                 </span>
                </span>
               </span>
              </span>
             </span>
            </span>
           </span>
           <span class="msupsub">
            <span class="vlist-t">
             <span class="vlist-r">
              <span class="vlist" style="height: 0.938em;">
               <span class="" style="top: -3.113em; margin-right: 0.05em;">
                <span class="pstrut" style="height: 2.7em;">
                </span>
                <span class="sizing reset-size6 size3 mtight">
                 <span class="mord mtight">
                  <span class="mopen mtight">
                   (
                  </span>
                  <span class="mord mathnormal mtight" style="margin-right: 0.0315em;">
                   k
                  </span>
                  <span class="mclose mtight">
                   )
                  </span>
                 </span>
                </span>
               </span>
              </span>
             </span>
            </span>
           </span>
          </span>
          <span class="mclose">
           )
          </span>
         </span>
        </span>
       </span>
      </span>
     </span>
    </p>
    <p>
     其中
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        Err 
        
       
      
        \text{Err}
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6833em;">
         </span>
         <span class="mord text">
          <span class="mord">
           Err
          </span>
         </span>
        </span>
       </span>
      </span>
     </span>
     为翻译错误率函数，通过网格搜索在开发集上优化
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        λ 
        
       
      
        \lambda
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6944em;">
         </span>
         <span class="mord mathnormal">
          λ
         </span>
        </span>
       </span>
      </span>
     </span>
     参数。
    </p>
    <h4>
     <a id="13__96">
     </a>
     1.3 系统优化技巧
    </h4>
    <p>
     <strong>
      数据稀疏性解决方案
     </strong>
     ：
     <br/>
     •
     <strong>
      回译（Back-Translation）
     </strong>
     ：生成伪双语语料
    </p>
    <pre><code class="prism language-python"><span class="token keyword">def</span> <span class="token function">back_translate</span><span class="token punctuation">(</span>monolingual_corpus<span class="token punctuation">,</span> reverse_translator<span class="token punctuation">)</span><span class="token punctuation">:</span>
    pseudo_pairs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">for</span> src_text <span class="token keyword">in</span> monolingual_corpus<span class="token punctuation">:</span>
        <span class="token comment"># 将单语文本翻译为另一语言</span>
        intermediate <span class="token operator">=</span> reverse_translator<span class="token punctuation">.</span>translate<span class="token punctuation">(</span>src_text<span class="token punctuation">)</span>  
        <span class="token comment"># 再翻译回原语言</span>
        back_trans <span class="token operator">=</span> forward_translator<span class="token punctuation">.</span>translate<span class="token punctuation">(</span>intermediate<span class="token punctuation">)</span>
        pseudo_pairs<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">(</span>back_trans<span class="token punctuation">,</span> src_text<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> pseudo_pairs
</code></pre>
    <p>
     •
     <strong>
      短语泛化
     </strong>
     ：用词类（如名词短语）替代具体词汇
    </p>
    <p>
     <strong>
      调序模型改进
     </strong>
     ：
     <br/>
     •
     <strong>
      MSD模型
     </strong>
     ：将调序方向分为单调（M）、交换（S）、不连续（D）三类
     <br/>
     •
     <strong>
      神经网络调序
     </strong>
     ：用LSTM预测目标短语位置
    </p>
    <hr/>
    <h3>
     <a id="NMTSeq2SeqTransformer_118">
     </a>
     二、神经机器翻译（NMT）：从Seq2Seq到Transformer
    </h3>
    <h4>
     <a id="21_Seq2Seq_120">
     </a>
     2.1 Seq2Seq模型详解
    </h4>
    <p>
     早期NMT模型采用编码器-解码器架构，其数学形式为：
    </p>
    <p>
     <strong>
      编码器
     </strong>
     ：
     <br/>
     <span class="katex--display">
      <span class="katex-display">
       <span class="katex">
        <span class="katex-mathml">
         h 
          
         
           t 
          
          
          
            e 
           
          
            n 
           
          
            c 
           
          
         
        
          = 
         
        
          LSTM 
         
        
          ( 
         
         
         
           x 
          
         
           t 
          
         
        
          , 
         
         
         
           h 
          
          
          
            t 
           
          
            − 
           
          
            1 
           
          
          
          
            e 
           
          
            n 
           
          
            c 
           
          
         
        
          ) 
         
        
       
         h_t^{enc} = \text{LSTM}(x_t, h_{t-1}^{enc})
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.9614em; vertical-align: -0.247em;">
          </span>
          <span class="mord">
           <span class="mord mathnormal">
            h
           </span>
           <span class="msupsub">
            <span class="vlist-t vlist-t2">
             <span class="vlist-r">
              <span class="vlist" style="height: 0.7144em;">
               <span class="" style="top: -2.453em; margin-left: 0em; margin-right: 0.05em;">
                <span class="pstrut" style="height: 2.7em;">
                </span>
                <span class="sizing reset-size6 size3 mtight">
                 <span class="mord mathnormal mtight">
                  t
                 </span>
                </span>
               </span>
               <span class="" style="top: -3.113em; margin-right: 0.05em;">
                <span class="pstrut" style="height: 2.7em;">
                </span>
                <span class="sizing reset-size6 size3 mtight">
                 <span class="mord mtight">
                  <span class="mord mathnormal mtight">
                   e
                  </span>
                  <span class="mord mathnormal mtight">
                   n
                  </span>
                  <span class="mord mathnormal mtight">
                   c
                  </span>
                 </span>
                </span>
               </span>
              </span>
              <span class="vlist-s">
               ​
              </span>
             </span>
             <span class="vlist-r">
              <span class="vlist" style="height: 0.247em;">
               <span class="">
               </span>
              </span>
             </span>
            </span>
           </span>
          </span>
          <span class="mspace" style="margin-right: 0.2778em;">
          </span>
          <span class="mrel">
           =
          </span>
          <span class="mspace" style="margin-right: 0.2778em;">
          </span>
         </span>
         <span class="base">
          <span class="strut" style="height: 1.0553em; vertical-align: -0.3053em;">
          </span>
          <span class="mord text">
           <span class="mord">
            LSTM
           </span>
          </span>
          <span class="mopen">
           (
          </span>
          <span class="mord">
           <span class="mord mathnormal">
            x
           </span>
           <span class="msupsub">
            <span class="vlist-t vlist-t2">
             <span class="vlist-r">
              <span class="vlist" style="height: 0.2806em;">
               <span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;">
                <span class="pstrut" style="height: 2.7em;">
                </span>
                <span class="sizing reset-size6 size3 mtight">
                 <span class="mord mathnormal mtight">
                  t
                 </span>
                </span>
               </span>
              </span>
              <span class="vlist-s">
               ​
              </span>
             </span>
             <span class="vlist-r">
              <span class="vlist" style="height: 0.15em;">
               <span class="">
               </span>
              </span>
             </span>
            </span>
           </span>
          </span>
          <span class="mpunct">
           ,
          </span>
          <span class="mspace" style="margin-right: 0.1667em;">
          </span>
          <span class="mord">
           <span class="mord mathnormal">
            h
           </span>
           <span class="msupsub">
            <span class="vlist-t vlist-t2">
             <span class="vlist-r">
              <span class="vlist" style="height: 0.7144em;">
               <span class="" style="top: -2.453em; margin-left: 0em; margin-right: 0.05em;">
                <span class="pstrut" style="height: 2.7em;">
                </span>
                <span class="sizing reset-size6 size3 mtight">
                 <span class="mord mtight">
                  <span class="mord mathnormal mtight">
                   t
                  </span>
                  <span class="mbin mtight">
                   −
                  </span>
                  <span class="mord mtight">
                   1
                  </span>
                 </span>
                </span>
               </span>
               <span class="" style="top: -3.113em; margin-right: 0.05em;">
                <span class="pstrut" style="height: 2.7em;">
                </span>
                <span class="sizing reset-size6 size3 mtight">
                 <span class="mord mtight">
                  <span class="mord mathnormal mtight">
                   e
                  </span>
                  <span class="mord mathnormal mtight">
                   n
                  </span>
                  <span class="mord mathnormal mtight">
                   c
                  </span>
                 </span>
                </span>
               </span>
              </span>
              <span class="vlist-s">
               ​
              </span>
             </span>
             <span class="vlist-r">
              <span class="vlist" style="height: 0.3053em;">
               <span class="">
               </span>
              </span>
             </span>
            </span>
           </span>
          </span>
          <span class="mclose">
           )
          </span>
         </span>
        </span>
       </span>
      </span>
     </span>
    </p>
    <p>
     <strong>
      解码器
     </strong>
     ：
     <br/>
     <span class="katex--display">
      <span class="katex-display">
       <span class="katex">
        <span class="katex-mathml">
         h 
          
         
           i 
          
          
          
            d 
           
          
            e 
           
          
            c 
           
          
         
        
          = 
         
        
          LSTM 
         
        
          ( 
         
         
         
           y 
          
          
          
            i 
           
          
            − 
           
          
            1 
           
          
         
        
          , 
         
         
         
           h 
          
          
          
            i 
           
          
            − 
           
          
            1 
           
          
          
          
            d 
           
          
            e 
           
          
            c 
           
          
         
        
          ) 
         
         
        
          P 
         
        
          ( 
         
         
         
           y 
          
         
           i 
          
         
        
          ∣ 
         
         
         
           y 
          
          
          
            &lt; 
           
          
            i 
           
          
         
        
          , 
         
        
          X 
         
        
          ) 
         
        
          = 
         
        
          softmax 
         
        
          ( 
         
         
         
           W 
          
         
           o 
          
         
         
         
           h 
          
         
           i 
          
          
          
            d 
           
          
            e 
           
          
            c 
           
          
         
        
          + 
         
         
         
           b 
          
         
           o 
          
         
        
          ) 
         
        
       
         h_i^{dec} = \text{LSTM}(y_{i-1}, h_{i-1}^{dec}) \\ P(y_i|y_{&lt;i}, X) = \text{softmax}(W_o h_i^{dec} + b_o)
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 1.1461em; vertical-align: -0.247em;">
          </span>
          <span class="mord">
           <span class="mord mathnormal">
            h
           </span>
           <span class="msupsub">
            <span class="vlist-t vlist-t2">
             <span class="vlist-r">
              <span class="vlist" style="height: 0.8991em;">
               <span class="" style="top: -2.453em; margin-left: 0em; margin-right: 0.05em;">
                <span class="pstrut" style="height: 2.7em;">
                </span>
                <span class="sizing reset-size6 size3 mtight">
                 <span class="mord mathnormal mtight">
                  i
                 </span>
                </span>
               </span>
               <span class="" style="top: -3.113em; margin-right: 0.05em;">
                <span class="pstrut" style="height: 2.7em;">
                </span>
                <span class="sizing reset-size6 size3 mtight">
                 <span class="mord mtight">
                  <span class="mord mathnormal mtight">
                   d
                  </span>
                  <span class="mord mathnormal mtight">
                   ec
                  </span>
                 </span>
                </span>
               </span>
              </span>
              <span class="vlist-s">
               ​
              </span>
             </span>
             <span class="vlist-r">
              <span class="vlist" style="height: 0.247em;">
               <span class="">
               </span>
              </span>
             </span>
            </span>
           </span>
          </span>
          <span class="mspace" style="margin-right: 0.2778em;">
          </span>
          <span class="mrel">
           =
          </span>
          <span class="mspace" style="margin-right: 0.2778em;">
          </span>
         </span>
         <span class="base">
          <span class="strut" style="height: 1.2044em; vertical-align: -0.3053em;">
          </span>
          <span class="mord text">
           <span class="mord">
            LSTM
           </span>
          </span>
          <span class="mopen">
           (
          </span>
          <span class="mord">
           <span class="mord mathnormal" style="margin-right: 0.0359em;">
            y
           </span>
           <span class="msupsub">
            <span class="vlist-t vlist-t2">
             <span class="vlist-r">
              <span class="vlist" style="height: 0.3117em;">
               <span class="" style="top: -2.55em; margin-left: -0.0359em; margin-right: 0.05em;">
                <span class="pstrut" style="height: 2.7em;">
                </span>
                <span class="sizing reset-size6 size3 mtight">
                 <span class="mord mtight">
                  <span class="mord mathnormal mtight">
                   i
                  </span>
                  <span class="mbin mtight">
                   −
                  </span>
                  <span class="mord mtight">
                   1
                  </span>
                 </span>
                </span>
               </span>
              </span>
              <span class="vlist-s">
               ​
              </span>
             </span>
             <span class="vlist-r">
              <span class="vlist" style="height: 0.2083em;">
               <span class="">
               </span>
              </span>
             </span>
            </span>
           </span>
          </span>
          <span class="mpunct">
           ,
          </span>
          <span class="mspace" style="margin-right: 0.1667em;">
          </span>
          <span class="mord">
           <span class="mord mathnormal">
            h
           </span>
           <span class="msupsub">
            <span class="vlist-t vlist-t2">
             <span class="vlist-r">
              <span class="vlist" style="height: 0.8991em;">
               <span class="" style="top: -2.453em; margin-left: 0em; margin-right: 0.05em;">
                <span class="pstrut" style="height: 2.7em;">
                </span>
                <span class="sizing reset-size6 size3 mtight">
                 <span class="mord mtight">
                  <span class="mord mathnormal mtight">
                   i
                  </span>
                  <span class="mbin mtight">
                   −
                  </span>
                  <span class="mord mtight">
                   1
                  </span>
                 </span>
                </span>
               </span>
               <span class="" style="top: -3.113em; margin-right: 0.05em;">
                <span class="pstrut" style="height: 2.7em;">
                </span>
                <span class="sizing reset-size6 size3 mtight">
                 <span class="mord mtight">
                  <span class="mord mathnormal mtight">
                   d
                  </span>
                  <span class="mord mathnormal mtight">
                   ec
                  </span>
                 </span>
                </span>
               </span>
              </span>
              <span class="vlist-s">
               ​
              </span>
             </span>
             <span class="vlist-r">
              <span class="vlist" style="height: 0.3053em;">
               <span class="">
               </span>
              </span>
             </span>
            </span>
           </span>
          </span>
          <span class="mclose">
           )
          </span>
         </span>
         <span class="mspace newline">
         </span>
         <span class="base">
          <span class="strut" style="height: 1em; vertical-align: -0.25em;">
          </span>
          <span class="mord mathnormal" style="margin-right: 0.1389em;">
           P
          </span>
          <span class="mopen">
           (
          </span>
          <span class="mord">
           <span class="mord mathnormal" style="margin-right: 0.0359em;">
            y
           </span>
           <span class="msupsub">
            <span class="vlist-t vlist-t2">
             <span class="vlist-r">
              <span class="vlist" style="height: 0.3117em;">
               <span class="" style="top: -2.55em; margin-left: -0.0359em; margin-right: 0.05em;">
                <span class="pstrut" style="height: 2.7em;">
                </span>
                <span class="sizing reset-size6 size3 mtight">
                 <span class="mord mathnormal mtight">
                  i
                 </span>
                </span>
               </span>
              </span>
              <span class="vlist-s">
               ​
              </span>
             </span>
             <span class="vlist-r">
              <span class="vlist" style="height: 0.15em;">
               <span class="">
               </span>
              </span>
             </span>
            </span>
           </span>
          </span>
          <span class="mord">
           ∣
          </span>
          <span class="mord">
           <span class="mord mathnormal" style="margin-right: 0.0359em;">
            y
           </span>
           <span class="msupsub">
            <span class="vlist-t vlist-t2">
             <span class="vlist-r">
              <span class="vlist" style="height: 0.3117em;">
               <span class="" style="top: -2.55em; margin-left: -0.0359em; margin-right: 0.05em;">
                <span class="pstrut" style="height: 2.7em;">
                </span>
                <span class="sizing reset-size6 size3 mtight">
                 <span class="mord mtight">
                  <span class="mrel mtight">
                   &lt;
                  </span>
                  <span class="mord mathnormal mtight">
                   i
                  </span>
                 </span>
                </span>
               </span>
              </span>
              <span class="vlist-s">
               ​
              </span>
             </span>
             <span class="vlist-r">
              <span class="vlist" style="height: 0.1774em;">
               <span class="">
               </span>
              </span>
             </span>
            </span>
           </span>
          </span>
          <span class="mpunct">
           ,
          </span>
          <span class="mspace" style="margin-right: 0.1667em;">
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0785em;">
           X
          </span>
          <span class="mclose">
           )
          </span>
          <span class="mspace" style="margin-right: 0.2778em;">
          </span>
          <span class="mrel">
           =
          </span>
          <span class="mspace" style="margin-right: 0.2778em;">
          </span>
         </span>
         <span class="base">
          <span class="strut" style="height: 1.1491em; vertical-align: -0.25em;">
          </span>
          <span class="mord text">
           <span class="mord">
            softmax
           </span>
          </span>
          <span class="mopen">
           (
          </span>
          <span class="mord">
           <span class="mord mathnormal" style="margin-right: 0.1389em;">
            W
           </span>
           <span class="msupsub">
            <span class="vlist-t vlist-t2">
             <span class="vlist-r">
              <span class="vlist" style="height: 0.1514em;">
               <span class="" style="top: -2.55em; margin-left: -0.1389em; margin-right: 0.05em;">
                <span class="pstrut" style="height: 2.7em;">
                </span>
                <span class="sizing reset-size6 size3 mtight">
                 <span class="mord mathnormal mtight">
                  o
                 </span>
                </span>
               </span>
              </span>
              <span class="vlist-s">
               ​
              </span>
             </span>
             <span class="vlist-r">
              <span class="vlist" style="height: 0.15em;">
               <span class="">
               </span>
              </span>
             </span>
            </span>
           </span>
          </span>
          <span class="mord">
           <span class="mord mathnormal">
            h
           </span>
           <span class="msupsub">
            <span class="vlist-t vlist-t2">
             <span class="vlist-r">
              <span class="vlist" style="height: 0.8991em;">
               <span class="" style="top: -2.453em; margin-left: 0em; margin-right: 0.05em;">
                <span class="pstrut" style="height: 2.7em;">
                </span>
                <span class="sizing reset-size6 size3 mtight">
                 <span class="mord mathnormal mtight">
                  i
                 </span>
                </span>
               </span>
               <span class="" style="top: -3.113em; margin-right: 0.05em;">
                <span class="pstrut" style="height: 2.7em;">
                </span>
                <span class="sizing reset-size6 size3 mtight">
                 <span class="mord mtight">
                  <span class="mord mathnormal mtight">
                   d
                  </span>
                  <span class="mord mathnormal mtight">
                   ec
                  </span>
                 </span>
                </span>
               </span>
              </span>
              <span class="vlist-s">
               ​
              </span>
             </span>
             <span class="vlist-r">
              <span class="vlist" style="height: 0.247em;">
               <span class="">
               </span>
              </span>
             </span>
            </span>
           </span>
          </span>
          <span class="mspace" style="margin-right: 0.2222em;">
          </span>
          <span class="mbin">
           +
          </span>
          <span class="mspace" style="margin-right: 0.2222em;">
          </span>
         </span>
         <span class="base">
          <span class="strut" style="height: 1em; vertical-align: -0.25em;">
          </span>
          <span class="mord">
           <span class="mord mathnormal">
            b
           </span>
           <span class="msupsub">
            <span class="vlist-t vlist-t2">
             <span class="vlist-r">
              <span class="vlist" style="height: 0.1514em;">
               <span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;">
                <span class="pstrut" style="height: 2.7em;">
                </span>
                <span class="sizing reset-size6 size3 mtight">
                 <span class="mord mathnormal mtight">
                  o
                 </span>
                </span>
               </span>
              </span>
              <span class="vlist-s">
               ​
              </span>
             </span>
             <span class="vlist-r">
              <span class="vlist" style="height: 0.15em;">
               <span class="">
               </span>
              </span>
             </span>
            </span>
           </span>
          </span>
          <span class="mclose">
           )
          </span>
         </span>
        </span>
       </span>
      </span>
     </span>
    </p>
    <p>
     <strong>
      梯度消失问题
     </strong>
     ：
     <br/>
     当输入序列长度超过30词时，反向传播梯度范数下降至初始值的
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        1 
        
        
        
          0 
         
         
         
           − 
          
         
           4 
          
         
        
       
      
        10^{-4}
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.8141em;">
         </span>
         <span class="mord">
          1
         </span>
         <span class="mord">
          <span class="mord">
           0
          </span>
          <span class="msupsub">
           <span class="vlist-t">
            <span class="vlist-r">
             <span class="vlist" style="height: 0.8141em;">
              <span class="" style="top: -3.063em; margin-right: 0.05em;">
               <span class="pstrut" style="height: 2.7em;">
               </span>
               <span class="sizing reset-size6 size3 mtight">
                <span class="mord mtight">
                 <span class="mord mtight">
                  −
                 </span>
                 <span class="mord mtight">
                  4
                 </span>
                </span>
               </span>
              </span>
             </span>
            </span>
           </span>
          </span>
         </span>
        </span>
       </span>
      </span>
     </span>
     倍，导致长句翻译质量劣化。
    </p>
    <h4>
     <a id="22__137">
     </a>
     2.2 注意力机制数学解析
    </h4>
    <p>
     注意力机制通过动态上下文向量解决信息瓶颈问题：
    </p>
    <p>
     <strong>
      上下文计算
     </strong>
     ：
     <br/>
     <span class="katex--display">
      <span class="katex-display">
       <span class="katex">
        <span class="katex-mathml">
         c 
          
         
           i 
          
         
        
          = 
         
         
         
           ∑ 
          
          
          
            j 
           
          
            = 
           
          
            1 
           
          
         
           T 
          
         
         
         
           α 
          
          
          
            i 
           
          
            j 
           
          
         
         
         
           h 
          
         
           j 
          
          
          
            e 
           
          
            n 
           
          
            c 
           
          
         
         
         
         
           α 
          
          
          
            i 
           
          
            j 
           
          
         
        
          = 
         
         
          
          
            exp 
           
          
            ⁡ 
           
          
            ( 
           
          
            score 
           
          
            ( 
           
           
           
             h 
            
           
             i 
            
            
            
              d 
             
            
              e 
             
            
              c 
             
            
           
          
            , 
           
           
           
             h 
            
           
             j 
            
            
            
              e 
             
            
              n 
             
            
              c 
             
            
           
          
            ) 
           
          
            ) 
           
          
          
           
           
             ∑ 
            
            
            
              k 
             
            
              = 
             
            
              1 
             
            
           
             T 
            
           
          
            exp 
           
          
            ⁡ 
           
          
            ( 
           
          
            score 
           
          
            ( 
           
           
           
             h 
            
           
             i 
            
            
            
              d 
             
            
              e 
             
            
              c 
             
            
           
          
            , 
           
           
           
             h 
            
           
             k 
            
            
            
              e 
             
            
              n 
             
            
              c 
             
            
           
          
            ) 
           
          
            ) 
           
          
         
        
       
         c_i = \sum_{j=1}^T \alpha_{ij} h_j^{enc} \\ \alpha_{ij} = \frac{\exp(\text{score}(h_i^{dec}, h_j^{enc}))}{\sum_{k=1}^T \exp(\text{score}(h_i^{dec}, h_k^{enc}))}
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.5806em; vertical-align: -0.15em;">
          </span>
          <span class="mord">
           <span class="mord mathnormal">
            c
           </span>
           <span class="msupsub">
            <span class="vlist-t vlist-t2">
             <span class="vlist-r">
              <span class="vlist" style="height: 0.3117em;">
               <span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;">
                <span class="pstrut" style="height: 2.7em;">
                </span>
                <span class="sizing reset-size6 size3 mtight">
                 <span class="mord mathnormal mtight">
                  i
                 </span>
                </span>
               </span>
              </span>
              <span class="vlist-s">
               ​
              </span>
             </span>
             <span class="vlist-r">
              <span class="vlist" style="height: 0.15em;">
               <span class="">
               </span>
              </span>
             </span>
            </span>
           </span>
          </span>
          <span class="mspace" style="margin-right: 0.2778em;">
          </span>
          <span class="mrel">
           =
          </span>
          <span class="mspace" style="margin-right: 0.2778em;">
          </span>
         </span>
         <span class="base">
          <span class="strut" style="height: 3.2421em; vertical-align: -1.4138em;">
          </span>
          <span class="mop op-limits">
           <span class="vlist-t vlist-t2">
            <span class="vlist-r">
             <span class="vlist" style="height: 1.8283em;">
              <span class="" style="top: -1.8723em; margin-left: 0em;">
               <span class="pstrut" style="height: 3.05em;">
               </span>
               <span class="sizing reset-size6 size3 mtight">
                <span class="mord mtight">
                 <span class="mord mathnormal mtight" style="margin-right: 0.0572em;">
                  j
                 </span>
                 <span class="mrel mtight">
                  =
                 </span>
                 <span class="mord mtight">
                  1
                 </span>
                </span>
               </span>
              </span>
              <span class="" style="top: -3.05em;">
               <span class="pstrut" style="height: 3.05em;">
               </span>
               <span class="">
                <span class="mop op-symbol large-op">
                 ∑
                </span>
               </span>
              </span>
              <span class="" style="top: -4.3em; margin-left: 0em;">
               <span class="pstrut" style="height: 3.05em;">
               </span>
               <span class="sizing reset-size6 size3 mtight">
                <span class="mord mathnormal mtight" style="margin-right: 0.1389em;">
                 T
                </span>
               </span>
              </span>
             </span>
             <span class="vlist-s">
              ​
             </span>
            </span>
            <span class="vlist-r">
             <span class="vlist" style="height: 1.4138em;">
              <span class="">
              </span>
             </span>
            </span>
           </span>
          </span>
          <span class="mspace" style="margin-right: 0.1667em;">
          </span>
          <span class="mord">
           <span class="mord mathnormal" style="margin-right: 0.0037em;">
            α
           </span>
           <span class="msupsub">
            <span class="vlist-t vlist-t2">
             <span class="vlist-r">
              <span class="vlist" style="height: 0.3117em;">
               <span class="" style="top: -2.55em; margin-left: -0.0037em; margin-right: 0.05em;">
                <span class="pstrut" style="height: 2.7em;">
                </span>
                <span class="sizing reset-size6 size3 mtight">
                 <span class="mord mtight">
                  <span class="mord mathnormal mtight" style="margin-right: 0.0572em;">
                   ij
                  </span>
                 </span>
                </span>
               </span>
              </span>
              <span class="vlist-s">
               ​
              </span>
             </span>
             <span class="vlist-r">
              <span class="vlist" style="height: 0.2861em;">
               <span class="">
               </span>
              </span>
             </span>
            </span>
           </span>
          </span>
          <span class="mord">
           <span class="mord mathnormal">
            h
           </span>
           <span class="msupsub">
            <span class="vlist-t vlist-t2">
             <span class="vlist-r">
              <span class="vlist" style="height: 0.7144em;">
               <span class="" style="top: -2.453em; margin-left: 0em; margin-right: 0.05em;">
                <span class="pstrut" style="height: 2.7em;">
                </span>
                <span class="sizing reset-size6 size3 mtight">
                 <span class="mord mathnormal mtight" style="margin-right: 0.0572em;">
                  j
                 </span>
                </span>
               </span>
               <span class="" style="top: -3.113em; margin-right: 0.05em;">
                <span class="pstrut" style="height: 2.7em;">
                </span>
                <span class="sizing reset-size6 size3 mtight">
                 <span class="mord mtight">
                  <span class="mord mathnormal mtight">
                   e
                  </span>
                  <span class="mord mathnormal mtight">
                   n
                  </span>
                  <span class="mord mathnormal mtight">
                   c
                  </span>
                 </span>
                </span>
               </span>
              </span>
              <span class="vlist-s">
               ​
              </span>
             </span>
             <span class="vlist-r">
              <span class="vlist" style="height: 0.3831em;">
               <span class="">
               </span>
              </span>
             </span>
            </span>
           </span>
          </span>
         </span>
         <span class="mspace newline">
         </span>
         <span class="base">
          <span class="strut" style="height: 0.7167em; vertical-align: -0.2861em;">
          </span>
          <span class="mord">
           <span class="mord mathnormal" style="margin-right: 0.0037em;">
            α
           </span>
           <span class="msupsub">
            <span class="vlist-t vlist-t2">
             <span class="vlist-r">
              <span class="vlist" style="height: 0.3117em;">
               <span class="" style="top: -2.55em; margin-left: -0.0037em; margin-right: 0.05em;">
                <span class="pstrut" style="height: 2.7em;">
                </span>
                <span class="sizing reset-size6 size3 mtight">
                 <span class="mord mtight">
                  <span class="mord mathnormal mtight" style="margin-right: 0.0572em;">
                   ij
                  </span>
                 </span>
                </span>
               </span>
              </span>
              <span class="vlist-s">
               ​
              </span>
             </span>
             <span class="vlist-r">
              <span class="vlist" style="height: 0.2861em;">
               <span class="">
               </span>
              </span>
             </span>
            </span>
           </span>
          </span>
          <span class="mspace" style="margin-right: 0.2778em;">
          </span>
          <span class="mrel">
           =
          </span>
          <span class="mspace" style="margin-right: 0.2778em;">
          </span>
         </span>
         <span class="base">
          <span class="strut" style="height: 2.8064em; vertical-align: -1.1725em;">
          </span>
          <span class="mord">
           <span class="mopen nulldelimiter">
           </span>
           <span class="mfrac">
            <span class="vlist-t vlist-t2">
             <span class="vlist-r">
              <span class="vlist" style="height: 1.6339em;">
               <span class="" style="top: -2.1288em;">
                <span class="pstrut" style="height: 3em;">
                </span>
                <span class="mord">
                 <span class="mop">
                  <span class="mop op-symbol small-op" style="position: relative; top: 0em;">
                   ∑
                  </span>
                  <span class="msupsub">
                   <span class="vlist-t vlist-t2">
                    <span class="vlist-r">
                     <span class="vlist" style="height: 0.9812em;">
                      <span class="" style="top: -2.4003em; margin-left: 0em; margin-right: 0.05em;">
                       <span class="pstrut" style="height: 2.7em;">
                       </span>
                       <span class="sizing reset-size6 size3 mtight">
                        <span class="mord mtight">
                         <span class="mord mathnormal mtight" style="margin-right: 0.0315em;">
                          k
                         </span>
                         <span class="mrel mtight">
                          =
                         </span>
                         <span class="mord mtight">
                          1
                         </span>
                        </span>
                       </span>
                      </span>
                      <span class="" style="top: -3.2029em; margin-right: 0.05em;">
                       <span class="pstrut" style="height: 2.7em;">
                       </span>
                       <span class="sizing reset-size6 size3 mtight">
                        <span class="mord mathnormal mtight" style="margin-right: 0.1389em;">
                         T
                        </span>
                       </span>
                      </span>
                     </span>
                     <span class="vlist-s">
                      ​
                     </span>
                    </span>
                    <span class="vlist-r">
                     <span class="vlist" style="height: 0.2997em;">
                      <span class="">
                      </span>
                     </span>
                    </span>
                   </span>
                  </span>
                 </span>
                 <span class="mspace" style="margin-right: 0.1667em;">
                 </span>
                 <span class="mop">
                  exp
                 </span>
                 <span class="mopen">
                  (
                 </span>
                 <span class="mord text">
                  <span class="mord">
                   score
                  </span>
                 </span>
                 <span class="mopen">
                  (
                 </span>
                 <span class="mord">
                  <span class="mord mathnormal">
                   h
                  </span>
                  <span class="msupsub">
                   <span class="vlist-t vlist-t2">
                    <span class="vlist-r">
                     <span class="vlist" style="height: 0.8309em;">
                      <span class="" style="top: -2.4231em; margin-left: 0em; margin-right: 0.05em;">
                       <span class="pstrut" style="height: 2.7em;">
                       </span>
                       <span class="sizing reset-size6 size3 mtight">
                        <span class="mord mathnormal mtight">
                         i
                        </span>
                       </span>
                      </span>
                      <span class="" style="top: -3.0448em; margin-right: 0.05em;">
                       <span class="pstrut" style="height: 2.7em;">
                       </span>
                       <span class="sizing reset-size6 size3 mtight">
                        <span class="mord mtight">
                         <span class="mord mathnormal mtight">
                          d
                         </span>
                         <span class="mord mathnormal mtight">
                          ec
                         </span>
                        </span>
                       </span>
                      </span>
                     </span>
                     <span class="vlist-s">
                      ​
                     </span>
                    </span>
                    <span class="vlist-r">
                     <span class="vlist" style="height: 0.2769em;">
                      <span class="">
                      </span>
                     </span>
                    </span>
                   </span>
                  </span>
                 </span>
                 <span class="mpunct">
                  ,
                 </span>
                 <span class="mspace" style="margin-right: 0.1667em;">
                 </span>
                 <span class="mord">
                  <span class="mord mathnormal">
                   h
                  </span>
                  <span class="msupsub">
                   <span class="vlist-t vlist-t2">
                    <span class="vlist-r">
                     <span class="vlist" style="height: 0.6462em;">
                      <span class="" style="top: -2.3987em; margin-left: 0em; margin-right: 0.05em;">
                       <span class="pstrut" style="height: 2.7em;">
                       </span>
                       <span class="sizing reset-size6 size3 mtight">
                        <span class="mord mathnormal mtight" style="margin-right: 0.0315em;">
                         k
                        </span>
                       </span>
                      </span>
                      <span class="" style="top: -3.0448em; margin-right: 0.05em;">
                       <span class="pstrut" style="height: 2.7em;">
                       </span>
                       <span class="sizing reset-size6 size3 mtight">
                        <span class="mord mtight">
                         <span class="mord mathnormal mtight">
                          e
                         </span>
                         <span class="mord mathnormal mtight">
                          n
                         </span>
                         <span class="mord mathnormal mtight">
                          c
                         </span>
                        </span>
                       </span>
                      </span>
                     </span>
                     <span class="vlist-s">
                      ​
                     </span>
                    </span>
                    <span class="vlist-r">
                     <span class="vlist" style="height: 0.3013em;">
                      <span class="">
                      </span>
                     </span>
                    </span>
                   </span>
                  </span>
                 </span>
                 <span class="mclose">
                  ))
                 </span>
                </span>
               </span>
               <span class="" style="top: -3.23em;">
                <span class="pstrut" style="height: 3em;">
                </span>
                <span class="frac-line" style="border-bottom-width: 0.04em;">
                </span>
               </span>
               <span class="" style="top: -3.7848em;">
                <span class="pstrut" style="height: 3em;">
                </span>
                <span class="mord">
                 <span class="mop">
                  exp
                 </span>
                 <span class="mopen">
                  (
                 </span>
                 <span class="mord text">
                  <span class="mord">
                   score
                  </span>
                 </span>
                 <span class="mopen">
                  (
                 </span>
                 <span class="mord">
                  <span class="mord mathnormal">
                   h
                  </span>
                  <span class="msupsub">
                   <span class="vlist-t vlist-t2">
                    <span class="vlist-r">
                     <span class="vlist" style="height: 0.8491em;">
                      <span class="" style="top: -2.4413em; margin-left: 0em; margin-right: 0.05em;">
                       <span class="pstrut" style="height: 2.7em;">
                       </span>
                       <span class="sizing reset-size6 size3 mtight">
                        <span class="mord mathnormal mtight">
                         i
                        </span>
                       </span>
                      </span>
                      <span class="" style="top: -3.063em; margin-right: 0.05em;">
                       <span class="pstrut" style="height: 2.7em;">
                       </span>
                       <span class="sizing reset-size6 size3 mtight">
                        <span class="mord mtight">
                         <span class="mord mathnormal mtight">
                          d
                         </span>
                         <span class="mord mathnormal mtight">
                          ec
                         </span>
                        </span>
                       </span>
                      </span>
                     </span>
                     <span class="vlist-s">
                      ​
                     </span>
                    </span>
                    <span class="vlist-r">
                     <span class="vlist" style="height: 0.2587em;">
                      <span class="">
                      </span>
                     </span>
                    </span>
                   </span>
                  </span>
                 </span>
                 <span class="mpunct">
                  ,
                 </span>
                 <span class="mspace" style="margin-right: 0.1667em;">
                 </span>
                 <span class="mord">
                  <span class="mord mathnormal">
                   h
                  </span>
                  <span class="msupsub">
                   <span class="vlist-t vlist-t2">
                    <span class="vlist-r">
                     <span class="vlist" style="height: 0.6644em;">
                      <span class="" style="top: -2.4413em; margin-left: 0em; margin-right: 0.05em;">
                       <span class="pstrut" style="height: 2.7em;">
                       </span>
                       <span class="sizing reset-size6 size3 mtight">
                        <span class="mord mathnormal mtight" style="margin-right: 0.0572em;">
                         j
                        </span>
                       </span>
                      </span>
                      <span class="" style="top: -3.063em; margin-right: 0.05em;">
                       <span class="pstrut" style="height: 2.7em;">
                       </span>
                       <span class="sizing reset-size6 size3 mtight">
                        <span class="mord mtight">
                         <span class="mord mathnormal mtight">
                          e
                         </span>
                         <span class="mord mathnormal mtight">
                          n
                         </span>
                         <span class="mord mathnormal mtight">
                          c
                         </span>
                        </span>
                       </span>
                      </span>
                     </span>
                     <span class="vlist-s">
                      ​
                     </span>
                    </span>
                    <span class="vlist-r">
                     <span class="vlist" style="height: 0.3948em;">
                      <span class="">
                      </span>
                     </span>
                    </span>
                   </span>
                  </span>
                 </span>
                 <span class="mclose">
                  ))
                 </span>
                </span>
               </span>
              </span>
              <span class="vlist-s">
               ​
              </span>
             </span>
             <span class="vlist-r">
              <span class="vlist" style="height: 1.1725em;">
               <span class="">
               </span>
              </span>
             </span>
            </span>
           </span>
           <span class="mclose nulldelimiter">
           </span>
          </span>
         </span>
        </span>
       </span>
      </span>
     </span>
    </p>
    <p>
     <strong>
      评分函数类型
     </strong>
     ：
     <br/>
     •
     <strong>
      点积
     </strong>
     ：
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        score 
        
       
         ( 
        
       
         a 
        
       
         , 
        
       
         b 
        
       
         ) 
        
       
         = 
        
        
        
          a 
         
        
          T 
         
        
       
         b 
        
       
      
        \text{score}(a,b) = a^T b
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 1em; vertical-align: -0.25em;">
         </span>
         <span class="mord text">
          <span class="mord">
           score
          </span>
         </span>
         <span class="mopen">
          (
         </span>
         <span class="mord mathnormal">
          a
         </span>
         <span class="mpunct">
          ,
         </span>
         <span class="mspace" style="margin-right: 0.1667em;">
         </span>
         <span class="mord mathnormal">
          b
         </span>
         <span class="mclose">
          )
         </span>
         <span class="mspace" style="margin-right: 0.2778em;">
         </span>
         <span class="mrel">
          =
         </span>
         <span class="mspace" style="margin-right: 0.2778em;">
         </span>
        </span>
        <span class="base">
         <span class="strut" style="height: 0.8413em;">
         </span>
         <span class="mord">
          <span class="mord mathnormal">
           a
          </span>
          <span class="msupsub">
           <span class="vlist-t">
            <span class="vlist-r">
             <span class="vlist" style="height: 0.8413em;">
              <span class="" style="top: -3.063em; margin-right: 0.05em;">
               <span class="pstrut" style="height: 2.7em;">
               </span>
               <span class="sizing reset-size6 size3 mtight">
                <span class="mord mathnormal mtight" style="margin-right: 0.1389em;">
                 T
                </span>
               </span>
              </span>
             </span>
            </span>
           </span>
          </span>
         </span>
         <span class="mord mathnormal">
          b
         </span>
        </span>
       </span>
      </span>
     </span>
     <br/>
     •
     <strong>
      双线性
     </strong>
     ：
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        score 
        
       
         ( 
        
       
         a 
        
       
         , 
        
       
         b 
        
       
         ) 
        
       
         = 
        
        
        
          a 
         
        
          T 
         
        
       
         W 
        
       
         b 
        
       
      
        \text{score}(a,b) = a^T W b
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 1em; vertical-align: -0.25em;">
         </span>
         <span class="mord text">
          <span class="mord">
           score
          </span>
         </span>
         <span class="mopen">
          (
         </span>
         <span class="mord mathnormal">
          a
         </span>
         <span class="mpunct">
          ,
         </span>
         <span class="mspace" style="margin-right: 0.1667em;">
         </span>
         <span class="mord mathnormal">
          b
         </span>
         <span class="mclose">
          )
         </span>
         <span class="mspace" style="margin-right: 0.2778em;">
         </span>
         <span class="mrel">
          =
         </span>
         <span class="mspace" style="margin-right: 0.2778em;">
         </span>
        </span>
        <span class="base">
         <span class="strut" style="height: 0.8413em;">
         </span>
         <span class="mord">
          <span class="mord mathnormal">
           a
          </span>
          <span class="msupsub">
           <span class="vlist-t">
            <span class="vlist-r">
             <span class="vlist" style="height: 0.8413em;">
              <span class="" style="top: -3.063em; margin-right: 0.05em;">
               <span class="pstrut" style="height: 2.7em;">
               </span>
               <span class="sizing reset-size6 size3 mtight">
                <span class="mord mathnormal mtight" style="margin-right: 0.1389em;">
                 T
                </span>
               </span>
              </span>
             </span>
            </span>
           </span>
          </span>
         </span>
         <span class="mord mathnormal">
          Wb
         </span>
        </span>
       </span>
      </span>
     </span>
     <br/>
     •
     <strong>
      加性
     </strong>
     ：
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        score 
        
       
         ( 
        
       
         a 
        
       
         , 
        
       
         b 
        
       
         ) 
        
       
         = 
        
        
        
          v 
         
        
          T 
         
        
       
         tanh 
        
       
         ⁡ 
        
       
         ( 
        
        
        
          W 
         
        
          a 
         
        
       
         a 
        
       
         + 
        
        
        
          W 
         
        
          b 
         
        
       
         b 
        
       
         ) 
        
       
      
        \text{score}(a,b) = v^T \tanh(W_a a + W_b b)
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 1em; vertical-align: -0.25em;">
         </span>
         <span class="mord text">
          <span class="mord">
           score
          </span>
         </span>
         <span class="mopen">
          (
         </span>
         <span class="mord mathnormal">
          a
         </span>
         <span class="mpunct">
          ,
         </span>
         <span class="mspace" style="margin-right: 0.1667em;">
         </span>
         <span class="mord mathnormal">
          b
         </span>
         <span class="mclose">
          )
         </span>
         <span class="mspace" style="margin-right: 0.2778em;">
         </span>
         <span class="mrel">
          =
         </span>
         <span class="mspace" style="margin-right: 0.2778em;">
         </span>
        </span>
        <span class="base">
         <span class="strut" style="height: 1.0913em; vertical-align: -0.25em;">
         </span>
         <span class="mord">
          <span class="mord mathnormal" style="margin-right: 0.0359em;">
           v
          </span>
          <span class="msupsub">
           <span class="vlist-t">
            <span class="vlist-r">
             <span class="vlist" style="height: 0.8413em;">
              <span class="" style="top: -3.063em; margin-right: 0.05em;">
               <span class="pstrut" style="height: 2.7em;">
               </span>
               <span class="sizing reset-size6 size3 mtight">
                <span class="mord mathnormal mtight" style="margin-right: 0.1389em;">
                 T
                </span>
               </span>
              </span>
             </span>
            </span>
           </span>
          </span>
         </span>
         <span class="mspace" style="margin-right: 0.1667em;">
         </span>
         <span class="mop">
          tanh
         </span>
         <span class="mopen">
          (
         </span>
         <span class="mord">
          <span class="mord mathnormal" style="margin-right: 0.1389em;">
           W
          </span>
          <span class="msupsub">
           <span class="vlist-t vlist-t2">
            <span class="vlist-r">
             <span class="vlist" style="height: 0.1514em;">
              <span class="" style="top: -2.55em; margin-left: -0.1389em; margin-right: 0.05em;">
               <span class="pstrut" style="height: 2.7em;">
               </span>
               <span class="sizing reset-size6 size3 mtight">
                <span class="mord mathnormal mtight">
                 a
                </span>
               </span>
              </span>
             </span>
             <span class="vlist-s">
              ​
             </span>
            </span>
            <span class="vlist-r">
             <span class="vlist" style="height: 0.15em;">
              <span class="">
              </span>
             </span>
            </span>
           </span>
          </span>
         </span>
         <span class="mord mathnormal">
          a
         </span>
         <span class="mspace" style="margin-right: 0.2222em;">
         </span>
         <span class="mbin">
          +
         </span>
         <span class="mspace" style="margin-right: 0.2222em;">
         </span>
        </span>
        <span class="base">
         <span class="strut" style="height: 1em; vertical-align: -0.25em;">
         </span>
         <span class="mord">
          <span class="mord mathnormal" style="margin-right: 0.1389em;">
           W
          </span>
          <span class="msupsub">
           <span class="vlist-t vlist-t2">
            <span class="vlist-r">
             <span class="vlist" style="height: 0.3361em;">
              <span class="" style="top: -2.55em; margin-left: -0.1389em; margin-right: 0.05em;">
               <span class="pstrut" style="height: 2.7em;">
               </span>
               <span class="sizing reset-size6 size3 mtight">
                <span class="mord mathnormal mtight">
                 b
                </span>
               </span>
              </span>
             </span>
             <span class="vlist-s">
              ​
             </span>
            </span>
            <span class="vlist-r">
             <span class="vlist" style="height: 0.15em;">
              <span class="">
              </span>
             </span>
            </span>
           </span>
          </span>
         </span>
         <span class="mord mathnormal">
          b
         </span>
         <span class="mclose">
          )
         </span>
        </span>
       </span>
      </span>
     </span>
    </p>
    <pre><code class="prism language-python"><span class="token comment"># 加性注意力实现（PyTorch）</span>
<span class="token keyword">class</span> <span class="token class-name">AdditiveAttention</span><span class="token punctuation">(</span>nn<span class="token punctuation">.</span>Module<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> hidden_size<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>Wa <span class="token operator">=</span> nn<span class="token punctuation">.</span>Linear<span class="token punctuation">(</span>hidden_size<span class="token punctuation">,</span> hidden_size<span class="token punctuation">,</span> bias<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>Wb <span class="token operator">=</span> nn<span class="token punctuation">.</span>Linear<span class="token punctuation">(</span>hidden_size<span class="token punctuation">,</span> hidden_size<span class="token punctuation">,</span> bias<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>v <span class="token operator">=</span> nn<span class="token punctuation">.</span>Linear<span class="token punctuation">(</span>hidden_size<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> bias<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">forward</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> decoder_state<span class="token punctuation">,</span> encoder_states<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># decoder_state: [batch, hidden]</span>
        <span class="token comment"># encoder_states: [batch, seq_len, hidden]</span>
        projected_decoder <span class="token operator">=</span> self<span class="token punctuation">.</span>Wa<span class="token punctuation">(</span>decoder_state<span class="token punctuation">)</span><span class="token punctuation">.</span>unsqueeze<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>  <span class="token comment"># [batch, 1, hidden]</span>
        projected_encoder <span class="token operator">=</span> self<span class="token punctuation">.</span>Wb<span class="token punctuation">(</span>encoder_states<span class="token punctuation">)</span>              <span class="token comment"># [batch, seq_len, hidden]</span>
        scores <span class="token operator">=</span> self<span class="token punctuation">.</span>v<span class="token punctuation">(</span>torch<span class="token punctuation">.</span>tanh<span class="token punctuation">(</span>projected_decoder <span class="token operator">+</span> projected_encoder<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>squeeze<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
        weights <span class="token operator">=</span> F<span class="token punctuation">.</span>softmax<span class="token punctuation">(</span>scores<span class="token punctuation">,</span> dim<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>
        context <span class="token operator">=</span> torch<span class="token punctuation">.</span>bmm<span class="token punctuation">(</span>weights<span class="token punctuation">.</span>unsqueeze<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> encoder_states<span class="token punctuation">)</span><span class="token punctuation">.</span>squeeze<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> context<span class="token punctuation">,</span> weights
</code></pre>
    <h4>
     <a id="23_Transformer_171">
     </a>
     2.3 Transformer架构数学实现
    </h4>
    <p>
     Transformer的核心创新在于完全基于自注意力机制：
    </p>
    <h5>
     <a id="231__174">
     </a>
     2.3.1 自注意力机制
    </h5>
    <p>
     对于输入序列
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        X 
        
       
         ∈ 
        
        
        
          R 
         
         
         
           n 
          
         
           × 
          
         
           d 
          
         
        
       
      
        X \in \mathbb{R}^{n \times d}
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.7224em; vertical-align: -0.0391em;">
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0785em;">
          X
         </span>
         <span class="mspace" style="margin-right: 0.2778em;">
         </span>
         <span class="mrel">
          ∈
         </span>
         <span class="mspace" style="margin-right: 0.2778em;">
         </span>
        </span>
        <span class="base">
         <span class="strut" style="height: 0.8491em;">
         </span>
         <span class="mord">
          <span class="mord mathbb">
           R
          </span>
          <span class="msupsub">
           <span class="vlist-t">
            <span class="vlist-r">
             <span class="vlist" style="height: 0.8491em;">
              <span class="" style="top: -3.063em; margin-right: 0.05em;">
               <span class="pstrut" style="height: 2.7em;">
               </span>
               <span class="sizing reset-size6 size3 mtight">
                <span class="mord mtight">
                 <span class="mord mathnormal mtight">
                  n
                 </span>
                 <span class="mbin mtight">
                  ×
                 </span>
                 <span class="mord mathnormal mtight">
                  d
                 </span>
                </span>
               </span>
              </span>
             </span>
            </span>
           </span>
          </span>
         </span>
        </span>
       </span>
      </span>
     </span>
     ，计算：
    </p>
    <p>
     <span class="katex--display">
      <span class="katex-display">
       <span class="katex">
        <span class="katex-mathml">
         Q 
         
        
          = 
         
        
          X 
         
         
         
           W 
          
         
           Q 
          
         
        
          , 
         
         
        
          K 
         
        
          = 
         
        
          X 
         
         
         
           W 
          
         
           K 
          
         
        
          , 
         
         
        
          V 
         
        
          = 
         
        
          X 
         
         
         
           W 
          
         
           V 
          
         
         
        
          Attention 
         
        
          ( 
         
        
          Q 
         
        
          , 
         
        
          K 
         
        
          , 
         
        
          V 
         
        
          ) 
         
        
          = 
         
        
          softmax 
         
         
         
           ( 
          
          
           
           
             Q 
            
            
            
              K 
             
            
              T 
             
            
           
           
            
            
              d 
             
            
              k 
             
            
           
          
         
           ) 
          
         
        
          V 
         
        
       
         Q = X W^Q, \quad K = X W^K, \quad V = X W^V \\ \text{Attention}(Q,K,V) = \text{softmax}\left(\frac{QK^T}{\sqrt{d_k}}\right)V
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.8778em; vertical-align: -0.1944em;">
          </span>
          <span class="mord mathnormal">
           Q
          </span>
          <span class="mspace" style="margin-right: 0.2778em;">
          </span>
          <span class="mrel">
           =
          </span>
          <span class="mspace" style="margin-right: 0.2778em;">
          </span>
         </span>
         <span class="base">
          <span class="strut" style="height: 1.0858em; vertical-align: -0.1944em;">
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0785em;">
           X
          </span>
          <span class="mord">
           <span class="mord mathnormal" style="margin-right: 0.1389em;">
            W
           </span>
           <span class="msupsub">
            <span class="vlist-t">
             <span class="vlist-r">
              <span class="vlist" style="height: 0.8913em;">
               <span class="" style="top: -3.113em; margin-right: 0.05em;">
                <span class="pstrut" style="height: 2.7em;">
                </span>
                <span class="sizing reset-size6 size3 mtight">
                 <span class="mord mathnormal mtight">
                  Q
                 </span>
                </span>
               </span>
              </span>
             </span>
            </span>
           </span>
          </span>
          <span class="mpunct">
           ,
          </span>
          <span class="mspace" style="margin-right: 1em;">
          </span>
          <span class="mspace" style="margin-right: 0.1667em;">
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0715em;">
           K
          </span>
          <span class="mspace" style="margin-right: 0.2778em;">
          </span>
          <span class="mrel">
           =
          </span>
          <span class="mspace" style="margin-right: 0.2778em;">
          </span>
         </span>
         <span class="base">
          <span class="strut" style="height: 1.0858em; vertical-align: -0.1944em;">
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0785em;">
           X
          </span>
          <span class="mord">
           <span class="mord mathnormal" style="margin-right: 0.1389em;">
            W
           </span>
           <span class="msupsub">
            <span class="vlist-t">
             <span class="vlist-r">
              <span class="vlist" style="height: 0.8913em;">
               <span class="" style="top: -3.113em; margin-right: 0.05em;">
                <span class="pstrut" style="height: 2.7em;">
                </span>
                <span class="sizing reset-size6 size3 mtight">
                 <span class="mord mathnormal mtight" style="margin-right: 0.0715em;">
                  K
                 </span>
                </span>
               </span>
              </span>
             </span>
            </span>
           </span>
          </span>
          <span class="mpunct">
           ,
          </span>
          <span class="mspace" style="margin-right: 1em;">
          </span>
          <span class="mspace" style="margin-right: 0.1667em;">
          </span>
          <span class="mord mathnormal" style="margin-right: 0.2222em;">
           V
          </span>
          <span class="mspace" style="margin-right: 0.2778em;">
          </span>
          <span class="mrel">
           =
          </span>
          <span class="mspace" style="margin-right: 0.2778em;">
          </span>
         </span>
         <span class="base">
          <span class="strut" style="height: 0.8913em;">
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0785em;">
           X
          </span>
          <span class="mord">
           <span class="mord mathnormal" style="margin-right: 0.1389em;">
            W
           </span>
           <span class="msupsub">
            <span class="vlist-t">
             <span class="vlist-r">
              <span class="vlist" style="height: 0.8913em;">
               <span class="" style="top: -3.113em; margin-right: 0.05em;">
                <span class="pstrut" style="height: 2.7em;">
                </span>
                <span class="sizing reset-size6 size3 mtight">
                 <span class="mord mathnormal mtight" style="margin-right: 0.2222em;">
                  V
                 </span>
                </span>
               </span>
              </span>
             </span>
            </span>
           </span>
          </span>
         </span>
         <span class="mspace newline">
         </span>
         <span class="base">
          <span class="strut" style="height: 1em; vertical-align: -0.25em;">
          </span>
          <span class="mord text">
           <span class="mord">
            Attention
           </span>
          </span>
          <span class="mopen">
           (
          </span>
          <span class="mord mathnormal">
           Q
          </span>
          <span class="mpunct">
           ,
          </span>
          <span class="mspace" style="margin-right: 0.1667em;">
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0715em;">
           K
          </span>
          <span class="mpunct">
           ,
          </span>
          <span class="mspace" style="margin-right: 0.1667em;">
          </span>
          <span class="mord mathnormal" style="margin-right: 0.2222em;">
           V
          </span>
          <span class="mclose">
           )
          </span>
          <span class="mspace" style="margin-right: 0.2778em;">
          </span>
          <span class="mrel">
           =
          </span>
          <span class="mspace" style="margin-right: 0.2778em;">
          </span>
         </span>
         <span class="base">
          <span class="strut" style="height: 2.4684em; vertical-align: -0.95em;">
          </span>
          <span class="mord text">
           <span class="mord">
            softmax
           </span>
          </span>
          <span class="mspace" style="margin-right: 0.1667em;">
          </span>
          <span class="minner">
           <span class="mopen delimcenter" style="top: 0em;">
            <span class="delimsizing size3">
             (
            </span>
           </span>
           <span class="mord">
            <span class="mopen nulldelimiter">
            </span>
            <span class="mfrac">
             <span class="vlist-t vlist-t2">
              <span class="vlist-r">
               <span class="vlist" style="height: 1.5183em;">
                <span class="" style="top: -2.2528em;">
                 <span class="pstrut" style="height: 3em;">
                 </span>
                 <span class="mord">
                  <span class="mord sqrt">
                   <span class="vlist-t vlist-t2">
                    <span class="vlist-r">
                     <span class="vlist" style="height: 0.8572em;">
                      <span class="svg-align" style="top: -3em;">
                       <span class="pstrut" style="height: 3em;">
                       </span>
                       <span class="mord" style="padding-left: 0.833em;">
                        <span class="mord">
                         <span class="mord mathnormal">
                          d
                         </span>
                         <span class="msupsub">
                          <span class="vlist-t vlist-t2">
                           <span class="vlist-r">
                            <span class="vlist" style="height: 0.3361em;">
                             <span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;">
                              <span class="pstrut" style="height: 2.7em;">
                              </span>
                              <span class="sizing reset-size6 size3 mtight">
                               <span class="mord mathnormal mtight" style="margin-right: 0.0315em;">
                                k
                               </span>
                              </span>
                             </span>
                            </span>
                            <span class="vlist-s">
                             ​
                            </span>
                           </span>
                           <span class="vlist-r">
                            <span class="vlist" style="height: 0.15em;">
                             <span class="">
                             </span>
                            </span>
                           </span>
                          </span>
                         </span>
                        </span>
                       </span>
                      </span>
                      <span class="" style="top: -2.8172em;">
                       <span class="pstrut" style="height: 3em;">
                       </span>
                       <span class="hide-tail" style="min-width: 0.853em; height: 1.08em;">
                        <svg height="1.08em" preserveaspectratio="xMinYMin slice" viewbox="0 0 400000 1080" width="400em">
                         <path d="M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z">
                         </path>
                        </svg>
                       </span>
                      </span>
                     </span>
                     <span class="vlist-s">
                      ​
                     </span>
                    </span>
                    <span class="vlist-r">
                     <span class="vlist" style="height: 0.1828em;">
                      <span class="">
                      </span>
                     </span>
                    </span>
                   </span>
                  </span>
                 </span>
                </span>
                <span class="" style="top: -3.23em;">
                 <span class="pstrut" style="height: 3em;">
                 </span>
                 <span class="frac-line" style="border-bottom-width: 0.04em;">
                 </span>
                </span>
                <span class="" style="top: -3.677em;">
                 <span class="pstrut" style="height: 3em;">
                 </span>
                 <span class="mord">
                  <span class="mord mathnormal">
                   Q
                  </span>
                  <span class="mord">
                   <span class="mord mathnormal" style="margin-right: 0.0715em;">
                    K
                   </span>
                   <span class="msupsub">
                    <span class="vlist-t">
                     <span class="vlist-r">
                      <span class="vlist" style="height: 0.8413em;">
                       <span class="" style="top: -3.063em; margin-right: 0.05em;">
                        <span class="pstrut" style="height: 2.7em;">
                        </span>
                        <span class="sizing reset-size6 size3 mtight">
                         <span class="mord mathnormal mtight" style="margin-right: 0.1389em;">
                          T
                         </span>
                        </span>
                       </span>
                      </span>
                     </span>
                    </span>
                   </span>
                  </span>
                 </span>
                </span>
               </span>
               <span class="vlist-s">
                ​
               </span>
              </span>
              <span class="vlist-r">
               <span class="vlist" style="height: 0.93em;">
                <span class="">
                </span>
               </span>
              </span>
             </span>
            </span>
            <span class="mclose nulldelimiter">
            </span>
           </span>
           <span class="mclose delimcenter" style="top: 0em;">
            <span class="delimsizing size3">
             )
            </span>
           </span>
          </span>
          <span class="mspace" style="margin-right: 0.1667em;">
          </span>
          <span class="mord mathnormal" style="margin-right: 0.2222em;">
           V
          </span>
         </span>
        </span>
       </span>
      </span>
     </span>
    </p>
    <p>
     <strong>
      矩阵维度
     </strong>
     ：
     <br/>
     •
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        W 
         
        
          Q 
         
        
       
         , 
        
        
        
          W 
         
        
          K 
         
        
       
         ∈ 
        
        
        
          R 
         
         
         
           d 
          
         
           × 
          
          
          
            d 
           
          
            k 
           
          
         
        
       
      
        W^Q, W^K \in \mathbb{R}^{d \times d_k}
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 1.0358em; vertical-align: -0.1944em;">
         </span>
         <span class="mord">
          <span class="mord mathnormal" style="margin-right: 0.1389em;">
           W
          </span>
          <span class="msupsub">
           <span class="vlist-t">
            <span class="vlist-r">
             <span class="vlist" style="height: 0.8413em;">
              <span class="" style="top: -3.063em; margin-right: 0.05em;">
               <span class="pstrut" style="height: 2.7em;">
               </span>
               <span class="sizing reset-size6 size3 mtight">
                <span class="mord mathnormal mtight">
                 Q
                </span>
               </span>
              </span>
             </span>
            </span>
           </span>
          </span>
         </span>
         <span class="mpunct">
          ,
         </span>
         <span class="mspace" style="margin-right: 0.1667em;">
         </span>
         <span class="mord">
          <span class="mord mathnormal" style="margin-right: 0.1389em;">
           W
          </span>
          <span class="msupsub">
           <span class="vlist-t">
            <span class="vlist-r">
             <span class="vlist" style="height: 0.8413em;">
              <span class="" style="top: -3.063em; margin-right: 0.05em;">
               <span class="pstrut" style="height: 2.7em;">
               </span>
               <span class="sizing reset-size6 size3 mtight">
                <span class="mord mathnormal mtight" style="margin-right: 0.0715em;">
                 K
                </span>
               </span>
              </span>
             </span>
            </span>
           </span>
          </span>
         </span>
         <span class="mspace" style="margin-right: 0.2778em;">
         </span>
         <span class="mrel">
          ∈
         </span>
         <span class="mspace" style="margin-right: 0.2778em;">
         </span>
        </span>
        <span class="base">
         <span class="strut" style="height: 0.8491em;">
         </span>
         <span class="mord">
          <span class="mord mathbb">
           R
          </span>
          <span class="msupsub">
           <span class="vlist-t">
            <span class="vlist-r">
             <span class="vlist" style="height: 0.8491em;">
              <span class="" style="top: -3.063em; margin-right: 0.05em;">
               <span class="pstrut" style="height: 2.7em;">
               </span>
               <span class="sizing reset-size6 size3 mtight">
                <span class="mord mtight">
                 <span class="mord mathnormal mtight">
                  d
                 </span>
                 <span class="mbin mtight">
                  ×
                 </span>
                 <span class="mord mtight">
                  <span class="mord mathnormal mtight">
                   d
                  </span>
                  <span class="msupsub">
                   <span class="vlist-t vlist-t2">
                    <span class="vlist-r">
                     <span class="vlist" style="height: 0.3448em;">
                      <span class="" style="top: -2.3488em; margin-left: 0em; margin-right: 0.0714em;">
                       <span class="pstrut" style="height: 2.5em;">
                       </span>
                       <span class="sizing reset-size3 size1 mtight">
                        <span class="mord mathnormal mtight" style="margin-right: 0.0315em;">
                         k
                        </span>
                       </span>
                      </span>
                     </span>
                     <span class="vlist-s">
                      ​
                     </span>
                    </span>
                    <span class="vlist-r">
                     <span class="vlist" style="height: 0.1512em;">
                      <span class="">
                      </span>
                     </span>
                    </span>
                   </span>
                  </span>
                 </span>
                </span>
               </span>
              </span>
             </span>
            </span>
           </span>
          </span>
         </span>
        </span>
       </span>
      </span>
     </span>
     <br/>
     •
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        W 
         
        
          V 
         
        
       
         ∈ 
        
        
        
          R 
         
         
         
           d 
          
         
           × 
          
          
          
            d 
           
          
            v 
           
          
         
        
       
      
        W^V \in \mathbb{R}^{d \times d_v}
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.8804em; vertical-align: -0.0391em;">
         </span>
         <span class="mord">
          <span class="mord mathnormal" style="margin-right: 0.1389em;">
           W
          </span>
          <span class="msupsub">
           <span class="vlist-t">
            <span class="vlist-r">
             <span class="vlist" style="height: 0.8413em;">
              <span class="" style="top: -3.063em; margin-right: 0.05em;">
               <span class="pstrut" style="height: 2.7em;">
               </span>
               <span class="sizing reset-size6 size3 mtight">
                <span class="mord mathnormal mtight" style="margin-right: 0.2222em;">
                 V
                </span>
               </span>
              </span>
             </span>
            </span>
           </span>
          </span>
         </span>
         <span class="mspace" style="margin-right: 0.2778em;">
         </span>
         <span class="mrel">
          ∈
         </span>
         <span class="mspace" style="margin-right: 0.2778em;">
         </span>
        </span>
        <span class="base">
         <span class="strut" style="height: 0.8491em;">
         </span>
         <span class="mord">
          <span class="mord mathbb">
           R
          </span>
          <span class="msupsub">
           <span class="vlist-t">
            <span class="vlist-r">
             <span class="vlist" style="height: 0.8491em;">
              <span class="" style="top: -3.063em; margin-right: 0.05em;">
               <span class="pstrut" style="height: 2.7em;">
               </span>
               <span class="sizing reset-size6 size3 mtight">
                <span class="mord mtight">
                 <span class="mord mathnormal mtight">
                  d
                 </span>
                 <span class="mbin mtight">
                  ×
                 </span>
                 <span class="mord mtight">
                  <span class="mord mathnormal mtight">
                   d
                  </span>
                  <span class="msupsub">
                   <span class="vlist-t vlist-t2">
                    <span class="vlist-r">
                     <span class="vlist" style="height: 0.1645em;">
                      <span class="" style="top: -2.357em; margin-left: 0em; margin-right: 0.0714em;">
                       <span class="pstrut" style="height: 2.5em;">
                       </span>
                       <span class="sizing reset-size3 size1 mtight">
                        <span class="mord mathnormal mtight" style="margin-right: 0.0359em;">
                         v
                        </span>
                       </span>
                      </span>
                     </span>
                     <span class="vlist-s">
                      ​
                     </span>
                    </span>
                    <span class="vlist-r">
                     <span class="vlist" style="height: 0.143em;">
                      <span class="">
                      </span>
                     </span>
                    </span>
                   </span>
                  </span>
                 </span>
                </span>
               </span>
              </span>
             </span>
            </span>
           </span>
          </span>
         </span>
        </span>
       </span>
      </span>
     </span>
     <br/>
     • 输出维度：
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        R 
         
         
         
           n 
          
         
           × 
          
          
          
            d 
           
          
            v 
           
          
         
        
       
      
        \mathbb{R}^{n \times d_v}
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.8491em;">
         </span>
         <span class="mord">
          <span class="mord mathbb">
           R
          </span>
          <span class="msupsub">
           <span class="vlist-t">
            <span class="vlist-r">
             <span class="vlist" style="height: 0.8491em;">
              <span class="" style="top: -3.063em; margin-right: 0.05em;">
               <span class="pstrut" style="height: 2.7em;">
               </span>
               <span class="sizing reset-size6 size3 mtight">
                <span class="mord mtight">
                 <span class="mord mathnormal mtight">
                  n
                 </span>
                 <span class="mbin mtight">
                  ×
                 </span>
                 <span class="mord mtight">
                  <span class="mord mathnormal mtight">
                   d
                  </span>
                  <span class="msupsub">
                   <span class="vlist-t vlist-t2">
                    <span class="vlist-r">
                     <span class="vlist" style="height: 0.1645em;">
                      <span class="" style="top: -2.357em; margin-left: 0em; margin-right: 0.0714em;">
                       <span class="pstrut" style="height: 2.5em;">
                       </span>
                       <span class="sizing reset-size3 size1 mtight">
                        <span class="mord mathnormal mtight" style="margin-right: 0.0359em;">
                         v
                        </span>
                       </span>
                      </span>
                     </span>
                     <span class="vlist-s">
                      ​
                     </span>
                    </span>
                    <span class="vlist-r">
                     <span class="vlist" style="height: 0.143em;">
                      <span class="">
                      </span>
                     </span>
                    </span>
                   </span>
                  </span>
                 </span>
                </span>
               </span>
              </span>
             </span>
            </span>
           </span>
          </span>
         </span>
        </span>
       </span>
      </span>
     </span>
    </p>
    <h5>
     <a id="232__187">
     </a>
     2.3.2 位置编码理论
    </h5>
    <p>
     绝对位置编码的傅里叶基函数设计：
    </p>
    <p>
     <span class="katex--display">
      <span class="katex-display">
       <span class="katex">
        <span class="katex-mathml">
         P 
         
        
          E 
         
        
          ( 
         
        
          p 
         
        
          o 
         
        
          s 
         
        
          , 
         
        
          2 
         
        
          i 
         
        
          ) 
         
        
          = 
         
        
          sin 
         
        
          ⁡ 
         
        
          ( 
         
        
          p 
         
        
          o 
         
        
          s 
         
        
          / 
         
        
          1000 
         
         
         
           0 
          
          
          
            2 
           
          
            i 
           
          
            / 
           
          
            d 
           
          
         
        
          ) 
         
         
        
          P 
         
        
          E 
         
        
          ( 
         
        
          p 
         
        
          o 
         
        
          s 
         
        
          , 
         
        
          2 
         
        
          i 
         
        
          + 
         
        
          1 
         
        
          ) 
         
        
          = 
         
        
          cos 
         
        
          ⁡ 
         
        
          ( 
         
        
          p 
         
        
          o 
         
        
          s 
         
        
          / 
         
        
          1000 
         
         
         
           0 
          
          
          
            2 
           
          
            i 
           
          
            / 
           
          
            d 
           
          
         
        
          ) 
         
        
       
         PE(pos, 2i) = \sin(pos / 10000^{2i/d}) \\ PE(pos, 2i+1) = \cos(pos / 10000^{2i/d})
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 1em; vertical-align: -0.25em;">
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0576em;">
           PE
          </span>
          <span class="mopen">
           (
          </span>
          <span class="mord mathnormal">
           p
          </span>
          <span class="mord mathnormal">
           os
          </span>
          <span class="mpunct">
           ,
          </span>
          <span class="mspace" style="margin-right: 0.1667em;">
          </span>
          <span class="mord">
           2
          </span>
          <span class="mord mathnormal">
           i
          </span>
          <span class="mclose">
           )
          </span>
          <span class="mspace" style="margin-right: 0.2778em;">
          </span>
          <span class="mrel">
           =
          </span>
          <span class="mspace" style="margin-right: 0.2778em;">
          </span>
         </span>
         <span class="base">
          <span class="strut" style="height: 1.188em; vertical-align: -0.25em;">
          </span>
          <span class="mop">
           sin
          </span>
          <span class="mopen">
           (
          </span>
          <span class="mord mathnormal">
           p
          </span>
          <span class="mord mathnormal">
           os
          </span>
          <span class="mord">
           /1000
          </span>
          <span class="mord">
           <span class="mord">
            0
           </span>
           <span class="msupsub">
            <span class="vlist-t">
             <span class="vlist-r">
              <span class="vlist" style="height: 0.938em;">
               <span class="" style="top: -3.113em; margin-right: 0.05em;">
                <span class="pstrut" style="height: 2.7em;">
                </span>
                <span class="sizing reset-size6 size3 mtight">
                 <span class="mord mtight">
                  <span class="mord mtight">
                   2
                  </span>
                  <span class="mord mathnormal mtight">
                   i
                  </span>
                  <span class="mord mtight">
                   /
                  </span>
                  <span class="mord mathnormal mtight">
                   d
                  </span>
                 </span>
                </span>
               </span>
              </span>
             </span>
            </span>
           </span>
          </span>
          <span class="mclose">
           )
          </span>
         </span>
         <span class="mspace newline">
         </span>
         <span class="base">
          <span class="strut" style="height: 1em; vertical-align: -0.25em;">
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0576em;">
           PE
          </span>
          <span class="mopen">
           (
          </span>
          <span class="mord mathnormal">
           p
          </span>
          <span class="mord mathnormal">
           os
          </span>
          <span class="mpunct">
           ,
          </span>
          <span class="mspace" style="margin-right: 0.1667em;">
          </span>
          <span class="mord">
           2
          </span>
          <span class="mord mathnormal">
           i
          </span>
          <span class="mspace" style="margin-right: 0.2222em;">
          </span>
          <span class="mbin">
           +
          </span>
          <span class="mspace" style="margin-right: 0.2222em;">
          </span>
         </span>
         <span class="base">
          <span class="strut" style="height: 1em; vertical-align: -0.25em;">
          </span>
          <span class="mord">
           1
          </span>
          <span class="mclose">
           )
          </span>
          <span class="mspace" style="margin-right: 0.2778em;">
          </span>
          <span class="mrel">
           =
          </span>
          <span class="mspace" style="margin-right: 0.2778em;">
          </span>
         </span>
         <span class="base">
          <span class="strut" style="height: 1.188em; vertical-align: -0.25em;">
          </span>
          <span class="mop">
           cos
          </span>
          <span class="mopen">
           (
          </span>
          <span class="mord mathnormal">
           p
          </span>
          <span class="mord mathnormal">
           os
          </span>
          <span class="mord">
           /1000
          </span>
          <span class="mord">
           <span class="mord">
            0
           </span>
           <span class="msupsub">
            <span class="vlist-t">
             <span class="vlist-r">
              <span class="vlist" style="height: 0.938em;">
               <span class="" style="top: -3.113em; margin-right: 0.05em;">
                <span class="pstrut" style="height: 2.7em;">
                </span>
                <span class="sizing reset-size6 size3 mtight">
                 <span class="mord mtight">
                  <span class="mord mtight">
                   2
                  </span>
                  <span class="mord mathnormal mtight">
                   i
                  </span>
                  <span class="mord mtight">
                   /
                  </span>
                  <span class="mord mathnormal mtight">
                   d
                  </span>
                 </span>
                </span>
               </span>
              </span>
             </span>
            </span>
           </span>
          </span>
          <span class="mclose">
           )
          </span>
         </span>
        </span>
       </span>
      </span>
     </span>
    </p>
    <p>
     该设计的优势在于能线性表示相对位置：
    </p>
    <p>
     <span class="katex--display">
      <span class="katex-display">
       <span class="katex">
        <span class="katex-mathml">
         P 
         
        
          E 
         
        
          ( 
         
        
          p 
         
        
          o 
         
        
          s 
         
        
          + 
         
        
          Δ 
         
        
          ) 
         
        
          = 
         
         
         
           T 
          
         
           Δ 
          
         
        
          ⋅ 
         
        
          P 
         
        
          E 
         
        
          ( 
         
        
          p 
         
        
          o 
         
        
          s 
         
        
          ) 
         
        
       
         PE(pos+\Delta) = T_\Delta \cdot PE(pos)
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 1em; vertical-align: -0.25em;">
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0576em;">
           PE
          </span>
          <span class="mopen">
           (
          </span>
          <span class="mord mathnormal">
           p
          </span>
          <span class="mord mathnormal">
           os
          </span>
          <span class="mspace" style="margin-right: 0.2222em;">
          </span>
          <span class="mbin">
           +
          </span>
          <span class="mspace" style="margin-right: 0.2222em;">
          </span>
         </span>
         <span class="base">
          <span class="strut" style="height: 1em; vertical-align: -0.25em;">
          </span>
          <span class="mord">
           Δ
          </span>
          <span class="mclose">
           )
          </span>
          <span class="mspace" style="margin-right: 0.2778em;">
          </span>
          <span class="mrel">
           =
          </span>
          <span class="mspace" style="margin-right: 0.2778em;">
          </span>
         </span>
         <span class="base">
          <span class="strut" style="height: 0.8333em; vertical-align: -0.15em;">
          </span>
          <span class="mord">
           <span class="mord mathnormal" style="margin-right: 0.1389em;">
            T
           </span>
           <span class="msupsub">
            <span class="vlist-t vlist-t2">
             <span class="vlist-r">
              <span class="vlist" style="height: 0.3283em;">
               <span class="" style="top: -2.55em; margin-left: -0.1389em; margin-right: 0.05em;">
                <span class="pstrut" style="height: 2.7em;">
                </span>
                <span class="sizing reset-size6 size3 mtight">
                 <span class="mord mtight">
                  Δ
                 </span>
                </span>
               </span>
              </span>
              <span class="vlist-s">
               ​
              </span>
             </span>
             <span class="vlist-r">
              <span class="vlist" style="height: 0.15em;">
               <span class="">
               </span>
              </span>
             </span>
            </span>
           </span>
          </span>
          <span class="mspace" style="margin-right: 0.2222em;">
          </span>
          <span class="mbin">
           ⋅
          </span>
          <span class="mspace" style="margin-right: 0.2222em;">
          </span>
         </span>
         <span class="base">
          <span class="strut" style="height: 1em; vertical-align: -0.25em;">
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0576em;">
           PE
          </span>
          <span class="mopen">
           (
          </span>
          <span class="mord mathnormal">
           p
          </span>
          <span class="mord mathnormal">
           os
          </span>
          <span class="mclose">
           )
          </span>
         </span>
        </span>
       </span>
      </span>
     </span>
    </p>
    <p>
     其中
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        T 
         
        
          Δ 
         
        
       
      
        T_\Delta
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.8333em; vertical-align: -0.15em;">
         </span>
         <span class="mord">
          <span class="mord mathnormal" style="margin-right: 0.1389em;">
           T
          </span>
          <span class="msupsub">
           <span class="vlist-t vlist-t2">
            <span class="vlist-r">
             <span class="vlist" style="height: 0.3283em;">
              <span class="" style="top: -2.55em; margin-left: -0.1389em; margin-right: 0.05em;">
               <span class="pstrut" style="height: 2.7em;">
               </span>
               <span class="sizing reset-size6 size3 mtight">
                <span class="mord mtight">
                 Δ
                </span>
               </span>
              </span>
             </span>
             <span class="vlist-s">
              ​
             </span>
            </span>
            <span class="vlist-r">
             <span class="vlist" style="height: 0.15em;">
              <span class="">
              </span>
             </span>
            </span>
           </span>
          </span>
         </span>
        </span>
       </span>
      </span>
     </span>
     是旋转矩阵，证明如下：
    </p>
    <p>
     令
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        θ 
         
        
          i 
         
        
       
         = 
        
       
         1 
        
       
         / 
        
       
         1000 
        
        
        
          0 
         
         
         
           2 
          
         
           i 
          
         
           / 
          
         
           d 
          
         
        
       
      
        \theta_i = 1/10000^{2i/d}
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.8444em; vertical-align: -0.15em;">
         </span>
         <span class="mord">
          <span class="mord mathnormal" style="margin-right: 0.0278em;">
           θ
          </span>
          <span class="msupsub">
           <span class="vlist-t vlist-t2">
            <span class="vlist-r">
             <span class="vlist" style="height: 0.3117em;">
              <span class="" style="top: -2.55em; margin-left: -0.0278em; margin-right: 0.05em;">
               <span class="pstrut" style="height: 2.7em;">
               </span>
               <span class="sizing reset-size6 size3 mtight">
                <span class="mord mathnormal mtight">
                 i
                </span>
               </span>
              </span>
             </span>
             <span class="vlist-s">
              ​
             </span>
            </span>
            <span class="vlist-r">
             <span class="vlist" style="height: 0.15em;">
              <span class="">
              </span>
             </span>
            </span>
           </span>
          </span>
         </span>
         <span class="mspace" style="margin-right: 0.2778em;">
         </span>
         <span class="mrel">
          =
         </span>
         <span class="mspace" style="margin-right: 0.2778em;">
         </span>
        </span>
        <span class="base">
         <span class="strut" style="height: 1.138em; vertical-align: -0.25em;">
         </span>
         <span class="mord">
          1/1000
         </span>
         <span class="mord">
          <span class="mord">
           0
          </span>
          <span class="msupsub">
           <span class="vlist-t">
            <span class="vlist-r">
             <span class="vlist" style="height: 0.888em;">
              <span class="" style="top: -3.063em; margin-right: 0.05em;">
               <span class="pstrut" style="height: 2.7em;">
               </span>
               <span class="sizing reset-size6 size3 mtight">
                <span class="mord mtight">
                 <span class="mord mtight">
                  2
                 </span>
                 <span class="mord mathnormal mtight">
                  i
                 </span>
                 <span class="mord mtight">
                  /
                 </span>
                 <span class="mord mathnormal mtight">
                  d
                 </span>
                </span>
               </span>
              </span>
             </span>
            </span>
           </span>
          </span>
         </span>
        </span>
       </span>
      </span>
     </span>
     ，则：
    </p>
    <p>
     <span class="katex--display">
      <span class="katex-display">
       <span class="katex">
        <span class="katex-mathml">
         [ 
          
          
           
            
             
              
              
                sin 
               
              
                ⁡ 
               
              
                ( 
               
               
               
                 θ 
                
               
                 i 
                
               
              
                ( 
               
              
                p 
               
              
                o 
               
              
                s 
               
              
                + 
               
              
                Δ 
               
              
                ) 
               
              
                ) 
               
              
             
            
           
           
            
             
              
              
                cos 
               
              
                ⁡ 
               
              
                ( 
               
               
               
                 θ 
                
               
                 i 
                
               
              
                ( 
               
              
                p 
               
              
                o 
               
              
                s 
               
              
                + 
               
              
                Δ 
               
              
                ) 
               
              
                ) 
               
              
             
            
           
          
         
           ] 
          
         
        
          = 
         
         
         
           [ 
          
          
           
            
             
              
              
                cos 
               
              
                ⁡ 
               
              
                ( 
               
               
               
                 θ 
                
               
                 i 
                
               
              
                Δ 
               
              
                ) 
               
              
             
            
            
             
              
              
                sin 
               
              
                ⁡ 
               
              
                ( 
               
               
               
                 θ 
                
               
                 i 
                
               
              
                Δ 
               
              
                ) 
               
              
             
            
           
           
            
             
              
              
                − 
               
              
                sin 
               
              
                ⁡ 
               
              
                ( 
               
               
               
                 θ 
                
               
                 i 
                
               
              
                Δ 
               
              
                ) 
               
              
             
            
            
             
              
              
                cos 
               
              
                ⁡ 
               
              
                ( 
               
               
               
                 θ 
                
               
                 i 
                
               
              
                Δ 
               
              
                ) 
               
              
             
            
           
          
         
           ] 
          
         
        
          ⋅ 
         
         
         
           [ 
          
          
           
            
             
              
              
                sin 
               
              
                ⁡ 
               
              
                ( 
               
               
               
                 θ 
                
               
                 i 
                
                
              
                p 
               
              
                o 
               
              
                s 
               
              
                ) 
               
              
             
            
           
           
            
             
              
              
                cos 
               
              
                ⁡ 
               
              
                ( 
               
               
               
                 θ 
                
               
                 i 
                
                
              
                p 
               
              
                o 
               
              
                s 
               
              
                ) 
               
              
             
            
           
          
         
           ] 
          
         
        
       
         \begin{bmatrix}\sin(\theta_i (pos+\Delta)) \\\cos(\theta_i (pos+\Delta))\end{bmatrix}= \begin{bmatrix} \cos(\theta_i \Delta) &amp; \sin(\theta_i \Delta) \\ -\sin(\theta_i \Delta) &amp; \cos(\theta_i \Delta) \end{bmatrix} \cdot \begin{bmatrix} \sin(\theta_i \, pos) \\ \cos(\theta_i \, pos) \end{bmatrix}
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 2.4em; vertical-align: -0.95em;">
          </span>
          <span class="minner">
           <span class="mopen delimcenter" style="top: 0em;">
            <span class="delimsizing size3">
             [
            </span>
           </span>
           <span class="mord">
            <span class="mtable">
             <span class="col-align-c">
              <span class="vlist-t vlist-t2">
               <span class="vlist-r">
                <span class="vlist" style="height: 1.45em;">
                 <span class="" style="top: -3.61em;">
                  <span class="pstrut" style="height: 3em;">
                  </span>
                  <span class="mord">
                   <span class="mop">
                    sin
                   </span>
                   <span class="mopen">
                    (
                   </span>
                   <span class="mord">
                    <span class="mord mathnormal" style="margin-right: 0.0278em;">
                     θ
                    </span>
                    <span class="msupsub">
                     <span class="vlist-t vlist-t2">
                      <span class="vlist-r">
                       <span class="vlist" style="height: 0.3117em;">
                        <span class="" style="top: -2.55em; margin-left: -0.0278em; margin-right: 0.05em;">
                         <span class="pstrut" style="height: 2.7em;">
                         </span>
                         <span class="sizing reset-size6 size3 mtight">
                          <span class="mord mathnormal mtight">
                           i
                          </span>
                         </span>
                        </span>
                       </span>
                       <span class="vlist-s">
                        ​
                       </span>
                      </span>
                      <span class="vlist-r">
                       <span class="vlist" style="height: 0.15em;">
                        <span class="">
                        </span>
                       </span>
                      </span>
                     </span>
                    </span>
                   </span>
                   <span class="mopen">
                    (
                   </span>
                   <span class="mord mathnormal">
                    p
                   </span>
                   <span class="mord mathnormal">
                    os
                   </span>
                   <span class="mspace" style="margin-right: 0.2222em;">
                   </span>
                   <span class="mbin">
                    +
                   </span>
                   <span class="mspace" style="margin-right: 0.2222em;">
                   </span>
                   <span class="mord">
                    Δ
                   </span>
                   <span class="mclose">
                    ))
                   </span>
                  </span>
                 </span>
                 <span class="" style="top: -2.41em;">
                  <span class="pstrut" style="height: 3em;">
                  </span>
                  <span class="mord">
                   <span class="mop">
                    cos
                   </span>
                   <span class="mopen">
                    (
                   </span>
                   <span class="mord">
                    <span class="mord mathnormal" style="margin-right: 0.0278em;">
                     θ
                    </span>
                    <span class="msupsub">
                     <span class="vlist-t vlist-t2">
                      <span class="vlist-r">
                       <span class="vlist" style="height: 0.3117em;">
                        <span class="" style="top: -2.55em; margin-left: -0.0278em; margin-right: 0.05em;">
                         <span class="pstrut" style="height: 2.7em;">
                         </span>
                         <span class="sizing reset-size6 size3 mtight">
                          <span class="mord mathnormal mtight">
                           i
                          </span>
                         </span>
                        </span>
                       </span>
                       <span class="vlist-s">
                        ​
                       </span>
                      </span>
                      <span class="vlist-r">
                       <span class="vlist" style="height: 0.15em;">
                        <span class="">
                        </span>
                       </span>
                      </span>
                     </span>
                    </span>
                   </span>
                   <span class="mopen">
                    (
                   </span>
                   <span class="mord mathnormal">
                    p
                   </span>
                   <span class="mord mathnormal">
                    os
                   </span>
                   <span class="mspace" style="margin-right: 0.2222em;">
                   </span>
                   <span class="mbin">
                    +
                   </span>
                   <span class="mspace" style="margin-right: 0.2222em;">
                   </span>
                   <span class="mord">
                    Δ
                   </span>
                   <span class="mclose">
                    ))
                   </span>
                  </span>
                 </span>
                </span>
                <span class="vlist-s">
                 ​
                </span>
               </span>
               <span class="vlist-r">
                <span class="vlist" style="height: 0.95em;">
                 <span class="">
                 </span>
                </span>
               </span>
              </span>
             </span>
            </span>
           </span>
           <span class="mclose delimcenter" style="top: 0em;">
            <span class="delimsizing size3">
             ]
            </span>
           </span>
          </span>
          <span class="mspace" style="margin-right: 0.2778em;">
          </span>
          <span class="mrel">
           =
          </span>
          <span class="mspace" style="margin-right: 0.2778em;">
          </span>
         </span>
         <span class="base">
          <span class="strut" style="height: 2.4em; vertical-align: -0.95em;">
          </span>
          <span class="minner">
           <span class="mopen delimcenter" style="top: 0em;">
            <span class="delimsizing size3">
             [
            </span>
           </span>
           <span class="mord">
            <span class="mtable">
             <span class="col-align-c">
              <span class="vlist-t vlist-t2">
               <span class="vlist-r">
                <span class="vlist" style="height: 1.45em;">
                 <span class="" style="top: -3.61em;">
                  <span class="pstrut" style="height: 3em;">
                  </span>
                  <span class="mord">
                   <span class="mop">
                    cos
                   </span>
                   <span class="mopen">
                    (
                   </span>
                   <span class="mord">
                    <span class="mord mathnormal" style="margin-right: 0.0278em;">
                     θ
                    </span>
                    <span class="msupsub">
                     <span class="vlist-t vlist-t2">
                      <span class="vlist-r">
                       <span class="vlist" style="height: 0.3117em;">
                        <span class="" style="top: -2.55em; margin-left: -0.0278em; margin-right: 0.05em;">
                         <span class="pstrut" style="height: 2.7em;">
                         </span>
                         <span class="sizing reset-size6 size3 mtight">
                          <span class="mord mathnormal mtight">
                           i
                          </span>
                         </span>
                        </span>
                       </span>
                       <span class="vlist-s">
                        ​
                       </span>
                      </span>
                      <span class="vlist-r">
                       <span class="vlist" style="height: 0.15em;">
                        <span class="">
                        </span>
                       </span>
                      </span>
                     </span>
                    </span>
                   </span>
                   <span class="mord">
                    Δ
                   </span>
                   <span class="mclose">
                    )
                   </span>
                  </span>
                 </span>
                 <span class="" style="top: -2.41em;">
                  <span class="pstrut" style="height: 3em;">
                  </span>
                  <span class="mord">
                   <span class="mord">
                    −
                   </span>
                   <span class="mspace" style="margin-right: 0.1667em;">
                   </span>
                   <span class="mop">
                    sin
                   </span>
                   <span class="mopen">
                    (
                   </span>
                   <span class="mord">
                    <span class="mord mathnormal" style="margin-right: 0.0278em;">
                     θ
                    </span>
                    <span class="msupsub">
                     <span class="vlist-t vlist-t2">
                      <span class="vlist-r">
                       <span class="vlist" style="height: 0.3117em;">
                        <span class="" style="top: -2.55em; margin-left: -0.0278em; margin-right: 0.05em;">
                         <span class="pstrut" style="height: 2.7em;">
                         </span>
                         <span class="sizing reset-size6 size3 mtight">
                          <span class="mord mathnormal mtight">
                           i
                          </span>
                         </span>
                        </span>
                       </span>
                       <span class="vlist-s">
                        ​
                       </span>
                      </span>
                      <span class="vlist-r">
                       <span class="vlist" style="height: 0.15em;">
                        <span class="">
                        </span>
                       </span>
                      </span>
                     </span>
                    </span>
                   </span>
                   <span class="mord">
                    Δ
                   </span>
                   <span class="mclose">
                    )
                   </span>
                  </span>
                 </span>
                </span>
                <span class="vlist-s">
                 ​
                </span>
               </span>
               <span class="vlist-r">
                <span class="vlist" style="height: 0.95em;">
                 <span class="">
                 </span>
                </span>
               </span>
              </span>
             </span>
             <span class="arraycolsep" style="width: 0.5em;">
             </span>
             <span class="arraycolsep" style="width: 0.5em;">
             </span>
             <span class="col-align-c">
              <span class="vlist-t vlist-t2">
               <span class="vlist-r">
                <span class="vlist" style="height: 1.45em;">
                 <span class="" style="top: -3.61em;">
                  <span class="pstrut" style="height: 3em;">
                  </span>
                  <span class="mord">
                   <span class="mop">
                    sin
                   </span>
                   <span class="mopen">
                    (
                   </span>
                   <span class="mord">
                    <span class="mord mathnormal" style="margin-right: 0.0278em;">
                     θ
                    </span>
                    <span class="msupsub">
                     <span class="vlist-t vlist-t2">
                      <span class="vlist-r">
                       <span class="vlist" style="height: 0.3117em;">
                        <span class="" style="top: -2.55em; margin-left: -0.0278em; margin-right: 0.05em;">
                         <span class="pstrut" style="height: 2.7em;">
                         </span>
                         <span class="sizing reset-size6 size3 mtight">
                          <span class="mord mathnormal mtight">
                           i
                          </span>
                         </span>
                        </span>
                       </span>
                       <span class="vlist-s">
                        ​
                       </span>
                      </span>
                      <span class="vlist-r">
                       <span class="vlist" style="height: 0.15em;">
                        <span class="">
                        </span>
                       </span>
                      </span>
                     </span>
                    </span>
                   </span>
                   <span class="mord">
                    Δ
                   </span>
                   <span class="mclose">
                    )
                   </span>
                  </span>
                 </span>
                 <span class="" style="top: -2.41em;">
                  <span class="pstrut" style="height: 3em;">
                  </span>
                  <span class="mord">
                   <span class="mop">
                    cos
                   </span>
                   <span class="mopen">
                    (
                   </span>
                   <span class="mord">
                    <span class="mord mathnormal" style="margin-right: 0.0278em;">
                     θ
                    </span>
                    <span class="msupsub">
                     <span class="vlist-t vlist-t2">
                      <span class="vlist-r">
                       <span class="vlist" style="height: 0.3117em;">
                        <span class="" style="top: -2.55em; margin-left: -0.0278em; margin-right: 0.05em;">
                         <span class="pstrut" style="height: 2.7em;">
                         </span>
                         <span class="sizing reset-size6 size3 mtight">
                          <span class="mord mathnormal mtight">
                           i
                          </span>
                         </span>
                        </span>
                       </span>
                       <span class="vlist-s">
                        ​
                       </span>
                      </span>
                      <span class="vlist-r">
                       <span class="vlist" style="height: 0.15em;">
                        <span class="">
                        </span>
                       </span>
                      </span>
                     </span>
                    </span>
                   </span>
                   <span class="mord">
                    Δ
                   </span>
                   <span class="mclose">
                    )
                   </span>
                  </span>
                 </span>
                </span>
                <span class="vlist-s">
                 ​
                </span>
               </span>
               <span class="vlist-r">
                <span class="vlist" style="height: 0.95em;">
                 <span class="">
                 </span>
                </span>
               </span>
              </span>
             </span>
            </span>
           </span>
           <span class="mclose delimcenter" style="top: 0em;">
            <span class="delimsizing size3">
             ]
            </span>
           </span>
          </span>
          <span class="mspace" style="margin-right: 0.2222em;">
          </span>
          <span class="mbin">
           ⋅
          </span>
          <span class="mspace" style="margin-right: 0.2222em;">
          </span>
         </span>
         <span class="base">
          <span class="strut" style="height: 2.4em; vertical-align: -0.95em;">
          </span>
          <span class="minner">
           <span class="mopen delimcenter" style="top: 0em;">
            <span class="delimsizing size3">
             [
            </span>
           </span>
           <span class="mord">
            <span class="mtable">
             <span class="col-align-c">
              <span class="vlist-t vlist-t2">
               <span class="vlist-r">
                <span class="vlist" style="height: 1.45em;">
                 <span class="" style="top: -3.61em;">
                  <span class="pstrut" style="height: 3em;">
                  </span>
                  <span class="mord">
                   <span class="mop">
                    sin
                   </span>
                   <span class="mopen">
                    (
                   </span>
                   <span class="mord">
                    <span class="mord mathnormal" style="margin-right: 0.0278em;">
                     θ
                    </span>
                    <span class="msupsub">
                     <span class="vlist-t vlist-t2">
                      <span class="vlist-r">
                       <span class="vlist" style="height: 0.3117em;">
                        <span class="" style="top: -2.55em; margin-left: -0.0278em; margin-right: 0.05em;">
                         <span class="pstrut" style="height: 2.7em;">
                         </span>
                         <span class="sizing reset-size6 size3 mtight">
                          <span class="mord mathnormal mtight">
                           i
                          </span>
                         </span>
                        </span>
                       </span>
                       <span class="vlist-s">
                        ​
                       </span>
                      </span>
                      <span class="vlist-r">
                       <span class="vlist" style="height: 0.15em;">
                        <span class="">
                        </span>
                       </span>
                      </span>
                     </span>
                    </span>
                   </span>
                   <span class="mspace" style="margin-right: 0.1667em;">
                   </span>
                   <span class="mord mathnormal">
                    p
                   </span>
                   <span class="mord mathnormal">
                    os
                   </span>
                   <span class="mclose">
                    )
                   </span>
                  </span>
                 </span>
                 <span class="" style="top: -2.41em;">
                  <span class="pstrut" style="height: 3em;">
                  </span>
                  <span class="mord">
                   <span class="mop">
                    cos
                   </span>
                   <span class="mopen">
                    (
                   </span>
                   <span class="mord">
                    <span class="mord mathnormal" style="margin-right: 0.0278em;">
                     θ
                    </span>
                    <span class="msupsub">
                     <span class="vlist-t vlist-t2">
                      <span class="vlist-r">
                       <span class="vlist" style="height: 0.3117em;">
                        <span class="" style="top: -2.55em; margin-left: -0.0278em; margin-right: 0.05em;">
                         <span class="pstrut" style="height: 2.7em;">
                         </span>
                         <span class="sizing reset-size6 size3 mtight">
                          <span class="mord mathnormal mtight">
                           i
                          </span>
                         </span>
                        </span>
                       </span>
                       <span class="vlist-s">
                        ​
                       </span>
                      </span>
                      <span class="vlist-r">
                       <span class="vlist" style="height: 0.15em;">
                        <span class="">
                        </span>
                       </span>
                      </span>
                     </span>
                    </span>
                   </span>
                   <span class="mspace" style="margin-right: 0.1667em;">
                   </span>
                   <span class="mord mathnormal">
                    p
                   </span>
                   <span class="mord mathnormal">
                    os
                   </span>
                   <span class="mclose">
                    )
                   </span>
                  </span>
                 </span>
                </span>
                <span class="vlist-s">
                 ​
                </span>
               </span>
               <span class="vlist-r">
                <span class="vlist" style="height: 0.95em;">
                 <span class="">
                 </span>
                </span>
               </span>
              </span>
             </span>
            </span>
           </span>
           <span class="mclose delimcenter" style="top: 0em;">
            <span class="delimsizing size3">
             ]
            </span>
           </span>
          </span>
         </span>
        </span>
       </span>
      </span>
     </span>
    </p>
    <h5>
     <a id="233__218">
     </a>
     2.3.3 残差连接与层归一化
    </h5>
    <p>
     每个子层的输出为：
    </p>
    <p>
     <span class="katex--display">
      <span class="katex-display">
       <span class="katex">
        <span class="katex-mathml">
         LayerNorm 
         
        
          ( 
         
        
          x 
         
        
          + 
         
        
          Sublayer 
         
        
          ( 
         
        
          x 
         
        
          ) 
         
        
          ) 
         
        
       
         \text{LayerNorm}(x + \text{Sublayer}(x))
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 1em; vertical-align: -0.25em;">
          </span>
          <span class="mord text">
           <span class="mord">
            LayerNorm
           </span>
          </span>
          <span class="mopen">
           (
          </span>
          <span class="mord mathnormal">
           x
          </span>
          <span class="mspace" style="margin-right: 0.2222em;">
          </span>
          <span class="mbin">
           +
          </span>
          <span class="mspace" style="margin-right: 0.2222em;">
          </span>
         </span>
         <span class="base">
          <span class="strut" style="height: 1em; vertical-align: -0.25em;">
          </span>
          <span class="mord text">
           <span class="mord">
            Sublayer
           </span>
          </span>
          <span class="mopen">
           (
          </span>
          <span class="mord mathnormal">
           x
          </span>
          <span class="mclose">
           ))
          </span>
         </span>
        </span>
       </span>
      </span>
     </span>
    </p>
    <p>
     <strong>
      数学性质
     </strong>
     ：
     <br/>
     • 缓解梯度消失：即使Sublayer的梯度趋近零，残差项仍能传递梯度
     <br/>
     • 稳定训练过程：层归一化使各维度的均值为0、方差为1
    </p>
    <hr/>
    <h3>
     <a id="_231">
     </a>
     三、评估指标：从表面匹配到语义理解
    </h3>
    <h4>
     <a id="31_BLEU_233">
     </a>
     3.1 BLEU指标深入分析
    </h4>
    <p>
     BLEU的计算细节常被忽视，例如：
    </p>
    <p>
     <strong>
      n-gram匹配规则
     </strong>
     ：
     <br/>
     • 使用
     <strong>
      截断计数
     </strong>
     （clipped counts）防止高频词主导
     <br/>
     <span class="katex--display">
      <span class="katex-display">
       <span class="katex">
        <span class="katex-mathml">
         Count 
          
          
          
            c 
           
          
            l 
           
          
            i 
           
          
            p 
           
          
         
        
          ( 
         
        
          n 
         
        
          -gram 
         
        
          ) 
         
        
          = 
         
        
          min 
         
        
          ⁡ 
         
        
          ( 
         
        
          Count 
         
        
          ( 
         
        
          n 
         
        
          -gram 
         
        
          ) 
         
        
          , 
         
         
          
          
            max 
           
          
            ⁡ 
           
          
          
          
            r 
           
          
            e 
           
          
            f 
           
          
         
         
         
           Count 
          
          
          
            r 
           
          
            e 
           
          
            f 
           
          
         
        
          ( 
         
        
          n 
         
        
          -gram 
         
        
          ) 
         
        
          ) 
         
        
       
         \text{Count}_{clip}(n\text{-gram}) = \min(\text{Count}(n\text{-gram}), \max_{ref}\text{Count}_{ref}(n\text{-gram}))
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 1.0361em; vertical-align: -0.2861em;">
          </span>
          <span class="mord">
           <span class="mord text">
            <span class="mord">
             Count
            </span>
           </span>
           <span class="msupsub">
            <span class="vlist-t vlist-t2">
             <span class="vlist-r">
              <span class="vlist" style="height: 0.3361em;">
               <span class="" style="top: -2.55em; margin-right: 0.05em;">
                <span class="pstrut" style="height: 2.7em;">
                </span>
                <span class="sizing reset-size6 size3 mtight">
                 <span class="mord mtight">
                  <span class="mord mathnormal mtight">
                   c
                  </span>
                  <span class="mord mathnormal mtight" style="margin-right: 0.0197em;">
                   l
                  </span>
                  <span class="mord mathnormal mtight">
                   i
                  </span>
                  <span class="mord mathnormal mtight">
                   p
                  </span>
                 </span>
                </span>
               </span>
              </span>
              <span class="vlist-s">
               ​
              </span>
             </span>
             <span class="vlist-r">
              <span class="vlist" style="height: 0.2861em;">
               <span class="">
               </span>
              </span>
             </span>
            </span>
           </span>
          </span>
          <span class="mopen">
           (
          </span>
          <span class="mord mathnormal">
           n
          </span>
          <span class="mord text">
           <span class="mord">
            -gram
           </span>
          </span>
          <span class="mclose">
           )
          </span>
          <span class="mspace" style="margin-right: 0.2778em;">
          </span>
          <span class="mrel">
           =
          </span>
          <span class="mspace" style="margin-right: 0.2778em;">
          </span>
         </span>
         <span class="base">
          <span class="strut" style="height: 1.6382em; vertical-align: -0.8882em;">
          </span>
          <span class="mop">
           min
          </span>
          <span class="mopen">
           (
          </span>
          <span class="mord text">
           <span class="mord">
            Count
           </span>
          </span>
          <span class="mopen">
           (
          </span>
          <span class="mord mathnormal">
           n
          </span>
          <span class="mord text">
           <span class="mord">
            -gram
           </span>
          </span>
          <span class="mclose">
           )
          </span>
          <span class="mpunct">
           ,
          </span>
          <span class="mspace" style="margin-right: 0.1667em;">
          </span>
          <span class="mop op-limits">
           <span class="vlist-t vlist-t2">
            <span class="vlist-r">
             <span class="vlist" style="height: 0.4306em;">
              <span class="" style="top: -2.3479em; margin-left: 0em;">
               <span class="pstrut" style="height: 3em;">
               </span>
               <span class="sizing reset-size6 size3 mtight">
                <span class="mord mtight">
                 <span class="mord mathnormal mtight">
                  re
                 </span>
                 <span class="mord mathnormal mtight" style="margin-right: 0.1076em;">
                  f
                 </span>
                </span>
               </span>
              </span>
              <span class="" style="top: -3em;">
               <span class="pstrut" style="height: 3em;">
               </span>
               <span class="">
                <span class="mop">
                 max
                </span>
               </span>
              </span>
             </span>
             <span class="vlist-s">
              ​
             </span>
            </span>
            <span class="vlist-r">
             <span class="vlist" style="height: 0.8882em;">
              <span class="">
              </span>
             </span>
            </span>
           </span>
          </span>
          <span class="mspace" style="margin-right: 0.1667em;">
          </span>
          <span class="mord">
           <span class="mord text">
            <span class="mord">
             Count
            </span>
           </span>
           <span class="msupsub">
            <span class="vlist-t vlist-t2">
             <span class="vlist-r">
              <span class="vlist" style="height: 0.3361em;">
               <span class="" style="top: -2.55em; margin-right: 0.05em;">
                <span class="pstrut" style="height: 2.7em;">
                </span>
                <span class="sizing reset-size6 size3 mtight">
                 <span class="mord mtight">
                  <span class="mord mathnormal mtight">
                   re
                  </span>
                  <span class="mord mathnormal mtight" style="margin-right: 0.1076em;">
                   f
                  </span>
                 </span>
                </span>
               </span>
              </span>
              <span class="vlist-s">
               ​
              </span>
             </span>
             <span class="vlist-r">
              <span class="vlist" style="height: 0.2861em;">
               <span class="">
               </span>
              </span>
             </span>
            </span>
           </span>
          </span>
          <span class="mopen">
           (
          </span>
          <span class="mord mathnormal">
           n
          </span>
          <span class="mord text">
           <span class="mord">
            -gram
           </span>
          </span>
          <span class="mclose">
           ))
          </span>
         </span>
        </span>
       </span>
      </span>
     </span>
    </p>
    <p>
     <strong>
      简洁性惩罚的数学缺陷
     </strong>
     ：
     <br/>
     当候选长度
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        c 
        
       
      
        c
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.4306em;">
         </span>
         <span class="mord mathnormal">
          c
         </span>
        </span>
       </span>
      </span>
     </span>
     与参考长度
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        r 
        
       
      
        r
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.4306em;">
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0278em;">
          r
         </span>
        </span>
       </span>
      </span>
     </span>
     差异较大时，BLEU分可能失真。例如：
     <br/>
     • 候选句长度
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        c 
        
       
         = 
        
       
         10 
        
       
      
        c=10
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.4306em;">
         </span>
         <span class="mord mathnormal">
          c
         </span>
         <span class="mspace" style="margin-right: 0.2778em;">
         </span>
         <span class="mrel">
          =
         </span>
         <span class="mspace" style="margin-right: 0.2778em;">
         </span>
        </span>
        <span class="base">
         <span class="strut" style="height: 0.6444em;">
         </span>
         <span class="mord">
          10
         </span>
        </span>
       </span>
      </span>
     </span>
     ，参考长度
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        r 
        
       
         = 
        
       
         20 
        
       
      
        r=20
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.4306em;">
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0278em;">
          r
         </span>
         <span class="mspace" style="margin-right: 0.2778em;">
         </span>
         <span class="mrel">
          =
         </span>
         <span class="mspace" style="margin-right: 0.2778em;">
         </span>
        </span>
        <span class="base">
         <span class="strut" style="height: 0.6444em;">
         </span>
         <span class="mord">
          20
         </span>
        </span>
       </span>
      </span>
     </span>
     →
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        B 
        
       
         P 
        
       
         = 
        
        
        
          e 
         
         
         
           − 
          
         
           1 
          
         
        
       
         ≈ 
        
       
         0.37 
        
       
      
        BP=e^{-1} \approx 0.37
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6833em;">
         </span>
         <span class="mord mathnormal" style="margin-right: 0.1389em;">
          BP
         </span>
         <span class="mspace" style="margin-right: 0.2778em;">
         </span>
         <span class="mrel">
          =
         </span>
         <span class="mspace" style="margin-right: 0.2778em;">
         </span>
        </span>
        <span class="base">
         <span class="strut" style="height: 0.8141em;">
         </span>
         <span class="mord">
          <span class="mord mathnormal">
           e
          </span>
          <span class="msupsub">
           <span class="vlist-t">
            <span class="vlist-r">
             <span class="vlist" style="height: 0.8141em;">
              <span class="" style="top: -3.063em; margin-right: 0.05em;">
               <span class="pstrut" style="height: 2.7em;">
               </span>
               <span class="sizing reset-size6 size3 mtight">
                <span class="mord mtight">
                 <span class="mord mtight">
                  −
                 </span>
                 <span class="mord mtight">
                  1
                 </span>
                </span>
               </span>
              </span>
             </span>
            </span>
           </span>
          </span>
         </span>
         <span class="mspace" style="margin-right: 0.2778em;">
         </span>
         <span class="mrel">
          ≈
         </span>
         <span class="mspace" style="margin-right: 0.2778em;">
         </span>
        </span>
        <span class="base">
         <span class="strut" style="height: 0.6444em;">
         </span>
         <span class="mord">
          0.37
         </span>
        </span>
       </span>
      </span>
     </span>
     <br/>
     • 此时即使n-gram全匹配，BLEU分也不会超过0.37
    </p>
    <h4>
     <a id="32_METEOR_247">
     </a>
     3.2 METEOR的语义扩展
    </h4>
    <p>
     METEOR通过
     <strong>
      对齐图
     </strong>
     （alignment graph）实现柔性匹配：
    </p>
    <ol>
     <li>
      <p>
       <strong>
        构建词对齐图
       </strong>
       ：
       <br/>
       • 节点：候选词与参考词
       <br/>
       • 边：词形匹配（exact）、词干匹配（stem）、同义词匹配（synonym）
      </p>
     </li>
     <li>
      <p>
       <strong>
        最大权重匹配
       </strong>
       ：
       <br/>
       使用匈牙利算法寻找最优对齐路径
      </p>
     </li>
     <li>
      <p>
       <strong>
        计算碎片惩罚
       </strong>
       ：
       <br/>
       <span class="katex--display">
        <span class="katex-display">
         <span class="katex">
          <span class="katex-mathml">
           Penalty 
           
          
            = 
           
          
            0.5 
           
          
            × 
           
           
            
            
              ( 
             
             
             
               碎片数 
              
             
               已对齐词数 
              
             
            
              ) 
             
            
           
             3 
            
           
          
         
           \text{Penalty} = 0.5 \times \left(\frac{\text{碎片数}}{\text{已对齐词数}}\right)^3
          </span>
          <span class="katex-html">
           <span class="base">
            <span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;">
            </span>
            <span class="mord text">
             <span class="mord">
              Penalty
             </span>
            </span>
            <span class="mspace" style="margin-right: 0.2778em;">
            </span>
            <span class="mrel">
             =
            </span>
            <span class="mspace" style="margin-right: 0.2778em;">
            </span>
           </span>
           <span class="base">
            <span class="strut" style="height: 0.7278em; vertical-align: -0.0833em;">
            </span>
            <span class="mord">
             0.5
            </span>
            <span class="mspace" style="margin-right: 0.2222em;">
            </span>
            <span class="mbin">
             ×
            </span>
            <span class="mspace" style="margin-right: 0.2222em;">
            </span>
           </span>
           <span class="base">
            <span class="strut" style="height: 2.604em; vertical-align: -0.95em;">
            </span>
            <span class="minner">
             <span class="minner">
              <span class="mopen delimcenter" style="top: 0em;">
               <span class="delimsizing size3">
                (
               </span>
              </span>
              <span class="mord">
               <span class="mopen nulldelimiter">
               </span>
               <span class="mfrac">
                <span class="vlist-t vlist-t2">
                 <span class="vlist-r">
                  <span class="vlist" style="height: 1.3603em;">
                   <span class="" style="top: -2.314em;">
                    <span class="pstrut" style="height: 3em;">
                    </span>
                    <span class="mord">
                     <span class="mord text">
                      <span class="mord cjk_fallback">
                       已对齐词数
                      </span>
                     </span>
                    </span>
                   </span>
                   <span class="" style="top: -3.23em;">
                    <span class="pstrut" style="height: 3em;">
                    </span>
                    <span class="frac-line" style="border-bottom-width: 0.04em;">
                    </span>
                   </span>
                   <span class="" style="top: -3.677em;">
                    <span class="pstrut" style="height: 3em;">
                    </span>
                    <span class="mord">
                     <span class="mord text">
                      <span class="mord cjk_fallback">
                       碎片数
                      </span>
                     </span>
                    </span>
                   </span>
                  </span>
                  <span class="vlist-s">
                   ​
                  </span>
                 </span>
                 <span class="vlist-r">
                  <span class="vlist" style="height: 0.686em;">
                   <span class="">
                   </span>
                  </span>
                 </span>
                </span>
               </span>
               <span class="mclose nulldelimiter">
               </span>
              </span>
              <span class="mclose delimcenter" style="top: 0em;">
               <span class="delimsizing size3">
                )
               </span>
              </span>
             </span>
             <span class="msupsub">
              <span class="vlist-t">
               <span class="vlist-r">
                <span class="vlist" style="height: 1.654em;">
                 <span class="" style="top: -3.9029em; margin-right: 0.05em;">
                  <span class="pstrut" style="height: 2.7em;">
                  </span>
                  <span class="sizing reset-size6 size3 mtight">
                   <span class="mord mtight">
                    3
                   </span>
                  </span>
                 </span>
                </span>
               </span>
              </span>
             </span>
            </span>
           </span>
          </span>
         </span>
        </span>
       </span>
      </p>
     </li>
    </ol>
    <p>
     <strong>
      案例对比
     </strong>
     ：
     <br/>
     候选句：
     <em>
      “The quick brown fox jumps over the lazy dog”
     </em>
     <br/>
     参考句：
     <em>
      “A fast brown fox leaps over a lazy canine”
     </em>
    </p>
    <p>
     •
     <strong>
      BLEU-4
     </strong>
     ：仅匹配"brown fox"和"lazy"，得分0.21
     <br/>
     •
     <strong>
      METEOR
     </strong>
     ：匹配"quick→fast", “jumps→leaps”, “dog→canine”，得分0.52
    </p>
    <hr/>
    <h3>
     <a id="_271">
     </a>
     四、技术演进与性能对比
    </h3>
    <h4>
     <a id="41__273">
     </a>
     4.1 计算效率对比
    </h4>
    <p>
     在英德翻译任务中，各模型的GPU内存消耗与吞吐量：
    </p>
    <table>
     <thead>
      <tr>
       <th>
        模型
       </th>
       <th>
        参数量
       </th>
       <th>
        GPU内存（训练）
       </th>
       <th>
        句子/秒（Tesla V100）
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        Phrase-Based SMT
       </td>
       <td>
        -
       </td>
       <td>
        8GB
       </td>
       <td>
        1200
       </td>
      </tr>
      <tr>
       <td>
        RNN + Attention
       </td>
       <td>
        85M
       </td>
       <td>
        16GB
       </td>
       <td>
        230
       </td>
      </tr>
      <tr>
       <td>
        Transformer (Base)
       </td>
       <td>
        65M
       </td>
       <td>
        22GB
       </td>
       <td>
        810
       </td>
      </tr>
      <tr>
       <td>
        Transformer (Big)
       </td>
       <td>
        213M
       </td>
       <td>
        48GB
       </td>
       <td>
        340
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     <strong>
      关键发现
     </strong>
     ：
     <br/>
     • Transformer的并行性使其吞吐量达到RNN的3.5倍
     <br/>
     • 模型参数量与内存消耗呈超线性关系
    </p>
    <h4>
     <a id="42__287">
     </a>
     4.2 翻译质量分析
    </h4>
    <p>
     在WMT’14英德测试集上的错误类型分布：
    </p>
    <table>
     <thead>
      <tr>
       <th>
        错误类型
       </th>
       <th>
        SMT
       </th>
       <th>
        Transformer
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        词序错误
       </td>
       <td>
        38%
       </td>
       <td>
        12%
       </td>
      </tr>
      <tr>
       <td>
        词汇选择错误
       </td>
       <td>
        29%
       </td>
       <td>
        21%
       </td>
      </tr>
      <tr>
       <td>
        指代消解错误
       </td>
       <td>
        17%
       </td>
       <td>
        32%
       </td>
      </tr>
      <tr>
       <td>
        语法结构错误
       </td>
       <td>
        16%
       </td>
       <td>
        35%
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     <strong>
      结论
     </strong>
     ：
     <br/>
     • Transformer显著改善了词序问题（-68%）
     <br/>
     • 但语法和指代错误增加，显示模型对深层语义理解仍存局限
    </p>
    <hr/>
    <h3>
     <a id="_303">
     </a>
     五、未来挑战与前沿方向
    </h3>
    <h4>
     <a id="51__305">
     </a>
     5.1 低资源语言翻译
    </h4>
    <p>
     <strong>
      前沿技术
     </strong>
     ：
     <br/>
     •
     <strong>
      多语言联合训练
     </strong>
     ：共享隐层参数，实现知识迁移
     <br/>
     <span class="katex--display">
      <span class="katex-display">
       <span class="katex">
        <span class="katex-mathml">
         L 
         
        
          = 
         
         
         
           ∑ 
          
          
          
            ( 
           
          
            s 
           
          
            , 
           
          
            t 
           
          
            ) 
           
          
            ∈ 
           
          
            P 
           
          
         
         
         
           L 
          
          
          
            s 
           
          
            → 
           
          
            t 
           
          
         
        
          + 
         
        
          λ 
         
         
         
           ∑ 
          
          
          
            l 
           
          
            ∈ 
           
          
            L 
           
          
         
         
         
           L 
          
          
          
            l 
           
          
            → 
           
          
            l 
           
          
         
        
       
         \mathcal{L} = \sum_{(s,t)\in\mathcal{P}} \mathcal{L}_{s\to t} + \lambda \sum_{l\in\mathcal{L}} \mathcal{L}_{l\to l}
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.6833em;">
          </span>
          <span class="mord mathcal">
           L
          </span>
          <span class="mspace" style="margin-right: 0.2778em;">
          </span>
          <span class="mrel">
           =
          </span>
          <span class="mspace" style="margin-right: 0.2778em;">
          </span>
         </span>
         <span class="base">
          <span class="strut" style="height: 2.566em; vertical-align: -1.516em;">
          </span>
          <span class="mop op-limits">
           <span class="vlist-t vlist-t2">
            <span class="vlist-r">
             <span class="vlist" style="height: 1.05em;">
              <span class="" style="top: -1.809em; margin-left: 0em;">
               <span class="pstrut" style="height: 3.05em;">
               </span>
               <span class="sizing reset-size6 size3 mtight">
                <span class="mord mtight">
                 <span class="mopen mtight">
                  (
                 </span>
                 <span class="mord mathnormal mtight">
                  s
                 </span>
                 <span class="mpunct mtight">
                  ,
                 </span>
                 <span class="mord mathnormal mtight">
                  t
                 </span>
                 <span class="mclose mtight">
                  )
                 </span>
                 <span class="mrel mtight">
                  ∈
                 </span>
                 <span class="mord mathcal mtight" style="margin-right: 0.0822em;">
                  P
                 </span>
                </span>
               </span>
              </span>
              <span class="" style="top: -3.05em;">
               <span class="pstrut" style="height: 3.05em;">
               </span>
               <span class="">
                <span class="mop op-symbol large-op">
                 ∑
                </span>
               </span>
              </span>
             </span>
             <span class="vlist-s">
              ​
             </span>
            </span>
            <span class="vlist-r">
             <span class="vlist" style="height: 1.516em;">
              <span class="">
              </span>
             </span>
            </span>
           </span>
          </span>
          <span class="mspace" style="margin-right: 0.1667em;">
          </span>
          <span class="mord">
           <span class="mord mathcal">
            L
           </span>
           <span class="msupsub">
            <span class="vlist-t vlist-t2">
             <span class="vlist-r">
              <span class="vlist" style="height: 0.2806em;">
               <span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;">
                <span class="pstrut" style="height: 2.7em;">
                </span>
                <span class="sizing reset-size6 size3 mtight">
                 <span class="mord mtight">
                  <span class="mord mathnormal mtight">
                   s
                  </span>
                  <span class="mrel mtight">
                   →
                  </span>
                  <span class="mord mathnormal mtight">
                   t
                  </span>
                 </span>
                </span>
               </span>
              </span>
              <span class="vlist-s">
               ​
              </span>
             </span>
             <span class="vlist-r">
              <span class="vlist" style="height: 0.15em;">
               <span class="">
               </span>
              </span>
             </span>
            </span>
           </span>
          </span>
          <span class="mspace" style="margin-right: 0.2222em;">
          </span>
          <span class="mbin">
           +
          </span>
          <span class="mspace" style="margin-right: 0.2222em;">
          </span>
         </span>
         <span class="base">
          <span class="strut" style="height: 2.3795em; vertical-align: -1.3295em;">
          </span>
          <span class="mord mathnormal">
           λ
          </span>
          <span class="mspace" style="margin-right: 0.1667em;">
          </span>
          <span class="mop op-limits">
           <span class="vlist-t vlist-t2">
            <span class="vlist-r">
             <span class="vlist" style="height: 1.05em;">
              <span class="" style="top: -1.8479em; margin-left: 0em;">
               <span class="pstrut" style="height: 3.05em;">
               </span>
               <span class="sizing reset-size6 size3 mtight">
                <span class="mord mtight">
                 <span class="mord mathnormal mtight" style="margin-right: 0.0197em;">
                  l
                 </span>
                 <span class="mrel mtight">
                  ∈
                 </span>
                 <span class="mord mathcal mtight">
                  L
                 </span>
                </span>
               </span>
              </span>
              <span class="" style="top: -3.05em;">
               <span class="pstrut" style="height: 3.05em;">
               </span>
               <span class="">
                <span class="mop op-symbol large-op">
                 ∑
                </span>
               </span>
              </span>
             </span>
             <span class="vlist-s">
              ​
             </span>
            </span>
            <span class="vlist-r">
             <span class="vlist" style="height: 1.3295em;">
              <span class="">
              </span>
             </span>
            </span>
           </span>
          </span>
          <span class="mspace" style="margin-right: 0.1667em;">
          </span>
          <span class="mord">
           <span class="mord mathcal">
            L
           </span>
           <span class="msupsub">
            <span class="vlist-t vlist-t2">
             <span class="vlist-r">
              <span class="vlist" style="height: 0.3361em;">
               <span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;">
                <span class="pstrut" style="height: 2.7em;">
                </span>
                <span class="sizing reset-size6 size3 mtight">
                 <span class="mord mtight">
                  <span class="mord mathnormal mtight" style="margin-right: 0.0197em;">
                   l
                  </span>
                  <span class="mrel mtight">
                   →
                  </span>
                  <span class="mord mathnormal mtight" style="margin-right: 0.0197em;">
                   l
                  </span>
                 </span>
                </span>
               </span>
              </span>
              <span class="vlist-s">
               ​
              </span>
             </span>
             <span class="vlist-r">
              <span class="vlist" style="height: 0.15em;">
               <span class="">
               </span>
              </span>
             </span>
            </span>
           </span>
          </span>
         </span>
        </span>
       </span>
      </span>
     </span>
     <br/>
     •
     <strong>
      零样本翻译
     </strong>
     ：通过枢纽语言（pivot）桥接无直接语料的语言对
    </p>
    <p>
     <strong>
      实验结果
     </strong>
     ：
     <br/>
     在斯瓦希里语→芬兰语任务中，多语言模型比单语言模型BLEU提升14.2分
    </p>
    <h4>
     <a id="52__316">
     </a>
     5.2 领域自适应技术
    </h4>
    <p>
     <strong>
      动态领域混合
     </strong>
     ：
     <br/>
     <span class="katex--display">
      <span class="katex-display">
       <span class="katex">
        <span class="katex-mathml">
         P 
         
        
          ( 
         
        
          y 
         
        
          ∣ 
         
        
          x 
         
        
          ) 
         
        
          = 
         
         
         
           ∑ 
          
          
          
            d 
           
          
            ∈ 
           
          
            D 
           
          
         
         
         
           π 
          
         
           d 
          
         
        
          ( 
         
        
          x 
         
        
          ) 
         
         
         
           P 
          
         
           d 
          
         
        
          ( 
         
        
          y 
         
        
          ∣ 
         
        
          x 
         
        
          ) 
         
        
       
         P(y|x) = \sum_{d\in\mathcal{D}} \pi_d(x) P_d(y|x)
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 1em; vertical-align: -0.25em;">
          </span>
          <span class="mord mathnormal" style="margin-right: 0.1389em;">
           P
          </span>
          <span class="mopen">
           (
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0359em;">
           y
          </span>
          <span class="mord">
           ∣
          </span>
          <span class="mord mathnormal">
           x
          </span>
          <span class="mclose">
           )
          </span>
          <span class="mspace" style="margin-right: 0.2778em;">
          </span>
          <span class="mrel">
           =
          </span>
          <span class="mspace" style="margin-right: 0.2778em;">
          </span>
         </span>
         <span class="base">
          <span class="strut" style="height: 2.3795em; vertical-align: -1.3295em;">
          </span>
          <span class="mop op-limits">
           <span class="vlist-t vlist-t2">
            <span class="vlist-r">
             <span class="vlist" style="height: 1.05em;">
              <span class="" style="top: -1.8479em; margin-left: 0em;">
               <span class="pstrut" style="height: 3.05em;">
               </span>
               <span class="sizing reset-size6 size3 mtight">
                <span class="mord mtight">
                 <span class="mord mathnormal mtight">
                  d
                 </span>
                 <span class="mrel mtight">
                  ∈
                 </span>
                 <span class="mord mathcal mtight" style="margin-right: 0.0278em;">
                  D
                 </span>
                </span>
               </span>
              </span>
              <span class="" style="top: -3.05em;">
               <span class="pstrut" style="height: 3.05em;">
               </span>
               <span class="">
                <span class="mop op-symbol large-op">
                 ∑
                </span>
               </span>
              </span>
             </span>
             <span class="vlist-s">
              ​
             </span>
            </span>
            <span class="vlist-r">
             <span class="vlist" style="height: 1.3295em;">
              <span class="">
              </span>
             </span>
            </span>
           </span>
          </span>
          <span class="mspace" style="margin-right: 0.1667em;">
          </span>
          <span class="mord">
           <span class="mord mathnormal" style="margin-right: 0.0359em;">
            π
           </span>
           <span class="msupsub">
            <span class="vlist-t vlist-t2">
             <span class="vlist-r">
              <span class="vlist" style="height: 0.3361em;">
               <span class="" style="top: -2.55em; margin-left: -0.0359em; margin-right: 0.05em;">
                <span class="pstrut" style="height: 2.7em;">
                </span>
                <span class="sizing reset-size6 size3 mtight">
                 <span class="mord mathnormal mtight">
                  d
                 </span>
                </span>
               </span>
              </span>
              <span class="vlist-s">
               ​
              </span>
             </span>
             <span class="vlist-r">
              <span class="vlist" style="height: 0.15em;">
               <span class="">
               </span>
              </span>
             </span>
            </span>
           </span>
          </span>
          <span class="mopen">
           (
          </span>
          <span class="mord mathnormal">
           x
          </span>
          <span class="mclose">
           )
          </span>
          <span class="mord">
           <span class="mord mathnormal" style="margin-right: 0.1389em;">
            P
           </span>
           <span class="msupsub">
            <span class="vlist-t vlist-t2">
             <span class="vlist-r">
              <span class="vlist" style="height: 0.3361em;">
               <span class="" style="top: -2.55em; margin-left: -0.1389em; margin-right: 0.05em;">
                <span class="pstrut" style="height: 2.7em;">
                </span>
                <span class="sizing reset-size6 size3 mtight">
                 <span class="mord mathnormal mtight">
                  d
                 </span>
                </span>
               </span>
              </span>
              <span class="vlist-s">
               ​
              </span>
             </span>
             <span class="vlist-r">
              <span class="vlist" style="height: 0.15em;">
               <span class="">
               </span>
              </span>
             </span>
            </span>
           </span>
          </span>
          <span class="mopen">
           (
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0359em;">
           y
          </span>
          <span class="mord">
           ∣
          </span>
          <span class="mord mathnormal">
           x
          </span>
          <span class="mclose">
           )
          </span>
         </span>
        </span>
       </span>
      </span>
     </span>
     <br/>
     其中领域权重
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        π 
         
        
          d 
         
        
       
         ( 
        
       
         x 
        
       
         ) 
        
       
      
        \pi_d(x)
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 1em; vertical-align: -0.25em;">
         </span>
         <span class="mord">
          <span class="mord mathnormal" style="margin-right: 0.0359em;">
           π
          </span>
          <span class="msupsub">
           <span class="vlist-t vlist-t2">
            <span class="vlist-r">
             <span class="vlist" style="height: 0.3361em;">
              <span class="" style="top: -2.55em; margin-left: -0.0359em; margin-right: 0.05em;">
               <span class="pstrut" style="height: 2.7em;">
               </span>
               <span class="sizing reset-size6 size3 mtight">
                <span class="mord mathnormal mtight">
                 d
                </span>
               </span>
              </span>
             </span>
             <span class="vlist-s">
              ​
             </span>
            </span>
            <span class="vlist-r">
             <span class="vlist" style="height: 0.15em;">
              <span class="">
              </span>
             </span>
            </span>
           </span>
          </span>
         </span>
         <span class="mopen">
          (
         </span>
         <span class="mord mathnormal">
          x
         </span>
         <span class="mclose">
          )
         </span>
        </span>
       </span>
      </span>
     </span>
     由分类器实时预测
    </p>
    <p>
     <strong>
      医疗领域案例
     </strong>
     ：
     <br/>
     • 通用模型BLEU：22.4
     <br/>
     • 领域自适应后BLEU：37.6（+68%）
    </p>
    <hr/>
    <h3>
     <a id="_329">
     </a>
     结语
    </h3>
    <p>
     机器翻译技术的演进史，本质是人类对语言认知的数字化探索。从基于短语的统计模型到基于自注意力的Transformer，每一次突破都推动着机器对语言理解的深入。然而，当前系统仍无法真正理解"语言之魂"——那些蕴含在文化背景、社会习俗中的微妙语义。未来的突破或将来自神经符号系统的结合，让机器既能把握统计规律，又能理解符号逻辑，最终实现真正的跨语言智能。
    </p>
    <p>
     <strong>
      参考文献
     </strong>
     ：
    </p>
    <ol>
     <li>
      <a href="https://www.aclweb.org/anthology/N03-1017.pdf" rel="nofollow">
       Statistical Phrase-Based Translation
      </a>
     </li>
     <li>
      <a href="https://arxiv.org/abs/1409.0473" rel="nofollow">
       Neural Machine Translation by Jointly Learning to Align and Translate
      </a>
     </li>
     <li>
      <a href="https://arxiv.org/abs/1706.03762" rel="nofollow">
       Transformer: Attention Is All You Need
      </a>
     </li>
     <li>
      <a href="https://aclanthology.org/P02-1040.pdf" rel="nofollow">
       BLEU: a Method for Automatic Evaluation of MT
      </a>
     </li>
     <li>
      <a href="https://www.cs.cmu.edu/~alavie/METEOR/meteor-naacl-2010.pdf" rel="nofollow">
       METEOR: An Automatic Metric for MT Evaluation
      </a>
     </li>
    </ol>
    <p>
     <strong>
      声明
     </strong>
     ：本文实验数据来自公开论文，代码示例仅用于教学目的。部分示意图引用自arXiv论文，版权归原作者所有。
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/75d44332b31c46708d1ad6c878f26c0e.gif#pic_center"/>
    </p>
    <hr/>
    <p>
     <em>
     </em>
    </p>
    <center>
     <em>
      未觉池塘春草梦，阶前梧叶已秋声。
     </em>
     <center>
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/c10661653d8f4a28adc27730a22ac13c.png#pic_center" width="250">
       <br/>
       学习是通往智慧高峰的阶梯，努力是成功的基石。
       <br/>
       我在求知路上不懈探索，将点滴感悟与收获都记在博客里。
       <br/>
       要是我的博客能触动您，盼您
       <mark>
        点个赞、留个言，再关注一下。
       </mark>
       <br/>
       您的支持是我前进的动力，愿您的点赞为您带来好运，愿您生活常暖、快乐常伴！
       <br/>
       希望您常来看看，我是
       <a href="https://blog.csdn.net/TrueYSH?spm=1011.2124.3001.5343">
        秋声
       </a>
       ，与您一同成长。
       <br/>
       <strong>
        秋声敬上，期待再会！
       </strong>
      </img>
     </center>
    </center>
    <p>
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="6874747073:3a2f2f626c6f672e6373646e2e6e65742f547275655953482f:61727469636c652f64657461696c732f313436313437363936" class_="artid" style="display:none">
 </p>
</div>


