---
layout: post
title: "C语言之斗地主游戏"
date: 2025-01-20 15:26:20 +0800
description: "本文介绍了一个基于C++实现的简单斗地主游戏程序。该程序模拟了斗地主的基本规则和流程，包括发牌、抢地"
keywords: "C语言之斗地主游戏"
categories: ['C']
tags: ['游戏', 'Microsoft', 'C', 'C']
artid: "145263576"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=145263576
    alt: "C语言之斗地主游戏"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=145263576
featuredImagePreview: https://bing.ee123.net/img/rand?artid=145263576
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     C语言之斗地主游戏
    </h1>
   </div>
   <div class="article-resource-info-box">
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-tomorrow-night" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/direct/8cede7ce5f1b41f195479959757c0e57.gif"/>
    </p>
    <hr/>
    <p>
     🌟
     <strong>
      嗨，我是
      <a href="https://lucianaib.blog.csdn.net/" rel="nofollow" title="LucianaiB">
       LucianaiB
      </a>
      ！
     </strong>
    </p>
    <p>
     <strong>
      🌍 总有人间一两风，填我十万八千梦。
     </strong>
    </p>
    <p>
     <strong>
      🚀 路漫漫其修远兮，吾将上下而求索。
     </strong>
    </p>
    <hr/>
    <p>
     ​
    </p>
    <h2>
     <a id="C_12">
     </a>
     C语言之斗地主游戏
    </h2>
    <h2>
     <a id="_13">
     </a>
     目录
    </h2>
    <ol>
     <li>
      <a href="#%E7%A8%8B%E5%BA%8F%E6%A6%82%E8%BF%B0" rel="nofollow">
       程序概述
      </a>
     </li>
     <li>
      <a href="#%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1" rel="nofollow">
       程序设计
      </a>
      <ol>
       <li>
        <a href="#card%E7%B1%BB" rel="nofollow">
         Card类
        </a>
       </li>
       <li>
        <a href="#cardgroup%E7%B1%BB" rel="nofollow">
         CardGroup类
        </a>
       </li>
       <li>
        <a href="#player%E7%B1%BB" rel="nofollow">
         Player类
        </a>
       </li>
       <li>
        <a href="#lastcards%E7%B1%BB" rel="nofollow">
         LastCards类
        </a>
       </li>
       <li>
        <a href="#landlords%E7%B1%BB" rel="nofollow">
         Landlords类
        </a>
       </li>
      </ol>
     </li>
     <li>
      <a href="#%E6%B8%B8%E6%88%8F%E6%B5%81%E7%A8%8B" rel="nofollow">
       游戏流程
      </a>
     </li>
     <li>
      <a href="#%E7%89%B9%E7%82%B9%E4%B8%8E%E5%8A%9F%E8%83%BD" rel="nofollow">
       特点与功能
      </a>
      <ol>
       <li>
        <a href="#%E7%89%8C%E5%9E%8B%E5%88%A4%E6%96%AD" rel="nofollow">
         牌型判断
        </a>
       </li>
       <li>
        <a href="#ai%E6%8F%90%E7%A4%BA" rel="nofollow">
         AI提示
        </a>
       </li>
       <li>
        <a href="#%E4%BA%A4%E4%BA%92%E6%80%A7" rel="nofollow">
         交互性
        </a>
       </li>
       <li>
        <a href="#%E9%9A%8F%E6%9C%BA%E6%80%A7" rel="nofollow">
         随机性
        </a>
       </li>
      </ol>
     </li>
     <li>
      <a href="#%E6%B5%8B%E8%AF%95%E4%B8%8E%E8%BF%90%E8%A1%8C" rel="nofollow">
       测试与运行
      </a>
     </li>
     <li>
      <a href="#%E6%80%BB%E4%BD%93%E8%AF%84%E4%BB%B7" rel="nofollow">
       总体评价
      </a>
     </li>
     <li>
      <a href="#%E9%99%84%E5%BD%95%E4%BB%A3%E7%A0%81" rel="nofollow">
       附录代码
      </a>
     </li>
    </ol>
    <p>
     本文介绍了一个基于C++实现的简单斗地主游戏程序。该程序模拟了斗地主的基本规则和流程，包括发牌、抢地主、出牌以及胜负判定等功能。程序的核心由多个类组成，包括
     <code>
      Card
     </code>
     （表示单张牌）、
     <code>
      CardGroup
     </code>
     （表示一组牌）、
     <code>
      Player
     </code>
     （表示玩家）、
     <code>
      LastCards
     </code>
     （用于记录上家出的牌）和
     <code>
      Landlords
     </code>
     （用于管理整个游戏流程）。
    </p>
    <h5>
     <a id="_35">
     </a>
     程序设计
    </h5>
    <p>
     程序通过
     <code>
      Card
     </code>
     类定义了牌的基本属性，如牌面值、花色和显示方法。
     <code>
      CardGroup
     </code>
     类用于管理一组牌，并提供牌型判断和大小比较的功能。
     <code>
      Player
     </code>
     类则管理玩家手中的牌，并提供出牌和提示功能。
     <code>
      LastCards
     </code>
     类用于记录上家出的牌，并提供查找可打得过的牌的功能。
     <code>
      Landlords
     </code>
     类作为游戏的核心，负责初始化游戏、发牌、抢地主、轮流出牌以及判断游戏结束等逻辑。
    </p>
    <h5>
     <a id="_39">
     </a>
     游戏流程
    </h5>
    <p>
     游戏开始时，程序通过洗牌和分牌将54张牌随机分配给三个玩家，并通过抢地主环节确定地主玩家。地主玩家获得额外的三张底牌后，游戏正式开始。玩家按顺序出牌，每次出牌需要比上家的牌大，或者选择不出。当某个玩家手中的牌全部出完时，游戏结束，程序会判断地主是否获胜。
    </p>
    <h5>
     <a id="_43">
     </a>
     特点与功能
    </h5>
    <ol>
     <li>
      <strong>
       牌型判断
      </strong>
      ：程序能够准确判断牌型，如单牌、对子、三带一、炸弹等，并根据牌型和牌的大小进行比较。
     </li>
     <li>
      <strong>
       AI提示
      </strong>
      ：非地主玩家在出牌时，程序会自动提示可打得过的牌，提高了游戏的流畅性。
     </li>
     <li>
      <strong>
       交互性
      </strong>
      ：程序通过控制台输入输出与用户交互，用户可以选择是否抢地主、出牌以及是否继续游戏。
     </li>
     <li>
      <strong>
       随机性
      </strong>
      ：通过随机洗牌和抢地主环节，增加了游戏的趣味性和不确定性。
     </li>
    </ol>
    <h5>
     <a id="_50">
     </a>
     测试与运行
    </h5>
    <p>
     程序在测试中表现出了良好的稳定性和正确性。玩家可以自由选择出牌策略，程序会根据规则判断出牌是否合法，并在游戏结束后输出胜负结果。用户可以通过简单的命令行交互体验完整的斗地主游戏流程。
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/092bd248d2a449cb9fdc724b420b56e7.png"/>
    </p>
    <h5>
     <a id="_56">
     </a>
     总体评价
    </h5>
    <p>
     本文介绍了一个基于C++实现的斗地主游戏程序，模拟了斗地主的基本规则和流程，包括发牌、抢地主、出牌和胜负判定等功能。程序的核心由多个类组成，如Card、CardGroup、Player、LastCards和Landlords，通过面向对象编程的方式实现了游戏的完整逻辑。
    </p>
    <p>
     在程序设计中，Card类用于定义单张牌的基本属性，如牌面值、花色和显示方法。CardGroup类管理一组牌，并提供牌型判断和大小比较的功能。Player类管理玩家手中的牌，并提供出牌和提示功能。LastCards类用于记录上家出的牌，并提供查找可打得过的牌的功能。Landlords类作为游戏的核心，负责初始化游戏、发牌、抢地主、轮流出牌以及判断游戏结束等逻辑。
    </p>
    <p>
     游戏流程从洗牌和分牌开始，通过抢地主环节确定地主玩家。地主获得额外三张底牌后，游戏正式开始。玩家按顺序出牌，每次出牌需要比上家的牌大，或者选择不出。当某个玩家手中的牌全部出完时，游戏结束，程序会判断地主是否获胜。
     <br/>
     该程序具有以下特点：
    </p>
    <p>
     牌型判断：能够准确判断牌型，如单牌、对子、三带一、炸弹等，并根据牌型和牌的大小进行比较。
    </p>
    <p>
     AI提示：非地主玩家在出牌时，程序会自动提示可打得过的牌，提高了游戏的流畅性。
    </p>
    <p>
     交互性：通过控制台输入输出与用户交互，用户可以选择是否抢地主、出牌以及是否继续游戏。
    </p>
    <p>
     随机性：通过随机洗牌和抢地主环节，增加了游戏的趣味性和不确定性。
    </p>
    <p>
     在测试中，程序表现出良好的稳定性和正确性，用户可以通过简单的命令行交互体验完整的斗地主游戏流程。该程序不仅实现了斗地主的基本规则，还通过类的设计和封装展示了面向对象编程的思想。代码结构清晰，易于理解和扩展，适合用于学习和研究C++编程以及游戏开发。
    </p>
    <h5>
     <a id="_76">
     </a>
     附录代码：
    </h5>
    <pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;vector&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;assert.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;string&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;algorithm&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;time.h&gt;</span></span>

using namespace std<span class="token punctuation">;</span>


<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">PLAYERCOUNT</span> <span class="token expression"><span class="token number">3</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">CARDSCOUNT</span> <span class="token expression"><span class="token number">54</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">CURRENTPLAYER</span> <span class="token expression"><span class="token number">0</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">VALUECOUNT</span> <span class="token expression"><span class="token number">17</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">ERROR</span> <span class="token expression"><span class="token operator">-</span><span class="token number">1</span></span></span>
using namespace std<span class="token punctuation">;</span>
<span class="token keyword">int</span> scnt<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token keyword">char</span> toFigure<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">"34567890JQKA 2YZ"</span><span class="token punctuation">;</span>

<span class="token keyword">enum</span> <span class="token class-name">COLOR</span><span class="token punctuation">{<!-- --></span>  <span class="token comment">//花色显示ASCII: 3~6</span>
eHEART<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token comment">//红桃</span>
eDIAMOND<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token comment">//方片</span>
eCLUB<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">,</span>   <span class="token comment">//草花</span>
eSPADE<span class="token operator">=</span><span class="token number">6</span>   <span class="token comment">//黑桃</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>



class Card<span class="token punctuation">;</span>
class CardsType<span class="token punctuation">;</span>
class CardGroup<span class="token punctuation">;</span>
class Player<span class="token punctuation">;</span>
class Landlords<span class="token punctuation">;</span>
class LastCards<span class="token punctuation">;</span>
bool <span class="token function">makeChoice</span><span class="token punctuation">(</span>string tip<span class="token punctuation">)</span><span class="token punctuation">;</span>
bool <span class="token function">cmp</span><span class="token punctuation">(</span>Card<span class="token operator">*</span> a<span class="token punctuation">,</span>Card<span class="token operator">*</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
class Card<span class="token punctuation">{<!-- --></span>
public<span class="token operator">:</span>
<span class="token keyword">char</span> figure<span class="token punctuation">;</span>
COLOR color<span class="token punctuation">;</span>
<span class="token keyword">int</span> value<span class="token punctuation">;</span>
<span class="token function">Card</span><span class="token punctuation">(</span><span class="token keyword">char</span> _figure<span class="token punctuation">,</span>COLOR _color<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    figure<span class="token operator">=</span>_figure<span class="token punctuation">;</span>
    color<span class="token operator">=</span>_color<span class="token punctuation">;</span>
    value<span class="token operator">=</span><span class="token function">calValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">calValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>toFigure<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>toFigure<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">==</span>figure<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> i<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> ERROR<span class="token punctuation">;</span>
<span class="token punctuation">}</span>


    <span class="token keyword">void</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token function">assert</span><span class="token punctuation">(</span>value <span class="token operator">!=</span> ERROR<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">switch</span> <span class="token punctuation">(</span>color<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">case</span> eHEART<span class="token operator">:</span>
                cout <span class="token operator">&lt;&lt;</span> <span class="token string">"♥"</span><span class="token punctuation">;</span> <span class="token comment">// 红桃</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> eDIAMOND<span class="token operator">:</span>
                cout <span class="token operator">&lt;&lt;</span> <span class="token string">"♦"</span><span class="token punctuation">;</span> <span class="token comment">// 方片</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> eCLUB<span class="token operator">:</span>
                cout <span class="token operator">&lt;&lt;</span> <span class="token string">"♣"</span><span class="token punctuation">;</span> <span class="token comment">// 草花</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> eSPADE<span class="token operator">:</span>
                cout <span class="token operator">&lt;&lt;</span> <span class="token string">"♠"</span><span class="token punctuation">;</span> <span class="token comment">// 黑桃</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">default</span><span class="token operator">:</span>
                cout <span class="token operator">&lt;&lt;</span> <span class="token string">"?"</span><span class="token punctuation">;</span> <span class="token comment">// 未知花色</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        cout <span class="token operator">&lt;&lt;</span> figure <span class="token operator">&lt;&lt;</span> <span class="token char">' '</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
class CardsType<span class="token punctuation">{<!-- --></span>
public<span class="token operator">:</span>
<span class="token comment">//为了规范查找对应牌的方法</span>
<span class="token comment">//统一为3个参数cnt1、isContinuous、cnt2</span>
<span class="token keyword">int</span> typeId<span class="token punctuation">;</span>
string typeStr<span class="token punctuation">;</span>
<span class="token keyword">int</span> cnt1<span class="token punctuation">,</span>cnt2<span class="token punctuation">;</span>
bool isContinuous<span class="token punctuation">;</span>
<span class="token function">CardsType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    typeId<span class="token operator">=</span>ERROR<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
bool operator <span class="token operator">==</span><span class="token punctuation">(</span><span class="token keyword">const</span> CardsType<span class="token operator">&amp;</span> other<span class="token punctuation">)</span><span class="token keyword">const</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> this<span class="token operator">-&gt;</span>typeId<span class="token operator">==</span>other<span class="token punctuation">.</span>typeId<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token operator">*</span> _typeStr<span class="token punctuation">,</span><span class="token keyword">int</span> _typeId<span class="token punctuation">,</span><span class="token keyword">int</span> _cnt1<span class="token punctuation">,</span>bool _isContinuous<span class="token punctuation">,</span><span class="token keyword">int</span> _cnt2<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    cnt1<span class="token operator">=</span>_cnt1<span class="token punctuation">;</span>
    isContinuous<span class="token operator">=</span>_isContinuous<span class="token punctuation">;</span>
    cnt2<span class="token operator">=</span>_cnt2<span class="token punctuation">;</span>
    typeStr<span class="token operator">=</span>_typeStr<span class="token punctuation">;</span>
    typeId<span class="token operator">=</span>_typeId<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
class CardGroup<span class="token punctuation">{<!-- --></span>
public<span class="token operator">:</span>
vector<span class="token operator">&lt;</span>Card<span class="token operator">*</span><span class="token operator">&gt;</span> cards<span class="token punctuation">;</span>
CardsType type<span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">calType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> i<span class="token punctuation">,</span>n<span class="token operator">=</span>cards<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//init(typeStr,typeId,cnt1,isContinuous,cnt2)</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>n<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        type<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token string">"不出"</span><span class="token punctuation">,</span><span class="token number">14</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>n<span class="token operator">==</span><span class="token number">2</span><span class="token operator">&amp;&amp;</span>cards<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">-&gt;</span>value<span class="token operator">==</span><span class="token number">15</span><span class="token operator">&amp;&amp;</span>cards<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">-&gt;</span>value<span class="token operator">==</span><span class="token number">14</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        type<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token string">"王炸"</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//统计同点数牌有多少张</span>
    <span class="token keyword">int</span> cntFlag<span class="token punctuation">[</span>VALUECOUNT<span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>n<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        cntFlag<span class="token punctuation">[</span>cards<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">-&gt;</span>value<span class="token punctuation">]</span><span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//统计点数最多和最少的牌</span>
    <span class="token keyword">int</span> maxCnt<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>minCnt<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>VALUECOUNT<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>maxCnt<span class="token operator">&lt;</span>cntFlag<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
           maxCnt<span class="token operator">=</span>cntFlag<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>cntFlag<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span>minCnt<span class="token operator">&gt;</span>cntFlag<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
           minCnt<span class="token operator">=</span>cntFlag<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>n<span class="token operator">==</span><span class="token number">4</span><span class="token operator">&amp;&amp;</span>maxCnt<span class="token operator">==</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        type<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token string">"炸弹"</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>n<span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        type<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token string">"单牌"</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>n<span class="token operator">==</span><span class="token number">2</span><span class="token operator">&amp;&amp;</span>maxCnt<span class="token operator">==</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        type<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token string">"对子"</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>n<span class="token operator">==</span><span class="token number">3</span><span class="token operator">&amp;&amp;</span>maxCnt<span class="token operator">==</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        type<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token string">"三张 "</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>n<span class="token operator">==</span><span class="token number">4</span><span class="token operator">&amp;&amp;</span>maxCnt<span class="token operator">==</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        type<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token string">"三带一"</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>n<span class="token operator">==</span><span class="token number">5</span><span class="token operator">&amp;&amp;</span>maxCnt<span class="token operator">==</span><span class="token number">3</span><span class="token operator">&amp;&amp;</span>minCnt<span class="token operator">==</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        type<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token string">"三带一对"</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>n<span class="token operator">==</span><span class="token number">6</span><span class="token operator">&amp;&amp;</span>maxCnt<span class="token operator">==</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        type<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token string">"四带二"</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>n<span class="token operator">==</span><span class="token number">8</span><span class="token operator">&amp;&amp;</span>maxCnt<span class="token operator">==</span><span class="token number">4</span><span class="token operator">&amp;&amp;</span>minCnt<span class="token operator">==</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        type<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token string">"四带二"</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>n<span class="token operator">&gt;=</span><span class="token number">5</span><span class="token operator">&amp;&amp;</span>maxCnt<span class="token operator">==</span><span class="token number">1</span><span class="token operator">&amp;&amp;</span>cards<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">-&gt;</span>value<span class="token operator">==</span>cards<span class="token punctuation">[</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">-&gt;</span>value<span class="token operator">+</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        type<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token string">"顺子"</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>n<span class="token operator">&gt;=</span><span class="token number">6</span><span class="token operator">&amp;&amp;</span>maxCnt<span class="token operator">==</span><span class="token number">2</span><span class="token operator">&amp;&amp;</span>minCnt<span class="token operator">==</span><span class="token number">2</span><span class="token operator">&amp;&amp;</span>cards<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">-&gt;</span>value<span class="token operator">==</span>cards<span class="token punctuation">[</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">-&gt;</span>value<span class="token operator">+</span>n<span class="token operator">/</span><span class="token number">2</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        type<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token string">"连对"</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">int</span> fjCnt<span class="token punctuation">;</span><span class="token comment">//统计连续且大于3三张的牌</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>VALUECOUNT <span class="token operator">&amp;&amp;</span>cntFlag<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">&lt;</span><span class="token number">3</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span>fjCnt<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>VALUECOUNT <span class="token operator">&amp;&amp;</span>cntFlag<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">&gt;=</span><span class="token number">3</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">,</span>fjCnt<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>fjCnt<span class="token operator">&gt;</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>n<span class="token operator">==</span>fjCnt<span class="token operator">*</span><span class="token number">3</span><span class="token punctuation">)</span>
            type<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token string">"飞机"</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>n<span class="token operator">==</span>fjCnt<span class="token operator">*</span><span class="token number">4</span><span class="token punctuation">)</span>
            type<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token string">"飞机"</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>n<span class="token operator">==</span>fjCnt<span class="token operator">*</span><span class="token number">5</span><span class="token operator">&amp;&amp;</span>minCnt<span class="token operator">==</span><span class="token number">2</span><span class="token punctuation">)</span>
            type<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token string">"飞机"</span><span class="token punctuation">,</span><span class="token number">13</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span>string inputStr<span class="token punctuation">,</span> vector<span class="token operator">&lt;</span>Card<span class="token operator">*</span><span class="token operator">&gt;</span> <span class="token operator">&amp;</span>cardsHolded<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    this<span class="token operator">-&gt;</span>cards<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//不出</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>inputStr<span class="token operator">==</span><span class="token string">"N"</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        this<span class="token operator">-&gt;</span><span class="token function">calType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">int</span> i<span class="token punctuation">,</span>j<span class="token punctuation">;</span>
    <span class="token comment">//输入合法性判断</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>inputStr<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        bool find<span class="token operator">=</span>false<span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span>j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>toFigure<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>inputStr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">==</span>toFigure<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                find<span class="token operator">=</span>true<span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>find<span class="token operator">==</span>false<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token comment">//输入字符不在toFigure中</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//查找手中有没有这些牌</span>
    <span class="token keyword">int</span> visitFlag<span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>inputStr<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        Card <span class="token operator">*</span>find<span class="token operator">=</span><span class="token constant">NULL</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span>j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>j<span class="token operator">&lt;</span>cardsHolded<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>visitFlag<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span>cardsHolded<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">-&gt;</span>figure<span class="token operator">==</span>inputStr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                visitFlag<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
                find<span class="token operator">=</span>cardsHolded<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>find<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            this<span class="token operator">-&gt;</span>cards<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>find<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>
            cout<span class="token operator">&lt;&lt;</span>inputStr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
            cout<span class="token operator">&lt;&lt;</span><span class="token string">"没有找到\t"</span><span class="token punctuation">;</span>
            this<span class="token operator">-&gt;</span>cards<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token comment">//end for(i=0;i&lt;inputStr.size();i++)</span>
    this<span class="token operator">-&gt;</span><span class="token function">arrange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span>Card<span class="token operator">*</span><span class="token operator">&gt;</span> newCards<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    this<span class="token operator">-&gt;</span>cards<span class="token operator">=</span>newCards<span class="token punctuation">;</span>
    this<span class="token operator">-&gt;</span><span class="token function">arrange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
bool <span class="token function">isCanBeat</span><span class="token punctuation">(</span>CardGroup <span class="token operator">&amp;</span>cardGroup<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>cardGroup<span class="token punctuation">.</span>type<span class="token punctuation">.</span>typeStr<span class="token operator">==</span><span class="token string">"王炸"</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> false<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>this<span class="token operator">-&gt;</span>type<span class="token punctuation">.</span>typeStr<span class="token operator">==</span><span class="token string">"王炸"</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> true<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>cardGroup<span class="token punctuation">.</span>type<span class="token operator">==</span>this<span class="token operator">-&gt;</span>type <span class="token operator">&amp;&amp;</span>this<span class="token operator">-&gt;</span>type<span class="token punctuation">.</span>typeStr<span class="token operator">==</span><span class="token string">"炸弹"</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&gt;</span>cardGroup<span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>cardGroup<span class="token punctuation">.</span>type<span class="token punctuation">.</span>typeStr<span class="token operator">==</span><span class="token string">"炸弹"</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> false<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>this<span class="token operator">-&gt;</span>type<span class="token punctuation">.</span>typeStr<span class="token operator">==</span><span class="token string">"炸弹"</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> true<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>cardGroup<span class="token punctuation">.</span>type<span class="token operator">==</span>this<span class="token operator">-&gt;</span>type <span class="token operator">&amp;&amp;</span>this<span class="token operator">-&gt;</span>cards<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">==</span>cardGroup<span class="token punctuation">.</span>cards<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> this<span class="token operator">-&gt;</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&gt;</span>cardGroup<span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> false<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token comment">//计算牌组权值</span>
    <span class="token keyword">int</span> i<span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>type<span class="token punctuation">.</span>typeStr<span class="token operator">==</span><span class="token string">"三带一"</span><span class="token operator">||</span>type<span class="token punctuation">.</span>typeStr<span class="token operator">==</span><span class="token string">"三带一对"</span><span class="token operator">||</span>type<span class="token punctuation">.</span>typeStr<span class="token operator">==</span><span class="token string">"飞机"</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>cards<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>cards<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">-&gt;</span>value<span class="token operator">==</span>cards<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">-&gt;</span>value<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                <span class="token keyword">return</span> cards<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">-&gt;</span>value<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>type<span class="token punctuation">.</span>typeStr<span class="token operator">==</span><span class="token string">"四带二"</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>cards<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>cards<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">-&gt;</span>value<span class="token operator">==</span>cards<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">-&gt;</span>value<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                <span class="token keyword">return</span> cards<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">-&gt;</span>value<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> cards<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">-&gt;</span>value<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">arrange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token comment">//整理：排序、计算类型</span>
   <span class="token comment">// sort(this-&gt;cards.begin(),this-&gt;cards.end(),cmp);</span>
    this<span class="token operator">-&gt;</span><span class="token function">calType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
class LastCards<span class="token punctuation">{<!-- --></span>
<span class="token keyword">static</span> LastCards <span class="token operator">*</span>lastCards<span class="token punctuation">;</span>
public<span class="token operator">:</span>
Player <span class="token operator">*</span>player<span class="token punctuation">;</span>
CardGroup cardGroup<span class="token punctuation">;</span>
<span class="token keyword">static</span> LastCards<span class="token operator">*</span> <span class="token function">inst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span><span class="token comment">//单例模式</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>lastCards<span class="token operator">==</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        lastCards<span class="token operator">=</span>new <span class="token function">LastCards</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> lastCards<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
vector<span class="token operator">&lt;</span>Card<span class="token operator">*</span><span class="token operator">&gt;</span> <span class="token function">findCanBeatFrom</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span>Card<span class="token operator">*</span><span class="token operator">&gt;</span> <span class="token operator">&amp;</span>cardsHolded<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token comment">//查找能打得过的牌</span>
    <span class="token keyword">int</span> i<span class="token punctuation">,</span>j<span class="token punctuation">,</span>k<span class="token punctuation">,</span>n<span class="token operator">=</span>cardsHolded<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>m<span class="token operator">=</span>cardGroup<span class="token punctuation">.</span>cards<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    string typeStr<span class="token operator">=</span>cardGroup<span class="token punctuation">.</span>type<span class="token punctuation">.</span>typeStr<span class="token punctuation">;</span>
    vector<span class="token operator">&lt;</span>Card<span class="token operator">*</span><span class="token operator">&gt;</span> ret<span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>typeStr<span class="token operator">==</span><span class="token string">"王炸"</span><span class="token operator">||</span>n<span class="token operator">&lt;</span>m<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token comment">//打不过，返回空数组</span>
        <span class="token keyword">return</span> ret<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">int</span> value<span class="token operator">=</span>cardGroup<span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//统计各点牌出现的次数</span>
    <span class="token keyword">int</span> cntFlag<span class="token punctuation">[</span>VALUECOUNT<span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>n<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        cntFlag<span class="token punctuation">[</span>cardsHolded<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">-&gt;</span>value<span class="token punctuation">]</span><span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">int</span> continuousCount<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>cardGroup<span class="token punctuation">.</span>type<span class="token punctuation">.</span>isContinuous<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        continuousCount<span class="token operator">=</span>m<span class="token operator">/</span><span class="token punctuation">(</span>cardGroup<span class="token punctuation">.</span>type<span class="token punctuation">.</span>cnt1<span class="token operator">+</span>cardGroup<span class="token punctuation">.</span>type<span class="token punctuation">.</span>cnt2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    bool findFirstFigure<span class="token punctuation">;</span>
    <span class="token comment">//cout&lt;&lt;"continuousCount="&lt;&lt;continuousCount&lt;&lt;endl;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span>value<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>VALUECOUNT<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        findFirstFigure<span class="token operator">=</span>true<span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span>j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>j<span class="token operator">&lt;</span>continuousCount<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>cntFlag<span class="token punctuation">[</span>i<span class="token operator">-</span>j<span class="token punctuation">]</span><span class="token operator">&lt;</span>cardGroup<span class="token punctuation">.</span>type<span class="token punctuation">.</span>cnt1<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                findFirstFigure<span class="token operator">=</span>false<span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>findFirstFigure<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            ret<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">int</span> firstFigure<span class="token operator">=</span>i<span class="token punctuation">;</span>
            <span class="token comment">//cout&lt;&lt;"查找"&lt;&lt;cardGroup.type.cnt1&lt;&lt;"个"&lt;&lt;firstFigure+3&lt;&lt;endl;</span>
            <span class="token keyword">for</span><span class="token punctuation">(</span>k<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>k<span class="token operator">&lt;</span>cardsHolded<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>j<span class="token operator">&lt;</span>continuousCount<span class="token punctuation">;</span>k<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>cardsHolded<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token operator">-&gt;</span>value<span class="token operator">==</span>firstFigure<span class="token operator">-</span>j<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> kk<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>j<span class="token operator">&gt;=</span><span class="token number">0</span><span class="token operator">&amp;&amp;</span>kk<span class="token operator">&lt;</span>cardGroup<span class="token punctuation">.</span>type<span class="token punctuation">.</span>cnt1<span class="token punctuation">;</span>kk<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                        ret<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>cardsHolded<span class="token punctuation">[</span>k<span class="token operator">+</span>kk<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                    j<span class="token operator">++</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>cardGroup<span class="token punctuation">.</span>type<span class="token punctuation">.</span>cnt2<span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                <span class="token keyword">int</span> SecondFigures<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
                <span class="token keyword">int</span> SecondCount<span class="token operator">=</span>continuousCount<span class="token punctuation">;</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>cardGroup<span class="token punctuation">.</span>type<span class="token punctuation">.</span>typeStr<span class="token operator">==</span><span class="token string">"四带二"</span><span class="token punctuation">)</span>
                    SecondCount<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">;</span>
                bool findSecondFigure<span class="token operator">=</span>true<span class="token punctuation">;</span>
                <span class="token keyword">for</span><span class="token punctuation">(</span>j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>k<span class="token operator">=</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>j<span class="token operator">&lt;</span>SecondCount <span class="token operator">&amp;&amp;</span>findSecondFigure<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                    findSecondFigure<span class="token operator">=</span>false<span class="token punctuation">;</span>
                    <span class="token keyword">for</span><span class="token punctuation">(</span>k<span class="token operator">++</span><span class="token punctuation">;</span>k<span class="token operator">&lt;</span>VALUECOUNT<span class="token punctuation">;</span>k<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                        SecondFigures<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">=</span>k<span class="token punctuation">;</span>
                        <span class="token keyword">if</span><span class="token punctuation">(</span>cntFlag<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token operator">&gt;=</span>cardGroup<span class="token punctuation">.</span>type<span class="token punctuation">.</span>cnt2 <span class="token operator">&amp;&amp;</span>cntFlag<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token operator">&lt;</span>cardGroup<span class="token punctuation">.</span>type<span class="token punctuation">.</span>cnt1<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                            findSecondFigure<span class="token operator">=</span>true<span class="token punctuation">;</span>
                            <span class="token keyword">break</span><span class="token punctuation">;</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>findSecondFigure<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                    <span class="token comment">//cout&lt;&lt;"查找SecondFigure "&lt;&lt;cardGroup.type.cnt2&lt;&lt;"个"&lt;&lt;SecondFigures[0]+3&lt;&lt;endl;</span>
                    <span class="token comment">//cout&lt;&lt;"SecondCount= "&lt;&lt;SecondCount&lt;&lt;endl;</span>
                    <span class="token comment">//for(i=0;i&lt;SecondCount;i++)cout&lt;&lt;"SecondFigures["&lt;&lt;i&lt;&lt;"]="&lt;&lt;SecondFigures[i]&lt;&lt;endl;</span>
                    <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>SecondCount<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                        <span class="token keyword">for</span><span class="token punctuation">(</span>j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>j<span class="token operator">&lt;</span>cardsHolded<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                            <span class="token keyword">if</span><span class="token punctuation">(</span>cardsHolded<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">-&gt;</span>value<span class="token operator">==</span>SecondFigures<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                                <span class="token keyword">for</span><span class="token punctuation">(</span>k<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>k<span class="token operator">&lt;</span>cardGroup<span class="token punctuation">.</span>type<span class="token punctuation">.</span>cnt2<span class="token punctuation">;</span>k<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                                    <span class="token comment">//cout&lt;&lt;"添加"&lt;&lt;cardsHolded[j]-&gt;value+3&lt;&lt;endl;</span>
                                    ret<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>cardsHolded<span class="token punctuation">[</span>j<span class="token operator">+</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                                <span class="token punctuation">}</span>
                                <span class="token keyword">do</span><span class="token punctuation">{<!-- --></span>
                                    j<span class="token operator">++</span><span class="token punctuation">;</span>
                                <span class="token punctuation">}</span><span class="token keyword">while</span><span class="token punctuation">(</span>j<span class="token operator">&lt;</span>cardsHolded<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span>cardsHolded<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">-&gt;</span>value<span class="token operator">==</span>SecondFigures<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                            <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>
                                j<span class="token operator">++</span><span class="token punctuation">;</span>
                            <span class="token punctuation">}</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span>
                    <span class="token keyword">return</span> ret<span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token comment">//if(findSecondFigure)</span>
            <span class="token punctuation">}</span><span class="token comment">//end if(cardGroup.type.cnt2&gt;0)</span>
            <span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>
                <span class="token keyword">return</span> ret<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token comment">//end if(findFirstFigure)</span>
    <span class="token punctuation">}</span><span class="token comment">//end for(i=value+1;i&lt;VALUECOUNT;i++)</span>
    ret<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//没牌打得过时查找有没有炸弹</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>typeStr<span class="token operator">!=</span><span class="token string">"炸弹"</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span>cardsHolded<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&gt;=</span><span class="token number">3</span><span class="token punctuation">;</span>i<span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>cardsHolded<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">-&gt;</span>value<span class="token operator">==</span>cardsHolded<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">-&gt;</span>value<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                <span class="token keyword">for</span><span class="token punctuation">(</span>j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>j<span class="token operator">&lt;</span><span class="token number">4</span><span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                    ret<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>cardsHolded<span class="token punctuation">[</span>i<span class="token operator">-</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> ret<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token comment">//end vector&lt;Card*&gt; findCanBeatFrom()</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
LastCards<span class="token operator">*</span> LastCards<span class="token operator">::</span>lastCards <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
class Player<span class="token punctuation">{<!-- --></span>
public<span class="token operator">:</span>
string name<span class="token punctuation">;</span>
vector<span class="token operator">&lt;</span>Card<span class="token operator">*</span><span class="token operator">&gt;</span> cards<span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">arrange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token function">sort</span><span class="token punctuation">(</span>cards<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>cards<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>cmp<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    cout<span class="token operator">&lt;&lt;</span>this<span class="token operator">-&gt;</span>name<span class="token operator">&lt;&lt;</span><span class="token string">":\t"</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>cards<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        cards<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">-&gt;</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    cout<span class="token operator">&lt;&lt;</span><span class="token string">"["</span><span class="token operator">&lt;&lt;</span>cards<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token string">"]\n"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
vector<span class="token operator">&lt;</span>Card<span class="token operator">*</span><span class="token operator">&gt;</span> <span class="token function">tip</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token comment">//提示功能,使自己最小一张连最长</span>
    CardGroup ret<span class="token punctuation">;</span>
    string temp<span class="token punctuation">;</span>
    <span class="token keyword">int</span> j<span class="token punctuation">,</span>k<span class="token punctuation">,</span>m<span class="token operator">=</span>cards<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span>j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>j<span class="token operator">&lt;</span>m<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        temp<span class="token operator">=</span><span class="token string">""</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span>k<span class="token operator">=</span>j<span class="token punctuation">;</span>k<span class="token operator">&lt;</span>m<span class="token punctuation">;</span>k<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            temp<span class="token operator">+=</span>cards<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token operator">-&gt;</span>figure<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        ret<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span>temp<span class="token punctuation">,</span>cards<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>ret<span class="token punctuation">.</span>type<span class="token punctuation">.</span>typeId<span class="token operator">!=</span>ERROR<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> ret<span class="token punctuation">.</span>cards<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    ret<span class="token punctuation">.</span>cards<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> ret<span class="token punctuation">.</span>cards<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">chupai</span><span class="token punctuation">(</span>CardGroup <span class="token operator">&amp;</span>cardGroup<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token comment">//出牌</span>
    cout<span class="token operator">&lt;&lt;</span>this<span class="token operator">-&gt;</span>name<span class="token operator">&lt;&lt;</span><span class="token string">":\t"</span><span class="token punctuation">;</span>
    cout<span class="token operator">&lt;&lt;</span>cardGroup<span class="token punctuation">.</span>type<span class="token punctuation">.</span>typeStr<span class="token operator">&lt;&lt;</span><span class="token char">' '</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>cardGroup<span class="token punctuation">.</span>cards<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        cardGroup<span class="token punctuation">.</span>cards<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">-&gt;</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        this<span class="token operator">-&gt;</span>cards<span class="token punctuation">.</span><span class="token function">erase</span><span class="token punctuation">(</span><span class="token function">find</span><span class="token punctuation">(</span>this<span class="token operator">-&gt;</span>cards<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>this<span class="token operator">-&gt;</span>cards<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>cardGroup<span class="token punctuation">.</span>cards<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    cout<span class="token operator">&lt;&lt;</span><span class="token string">"\t["</span><span class="token operator">&lt;&lt;</span>this<span class="token operator">-&gt;</span>cards<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token string">"]\n"</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>cardGroup<span class="token punctuation">.</span>type<span class="token punctuation">.</span>typeStr<span class="token operator">!=</span><span class="token string">"不出"</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token comment">//记录到 LastCards 中</span>
        LastCards<span class="token operator">::</span><span class="token function">inst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span>player<span class="token operator">=</span>this<span class="token punctuation">;</span>
        LastCards<span class="token operator">::</span><span class="token function">inst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span>cardGroup<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span>cardGroup<span class="token punctuation">.</span>cards<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
class Landlords<span class="token punctuation">{<!-- --></span>
Player <span class="token operator">*</span>player<span class="token punctuation">[</span>PLAYERCOUNT<span class="token punctuation">]</span><span class="token punctuation">;</span>
bool finished<span class="token punctuation">,</span>youWin<span class="token punctuation">,</span>landlordWin<span class="token punctuation">;</span>
<span class="token keyword">int</span> landlordIndex<span class="token punctuation">;</span>
Card <span class="token operator">*</span>cards<span class="token punctuation">[</span>CARDSCOUNT<span class="token punctuation">]</span><span class="token punctuation">;</span>
public<span class="token operator">:</span>
<span class="token function">Landlords</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>k<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>PLAYERCOUNT<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        this<span class="token operator">-&gt;</span>player<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span>new <span class="token function">Player</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//54张牌初始化</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span>k<span class="token operator">=</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">14</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>toFigure<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">==</span><span class="token char">' '</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token keyword">continue</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span>COLOR color<span class="token operator">=</span>eHEART<span class="token punctuation">;</span>color<span class="token operator">&lt;=</span>eSPADE<span class="token punctuation">;</span>color<span class="token operator">=</span><span class="token punctuation">(</span>COLOR<span class="token punctuation">)</span><span class="token punctuation">(</span>color<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            this<span class="token operator">-&gt;</span>cards<span class="token punctuation">[</span>k<span class="token operator">++</span><span class="token punctuation">]</span><span class="token operator">=</span>new <span class="token function">Card</span><span class="token punctuation">(</span>toFigure<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>color<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    this<span class="token operator">-&gt;</span>cards<span class="token punctuation">[</span>k<span class="token operator">++</span><span class="token punctuation">]</span><span class="token operator">=</span>new <span class="token function">Card</span><span class="token punctuation">(</span><span class="token char">'Y'</span><span class="token punctuation">,</span>eSPADE<span class="token punctuation">)</span><span class="token punctuation">;</span>
    this<span class="token operator">-&gt;</span>cards<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token operator">=</span>new <span class="token function">Card</span><span class="token punctuation">(</span><span class="token char">'Z'</span><span class="token punctuation">,</span>eHEART<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">~</span><span class="token function">Landlords</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>PLAYERCOUNT<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        delete this<span class="token operator">-&gt;</span>player<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i1<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i1<span class="token operator">&lt;</span>CARDSCOUNT<span class="token punctuation">;</span>i1<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        delete this<span class="token operator">-&gt;</span>cards<span class="token punctuation">[</span>i1<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    player<span class="token punctuation">[</span>CURRENTPLAYER<span class="token punctuation">]</span><span class="token operator">-&gt;</span>name<span class="token operator">=</span><span class="token string">"Bice"</span><span class="token punctuation">;</span>
    player<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">-&gt;</span>name<span class="token operator">=</span><span class="token string">"玩家2"</span><span class="token punctuation">;</span>
    player<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">-&gt;</span>name<span class="token operator">=</span><span class="token string">"玩家3"</span><span class="token punctuation">;</span>
    finished<span class="token operator">=</span>false<span class="token punctuation">;</span>
    youWin<span class="token operator">=</span>false<span class="token punctuation">;</span>
    landlordWin<span class="token operator">=</span>false<span class="token punctuation">;</span>
    <span class="token comment">//抢地主</span>
    landlordIndex<span class="token operator">=</span>ERROR<span class="token punctuation">;</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span>landlordIndex<span class="token operator">==</span>ERROR<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token function">srand</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token function">time</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">shuffle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        landlordIndex<span class="token operator">=</span><span class="token function">chooseLandlord</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    cout<span class="token operator">&lt;&lt;</span>player<span class="token punctuation">[</span>landlordIndex<span class="token punctuation">]</span><span class="token operator">-&gt;</span>name<span class="token operator">&lt;&lt;</span><span class="token string">"\t成为地主\n\n"</span><span class="token punctuation">;</span>
    this<span class="token operator">-&gt;</span><span class="token function">add3Cards</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    LastCards<span class="token operator">::</span><span class="token function">inst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span>player<span class="token operator">=</span>player<span class="token punctuation">[</span>landlordIndex<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">startGame</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    string inputSrt<span class="token punctuation">;</span>
    CardGroup inputCards<span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> iTurns<span class="token operator">=</span>landlordIndex<span class="token punctuation">;</span><span class="token operator">!</span>finished<span class="token punctuation">;</span>iTurns<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>iTurns<span class="token operator">&gt;=</span>PLAYERCOUNT<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            iTurns<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>iTurns<span class="token operator">==</span>CURRENTPLAYER<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            cout<span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>
            player<span class="token punctuation">[</span>iTurns<span class="token punctuation">]</span><span class="token operator">-&gt;</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            cout<span class="token operator">&lt;&lt;</span><span class="token string">"输入提示：Z=大王 Y=小王 0=10 N=不要 输入可无序 例如:JKQ0A9\n请出牌：\t"</span><span class="token punctuation">;</span>
            <span class="token keyword">do</span><span class="token punctuation">{<!-- --></span>
                cin<span class="token operator">&gt;&gt;</span>inputSrt<span class="token punctuation">;</span>
                inputCards<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span>inputSrt<span class="token punctuation">,</span>player<span class="token punctuation">[</span>iTurns<span class="token punctuation">]</span><span class="token operator">-&gt;</span>cards<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token keyword">while</span><span class="token punctuation">(</span><span class="token function">check</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>inputCards<span class="token punctuation">)</span><span class="token operator">==</span>false<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>player<span class="token punctuation">[</span>iTurns<span class="token punctuation">]</span><span class="token operator">==</span>LastCards<span class="token operator">::</span><span class="token function">inst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span>player<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                <span class="token comment">//若是上次出牌的是自己，启用提示功能</span>
                inputCards<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span>player<span class="token punctuation">[</span>iTurns<span class="token punctuation">]</span><span class="token operator">-&gt;</span><span class="token function">tip</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>
                <span class="token comment">//查找能打得过上家的牌</span>
                inputCards<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span>LastCards<span class="token operator">::</span><span class="token function">inst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">findCanBeatFrom</span><span class="token punctuation">(</span>player<span class="token punctuation">[</span>iTurns<span class="token punctuation">]</span><span class="token operator">-&gt;</span>cards<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        player<span class="token punctuation">[</span>iTurns<span class="token punctuation">]</span><span class="token operator">-&gt;</span><span class="token function">chupai</span><span class="token punctuation">(</span>inputCards<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//出牌</span>
         <span class="token keyword">if</span><span class="token punctuation">(</span>player<span class="token punctuation">[</span>iTurns<span class="token punctuation">]</span><span class="token operator">-&gt;</span>cards<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token comment">//玩家手中没牌了，游戏结束</span>
            finished<span class="token operator">=</span>true<span class="token punctuation">;</span>
            landlordWin<span class="token operator">=</span>iTurns<span class="token operator">==</span>landlordIndex<span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>landlordWin<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                youWin<span class="token operator">=</span>landlordIndex<span class="token operator">==</span>CURRENTPLAYER<span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>
                youWin<span class="token operator">=</span>landlordIndex<span class="token operator">!=</span>CURRENTPLAYER<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    cout<span class="token operator">&lt;&lt;</span><span class="token string">"\n_________________________ "</span><span class="token operator">&lt;&lt;</span><span class="token punctuation">(</span>youWin<span class="token operator">?</span><span class="token string">"You Win!"</span><span class="token operator">:</span><span class="token string">"You Lose!"</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token string">" _________________________\n\n"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">add3Cards</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    cout<span class="token operator">&lt;&lt;</span><span class="token string">"地主3张牌:\t"</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span>PLAYERCOUNT<span class="token operator">*</span><span class="token number">17</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>CARDSCOUNT<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        this<span class="token operator">-&gt;</span>cards<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">-&gt;</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        player<span class="token punctuation">[</span>landlordIndex<span class="token punctuation">]</span><span class="token operator">-&gt;</span>cards<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>cards<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    cout<span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>
    player<span class="token punctuation">[</span>landlordIndex<span class="token punctuation">]</span><span class="token operator">-&gt;</span><span class="token function">arrange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">chooseLandlord</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    cout<span class="token operator">&lt;&lt;</span><span class="token string">"\n_________________________ 抢地主 _________________________\n\n"</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> first<span class="token operator">=</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>last<span class="token punctuation">,</span>cnt<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>i<span class="token punctuation">,</span>j<span class="token operator">=</span><span class="token function">rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">%</span>PLAYERCOUNT<span class="token punctuation">;</span>
    bool decision<span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>PLAYERCOUNT<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">,</span>j<span class="token operator">==</span><span class="token number">2</span><span class="token operator">?</span>j<span class="token operator">=</span><span class="token number">0</span><span class="token operator">:</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>j<span class="token operator">==</span>CURRENTPLAYER<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            decision<span class="token operator">=</span><span class="token function">makeChoice</span><span class="token punctuation">(</span><span class="token string">"是否抢地主？(Y=抢/N=不抢):"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>
            decision<span class="token operator">=</span><span class="token function">rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">%</span><span class="token number">2</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>decision<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            cnt<span class="token operator">++</span><span class="token punctuation">;</span>
            last<span class="token operator">=</span>j<span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>first<span class="token operator">==</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                first<span class="token operator">=</span>j<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            cout<span class="token operator">&lt;&lt;</span>this<span class="token operator">-&gt;</span>player<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">-&gt;</span>name<span class="token operator">&lt;&lt;</span><span class="token string">"\t抢地主\n"</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>
            cout<span class="token operator">&lt;&lt;</span>this<span class="token operator">-&gt;</span>player<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">-&gt;</span>name<span class="token operator">&lt;&lt;</span><span class="token string">"\t没有抢\n"</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>cnt<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        cout<span class="token operator">&lt;&lt;</span><span class="token string">"没人抢，重新发牌\n"</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> ERROR<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>cnt<span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token comment">//第一轮只有一人抢地主</span>
        <span class="token keyword">return</span> first<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>
        <span class="token comment">//最后一次争抢</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>first<span class="token operator">==</span>CURRENTPLAYER<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            decision<span class="token operator">=</span><span class="token function">makeChoice</span><span class="token punctuation">(</span><span class="token string">"是否抢地主？(Y=抢/N=不抢):"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>
            decision<span class="token operator">=</span><span class="token function">rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">%</span><span class="token number">2</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>decision<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            cout<span class="token operator">&lt;&lt;</span>this<span class="token operator">-&gt;</span>player<span class="token punctuation">[</span>first<span class="token punctuation">]</span><span class="token operator">-&gt;</span>name<span class="token operator">&lt;&lt;</span><span class="token string">"\t抢地主\n"</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> first<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>
            cout<span class="token operator">&lt;&lt;</span>this<span class="token operator">-&gt;</span>player<span class="token punctuation">[</span>first<span class="token punctuation">]</span><span class="token operator">-&gt;</span>name<span class="token operator">&lt;&lt;</span><span class="token string">"\t没有抢\n"</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> last<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">shuffle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> i<span class="token punctuation">,</span>j<span class="token punctuation">,</span>k<span class="token punctuation">;</span>
    <span class="token comment">//洗牌</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>CARDSCOUNT<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token function">swap</span><span class="token punctuation">(</span>this<span class="token operator">-&gt;</span>cards<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>this<span class="token operator">-&gt;</span>cards<span class="token punctuation">[</span><span class="token function">rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">%</span>CARDSCOUNT<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
     <span class="token comment">//分牌</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span>k<span class="token operator">=</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>PLAYERCOUNT<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        this<span class="token operator">-&gt;</span>player<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">-&gt;</span>cards<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span>j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>j<span class="token operator">&lt;</span><span class="token number">17</span><span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            this<span class="token operator">-&gt;</span>player<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">-&gt;</span>cards<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>this<span class="token operator">-&gt;</span>cards<span class="token punctuation">[</span>k<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        this<span class="token operator">-&gt;</span>player<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">-&gt;</span><span class="token function">arrange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//整理</span>
        this<span class="token operator">-&gt;</span>player<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">-&gt;</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
bool <span class="token function">check</span><span class="token punctuation">(</span>CardGroup <span class="token operator">*</span>cardGroup<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>cardGroup<span class="token operator">-&gt;</span>type<span class="token punctuation">.</span>typeId<span class="token operator">==</span>ERROR<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        cout<span class="token operator">&lt;&lt;</span><span class="token string">"出牌错误，重新输入\n"</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> false<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>cardGroup<span class="token operator">-&gt;</span>type<span class="token punctuation">.</span>typeStr<span class="token operator">==</span><span class="token string">"不出"</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> true<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>LastCards<span class="token operator">::</span><span class="token function">inst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span>player<span class="token operator">!=</span>player<span class="token punctuation">[</span>CURRENTPLAYER<span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span><span class="token operator">!</span>cardGroup<span class="token operator">-&gt;</span><span class="token function">isCanBeat</span><span class="token punctuation">(</span>LastCards<span class="token operator">::</span><span class="token function">inst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span>cardGroup<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        cout<span class="token operator">&lt;&lt;</span><span class="token string">"打不过，重新输入\n"</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> false<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> true<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
Landlords <span class="token operator">*</span>landlords<span class="token operator">=</span>new <span class="token function">Landlords</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">do</span><span class="token punctuation">{<!-- --></span>
    landlords<span class="token operator">-&gt;</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//发牌、抢地主</span>
    landlords<span class="token operator">-&gt;</span><span class="token function">startGame</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//游戏开始</span>
<span class="token punctuation">}</span><span class="token keyword">while</span><span class="token punctuation">(</span><span class="token function">makeChoice</span><span class="token punctuation">(</span><span class="token string">"\n是否继续游戏？（Y=继续/N=结束）: "</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
delete landlords<span class="token punctuation">;</span>
<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
bool <span class="token function">makeChoice</span><span class="token punctuation">(</span>string tip<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
cout<span class="token operator">&lt;&lt;</span>tip<span class="token punctuation">;</span>
string input<span class="token punctuation">;</span>
cin<span class="token operator">&gt;&gt;</span>input<span class="token punctuation">;</span>
<span class="token keyword">return</span> input<span class="token operator">==</span><span class="token string">"Y"</span><span class="token operator">||</span>input<span class="token operator">==</span><span class="token string">"y"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
bool <span class="token function">cmp</span><span class="token punctuation">(</span>Card<span class="token operator">*</span> a<span class="token punctuation">,</span>Card<span class="token operator">*</span> b<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
<span class="token keyword">if</span><span class="token punctuation">(</span>a<span class="token operator">-&gt;</span>value<span class="token operator">==</span>b<span class="token operator">-&gt;</span>value<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> a<span class="token operator">-&gt;</span>color<span class="token operator">&gt;</span>b<span class="token operator">-&gt;</span>color<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> a<span class="token operator">-&gt;</span>value<span class="token operator">&gt;</span>b<span class="token operator">-&gt;</span>value<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>



</code></pre>
    <hr/>
    <blockquote>
     <p>
      嗨，我是[LucianaiB](https://lucianaib.blog.csdn.net/ “LucianaiB”)。如果你觉得我的分享有价值，不妨通过以下方式表达你的支持：👍 点赞来表达你的喜爱，📁 关注以获取我的最新消息，💬 评论与我交流你的见解。我会继续努力，为你带来更多精彩和实用的内容。
     </p>
    </blockquote>
    <p>
     点击这里👉[LucianaiB](https://lucianaib.blog.csdn.net/ “LucianaiB”) ，获取最新动态，⚡️ 让信息传递更加迅速。
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
  <div class="blog-vote-box" id="blogVoteBox" style="width:400px;margin:auto;margin-top:12px">
  </div>
  <div class="blog-extension-box" id="blogExtensionBox" style="width:400px;margin:auto;margin-top:12px">
  </div>
 </article>
 <p alt="68747470:733a2f2f626c6f672e6373646e2e6e65742f6c776377616d2f:61727469636c652f64657461696c732f313435323633353736" class_="artid" style="display:none">
 </p>
</div>


