---
layout: post
title: "KotlinKotlin基础笔记"
date: 2025-03-09 23:08:35 +0800
description: "定义方式fun 函数名(参数1: 类型, 参数2: 类型, …): 返回类型 {// 函数体return 返回值普通字符串：使用双引号括起来，可以包含转义字符，如换行符\\n。// Hello// World原始字符串：使用三重引号\"\"\"括起来，支持多行且不会转义特殊字符。第1行第2行// 输出：// 第1行// 第2行Kotlin 的类可以有一个主构造函数和一个或多个次构造函数。如果主构造函数没有任何注解或可见性修饰符，可以省略。"
keywords: "【Kotlin】Kotlin基础笔记"
categories: ['Android']
tags: ['笔记', 'Kotlin', 'Java', 'Android']
artid: "146140806"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146140806
    alt: "KotlinKotlin基础笔记"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146140806
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146140806
cover: https://bing.ee123.net/img/rand?artid=146140806
image: https://bing.ee123.net/img/rand?artid=146140806
img: https://bing.ee123.net/img/rand?artid=146140806
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     【Kotlin】Kotlin基础笔记
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h2>
     <a id="_0">
     </a>
     一、数据类型
    </h2>
    <h3>
     <a id="11__2">
     </a>
     1.1 变量声明与类型推导
    </h3>
    <ul>
     <li>
      <p>
       <strong>
        变量声明
       </strong>
       <br/>
       使用
       <code>
        val
       </code>
       声明不可变变量（相当于常量）；使用
       <code>
        var
       </code>
       声明可变变量。
      </p>
      <pre><code class="prism language-kotlin"><span class="token keyword">val</span> a <span class="token operator">=</span> <span class="token number">10</span>          <span class="token comment">// 类型自动推断为 Int，不可变</span>
<span class="token keyword">var</span> b<span class="token operator">:</span> Double <span class="token operator">=</span> <span class="token number">5.0</span> <span class="token comment">// 显示声明为 Double，可变变量</span>
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        类型推导
       </strong>
       <br/>
       Kotlin 编译器会根据初始值自动推导出变量的类型，无需手动指定
      </p>
     </li>
    </ul>
    <h3>
     <a id="12__15">
     </a>
     1.2 数值类型
    </h3>
    <p>
     Kotlin 提供了多种数值类型，主要分为整数类型和浮点数类型：
    </p>
    <ul>
     <li>
      <p>
       <strong>
        整数类型
       </strong>
      </p>
      <ul>
       <li>
        <code>
         Byte
        </code>
        ：8 位，范围 -128 到 127
       </li>
       <li>
        <code>
         Short
        </code>
        ：16 位，范围 -32768 到 32767
       </li>
       <li>
        <code>
         Int
        </code>
        ：32 位，默认类型（范围约为 -21 亿到 21 亿）
       </li>
       <li>
        <code>
         Long
        </code>
        ：64 位，声明时需要在数值后加
        <code>
         L
        </code>
       </li>
      </ul>
      <pre><code class="prism language-kotlin"><span class="token keyword">val</span> num<span class="token operator">:</span> Int <span class="token operator">=</span> <span class="token number">100</span>
<span class="token keyword">val</span> bigNum <span class="token operator">=</span> <span class="token number">8000000000L</span>  <span class="token comment">// 需要使用 L 后缀</span>
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        浮点数类型
       </strong>
      </p>
      <ul>
       <li>
        <code>
         Float
        </code>
        ：32 位，声明时尾部加
        <code>
         f
        </code>
        或
        <code>
         F
        </code>
       </li>
       <li>
        <code>
         Double
        </code>
        ：64 位，默认浮点数类型
       </li>
      </ul>
      <pre><code class="prism language-kotlin"><span class="token keyword">val</span> pi <span class="token operator">=</span> <span class="token number">3.14</span>            <span class="token comment">// 自动推导为 Double</span>
<span class="token keyword">val</span> floatPi <span class="token operator">=</span> <span class="token number">3.14f</span>      <span class="token comment">// 明确为 Float 类型</span>
</code></pre>
     </li>
    </ul>
    <h3>
     <a id="13__41">
     </a>
     1.3 字符类型与布尔类型
    </h3>
    <ul>
     <li>
      <p>
       <strong>
        字符类型
       </strong>
       <br/>
       使用
       <code>
        Char
       </code>
       表示单个字符，常量用单引号括起来：
      </p>
      <pre><code class="prism language-kotlin"><span class="token keyword">val</span> letter<span class="token operator">:</span> Char <span class="token operator">=</span> <span class="token char">'A'</span>
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        布尔类型
       </strong>
       <br/>
       使用
       <code>
        Boolean
       </code>
       类型，只有
       <code>
        true
       </code>
       和
       <code>
        false
       </code>
       两个值：
      </p>
      <pre><code class="prism language-kotlin"><span class="token keyword">val</span> isVisible<span class="token operator">:</span> Boolean <span class="token operator">=</span> <span class="token boolean">true</span>
</code></pre>
     </li>
    </ul>
    <h3>
     <a id="14__57">
     </a>
     1.4 字符串
    </h3>
    <ul>
     <li>
      <p>
       <strong>
        定义字符串
       </strong>
       <br/>
       用双引号
       <code>
        "
       </code>
       括起，可以直接嵌入变量或表达式（字符串模板）：
      </p>
      <pre><code class="prism language-kotlin"><span class="token keyword">val</span> name <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"Kotlin"</span></span>
<span class="token keyword">val</span> greeting <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"Hello, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">name</span></span><span class="token string">!"</span></span>
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        多行字符串
       </strong>
       <br/>
       使用三个引号
       <code>
        """
       </code>
       定义原始字符串，可以保留格式：
      </p>
      <pre><code class="prism language-kotlin"><span class="token keyword">val</span> text <span class="token operator">=</span> <span class="token string-literal multiline"><span class="token string">"""
    这是一个多行字符串
    可以保留原始格式
"""</span></span><span class="token punctuation">.</span><span class="token function">trimIndent</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
     </li>
    </ul>
    <ul>
     <li>
      <p>
       <strong>
        String 模板
       </strong>
      </p>
      <p>
       Kotlin 提供了字符串模板语法，允许在字符串中嵌入变量和复杂表达式，语法如下：
      </p>
     </li>
    </ul>
    <ul>
     <li>
      <ol>
       <li>
        变量插值
       </li>
      </ol>
      <p>
       在字符串中直接使用
      </p>
      <pre><code>$变量名
</code></pre>
      <pre><code class="prism language-kotlin"><span class="token keyword">val</span> name <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"Kotlin"</span></span>
<span class="token function">println</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"Hello, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">name</span></span><span class="token string">!"</span></span><span class="token punctuation">)</span>
</code></pre>
     </li>
     <li>
      <ol start="2">
       <li>
        表达式插值
       </li>
      </ol>
      <p>
       若需要插入的内容是复杂表达式，需要用花括号
       <code>
        {}
       </code>
       包裹，如
      </p>
      <pre><code>${表达式}
</code></pre>
      <pre><code class="prism language-kotlin"><span class="token keyword">val</span> length <span class="token operator">=</span> name<span class="token punctuation">.</span>length
<span class="token function">println</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"字符串 \"</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">name</span></span><span class="token string">\" 的长度是 </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span><span class="token expression">name<span class="token punctuation">.</span>length</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
</code></pre>
     </li>
    </ul>
    <h3>
     <a id="15_107">
     </a>
     1.5.数组
    </h3>
    <h4>
     <a id="_109">
     </a>
     数组创建
    </h4>
    <ul>
     <li>
      <p>
       创建数组使用
      </p>
      <pre><code>arrayOf()
</code></pre>
      <p>
       对于基本数值类型，可以使用专用函数如
      </p>
      <pre><code>intArrayOf()
</code></pre>
      <pre><code class="prism language-kotlin"><span class="token keyword">val</span> intArray <span class="token operator">=</span> <span class="token function">arrayOf</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
<span class="token keyword">val</span> numbers <span class="token operator">=</span> <span class="token function">intArrayOf</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>
</code></pre>
     </li>
    </ul>
    <h4>
     <a id="_128">
     </a>
     数组访问
    </h4>
    <p>
     访问元素：通过索引访问数组元素。
    </p>
    <pre><code class="prism language-kotlin"><span class="token keyword">val</span> arr <span class="token operator">=</span> <span class="token function">arrayOf</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
<span class="token function">println</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 输出 1</span>
</code></pre>
    <p>
     修改元素：通过索引修改数组元素。
    </p>
    <pre><code class="prism language-kotlin">arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">10</span>
<span class="token function">println</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 输出 10</span>
</code></pre>
    <h4>
     <a id="_144">
     </a>
     数组遍历
    </h4>
    <ul>
     <li>
      <strong>
       for
      </strong>
     </li>
    </ul>
    <pre><code class="prism language-kotlin"><span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token keyword">in</span> arr<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">println</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token keyword">in</span> <span class="token number">0</span> until <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token comment">// 0, 1, 2</span>
    <span class="token function">println</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token keyword">in</span> <span class="token number">0</span><span class="token operator">..</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token comment">// 0, 1, 2</span>
    <span class="token function">println</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">for</span><span class="token punctuation">(</span>i <span class="token keyword">in</span> <span class="token number">3</span> downTo <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token comment">// 3, 2, 1</span>
    <span class="token function">println</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
    <ul>
     <li>
      <p>
       <strong>
        forEach
       </strong>
      </p>
      <p>
       使用高阶函数遍历数组。
      </p>
      <pre><code class="prism language-kotlin">arr<span class="token punctuation">.</span><span class="token function">forEach</span> <span class="token punctuation">{<!-- --></span> <span class="token function">println</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span> <span class="token punctuation">}</span>
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        nums.indices
       </strong>
      </p>
     </li>
    </ul>
    <pre><code class="prism language-kotlin"><span class="token keyword">fun</span> <span class="token function">twoSum</span><span class="token punctuation">(</span>nums<span class="token operator">:</span> IntArray<span class="token punctuation">,</span> target<span class="token operator">:</span> Int<span class="token punctuation">)</span><span class="token operator">:</span> IntArray <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token keyword">in</span> nums<span class="token punctuation">.</span>indices<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span>j <span class="token keyword">in</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token operator">..</span><span class="token operator">&lt;</span>nums<span class="token punctuation">.</span>size<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> nums<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">==</span> target<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">return</span> <span class="token function">intArrayOf</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <h4>
     <a id="_189">
     </a>
     常用操作
    </h4>
    <p>
     <strong>
      size
     </strong>
    </p>
    <pre><code class="prism language-kotlin"><span class="token function">println</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span>size<span class="token punctuation">)</span> <span class="token comment">// 输出 3</span>
</code></pre>
    <p>
     <strong>
      contains
     </strong>
     ：检查数组是否包含某个元素。
    </p>
    <pre><code class="prism language-kotlin"><span class="token function">println</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 输出 true</span>
</code></pre>
    <p>
     <strong>
      slice
     </strong>
     ：获取数组的子集。
    </p>
    <pre><code class="prism language-kotlin"><span class="token keyword">val</span> subArr <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">..</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token function">println</span><span class="token punctuation">(</span>subArr<span class="token punctuation">)</span> <span class="token comment">// 输出 [2, 3]</span>
</code></pre>
    <h4>
     <a id="_210">
     </a>
     排序与搜索
    </h4>
    <p>
     <strong>
      sort
     </strong>
     ：对数组进行排序。
    </p>
    <pre><code class="prism language-kotlin"><span class="token keyword">val</span> sortedArr <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">sorted</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">println</span><span class="token punctuation">(</span>sortedArr<span class="token punctuation">)</span> <span class="token comment">// 输出 [1, 2, 3]</span>
</code></pre>
    <p>
     <strong>
      binarySearch
     </strong>
     ：在已排序的数组中进行二分查找。
    </p>
    <pre><code class="prism language-kotlin"><span class="token keyword">val</span> index <span class="token operator">=</span> sortedArr<span class="token punctuation">.</span><span class="token function">binarySearch</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token function">println</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span> <span class="token comment">// 输出 1</span>
</code></pre>
    <h4>
     <a id="_226">
     </a>
     数组与集合的转换
    </h4>
    <p>
     <strong>
      toList
     </strong>
     ：将数组转换为列表。
    </p>
    <pre><code class="prism language-kotlin"><span class="token keyword">val</span> list <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">println</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span> <span class="token comment">// 输出 [1, 2, 3]</span>
</code></pre>
    <p>
     <strong>
      toSet
     </strong>
     ：将数组转换为集合。
    </p>
    <pre><code class="prism language-kotlin"><span class="token keyword">val</span> <span class="token keyword">set</span> <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">toSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">set</span><span class="token punctuation">)</span> <span class="token comment">// 输出 [1, 2, 3]</span>
</code></pre>
    <h3>
     <a id="16__242">
     </a>
     1.6 类型转换
    </h3>
    <ul>
     <li>
      <p>
       <strong>
        显式转换
       </strong>
       <br/>
       Kotlin 不支持隐式类型转换，必须调用转换函数进行转换：
      </p>
      <pre><code class="prism language-kotlin"><span class="token keyword">val</span> intVal <span class="token operator">=</span> <span class="token number">10</span>
<span class="token keyword">val</span> longVal <span class="token operator">=</span> intVal<span class="token punctuation">.</span><span class="token function">toLong</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">// 转换为 Long 类型</span>
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        常用转换函数
       </strong>
       <br/>
       包括
       <code>
        toByte()
       </code>
       、
       <code>
        toShort()
       </code>
       、
       <code>
        toInt()
       </code>
       、
       <code>
        toLong()
       </code>
       、
       <code>
        toFloat()
       </code>
       、
       <code>
        toDouble()
       </code>
       、
       <code>
        toChar()
       </code>
       等。
      </p>
     </li>
    </ul>
    <h3>
     <a id="17__255">
     </a>
     1.7 类型判断与智能转换
    </h3>
    <ul>
     <li>
      <p>
       <strong>
        类型检查
       </strong>
       <br/>
       使用
       <code>
        is
       </code>
       操作符判断对象类型：
      </p>
      <pre><code class="prism language-kotlin"><span class="token keyword">fun</span> <span class="token function">demo</span><span class="token punctuation">(</span>x<span class="token operator">:</span> Any<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token keyword">is</span> String<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token function">println</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token comment">// 编译器自动将 x 当作 String 类型</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        强制类型转换
       </strong>
       <br/>
       使用
       <code>
        as
       </code>
       操作符进行强制转换，但转换失败会抛出异常。为避免异常，可使用安全转换操作符
       <code>
        as?
       </code>
       ，转换失败返回
       <code>
        null
       </code>
       。*
      </p>
     </li>
    </ul>
    <h3>
     <a id="18__271">
     </a>
     1.8 可空类型与空安全
    </h3>
    <ul>
     <li>
      <p>
       <strong>
        可空类型声明
       </strong>
       <br/>
       在类型后加上
       <code>
        ?
       </code>
       表示该变量可以为
       <code>
        null
       </code>
       ：
      </p>
      <pre><code class="prism language-kotlin"><span class="token keyword">var</span> name<span class="token operator">:</span> String<span class="token operator">?</span> <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"Kotlin"</span></span>
name <span class="token operator">=</span> <span class="token keyword">null</span>  <span class="token comment">// 合法</span>
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        安全调用运算符
       </strong>
       <br/>
       使用
       <code>
        ?.
       </code>
       来安全调用方法或属性，避免空指针异常：
      </p>
      <pre><code class="prism language-kotlin"><span class="token keyword">val</span> length <span class="token operator">=</span> name<span class="token operator">?</span><span class="token punctuation">.</span>length  <span class="token comment">// 若 name 为 null，结果为 null</span>
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        非空断言
       </strong>
       <br/>
       使用
       <code>
        !!
       </code>
       表示你确定该值不为 null，但若实际为 null 则会抛出异常：
      </p>
      <pre><code class="prism language-kotlin"><span class="token function">println</span><span class="token punctuation">(</span>name<span class="token operator">!!</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span>
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        Elvis 运算符
       </strong>
       <br/>
       使用
       <code>
        ?:
       </code>
       提供默认值：
      </p>
      <pre><code class="prism language-kotlin"><span class="token keyword">val</span> len <span class="token operator">=</span> name<span class="token operator">?</span><span class="token punctuation">.</span>length <span class="token operator">?:</span> <span class="token number">0</span>  <span class="token comment">// 若 name 为 null，则 len 为 0</span>
</code></pre>
     </li>
    </ul>
    <h3>
     <a id="19__302">
     </a>
     1.9 特殊类型
    </h3>
    <ul>
     <li>
      <strong>
       Any 类型
      </strong>
      <br/>
      Kotlin 中所有非空类型的基类，相当于 Java 的 Object 类型。
     </li>
     <li>
      <strong>
       Unit 类型
      </strong>
      <br/>
      表示函数没有有意义的返回值，类似 Java 中的 void，但它是一个真正的类型，其唯一值为
      <code>
       Unit
      </code>
      。
     </li>
     <li>
      <strong>
       Nothing 类型
      </strong>
      <br/>
      表示永远不会返回结果的类型，常用于函数总是抛出异常的情况。
     </li>
    </ul>
    <h2>
     <a id="_313">
     </a>
     二、函数
    </h2>
    <h3>
     <a id="21__315">
     </a>
     2.1 基本函数定义
    </h3>
    <ul>
     <li>
      <p>
       定义方式
      </p>
      <p>
       定义函数，格式如下：
      </p>
      <pre><code class="prism language-kotlin"><span class="token keyword">fun</span> 函数名<span class="token punctuation">(</span>参数<span class="token number">1</span><span class="token operator">:</span> 类型<span class="token punctuation">,</span> 参数<span class="token number">2</span><span class="token operator">:</span> 类型<span class="token punctuation">,</span> …<span class="token punctuation">)</span><span class="token operator">:</span> 返回类型 <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 函数体</span>
    <span class="token keyword">return</span> 返回值
<span class="token punctuation">}</span>
</code></pre>
      <p>
       如果函数体只有一行表达式，可以省略大括号、return 以及返回类型（编译器可自动推断）：
      </p>
      <pre><code class="prism language-kotlin"><span class="token keyword">fun</span> <span class="token function">add</span><span class="token punctuation">(</span>a<span class="token operator">:</span> Int<span class="token punctuation">,</span> b<span class="token operator">:</span> Int<span class="token punctuation">)</span> <span class="token operator">=</span> a <span class="token operator">+</span> b
</code></pre>
     </li>
    </ul>
    <h3>
     <a id="22__334">
     </a>
     2.2 参数相关
    </h3>
    <h4>
     <a id="_336">
     </a>
     默认参数与具名参数
    </h4>
    <ul>
     <li>
      <p>
       默认参数
      </p>
      <p>
       Kotlin 允许为函数参数
       <u>
        设定默认值
       </u>
       ，从而在调用时可以省略对应的参数：
      </p>
      <pre><code class="prism language-kotlin"><span class="token keyword">fun</span> <span class="token function">greet</span><span class="token punctuation">(</span>name<span class="token operator">:</span> String <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"Kotlin"</span></span><span class="token punctuation">)</span><span class="token operator">:</span> String <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token string-literal singleline"><span class="token string">"Hello, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">name</span></span><span class="token string">!"</span></span>
<span class="token punctuation">}</span>
<span class="token comment">// 调用</span>
<span class="token function">println</span><span class="token punctuation">(</span><span class="token function">greet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token comment">// 输出 "Hello, Kotlin!"</span>
<span class="token function">println</span><span class="token punctuation">(</span><span class="token function">greet</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"张三"</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 使用具名参数</span>
</code></pre>
     </li>
    </ul>
    <ul>
     <li>
      <p>
       具名参数
      </p>
      <pre><code class="prism language-kotlin"><span class="token keyword">fun</span> <span class="token function">greet</span><span class="token punctuation">(</span>name<span class="token operator">:</span> String<span class="token punctuation">,</span> age<span class="token operator">:</span> Int<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">name</span></span><span class="token string"> is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">age</span></span><span class="token string"> years old."</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 调用</span>
<span class="token function">greet</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"Alice"</span></span><span class="token punctuation">,</span> age <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">)</span> <span class="token comment">// 常规顺序</span>
<span class="token function">greet</span><span class="token punctuation">(</span>age <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">,</span> name <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"Alice"</span></span><span class="token punctuation">)</span> <span class="token comment">// 打乱顺序</span>
</code></pre>
      <p>
       <strong>
        所有位置参数必须位于第一个具名参数之前
       </strong>
      </p>
      <pre><code class="prism language-kotlin"><span class="token keyword">fun</span> <span class="token function">example</span><span class="token punctuation">(</span>a<span class="token operator">:</span> Int<span class="token punctuation">,</span> b<span class="token operator">:</span> Int<span class="token punctuation">,</span> c<span class="token operator">:</span> Int<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token punctuation">}</span>

<span class="token function">example</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> c <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">,</span> b <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// 合法</span>
<span class="token comment">// example(a = 1, 2, 3)   // 编译错误：位置参数在具名参数后</span>
</code></pre>
     </li>
    </ul>
    <h4>
     <a id="_vararg_374">
     </a>
     可变参数 (vararg)
    </h4>
    <ul>
     <li>
      <p>
       可变参数
      </p>
      <p>
       使用
      </p>
      <pre><code>vararg
</code></pre>
      <p>
       修饰参数，表示传入的参数个数可变，内部作为数组处理：
      </p>
      <pre><code class="prism language-kotlin"><span class="token keyword">fun</span> <span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> <span class="token function">asList</span><span class="token punctuation">(</span><span class="token keyword">vararg</span> items<span class="token operator">:</span> T<span class="token punctuation">)</span><span class="token operator">:</span> List<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">val</span> result <span class="token operator">=</span> ArrayList<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>item <span class="token keyword">in</span> items<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        result<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> result
<span class="token punctuation">}</span>
<span class="token comment">// 调用</span>
<span class="token keyword">val</span> list <span class="token operator">=</span> <span class="token function">asList</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>
</code></pre>
     </li>
    </ul>
    <h3>
     <a id="23__398">
     </a>
     2.3 单表达式函数
    </h3>
    <p>
     当函数只有一行表达式时，可使用单表达式函数写法：
    </p>
    <pre><code class="prism language-kotlin"><span class="token keyword">fun</span> <span class="token function">square</span><span class="token punctuation">(</span>x<span class="token operator">:</span> Int<span class="token punctuation">)</span> <span class="token operator">=</span> x <span class="token operator">*</span> x
</code></pre>
    <p>
     返回值类型可由编译器推断
    </p>
    <h3>
     <a id="24__408">
     </a>
     2.4 局部函数
    </h3>
    <p>
     Kotlin 允许在一个函数内部定义其他函数，这叫做局部函数（nested function），它可以访问外部函数的局部变量：
    </p>
    <pre><code class="prism language-kotlin"><span class="token keyword">fun</span> <span class="token function">performOperation</span><span class="token punctuation">(</span>numbers<span class="token operator">:</span> List<span class="token operator">&lt;</span>Int<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token operator">:</span> Int <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">var</span> sum <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token keyword">fun</span> <span class="token function">add</span><span class="token punctuation">(</span>value<span class="token operator">:</span> Int<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        sum <span class="token operator">+=</span> value
    <span class="token punctuation">}</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>num <span class="token keyword">in</span> numbers<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token function">add</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> sum
<span class="token punctuation">}</span>
</code></pre>
    <h3>
     <a id="25_Lambda__425">
     </a>
     2.5. Lambda 表达式
    </h3>
    <ul>
     <li>
      <p>
       使用大括号包裹参数和函数体，参数与函数体之间用箭头
      </p>
      <pre><code>-&gt;
</code></pre>
      <p>
       分隔：
      </p>
      <pre><code class="prism language-kotlin"><span class="token keyword">val</span> multiply <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> x<span class="token operator">:</span> Int<span class="token punctuation">,</span> y<span class="token operator">:</span> Int <span class="token operator">-&gt;</span> x <span class="token operator">*</span> y <span class="token punctuation">}</span>
<span class="token function">println</span><span class="token punctuation">(</span><span class="token function">multiply</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 输出 12</span>
</code></pre>
     </li>
     <li>
      <p>
       隐式参数 it
      </p>
      <p>
       如果 lambda 只有一个参数，则可以使用隐式参数
      </p>
      <pre><code>it
</code></pre>
      <pre><code class="prism language-kotlin"><span class="token keyword">val</span> printMessage<span class="token operator">:</span> <span class="token punctuation">(</span>String<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> Unit <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token function">println</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span> <span class="token punctuation">}</span>
<span class="token function">printMessage</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"Hello Lambda"</span></span><span class="token punctuation">)</span>
</code></pre>
     </li>
    </ul>
    <h3>
     <a id="26__453">
     </a>
     2.6 匿名函数
    </h3>
    <blockquote>
     <p>
      <strong>
       没有名称的函数
      </strong>
      ，可直接赋值给变量、作为参数传递或从其他函数返回。
     </p>
    </blockquote>
    <ol>
     <li>
      <p>
       即时性：无需预先声明，即用即定义
      </p>
     </li>
     <li>
      <p>
       隐式返回：自动返回函数体最后一行表达式的结果（无需retuen关键字）
      </p>
      <pre><code class="prism language-kotlin"><span class="token keyword">val</span> greeting <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token string-literal singleline"><span class="token string">"Hello, Kotlin!"</span></span> <span class="token punctuation">}</span> <span class="token comment">// 隐式返回字符串</span>
<span class="token function">println</span><span class="token punctuation">(</span><span class="token function">greeting</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 输出：Hello, Kotlin!</span>
</code></pre>
     </li>
    </ol>
    <h4>
     <a id="_466">
     </a>
     参数处理
    </h4>
    <ul>
     <li>
      <p>
       类型声明：匿名函数类型由参数和返回值决定，例如
      </p>
      <pre><code>(String, Int) -&gt; String
</code></pre>
     </li>
     <li>
      <p>
       参数规则
      </p>
      <ul>
       <li>
        <p>
         多参数需明确声明参数名和类型
        </p>
        <pre><code class="prism language-kotlin"><span class="token keyword">val</span> add <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> a<span class="token operator">:</span> Int<span class="token punctuation">,</span> b<span class="token operator">:</span> Int <span class="token operator">-&gt;</span> a <span class="token operator">+</span> b <span class="token punctuation">}</span>
</code></pre>
       </li>
       <li>
        <p>
         单参数可使用
         <code>
          it
         </code>
         简化
        </p>
        <pre><code class="prism language-kotlin"><span class="token keyword">val</span> square<span class="token operator">:</span> <span class="token punctuation">(</span>Int<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> Int <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> it <span class="token operator">*</span> it <span class="token punctuation">}</span>
<span class="token function">println</span><span class="token punctuation">(</span><span class="token function">square</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
       </li>
      </ul>
     </li>
    </ul>
    <h4>
     <a id="_489">
     </a>
     类型推断
    </h4>
    <p>
     若匿名函数赋值给变量时已明确类型，可省略参数类型声明，但需确保编译器能推断出类型
    </p>
    <pre><code class="prism language-kotlin"><span class="token keyword">val</span> multiply <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> a<span class="token operator">:</span> Int<span class="token punctuation">,</span> b<span class="token operator">:</span> Int <span class="token operator">-&gt;</span> a <span class="token operator">*</span> b <span class="token punctuation">}</span> <span class="token comment">// 显式声明参数类型</span>
<span class="token keyword">val</span> multiplyInferred<span class="token operator">:</span> <span class="token punctuation">(</span>Int<span class="token punctuation">,</span> Int<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> Int <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> a<span class="token punctuation">,</span> b <span class="token operator">-&gt;</span> a <span class="token operator">*</span> b <span class="token punctuation">}</span> <span class="token comment">// 类型推断</span>
</code></pre>
    <h4>
     <a id="_498">
     </a>
     显式返回类型
    </h4>
    <p>
     与
     <code>
      Lambda
     </code>
     不同，匿名函数支持
     <strong>
      显式声明返回类型
     </strong>
     ，适用于需要明确返回值的场景
    </p>
    <pre><code class="prism language-kotlin"><span class="token keyword">val</span> divide <span class="token operator">=</span> <span class="token keyword">fun</span><span class="token punctuation">(</span>a<span class="token operator">:</span> Int<span class="token punctuation">,</span> b<span class="token operator">:</span> Int<span class="token punctuation">)</span><span class="token operator">:</span> Double <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>b <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">0.0</span> <span class="token comment">// 显式返回</span>
    <span class="token keyword">return</span> a<span class="token punctuation">.</span><span class="token function">toDouble</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> b
<span class="token punctuation">}</span>
</code></pre>
    <h3>
     <a id="27__509">
     </a>
     2.7 高阶函数
    </h3>
    <p>
     高阶函数是将函数作为参数或返回值的函数，例如：
    </p>
    <pre><code class="prism language-kotlin"><span class="token comment">// 函数作为参数</span>
<span class="token keyword">fun</span> <span class="token function">operate</span><span class="token punctuation">(</span>a<span class="token operator">:</span> Int<span class="token punctuation">,</span> b<span class="token operator">:</span> Int<span class="token punctuation">,</span> op<span class="token operator">:</span> <span class="token punctuation">(</span>Int<span class="token punctuation">,</span> Int<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> Int<span class="token punctuation">)</span><span class="token operator">:</span> Int <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token function">op</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 匿名函数作为最后一个参数，省略了最外层括号</span>
<span class="token keyword">val</span> sum <span class="token operator">=</span> <span class="token function">operate</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> x<span class="token punctuation">,</span> y <span class="token operator">-&gt;</span> x <span class="token operator">+</span> y <span class="token punctuation">}</span>
<span class="token function">println</span><span class="token punctuation">(</span>sum<span class="token punctuation">)</span> <span class="token comment">// 输出 9</span>

</code></pre>
    <pre><code class="prism language-kotlin"><span class="token comment">// 函数作为返回值</span>
<span class="token keyword">fun</span> <span class="token function">makeMultiplier</span><span class="token punctuation">(</span>factor<span class="token operator">:</span> Int<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token punctuation">(</span>Int<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> Int <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span> number <span class="token operator">-&gt;</span> number <span class="token operator">*</span> factor <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// timesThree是返回的函数</span>
<span class="token keyword">val</span> timesThree <span class="token operator">=</span> <span class="token function">makeMultiplier</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
<span class="token comment">// 调用返回的函数</span>
<span class="token function">println</span><span class="token punctuation">(</span><span class="token function">timesThree</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 输出 30</span>
</code></pre>
    <h3>
     <a id="28__538">
     </a>
     2.8 内联函数
    </h3>
    <ul>
     <li>
      <p>
       类似于C语言宏定义的替换
      </p>
      <pre><code>inline
</code></pre>
      <p>
       修饰高阶函数，可以在编译时将函数体内联，从而减少函数调用开销。
      </p>
      <pre><code class="prism language-kotlin"><span class="token keyword">inline</span> <span class="token keyword">fun</span> <span class="token function">runOperation</span><span class="token punctuation">(</span>operation<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> Unit<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">operation</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
     </li>
    </ul>
    <h3>
     <a id="29__554">
     </a>
     2.9 函数类型与函数引用
    </h3>
    <ul>
     <li>
      <p>
       函数类型
      </p>
      <p>
       Kotlin 中函数本身是“一等公民”，其类型写作
      </p>
      <pre><code>(参数类型1, 参数类型2, …) -&gt; 返回类型
</code></pre>
      <pre><code class="prism language-kotlin"><span class="token keyword">val</span> func<span class="token operator">:</span> <span class="token punctuation">(</span>Int<span class="token punctuation">,</span> Int<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> Int <span class="token operator">=</span> <span class="token operator">::</span>add  <span class="token comment">// 使用函数引用引用已有函数</span>
<span class="token function">println</span><span class="token punctuation">(</span><span class="token function">func</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
     </li>
     <li>
      <p>
       函数引用
      </p>
      <pre><code>::
</code></pre>
      <p>
       符号引用函数：
      </p>
      <pre><code class="prism language-kotlin"><span class="token keyword">fun</span> <span class="token function">add</span><span class="token punctuation">(</span>a<span class="token operator">:</span> Int<span class="token punctuation">,</span> b<span class="token operator">:</span> Int<span class="token punctuation">)</span> <span class="token operator">=</span> a <span class="token operator">+</span> b
<span class="token keyword">val</span> addRef <span class="token operator">=</span> <span class="token operator">::</span>add
<span class="token function">println</span><span class="token punctuation">(</span><span class="token function">addRef</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 输出 15</span>
</code></pre>
     </li>
    </ul>
    <h3>
     <a id="210__583">
     </a>
     2.10 闭包
    </h3>
    <blockquote>
     <p>
      闭包是能够读取其他函数内部变量的函数，即使外部函数已执行完毕，闭包仍能访问其作用域中的变量
     </p>
    </blockquote>
    <pre><code class="prism language-java"><span class="token comment">// 匿名函数持有外部函数 doRepeat 的 count 变量，形成闭包</span>
fun <span class="token function">doRepeat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Unit</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">var</span> count <span class="token operator">=</span> <span class="token number">1</span>
    <span class="token keyword">return</span> <span class="token function">fun</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token function">println</span><span class="token punctuation">(</span>count<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     <strong>
      核心特性
     </strong>
     ：
    </p>
    <ol>
     <li>
      <p>
       <strong>
        状态持久化
       </strong>
       <br/>
       闭包会延长外部函数变量的生命周期，使其常驻内存。例如，多次调用
       <code>
        doRepeat()
       </code>
       生成的闭包会独立维护各自的
       <code>
        count
       </code>
       变量
      </p>
      <pre><code class="prism language-kotlin"><span class="token keyword">val</span> doRepeat1 <span class="token operator">=</span> <span class="token function">doRepeat</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">// count 初始化为1</span>
<span class="token function">doRepeat1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">// 输出1 → count变为2</span>
<span class="token function">doRepeat1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">// 输出2 → count变为3</span>
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        独立性
       </strong>
       <br/>
       不同闭包实例持有独立的状态。例如，
       <code>
        doRepeat1
       </code>
       和
       <code>
        doRepeat2
       </code>
       的
       <code>
        count
       </code>
       互不影响
      </p>
      <pre><code class="prism language-kotlin"><span class="token keyword">val</span> doRepeat1 <span class="token operator">=</span> <span class="token function">doRepeat</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">val</span> doRepeat2 <span class="token operator">=</span> <span class="token function">doRepeat</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">doRepeat1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">// 输出1</span>
<span class="token function">doRepeat2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">// 输出1（独立计数）</span>
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        简化代码与避免全局污染
       </strong>
       <br/>
       闭包可替代全局变量，例如实现斐波那契数列的状态缓存
      </p>
      <pre><code class="prism language-kotlin"><span class="token keyword">fun</span> <span class="token function">fib</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> Long <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">var</span> prev <span class="token operator">=</span> <span class="token number">0L</span>
    <span class="token keyword">var</span> current <span class="token operator">=</span> <span class="token number">1L</span>
    <span class="token keyword">return</span> <span class="token keyword">fun</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Long <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">val</span> result <span class="token operator">=</span> current
        current <span class="token operator">+=</span> prev
        prev <span class="token operator">=</span> result
        <span class="token keyword">return</span> result
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
     </li>
    </ol>
    <h3>
     <a id="211__632">
     </a>
     2.11 反引号中的函数名
    </h3>
    <p>
     Kotlin可以使用空格和特殊字符对函数命名，不过函数名要用一对反引号括起来。
    </p>
    <ol>
     <li>
      当 Java 方法名与 Kotlin 的保留字（如
      <code>
       is
      </code>
      、
      <code>
       in
      </code>
      、
      <code>
       object
      </code>
      ）同名时，Kotlin 需用反引号转义调用。
     </li>
    </ol>
    <blockquote>
     <p>
      例如，Java 方法
      <code>
       is()
      </code>
      在 Kotlin 中需写为
     </p>
     <pre><code class="prism language-foo.is(bar)">foo.`is`(bar)
</code></pre>
    </blockquote>
    <ol start="2">
     <li>
      可用于测试用例等场景，例如：
     </li>
    </ol>
    <pre><code class="prism language-kotlin"><span class="token keyword">fun</span> <span class="token function">`test user login with invalid password`</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token operator">..</span><span class="token punctuation">.</span> <span class="token punctuation">}</span>
</code></pre>
    <h2>
     <a id="null_650">
     </a>
     三、null安全与异常
    </h2>
    <h3>
     <a id="31_null_652">
     </a>
     3.1 null安全机制
    </h3>
    <h4>
     <a id="_654">
     </a>
     非空类型与可空类型
    </h4>
    <ul>
     <li>
      <p>
       <strong>
        非空类型
       </strong>
       ：在Kotlin中，默认变量不允许为null
      </p>
     </li>
     <li>
      <p>
       声明时必须初始化且不能赋值为
       <code>
        null
       </code>
       ，编译器会强制确保变量始终持有有效值
      </p>
      <pre><code class="prism language-kotlin"><span class="token keyword">val</span> name<span class="token operator">:</span> String <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"Kotlin"</span></span>
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        可空类型
       </strong>
       ：如果允许变量为null，必须在类型后加问号（?）
      </p>
     </li>
     <li>
      <p>
       直接调用其方法或属性会触发编译错误，需通过安全操作符处理
      </p>
      <pre><code class="prism language-kotlin"><span class="token keyword">val</span> name<span class="token operator">:</span> String<span class="token operator">?</span> <span class="token operator">=</span> <span class="token keyword">null</span>
</code></pre>
     </li>
    </ul>
    <h4>
     <a id="__let_672">
     </a>
     ?. ?: 操作符和let
    </h4>
    <ul>
     <li>
      <p>
       安全调用操作符
       <code>
        ?.
       </code>
      </p>
      <p>
       当对象可能为null时，使用
      </p>
      <pre><code>?.
</code></pre>
      <p>
       访问其属性或方法可以避免NullPointerException：
      </p>
      <pre><code class="prism language-kotlin"><span class="token keyword">val</span> length <span class="token operator">=</span> name<span class="token operator">?</span><span class="token punctuation">.</span>length  <span class="token comment">// 如果name为null，length将为null</span>
</code></pre>
     </li>
     <li>
      <p>
       空合并操作符
       <code>
        ?:
       </code>
      </p>
      <p>
       用于在对象为null时提供默认值：
      </p>
      <pre><code class="prism language-kotlin"><span class="token keyword">val</span> length <span class="token operator">=</span> name<span class="token operator">?</span><span class="token punctuation">.</span>length <span class="token operator">?:</span> <span class="token number">0</span>  <span class="token comment">// 如果name为null，则返回0</span>
</code></pre>
     </li>
    </ul>
    <ul>
     <li>
      <p>
       let函数
      </p>
      <ul>
       <li>
        在
        <code>
         let
        </code>
        的函数体内，调用者对象使用
        <code>
         it
        </code>
        作为默认名称
       </li>
       <li>
        <code>
         let
        </code>
        的返回值是函数块的最后一行或指定的返回值
       </li>
      </ul>
      <pre><code class="prism language-java">val name<span class="token operator">:</span> <span class="token class-name">String</span><span class="token operator">?</span> <span class="token operator">=</span> <span class="token string">"Kotlin"</span>
name<span class="token operator">?</span><span class="token punctuation">.</span>let <span class="token punctuation">{<!-- --></span>
    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Name is $it"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 如果 name 为 null，则不会执行 let 块内的代码</span>
</code></pre>
      <pre><code class="prism language-kotlin"><span class="token keyword">val</span> length <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"yuxuan"</span></span><span class="token punctuation">.</span><span class="token function">let</span> <span class="token punctuation">{<!-- --></span>
    it<span class="token punctuation">.</span>length
<span class="token punctuation">}</span>
<span class="token function">println</span><span class="token punctuation">(</span>length<span class="token punctuation">)</span>
</code></pre>
     </li>
    </ul>
    <h3>
     <a id="32__716">
     </a>
     3.2 异常处理机制
    </h3>
    <h4>
     <a id="trycatch_718">
     </a>
     try-catch
    </h4>
    <p>
     <strong>
      try-catch-finally结构
     </strong>
    </p>
    <ul>
     <li>
      <p>
       与Java类似
      </p>
      <pre><code>try-catch-finally
</code></pre>
      <pre><code class="prism language-kotlin"><span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 可能抛出异常的代码</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token operator">:</span> Exception<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 异常处理</span>
<span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 无论是否异常，都会执行的代码</span>
<span class="token punctuation">}</span>
</code></pre>
     </li>
    </ul>
    <pre><code class="prism language-java"><span class="token keyword">var</span> num<span class="token operator">:</span> <span class="token class-name">Int</span><span class="token operator">?</span> <span class="token operator">=</span> <span class="token keyword">null</span>    <span class="token comment">// 声明一个可为空的Int类型变量</span>
<span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 使用非空断言运算符(!!)强制解包可能为null的变量</span>
    <span class="token function">println</span><span class="token punctuation">(</span>num<span class="token operator">!</span><span class="token operator">!</span><span class="token punctuation">.</span><span class="token function">plus</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">)</span> 
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token operator">:</span> <span class="token class-name">Exception</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">println</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
    <h4>
     <a id="_748">
     </a>
     !!
    </h4>
    <ul>
     <li>
      <p>
       非空断言操作符
       <code>
        !!
       </code>
      </p>
      <p>
       强制将一个可空类型转为非空类型，如果对象为null，会抛出NullPointerException：
      </p>
      <pre><code class="prism language-kotlin"><span class="token keyword">val</span> length <span class="token operator">=</span> name<span class="token operator">!!</span><span class="token punctuation">.</span>length  <span class="token comment">// 若name为null，则会抛出异常</span>
</code></pre>
     </li>
    </ul>
    <h4>
     <a id="_758">
     </a>
     先决条件函数
    </h4>
    <table>
     <thead>
      <tr>
       <th>
        函数
       </th>
       <th>
        描述
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        checkNotNull
       </td>
       <td>
        如果参数为null，则抛出IllegalStateException异常，否则返回非null值
       </td>
      </tr>
      <tr>
       <td>
        require
       </td>
       <td>
        如果参数为false，则抛出IllegalArgumentException异常
       </td>
      </tr>
      <tr>
       <td>
        requireNotNull
       </td>
       <td>
        如果参数为null，则抛出IllegalStateException异常，否则返回非null值
       </td>
      </tr>
      <tr>
       <td>
        error
       </td>
       <td>
        如果参数为null，则抛出IllegalStateException异常并输出错误信息，否则返回非null值
       </td>
      </tr>
      <tr>
       <td>
        assert
       </td>
       <td>
        如果参数为false，则抛出AssertionError异常，并打上断言编译器标记
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     <strong>
      require()函数
     </strong>
    </p>
    <ul>
     <li>
      <p>
       <strong>
        作用
       </strong>
       ：用于检查函数参数的先决条件。如果条件不满足，会抛出
       <code>
        IllegalArgumentException
       </code>
       。
      </p>
     </li>
     <li>
      <p>
       示例
      </p>
      <pre><code class="prism language-kotlin"><span class="token keyword">fun</span> <span class="token function">setAge</span><span class="token punctuation">(</span>age<span class="token operator">:</span> Int<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">require</span><span class="token punctuation">(</span>age <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token string-literal singleline"><span class="token string">"年龄必须为正数"</span></span> <span class="token punctuation">}</span>
    <span class="token comment">// 其他逻辑</span>
<span class="token punctuation">}</span>
</code></pre>
     </li>
    </ul>
    <p>
     <strong>
      assert()函数
     </strong>
    </p>
    <ul>
     <li>
      <p>
       <strong>
        作用
       </strong>
       ：用于调试时的断言检查。如果条件为false，则抛出
       <code>
        AssertionError
       </code>
       。
      </p>
     </li>
     <li>
      <p>
       注意：在生产环境中，断言通常会被禁用，仅在开发或测试阶段使用。
      </p>
      <pre><code class="prism language-kotlin"><span class="token keyword">fun</span> <span class="token function">test</span><span class="token punctuation">(</span>value<span class="token operator">:</span> Int<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">assert</span><span class="token punctuation">(</span>value <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token string-literal singleline"><span class="token string">"值必须大于0"</span></span> <span class="token punctuation">}</span>
    <span class="token comment">// 测试代码</span>
<span class="token punctuation">}</span>
</code></pre>
     </li>
    </ul>
    <p>
     <strong>
      error()函数
     </strong>
    </p>
    <ul>
     <li>
      <p>
       作用：用于直接抛出异常，常用于未实现的代码块或错误状态。
      </p>
      <pre><code class="prism language-kotlin"><span class="token keyword">fun</span> <span class="token function">notImplemented</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">error</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"尚未实现该功能"</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
     </li>
    </ul>
    <h2>
     <a id="_804">
     </a>
     四、字符串
    </h2>
    <h3>
     <a id="41__806">
     </a>
     4.1 定义
    </h3>
    <ul>
     <li>
      <strong>
       普通字符串
      </strong>
      ：使用双引号括起来，可以包含转义字符，如换行符
      <code>
       \n
      </code>
      。
     </li>
    </ul>
    <pre><code class="prism language-kotlin">  <span class="token keyword">val</span> str1 <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"Hello\nWorld"</span></span>
  <span class="token function">println</span><span class="token punctuation">(</span>str1<span class="token punctuation">)</span>
  <span class="token comment">// Hello</span>
  <span class="token comment">// World</span>
</code></pre>
    <ul>
     <li>
      <strong>
       原始字符串
      </strong>
      ：使用三重引号
      <code>
       """
      </code>
      括起来，支持多行且不会转义特殊字符。
     </li>
    </ul>
    <pre><code class="prism language-kotlin">  <span class="token keyword">val</span> str2 <span class="token operator">=</span> <span class="token string-literal multiline"><span class="token string">"""
      第1行
      第2行
  """</span></span><span class="token punctuation">.</span><span class="token function">trimIndent</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token function">println</span><span class="token punctuation">(</span>str2<span class="token punctuation">)</span>
  <span class="token comment">// 输出：</span>
  <span class="token comment">// 第1行</span>
  <span class="token comment">// 第2行</span>
</code></pre>
    <h3>
     <a id="42__830">
     </a>
     4.2 字符串模板
    </h3>
    <p>
     Kotlin 提供字符串模板功能，可以在字符串中嵌入
     <strong>
      变量
     </strong>
     或
     <strong>
      表达式
     </strong>
     。
    </p>
    <pre><code class="prism language-kotlin"><span class="token keyword">val</span> name <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"Kotlin"</span></span>
<span class="token keyword">val</span> age <span class="token operator">=</span> <span class="token number">5</span>
<span class="token function">println</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"语言：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">name</span></span><span class="token string">，年龄：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">age</span></span><span class="token string"> 岁"</span></span><span class="token punctuation">)</span>
<span class="token function">println</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"2 + 3 = </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span><span class="token expression"><span class="token number">2</span> <span class="token operator">+</span> <span class="token number">3</span></span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
<span class="token comment">// 输出：</span>
<span class="token comment">// 语言：Kotlin，年龄：5 岁</span>
<span class="token comment">// 2 + 3 = 5</span>
</code></pre>
    <h3>
     <a id="43__844">
     </a>
     4.3 常用操作
    </h3>
    <ul>
     <li>
      <strong>
       查找
      </strong>
      ：
      <code>
       indexOf()
      </code>
      返回子字符串的起始位置，未找到则返回 -1。
     </li>
    </ul>
    <pre><code class="prism language-kotlin">  <span class="token keyword">val</span> text <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"Kotlin 编程"</span></span>
  <span class="token keyword">val</span> index <span class="token operator">=</span> text<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"编程"</span></span><span class="token punctuation">)</span>
  <span class="token function">println</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span> <span class="token comment">// 输出：7</span>
</code></pre>
    <ul>
     <li>
      <strong>
       替换
      </strong>
      ：
      <code>
       replace()
      </code>
      用于替换指定的子字符串。
     </li>
    </ul>
    <pre><code class="prism language-kotlin"><span class="token comment">// fun replace(oldValue: String, newValue: String, ignoreCase: Boolean = false)</span>
<span class="token keyword">val</span> text <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"Hello Kotlin"</span></span>
<span class="token keyword">val</span> newText <span class="token operator">=</span> text<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"Kotlin"</span></span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"World"</span></span><span class="token punctuation">)</span>
<span class="token function">println</span><span class="token punctuation">(</span>newText<span class="token punctuation">)</span> <span class="token comment">// 输出：Hello World</span>

<span class="token comment">// fun replace(regex: Regex, replacement: String): String</span>
<span class="token keyword">val</span> text <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"请联系我：123-456-7890 或 987-654-3210。"</span></span>
<span class="token keyword">val</span> regex <span class="token operator">=</span> <span class="token function">Regex</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"\\d{3}-\\d{3}-\\d{4}"</span></span><span class="token punctuation">)</span>
<span class="token keyword">val</span> result <span class="token operator">=</span> text<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>regex<span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"[号码已隐藏]"</span></span><span class="token punctuation">)</span>
<span class="token function">println</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
<span class="token comment">// 请联系我：[号码已隐藏] 或 [号码已隐藏]。</span>
</code></pre>
    <ul>
     <li>
      <strong>
       分割
      </strong>
      ：
      <code>
       split()
      </code>
      根据指定分隔符将字符串分割为List集合
     </li>
    </ul>
    <pre><code class="prism language-kotlin"><span class="token keyword">val</span> text <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"apple,banana,cherry"</span></span>
<span class="token keyword">val</span> fruits <span class="token operator">=</span> text<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">","</span></span><span class="token punctuation">)</span>
<span class="token function">println</span><span class="token punctuation">(</span>fruits<span class="token punctuation">)</span> <span class="token comment">// 输出：[apple, banana, cherry]</span>

<span class="token comment">// 解构语法特性</span>
<span class="token keyword">val</span> text <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"apple,banana,cherry"</span></span>
<span class="token keyword">val</span> <span class="token punctuation">(</span>fruit1<span class="token punctuation">,</span> fruit2<span class="token punctuation">,</span> fruit3<span class="token punctuation">)</span> <span class="token operator">=</span> text<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">","</span></span><span class="token punctuation">)</span>
<span class="token function">println</span><span class="token punctuation">(</span>fruit1<span class="token punctuation">)</span> <span class="token comment">// 输出：apple</span>
<span class="token function">println</span><span class="token punctuation">(</span>fruit2<span class="token punctuation">)</span> <span class="token comment">// 输出：banana</span>
<span class="token function">println</span><span class="token punctuation">(</span>fruit3<span class="token punctuation">)</span> <span class="token comment">// 输出：cherry</span>

</code></pre>
    <ul>
     <li>
      <strong>
       截取
      </strong>
      ：
      <code>
       substring()
      </code>
      截取指定范围内的子字符串。
     </li>
    </ul>
    <pre><code class="prism language-kotlin"><span class="token keyword">val</span> text <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"Kotlin 编程"</span></span>
<span class="token keyword">val</span> subText <span class="token operator">=</span> text<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span>
<span class="token function">println</span><span class="token punctuation">(</span>subText<span class="token punctuation">)</span> <span class="token comment">// 输出：Kotlin</span>

<span class="token keyword">val</span> text <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"apple,banana,cherry"</span></span>
<span class="token keyword">val</span> subText <span class="token operator">=</span> text<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token operator">..</span><span class="token number">11</span><span class="token punctuation">)</span>
<span class="token function">println</span><span class="token punctuation">(</span>subText<span class="token punctuation">)</span> <span class="token comment">// 输出：banana</span>
</code></pre>
    <ul>
     <li>
      <strong>
       遍历
      </strong>
      ：可以使用索引或直接遍历字符。
     </li>
    </ul>
    <pre><code class="prism language-kotlin"><span class="token keyword">val</span> text <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"Kotlin"</span></span>
<span class="token keyword">for</span> <span class="token punctuation">(</span>char <span class="token keyword">in</span> text<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">println</span><span class="token punctuation">(</span>char<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

text<span class="token punctuation">.</span><span class="token function">forEach</span> <span class="token punctuation">{<!-- --></span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">it</span></span><span class="token string"> "</span></span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
</code></pre>
    <h3>
     <a id="44__909">
     </a>
     4.4 空安全
    </h3>
    <p>
     提供多种方法来判断字符串的空值或空白状态：
    </p>
    <ul>
     <li>
      <strong>
       isNullOrEmpty()
      </strong>
      ：为空指针或长度为 0 时返回
      <code>
       true
      </code>
      。
     </li>
     <li>
      <strong>
       isNullOrBlank()
      </strong>
      ：为空指针、长度为 0 或全为空格时返回
      <code>
       true
      </code>
      。
     </li>
     <li>
      <strong>
       isEmpty()
      </strong>
      ：长度为 0 时返回
      <code>
       true
      </code>
      。
     </li>
     <li>
      <strong>
       isNotEmpty()
      </strong>
      ：长度大于 0 时返回
      <code>
       true
      </code>
      。
     </li>
     <li>
      <strong>
       isBlank()
      </strong>
      ：长度为 0 或全为空格时返回
      <code>
       true
      </code>
      。
     </li>
     <li>
      <strong>
       isNotBlank()
      </strong>
      ：长度大于 0 且不全为空格时返回
      <code>
       true
      </code>
      。
     </li>
    </ul>
    <pre><code class="prism language-kotlin"><span class="token keyword">val</span> str<span class="token operator">:</span> String<span class="token operator">?</span> <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"  "</span></span>
<span class="token function">println</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">isNullOrEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 输出：false</span>
<span class="token function">println</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">isNullOrBlank</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 输出：true</span>
</code></pre>
    <h3>
     <a id="45__926">
     </a>
     4.5 字符串比较
    </h3>
    <blockquote>
     <p>
      <code>
       ==
      </code>
      检查两个字符串中的字符是否匹配
     </p>
     <p>
      <code>
       ===
      </code>
      检查两个变量是否指向内存堆上同一对象
     </p>
    </blockquote>
    <p>
     <strong>
      1. 使用
      <code>
       ==
      </code>
      运算符进行内容比较
     </strong>
    </p>
    <p>
     在Kotlin中，
     <code>
      ==
     </code>
     运算符用于比较两个对象的内容是否相等。当用于字符串时，它会比较字符串的字符序列是否相同。需要注意的是，
     <code>
      ==
     </code>
     在Kotlin中被重载，实际调用的是
     <code>
      equals()
     </code>
     方法。
    </p>
    <p>
     示例：
    </p>
    <pre><code class="prism language-kotlin"><span class="token keyword">val</span> str1 <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"Kotlin"</span></span>
<span class="token keyword">val</span> str2 <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"Kotlin"</span></span>
<span class="token keyword">val</span> str3 <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"kotlin"</span></span>

<span class="token function">println</span><span class="token punctuation">(</span>str1 <span class="token operator">==</span> str2<span class="token punctuation">)</span> <span class="token comment">// 输出：true</span>
<span class="token function">println</span><span class="token punctuation">(</span>str1 <span class="token operator">==</span> str3<span class="token punctuation">)</span> <span class="token comment">// 输出：false</span>
</code></pre>
    <p>
     <strong>
      2. 使用
      <code>
       ===
      </code>
      运算符进行引用比较
     </strong>
    </p>
    <p>
     <code>
      ===
     </code>
     运算符用于比较两个变量是否引用同一个对象实例，即比较它们的引用是否相同。这与
     <code>
      ==
     </code>
     运算符的内容比较不同
    </p>
    <pre><code>val str1 = "Kotlin"
val str2 = "Kotlin"
val str3 = String("Kotlin".toCharArray())

println(str1 === str2) // 输出：true，因为字符串常量池的原因
println(str1 === str3) // 输出：false，因为str3是通过构造函数创建的新的String对象
</code></pre>
    <p>
     <strong>
      3. 使用
      <code>
       equals()
      </code>
      方法进行比较
     </strong>
    </p>
    <p>
     <code>
      equals()
     </code>
     方法用于比较两个对象的内容是否相等。与
     <code>
      ==
     </code>
     运算符类似，但
     <code>
      equals()
     </code>
     方法提供了更多的控制，例如可以指定是否忽略大小写。
    </p>
    <pre><code class="prism language-kotlin"><span class="token keyword">val</span> str1 <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"Kotlin"</span></span>
<span class="token keyword">val</span> str2 <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"kotlin"</span></span>

<span class="token function">println</span><span class="token punctuation">(</span>str1<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>str2<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 输出：false，默认区分大小写</span>
<span class="token function">println</span><span class="token punctuation">(</span>str1<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>str2<span class="token punctuation">,</span> ignoreCase <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 输出：true，忽略大小写</span>
</code></pre>
    <h2>
     <a id="_972">
     </a>
     五、标准库函数
    </h2>
    <h3>
     <a id="51__974">
     </a>
     5.1 作用域函数
    </h3>
    <blockquote>
     <p>
      可以让你在一个代码块内访问某个对象，从而减少重复引用对象名称，并能链式调用。
     </p>
    </blockquote>
    <table>
     <thead>
      <tr>
       <th>
        函数
       </th>
       <th>
        对象引用方式
       </th>
       <th>
        返回值
       </th>
       <th>
        是否扩展函数
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        let
       </td>
       <td>
        it
       </td>
       <td>
        lambda 表达式的结果
       </td>
       <td>
        是
       </td>
      </tr>
      <tr>
       <td>
        run
       </td>
       <td>
        this
       </td>
       <td>
        lambda 表达式的结果
       </td>
       <td>
        是
       </td>
      </tr>
      <tr>
       <td>
        with
       </td>
       <td>
        this
       </td>
       <td>
        lambda 表达式的结果
       </td>
       <td>
        否（作为参数传入）
       </td>
      </tr>
      <tr>
       <td>
        apply
       </td>
       <td>
        this
       </td>
       <td>
        调用对象本身
       </td>
       <td>
        是
       </td>
      </tr>
      <tr>
       <td>
        also
       </td>
       <td>
        it
       </td>
       <td>
        调用对象本身
       </td>
       <td>
        是
       </td>
      </tr>
     </tbody>
    </table>
    <h4>
     <a id="let_986">
     </a>
     let
    </h4>
    <ul>
     <li>
      <p>
       <strong>
        特点
       </strong>
       ：
      </p>
      <ul>
       <li>
        将调用对象作为参数传入 lambda（默认名称为 it）。
       </li>
       <li>
        返回 lambda 表达式最后一行的值。
       </li>
       <li>
        常用于空值检查（结合 ?. 使用）或局部变量转换。
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        示例
       </strong>
       ：
      </p>
      <pre><code class="prism language-kotlin"><span class="token keyword">val</span> str<span class="token operator">:</span> String<span class="token operator">?</span> <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"Hello"</span></span>
str<span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">let</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"字符串不为空：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">it</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
    <span class="token comment">// 返回最后一行表达式的结果</span>
    it<span class="token punctuation">.</span>length
<span class="token punctuation">}</span>
</code></pre>
     </li>
    </ul>
    <h4>
     <a id="run_1005">
     </a>
     run
    </h4>
    <ul>
     <li>
      <p>
       <strong>
        特点
       </strong>
       ：
      </p>
      <ul>
       <li>
        有两种用法：
        <ol>
         <li>
          直接调用 run { … }，不需要对象，此时 lambda 无接收者；
         </li>
         <li>
          作为扩展函数调用，即对象.run { … }，此时 lambda 的接收者为该对象（可直接使用 this）。
         </li>
        </ol>
       </li>
       <li>
        返回 lambda 最后一行的值。
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        示例
       </strong>
       ：
      </p>
      <pre><code class="prism language-kotlin"><span class="token comment">// 直接调用</span>
<span class="token keyword">val</span> result <span class="token operator">=</span> run <span class="token punctuation">{<!-- --></span>
    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"直接调用 run"</span></span><span class="token punctuation">)</span>
    <span class="token number">100</span>
<span class="token punctuation">}</span>
<span class="token function">println</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
<span class="token comment">// 直接调用 run</span>
<span class="token comment">// 100</span>

<span class="token comment">// 对象调用 run</span>
<span class="token keyword">val</span> person <span class="token operator">=</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"Alice"</span></span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span>
<span class="token keyword">val</span> info <span class="token operator">=</span> person<span class="token punctuation">.</span><span class="token function">run</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string-literal singleline"><span class="token string">"姓名：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">name</span></span><span class="token string">, 年龄：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">age</span></span><span class="token string">"</span></span>
<span class="token punctuation">}</span>
<span class="token function">println</span><span class="token punctuation">(</span>info<span class="token punctuation">)</span>
</code></pre>
     </li>
    </ul>
    <h4>
     <a id="with_1034">
     </a>
     with
    </h4>
    <ul>
     <li>
      <p>
       <strong>
        特点
       </strong>
       ：
      </p>
      <ul>
       <li>
        不是扩展函数，而是一个普通函数，需要将对象作为第一个参数传入。
       </li>
       <li>
        在 lambda 内部可以直接使用 this 调用对象方法。
       </li>
       <li>
        返回 lambda 表达式最后一行的结果。
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        示例
       </strong>
       ：
      </p>
      <pre><code class="prism language-kotlin"><span class="token keyword">val</span> sb <span class="token operator">=</span> <span class="token function">StringBuilder</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"Kotlin:"</span></span><span class="token punctuation">)</span>
<span class="token keyword">val</span> resultString <span class="token operator">=</span> <span class="token function">with</span><span class="token punctuation">(</span>sb<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">append</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"标准库函数笔记"</span></span><span class="token punctuation">)</span>
    <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">println</span><span class="token punctuation">(</span>resultString<span class="token punctuation">)</span>
</code></pre>
     </li>
    </ul>
    <h4>
     <a id="apply_1053">
     </a>
     apply
    </h4>
    <ul>
     <li>
      <p>
       <strong>
        特点
       </strong>
       ：
      </p>
      <ul>
       <li>
        是扩展函数，其 lambda 内部的接收者为调用对象（this 可直接访问对象成员）。
       </li>
       <li>
        返回调用对象本身，因此常用于对象的初始化配置。
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        示例
       </strong>
       ：
      </p>
      <pre><code class="prism language-kotlin"><span class="token keyword">val</span> person <span class="token operator">=</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"Bob"</span></span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">apply</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 在这里配置 person 对象</span>
    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"初始化 person 对象：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">name</span></span><span class="token string">, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">age</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">val</span> file<span class="token operator">:</span> File <span class="token operator">=</span> <span class="token function">File</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"111"</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">apply</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">setReadable</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
    <span class="token function">setWritable</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
    <span class="token function">setExecutable</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
     </li>
    </ul>
    <h4>
     <a id="also_1075">
     </a>
     also
    </h4>
    <ul>
     <li>
      <p>
       <strong>
        特点
       </strong>
       ：
      </p>
      <ul>
       <li>
        与 apply 类似，都是扩展函数且返回调用对象本身；
       </li>
       <li>
        不同之处在于 lambda 中的对象通过 it 传入，而不是 this。
       </li>
       <li>
        常用于在链式调用中做额外操作（例如日志记录、调试）。
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        示例
       </strong>
       ：
      </p>
      <pre><code class="prism language-kotlin"><span class="token keyword">val</span> numbers <span class="token operator">=</span> <span class="token function">mutableListOf</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
numbers<span class="token punctuation">.</span><span class="token function">also</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"操作前的列表：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">it</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>
<span class="token function">println</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"操作后的列表：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">numbers</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
</code></pre>
     </li>
    </ul>
    <h3>
     <a id="52__1093">
     </a>
     5.2 其他常用标准库函数
    </h3>
    <h4>
     <a id="takeIf__takeUnless_1095">
     </a>
     takeIf 与 takeUnless
    </h4>
    <ul>
     <li>
      <p>
       <strong>
        takeIf
       </strong>
       ：
      </p>
      <ul>
       <li>
        如果给定的谓词为 true，则返回对象本身，否则返回 null。
       </li>
       <li>
        常用于将条件判断嵌入调用链中。
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        示例
       </strong>
       ：
      </p>
      <pre><code class="prism language-kotlin"><span class="token keyword">val</span> number <span class="token operator">=</span> <span class="token number">42</span>
<span class="token keyword">val</span> evenNumber <span class="token operator">=</span> number<span class="token punctuation">.</span><span class="token function">takeIf</span> <span class="token punctuation">{<!-- --></span> it <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">}</span>
<span class="token function">println</span><span class="token punctuation">(</span>evenNumber<span class="token punctuation">)</span>  <span class="token comment">// 输出 42</span>

<span class="token keyword">val</span> oddNumber <span class="token operator">=</span> number<span class="token punctuation">.</span><span class="token function">takeIf</span> <span class="token punctuation">{<!-- --></span> it <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">!=</span> <span class="token number">0</span> <span class="token punctuation">}</span>
<span class="token function">println</span><span class="token punctuation">(</span>oddNumber<span class="token punctuation">)</span>  <span class="token comment">// 输出 null</span>
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        takeUnless
       </strong>
       ：
      </p>
      <ul>
       <li>
        与 takeIf 相反，条件为 false时返回对象本身，为 true时返回 null。
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        示例
       </strong>
       ：
      </p>
      <pre><code class="prism language-kotlin"><span class="token keyword">val</span> strValue <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"Kotlin"</span></span>
<span class="token keyword">val</span> result <span class="token operator">=</span> strValue<span class="token punctuation">.</span><span class="token function">takeUnless</span> <span class="token punctuation">{<!-- --></span> it<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
<span class="token function">println</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>  <span class="token comment">// 输出 "Kotlin"</span>
</code></pre>
     </li>
    </ul>
    <h4>
     <a id="repeat_1125">
     </a>
     repeat
    </h4>
    <ul>
     <li>
      <p>
       <strong>
        特点
       </strong>
       ：
      </p>
      <ul>
       <li>
        用于重复执行一个操作指定次数，常见于打印、计数等场景。
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        示例
       </strong>
       ：
      </p>
      <pre><code class="prism language-kotlin"><span class="token function">repeat</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"Hello, Kotlin!"</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
     </li>
    </ul>
    <h3>
     <a id="53__1139">
     </a>
     5.3 应用场景与选择
    </h3>
    <ul>
     <li>
      对非空对象进行操作时，使用
      <code>
       ?.let { }
      </code>
      能避免显式的空检查。
     </li>
     <li>
      对象的初始化配置，
      <code>
       apply
      </code>
      是首选，因为它返回对象本身且代码风格简洁。
     </li>
     <li>
      在不改变对象的情况下执行额外操作（例如日志记录），可以使用
      <code>
       also
      </code>
      。
     </li>
     <li>
      如果需要对一个代码块求值并返回结果，但又不关心对象本身，可使用
      <code>
       run
      </code>
      或
      <code>
       with
      </code>
      （后者适用于需要多次调用同一对象的场景）。
     </li>
    </ul>
    <h2>
     <a id="_1146">
     </a>
     六、集合
    </h2>
    <h3>
     <a id="61__1148">
     </a>
     6.1 集合分类
    </h3>
    <p>
     Kotlin 中的集合主要分为两大类：
    </p>
    <ul>
     <li>
      <strong>
       只读集合
      </strong>
      ：提供读取操作，不能修改内部元素，如：
      <ul>
       <li>
        <code>
         List&lt;T&gt;
        </code>
       </li>
       <li>
        <code>
         Set&lt;T&gt;
        </code>
       </li>
       <li>
        <code>
         Map&lt;K, V&gt;
        </code>
       </li>
      </ul>
     </li>
     <li>
      <strong>
       可变集合
      </strong>
      ：在只读集合基础上增加写操作（添加、删除、更新），如：
      <ul>
       <li>
        <code>
         MutableList&lt;T&gt;
        </code>
       </li>
       <li>
        <code>
         MutableSet&lt;T&gt;
        </code>
       </li>
       <li>
        <code>
         MutableMap&lt;K, V&gt;
        </code>
       </li>
      </ul>
     </li>
    </ul>
    <h3>
     <a id="62_List__1161">
     </a>
     6.2 List 集合
    </h3>
    <h4>
     <a id="_List_1163">
     </a>
     不可变 List
    </h4>
    <ul>
     <li>
      <p>
       创建
      </p>
      <pre><code>listOf()
</code></pre>
      <p>
       函数创建不可变 List，例如：
      </p>
      <pre><code class="prism language-kotlin"><span class="token keyword">val</span> list <span class="token operator">=</span> <span class="token function">listOf</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span>
</code></pre>
     </li>
     <li>
      <p>
       访问元素
      </p>
      <ul>
       <li>
        索引访问：
        <code>
         list[0]
        </code>
        或
        <code>
         list.get(0)
        </code>
       </li>
       <li>
        获取首尾：
        <code>
         list.first()
        </code>
        、
        <code>
         list.last()
        </code>
       </li>
       <li>
        安全访问：
        <code>
         list.elementAtOrNull(index)
        </code>
        （越界时返回
        <code>
         null
        </code>
        ）
       </li>
      </ul>
     </li>
     <li>
      <p>
       取子集
      </p>
      <pre><code>subList(fromIndex, toIndex)
</code></pre>
      <p>
       （左闭右开区间）
      </p>
      <pre><code class="prism language-kotlin"><span class="token function">println</span><span class="token punctuation">(</span>list<span class="token punctuation">.</span><span class="token function">subList</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment">// 输出：[1, 3]</span>
</code></pre>
     </li>
    </ul>
    <h4>
     <a id="_List_1195">
     </a>
     可变 List
    </h4>
    <ul>
     <li>
      <p>
       创建
      </p>
      <pre><code>mutableListOf()
</code></pre>
      <pre><code class="prism language-kotlin"><span class="token keyword">val</span> mList <span class="token operator">=</span> <span class="token function">mutableListOf</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"one"</span></span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"two"</span></span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"three"</span></span><span class="token punctuation">)</span>
</code></pre>
     </li>
     <li>
      <p>
       常用操作
      </p>
      <ul>
       <li>
        添加：
        <code>
         mList.add("four")
        </code>
       </li>
       <li>
        删除：
        <code>
         mList.removeAt(0)
        </code>
        或
        <code>
         mList.remove("two")
        </code>
       </li>
       <li>
        更新：
        <code>
         mList[0] = "newOne"
        </code>
       </li>
       <li>
        随机打乱：
        <code>
         mList.shuffle()
        </code>
       </li>
       <li>
        过滤删除：
        <code>
         mList.removeAll { it.length == 3 }
        </code>
       </li>
      </ul>
     </li>
    </ul>
    <h4>
     <a id="_1215">
     </a>
     遍历
    </h4>
    <ol>
     <li>
      <strong>
       直接 for 循环遍历元素
      </strong>
      <br/>
      适用于只需要处理集合中每个元素的情况：
     </li>
    </ol>
    <pre><code class="prism language-kotlin"><span class="token keyword">val</span> list <span class="token operator">=</span> <span class="token function">listOf</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"a"</span></span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"b"</span></span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"c"</span></span><span class="token punctuation">)</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span>item <span class="token keyword">in</span> list<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">println</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
    <ol start="2">
     <li>
      <strong>
       通过索引遍历
      </strong>
      <br/>
      使用
      <code>
       indices
      </code>
      获取索引范围，再通过索引访问对应的值：
     </li>
    </ol>
    <pre><code class="prism language-kotlin"><span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token keyword">in</span> list<span class="token punctuation">.</span>indices<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"index = </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">i</span></span><span class="token string">, value = </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span><span class="token expression">list<span class="token punctuation">[</span>i<span class="token punctuation">]</span></span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
    <ol start="3">
     <li>
      <strong>
       使用 withIndex() 进行遍历
      </strong>
      <br/>
      这种方式既能同时获得元素的索引和值，又让代码看起来非常清晰：
     </li>
    </ol>
    <pre><code class="prism language-kotlin"><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> value<span class="token punctuation">)</span> <span class="token keyword">in</span> list<span class="token punctuation">.</span><span class="token function">withIndex</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"index = </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">index</span></span><span class="token string">, value = </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">value</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
    <ol start="4">
     <li>
      <strong>
       使用高阶函数 forEach()
      </strong>
     </li>
    </ol>
    <pre><code class="prism language-kotlin">list<span class="token punctuation">.</span><span class="token function">forEach</span> <span class="token punctuation">{<!-- --></span> item <span class="token operator">-&gt;</span>
    <span class="token function">println</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
    <ol start="5">
     <li>
      <p>
       <strong>
        使用函数 forEachIndexed
       </strong>
      </p>
      <p>
       允许在遍历集合的同时获取每个元素的索引和值
      </p>
     </li>
    </ol>
    <pre><code class="prism language-kotlin"><span class="token keyword">val</span> fruits <span class="token operator">=</span> <span class="token function">listOf</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"Apple"</span></span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"Banana"</span></span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"Cherry"</span></span><span class="token punctuation">)</span>
fruits<span class="token punctuation">.</span><span class="token function">forEachIndexed</span> <span class="token punctuation">{<!-- --></span> index<span class="token punctuation">,</span> fruit <span class="token operator">-&gt;</span>
    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"索引：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">index</span></span><span class="token string">，元素：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">fruit</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
    <h3>
     <a id="63_Set__1264">
     </a>
     6.3 Set 集合
    </h3>
    <h4>
     <a id="_1266">
     </a>
     基本特点
    </h4>
    <ul>
     <li>
      <strong>
       唯一性
      </strong>
      ：Set 中的每个元素都是唯一的。
     </li>
     <li>
      创建
      <ul>
       <li>
        不可变 Set：
        <code>
         setOf("one", "two", "three")
        </code>
       </li>
       <li>
        可变 Set：
        <code>
         mutableSetOf("one", "two", "three")
        </code>
       </li>
      </ul>
     </li>
     <li>
      <strong>
       内部实现
      </strong>
      ：通常默认采用
      <code>
       LinkedHashSet
      </code>
      ，可保持插入顺序。
     </li>
    </ul>
    <h4>
     <a id="_1274">
     </a>
     常用操作
    </h4>
    <ul>
     <li>
      <p>
       遍历：使用
       <code>
        forEach
       </code>
       或
       <code>
        forEachIndexed
       </code>
      </p>
     </li>
     <li>
      <p>
       集合运算：
      </p>
      <ul>
       <li>
        并集：
        <code>
         set1 union set2
        </code>
       </li>
       <li>
        交集：
        <code>
         set1 intersect set2
        </code>
       </li>
       <li>
        差集：
        <code>
         set1 subtract set2
        </code>
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        list 转 set
       </strong>
       ：
      </p>
      <pre><code class="prism language-java">val list <span class="token operator">=</span> <span class="token function">listOf</span><span class="token punctuation">(</span><span class="token string">"apple"</span><span class="token punctuation">,</span> <span class="token string">"banana"</span><span class="token punctuation">,</span> <span class="token string">"apple"</span><span class="token punctuation">,</span> <span class="token string">"orange"</span><span class="token punctuation">)</span>
<span class="token comment">// 可变或不可变</span>
val set <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">toSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
val mutableSet <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">toMutableSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
      <pre><code class="prism language-java">val list <span class="token operator">=</span> <span class="token function">listOf</span><span class="token punctuation">(</span><span class="token string">"apple"</span><span class="token punctuation">,</span> <span class="token string">"banana"</span><span class="token punctuation">,</span> <span class="token string">"apple"</span><span class="token punctuation">,</span> <span class="token string">"orange"</span><span class="token punctuation">)</span>
val distinctList <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">distinct</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">println</span><span class="token punctuation">(</span>distinctList<span class="token punctuation">)</span>  <span class="token comment">// [apple, banana, orange]</span>
</code></pre>
      <pre><code class="prism language-java">data <span class="token keyword">class</span> <span class="token class-name">Person</span><span class="token punctuation">(</span>val name<span class="token operator">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span> val age<span class="token operator">:</span> <span class="token class-name">Int</span><span class="token punctuation">)</span>

val people <span class="token operator">=</span> <span class="token function">listOf</span><span class="token punctuation">(</span>
    <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">"Alice"</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">"Bob"</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">"Alice"</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>

<span class="token comment">// 根据 name 去重，保留第一个出现的</span>
val distinctPeople <span class="token operator">=</span> people<span class="token punctuation">.</span>distinctBy <span class="token punctuation">{<!-- --></span> it<span class="token punctuation">.</span>name <span class="token punctuation">}</span>
<span class="token function">println</span><span class="token punctuation">(</span>distinctPeople<span class="token punctuation">)</span>
<span class="token comment">// 输出：[Person(name=Alice, age=20), Person(name=Bob, age=25)]</span>
</code></pre>
     </li>
    </ul>
    <h3>
     <a id="64_Map__1314">
     </a>
     6.4 Map 集合
    </h3>
    <h4>
     <a id="_1316">
     </a>
     基本特点
    </h4>
    <ul>
     <li>
      <strong>
       存储键值对
      </strong>
      ：键（Key）必须唯一，值（Value）可以重复。
     </li>
     <li>
      创建
      <ul>
       <li>
        不可变 Map：
        <code>
         mapOf("key1" to 1, "key2" to 2, "key3" to 3)
        </code>
       </li>
       <li>
        可变 Map：
        <code>
         mutableMapOf("key1" to 1, "key2" to 2)
        </code>
       </li>
      </ul>
     </li>
    </ul>
    <h4>
     <a id="_1323">
     </a>
     常用操作
    </h4>
    <ul>
     <li>
      <p>
       访问键和值：
       <code>
        map.keys
       </code>
       、
       <code>
        map.values
       </code>
       、
       <code>
        map.entries
       </code>
      </p>
      <p>
       <code>
        getOrPut
       </code>
       函数用于在映射中获取指定键的值，如果键不存在，则使用提供的默认值（通过 lambda 表达式计算）插入该键，并返回该值。
      </p>
     </li>
     <li>
      <p>
       通过键取值：
       <code>
        map["key1"]
       </code>
      </p>
     </li>
     <li>
      <p>
       过滤操作：
      </p>
      <ul>
       <li>
        <code>
         filter { (key, value) -&gt; … }
        </code>
       </li>
       <li>
        <code>
         filterKeys { … }
        </code>
       </li>
       <li>
        <code>
         filterValues { … }
        </code>
       </li>
      </ul>
     </li>
     <li>
      <p>
       Map 转换：利用
       <code>
        associateWith {}
       </code>
       、
       <code>
        associateBy {}
       </code>
       或
       <code>
        associate {}
       </code>
       将 List 转换成 Map
      </p>
     </li>
    </ul>
    <h4>
     <a id="_1339">
     </a>
     遍历
    </h4>
    <ol>
     <li>
      <strong>
       使用 for 循环
      </strong>
     </li>
    </ol>
    <pre><code class="prism language-kotlin"><span class="token keyword">val</span> map <span class="token operator">=</span> <span class="token function">mapOf</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"apple"</span></span> <span class="token keyword">to</span> <span class="token string-literal singleline"><span class="token string">"苹果"</span></span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"banana"</span></span> <span class="token keyword">to</span> <span class="token string-literal singleline"><span class="token string">"香蕉"</span></span><span class="token punctuation">)</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span> <span class="token keyword">in</span> map<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"key = </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">key</span></span><span class="token string">, value = </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">value</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
    <ol start="2">
     <li>
      <strong>
       使用 forEach 函数
      </strong>
     </li>
    </ol>
    <pre><code class="prism language-kotlin"><span class="token keyword">val</span> map <span class="token operator">=</span> <span class="token function">mapOf</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"apple"</span></span> <span class="token keyword">to</span> <span class="token string-literal singleline"><span class="token string">"苹果"</span></span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"banana"</span></span> <span class="token keyword">to</span> <span class="token string-literal singleline"><span class="token string">"香蕉"</span></span><span class="token punctuation">)</span>
map<span class="token punctuation">.</span><span class="token function">forEach</span> <span class="token punctuation">{<!-- --></span> <span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span> <span class="token operator">-&gt;</span>
    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"key = </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">key</span></span><span class="token string">, value = </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">value</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
    <ol start="3">
     <li>
      <p>
       <strong>
        遍历 Map 的 keys 或 values
       </strong>
      </p>
      <p>
       键或值可以分别遍历：
      </p>
     </li>
    </ol>
    <pre><code class="prism language-kotlin"><span class="token comment">// 遍历所有键</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span>key <span class="token keyword">in</span> map<span class="token punctuation">.</span>keys<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"key = </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">key</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 遍历所有值</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span>value <span class="token keyword">in</span> map<span class="token punctuation">.</span>values<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"value = </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">value</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
    <h3>
     <a id="65__1375">
     </a>
     6.5 排序与聚合
    </h3>
    <ul>
     <li>
      排序
      <ul>
       <li>
        <code>
         sorted()
        </code>
        、
        <code>
         sortedDescending()
        </code>
        ：自然顺序升序/降序排序。
       </li>
       <li>
        <code>
         sortedBy { }
        </code>
        、
        <code>
         sortedWith()
        </code>
        ：根据指定规则排序。
       </li>
       <li>
        <code>
         reversed()
        </code>
        、
        <code>
         asReversed()
        </code>
        、
        <code>
         shuffled()
        </code>
        ：倒序、反向视图、随机排列。
       </li>
      </ul>
     </li>
     <li>
      聚合
      <ul>
       <li>
        数量统计：
        <code>
         count()
        </code>
       </li>
       <li>
        最大最小：
        <code>
         maxOrNull()
        </code>
        、
        <code>
         minOrNull()
        </code>
       </li>
       <li>
        平均、求和：
        <code>
         average()
        </code>
        、
        <code>
         sum()
        </code>
       </li>
       <li>
        累加：
        <code>
         reduce()
        </code>
        、
        <code>
         fold()
        </code>
        （以及它们的右侧版本）
       </li>
      </ul>
     </li>
    </ul>
    <h2>
     <a id="_1387">
     </a>
     七、定义类
    </h2>
    <h3>
     <a id="71__1389">
     </a>
     7.1 构造函数
    </h3>
    <h4>
     <a id="_1391">
     </a>
     主构造函数
    </h4>
    <p>
     Kotlin 的类可以有一个主构造函数和一个或多个次构造函数。主构造函数是类头的一部分，位于类名之后：
    </p>
    <pre><code class="prism language-kotlin"><span class="token keyword">class</span> Person <span class="token keyword">constructor</span><span class="token punctuation">(</span>firstName<span class="token operator">:</span> String<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     如果主构造函数没有任何注解或可见性修饰符，可以省略
     <code>
      constructor
     </code>
     关键字：
    </p>
    <pre><code class="prism language-kotlin"><span class="token keyword">class</span> <span class="token function">Person</span><span class="token punctuation">(</span>firstName<span class="token operator">:</span> String<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     示例：
    </p>
    <pre><code class="prism language-java"><span class="token comment">// Kotlin中的主构造函数如果不使用var或val修饰，则这些参数仅作为构造函数的形参传入，</span>
<span class="token comment">// 而不会自动成为类的属性。</span>
<span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token function">constructor</span><span class="token punctuation">(</span>
    _name<span class="token operator">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span>    
    _age<span class="token operator">:</span> <span class="token class-name">Int</span><span class="token punctuation">,</span>       
    _height<span class="token operator">:</span> <span class="token class-name">String</span>  
<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 定义name属性，并用传入的_name初始化</span>
    <span class="token comment">// Kotlin 中的属性有默认的 getter 和 setter，但也可以自定义</span>
    <span class="token comment">// 自定义getter: 每次获取name时，返回首字母大写后的字符串</span>
    <span class="token comment">// 自定义setter: 设置name时，先去掉前后空格再赋值</span>
    <span class="token keyword">var</span> name <span class="token operator">=</span> _name
        <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> field<span class="token punctuation">.</span><span class="token function">capitalize</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token function">set</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            field <span class="token operator">=</span> value<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    
    <span class="token comment">// 定义age属性，直接使用传入的_age初始化</span>
    <span class="token keyword">var</span> age <span class="token operator">=</span> _age
    
    <span class="token comment">// 定义height属性，直接使用传入的_height初始化</span>
    <span class="token keyword">var</span> height <span class="token operator">=</span> _height
    
    override fun <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token class-name">String</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token string">"Person(age=$age, height='$height', name='$name')"</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

fun <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 创建一个Person对象，传入对应的参数</span>
    <span class="token keyword">var</span> p1 <span class="token operator">=</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">"yuxuan"</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token string">"175"</span><span class="token punctuation">)</span>
    <span class="token function">println</span><span class="token punctuation">(</span>p1<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
    <h4>
     <a id="_1444">
     </a>
     次构造函数
    </h4>
    <p>
     次构造函数使用关键字
     <code>
      constructor
     </code>
     来声明，与主构造函数不同的是，它需要用委托调用主构造函数（或者其他次构造函数）。
    </p>
    <ul>
     <li>
      每个次构造函数必须通过委托调用其他构造函数来最终调用主构造函数（如果存在主构造函数），这确保了所有属性都能被正确初始化。
     </li>
    </ul>
    <p>
     例如：
    </p>
    <pre><code class="prism language-kotlin"><span class="token keyword">class</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token keyword">val</span> name<span class="token operator">:</span> String<span class="token punctuation">,</span> <span class="token keyword">val</span> age<span class="token operator">:</span> Int<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 次构造函数，提供只传入 name 的构造方式</span>
    <span class="token keyword">constructor</span><span class="token punctuation">(</span>name<span class="token operator">:</span> String<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 次构造函数体中可以进行额外的初始化操作</span>
        <span class="token function">println</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"使用次构造函数，仅传入 name 参数"</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">val</span> person <span class="token operator">=</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"Bob"</span></span><span class="token punctuation">)</span>        <span class="token comment">// 使用次构造函数</span>
<span class="token punctuation">}</span>
</code></pre>
    <ul>
     <li>
      次构造函数仅需要传入
      <code>
       name
      </code>
      ，然后通过
      <code>
       : this(name, 0)
      </code>
      委托调用主构造函数，并为
      <code>
       age
      </code>
      提供默认值 0。
     </li>
    </ul>
    <h3>
     <a id="72__1468">
     </a>
     7.2 初始化顺序
    </h3>
    <blockquote>
     <p>
      <strong>
       主构造函数参数求值 → 属性初始化与 init 块执行 → 次构造函数体执行
      </strong>
     </p>
    </blockquote>
    <p>
     <strong>
      1. 主构造函数的参数求值
     </strong>
    </p>
    <p>
     当你创建一个对象时，首先会对传递给主构造函数的参数进行求值。
    </p>
    <p>
     <strong>
      2. 属性初始化与 init 块
     </strong>
    </p>
    <ul>
     <li>
      属性初始化接着会按它们在类中声明的顺序执行属性初始化语句。例如：
     </li>
     <li>
      <strong>
       init 块
      </strong>
      ：随后会按顺序执行所有的
      <code>
       init
      </code>
      块中的代码。这两个步骤一起保证了所有属性在构造过程中被正确地初始化。
     </li>
    </ul>
    <blockquote>
     <p>
      无论你使用主构造函数还是次构造函数，这一步总是会在构造函数体执行之前完成。
     </p>
    </blockquote>
    <p>
     <strong>
      3. 次构造函数的调用
     </strong>
    </p>
    <ul>
     <li>
      如果你是通过次构造函数来创建对象，次构造函数首先必须委托调用主构造函数（或者间接调用其他次构造函数），这样就会触发前面提到的属性初始化和
      <code>
       init
      </code>
      块的执行。
     </li>
     <li>
      当主构造函数、属性初始化和所有
      <code>
       init
      </code>
      块执行完毕后，才会执行次构造函数体中的代码。
     </li>
    </ul>
    <p>
     举例：
    </p>
    <pre><code class="prism language-kotlin"><span class="token keyword">class</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token keyword">val</span> name<span class="token operator">:</span> String<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">var</span> age<span class="token operator">:</span> Int <span class="token operator">=</span> <span class="token number">0</span>

    <span class="token comment">// 属性初始化</span>
    <span class="token keyword">var</span> info<span class="token operator">:</span> String <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"初始化属性"</span></span>

    <span class="token comment">// 第一个 init 块</span>
    <span class="token keyword">init</span> <span class="token punctuation">{<!-- --></span>
        <span class="token function">println</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"init 块1: name = </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">name</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 第二个 init 块</span>
    <span class="token keyword">init</span> <span class="token punctuation">{<!-- --></span>
        <span class="token function">println</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"init 块2: info = </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">info</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 次构造函数，委托调用主构造函数</span>
    <span class="token keyword">constructor</span><span class="token punctuation">(</span>name<span class="token operator">:</span> String<span class="token punctuation">,</span> age<span class="token operator">:</span> Int<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age
        <span class="token function">println</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"次构造函数体: age = </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">age</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 调用次构造函数创建对象</span>
    <span class="token keyword">val</span> p <span class="token operator">=</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"Alice"</span></span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     顺序如下：
    </p>
    <ol>
     <li>
      <strong>
       求值主构造函数参数
      </strong>
      ：
      <code>
       "Alice"
      </code>
      被传入。
     </li>
     <li>
      <strong>
       属性初始化
      </strong>
      ：
      <code>
       age
      </code>
      被初始化为 0，
      <code>
       info
      </code>
      被初始化为
      <code>
       "初始化属性"
      </code>
      。
     </li>
     <li>
      init 块执行：按顺序打印：
      <ul>
       <li>
        <code>
         init 块1: name = Alice
        </code>
       </li>
       <li>
        <code>
         init 块2: info = 初始化属性
        </code>
       </li>
      </ul>
     </li>
     <li>
      <strong>
       次构造函数体执行
      </strong>
      ：
      <code>
       age
      </code>
      被更新为 25，并打印
      <code>
       次构造函数体: age = 25
      </code>
     </li>
    </ol>
    <h3>
     <a id="73__1529">
     </a>
     7.3 类的继承
    </h3>
    <p>
     Kotlin 中的类默认是
     <code>
      final
     </code>
     的，不能被继承。如果需要一个类可以被继承，需要使用
     <code>
      open
     </code>
     关键字修饰：
    </p>
    <pre><code class="prism language-kotlin"><span class="token keyword">open</span> <span class="token keyword">class</span> <span class="token function">Base</span><span class="token punctuation">(</span>p<span class="token operator">:</span> Int<span class="token punctuation">)</span>

<span class="token keyword">class</span> <span class="token function">Derived</span><span class="token punctuation">(</span>p<span class="token operator">:</span> Int<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">Base</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span>
</code></pre>
    <h3>
     <a id="74__1539">
     </a>
     <strong>
      7.4 抽象类
     </strong>
    </h3>
    <p>
     抽象类使用
     <code>
      abstract
     </code>
     关键字修饰，不能被实例化，可以包含抽象成员：
    </p>
    <pre><code class="prism language-kotlin"><span class="token keyword">abstract</span> <span class="token keyword">class</span> Polygon <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">abstract</span> <span class="token keyword">fun</span> <span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
    <h3>
     <a id="75__1549">
     </a>
     <strong>
      7.5 类的可见性修饰符
     </strong>
    </h3>
    <p>
     Kotlin 提供了四个可见性修饰符：
     <code>
      private
     </code>
     、
     <code>
      protected
     </code>
     、
     <code>
      internal
     </code>
     和
     <code>
      public
     </code>
     。默认情况下，所有类都是
     <code>
      public
     </code>
     的：
    </p>
    <ul>
     <li>
      <code>
       private
      </code>
      ：仅在同一个文件中可见。
     </li>
     <li>
      <code>
       protected
      </code>
      ：同一个文件中或子类中可见。
     </li>
     <li>
      <code>
       internal
      </code>
      ：同一个模块中可见。
     </li>
     <li>
      <code>
       public
      </code>
      ：在任何地方可见。
     </li>
    </ul>
    <h3>
     <a id="76__1562">
     </a>
     7.6 延迟初始化
    </h3>
    <h4>
     <a id="lazy__1564">
     </a>
     <code>
      lazy
     </code>
     委托属性
    </h4>
    <ul>
     <li>
      <p>
       <strong>
        适用场景
       </strong>
       ：通常用于
       <code>
        val
       </code>
       类型的属性，并且初始化操作可能较为耗时或者不一定需要立即执行。
      </p>
     </li>
     <li>
      <p>
       <strong>
        特点
       </strong>
       ：
      </p>
      <ul>
       <li>
        延迟到第一次使用时执行初始化代码。
       </li>
       <li>
        默认线程安全（可以通过传递参数修改线程安全策略）。
       </li>
       <li>
        返回值会被缓存，下次访问时直接返回之前计算的值。
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        示例代码
       </strong>
       ：
      </p>
      <pre><code class="prism language-kotlin"><span class="token keyword">val</span> lazyValue<span class="token operator">:</span> String <span class="token keyword">by</span> lazy <span class="token punctuation">{<!-- --></span>
    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"初始化 lazyValue"</span></span><span class="token punctuation">)</span>
    <span class="token string-literal singleline"><span class="token string">"Hello, Lazy!"</span></span>
<span class="token punctuation">}</span>

<span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"调用 lazyValue 前"</span></span><span class="token punctuation">)</span>
    <span class="token function">println</span><span class="token punctuation">(</span>lazyValue<span class="token punctuation">)</span> <span class="token comment">// 第一次调用，执行初始化代码并打印 "初始化 lazyValue"</span>
    <span class="token function">println</span><span class="token punctuation">(</span>lazyValue<span class="token punctuation">)</span> <span class="token comment">// 第二次调用，直接返回缓存值，不再执行 lambda</span>
<span class="token punctuation">}</span>
</code></pre>
      <p>
       <strong>
        输出结果：
       </strong>
      </p>
      <pre><code>调用 lazyValue 前
初始化 lazyValue
Hello, Lazy!
Hello, Lazy!
</code></pre>
      <p>
       这里，
       <code>
        lazyValue
       </code>
       的初始化代码只会在第一次访问时执行一次，之后直接返回缓存的值。
      </p>
     </li>
    </ul>
    <h4>
     <a id="lateinit__1600">
     </a>
     <code>
      lateinit
     </code>
     修饰符
    </h4>
    <ul>
     <li>
      <p>
       <strong>
        适用场景
       </strong>
       ：适用于
       <code>
        var
       </code>
       类型的属性，通常用于那些不能在声明时就初始化的情况（例如依赖于外部注入或后续赋值），但必须保证在使用前一定被初始化。
      </p>
     </li>
     <li>
      <p>
       <strong>
        特点
       </strong>
       ：
      </p>
      <ul>
       <li>
        不能用于基本数据类型（如
        <code>
         Int
        </code>
        、
        <code>
         Double
        </code>
        等）。
       </li>
       <li>
        编译器不会强制在声明时初始化，但在访问时如果没有初始化会抛出
        <code>
         UninitializedPropertyAccessException
        </code>
        。
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        示例代码
       </strong>
       ：
      </p>
      <pre><code class="prism language-kotlin"><span class="token keyword">class</span> Example <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">lateinit</span> <span class="token keyword">var</span> <span class="token keyword">data</span><span class="token operator">:</span> String

    <span class="token keyword">fun</span> <span class="token function">initData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">data</span> <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"Hello, Lateinit!"</span></span>
    <span class="token punctuation">}</span>

    <span class="token keyword">fun</span> <span class="token function">printData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">::</span><span class="token keyword">data</span><span class="token punctuation">.</span>isInitialized<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>  <span class="token comment">// 检查是否已初始化</span>
            <span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">data</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
            <span class="token function">println</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"data 还未初始化"</span></span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">val</span> example <span class="token operator">=</span> <span class="token function">Example</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    example<span class="token punctuation">.</span><span class="token function">printData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 输出 "data 还未初始化"</span>
    example<span class="token punctuation">.</span><span class="token function">initData</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    example<span class="token punctuation">.</span><span class="token function">printData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 输出 "Hello, Lateinit!"</span>
<span class="token punctuation">}</span>
</code></pre>
      <p>
       在这个例子中，
       <code>
        data
       </code>
       属性使用
       <code>
        lateinit
       </code>
       修饰，表示稍后会被初始化，并且在使用前可以通过
       <code>
        ::data.isInitialized
       </code>
       检查其是否已赋值。
      </p>
     </li>
    </ul>
    <hr/>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f67:2e6373646e2e6e65742f5061747269636b5f79757875616e2f:61727469636c652f64657461696c732f313436313430383036" class_="artid" style="display:none">
 </p>
</div>


