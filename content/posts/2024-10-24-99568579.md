---
arturl_encode: "68747470733a2f:2f626c6f672e6373646e2e6e65742f57656948616f30323430:2f61727469636c652f64657461696c732f3939353638353739"
layout: post
title: "Java简单调用C语言函数"
date: 2024-10-24 20:27:06 +08:00
description: "Java简单调用C语言函数1.安装Dev-Cpp2.编写"
keywords: "java调用c语言"
categories: ['浩哥的Java之路', 'C']
tags: ['Java', 'Java', 'Java', 'Java', 'Api']
artid: "99568579"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=99568579
    alt: "Java简单调用C语言函数"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=99568579
featuredImagePreview: https://bing.ee123.net/img/rand?artid=99568579
---

# Java简单调用C语言函数

#### Java简单调用C语言函数

* [1.安装Dev-Cpp](#1DevCpp_1)
* [2.编写并编译Java代码](#2Java_9)
* [3.新建工程](#3_52)
* [4.修改C代码](#4C_63)
* + [4.1将第2步生成的.h文件复制黏贴到dll.h里面](#412hdllh_64)
  + [4.2修改dllmain.cpp文件](#42dllmaincpp_67)
  + [4.3 保存并编译](#43__69)
  + [4.4编译错误解决](#44_72)
* [5.将编译好的dll文件放到java安装目录下的bin目录下](#5dlljavabin_82)
* [6.运行](#6_85)

## 1.安装Dev-Cpp

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/48b099c81f06f4baff571f925bc6d506.png)
  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/7b5456f55a8b9beca884b467c4694959.png)
  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/d662df6addd6fa1c0c9430a528b790c0.png)
  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/85b36293acb9efbbc33d276a6369285e.png)
  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/17dfffbba22c0c6bde8cdfd5e74efcda.png)
  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/ff9469d7d8042589fbc13235caabfa40.png)
  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/41797f308e5309ed232c5e8451f1ffa4.png)

## 2.编写并编译Java代码

```java
public class HelloCDemo {
	
	native void printHelloC();

	static{ System.loadLibrary("java2c"); }
	
	 public static void main(String args[])
	{
		HelloCDemo demo = new HelloCDemo();
		demo.printHelloC();
	}
}

```

**javac编译java文件**
  
**javah生成.h文件**
  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/da5258d244a78e4caf74c73d247acf29.png)
  
打开.h文件

```c
**/* DO NOT EDIT THIS FILE - it is machine generated */
#include <jni.h>
/* Header for class HelloCDemo */

#ifndef _Included_HelloCDemo
#define _Included_HelloCDemo
#ifdef __cplusplus
extern "C" {
#endif
/*
 * Class:     HelloCDemo
 * Method:    printHelloC
 * Signature: ()V
 */
JNIEXPORT void JNICALL Java_HelloCDemo_printHelloC
  (JNIEnv *, jobject);
#ifdef __cplusplus
}
#endif
#endif
**

```

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/faab3bd0b571ba9456e3d8f6d78c3970.png)

## 3.新建工程

文件-》新建-》项目
  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/375c214a0746afbc7c09f47c355073ea.png)
  
选择DLL，输入名称
  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/ce4c11019dd1aca19e848ecd6306a697.png)

## 4.修改C代码

### 4.1将第2步生成的.h文件复制黏贴到dll.h里面

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/8bb13e0faab905699d9c35116749e73e.png)

### 4.2修改dllmain.cpp文件

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/b23b55d31f607b162fee9e951dbe5b60.png)

### 4.3 保存并编译

会报下面错误
  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/63e83f10402e35857ad80462e870f6d7.png)

### 4.4编译错误解决

去java安装目录下找include文件夹，
  
里面有jni.h 和jni\_md.h文件，复制到
  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/402831898a2069577e1f9f19351d7340.png)
  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/3649dad1d152f3997c28014c0772708c.png)
  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/bc5783793f38a9c27fce567f49853168.png)
  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/2572aec4550497ce380ef138b897ae41.png)
  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/b8134ff4c2e29293801ce9621a3b9682.png)
  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/9fca87a1f464bc34ab56877ace9e8f5b.png)

## 5.将编译好的dll文件放到java安装目录下的bin目录下

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/32d70ffb57be93729f85ba78f32c56bf.png)
  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/5cc3d4409a260369d0214e9693f153fa.png)

## 6.运行

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/14655cdbe5699a8dc2edde3ffcd7028f.png)