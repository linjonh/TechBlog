---
layout: post
title: "银河麒麟V10SP3Server中离线安装Docker引擎与docker-compose"
date: 2025-03-14 08:41:20 +0800
description: "银河麒麟V10SP3Server中离线安装Docker引擎与docker-compose"
keywords: "银河麒麟V10SP3Server中离线安装Docker引擎与docker-compose"
categories: ['未分类']
tags: ['银河麒麟V10', '离线安装Docker', '容器', 'Linux', 'Kylin', 'Docker']
artid: "146248204"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146248204
    alt: "银河麒麟V10SP3Server中离线安装Docker引擎与docker-compose"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146248204
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146248204
cover: https://bing.ee123.net/img/rand?artid=146248204
image: https://bing.ee123.net/img/rand?artid=146248204
img: https://bing.ee123.net/img/rand?artid=146248204
---

# 银河麒麟V10SP3Server中离线安装Docker引擎与docker-compose

## 银河麒麟V10SP3Server中离线安装Docker引擎与docker-compose

## 1\. 系统信息

### 1\. 查看系统信息

通过`cat /etc/os-release`命令查看系统信息

![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/00619d2e08674ad7b8be4cb03ec8f915.png)

Kylin Linux Advanced Server：指的是服务器版版本的操作系统

### 2\. 查看处理器架构

通过`uname -p`命令可看到系统处理器架构为`x86_64`；如果为ARM架构，则会显示`aarch64`
架构，处理器架构这对后边要下载的docker引擎很重要，处理器架构不对应安装不上。

![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/2c4410f3d9ef4084adedacdfd6253bcb.png)

## 2\. Docker离线安装包下载

可参考[docker引擎与docker-compose离线版本下载详细教程-
CSDN博客](https://blog.csdn.net/yuanjinshenglife/article/details/146221620)

## 3\. 安装docker引擎

> 将下载好的安装包`docker-28.0.1.tgz`与`docker-compose-
> darwin-x86_64`上传到服务器指定目录中，如`/opt/mysoftware`目录中

### 1\. 解压

    
    
    [root@localhost mysoftware]# ll
    总用量 148728
    -rw-r--r-- 1 root root 78603326  3月 12 18:11 docker-28.0.1.tgz
    -rw-r--r-- 1 root root 73691062  3月 12 18:24 docker-compose-linux-x86_64
    [root@localhost mysoftware]# tar -zxvf docker-28.0.1.tgz 
    docker/
    docker/containerd-shim-runc-v2
    docker/containerd
    docker/docker
    docker/runc
    docker/ctr
    docker/dockerd
    docker/docker-init
    docker/docker-proxy
    [root@localhost mysoftware]# 
    

### 2\. 解压后文件目录查看

    
    
    [root@localhost mysoftware]# ll
    总用量 148728
    drwxrwxr-x 2 1000 1000      146  2月 26 18:43 docker
    -rw-r--r-- 1 root root 78603326  3月 12 18:11 docker-28.0.1.tgz
    -rw-r--r-- 1 root root 73691062  3月 12 18:24 docker-compose-linux-x86_64
    [root@localhost mysoftware]# cd docker/
    [root@localhost docker]# ll
    总用量 206888
    -rwxr-xr-x 1 1000 1000 40415384  2月 26 18:43 containerd
    -rwxr-xr-x 1 1000 1000 13299864  2月 26 18:43 containerd-shim-runc-v2
    -rwxr-xr-x 1 1000 1000 20394136  2月 26 18:43 ctr
    -rwxr-xr-x 1 1000 1000 41552248  2月 26 18:43 docker
    -rwxr-xr-x 1 1000 1000 76659456  2月 26 18:43 dockerd
    -rwxr-xr-x 1 1000 1000   708448  2月 26 18:43 docker-init
    -rwxr-xr-x 1 1000 1000  2377328  2月 26 18:43 docker-proxy
    -rwxr-xr-x 1 1000 1000 16426200  2月 26 18:43 runc
    [root@localhost docker]# 
    

### 3\. 移动解压后docker中的文件到/usr/bin目录下

    
    
    # 命令 mv docker/* /usr/bin/
    [root@localhost mysoftware]# mv docker/* /usr/bin/
    mv：是否覆盖'/usr/bin/runc'？ n # 注意这里输入 n 不覆盖 runc文件
    

### 4\. 查看版本

    
    
    # 进入/usr/bin目录下
    [root@localhost ~]# cd /usr/bin/
    # 查看版本
    [root@localhost ~]# docker -v
    Docker version 28.0.1, build 068a01e
    # 查看版本详细信息
    [root@localhost ~]# docker version
    Client:
     Version:           28.0.1
     API version:       1.48
     Go version:        go1.23.6
     Git commit:        068a01e
     Built:             Wed Feb 26 10:40:04 2025
     OS/Arch:           linux/amd64
     Context:           default
    Cannot connect to the Docker daemon at unix:///var/run/docker.sock. Is the docker daemon running?
    [root@localhost ~]# 
    

### 5.启动服务

  1. 如果未启动服务，则执行`docker iamges`时提示下面命令

    
    
    [root@localhost ~]# docker images
    Cannot connect to the Docker daemon at unix:///var/run/docker.sock. Is the docker daemon running?
    [root@localhost ~]# 
    

  2. 通过`dockerd`启动服务，如下

    
    
    [root@localhost ~]# dockerd
    INFO[2025-03-12T18:49:39.046561152+08:00] Starting up                                  
    WARN[2025-03-12T18:49:39.059156740+08:00] could not change group /var/run/docker.sock to docker: group docker not found 
    INFO[2025-03-12T18:49:39.060741251+08:00] containerd not running, starting managed containerd 
    INFO[2025-03-12T18:49:39.061786321+08:00] started new containerd process                address=/var/run/docker/containerd/containerd.sock module=libcontainerd pid=38479
    INFO[2025-03-12T18:49:39.139903370+08:00] starting containerd                           revision=bcc810d6b9066471b0b6fa75f557a15a1cbf31bb version=v1.7.25
    INFO[2025-03-12T18:49:39.171775153+08:00] loading plugin "io.containerd.event.v1.exchange"...  type=io.containerd.event.v1
    INFO[2025-03-12T18:49:39.171827815+08:00] loading plugin "io.containerd.internal.v1.opt"...  type=io.containerd.internal.v1
    INFO[2025-03-12T18:49:39.172051637+08:00] loading plugin "io.containerd.warning.v1.deprecations"...  type=io.containerd.warning.v1
    INFO[2025-03-12T18:49:39.172086174+08:00] loading plugin "io.containerd.snapshotter.v1.blockfile"...  type=io.containerd.snapshotter.v1
    INFO[2025-03-12T18:49:39.172126642+08:00] skip loading plugin "io.containerd.snapshotter.v1.blockfile"...  error="no scratch file generator: skip plugin" type=io.containerd.snapshotter.v1
    INFO[2025-03-12T18:49:39.172151841+08:00] loading plugin "io.containerd.snapshotter.v1.devmapper"...  type=io.containerd.snapshotter.v1
    INFO[2025-03-12T18:49:39.172226936+08:00] skip loading plugin "io.containerd.snapshotter.v1.devmapper"...  error="devmapper not configured: skip plugin" type=io.containerd.snapshotter.v1
    INFO[2025-03-12T18:49:39.172263998+08:00] loading plugin "io.containerd.snapshotter.v1.native"...  type=io.containerd.snapshotter.v1
    INFO[2025-03-12T18:49:39.172339023+08:00] loading plugin "io.containerd.snapshotter.v1.overlayfs"...  type=io.containerd.snapshotter.v1
    INFO[2025-03-12T18:49:39.173569590+08:00] loading plugin "io.containerd.snapshotter.v1.aufs"...  type=io.containerd.snapshotter.v1
    INFO[2025-03-12T18:49:39.264534504+08:00] loading plugin "io.containerd.snapshotter.v1.zfs"...  type=io.containerd.snapshotter.v1
    INFO[2025-03-12T18:49:39.264690776+08:00] skip loading plugin "io.containerd.snapshotter.v1.zfs"...  error="path /var/lib/docker/containerd/daemon/io.containerd.snapshotter.v1.zfs must be a zfs filesystem to be used with the zfs snapshotter: skip plugin" type=io.containerd.snapshotter.v1
    INFO[2025-03-12T18:49:39.264703661+08:00] loading plugin "io.containerd.content.v1.content"...  type=io.containerd.content.v1
    INFO[2025-03-12T18:49:39.264714081+08:00] loading plugin "io.containerd.metadata.v1.bolt"...  type=io.containerd.metadata.v1
    INFO[2025-03-12T18:49:39.264785669+08:00] metadata content store policy set             policy=shared
    INFO[2025-03-12T18:49:39.267567615+08:00] loading plugin "io.containerd.gc.v1.scheduler"...  type=io.containerd.gc.v1
    INFO[2025-03-12T18:49:39.267623022+08:00] loading plugin "io.containerd.differ.v1.walking"...  type=io.containerd.differ.v1
    INFO[2025-03-12T18:49:39.267637400+08:00] loading plugin "io.containerd.lease.v1.manager"...  type=io.containerd.lease.v1
    INFO[2025-03-12T18:49:39.267719569+08:00] loading plugin "io.containerd.streaming.v1.manager"...  type=io.containerd.streaming.v1
    INFO[2025-03-12T18:49:39.267756941+08:00] loading plugin "io.containerd.runtime.v1.linux"...  type=io.containerd.runtime.v1
    INFO[2025-03-12T18:49:39.267819231+08:00] loading plugin "io.containerd.monitor.v1.cgroups"...  type=io.containerd.monitor.v1
    INFO[2025-03-12T18:49:39.268210608+08:00] loading plugin "io.containerd.runtime.v2.task"...  type=io.containerd.runtime.v2
    INFO[2025-03-12T18:49:39.268319809+08:00] loading plugin "io.containerd.runtime.v2.shim"...  type=io.containerd.runtime.v2
    INFO[2025-03-12T18:49:39.268360397+08:00] loading plugin "io.containerd.sandbox.store.v1.local"...  type=io.containerd.sandbox.store.v1
    INFO[2025-03-12T18:49:39.268372050+08:00] loading plugin "io.containerd.sandbox.controller.v1.local"...  type=io.containerd.sandbox.controller.v1
    INFO[2025-03-12T18:49:39.268380205+08:00] loading plugin "io.containerd.service.v1.containers-service"...  type=io.containerd.service.v1
    INFO[2025-03-12T18:49:39.268407418+08:00] loading plugin "io.containerd.service.v1.content-service"...  type=io.containerd.service.v1
    INFO[2025-03-12T18:49:39.268417017+08:00] loading plugin "io.containerd.service.v1.diff-service"...  type=io.containerd.service.v1
    INFO[2025-03-12T18:49:39.268424802+08:00] loading plugin "io.containerd.service.v1.images-service"...  type=io.containerd.service.v1
    INFO[2025-03-12T18:49:39.268433358+08:00] loading plugin "io.containerd.service.v1.introspection-service"...  type=io.containerd.service.v1
    INFO[2025-03-12T18:49:39.268460621+08:00] loading plugin "io.containerd.service.v1.namespaces-service"...  type=io.containerd.service.v1
    INFO[2025-03-12T18:49:39.268470810+08:00] loading plugin "io.containerd.service.v1.snapshots-service"...  type=io.containerd.service.v1
    INFO[2025-03-12T18:49:39.268476722+08:00] loading plugin "io.containerd.service.v1.tasks-service"...  type=io.containerd.service.v1
    INFO[2025-03-12T18:49:39.268489106+08:00] loading plugin "io.containerd.grpc.v1.containers"...  type=io.containerd.grpc.v1
    INFO[2025-03-12T18:49:39.268516549+08:00] loading plugin "io.containerd.grpc.v1.content"...  type=io.containerd.grpc.v1
    INFO[2025-03-12T18:49:39.268526598+08:00] loading plugin "io.containerd.grpc.v1.diff"...  type=io.containerd.grpc.v1
    INFO[2025-03-12T18:49:39.268533011+08:00] loading plugin "io.containerd.grpc.v1.events"...  type=io.containerd.grpc.v1
    INFO[2025-03-12T18:49:39.268559422+08:00] loading plugin "io.containerd.grpc.v1.images"...  type=io.containerd.grpc.v1
    INFO[2025-03-12T18:49:39.268570874+08:00] loading plugin "io.containerd.grpc.v1.introspection"...  type=io.containerd.grpc.v1
    INFO[2025-03-12T18:49:39.268576835+08:00] loading plugin "io.containerd.grpc.v1.leases"...  type=io.containerd.grpc.v1
    INFO[2025-03-12T18:49:39.268584200+08:00] loading plugin "io.containerd.grpc.v1.namespaces"...  type=io.containerd.grpc.v1
    INFO[2025-03-12T18:49:39.268610981+08:00] loading plugin "io.containerd.grpc.v1.sandbox-controllers"...  type=io.containerd.grpc.v1
    INFO[2025-03-12T18:49:39.268621552+08:00] loading plugin "io.containerd.grpc.v1.sandboxes"...  type=io.containerd.grpc.v1
    INFO[2025-03-12T18:49:39.268626942+08:00] loading plugin "io.containerd.grpc.v1.snapshots"...  type=io.containerd.grpc.v1
    INFO[2025-03-12T18:49:39.268632623+08:00] loading plugin "io.containerd.grpc.v1.streaming"...  type=io.containerd.grpc.v1
    INFO[2025-03-12T18:49:39.268658162+08:00] loading plugin "io.containerd.grpc.v1.tasks"...  type=io.containerd.grpc.v1
    INFO[2025-03-12T18:49:39.268670446+08:00] loading plugin "io.containerd.transfer.v1.local"...  type=io.containerd.transfer.v1
    INFO[2025-03-12T18:49:39.268683051+08:00] loading plugin "io.containerd.grpc.v1.transfer"...  type=io.containerd.grpc.v1
    INFO[2025-03-12T18:49:39.268777423+08:00] loading plugin "io.containerd.grpc.v1.version"...  type=io.containerd.grpc.v1
    INFO[2025-03-12T18:49:39.268808773+08:00] loading plugin "io.containerd.internal.v1.restart"...  type=io.containerd.internal.v1
    INFO[2025-03-12T18:49:39.268860714+08:00] loading plugin "io.containerd.tracing.processor.v1.otlp"...  type=io.containerd.tracing.processor.v1
    INFO[2025-03-12T18:49:39.268878709+08:00] skip loading plugin "io.containerd.tracing.processor.v1.otlp"...  error="skip plugin: tracing endpoint not configured" type=io.containerd.tracing.processor.v1
    INFO[2025-03-12T18:49:39.268884239+08:00] loading plugin "io.containerd.internal.v1.tracing"...  type=io.containerd.internal.v1
    INFO[2025-03-12T18:49:39.268961418+08:00] skip loading plugin "io.containerd.internal.v1.tracing"...  error="skip plugin: tracing endpoint not configured" type=io.containerd.internal.v1
    INFO[2025-03-12T18:49:39.268971077+08:00] loading plugin "io.containerd.grpc.v1.healthcheck"...  type=io.containerd.grpc.v1
    INFO[2025-03-12T18:49:39.269023689+08:00] loading plugin "io.containerd.nri.v1.nri"...  type=io.containerd.nri.v1
    INFO[2025-03-12T18:49:39.269034339+08:00] NRI interface is disabled by configuration.  
    INFO[2025-03-12T18:49:39.269702059+08:00] serving...                                    address=/var/run/docker/containerd/containerd-debug.sock
    INFO[2025-03-12T18:49:39.269762446+08:00] serving...                                    address=/var/run/docker/containerd/containerd.sock.ttrpc
    INFO[2025-03-12T18:49:39.269858401+08:00] serving...                                    address=/var/run/docker/containerd/containerd.sock
    INFO[2025-03-12T18:49:39.269877178+08:00] containerd successfully booted in 0.131200s  
    INFO[2025-03-12T18:49:39.291932974+08:00] OTEL tracing is not configured, using no-op tracer provider 
    WARN[2025-03-12T18:49:39.410154754+08:00] Failed to run [runc features]: "No help topic for 'features'\n"  error="exit status 3"
    WARN[2025-03-12T18:49:39.420995641+08:00] Failed to run [runc features]: "No help topic for 'features'\n"  error="exit status 3"
    INFO[2025-03-12T18:49:39.487763662+08:00] Loading containers: start.                   
    INFO[2025-03-12T18:49:40.890708217+08:00] Loading containers: done.                    
    INFO[2025-03-12T18:49:40.964374787+08:00] Docker daemon                                 commit=bbd0a17 containerd-snapshotter=false storage-driver=overlay2 version=28.0.1
    INFO[2025-03-12T18:49:40.964473277+08:00] Initializing buildkit                        
    INFO[2025-03-12T18:49:40.999570543+08:00] Completed buildkit initialization            
    INFO[2025-03-12T18:49:41.006650583+08:00] Daemon has completed initialization          
    INFO[2025-03-12T18:49:41.007294337+08:00] API listen on /var/run/docker.sock           
    

  4. 新打开一个终端查看

    
    
    [root@localhost ~]# docker images
    REPOSITORY   TAG       IMAGE ID   CREATED   SIZE
    [root@localhost ~]# 
    

### 6.注册开机自启服务

#### 1\. 编写systemd服务单位文件

> 可将`docker.service`文件位置放置在以下位置中
>
>   1. `/etc/systemd/system/docker.service`
>   2. `/usr/lib/systemd/system/docker.service`
>

新建`docker.service`文件内容如下

命令：`vim /etc/systemd/system/docker.service`

    
    
    [Unit]
    Description=Docker Container Engine
    Documentation=https://docs.docker.com
    After=network-online.target firewalld.service
    Wants=network-online.target
    [Service]
    Type=notify
    ExecStart=/usr/bin/dockerd
    ExecReload=/bin/kill -s HUP $MAINPID
    LimitNOFILE=infinity
    LimitNPROC=infinity
    TimeoutStartSec=0
    Delegate=yes
    KillMode=process
    Restart=on-failure
    StartLimitBurst=4
    StartLimitInterval=60s
    [Install]
    WantedBy=multi-user.target
    

#### 2\. 授予可执行权限

    
    
    [root@localhost ~]# chmod +x /etc/systemd/system/docker.service
    

#### 3\. 重新加载system服务

    
    
    [root@localhost ~]# systemctl daemon-reload
    

#### 4\. 开启开机自启

    
    
    # 开启自启服务
    [root@localhost ~]# systemctl enable docker.service
    Created symlink /etc/systemd/system/multi-user.target.wants/docker.service → /etc/systemd/system/docker.service.
    [root@localhost ~]#
    

#### 5\. 启动docker引擎服务

    
    
    # 启动docker服务
    [root@localhost ~]# systemctl start docker.service
    

#### 6\. 查看启动状态

    
    
    [root@localhost ~]# systemctl status docker.service
    ● docker.service - Docker Container Engine
       Loaded: loaded (/etc/systemd/system/docker.service; enabled; vendor preset: disabled)
       Active: active (running) since Wed 2025-03-12 23:26:53 CST; 15s ago
         Docs: https://docs.docker.com
     Main PID: 47588 (dockerd)
        Tasks: 20
       Memory: 141.3M
       CGroup: /system.slice/docker.service
               ├─47588 /usr/bin/dockerd
               └─47597 containerd --config /var/run/docker/containerd/containerd.toml
    
    3月 12 23:26:52 localhost.localdomain dockerd[47588]: time="2025-03-12T23:26:52.008859066+08:00" level=info msg="[graphdrive>
    ...........
    3月 12 23:26:53 localhost.localdomain dockerd[47588]: time="2025-03-12T23:26:53.456414629+08:00" level=info msg="API listen >
    3月 12 23:26:53 localhost.localdomain systemd[1]: Started Docker Container Engine.
    lines 1-21/21 (END)
    

#### 7\. 执行docker命令

    
    
    [root@localhost ~]# docker images
    REPOSITORY   TAG       IMAGE ID   CREATED   SIZE
    
    [root@localhost ~]# docker ps
    CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES
    [root@localhost ~]#
    

## 4\. 安装docker-compose

### 1\. 拷贝资源

将下载好的`docker-compose-linux-x86_64`拷贝到`/usr/local/bin/docker-compose`目录下

    
    
    cp -f /opt/mysoftware/docker-compose-linux-x86_64 /usr/local/bin/docker-compose
    

### 2\. 授予执行权限

    
    
    chmod +x /usr/local/bin/docker-compose
    

### 3\. 查看

    
    
    [root@localhost]# docker-compose -v
    Docker Compose version v2.33.1
    

ux-x86_64`拷贝到`/usr/local/bin/docker-compose`目录下

    
    
    cp -f /opt/mysoftware/docker-compose-linux-x86_64 /usr/local/bin/docker-compose
    



