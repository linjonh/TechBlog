---
layout: post
title: "pc端通过python与arduino实现通信"
date: 2024-09-21 07:00:00 +0800
description: "最近想做个项目，利用python抓取网页信息数据，然后根据数据分析来控制arduino实现相应的动作"
keywords: "使用 python 实现与 arduino 的串口通信,并完成灯的亮度控制"
categories: ['未分类']
tags: ['通信', 'Python', 'Arduino']
artid: "105212813"
image:
  path: https://api.vvhan.com/api/bing?rand=sj&artid=105212813
  alt: "pc端通过python与arduino实现通信"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=105212813
featuredImagePreview: https://bing.ee123.net/img/rand?artid=105212813
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     pc端通过python与arduino实现通信
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
     最近想做个项目，利用python抓取网页信息数据，然后根据数据分析来控制arduino实现相应的动作操作，首先需要实现的是电脑端与arduino的通信。
     <br/>
     那么我们还是从最简单的点灯，实现电脑端与arduino的通信，控制LED灯一亮一灭。
    </p>
    <h2>
     <a id="_2">
     </a>
     一、软件安装
    </h2>
    <p>
     首先我们需要在电脑上安装python以及pycharm，相应的教程可以网上查找。
     <br/>
     pycharm安装可参考：
     <a href="https://www.51zxw.net/show.aspx?id=78219&amp;cid=711" rel="nofollow">
      https://www.51zxw.net/show.aspx?id=78219&amp;cid=711
     </a>
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/c56dd3e25acea201e41d405154e27790.png">
      <br/>
      安装完成后，最重要的一步是需要在pycharm上配置python运行环境。
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/392adfe5b31cf1885aca91f2e4f0b0df.png">
       <br/>
       <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/7559215990c3db8848b3b9ee76e56aa1.png">
        <br/>
        找到python.exe文件。
        <br/>
        <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/fc94d20bc363e4877c275a52efed54d8.png"/>
       </img>
      </img>
     </img>
    </p>
    <h2>
     <a id="_11">
     </a>
     二、模块安装
    </h2>
    <p>
     我们运行主要是通信，需要安装serial，但是python对应的模块是pyserial。在pycharm软件
     <strong>
      File-settings
     </strong>
     中找到
     <strong>
      Project Interpreter
     </strong>
     ，然后
     <strong>
      双击pip
     </strong>
     ，在弹出栏里面搜索
     <strong>
      pyserial
     </strong>
     ，找到后选中，点击
     <strong>
      Install package
     </strong>
     即可
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/2166d12d6809698fe38d9da59fcfa214.png"/>
    </p>
    <h2>
     <a id="_14">
     </a>
     三、通信测试
    </h2>
    <p>
     相应的软件环境已经准备完成，接下来我们来写一段程序，测试下串口通信功能。
     <br/>
     新建一个文件，输入下面代码：如果没有相应python基础可上网自学
     <br/>
     主要功能：
     <br/>
     1、检测是否有可用端口
     <br/>
     2、如果有可用端口，循环发送字符o和c，间隔1秒
    </p>
    <pre><code class="prism language-javascript"># coding<span class="token punctuation">:</span>utf<span class="token operator">-</span><span class="token number">8</span>

<span class="token keyword">import</span> serial<span class="token punctuation">.</span>tools<span class="token punctuation">.</span>list_ports
<span class="token keyword">import</span> time
plist <span class="token operator">=</span> <span class="token function">list</span><span class="token punctuation">(</span>serial<span class="token punctuation">.</span>tools<span class="token punctuation">.</span>list_ports<span class="token punctuation">.</span><span class="token function">comports</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>plist<span class="token punctuation">)</span> <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">:</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"没有发现端口!"</span><span class="token punctuation">)</span>
<span class="token keyword">else</span><span class="token punctuation">:</span>
plist_0 <span class="token operator">=</span> <span class="token function">list</span><span class="token punctuation">(</span>plist<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
serialName <span class="token operator">=</span> plist_0<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
serialFd <span class="token operator">=</span> serial<span class="token punctuation">.</span><span class="token function">Serial</span><span class="token punctuation">(</span>serialName<span class="token punctuation">,</span> <span class="token number">9600</span><span class="token punctuation">,</span> timeout<span class="token operator">=</span><span class="token number">60</span><span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"可用端口名&gt;&gt;&gt;"</span><span class="token punctuation">,</span> serialFd<span class="token punctuation">.</span>name<span class="token punctuation">)</span>
<span class="token keyword">while</span> <span class="token number">1</span><span class="token punctuation">:</span>
serialFd<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"o"</span><span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
time<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
serialFd<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>"c<span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
time<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
</code></pre>
<p>
用 arduionIDE 给 arduino 控制板上传接收程序：当收到字符 o（open 的缩写）LED 灯亮，收到字符 c（close 的缩写）LED 灯灭
</p>
<pre><code class="prism language-javascript"><span class="token keyword">const</span> int pinNumber <span class="token operator">=</span> <span class="token number">11</span><span class="token punctuation">;</span> <span class="token comment">//因为电路连接中用的是 11 好管脚作为输出</span>

<span class="token comment">//这里就是定义 开和关</span>
<span class="token keyword">void</span> <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span> <span class="token comment">//arduino 程序必须有的函数，用作初始化，设置管脚，调用库等等</span>
Serial<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token number">9600</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//这里要和树莓派中串口波特率一致</span>
<span class="token function">pinMode</span><span class="token punctuation">(</span>pinNumber<span class="token punctuation">,</span><span class="token constant">OUTPUT</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//将 10 号管脚状态设置为输出状态</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">loop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
char val <span class="token operator">=</span> Serial<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>val <span class="token operator">==</span> <span class="token string">'o'</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
<span class="token function">digitalWrite</span><span class="token punctuation">(</span>pinNumber<span class="token punctuation">,</span><span class="token constant">HIGH</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>val <span class="token operator">==</span> <span class="token string">'c'</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
<span class="token function">digitalWrite</span><span class="token punctuation">(</span>pinNumber<span class="token punctuation">,</span><span class="token constant">LOW</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>
上传成功后，运行代码
<br/>
<img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/e177884fcb2faaabec58a7ae93b01f60.png">
<br/>
然后就可以看到 LED 灯，一闪一闪了，现在通信部分原理跑通了，接下来就是爬取网络相应信息，做完处理后，给 arduino 发送控制信号即可
</img>
</p>
<p>
更多交流可加微信
<br/>
<img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/d282277c54bcde829839b0f8e30f4341.png"/>
</p>

   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f34333037333835322f:61727469636c652f64657461696c732f313035323132383133" class_="artid" style="display:none">
 </p>
</div>
