---
layout: post
title: "编程助手学Python-Deepseek对提示词自定义模板StringPromptTemplate的理解"
date: 2025-03-14 15:24:12 +0800
description: "主要功能核心属性和方法使用场景示例代码1. 基本用法2. 使用 f-string 格式3. 结合其他模板类高级用法1. 自定义模板格式2. 动态生成模板总结是一种用于生成字符串提示的模板类，通常用于构建基于语言模型的应用程序。它允许你定义一个包含占位符的字符串模板，并在运行时动态填充这些占位符，生成最终的提示文本。支持自定义模板格式（如 Jinja2）。# 使用 Jinja2 格式的模板template = \"请告诉我关于{{ subject }}的信息。它的应用领域包括{{ fields }}。"
keywords: "编程助手学Python--Deepseek对提示词自定义模板StringPromptTemplate的理解"
categories: ['编程助手学Python']
tags: ['开发语言', 'Python']
artid: "146258558"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146258558
    alt: "编程助手学Python-Deepseek对提示词自定义模板StringPromptTemplate的理解"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146258558
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146258558
cover: https://bing.ee123.net/img/rand?artid=146258558
image: https://bing.ee123.net/img/rand?artid=146258558
img: https://bing.ee123.net/img/rand?artid=146258558
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     编程助手学Python--Deepseek对提示词自定义模板StringPromptTemplate的理解
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
    </p>
    <p>
    </p>
    <p>
     <code>
      StringPromptTemplate
     </code>
     是一种用于生成字符串提示的模板类，通常用于构建基于语言模型的应用程序。它允许你定义一个包含占位符的字符串模板，并在运行时动态填充这些占位符，生成最终的提示文本。
    </p>
    <h4>
     <a id="_4">
     </a>
     主要功能
    </h4>
    <ol>
     <li>
      <strong>
       模板字符串
      </strong>
      ：定义一个包含占位符的字符串模板。
     </li>
     <li>
      <strong>
       变量填充
      </strong>
      ：在运行时将占位符替换为具体的值。
     </li>
     <li>
      <strong>
       灵活性
      </strong>
      ：支持多种格式的模板字符串（如 f-string、Jinja2 等）。
     </li>
    </ol>
    <hr/>
    <h4>
     <a id="_12">
     </a>
     核心属性和方法
    </h4>
    <ul>
     <li>
      <strong>
       <code>
        template
       </code>
      </strong>
      ：字符串模板，包含占位符（如
      <code>
       {variable}
      </code>
      ）。
     </li>
     <li>
      <strong>
       <code>
        input_variables
       </code>
      </strong>
      ：模板中需要填充的变量列表。
     </li>
     <li>
      <strong>
       <code>
        format(\**kwargs)
       </code>
      </strong>
      ：将模板中的占位符替换为传入的变量值，生成最终的字符串。
     </li>
    </ul>
    <hr/>
    <h4>
     <a id="_20">
     </a>
     使用场景
    </h4>
    <ul>
     <li>
      生成静态或动态提示文本。
     </li>
     <li>
      构建复杂的提示结构，结合多个变量。
     </li>
     <li>
      与其他模板类（如
      <code>
       ChatPromptTemplate
      </code>
      ）结合使用，生成多轮对话提示。
     </li>
    </ul>
    <hr/>
    <h4>
     <a id="_28">
     </a>
     示例代码
    </h4>
    <h5>
     <a id="1__30">
     </a>
     1. 基本用法
    </h5>
    <pre><code class="prism language-python"><span class="token keyword">from</span> langchain<span class="token punctuation">.</span>prompts <span class="token keyword">import</span> StringPromptTemplate

<span class="token comment"># 定义一个模板</span>
template <span class="token operator">=</span> <span class="token string">"请告诉我关于{subject}的信息。"</span>
prompt_template <span class="token operator">=</span> StringPromptTemplate<span class="token punctuation">(</span>input_variables<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">"subject"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> template<span class="token operator">=</span>template<span class="token punctuation">)</span>

<span class="token comment"># 填充变量</span>
prompt <span class="token operator">=</span> prompt_template<span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>subject<span class="token operator">=</span><span class="token string">"人工智能"</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>prompt<span class="token punctuation">)</span>
<span class="token comment"># 输出: "请告诉我关于人工智能的信息。"</span>
</code></pre>
    <h5>
     <a id="2__fstring__46">
     </a>
     2. 使用 f-string 格式
    </h5>
    <p>
     <code>
      StringPromptTemplate
     </code>
     支持 f-string 格式的模板字符串。
    </p>
    <pre><code class="prism language-python">template <span class="token operator">=</span> <span class="token string">"请告诉我关于{subject}的信息。它的应用领域包括{fields}。"</span>
prompt_template <span class="token operator">=</span> StringPromptTemplate<span class="token punctuation">(</span>input_variables<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">"subject"</span><span class="token punctuation">,</span> <span class="token string">"fields"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> template<span class="token operator">=</span>template<span class="token punctuation">)</span>

<span class="token comment"># 填充变量</span>
prompt <span class="token operator">=</span> prompt_template<span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>subject<span class="token operator">=</span><span class="token string">"人工智能"</span><span class="token punctuation">,</span> fields<span class="token operator">=</span><span class="token string">"机器学习、自然语言处理"</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>prompt<span class="token punctuation">)</span>
<span class="token comment"># 输出: "请告诉我关于人工智能的信息。它的应用领域包括机器学习、自然语言处理。"</span>
</code></pre>
    <h5>
     <a id="3__62">
     </a>
     3. 结合其他模板类
    </h5>
    <p>
     <code>
      StringPromptTemplate
     </code>
     可以与其他模板类（如
     <code>
      ChatPromptTemplate
     </code>
     ）结合使用，生成复杂的提示。
    </p>
    <p>
     python
    </p>
    <p>
     复制
    </p>
    <pre><code class="prism language-python"><span class="token keyword">from</span> langchain<span class="token punctuation">.</span>prompts <span class="token keyword">import</span> ChatPromptTemplate<span class="token punctuation">,</span> HumanMessagePromptTemplate

<span class="token comment"># 定义用户消息模板</span>
human_template <span class="token operator">=</span> HumanMessagePromptTemplate<span class="token punctuation">.</span>from_template<span class="token punctuation">(</span><span class="token string">"请告诉我关于{subject}的信息。"</span><span class="token punctuation">)</span>

<span class="token comment"># 定义聊天提示模板</span>
chat_prompt <span class="token operator">=</span> ChatPromptTemplate<span class="token punctuation">.</span>from_messages<span class="token punctuation">(</span><span class="token punctuation">[</span>human_template<span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token comment"># 填充变量</span>
prompt <span class="token operator">=</span> chat_prompt<span class="token punctuation">.</span>format_prompt<span class="token punctuation">(</span>subject<span class="token operator">=</span><span class="token string">"人工智能"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to_messages<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>prompt<span class="token punctuation">)</span>
<span class="token comment"># 输出: [HumanMessage(content='请告诉我关于人工智能的信息。')]</span>
</code></pre>
    <hr/>
    <h4>
     <a id="_87">
     </a>
     高级用法
    </h4>
    <h5>
     <a id="1__89">
     </a>
     1. 自定义模板格式
    </h5>
    <p>
     <code>
      StringPromptTemplate
     </code>
     支持自定义模板格式（如 Jinja2）。
    </p>
    <pre><code class="prism language-python"><span class="token keyword">from</span> langchain<span class="token punctuation">.</span>prompts <span class="token keyword">import</span> StringPromptTemplate

<span class="token comment"># 使用 Jinja2 格式的模板</span>
template <span class="token operator">=</span> <span class="token string">"请告诉我关于{<!-- -->{ subject }}的信息。它的应用领域包括{<!-- -->{ fields }}。"</span>
prompt_template <span class="token operator">=</span> StringPromptTemplate<span class="token punctuation">(</span>input_variables<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">"subject"</span><span class="token punctuation">,</span> <span class="token string">"fields"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> template<span class="token operator">=</span>template<span class="token punctuation">,</span> template_format<span class="token operator">=</span><span class="token string">"jinja2"</span><span class="token punctuation">)</span>

<span class="token comment"># 填充变量</span>
prompt <span class="token operator">=</span> prompt_template<span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>subject<span class="token operator">=</span><span class="token string">"人工智能"</span><span class="token punctuation">,</span> fields<span class="token operator">=</span><span class="token string">"机器学习、自然语言处理"</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>prompt<span class="token punctuation">)</span>
<span class="token comment"># 输出: "请告诉我关于人工智能的信息。它的应用领域包括机器学习、自然语言处理。"</span>
</code></pre>
    <h5>
     <a id="2__107">
     </a>
     2. 动态生成模板
    </h5>
    <p>
     你可以根据需要动态生成模板字符串。
    </p>
    <pre><code class="prism language-python"><span class="token keyword">def</span> <span class="token function">generate_template</span><span class="token punctuation">(</span>topic<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> <span class="token string-interpolation"><span class="token string">f"请告诉我关于</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>topic<span class="token punctuation">}</span></span><span class="token string">的信息。"</span></span>

template <span class="token operator">=</span> generate_template<span class="token punctuation">(</span><span class="token string">"人工智能"</span><span class="token punctuation">)</span>
prompt_template <span class="token operator">=</span> StringPromptTemplate<span class="token punctuation">(</span>input_variables<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> template<span class="token operator">=</span>template<span class="token punctuation">)</span>

<span class="token comment"># 生成提示</span>
prompt <span class="token operator">=</span> prompt_template<span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>prompt<span class="token punctuation">)</span>
<span class="token comment"># 输出: "请告诉我关于人工智能的信息。"</span>
</code></pre>
    <hr/>
    <h4>
     <a id="_127">
     </a>
     总结
    </h4>
    <p>
     <code>
      StringPromptTemplate
     </code>
     是一个灵活且强大的工具，适用于生成各种文本提示。它的核心功能包括：
    </p>
    <ul>
     <li>
      定义包含占位符的模板字符串。
     </li>
     <li>
      动态填充变量，生成最终的提示文本。
     </li>
     <li>
      支持多种模板格式（如 f-string、Jinja2 等）。
     </li>
    </ul>
    <p>
     通过与其他模板类（如
     <code>
      ChatPromptTemplate
     </code>
     ）结合使用，
     <code>
      StringPromptTemplate
     </code>
     可以构建复杂的提示结构，满足多轮对话或动态生成提示的需求。
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="6874747073:3a2f2f626c6f672e6373646e2e6e65742f73756e79616f782f:61727469636c652f64657461696c732f313436323538353538" class_="artid" style="display:none">
 </p>
</div>


