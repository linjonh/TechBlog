---
layout: post
title: "JVM-如何保证-Java-程序的安全性"
date: 2025-03-13 14:10:18 +0800
description: "JVM（Java Virtual Machine）在设计时就考虑了安全性，它提供了一套多层次的安全机制，以保护系统免受恶意代码的侵害。"
keywords: "JVM 如何保证 Java 程序的安全性？"
categories: ['Jvm', 'Java', '2025']
tags: ['Jvm', 'Java']
artid: "146009774"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146009774
    alt: "JVM-如何保证-Java-程序的安全性"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146009774
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146009774
cover: https://bing.ee123.net/img/rand?artid=146009774
image: https://bing.ee123.net/img/rand?artid=146009774
img: https://bing.ee123.net/img/rand?artid=146009774
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     JVM 如何保证 Java 程序的安全性？
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
     JVM（Java Virtual Machine）在设计时就考虑了安全性，它提供了一套多层次的安全机制，以保护系统免受恶意代码的侵害。这些机制主要包括：
    </p>
    <p>
     <strong>
      1. 类加载器 (ClassLoader) 及双亲委派模型:
     </strong>
    </p>
    <ul>
     <li>
      <strong>
       类加载器的作用：
      </strong>
      <ul>
       <li>
        负责加载 Java 类（.class 文件）到 JVM 中。
       </li>
       <li>
        将类的字节码转换为内存中的
        <code>
         Class
        </code>
        对象。
       </li>
       <li>
        执行类的初始化。
       </li>
      </ul>
     </li>
     <li>
      <strong>
       类加载器的类型：
      </strong>
      <ul>
       <li>
        <strong>
         启动类加载器 (Bootstrap Class Loader):
        </strong>
        加载 Java 核心类库 (rt.jar 等)。
       </li>
       <li>
        <strong>
         扩展类加载器 (Extension Class Loader):
        </strong>
        加载 Java 扩展类库 (ext 目录)。
       </li>
       <li>
        <strong>
         应用程序类加载器 (Application Class Loader):
        </strong>
        加载应用程序的类 (classpath)。
       </li>
       <li>
        <strong>
         自定义类加载器：
        </strong>
        开发者可以自定义类加载器，实现特殊的类加载逻辑。
       </li>
      </ul>
     </li>
     <li>
      <strong>
       双亲委派模型 (Parent Delegation Model):
      </strong>
      <ul>
       <li>
        <strong>
         工作原理：
        </strong>
        当一个类加载器需要加载类时，它首先会委托给它的父类加载器去加载。只有当父类加载器无法加载该类时（在其搜索范围内找不到该类），才由子类加载器尝试加载。
        <ul>
         <li>
          启动类加载器没有父加载器。
         </li>
        </ul>
       </li>
       <li>
        <strong>
         安全性作用：
        </strong>
        <ul>
         <li>
          <strong>
           防止核心类库被篡改：
          </strong>
          用户自定义的类加载器无法加载 Java 核心类库中的类（例如
          <code>
           java.lang.Object
          </code>
          ），因为核心类库总是由启动类加载器加载。这可以防止恶意代码替换核心类库，破坏 JVM 的安全性。
         </li>
         <li>
          <strong>
           避免类的重复加载：
          </strong>
          确保同一个类只被加载一次，避免命名冲突和安全问题。
         </li>
         <li>
          <strong>
           命名空间隔离
          </strong>
          : 不同的类加载器加载的类位于不同的命名空间，可以防止类名冲突。
         </li>
        </ul>
       </li>
      </ul>
     </li>
    </ul>
    <p>
     <strong>
      2. 字节码校验器 (Bytecode Verifier):
     </strong>
    </p>
    <ul>
     <li>
      <strong>
       作用：
      </strong>
      在类加载的链接阶段，字节码校验器会对加载的字节码进行校验，确保其符合 Java 虚拟机规范，并且不会执行非法操作。
     </li>
     <li>
      <strong>
       校验内容：
      </strong>
      <ul>
       <li>
        <strong>
         格式检查：
        </strong>
        检查字节码文件是否符合 .class 文件的格式规范。
       </li>
       <li>
        <strong>
         语义检查：
        </strong>
        检查字节码指令是否合法，例如：
        <ul>
         <li>
          类型检查：确保操作数栈上的数据类型与指令的要求一致。
         </li>
         <li>
          控制流检查：确保跳转指令的目标地址合法。
         </li>
         <li>
          方法调用检查：确保方法调用时的参数类型和数量正确。
         </li>
         <li>
          对象访问检查：确保对对象字段和方法的访问权限正确。
         </li>
         <li>
          确保不会跳转到方法体外.
         </li>
         <li>
          确保类型转换是安全的.
         </li>
        </ul>
       </li>
       <li>
        <strong>
         数据流分析：
        </strong>
        分析字节码指令的数据流，确保变量在使用前已初始化，并且不会发生类型错误。
       </li>
      </ul>
     </li>
     <li>
      <strong>
       安全性作用：
      </strong>
      <ul>
       <li>
        防止恶意代码执行非法操作，例如：
        <ul>
         <li>
          访问未授权的内存区域。
         </li>
         <li>
          绕过访问控制。
         </li>
         <li>
          破坏 JVM 的内部数据结构。
         </li>
         <li>
          执行无效的类型转换。
         </li>
        </ul>
       </li>
      </ul>
     </li>
    </ul>
    <p>
     <strong>
      3. 安全管理器 (Security Manager) 和访问控制器 (Access Controller):
     </strong>
    </p>
    <ul>
     <li>
      <strong>
       安全管理器 (Security Manager):
      </strong>
      <ul>
       <li>
        是一个 Java 类（
        <code>
         java.lang.SecurityManager
        </code>
        ），可以控制 Java 程序的访问权限。
       </li>
       <li>
        默认情况下，Java 应用程序（Application）不启用安全管理器，而 Java Applet 通常会运行在启用安全管理器的环境中。
       </li>
       <li>
        可以通过命令行参数
        <code>
         -Djava.security.manager
        </code>
        启用安全管理器。
       </li>
       <li>
        可以通过策略文件（policy file）配置安全策略。
       </li>
      </ul>
     </li>
     <li>
      <strong>
       访问控制器 (Access Controller):
      </strong>
      <ul>
       <li>
        是安全管理器的核心组件，负责执行访问控制检查。
       </li>
       <li>
        基于 Java 安全策略（security policy）来决定是否允许某个操作。
       </li>
       <li>
        Java 安全策略定义了不同代码来源（code source）的权限（permission）。
       </li>
      </ul>
     </li>
     <li>
      <strong>
       权限 (Permission):
      </strong>
      <ul>
       <li>
        表示对系统资源的访问权限，例如：
        <ul>
         <li>
          <code>
           java.io.FilePermission
          </code>
          : 文件读写权限。
         </li>
         <li>
          <code>
           java.net.SocketPermission
          </code>
          : 网络连接权限。
         </li>
         <li>
          <code>
           java.util.PropertyPermission
          </code>
          : 系统属性访问权限。
         </li>
         <li>
          <code>
           java.lang.RuntimePermission
          </code>
          : 运行时权限（例如，退出 JVM、修改安全管理器）。
         </li>
        </ul>
       </li>
      </ul>
     </li>
     <li>
      <strong>
       安全性作用：
      </strong>
      <ul>
       <li>
        限制 Java 程序的访问权限，防止恶意代码执行未经授权的操作，例如：
        <ul>
         <li>
          读取或修改敏感文件。
         </li>
         <li>
          建立网络连接。
         </li>
         <li>
          访问系统属性。
         </li>
         <li>
          加载本地库。
         </li>
         <li>
          退出 JVM。
         </li>
        </ul>
       </li>
      </ul>
     </li>
    </ul>
    <p>
     <strong>
      4. 沙箱模型 (Sandbox Model):
     </strong>
    </p>
    <ul>
     <li>
      <strong>
       概念：
      </strong>
      JVM 为 Java 程序提供了一个受限制的运行环境（沙箱），限制了程序对系统资源的访问。
     </li>
     <li>
      <strong>
       组成部分：
      </strong>
      类加载器、字节码校验器、安全管理器和访问控制器共同构成了 JVM 的沙箱模型。
     </li>
     <li>
      <strong>
       作用：
      </strong>
      将 Java 程序与底层操作系统隔离，防止恶意代码对系统造成损害。
     </li>
    </ul>
    <p>
     <strong>
      5. 其他安全机制：
     </strong>
    </p>
    <ul>
     <li>
      <strong>
       加密和安全通信：
      </strong>
      Java 提供了加密 API（JCE）和安全套接字层（SSL/TLS），用于实现数据的加密和安全通信。
     </li>
     <li>
      <strong>
       数字签名：
      </strong>
      Java 提供了数字签名 API，用于验证代码的来源和完整性。
     </li>
     <li>
      <strong>
       安全提供者 (Security Provider):
      </strong>
      Java 允许安装和配置不同的安全提供者，提供不同的安全算法和实现。
     </li>
    </ul>
    <p>
     <strong>
      总结：
     </strong>
    </p>
    <p>
     JVM 通过以下机制来保证 Java 程序的安全性：
    </p>
    <ul>
     <li>
      <strong>
       类加载器和双亲委派模型：
      </strong>
      防止核心类库被篡改，避免类的重复加载，命名空间隔离。
     </li>
     <li>
      <strong>
       字节码校验器：
      </strong>
      确保字节码的合法性和安全性，防止恶意代码执行非法操作。
     </li>
     <li>
      <strong>
       安全管理器和访问控制器：
      </strong>
      限制 Java 程序的访问权限，防止恶意代码访问系统资源。
     </li>
     <li>
      <strong>
       沙箱模型：
      </strong>
      将 Java 程序与底层操作系统隔离。
     </li>
     <li>
      <strong>
       加密、安全通信和数字签名：
      </strong>
      提供数据安全和代码完整性保护。
     </li>
    </ul>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f:2f626c6f672e6373646e2e6e65742f6e6d736f66746b6c622f:61727469636c652f64657461696c732f313436303039373734" class_="artid" style="display:none">
 </p>
</div>


