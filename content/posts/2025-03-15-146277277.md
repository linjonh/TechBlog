---
layout: post
title: "音视频入门基础RTP专题20通过FFprobe显示RTP流每个packet的信息"
date: 2025-03-15 13:51:05 +0800
description: "通过FFprobe显示RTP流每个packet的信息"
keywords: "音视频入门基础：RTP专题（20）——通过FFprobe显示RTP流每个packet的信息"
categories: ['音视频技术', 'Ffmpeg']
tags: ['音视频']
artid: "146277277"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146277277
    alt: "音视频入门基础RTP专题20通过FFprobe显示RTP流每个packet的信息"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146277277
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146277277
cover: https://bing.ee123.net/img/rand?artid=146277277
image: https://bing.ee123.net/img/rand?artid=146277277
img: https://bing.ee123.net/img/rand?artid=146277277
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     音视频入门基础：RTP专题（20）——通过FFprobe显示RTP流每个packet的信息
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p>
     通过FFprobe命令：
    </p>
    <pre><code class="language-bash">ffprobe -protocol_whitelist "file,rtp,udp" -of json -show_packets XXX.sdp</code></pre>
    <p>
     可以显示SDP描述的RTP流每个packet（数据包）的信息：
    </p>
    <p>
     <img alt="" height="559" src="https://i-blog.csdnimg.cn/direct/e0033a00cfd1491c9a228f6cb615189a.png" width="577"/>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
     对于RTP流，上述的“packet”（数据包）是指：该RTP Packet去掉RTP header后的数据，即RTP payload中的数据。
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
     其中：
    </p>
    <p>
     codec_type：该RTP Packet的payload中存贮的是视频还是音频数据。
    </p>
    <p>
    </p>
    <p>
     stream_index：该RTP Packet对应的这路流的流索引，即这路流是RTP流中的第几路音视频流。
    </p>
    <p>
    </p>
    <p>
     dts：该RTP Packet的以AVStream的time_base为单位的解码时间戳。
    </p>
    <p>
    </p>
    <p>
     dts_time：该RTP Packet的以秒为单位的解码时间戳。
    </p>
    <p>
    </p>
    <p>
     pts：该RTP Packet的以AVStream的time_base为单位的显示时间戳。该值是以其RTP header中的timestamp属性为基准计算出来的显示时间戳。
    </p>
    <p>
    </p>
    <p>
     pts_time：该RTP Packet的以秒为单位的显示时间戳。
    </p>
    <p>
    </p>
    <p>
     duration：即AVPacket结构体中的成员变量duration，为该RTP Packet占用的以AVStream的time_base为单位的时间值。
    </p>
    <p>
    </p>
    <p>
     duration_time：该RTP Packet占用的以秒为单位的时间值。
    </p>
    <p>
    </p>
    <p>
     size：即AVPacket结构体中的成员变量size，为AVPacket的成员变量data指向的缓冲区的大小。如果该RTP Packet的有效载荷类型为H.264，该值等于：RTP Packet的payload中的数据加上“0001”起始码的总长度。
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
     如果该RTP Packet的有效载荷类型为H.264：
    </p>
    <p>
     1.当有效载荷结构为Single NAL Unit Packet时，该RTP packet的有效载荷中只包含一个NALU，AVPacket的成员变量data存贮该RTP packet的payload加上“0001”（四字节）的起始码后的数据。
    </p>
    <p>
     2.当有效载荷结构为STAP-A时，该RTP packet的有效载荷中可能包含多个NALU，AVPacket的成员变量data存贮该RTP packet的payload中的每个NALU的数据（可能包含多个NALU，每个NALU的数据之间以“0001”分隔）。
    </p>
    <p>
     3.当有效载荷结构为FU-A，一个NALU可能会被分割成多个RTP  Packet，AVPacket的成员变量data存贮该FU-A的FU payload（前面加上“0001”的起始码）中的数据，即该NALU在该RTP  Packet中的分片数据。
    </p>
    <p>
     具体可以参考：《
     <a class="link-info" href="https://blog.csdn.net/u014552102/article/details/145989732?sharetype=blogdetail&amp;sharerId=145989732&amp;sharerefer=PC&amp;sharesource=u014552102&amp;spm=1011.2480.3001.8118" title="音视频入门基础：RTP专题（14）——FFmpeg源码中，对H.264的各种RTP有效载荷结构的解析">
      音视频入门基础：RTP专题（14）——FFmpeg源码中，对H.264的各种RTP有效载荷结构的解析
     </a>
     》。
    </p>
    <p>
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f:626c6f672e6373646e2e6e65742f753031343535323130322f:61727469636c652f64657461696c732f313436323737323737" class_="artid" style="display:none">
 </p>
</div>


