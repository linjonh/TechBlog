---
layout: post
title: "音视频入门基础RTP专题20通过FFprobe显示RTP流每个packet的信息"
date: 2025-03-15 13:51:05 +0800
description: "通过FFprobe显示RTP流每个packet的信息"
keywords: "音视频入门基础：RTP专题（20）——通过FFprobe显示RTP流每个packet的信息"
categories: ['音视频技术', 'Ffmpeg']
tags: ['音视频']
artid: "146277277"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146277277
    alt: "音视频入门基础RTP专题20通过FFprobe显示RTP流每个packet的信息"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146277277
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146277277
cover: https://bing.ee123.net/img/rand?artid=146277277
image: https://bing.ee123.net/img/rand?artid=146277277
img: https://bing.ee123.net/img/rand?artid=146277277
---

# 音视频入门基础：RTP专题（20）——通过FFprobe显示RTP流每个packet的信息

通过FFprobe命令：

    
    
    ffprobe -protocol_whitelist "file,rtp,udp" -of json -show_packets XXX.sdp

可以显示SDP描述的RTP流每个packet（数据包）的信息：

![](https://i-blog.csdnimg.cn/direct/e0033a00cfd1491c9a228f6cb615189a.png)

对于RTP流，上述的“packet”（数据包）是指：该RTP Packet去掉RTP header后的数据，即RTP payload中的数据。

其中：

codec_type：该RTP Packet的payload中存贮的是视频还是音频数据。

stream_index：该RTP Packet对应的这路流的流索引，即这路流是RTP流中的第几路音视频流。

dts：该RTP Packet的以AVStream的time_base为单位的解码时间戳。

dts_time：该RTP Packet的以秒为单位的解码时间戳。

pts：该RTP Packet的以AVStream的time_base为单位的显示时间戳。该值是以其RTP
header中的timestamp属性为基准计算出来的显示时间戳。

pts_time：该RTP Packet的以秒为单位的显示时间戳。

duration：即AVPacket结构体中的成员变量duration，为该RTP Packet占用的以AVStream的time_base为单位的时间值。

duration_time：该RTP Packet占用的以秒为单位的时间值。

size：即AVPacket结构体中的成员变量size，为AVPacket的成员变量data指向的缓冲区的大小。如果该RTP
Packet的有效载荷类型为H.264，该值等于：RTP Packet的payload中的数据加上“0001”起始码的总长度。

如果该RTP Packet的有效载荷类型为H.264：

1.当有效载荷结构为Single NAL Unit Packet时，该RTP
packet的有效载荷中只包含一个NALU，AVPacket的成员变量data存贮该RTP
packet的payload加上“0001”（四字节）的起始码后的数据。

2.当有效载荷结构为STAP-A时，该RTP packet的有效载荷中可能包含多个NALU，AVPacket的成员变量data存贮该RTP
packet的payload中的每个NALU的数据（可能包含多个NALU，每个NALU的数据之间以“0001”分隔）。

3.当有效载荷结构为FU-A，一个NALU可能会被分割成多个RTP Packet，AVPacket的成员变量data存贮该FU-A的FU
payload（前面加上“0001”的起始码）中的数据，即该NALU在该RTP Packet中的分片数据。

具体可以参考：《[音视频入门基础：RTP专题（14）——FFmpeg源码中，对H.264的各种RTP有效载荷结构的解析](https://blog.csdn.net/u014552102/article/details/145989732?sharetype=blogdetail&sharerId=145989732&sharerefer=PC&sharesource=u014552102&spm=1011.2480.3001.8118
"音视频入门基础：RTP专题（14）——FFmpeg源码中，对H.264的各种RTP有效载荷结构的解析")》。



