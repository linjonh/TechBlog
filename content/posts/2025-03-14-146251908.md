---
layout: post
title: "Springboot集成H2数据库"
date: 2025-03-14 11:02:43 +0800
description: "服务器模式：需要单独启动服务，类似mysql数据库，其他客户端可以连接。嵌入式模式：只能自己连接，其他客户端不能连接，可以通过浏览器查看数据。配置文件中分别是嵌入式模式、服务器模式、混合模式。记录Springboot集成H2数据库的几种模式。混合模式：不需要单独启动服务，其他客户端可以连接。"
keywords: "Springboot集成H2数据库"
categories: ['未分类']
tags: ['数据库', 'Spring', 'Java', 'Boot']
artid: "146251908"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146251908
    alt: "Springboot集成H2数据库"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146251908
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146251908
cover: https://bing.ee123.net/img/rand?artid=146251908
image: https://bing.ee123.net/img/rand?artid=146251908
img: https://bing.ee123.net/img/rand?artid=146251908
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Springboot集成H2数据库
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p>
     记录Springboot集成H2数据库的几种模式
    </p>
    <p>
     配置文件中分别是嵌入式模式、服务器模式、混合模式。
    </p>
    <p>
     嵌入式模式：只能自己连接，其他客户端不能连接，可以通过浏览器查看数据
    </p>
    <p>
     服务器模式：需要单独启动服务，类似mysql数据库，其他客户端可以连接
    </p>
    <p>
     混合模式：不需要单独启动服务，其他客户端可以连接
    </p>
    <p>
     yml文件内容如下：
    </p>
    <pre><code class="language-XML">spring:
  datasource:
    ## 嵌入式模式
#    url: jdbc:h2:file:D:\IdeaProjectsTB\Test\H2Test\src\main\resources\db\test
    ## 服务器模式
#    url: jdbc:h2:tcp://localhost:9092/D:\IdeaProjectsTB\Test\H2Test\src\main\resources\db\test
    ##混合模式
    url: jdbc:h2:D:\IdeaProjectsTB\Test\H2Test\src\main\resources\db\test;AUTO_SERVER=TRUE
    username: sa
    password: 123456
    driverClassName: org.h2.Driver
  h2:
    console:
      enabled: true</code></pre>
    <p>
     pom文件
    </p>
    <pre><code class="language-XML">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;
    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;

    &lt;groupId&gt;com.yueyue.h2&lt;/groupId&gt;
    &lt;artifactId&gt;H2Test&lt;/artifactId&gt;
    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;


    &lt;parent&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;
        &lt;version&gt;2.7.9&lt;/version&gt;
    &lt;/parent&gt;

    &lt;properties&gt;
        &lt;maven.compiler.source&gt;8&lt;/maven.compiler.source&gt;
        &lt;maven.compiler.target&gt;8&lt;/maven.compiler.target&gt;
        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;
    &lt;/properties&gt;

    &lt;dependencies&gt;
        &lt;!--web应用基本环境配置 --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
        &lt;/dependency&gt;
        &lt;!--h2--&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;com.h2database&lt;/groupId&gt;
            &lt;artifactId&gt;h2&lt;/artifactId&gt;
        &lt;/dependency&gt;
        &lt;!-- jdbc --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;
        &lt;/dependency&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;com.baomidou&lt;/groupId&gt;
            &lt;artifactId&gt;mybatis-plus-boot-starter&lt;/artifactId&gt;
            &lt;version&gt;3.5.10.1&lt;/version&gt;
        &lt;/dependency&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;
            &lt;artifactId&gt;lombok&lt;/artifactId&gt;
        &lt;/dependency&gt;


    &lt;/dependencies&gt;

&lt;/project&gt;</code></pre>
    <p>
     实体类
    </p>
    <pre><code class="language-java">package com.yueyue.h2.entity;

import com.baomidou.mybatisplus.annotation.IdType;
import com.baomidou.mybatisplus.annotation.TableId;
import com.baomidou.mybatisplus.annotation.TableName;
import lombok.Data;

@Data
@TableName("tb_user")
public class User {

    @TableId(type = IdType.AUTO)
    private Integer id;

    private String name;

    private Integer age;
}</code></pre>
    <p>
     mapper
    </p>
    <pre><code class="language-java">package com.yueyue.h2.mapper;

import com.baomidou.mybatisplus.core.mapper.BaseMapper;
import com.yueyue.h2.entity.User;

public interface UserMapper extends BaseMapper&lt;User&gt; {

}</code></pre>
    <p>
     controller
    </p>
    <pre><code class="language-java">package com.yueyue.h2.controller;


import com.yueyue.h2.entity.User;
import com.yueyue.h2.mapper.UserMapper;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.jdbc.core.JdbcTemplate;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

import java.util.List;

@RestController
@RequestMapping("/user")
public class UserController {

    @Autowired
    private JdbcTemplate jdbcTemplate;

    @Autowired
    private UserMapper userMapper;

    @PostMapping("/save")
    public String save(@RequestBody User user) {
//        String insertUserData = "insert into user(name,age) values (?,?)";
//        jdbcTemplate.update(insertUserData, user.getName(), user.getAge());


        userMapper.insert(user);

        return "success";
    }


//    @PostMapping("/list")
//    public List&lt;Map&lt;String, Object&gt;&gt; list() {
//        String selectUserData = "select * from user";
//        return jdbcTemplate.queryForList(selectUserData);
//    }
    @PostMapping("/list")
    public List&lt;User&gt; list() {
        return userMapper.selectList(null);
    }
}
</code></pre>
    <p>
     启动类
    </p>
    <pre><code class="language-java">package com.yueyue.h2;



import org.mybatis.spring.annotation.MapperScan;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.CommandLineRunner;
import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.jdbc.core.JdbcTemplate;

import java.util.List;
import java.util.Map;


@MapperScan("com.yueyue.h2.mapper")
@SpringBootApplication
public class Application implements CommandLineRunner {


    @Autowired
    private JdbcTemplate jdbcTemplate;

    public static void main(String[] args) {
        SpringApplication.run(Application.class, args);
    }


    public void run(String... args) throws Exception {

    }



}
</code></pre>
    <p>
     测试结果
    </p>
    <p>
     <img alt="" height="724" src="https://i-blog.csdnimg.cn/direct/d02692b397f24dd79869128078069f2d.png" width="1427"/>
    </p>
    <p>
     <img alt="" height="884" src="https://i-blog.csdnimg.cn/direct/03adb63775174b3d9e1a35d7c7ab0232.png" width="1461"/>
    </p>
    <p>
     代码地址
    </p>
    <p>
     <a href="https://gitee.com/840312696/h2Test.git" rel="nofollow" title="yueyue840312696/H2测试代码">
      yueyue840312696/H2测试代码
     </a>
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f6c703834303331323639362f:61727469636c652f64657461696c732f313436323531393038" class_="artid" style="display:none">
 </p>
</div>


