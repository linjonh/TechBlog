---
layout: post
title: "uniapp在微信小程序中使用-ECharts"
date: 2025-01-12 10:48:13 +0800
description: "uniapp使用Echartsuniapp在微信小程序中使用 ECharts可以参照mpvue-ec"
keywords: "小程序 echarts.setcanvascreator(() => canvas)什么时候执行"
categories: ['Uniapp', 'Echarts']
tags: ['数据可视化', 'Canvas']
artid: "107520566"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=107520566
    alt: "uniapp在微信小程序中使用-ECharts"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=107520566
featuredImagePreview: https://bing.ee123.net/img/rand?artid=107520566
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     uniapp在微信小程序中使用 ECharts
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h2>
     <a id="uniapp_ECharts_1">
     </a>
     uniapp在微信小程序中使用 ECharts
    </h2>
    <p>
     今天使用uniapp集成Echarts，实现地图图表的展示
    </p>
    <h3>
     <a id="mpvueecharts_5">
     </a>
     可以参照mpvue-echarts
    </h3>
    <p>
     参照：https://github.com/F-loat/mpvue-echarts
    </p>
    <p>
     https://ask.dcloud.net.cn/article/36288
    </p>
    <h3>
     <a id="_10">
     </a>
     进行改进
    </h3>
    <p>
     网上有很多教程，但都说的不是很明白，下面直接上步骤
    </p>
    <h4>
     <a id="1npm_install_echarts_mpvueecharts_13">
     </a>
     1、npm install echarts mpvue-echarts
    </h4>
    <p>
     执行该命令后，会在node_modules下生成mpvue-echarts、echarts，然后把mpvue-echarts下的src放到components下，然后在
     <a href="https://echarts.apache.org/zh/builder.html" rel="nofollow">
      https://echarts.apache.org/zh/builder.html
     </a>
     定制echarts的js文件，如下图：
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/5702c7db3b179ee1e0f231cf18db3c1e.png"/>
    </p>
    <h3>
     <a id="_15">
     </a>
     地图实现：
    </h3>
    <pre><code>&lt;template&gt;
	&lt;view class="wrap" &gt;
		&lt;mpvue-echarts id="main" ref="mapChart" :echarts="echarts" @onInit="renderMap" /&gt;
	&lt;/view&gt;
&lt;/template&gt;

&lt;script&gt;
import * as echarts from '@/common/echarts.min'; /*chart.min.js为在线定制*/
import * as henanJson from 'echarts/map/json/province/henan.json'; /*chart.min.js为在线定制*/
import mpvueEcharts from '@/components/mpvue-echarts/src/echarts.vue';


export default {
	data() {
		return {
			echarts,
		};
	},
	components: {
		mpvueEcharts
	},
	onLoad() {
		
	},
	methods: {
		renderMap(e) {
			var mydata = [
				{ name: '郑州市', value: 100 },
				{ name: '洛阳市', value: 10 },
				{ name: '开封市', value: 20 },
				{ name: '信阳市', value: 30 },
				{ name: '驻马店市', value: 40 },
				{ name: '南阳市', value: 41 },
				{ name: '周口市', value: 15 },
				{ name: '许昌市', value: 25 },
				{ name: '平顶山市', value: 35 },
				{ name: '新乡市', value: 35 },
				{ name: '漯河市', value: 35 },
				{ name: '商丘市', value: 35 },
				{ name: '三门峡市', value: 35 },
				{ name: '济源市', value: 35 },
				{ name: '焦作市', value: 35 },
				{ name: '安阳市', value: 35 },
				{ name: '鹤壁市', value: 35 },
				{ name: '濮阳市', value: 35 },
				{ name: '开封市', value: 45 }
			];
			let { canvas, width, height } = e;
			echarts.setCanvasCreator(() =&gt; canvas);
			const chart = echarts.init(canvas, null, {
				width: width,
				height: height
			});
			echarts.registerMap('henan', henanJson);
			canvas.setChart(chart);
			var optionMap = {
				tooltip: {
					trigger: 'item',
					formatter: '{b}: {c}mg/m³'
				},
				//左侧小导航图标
				visualMap: {
					show:true,
					min: 0,
					max: 100,
					left: 'right',
					orient:'horizontal',
				},
				//配置属性
				series: [
					{
						type: 'map',
						mapType: 'henan',
						label: {
							normal: {
								show: true
							},
							emphasis: {
								textStyle: {
									color: '#fff'
								}
							}
						},
						itemStyle: {
							normal: {
								borderColor: '#389BB7',
								areaColor: '#fff'
							},
							emphasis: {
								areaColor: '#389BB7',
								borderWidth: 0
							}
						},
						animation: false,
						data: mydata //数据
					}
				]
			};
			//初始化echarts实例
			chart.setOption(optionMap);
			this.$refs.mapChart.setChart(chart);
		}
	}
};
&lt;/script&gt;

&lt;style scoped lang="scss"&gt;
.wrap {
  width: 100%;
  height: 400px;
}
&lt;/style&gt;

</code></pre>
    <h3>
     <a id="httpsimgblogcsdnimgcn20200722185554329pngxossprocessimagewatermarktype_ZmFuZ3poZW5naGVpdGkshadow_10text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3d4aDk1ODU0ODEyOQsize_16color_FFFFFFt_70_132">
     </a>
     效果：
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/d173ec117728d28f0f238add6fdf09fd.png"/>
    </h3>
    <p>
     关于地图的json文件，在echarts里面 echarts\map
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c:6f672e6373646e2e6e65742f7778683935383534383132392f:61727469636c652f64657461696c732f313037353230353636" class_="artid" style="display:none">
 </p>
</div>


