---
layout: post
title: "独角数卡对接蓝鲸支付平台实现个人"
date: 2025-09-07T22:41:42+0800
description: "独角数卡是一款基于Laravel的开源自动化售货系统，专为虚拟商品销售设计。本文提供了安装部署教程：1）创建目录并配置环境变量；2）通过Docker容器运行；3）介绍支付对接（以蓝鲸支付为例）。同时指出系统存在支付回调参数获取错误的BUG，给出了修复方法：修改VpayController.php文件并重启服务。教程包含详细命令和配置示例，帮助用户快速搭建个人发卡收款平台。"
keywords: "独角数卡对接蓝鲸支付平台实现个人"
categories: ['未分类']
tags: ['蓝鲸支付', '独角数卡', 'Dujiaoka']
artid: "151296265"
arturl: "https://blog.csdn.net/kuangni5808/article/details/151296265"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=151296265
    alt: "独角数卡对接蓝鲸支付平台实现个人"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=151296265
featuredImagePreview: https://bing.ee123.net/img/rand?artid=151296265
cover: https://bing.ee123.net/img/rand?artid=151296265
image: https://bing.ee123.net/img/rand?artid=151296265
img: https://bing.ee123.net/img/rand?artid=151296265
---



# 独角数卡对接蓝鲸支付平台实现个人

## 什么是独角数卡？

‌ ‌ ‌ ‌ ‌ ‌ ‌ 独角数卡(Dujiaoka)‌是一款基于Laravel框架开发的开源式站长自动化售货解决方案，主要用于虚拟商品和数字产品的在线销售管理。

## 安装部署教程

独角数卡对接蓝鲸支付平台实现个人发卡收款

### 一、独角数卡安装

```powershell
# 创建挂载目录
mkdir -p /opt/dujiaoka/{uploads,storage}
# 初始配置文件
vi /opt/dujiaoka/.env

```

复制如下内容  
 https://github.com/assimon/dujiaoka/blob/master/.env

```powershell
APP_NAME=独角数卡
APP_ENV=local
APP_KEY=base64:hDVkYhfkUjaePiaI1tcBT7G8bh2A8RQxwWIGkq7BO18=
APP_DEBUG=true
APP_URL=http://dujiaoka.test

LOG_CHANNEL=stack

# 数据库配置
DB_CONNECTION=mysql
DB_HOST=127.0.0.1
DB_PORT=3306
DB_DATABASE=
DB_USERNAME=
DB_PASSWORD=

# redis配置
REDIS_HOST=127.0.0.1
REDIS_PASSWORD=
REDIS_PORT=6379

BROADCAST_DRIVER=log
SESSION_DRIVER=file
SESSION_LIFETIME=120


# 缓存配置
# file为磁盘文件  redis为内存级别
# redis为内存需要安装好redis服务端并配置
CACHE_DRIVER=file

# 异步消息队列
# sync为同步  redis为异步
# 使用redis异步需要安装好redis服务端并配置
QUEUE_CONNECTION=redis

# 后台语言
## zh_CN 简体中文
## zh_TW 繁体中文
## en    英文
DUJIAO_ADMIN_LANGUAGE=zh_CN

# 后台登录地址
ADMIN_ROUTE_PREFIX=/admin

```

运行

```powershell
chmod 777 /opt/dujiaoka/.env

docker run -d \
    --name dujiaoka \
    -p 80:80 \
    -v /opt/dujiaoka/.env:/dujiaoka/.env \
    -v /opt/dujiaoka/uploads:/dujiaoka/public/uploads \
    -v /opt/dujiaoka/storage:/dujiaoka/storage \
    docker.aeert.com/dujiaoka:latest

```

### 二、独角数卡支付配置

![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/a02e9ef7bf4f49f19ff7c1f5a525aff5.png)

### 三、独角数卡BUG修复

该接口参数获取有误，导致用户付款后无法正确查看卡密  
 ![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/23f697c0f6ff4dc1b6cb802f0dd2a29e.png)

```powershell
docker exec -ti dujiaoka /bin/bash

vi app/Http/Controllers/Pay/VpayController.php

# 在图示位置增加下方代码
$oid = explode("?", $oid)[0];

# 重启服务
docker restart dujiaoka

```

![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/6f1cfccfdaf8401597463d9fd013eb80.png)



