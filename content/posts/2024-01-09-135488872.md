---
layout: post
title: "K6-性能测试教程入门介绍,环境搭建和编写第一个-K6-测试脚本"
date: 2024-01-09 20:22:52 +0800
description: "这篇文章将带您进入 K6 性能测试的世界。博文内容涵盖了 K6 性能测试的入门知识、环境搭建步骤，以"
keywords: "grafana k6"
categories: ['软件测试', '职场经验', 'It']
tags: ['软件测试', '自动化测试', '职场经验', '程序员', '程序人生', '测试脚本', '性能测试']
artid: "135488872"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=135488872
    alt: "K6-性能测试教程入门介绍,环境搭建和编写第一个-K6-测试脚本"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=135488872
featuredImagePreview: https://bing.ee123.net/img/rand?artid=135488872
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     K6 性能测试教程：入门介绍，环境搭建和编写第一个 K6 测试脚本
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-tomorrow-night-eighties" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/e78e6a070e17444df2a71bff8f11fd01.png#pic_center">
      <a href="https://blog.csdn.net/AI_Green/article/details/134931243?spm=1001.2014.3001.5501">
       <strong>
        2024软件测试面试刷题，这个小程序（永久刷题），靠它快速找到工作了！（刷题APP的天花板）
       </strong>
      </a>
     </img>
    </p>
    <p>
     <strong>
      K6 性能测试教程：入门介绍，环境搭建和编写第一个 K6 测试脚本
     </strong>
    </p>
    <p>
     这篇文章将带您进入 K6 性能测试的世界。博文内容涵盖了 K6 性能测试的入门知识、环境搭建步骤，以及如何编写您的第一个测试脚本。无论您是初学者还是有经验的性能测试专业人员，这篇教程都将为您提供清晰的指导，帮助您快速上手 K6，并开始构建高效的性能测试脚本
    </p>
    <h3>
     <a id="_K6_7">
     </a>
     什么是 K6
    </h3>
    <p>
     k6 是一款用于性能测试和负载测试的开源工具，主要用于评估和验证应用程序的性能和稳定性。以下是关于 k6 的一些主要特点和信息：
    </p>
    <ol>
     <li>
      <p>
       开源性： k6 是一款完全开源的性能测试工具，代码存储在 GitHub 上。这意味着用户可以自由访问、使用和修改工具的源代码。
      </p>
     </li>
     <li>
      <p>
       JavaScript 编写脚本： k6 使用 JavaScript 语言编写测试脚本，这使得编写测试用例相对简单，并且对于开发人员而言更加友好。脚本可以包含 HTTP 请求、WebSocket 连接、脚本执行逻辑等。
      </p>
     </li>
     <li>
      <p>
       支持多种协议： k6 支持多种常见的协议，包括 HTTP、WebSocket、Socket.IO、gRPC 等，使其可以广泛应用于各种类型的应用程序。
      </p>
     </li>
     <li>
      <p>
       分布式测试： k6 具有分布式测试的能力，允许在多个节点上运行测试，从而模拟更真实的生产环境负载。
      </p>
     </li>
     <li>
      <p>
       实时结果和报告： k6 提供实时结果，包括请求响应时间、吞吐量等，并能够生成详细的 HTML 报告，帮助用户更好地理解应用程序的性能状况。
      </p>
     </li>
     <li>
      <p>
       容器化支持： k6 适应容器化环境，可以轻松集成到 CI/CD 流水线中，并与常见的容器编排工具（如 Kubernetes）配合使用。
      </p>
     </li>
     <li>
      <p>
       插件生态系统： k6 支持插件，用户可以通过插件扩展其功能，满足特定需求。
      </p>
     </li>
     <li>
      <p>
       活跃的社区： 由于 k6 是一个开源项目，拥有一个积极的社区，提供支持、文档和示例，使用户更容易上手和解决问题。
      </p>
     </li>
    </ol>
    <p>
     总体而言，k6 是一个灵活、强大且易于使用的性能测试工具，适用于各种规模的应用程序和系统。
    </p>
    <h3>
     <a id="_29">
     </a>
     官方网站及文档
    </h3>
    <p>
     • 官方网站
    </p>
    <p>
     • 官方文档
    </p>
    <h3>
     <a id="_35">
     </a>
     安装
    </h3>
    <h3>
     <a id="Mac__37">
     </a>
     Mac 系统安装
    </h3>
    <p>
     Mac 系统可以通过 Homebrew 安装 k6：
    </p>
    <p>
     brew install k6
    </p>
    <h3>
     <a id="Windows__43">
     </a>
     Windows 系统安装
    </h3>
    <p>
     Windows 系统可以通过 Chocolatey 安装 k6：
    </p>
    <p>
     choco install k6
    </p>
    <p>
     或者通过 winget 安装 k6：
    </p>
    <p>
     winget install k6
    </p>
    <h3>
     <a id="Docker__53">
     </a>
     Docker 安装
    </h3>
    <p>
     k6 也可以通过 Docker 安装：
    </p>
    <p>
     docker pull grafana/k6
    </p>
    <h3>
     <a id="_59">
     </a>
     其他系统安装
    </h3>
    <p>
     K6 除了支持上述系统外，还支持 Linux（Debian/Ubuntu/Fedora/CentOS），也支持下载 K6 二进制文件和 K6 扩展进行安装，具体安装方式请参考官方文档。
    </p>
    <h3>
     <a id="_K6__63">
     </a>
     确认 K6 安装成功
    </h3>
    <p>
     安装完成后，可以通过以下命令确认 k6 是否安装成功：
    </p>
    <h3>
     <a id="k6_version_67">
     </a>
     k6 version
    </h3>
    <p>
     如果安装成功，会显示 k6 的版本信息：
    </p>
    <p>
     <img alt="图片" src="https://i-blog.csdnimg.cn/blog_migrate/3c40d539eaa89fdc7d327177be597e8e.png"/>
    </p>
    <h3>
     <a id="_K6__74">
     </a>
     第一个 K6 测试脚本
    </h3>
    <h3>
     <a id="_76">
     </a>
     编写第一个测试脚本
    </h3>
    <p>
     <strong>
      新建一个 K6 性能测试项目目录并进入
     </strong>
    </p>
    <p>
     mkdir k6-demo
    </p>
    <p>
     cd k6-demo
    </p>
    <p>
     <strong>
      创建一个名为 demo.js 的文件，用于编写测试脚本
     </strong>
    </p>
    <p>
     • 可以通过 k6 new 命令创建一个测试脚本文件：
    </p>
    <p>
     k6 new demo.js
    </p>
    <p>
     • 也可以直接创建一个名为 demo.js 的测试脚本文件
    </p>
    <p>
     touch demo.js
    </p>
    <p>
     <strong>
      编辑测试脚本
     </strong>
    </p>
    <p>
     如果是通过 k6 new 命令创建的测试脚本文件，会自动生成一个简单的测试脚本，如下所示：
    </p>
    <pre><code class="prism language-bash"><span class="token function">import</span> http from <span class="token string">'k6/http'</span><span class="token punctuation">;</span>
<span class="token function">import</span> <span class="token punctuation">{<!-- --></span> <span class="token function">sleep</span> <span class="token punctuation">}</span> from <span class="token string">'k6'</span><span class="token punctuation">;</span>

<span class="token builtin class-name">export</span> const options <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  // A number specifying the number of VUs to run concurrently.
  vus: <span class="token number">10</span>,
  // A string specifying the total duration of the <span class="token builtin class-name">test</span> run.
  duration: <span class="token string">'30s'</span>,

  // The following section contains configuration options <span class="token keyword">for</span> execution of this
  // <span class="token builtin class-name">test</span> script <span class="token keyword">in</span> Grafana Cloud.
  //
  // See https://grafana.com/docs/grafana-cloud/k6/get-started/run-cloud-tests-from-the-cli/
  // to learn about authoring and running k6 <span class="token builtin class-name">test</span> scripts <span class="token keyword">in</span> Grafana k6 Cloud.
  //
  // ext: <span class="token punctuation">{<!-- --></span>
  //   loadimpact: <span class="token punctuation">{<!-- --></span>
  //     // The ID of the project to <span class="token function">which</span> the <span class="token builtin class-name">test</span> is assigned <span class="token keyword">in</span> the k6 Cloud UI.
  //     // By default tests are executed <span class="token keyword">in</span> default project.
  //     projectID: <span class="token string">""</span>,
  //     // The name of the <span class="token builtin class-name">test</span> <span class="token keyword">in</span> the k6 Cloud UI.
  //     // Test runs with the same name will be grouped.
  //     name: <span class="token string">"demo.js"</span>
  //   <span class="token punctuation">}</span>
  // <span class="token punctuation">}</span>,

  // Uncomment this section to <span class="token builtin class-name">enable</span> the use of Browser API <span class="token keyword">in</span> your tests.
  //
  // See https://grafana.com/docs/k6/latest/using-k6-browser/running-browser-tests/ to learn <span class="token function">more</span>
  // about using Browser API <span class="token keyword">in</span> your <span class="token builtin class-name">test</span> scripts.
  //
  // scenarios: <span class="token punctuation">{<!-- --></span>
  //   // The scenario name appears <span class="token keyword">in</span> the result summary, tags, and so on.
  //   // You can give the scenario any name, as long as each name <span class="token keyword">in</span> the script is unique.
  //   ui: <span class="token punctuation">{<!-- --></span>
  //     // Executor is a mandatory parameter <span class="token keyword">for</span> browser-based tests.
  //     // Shared iterations <span class="token keyword">in</span> this <span class="token keyword">case</span> tells k6 to reuse VUs to execute iterations.
  //     //
  //     // See https://grafana.com/docs/k6/latest/using-k6/scenarios/executors/ <span class="token keyword">for</span> other executor types.
  //     executor: <span class="token string">'shared-iterations'</span>,
  //     options: <span class="token punctuation">{<!-- --></span>
  //       browser: <span class="token punctuation">{<!-- --></span>
  //         // This is a mandatory parameter that instructs k6 to launch and
  //         // connect to a chromium-based browser, and use it to run UI-based
  //         // tests.
  //         type: <span class="token string">'chromium'</span>,
  //       <span class="token punctuation">}</span>,
  //     <span class="token punctuation">}</span>,
  //   <span class="token punctuation">}</span>,
  // <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

// The <span class="token keyword">function</span> that defines VU logic.
//
// See https://grafana.com/docs/k6/latest/examples/get-started-with-k6/ to learn <span class="token function">more</span>
// about authoring k6 scripts.
//
<span class="token builtin class-name">export</span> default <span class="token function-name function">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  http.get<span class="token punctuation">(</span><span class="token string">'https://test.k6.io'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  sleep<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     如果是直接创建的测试脚本文件，可以将上述内容复制到 demo.js 文件中。
    </p>
    <h3>
     <a id="_164">
     </a>
     运行测试脚本
    </h3>
    <p>
     在 demo.js 文件所在目录下，运行以下命令：
    </p>
    <p>
     k6 run demo.js
    </p>
    <h3>
     <a id="_170">
     </a>
     查看测试结果
    </h3>
    <p>
     如果一切正常，会看到类似如下的输出：
    </p>
    <p>
     <img alt="图片" src="https://i-blog.csdnimg.cn/blog_migrate/f15e1c583e12983fbaad2d2a3cbf1a03.png"/>
    </p>
    <p>
     包含以下信息：
    </p>
    <p>
     • execution: 执行信息，包括开始时间、结束时间、持续时间、VU 数量、迭代次数等。
    </p>
    <p>
     • scenarios: 场景信息，包括场景名称、VU 数量、迭代次数、持续时间、平均响应时间、吞吐量等。
    </p>
    <p>
     • http_reqs: HTTP 请求信息，包括请求名称、请求数量、失败数量、平均响应时间、吞吐量等。
    </p>
    <h3>
     <a id="_demo__184">
     </a>
     解析 demo 测试脚本
    </h3>
    <p>
     • import http from ‘k6/http’;：导入 k6 的 HTTP 模块，用于发送 HTTP 请求。
    </p>
    <p>
     • import { sleep } from ‘k6’;：导入 k6 的 sleep 方法，用于执行脚本等待。
    </p>
    <p>
     • export const options = { … }：定义测试脚本的配置项，包括 VU 数量、持续时间等。
    </p>
    <p>
     • vus: 10,：定义 VU 数量为 10（指定并发运行的 VU 数量）。
    </p>
    <p>
     • duration: ‘30s’,：定义持续时间为 30 秒（指定测试运行总持续时间）。
    </p>
    <p>
     • export default function() { … }：定义测试脚本的逻辑，包括发送 HTTP 请求、执行等待等。
    </p>
    <p>
     • http.get(‘https://test.k6.io’);：发送一个 GET 请求到 https://test.k6.io。
    </p>
    <p>
     • sleep(1);：执行等待 1 秒。
    </p>
    <p>
     其他注释内容可以忽略，这些内容是关于 k6 的一些高级功能，后续会介绍。
    </p>
    <h3>
     <a id="_204">
     </a>
     参考文档
    </h3>
    <p>
     • K6 文档：https://k6.io/docs/
    </p>
    <p>
     • k6 官方网站：https://k6.io/
    </p>
    <p>
     • K6 性能测试快速启动项目：https://github.com/Automation-Test-Starter/K6-Performance-Test-starter/
    </p>
    <p>
     行动吧，在路上总比一直观望的要好，未来的你肯定会感谢现在拼搏的自己！如果想学习提升找不到资料，没人答疑解惑时，
     <strong>
      请及时加入群： 786229024
     </strong>
     ，里面有各种测试开发资料和技术可以一起交流哦。
    </p>
    <p>
     <strong>
      最后：
     </strong>
     下方这份完整的软件测试视频教程已经整理上传完成，需要的朋友们可以自行领取
     <strong>
      <code>
       【保证100%免费】
      </code>
     </strong>
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/bd86c6ea22b41febc3e70105b9d0dd32.png#pic_center"/>
    </p>
    <h3>
     <a id="_221">
     </a>
     软件测试面试文档
    </h3>
    <p>
     我们学习必然是为了找到高薪的工作，下面这些面试题是来自阿里、腾讯、字节等一线互联网大厂最新的面试资料，并且有字节大佬给出了权威的解答，刷完这一套面试资料相信大家都能找到满意的工作。
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/82023f4fcb308f25cb9a33f27f62ed7d.png#pic_center">
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/b45e2be4c834bcc7f4e6b61f255495e2.png#pic_center">
       <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/e85c85186bf46df110b6b905fa5e8ddb.gif#pic_center"/>
      </img>
     </img>
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
  <div class="blog-extension-box" id="blogExtensionBox" style="width:400px;margin:auto;margin-top:12px">
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f6d305f36373639353731372f:61727469636c652f64657461696c732f313335343838383732" class_="artid" style="display:none">
 </p>
</div>


