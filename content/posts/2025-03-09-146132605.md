---
layout: post
title: "彻底解决-k8s-xxx-命名空间卡在-Terminating-的问题"
date: 2025-03-09 15:22:56 +0800
description: "彻底解决 k8s   xxx  命名空间卡在 ​Terminating 的问题"
keywords: "彻底解决 k8s xxx 命名空间卡在 ​Terminating 的问题"
categories: ['Kubenetes']
tags: ['命名空间卡在', 'Termin', 'Kubernetes', 'K']
artid: "146132605"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146132605
    alt: "彻底解决-k8s-xxx-命名空间卡在-Terminating-的问题"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146132605
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146132605
cover: https://bing.ee123.net/img/rand?artid=146132605
image: https://bing.ee123.net/img/rand?artid=146132605
img: https://bing.ee123.net/img/rand?artid=146132605
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     彻底解决 k8s xxx 命名空间卡在 ​Terminating 的问题
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h4>
     <a id="_0">
     </a>
     前言
    </h4>
    <p>
     在 Kubernetes 集群管理中，命名空间（Namespace）卡在
     <strong>
      Terminating
     </strong>
     状态是一个常见但棘手的问题。这种状态通常由资源残留、Finalizers 未完成清理或控制器异常导致。本文将结合实践案例和底层原理，提供一套完整的解决方案，彻底解决此类问题。
    </p>
    <hr/>
    <h4>
     <a id="_6">
     </a>
     一。问题现场
    </h4>
    <p>
     问题截图如下
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/1bbd482d64c04a589d0f012d41e6829d.png"/>
    </p>
    <p>
     另外 k8s中 命名空间（Namespace）卡在
     <strong>
      Terminating
     </strong>
     状态 可能还会导致以下问题
    </p>
    <h5>
     <a id="1__14">
     </a>
     1. ​集群网络功能异常
    </h5>
    <p>
     若卡在 ​Terminating 的命名空间属于网络插件（如 Calico），可能导致：
    </p>
    <p>
     ​Pod 网络中断：新创建的 Pod 无法分配 IP 地址，跨节点通信失败。
     <br/>
     ​网络策略失效：安全策略（如 NetworkPolicy）无法生效，集群暴露于未授权的访问风险中。
     <br/>
     ​服务发现异常：依赖网络的服务（如 CoreDNS）无法正常工作，导致服务间无法解析域名。
    </p>
    <h5>
     <a id="2__20">
     </a>
     2. 资源泄漏与控制器冲突
    </h5>
    <p>
     ​资源占用：残留的 CRD（自定义资源）、ServiceAccount 等资源持续占用集群资源（如 IP 池、存储卷）。
     <br/>
     ​控制器逻辑混乱：重新部署同类组件时，新旧资源可能因同名 CRD 冲突，触发控制器崩溃或死锁。
     <br/>
     ​Finalizers 死锁：命名空间的 finalizers 字段未释放，可能阻塞其他资源的删除操作（如 PV/PVC）。
    </p>
    <h5>
     <a id="3__24">
     </a>
     3. ​集群维护与升级受阻
    </h5>
    <p>
     ​运维复杂性增加：残留命名空间可能干扰后续组件的升级或迁移流程，导致部署失败。
     <br/>
     ​监控误报：监控系统（如 Prometheus）可能因残留的指标端点持续告警，干扰运维判断。
     <br/>
     ​依赖链断裂：若其他组件（如 Istio）依赖该命名空间的资源，可能引发级联故障。
    </p>
    <h4>
     <a id="4__28">
     </a>
     4. ​存储与持久化卷问题
    </h4>
    <p>
     ​PV/PVC 清理失败：存储控制器（如 Rook）依赖 Finalizers 确保数据安全，命名空间状态异常可能导致存储资源无法释放。
     <br/>
     ​存储策略冲突：残留的存储配置可能影响新存储资源的分配策略
    </p>
    <h4>
     <a id="_33">
     </a>
     二、问题根源分析
    </h4>
    <ol>
     <li>
      <p>
       <strong>
        Finalizers 未释放
       </strong>
       <br/>
       Kubernetes 通过
       <code>
        finalizers
       </code>
       字段确保资源删除前的清理逻辑（如释放存储卷、级联删除关联资源）。若 Finalizers 中的控制器未响应或资源依赖未解除，删除流程会被阻塞。
      </p>
     </li>
     <li>
      <p>
       <strong>
        残留资源未清理
       </strong>
       <br/>
       命名空间内可能残留 ServiceAccount、CRD 自定义资源、Pod 等未被完全删除的组件，尤其是通过 Operator 或 Helm 安装的复杂应用（如 Calico、Prometheus）。
      </p>
     </li>
     <li>
      <p>
       <strong>
        API 通信或控制器故障
       </strong>
       <br/>
       集群组件（如
       <code>
        kube-controller-manager
       </code>
       ）异常或网络问题可能导致 Finalizers 清理失败。
      </p>
     </li>
    </ol>
    <hr/>
    <h4>
     <a id="_47">
     </a>
     三、解决方案详解
    </h4>
    <h5>
     <a id="_1_49">
     </a>
     <strong>
      步骤 1：强制删除命名空间
     </strong>
    </h5>
    <p>
     通过
     <code>
      --force
     </code>
     参数跳过优雅终止期，直接触发删除逻辑：
    </p>
    <pre><code class="prism language-bash">kubectl delete ns <span class="token operator">&lt;</span>NAMESPACE_NAME<span class="token operator">&gt;</span> <span class="token parameter variable">--force</span> --grace-period<span class="token operator">=</span><span class="token number">0</span>
</code></pre>
    <p>
     若失败，通常是由于残留资源或 Finalizers 未解除，需进入下一步。
    </p>
    <hr/>
    <h5>
     <a id="_2_58">
     </a>
     <strong>
      步骤 2：手动清理残留资源
     </strong>
    </h5>
    <p>
     通过以下命令列出命名空间内所有资源并强制删除：
    </p>
    <pre><code class="prism language-bash"><span class="token comment"># 列出所有命名空间内资源类型</span>
kubectl api-resources <span class="token parameter variable">--verbs</span><span class="token operator">=</span>list <span class="token parameter variable">--namespaced</span> <span class="token parameter variable">-o</span> name <span class="token operator">|</span> <span class="token function">xargs</span> <span class="token parameter variable">-n</span> <span class="token number">1</span> kubectl get --show-kind --ignore-not-found <span class="token parameter variable">-n</span> <span class="token operator">&lt;</span>NAMESPACE_NAME<span class="token operator">&gt;</span>

<span class="token comment"># 强制删除残留资源（例如 ServiceAccount）</span>
kubectl delete serviceaccount/<span class="token operator">&lt;</span>NAME<span class="token operator">&gt;</span> <span class="token parameter variable">-n</span> <span class="token operator">&lt;</span>NAMESPACE_NAME<span class="token operator">&gt;</span> <span class="token parameter variable">--force</span> --grace-period<span class="token operator">=</span><span class="token number">0</span>
</code></pre>
    <p>
     <strong>
      关键点
     </strong>
     ：
     <br/>
     • 若资源删除失败，需手动移除其 Finalizers（参考步骤 3 对命名空间的操作）。
    </p>
    <hr/>
    <h5>
     <a id="_3_Finalizers_72">
     </a>
     <strong>
      步骤 3：移除命名空间的 Finalizers
     </strong>
    </h5>
    <p>
     <strong>
      方法 1：通过 API 直接操作
     </strong>
    </p>
    <pre><code class="prism language-bash"><span class="token comment"># 查看命名空间下是否存在资源</span>
kubectl get <span class="token parameter variable">-n</span> <span class="token operator">&lt;</span>NAMESPACE_NAME<span class="token operator">&gt;</span> -- all
<span class="token comment"># 导出命名空间配置</span>
kubectl get ns <span class="token operator">&lt;</span>NAMESPACE_NAME<span class="token operator">&gt;</span> <span class="token parameter variable">-o</span> json <span class="token operator">&gt;</span> ns.json
</code></pre>
    <pre><code># 删除 finalizers 字段（编辑 JSON 文件，移除 "finalizers": [...] 部分）
</code></pre>
    <p>
     删除前
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/301ca8841ac048d59cf5782fd1fca7f9.png">
      <br/>
      删除后
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/b2250026a50347f789f87d686212327a.png"/>
     </img>
    </p>
    <pre><code class="prism language-shell"><span class="token comment"># 新建一个窗口执行</span>
kubectl proxy

<span class="token comment"># 当前服务器窗口执行</span>
<span class="token comment"># calico-ns.json 替换为自己的json 文件 </span>
<span class="token comment"># calico-system 替换为自己的namespace</span>
<span class="token function">curl</span> <span class="token parameter variable">-k</span> <span class="token parameter variable">-H</span> Content-Type: application/json <span class="token parameter variable">-X</span> PUT --data-binary @calico-ns.json http://127.0.0.1:8001/api/v1/namespaces/calico-system/finalize

<span class="token comment"># 执行完成后 关闭另一个窗口的代理</span>
<span class="token comment"># 再次检查命名空间</span>
kubectl get ns
</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/002ed06f4f274a30bc839a5f00f0f80a.png">
      <br/>
      发现之前命名空间 calico-system 一直在Terminating的状态 现在已经正常了
     </img>
    </p>
    <p>
     <strong>
      作用
     </strong>
     ：绕过控制器逻辑，直接解除 Finalizers 阻塞。
    </p>
    <p>
     <strong>
      方法 2：使用
      <code>
       kubectl patch
      </code>
     </strong>
    </p>
    <pre><code class="prism language-bash">kubectl patch namespace <span class="token operator">&lt;</span>NAMESPACE_NAME<span class="token operator">&gt;</span> <span class="token parameter variable">-p</span> <span class="token string">'{"metadata":{"finalizers":[]}}'</span> <span class="token parameter variable">--type</span><span class="token operator">=</span><span class="token string">'merge'</span>
</code></pre>
    <p>
     此方法适用于未完全卡死的场景。
    </p>
    <hr/>
    <h5>
     <a id="_4_Etcd__115">
     </a>
     <strong>
      步骤 4：检查 Etcd 数据残留（可选）
     </strong>
    </h5>
    <p>
     若上述步骤无效，可能是 Etcd 中残留了命名空间的元数据：
    </p>
    <pre><code class="prism language-bash"><span class="token comment"># 进入 Etcd Pod 操作（假设使用默认部署）</span>
kubectl <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> <span class="token parameter variable">-n</span> kube-system etcd-<span class="token operator">&lt;</span>NODE_NAME<span class="token operator">&gt;</span> -- <span class="token function">sh</span>

<span class="token comment"># 查询并删除残留数据</span>
<span class="token assign-left variable">ETCDCTL_API</span><span class="token operator">=</span><span class="token number">3</span> etcdctl get /registry/namespaces/<span class="token operator">&lt;</span>NAMESPACE_NAME<span class="token operator">&gt;</span>
<span class="token assign-left variable">ETCDCTL_API</span><span class="token operator">=</span><span class="token number">3</span> etcdctl del /registry/namespaces/<span class="token operator">&lt;</span>NAMESPACE_NAME<span class="token operator">&gt;</span>
</code></pre>
    <p>
     <strong>
      注意
     </strong>
     ：直接操作 Etcd 存在风险，需谨慎执行。
    </p>
    <hr/>
    <h4>
     <a id="_129">
     </a>
     三、进阶排查与修复
    </h4>
    <ol>
     <li>
      <p>
       <strong>
        检查控制器日志
       </strong>
       <br/>
       查看
       <code>
        kube-controller-manager
       </code>
       日志，定位 Finalizers 阻塞原因：
      </p>
      <pre><code class="prism language-bash">kubectl logs <span class="token parameter variable">-n</span> kube-system kube-controller-manager-<span class="token operator">&lt;</span>NODE_NAME<span class="token operator">&gt;</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">"namespace/&lt;NAMESPACE_NAME&gt;"</span>
</code></pre>
     </li>
     <li>
      <p>
       <strong>
        修复 RBAC 权限问题
       </strong>
       <br/>
       若匿名用户（如通过
       <code>
        kubectl proxy
       </code>
       调用 API）因权限不足导致删除失败，需绑定 ClusterRole：
      </p>
      <pre><code class="prism language-bash">kubectl create clusterrolebinding cluster-system-anonymous <span class="token parameter variable">--clusterrole</span><span class="token operator">=</span>cluster-admin <span class="token parameter variable">--user</span><span class="token operator">=</span>system:anonymous
</code></pre>
      <p>
       此操作需评估安全风险。
      </p>
     </li>
    </ol>
    <hr/>
    <h4>
     <a id="_146">
     </a>
     四、总结与预防建议
    </h4>
    <ol>
     <li>
      <p>
       <strong>
        预防措施
       </strong>
       <br/>
       • 删除命名空间前，确保其内资源已清理。
       <br/>
       • 避免直接删除由 Operator 管理的 CRD 资源（需先卸载 Operator）。
      </p>
     </li>
     <li>
      <p>
       <strong>
        快速恢复流程
       </strong>
      </p>
      <div class="mermaid">
       <svg class="mermaid-svg" height="495.3622741699219" id="mermaid-svg-XMej3FZ5rNZIb0jo" viewbox="0 -0.0000019073486328125 350.5196533203125 495.3622741699219" width="350.5196533203125" xmlns="http://www.w3.org/2000/svg">
        <style>
         #mermaid-svg-XMej3FZ5rNZIb0jo {font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}#mermaid-svg-XMej3FZ5rNZIb0jo .error-icon{fill:#552222;}#mermaid-svg-XMej3FZ5rNZIb0jo .error-text{fill:#552222;stroke:#552222;}#mermaid-svg-XMej3FZ5rNZIb0jo .edge-thickness-normal{stroke-width:2px;}#mermaid-svg-XMej3FZ5rNZIb0jo .edge-thickness-thick{stroke-width:3.5px;}#mermaid-svg-XMej3FZ5rNZIb0jo .edge-pattern-solid{stroke-dasharray:0;}#mermaid-svg-XMej3FZ5rNZIb0jo .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-svg-XMej3FZ5rNZIb0jo .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-svg-XMej3FZ5rNZIb0jo .marker{fill:#333333;stroke:#333333;}#mermaid-svg-XMej3FZ5rNZIb0jo .marker.cross{stroke:#333333;}#mermaid-svg-XMej3FZ5rNZIb0jo svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-svg-XMej3FZ5rNZIb0jo .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#333;}#mermaid-svg-XMej3FZ5rNZIb0jo .cluster-label text{fill:#333;}#mermaid-svg-XMej3FZ5rNZIb0jo .cluster-label span{color:#333;}#mermaid-svg-XMej3FZ5rNZIb0jo .label text,#mermaid-svg-XMej3FZ5rNZIb0jo span{fill:#333;color:#333;}#mermaid-svg-XMej3FZ5rNZIb0jo .node rect,#mermaid-svg-XMej3FZ5rNZIb0jo .node circle,#mermaid-svg-XMej3FZ5rNZIb0jo .node ellipse,#mermaid-svg-XMej3FZ5rNZIb0jo .node polygon,#mermaid-svg-XMej3FZ5rNZIb0jo .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaid-svg-XMej3FZ5rNZIb0jo .node .label{text-align:center;}#mermaid-svg-XMej3FZ5rNZIb0jo .node.clickable{cursor:pointer;}#mermaid-svg-XMej3FZ5rNZIb0jo .arrowheadPath{fill:#333333;}#mermaid-svg-XMej3FZ5rNZIb0jo .edgePath .path{stroke:#333333;stroke-width:2.0px;}#mermaid-svg-XMej3FZ5rNZIb0jo .flowchart-link{stroke:#333333;fill:none;}#mermaid-svg-XMej3FZ5rNZIb0jo .edgeLabel{background-color:#e8e8e8;text-align:center;}#mermaid-svg-XMej3FZ5rNZIb0jo .edgeLabel rect{opacity:0.5;background-color:#e8e8e8;fill:#e8e8e8;}#mermaid-svg-XMej3FZ5rNZIb0jo .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#mermaid-svg-XMej3FZ5rNZIb0jo .cluster text{fill:#333;}#mermaid-svg-XMej3FZ5rNZIb0jo .cluster span{color:#333;}#mermaid-svg-XMej3FZ5rNZIb0jo div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#mermaid-svg-XMej3FZ5rNZIb0jo :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}
        </style>
        <g>
         <g class="output">
          <g class="clusters">
          </g>
          <g class="edgePaths">
           <g class="edgePath LS-A LE-B" id="L-A-B" style="opacity: 1;">
            <path class="path" d="M175.25983428955078,53.983795166015625L175.25983428955078,58.15046183268229C175.25983428955078,62.31712849934896,175.25983428955078,70.6504618326823,175.34316762288412,79.06712873776753C175.42650095621744,87.48379564285278,175.59316762288412,95.98379611968994,175.67650095621744,100.2337963581085L175.75983428955078,104.48379659652709" marker-end="url(#arrowhead585)" style="fill:none">
            </path>
            <defs>
             <marker id="arrowhead585" markerheight="6" markerunits="strokeWidth" markerwidth="8" orient="auto" refx="9" refy="5" viewbox="0 0 10 10">
              <path class="arrowheadPath" d="M 0 0 L 10 5 L 0 10 z" style="stroke-width: 1; stroke-dasharray: 1, 0;">
              </path>
             </marker>
            </defs>
           </g>
           <g class="edgePath LS-B LE-C" id="L-B-C" style="opacity: 1;">
            <path class="path" d="M139.70264952896716,233.85370248077993L130.0814900656432,246.1118832687428C120.46033060231925,258.37006405670564,101.21801167567135,282.8864256326314,91.5968522123474,301.47658951004126C81.97569274902344,320.0667533874512,81.97569274902344,332.7307195663452,81.97569274902344,339.06270265579224L81.97569274902344,345.39468574523926" marker-end="url(#arrowhead586)" style="fill:none">
            </path>
            <defs>
             <marker id="arrowhead586" markerheight="6" markerunits="strokeWidth" markerwidth="8" orient="auto" refx="9" refy="5" viewbox="0 0 10 10">
              <path class="arrowheadPath" d="M 0 0 L 10 5 L 0 10 z" style="stroke-width: 1; stroke-dasharray: 1, 0;">
              </path>
             </marker>
            </defs>
           </g>
           <g class="edgePath LS-B LE-D" id="L-B-D" style="opacity: 1;">
            <path class="path" d="M211.81701780293324,233.85370086695815L221.2715108074574,246.11188192389133C230.72600381198154,258.37006298082446,249.63498982102985,282.8864250946908,259.08948282555394,301.476589241071C268.5439758300781,320.0667533874512,268.5439758300781,332.7307195663452,268.5439758300781,339.06270265579224L268.5439758300781,345.39468574523926" marker-end="url(#arrowhead587)" style="fill:none">
            </path>
            <defs>
             <marker id="arrowhead587" markerheight="6" markerunits="strokeWidth" markerwidth="8" orient="auto" refx="9" refy="5" viewbox="0 0 10 10">
              <path class="arrowheadPath" d="M 0 0 L 10 5 L 0 10 z" style="stroke-width: 1; stroke-dasharray: 1, 0;">
              </path>
             </marker>
            </defs>
           </g>
           <g class="edgePath LS-D LE-E" id="L-D-E" style="opacity: 1;">
            <path class="path" d="M268.5439758300781,391.3784809112549L268.5439758300781,395.54514757792157C268.5439758300781,399.7118142445882,268.5439758300781,408.04514757792157,268.5439758300781,416.3784809112549C268.5439758300781,424.7118142445882,268.5439758300781,433.04514757792157,268.5439758300781,437.2118142445882L268.5439758300781,441.3784809112549" marker-end="url(#arrowhead588)" style="fill:none">
            </path>
            <defs>
             <marker id="arrowhead588" markerheight="6" markerunits="strokeWidth" markerwidth="8" orient="auto" refx="9" refy="5" viewbox="0 0 10 10">
              <path class="arrowheadPath" d="M 0 0 L 10 5 L 0 10 z" style="stroke-width: 1; stroke-dasharray: 1, 0;">
              </path>
             </marker>
            </defs>
           </g>
          </g>
          <g class="edgeLabels">
           <g class="edgeLabel" style="opacity: 1;" transform="">
            <g class="label" transform="translate(0,0)">
             <rect height="0" rx="0" ry="0" width="0">
             </rect>
             <foreignobject height="0" width="0">
              <div style="display: inline-block; white-space: nowrap;">
               <span class="edgeLabel L-LS-A' L-LE-B" id="L-L-A-B">
               </span>
              </div>
             </foreignobject>
            </g>
           </g>
           <g class="edgeLabel" style="opacity: 1;" transform="translate(81.97569274902344,307.40278720855713)">
            <g class="label" transform="translate(-7.997685432434082,-12.991898536682129)">
             <rect height="25.983797073364258" rx="0" ry="0" width="15.995370864868164">
             </rect>
             <foreignobject height="25.983797073364258" width="15.995370864868164">
              <div style="display: inline-block; white-space: nowrap;">
               <span class="edgeLabel L-LS-B' L-LE-C" id="L-L-B-C">
                是
               </span>
              </div>
             </foreignobject>
            </g>
           </g>
           <g class="edgeLabel" style="opacity: 1;" transform="translate(268.5439758300781,307.40278720855713)">
            <g class="label" transform="translate(-7.997685432434082,-12.991898536682129)">
             <rect height="25.983797073364258" rx="0" ry="0" width="15.995370864868164">
             </rect>
             <foreignobject height="25.983797073364258" width="15.995370864868164">
              <div style="display: inline-block; white-space: nowrap;">
               <span class="edgeLabel L-LS-B' L-LE-D" id="L-L-B-D">
                否
               </span>
              </div>
             </foreignobject>
            </g>
           </g>
           <g class="edgeLabel" style="opacity: 1;" transform="">
            <g class="label" transform="translate(0,0)">
             <rect height="0" rx="0" ry="0" width="0">
             </rect>
             <foreignobject height="0" width="0">
              <div style="display: inline-block; white-space: nowrap;">
               <span class="edgeLabel L-LS-D' L-LE-E" id="L-L-D-E">
               </span>
              </div>
             </foreignobject>
            </g>
           </g>
          </g>
          <g class="nodes">
           <g class="node default" id="flowchart-A-408" style="opacity: 1;" transform="translate(175.25983428955078,30.991897583007812)">
            <rect class="label-container" height="45.98379707336426" rx="0" ry="0" width="205.6597137451172" x="-102.8298568725586" y="-22.99189853668213">
            </rect>
            <g class="label" transform="translate(0,0)">
             <g transform="translate(-92.8298568725586,-12.991898536682129)">
              <foreignobject height="25.983797073364258" width="185.65972900390625">
               <div style="display: inline-block; white-space: nowrap;">
                命名空间卡在 Terminating
               </div>
              </foreignobject>
             </g>
            </g>
           </g>
           <g class="node default" id="flowchart-B-409" style="opacity: 1;" transform="translate(175.25983428955078,186.6973419189453)">
            <polygon class="label-container" points="82.71354532241821,0 165.42709064483643,-82.71354532241821 82.71354532241821,-165.42709064483643 0,-82.71354532241821" transform="translate(-82.71354532241821,82.71354532241821)">
            </polygon>
            <g class="label" transform="translate(0,0)">
             <g transform="translate(-58.91204071044922,-12.991898536682129)">
              <foreignobject height="25.983797073364258" width="117.82408142089844">
               <div style="display: inline-block; white-space: nowrap;">
                是否有残留资源?
               </div>
              </foreignobject>
             </g>
            </g>
           </g>
           <g class="node default" id="flowchart-C-411" style="opacity: 1;" transform="translate(81.97569274902344,368.38658332824707)">
            <rect class="label-container" height="45.98379707336426" rx="0" ry="0" width="147.9513931274414" x="-73.9756965637207" y="-22.99189853668213">
            </rect>
            <g class="label" transform="translate(0,0)">
             <g transform="translate(-63.9756965637207,-12.991898536682129)">
              <foreignobject height="25.983797073364258" width="127.9513931274414">
               <div style="display: inline-block; white-space: nowrap;">
                强制删除残留资源
               </div>
              </foreignobject>
             </g>
            </g>
           </g>
           <g class="node default" id="flowchart-D-413" style="opacity: 1;" transform="translate(268.5439758300781,368.38658332824707)">
            <rect class="label-container" height="45.98379707336426" rx="0" ry="0" width="125.18518829345703" x="-62.592594146728516" y="-22.99189853668213">
            </rect>
            <g class="label" transform="translate(0,0)">
             <g transform="translate(-52.592594146728516,-12.991898536682129)">
              <foreignobject height="25.983797073364258" width="105.18518829345703">
               <div style="display: inline-block; white-space: nowrap;">
                移除 Finalizers
               </div>
              </foreignobject>
             </g>
            </g>
           </g>
           <g class="node default" id="flowchart-E-415" style="opacity: 1;" transform="translate(268.5439758300781,464.3703784942627)">
            <rect class="label-container" height="45.98379707336426" rx="0" ry="0" width="147.9513931274414" x="-73.9756965637207" y="-22.99189853668213">
            </rect>
            <g class="label" transform="translate(0,0)">
             <g transform="translate(-63.9756965637207,-12.991898536682129)">
              <foreignobject height="25.983797073364258" width="127.9513931274414">
               <div style="display: inline-block; white-space: nowrap;">
                验证命名空间删除
               </div>
              </foreignobject>
             </g>
            </g>
           </g>
          </g>
         </g>
        </g>
       </svg>
      </div>
     </li>
     <li>
      <p>
       <strong>
        工具推荐
       </strong>
       <br/>
       • 使用
       <code>
        kubectl-neat
       </code>
       插件清理资源 Finalizers。
       <br/>
       • 通过
       <code>
        k9s
       </code>
       可视化工具快速定位残留资源。
      </p>
     </li>
    </ol>
    <p>
     通过以上步骤，可彻底解决命名空间卡在
     <strong>
      Terminating
     </strong>
     状态的问题。若仍存在异常，建议结合集群日志和组件健康状态进一步排查。
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c:6f672e6373646e2e6e65742f6131353833353737343635322f:61727469636c652f64657461696c732f313436313332363035" class_="artid" style="display:none">
 </p>
</div>


