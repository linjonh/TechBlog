---
layout: post
title: "linux-centos-安装源码nginx,开放端口"
date: 2025-03-10 13:46:45 +0800
description: "在编译 Nginx 源码之前，需要安装一些必要的依赖包，这些依赖包包含了编译过程中所需的工具和库。–prefix=/usr/local/nginx：指定 Nginx 的安装路径为 /usr/local/nginx。openssl-devel：OpenSSL 库的开发包，用于支持 Nginx 的 SSL/TLS 功能。在编译之前，需要对 Nginx 进行配置，指定编译参数和安装路径等信息。zlib-devel：Zlib 压缩库的开发包，用于支持 Nginx 的压缩功能。"
keywords: "linux centos 安装源码nginx，开放端口"
categories: ['未分类']
tags: ['Nginx', 'Linux', 'Centos']
artid: "146152803"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146152803
    alt: "linux-centos-安装源码nginx,开放端口"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146152803
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146152803
cover: https://bing.ee123.net/img/rand?artid=146152803
image: https://bing.ee123.net/img/rand?artid=146152803
img: https://bing.ee123.net/img/rand?artid=146152803
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     linux centos 安装源码nginx，开放端口
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-tomorrow-night-eighties" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h3>
     <a id="1__0">
     </a>
     1. 安装必要的依赖
    </h3>
    <p>
     在编译 Nginx 源码之前，需要安装一些必要的依赖包，这些依赖包包含了编译过程中所需的工具和库。以 CentOS 系统为例，执行以下命令安装：
    </p>
    <pre><code class="prism language-java">sudo yum install <span class="token operator">-</span>y gcc gcc<span class="token operator">-</span>c<span class="token operator">++</span> make pcre<span class="token operator">-</span>devel zlib<span class="token operator">-</span>devel openssl<span class="token operator">-</span>devel
</code></pre>
    <p>
     gcc 和 gcc-c++：C 和 C++ 编译器，用于编译 Nginx 源码。
     <br/>
     make：构建工具，用于执行 Makefile 文件中的编译指令。
     <br/>
     pcre-devel：Perl 兼容正则表达式库的开发包，Nginx 使用它来支持正则表达式匹配。
     <br/>
     zlib-devel：Zlib 压缩库的开发包，用于支持 Nginx 的压缩功能。
     <br/>
     openssl-devel：OpenSSL 库的开发包，用于支持 Nginx 的 SSL/TLS 功能。
    </p>
    <h3>
     <a id="2_Nginx__12">
     </a>
     2.下载 Nginx 源码
    </h3>
    <pre><code class="prism language-java">mkdir <span class="token operator">-</span>p <span class="token operator">~</span><span class="token operator">/</span>nginx<span class="token operator">-</span>src <span class="token operator">&amp;&amp;</span> cd <span class="token operator">~</span><span class="token operator">/</span>nginx<span class="token operator">-</span>src
</code></pre>
    <pre><code class="prism language-java">wget https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>nginx<span class="token punctuation">.</span>org<span class="token operator">/</span>download<span class="token operator">/</span>nginx<span class="token operator">-</span><span class="token number">1.24</span><span class="token number">.0</span><span class="token punctuation">.</span>tar<span class="token punctuation">.</span>gz
</code></pre>
    <h3>
     <a id="3__21">
     </a>
     3. 解压源码包
    </h3>
    <p>
     下载完成后，使用 tar 命令解压源码包：
    </p>
    <pre><code class="prism language-java">tar <span class="token operator">-</span>zxvf nginx<span class="token operator">-</span><span class="token number">1.24</span><span class="token number">.0</span><span class="token punctuation">.</span>tar<span class="token punctuation">.</span>gz
</code></pre>
    <p>
     解压后，进入解压后的目录：
    </p>
    <pre><code class="prism language-java">cd nginx<span class="token operator">-</span><span class="token number">1.24</span><span class="token number">.0</span>
</code></pre>
    <h3>
     <a id="4__30">
     </a>
     4. 配置编译选项
    </h3>
    <p>
     在编译之前，需要对 Nginx 进行配置，指定编译参数和安装路径等信息。执行以下命令进行配置：
    </p>
    <pre><code class="prism language-java"><span class="token punctuation">.</span>/configure \
<span class="token operator">--</span>prefix<span class="token operator">=</span><span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>nginx \
<span class="token operator">--</span><span class="token keyword">with</span><span class="token operator">-</span>http_ssl_module \
<span class="token operator">--</span><span class="token keyword">with</span><span class="token operator">-</span>http_gzip_static_module
</code></pre>
    <p>
     –prefix=/usr/local/nginx：指定 Nginx 的安装路径为 /usr/local/nginx。
     <br/>
     –with-http_ssl_module：启用 SSL/TLS 模块，支持 HTTPS 协议。
     <br/>
     –with-http_gzip_static_module：启用静态文件压缩模块，提高网站性能。
    </p>
    <h3>
     <a id="5__42">
     </a>
     5. 编译和安装
    </h3>
    <p>
     配置完成后，使用 make 命令进行编译：
    </p>
    <pre><code class="prism language-java">make
</code></pre>
    <p>
     编译完成后，使用 make install 命令进行安装：
    </p>
    <pre><code class="prism language-java">sudo make install
</code></pre>
    <h3>
     <a id="6_Nginx_53">
     </a>
     6.启动 Nginx
    </h3>
    <p>
     安装完成后，进入 Nginx 可执行文件所在目录，并启动 Nginx：
    </p>
    <pre><code class="prism language-java">cd <span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>nginx<span class="token operator">/</span>sbin
<span class="token punctuation">.</span>/nginx
</code></pre>
    <h3>
     <a id="7__Nginx__60">
     </a>
     7. 验证 Nginx 安装
    </h3>
    <h4>
     <a id="_Nginx__61">
     </a>
     可以通过以下几种方式验证 Nginx 是否安装成功并正常运行：
    </h4>
    <p>
     检查服务状态
     <br/>
     使用 ps 命令查看 Nginx 进程是否正在运行：
    </p>
    <pre><code class="prism language-java">ps <span class="token operator">-</span>ef <span class="token operator">|</span> grep nginx
</code></pre>
    <p>
     如果输出中包含 nginx: master process 和 nginx: worker process，则说明 Nginx 正在运行。
    </p>
    <h4>
     <a id="_Nginx__70">
     </a>
     访问 Nginx 默认页面
    </h4>
    <p>
     打开浏览器，在地址栏中输入服务器的 IP 地址或域名。如果看到 Nginx 的默认欢迎页面，则说明 Nginx 安装和配置成功。
    </p>
    <h3>
     <a id="8__73">
     </a>
     8. 配置系统服务（可选）
    </h3>
    <p>
     为了方便管理 Nginx 服务，可以创建一个系统服务文件。创建并编辑 /etc/systemd/system/nginx.service 文件：
    </p>
    <pre><code class="prism language-java">sudo nano <span class="token operator">/</span>etc<span class="token operator">/</span>systemd<span class="token operator">/</span>system<span class="token operator">/</span>nginx<span class="token punctuation">.</span>service
</code></pre>
    <p>
     在文件中添加以下内容：
    </p>
    <pre><code class="prism language-java"><span class="token punctuation">[</span><span class="token class-name">Unit</span><span class="token punctuation">]</span>
<span class="token class-name">Description</span><span class="token operator">=</span><span class="token class-name">The</span> <span class="token constant">NGINX</span> <span class="token constant">HTTP</span> and reverse proxy server
<span class="token class-name">After</span><span class="token operator">=</span>syslog<span class="token punctuation">.</span>target network<span class="token punctuation">.</span>target remote<span class="token operator">-</span>fs<span class="token punctuation">.</span>target nss<span class="token operator">-</span>lookup<span class="token punctuation">.</span>target

<span class="token punctuation">[</span><span class="token class-name">Service</span><span class="token punctuation">]</span>
<span class="token class-name">Type</span><span class="token operator">=</span>forking
<span class="token class-name">PIDFile</span><span class="token operator">=</span><span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>nginx<span class="token operator">/</span>logs<span class="token operator">/</span>nginx<span class="token punctuation">.</span>pid
<span class="token class-name">ExecStartPre</span><span class="token operator">=</span><span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>nginx<span class="token operator">/</span>sbin<span class="token operator">/</span>nginx <span class="token operator">-</span>t
<span class="token class-name">ExecStart</span><span class="token operator">=</span><span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>nginx<span class="token operator">/</span>sbin<span class="token operator">/</span>nginx
<span class="token class-name">ExecReload</span><span class="token operator">=</span><span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>nginx<span class="token operator">/</span>sbin<span class="token operator">/</span>nginx <span class="token operator">-</span>s reload
<span class="token class-name">ExecStop</span><span class="token operator">=</span><span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>nginx<span class="token operator">/</span>sbin<span class="token operator">/</span>nginx <span class="token operator">-</span>s stop
<span class="token class-name">PrivateTmp</span><span class="token operator">=</span><span class="token boolean">true</span>

<span class="token punctuation">[</span><span class="token class-name">Install</span><span class="token punctuation">]</span>
<span class="token class-name">WantedBy</span><span class="token operator">=</span>multi<span class="token operator">-</span>user<span class="token punctuation">.</span>target
</code></pre>
    <p>
     保存并退出文件，然后重新加载系统服务配置：
    </p>
    <pre><code class="prism language-java">sudo systemctl daemon<span class="token operator">-</span>reload
</code></pre>
    <p>
     现在，你可以使用 systemctl 命令来管理 Nginx 服务了，例如启动、停止、重启和设置开机自启：
    </p>
    <pre><code class="prism language-java">sudo systemctl start nginx
sudo systemctl stop nginx
sudo systemctl restart nginx
sudo systemctl enable nginx
</code></pre>
    <p>
     开放端口（5432 6379）：查询指定端口是否已开
     <code>
      firewall-cmd --query-port=5432/tcp
     </code>
     <br/>
     提示 yes，表示开启；no表示未开启。
     <br/>
     添加指定需要开放的端口：
     <code>
      firewall-cmd --add-port=123/tcp --permanent
     </code>
     <br/>
     重载入添加的端口：
     <code>
      firewall-cmd --reload
     </code>
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f34353535393836322f:61727469636c652f64657461696c732f313436313532383033" class_="artid" style="display:none">
 </p>
</div>


