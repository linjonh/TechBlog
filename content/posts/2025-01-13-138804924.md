---
layout: post
title: "数据库day3"
date: 2025-01-13 09:54:55 +0800
description: "数据操纵语言（Data Manipulation Language, DML）是用于数据库操作，对数"
keywords: "修改表结构"
categories: ['未分类']
tags: ['数据库']
artid: "138804924"
image:
  path: https://api.vvhan.com/api/bing?rand=sj&artid=138804924
  alt: "数据库day3"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=138804924
featuredImagePreview: https://bing.ee123.net/img/rand?artid=138804924
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     数据库——day3
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <h6>
     一.修改表结构
    </h6>
    <h6>
     1.修改表名
    </h6>
    <blockquote>
     <p>
      方法1：ALTER TABLE old_tbname RENAME new_tbname;
      <br/>
      方法2： RENAME TABLE old_tbname TO new_tbname;
     </p>
    </blockquote>
    <p>
     eg：
    </p>
    <p>
     ALTER TABLE db_hero RENAME dbhero;使db_hero修改为dbhero
     <br/>
     RENAME TABLE dbhero to db_hero;将该表恢复为之前的命名
    </p>
    <p>
     <img alt="" height="546" src="https://i-blog.csdnimg.cn/blog_migrate/adc60149e074abb8836d13b68a56b69b.png" width="522"/>
    </p>
    <h6>
     2.添加字段
    </h6>
    <blockquote>
     <p>
      alter table tbnaem add 字段名 xxxx
     </p>
    </blockquote>
    <p>
     在age字段后添加hobby字段
    </p>
    <p>
     ALTER TABLE db_hero add hobby varchar(30) not null after age;
    </p>
    <p>
     <img alt="" height="311" src="https://i-blog.csdnimg.cn/blog_migrate/0a5248971fbbc18e5a0b15a3d85e8ec3.png" width="556"/>
    </p>
    <p>
     将after改为first后，将影响在第一列中
    </p>
    <p>
     <img alt="" height="332" src="https://i-blog.csdnimg.cn/blog_migrate/6ffc7f88eb4298706edec67bdc0715cc.png" width="567"/>
    </p>
    <h6>
     3.修改字段
    </h6>
    <p>
     将email字段修改为varchar(50)，并且不可为空
    </p>
    <blockquote>
     <p>
      ALTER TABLE db_hero MODIFY email varchar(50) not null;
     </p>
    </blockquote>
    <h6>
     4.更改字段名
    </h6>
    <blockquote>
     <p>
      ALTER TABLE 表名 CHANGE 旧列名 新列名 列类型;
     </p>
    </blockquote>
    <p>
     eg:
    </p>
    <p>
     ALTER TABLE db_hero change email e_mail varchar(40) not null;
    </p>
    <h6>
     5.删除字段
    </h6>
    <blockquote>
     <p>
      ALTER TABLE 表名 DROP 列名
     </p>
    </blockquote>
    <p>
     ALTER TABLE db_hero DROP wq
    </p>
    <p>
     <img alt="" height="295" src="https://i-blog.csdnimg.cn/blog_migrate/041130149ec1961adabff23bd8d27d91.png" width="541"/>
    </p>
    <h6>
     6.删除主键约束
    </h6>
    <blockquote>
     <p>
      alter table 表名 drop primary key;
     </p>
    </blockquote>
    <p>
     alter table db_hero drop primary key;
    </p>
    <p>
     <img alt="" height="315" src="https://i-blog.csdnimg.cn/blog_migrate/0bbf382eafb1d155d9aeab5036520836.png" width="561"/>
    </p>
    <h6>
     7.添加主键约束
    </h6>
    <blockquote>
     <p>
      alter table 表名 add primary key(列名);
     </p>
    </blockquote>
    <h6>
     8.添加唯一约束
    </h6>
    <blockquote>
     <p>
      Alter TABLE 数据表名 ADD   约束类型 约束名(字段名)
     </p>
    </blockquote>
    <p>
     <img alt="" height="315" src="https://i-blog.csdnimg.cn/blog_migrate/22540d1f18898d3a736549d03c25e6e1.png" width="560"/>
    </p>
    <h6>
     9.复制表结构
    </h6>
    <blockquote>
     <p>
      create table 新表名 like 源表
     </p>
    </blockquote>
    <p>
     eg:
    </p>
    <p>
     CREATE TABLE dbhero like db_hero;
    </p>
    <h6>
     10.删除表
    </h6>
    <blockquote>
     <p>
      drop table 表名1，表名2
     </p>
    </blockquote>
    <p>
     eg：
    </p>
    <p>
     DROP TABLE db_hero,dbhero;
    </p>
    <h6>
     二.DML语句
    </h6>
    <p>
     数据操纵语言（Data Manipulation Language, DML）是用于数据库操作，对数据库其中的对象和数据运行访问工作的编程语句,
    </p>
    <p>
     数据修改的三大基础操作：插入（INSERT）、更新（UPDATE）、删除（DELETE）。
     <br/>
     首先，创建一个“水果表”
    </p>
    <blockquote>
     <p>
      mysql&gt; create table fruit
      <br/>
      -&gt; (id int auto_increment,
      <br/>
      -&gt; name varchar(50),
      <br/>
      -&gt; quantity int,
      <br/>
      -&gt; primary key(id)
      <br/>
      -&gt; );
     </p>
    </blockquote>
    <h6>
     1.插入数据（INSERT）
    </h6>
    <p>
     1.1基本插入
    </p>
    <blockquote>
     <p>
      INSERT INTO table_name (column1, column2, column3) VALUES (value1, value2, value3);
     </p>
    </blockquote>
    <p>
     向该表插入一条数据
     <br/>
     insert into fruit values(1,'orange',20);
     <br/>
     insert into fruit(name,quantity) values('orange',20);
    </p>
    <p>
     2.插入多行数据
    </p>
    <blockquote>
     <p>
      INSERT INTO table_name (column1, column2) VALUES (value1, value2), (value3, value4),
     </p>
    </blockquote>
    <p>
     3.使用NULL
    </p>
    <p>
     在允许NULL值的列中，你可以显式地插入NULL。例如：
    </p>
    <p>
     INSERT INTO table_name (column1, column2) VALUES (NULL, value2);
    </p>
    <p>
     4.从其他表中插入
    </p>
    <blockquote>
     <p>
      INSERT INTO table_name1 (column1, column2) SELECT column1, column2 FROM table_name2;
     </p>
    </blockquote>
    <p>
     <img alt="" height="241" src="https://i-blog.csdnimg.cn/blog_migrate/5e681a6d3ca0fbe2aa1e0202906c1dcc.png" width="740"/>
    </p>
    <p>
     5.插入数据并返回ID
    </p>
    <p>
     对于自增主键的表，插入数据后你可能需要得到新插入行的ID。这可以通过LAST_INSERT_ID()函数实现：
    </p>
    <p>
     INSERT INTO table_name (column1, column2) VALUES (value1, value2);
     <br/>
     SELECT LAST_INSERT_ID();
    </p>
    <p>
     <img alt="" height="121" src="https://i-blog.csdnimg.cn/blog_migrate/bc62504a28f152afc43a4ce4ea6af3bd.png" width="319"/>
    </p>
    <p>
     6.插入默认值
    </p>
    <blockquote>
     <p>
      如果表的所有列都有默认值，可以这样插入一行默认值：
     </p>
     <p>
      INSERT INTO table_name DEFAULT VALUES;
     </p>
    </blockquote>
    <p>
     7.插入并加锁
    </p>
    <blockquote>
     <p>
      在某些高并发情况下，你可能需要在插入时对表加锁以保证数据一致性：
     </p>
     <p>
      LOCK TABLES table_name WRITE;
      <br/>
      INSERT INTO table_name (column1, column2) VALUES (value1, value2);
      <br/>
      UNLOCK TABLES;
     </p>
    </blockquote>
    <h6>
     2.更新数据UPDATE
    </h6>
    <p>
     在MySQL中，UPDATE语句是用来修改表中现有数据的强大工具。它的基本语法是：
    </p>
    <p>
     UPDATE table_name
     <br/>
     SET column1 = value1, column2 = value2, ...
     <br/>
     WHERE condition;
    </p>
    <p>
     1.更新单个字段
    </p>
    <p>
     <img alt="" height="275" src="https://i-blog.csdnimg.cn/blog_migrate/1ddaed9641230d832cdb298c786bdd7e.png" width="425"/>
    </p>
    <p>
     2.更新多个字段
    </p>
    <blockquote>
     <p>
      UPDATE fruits
      <br/>
      SET name = 'Green Apple', quantity = 30
      <br/>
      WHERE name = 'Apple';
     </p>
    </blockquote>
    <p>
     空值添加定义：
     <br/>
     方法1： where quantity is null
     <br/>
     方法2： where quantity &lt;=&gt; null、
    </p>
    <p>
     3.使用条件表达式
    </p>
    <blockquote>
     <p>
      UPDATE fruits
      <br/>
      SET quantity = quantity + 10
      <br/>
      WHERE quantity &lt; 10;
     </p>
    </blockquote>
    <h6>
     3.删除数据：DELETTE
    </h6>
    <p>
     1.基本语法
    </p>
    <blockquote>
     <p>
      DELETE FROM table_name WHERE condition;
     </p>
    </blockquote>
    <p>
     WHERE condition 是用来指定哪些行应该被删除的条件。如果省略了WHERE子句，所有行都会被删除，这将清空表但不会删除表本身。
    </p>
    <p>
     <img alt="" height="192" src="https://i-blog.csdnimg.cn/blog_migrate/1244435563aef09d5370549a2d5a4221.png" width="489"/>
    </p>
    <p>
     2.删除特定行
    </p>
    <blockquote>
     <p>
      DELETE FROM fruits WHERE name = 'Apple';
     </p>
    </blockquote>
    <p>
     3.使用比较运算符
    </p>
    <blockquote>
     <p>
      删除所有数量小于20的水果
     </p>
     <p>
      DELETE FROM fruits WHERE quantity &lt; 20;
     </p>
    </blockquote>
    <p>
     4.使用逻辑运算符
    </p>
    <blockquote>
     <p>
      删除名称为‘Apple’并且数量小于10的列
     </p>
     <p>
      DELETE FROM fruits WHERE name = 'Apple' AND quantity &lt; 10;
     </p>
    </blockquote>
    <p>
     5.删除满足IN条件的行
    </p>
    <blockquote>
     <p>
      删除所有名称是“Apple”，“Banana”，或“Orange”的水果：
     </p>
     <p>
      DELETE FROM fruits WHERE name IN ('Apple', 'Banana', 'Orange');
     </p>
    </blockquote>
    <p>
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f71715f36303234373236392f:61727469636c652f64657461696c732f313338383034393234" class_="artid" style="display:none">
 </p>
</div>
