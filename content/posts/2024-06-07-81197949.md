---
arturl_encode: "68747470733a2f2f:626c6f672e6373646e2e6e65742f71715f3339343235383634:2f61727469636c652f64657461696c732f3831313937393439"
layout: post
title: "只需两步获取任何小程序源码"
date: 2024-06-07 14:13:37 +08:00
description: "前言： 这个博文的转载挺多的，不过原文在更新，qwerty472"
keywords: "看其他小程序的源码"
categories: ['微信小程序', '反编译']
tags: ['小程序', '反编译', '前端']
artid: "81197949"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=81197949
    alt: "只需两步获取任何小程序源码"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=81197949
featuredImagePreview: https://bing.ee123.net/img/rand?artid=81197949
---

# 只需两步获取任何小程序源码

## **`前言：`** 这个博文的转载挺多的，不过原文在更新， `qwerty472123` 大神的脚本也在更新，好多文章转载后就不再更新了，看以前的步骤操作，可能会引起奇怪的bug

---

这种方法，并不能反编译出所有的小程序源码，请自知！

具体的
**局限**
请看：
`qwerty472123`
大神的md文件
  
<https://github.com/qwerty472123/wxappUnpacker>

下面是原文：

---

最近在学习微信小程序开发，半个月学习下来，很想实战一下踩踩坑，于是就仿写了一个滴滴他们家的青桔单车小程序的前端实现，过程一言难尽，差不多两周时间过去了，发现小程序的坑远比想象的要多的多！！在实际练手中，完全是黑盒的，看到人家上线的小程序的效果，纯靠推测，部分效果在绞尽脑汁后能做出大致的实现，但是有些细节，费劲全力都没能做出来。很想一窥源码，查看究竟，看看大厂的前端大神们是如何规避了小程序的各种奇葩的坑。

于是就想到获取到小程序地源文件，然后再对其进行反编译还原为源代码，来作为学习参考。我百度了各种关于小程序地反编译教程，但是感觉都不太适合像我这样地初学小白，踩了挺多坑。在这里把我重新简化好的，快速地获取一个微信小程序源码的方式记录下来。

## 一、简单聊一下 `xxxxx.wxapkg`

**先来想想一个很简单的问题**
，小程序的源文件存放在哪
**？**

* 当然是在微信的服务器上。

**但是在微信服务器上，普通用户想要获取到，肯定是十分困难的，有没有别的办法呢？**

* 简单思考一下我们使用小程序的场景就会明白，当我们点开一个微信小程序的时候，其实是微信已经将它的从服务器上下载到了手机，然后再来运行的。
* 所以，虽然我们没能力从
  `服务器`
  上获取到，但是我们应该可以从
  `手机本地`
  找到到已经下载过的小程序源文件

**那么如何才能在手机里找到小程序的源文件包呢？**

* 这里只以安卓手机为例，毕竟穷逼不曾拥有过苹果手机
* 具体目录位置直接给出：
  `/data/data/com.tencent.mm/MicroMsg/{一串16进制字符}/appbrand/pkg/`
* 在这个目录下，会发现一些
  `xxxxxxx.wxapkg`
  类型的文件，这些就是微信小程序的包

  **微信小程序的格式就是:
  `.wxapkg`**
* `.wxapkg`
  是一个二进制文件，有其自己的一套结构。
* 关于
  `.wxapkg`
  的详细内容可以参考lrdcq大神的博文：
  [微信小程序源码阅读笔记](http://lrdcq.com/me/read.php/66.htm)
* 但是这里有个
  **坑**
  ，想要进入到上面这个目录的话，用手机自带的文件管理器肯定是不行的，
  `安卓`
  或者
  `iPhone`
  都要要用到第三方的文件管理器，比如：
  `RE文件管理器`
  ，并且安卓需要取得root权限，而苹果手机肯定是要越狱的，且
  **iphone的越狱难度>>安卓获取root**
  ，不管越狱还是root，这都太费劲，当然有能力的同学可以直接从手机上来操作，但是这里
  `不推荐从真机上获取`
  。

## 二、准备材料

1.node.js运行环境

* 如果没有安装nodejs，请先安装一下
* 下载地址：
  <https://nodejs.org/en/>

2.反编译的脚本

* 这里提供一个Github上
  `qwerty472123`
  大神写的node.js版本的，当然也有其它版本的，这里我只是简单地用node.js版本举例
* 地址：
  <https://github.com/qwerty472123/wxappUnpacker>

3.安卓模拟器（要求自带root权限）

* 我使用的是
  `夜神模拟器`
  ，用来获取小程序源文件
* 下载地址：
  <https://www.yeshen.com/cn/download/fullPackage>

## 三、详细步骤

**使用安卓模拟器获取到.wxapkg文件**
  
不用越狱，不用root，使用电脑端的
**安卓模拟器**
来获取是一个
**非常简单快捷且万能的**
获取方式，具体步骤如下：
  
1.打开安装好的安卓模拟器，并在模拟器中安装
`QQ`
、
`微信`
、
`RE管理器`

* `QQ`
  、
  `微信`
  在模拟器自带的应用商店里搜索下载安装即可
* `RE管理器`
  的下载地址：
  <https://pan.baidu.com/s/1PPBx08rNutXxhlMMJbuTpQ>
* 下载好后直接拖拽进打开的模拟器窗口就会自动安装

2.设置一下模拟器

* 以我个人认为比较好用的
  `夜神模拟器`
  举例
* 首先到模拟器内部设置超级用户权限

![这里写图片描述](https://i-blog.csdnimg.cn/blog_migrate/dfcea862ca35b2823b5baa1579a72872.png)
  
![这里写图片描述](https://i-blog.csdnimg.cn/blog_migrate/a620f3486b17f2497dc448015f2574dc.png)

* 这些操作的目的都是为了能让
  `RE管理器`
  顺利的获取到ROOT权限

3.接下来在模拟器里打开微信，然后在微信中运行你想要获取的下程序（这其实是让微信把小程序的源文件包从服务器下载到了本地了）

* 就以我说的这款青桔单车的小程序举例（希望滴滴的大神不会想打死我~）
* 在模拟器微信中运行一下后，
  **直接切回模拟器桌面运行RE浏览器**
  来到目录
* `/data/data/com.tencent.mm/MicroMsg//appbrand/pkg/`
* 就抵达了目的文件夹
    
  ![这里写图片描述](https://i-blog.csdnimg.cn/blog_migrate/ebe7292ef45d70276f523ebd7865dac3.png)
* 你会看到发现里面的一些.wxapkg后缀的文件，就是它们没错啦，可以根据使用的时间来判断那个是你刚才从服务器下载过来的
* 一般小程序的文件不会太大，可以结合时间来判断，长按压缩所选文件,然后再将压缩好的包通过QQ发送到
  `我的电脑`
* 如果不进行压缩的话，是无法将这个文件通过QQ来发送的
    
  ![这里写图片描述](https://i-blog.csdnimg.cn/blog_migrate/369216a51476de00de40f537270c231f.png)
* 所以QQ的这个功能可以让我们很方便的拿到源文件，而不必到电脑目录去找模拟器的文件目录。
* 解压。这样几步简单操作，就成功拿到了小程序的源文件了。

## 四、使用反编译脚本解包 wxapkg

* 到这里你应该已经将反编译脚本从github下载 或者 clone 到本地某个目录
* 打开nodejs命令窗口

（node命令行如图）
  
![这里写图片描述](https://i-blog.csdnimg.cn/blog_migrate/322e2c00ae4af442f96d5fb012b9d40f.png)
  
（不是上面那个绿色图标的Node.js）

**打开node命令行之后，可以看到此时命令行所在的目录**
：
  
（图中的是我的命令行目录，
**`注意`**
`：这个路径最好不要有中文，大家都知道，中文路径，经常引起一些奇奇怪怪的bug，如果路径有中文，自行解决`
）
  
![这里写图片描述](https://i-blog.csdnimg.cn/blog_migrate/6513405115c74baf779f82f3b17c6255.png)
  
**把那几个反编译要用到的脚本放在上图中的目录下（这个目录根据自己的实际目录而定，图中是我的目录）**
：
  
![这里写图片描述](https://i-blog.csdnimg.cn/blog_migrate/f6df5556b3370afb4c7792cf5a3c5b8e.png)
  
（
`qwerty472123`
大神的脚本里面，后缀
`.js`
`.json`
的文件才是有用的文件，其他文件是GitHub上需要的文件，当然也可以全部解压！在这里我只解压了后缀
`.js`
`.json`
的文件）

* cd 到你clone或者下载好的反编译脚本目录下
* 在
  `node命令窗口`
  中依次安装如下依赖：

  `npm install esprima`

  `npm install css-tree`

  `npm install cssbeautify`

  `npm install vm2`

  `npm install uglify-es`

  `npm install js-beautify`
* 安装好依赖之后，就是最后一步了，反编译
  `.wxapkg`
  文件
* 在当前目录下输入
    
  `node wuWxapkg.js [-d] <files…>`
  //files就是你想要反编译的文件名
    
  例如：我有一个需要反编译的文件
  `_163200311_32.wxapkg`
  已经解压到了D盘根目录下,那么就输出命令
    
  `node .\wuWxapkg.js D:_163200311_32.wxapkg`

（
**注意一点**
：
`.wxapkg`
文件名，不要有空格。有些
`.wxapkg`
文件名中自带空格，请自行把空格去掉，或者把文件名改成其他的）

* 回车运行
    
  ![这里写图片描述](https://i-blog.csdnimg.cn/blog_migrate/3b8a7bc939b0cb020ab38b7b0c3d4401.png)
* 反编译脚本就能一步将.wxapkg 文件还原为微信开发者工具能够运行的源文件，
  **目录地址和你反编译的文件地址是一样的**
    
  ![这里写图片描述](https://i-blog.csdnimg.cn/blog_migrate/7550e1f74e42b5cd14a4a5f9b6e15078.png)

然后在微信开发者工具新增项目即可打开
  
![这里写图片描述](https://i-blog.csdnimg.cn/blog_migrate/c10149ca10b357b48c8fb77e3c100838.png)
  
![这里写图片描述](https://i-blog.csdnimg.cn/blog_migrate/ca6448adc24b225116a9b46d6ac02415.png)

**`如果运行出现了点问题：`**

> 1、可以试试，点击开发者工具详情去掉 es6转es5的勾，勾上不校验安全域名
>   
> 2、 勾选了还是无法运行？那么请在详情里把基础版本库调低至1.5左右，再试试
>   
> 3、出现找不到某些文件的情况怎么办？我只能告诉：删！删！删！app.json
>   
> 里面,提示找不到那个文件，就将pages下注册的该页面语句暂时删除掉。删
>   
> 到可以运行为止
>   
> 4、还是无法运行？那就自己想办法吧！

## 五、两步即可完成

至此我们就通过非常简单的方式获取到了一个想要的小程序源文件，并对其进行了反编译还原 以后想要再反编译其他的小程序，非常快速，
**只需要两步**

1.
**使用模拟器找到小程序.wxapkg文件**
  
2.
**使用nodejs反编译脚本将.wxapkg文件反编译**

**使用此方法，绝大部分的小程序都能正常反编译出来，但是也会有一些特殊的情况，具体可以查看
`qwerty472123`
大神的
`readme`
文件**

## 六、写在后面的话

早在跳一跳小游戏火的时候，就有人通过小程序的appid和版本号，构造URL直接从服务器端下载该小程序的源码wxapkg文件。但是这种方法很快就被封了。

上线的源代码能如此简单的被获取到，不得不说小程序的源码安全存在一些隐患，有些小程序会将重要的js逻辑代码揉在一个js文件里，这样，即使被获取了源码，也很难读懂，不过现在越来越多的小程序使用
**mpvue wepy**
之类的框架来开发，使得代码的安全性又提高不少。

> 这里介绍的方法只想提供给像我一样的小程序新手用来学习和仿写练手，获
>   
> 取仿写素材。 前段时间有位大哥加我微信请教反编译，我出于热心，手把手
>   
> 教他操作，为他解答，之后通过朋友圈发现他私下经营小程序源码超市，将
>   
> 获取到的源码用于贩卖牟利，买源码的人只需要做简单修改和替换就能做出
>   
> 自己的小程序。。。 这让我深感罪孽

小程序作为微信生态内的新生力量，不仅被官方，也被很多开发者和内容创业者寄予厚望，处于对代码的安全性的考虑，这里的获取方式，不确定以后是否还行得通。