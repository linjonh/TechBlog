---
layout: post
title: 2023-02-27-计算机网络谢希仁-第八版第四章习题全解
date: 2023-02-27 15:51:09 +0800
categories: ['未分类']
tags: ['计算机网络']
image:
  path: https://img-blog.csdnimg.cn/a78074ef19004fd19679508e6f8b98ac.png?x-oss-process=image/resize,m_fixed,h_150
  alt: 计算机网络谢希仁-第八版第四章习题全解
artid: 128908573
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=128908573
featuredImagePreview: https://bing.ee123.net/img/rand?artid=128908573
---

# 计算机网络（谢希仁-第八版）第四章习题全解

**4-01 网络层向上提供的服务有哪两种？试比较其优缺点？**

> 虚电路服务和数据报服务。
>
> ![](https://i-blog.csdnimg.cn/blog_migrate/cfaded168e3d322851f16d00d3dda33e.png)
>
> 虚电路
>
> 优点：
>
> 1.可以提供可靠的通信服务
>
> 2.因为数据是沿着建立的虚电路进行传输的，因此分组的首部不需要携带完整的目的主机          的地址，只需要填写这条虚电路的编号（并不大的整数），因此减少了分组的开销。
>
> 3.所有分组可以按序到达，无重复、无丢失。
>
> 缺点：
>
> 1.每次通信需要建立连接（逻辑连接而非物理连接），数据传输启动慢。
>
> 2.同属于一条虚电路的分组只能按照同一路由进行转发，在这条通路上，只要有一个结点          出现故障，整条通路均无法工作。
>
> 3.因为网络层要保证可靠传输，所以使用虚电路服务的网络节点交换机也比较昂贵和复              杂。
>
> 数据报
>
> 优点：
>
> 1.每个分组可独立查找转发表进行转发，比较灵活
>
> 2.由于传输网络不提供端到端的可靠传输服务，这就使得网络中的路由器比较简单，且价         格较便宜，这就使得网络造价大大降低。
>
> 缺点：
>
> 1.不能提供可靠的通信服务
>
> 2.分组不能有序到达，可能出现分组的重复或者丢失
>
> 3.因为网络层不提供可靠通信，因此由主机来负责端到端的可靠性，包括差错处理和流量         控制，因此主机的处理负担比较大。

**4-02 网络互连有何实际意义？进行网络互连时，有哪些共同的问题需要解决？**

> 实际意义：
>
> 可以使许多异构网络在逻辑层面上看起来是同一种网络，这样的好处是，当IP网上的主机       进行通信时，就好像在一个单个网络上通信一样。
>
> 网络互连需要解决的问题有：
>
> 1.不同的寻址方案
>
> 2.不同的最大分组长度
>
> 3.不同的网络接入机制
>
> 4.不同的超时控制
>
> 5.不同的差错恢复方法
>
> 6.不同的状态报告方法
>
> 7.不同的路由选择技术
>
> 8.不同的服务（面向连接服务和无连接服务）
>
> 9.不同的管理与控制方式；等等

**4-03 作为中间设备，转发器、网桥、路由器和网关有何区别？**

> 1）物理层使用的中间设备叫做转发器
>
> 2）数据链路层使用的中间设备叫做网桥或桥接器，以及交换机
>
> 3）网络层使用的中间设备叫做路由器
>
> 4）在网络层以上使用的中间设备叫做网关，用网关连接两个不兼容的系统需要在高层进行协议的转换
>
> 转发器和网桥仅仅是将一个网络扩大了，从网络层的角度看来，这仍然是一个网络，并不叫网络的互连。
>
> 因此当我们讨论到网络互连，都是指用路由器进行网络互连和路由选择。
>
> 由于一些历史原因，以前的文献把路由器也叫作网关。

**4-04 试简单说明下列协议的作用：IP，ARP和ICMP。**

> IP协议（Internet Protocol）：使许多异构网络互连，以使这些性能各异的网络在网络层上看起来好像是一个统一的网络。
>
> ARP协议（Address Resolution Protocol）：地址解析协议，将IP地址映射为MAC地址
>
> ICMP协议（Internet Control Message Protocol）：网际控制报文协议，为了有效地转发IP数据报和提高交付成功的机会，在网际层使用了ICMP，ICMP允许主机或路由器报告差错情况和提供有关异常情况的报告。
>
> ![](https://i-blog.csdnimg.cn/blog_migrate/9a38174ae55583e481bd3b9b32e20d1a.png)

**4-05 IP地址如何表示？**

> 整个网络就是一个单一的、抽象的网络。IP地址就是给连接到互联网上的每一台主机（或路由器）的每一个接口，分配一个在全世界范围内是唯一的32位的标识符。
>
> IP地址现在由互联网名字和数字分配机构ICANN进行分配。
>
> 对于主机和路由器来说，IP地址都是32位的二进制代码。为了提高可读性，我们常常将32位的IP地址中的每隔8位插入一个空格（但是在机器中并没有这样的空格），为了人们方便记忆和书写，常用其等效的十进制数字表示，并且在每段数字之间加上一个小数点。这就是点分十进制记法。
>
> ![](https://i-blog.csdnimg.cn/blog_migrate/a2670d86376d3ae3df4278d3ae453993.png)
>
> IP地址不仅标志了这个主机（或路由器），而且还标志了此接口所连接的网络，因此，32位的IP地址采用两级结构，由两个字段组成：网络号+主机号。
>
> 网络号标志主机（或路由器）所连接的到的网络，一个网络号在整个互联网范围内必须是唯一的。
>
> 主机号标志该主机（路由器）。
>
> 因此，一个IP地址在整个互联网范围内是唯一的。
>
> ![](https://i-blog.csdnimg.cn/blog_migrate/cccd21f27da1e652ac077758439a34f8.png)

**4-06 IP地址的主要特点是什么？**

> 1）IP地址在整个互联网范围内是唯一的
>
> 2）所有IP地址是对等的
>
> 3）每个IP地址都是由网络号和主机号两部分组成的
>
> 4）IP地址管理机构在分配IP地址时，只分配网络号，而剩下的主机号由得到该网络号的单位自行分配，这样便于管理。

**4-07 试说明IP地址和MAC地址的区别。为什么要使用这两种不同的地址？**

> IP地址：被称为虚拟地址、软件地址或逻辑地址，IP地址是网络层和以上各层使用的地址，是一种逻辑地址（称IP地址为逻辑地址是因为IP地址是用软件实现的）。
>
> MAC地址：由于MAC地址已固化在网卡的ROM中，因此常将MAC地址称为硬件地址或物理地址。MAC地址是数据链路层使用的地址。
>
> IP地址放在IP数据报的首部，而MAC地址则放在MAC帧的首部。
>
> 为什么要使用这两种不同的地址？
>
> 由于全世界存在着各式各样的网络，它们使用不同的MAC地址。要使这些异构网络能够互相通信就必须进行非常复杂的MAC地址转换工作，因此由用户或用户主机来完成这项工作几乎是不可能的事。
>
> 即使是对分布在全世界的以太网MAC地址进行寻址，也是极其困难的。
>
> 然而IP编址解决了这个问题，连接到互联网的主机只需各自拥有一个IP地址，它们之间的通信就可以像连接在同一个网络上那样简单方便，即便必须多次调用ARP来找到MAC地址，但这个过程都是由计算机软件自动进行的，用户看不见。

**4-08 IP地址方案与我国的电话号码体制的主要不同点是什么？**

> IP地址分为网络号和主机号，它不反映主机地理位置的信息。而电话号码反映有关电话的地理位置的信息，同一地域的电话号码相似。
>
> 注：我国电话号码体制是按照行政区域划分的层次结构，同一地域的电话号码有相同的若干位前缀。号码相似的若干话机，其地理位置应该相距较近。IP地址没有此属性。
>
> [IP地址方案与我国的电话号码体制的主要不同点是什么\_百度知道 (baidu.com)
>
> ![icon-default.png?t=N7T8](https://i-blog.csdnimg.cn/blog_migrate/003a2ce7eb50c2e24a8c624c260c5930.png)
> https://zhidao.baidu.com/question/328934229.html](https://zhidao.baidu.com/question/328934229.html "IP地址方案与我国的电话号码体制的主要不同点是什么_百度知道 (baidu.com)")

**4-09  IP数据报中的首部检验和并不检验数据报中的数据。这样做的最大好处是什么？坏处是什么？**

> 这样做的最大好处是可减少计算的工作量，加快路由器的处理速度。
>
> 坏处是不能及时发现数据部分的错误，只有在到达主机的时候才能检查到错误。

**4-10 当某个路由器发现一IP数据报的检验和有差错时，为什么采取丢弃的办法而不是要求源站重传此数据报？计算首部检验和为什么不采用CRC检验码？**

> 不要求源站重发，是因为地址字段也有可能出错，从而找不到正确的源站。
>
> 不使用CRC，就是为了简化计算。

**4-11 设IP数据报使用固定首部，其各字段的具体数值如图所示（除IP地址外，均为十进制形式表示），试用二进制运算方法计算应当写入到首部检验和字段中的数值（用二进制形式表示）。**

![](https://i-blog.csdnimg.cn/blog_migrate/703b0b805a086a52943413d6db4ab757.png)

> ![](https://i-blog.csdnimg.cn/blog_migrate/d1a866921b444131cd3dd132e20bc89f.png)
>
> 0100 0101 0000 0000
>
> 0000 0000 0001 1100
>
> 0000 0000 0000 0001
>
> 0000 0000 0000 0000
>
> 0000 0100 0001 0001
>
> 0000 0000 0000 0000
>
> 0000 1010 0000 1100
>
> 0000 1110 0000 0101
>
> 0000 1100 0000 0110
>
> 0000 0111 0000 1001
>
> ——————————————
>
> 计算规则，逢二进一，如果最高位有进位，则在得到的结果的最低位加1 。因此得到的结果为0111 0100 0100 1110，取反码为：1000 1011 1011 0001.

**4-12 重新计算上题，但使用十六进制运算方法（每16位二进制数字转换为4个十六进制数字，再按十六进制加法规则计算）。比较这两种方法。**

> 根据题意:
>
> 4 5 0 0
>
> 0 0 1 C
>
> 0 0 0 1
>
> 0 0 0 0
>
> 0 4 1 1
>
> 0 0 0 0
>
> 0 A 0 C
>
> 0 E 0 5
>
> 0 C 0 6
>
> 0 7 0 9
>
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
>
> 计算规则，逢16进1，最高位有进位，则在计算结果的最低位加1，因此得到的结果为744E，
>
> 取反码为8BB1,由此可见，两种计算结果是相等的。

**4-13 什么是最大传送单元MTU？它和IP数据报首部中的哪个字段有关系？**

> 最大传送单元MTU：是数据链路层协议规定的一个数据帧中的数据字段的最大长度。
>
> 当一个IP数据报封装成链路层的帧时，此数据报的总长度（即首部加上数据部分）一定不能超过下面数据链路层所规定的MTU值。例如，最常用的以太网就规定其MTU值是1500字节。如果IP数据报超过了最大传送单元MTU的长度，就必须要进行分片。
>
> MTU与IP数据报的总长度字段有关系。

**4-14 在互联网中将IP数据报分片传送的数据报在最后的目的主机进行组装。还可以有另一种做法，即数据分片后通过一个网络就进行一次组装。试比较这两种方法的优劣。**

> 在目的站而不是在中间的路由器进行组装更好：
>
> 1）路由器处理数据报更简单些
>
> 2）并非所有的数据报片都经过同样的路由器，因此在每一个中间的路由器进行组装可能总会缺少几个数据报片
>
> 3）也许分组后面还要经过一个网络，它还要给这些数据报划分成更小的片。如果在中间的路由器进行组装就可能会组装多次。
>
> [计网｜计算机网络网络层一些必须要懂的重难点课后习题整理（二） - 知乎 (zhihu.com)
>
> ![icon-default.png?t=N7T8](https://i-blog.csdnimg.cn/blog_migrate/003a2ce7eb50c2e24a8c624c260c5930.png)
> https://zhuanlan.zhihu.com/p/407381605](https://zhuanlan.zhihu.com/p/407381605 "计网｜计算机网络网络层一些必须要懂的重难点课后习题整理（二） - 知乎 (zhihu.com)")

**4-15 一个3200位长的TCP报文传到IP层，加上160位的首部后称为数据报。下面的互联网由两个局域网通过路由器连接起来，但第二个局域网所能传送的最长数据帧中的数据部分只有1200位，因此数据报在路由器必须进行分片。试问第二个局域网向其上层要传送多少比特的数据（这里的“数据”当然是指局域网看得见的数据）？**

> 第二个局域网所能传送的最长数据帧中的数据部分只有1200bit，可知每一个IP数据报的最大长度是1200bit，故其数据部分长度为：
>
> 1200 - 160 = 1040 bit
>
> 而TCP交给IP的数据共3200bit  = 1024 + 1024 + 1024 + 128,因此3200bit的数据必须划分为4个数据报片。（数据报分片以8字节为单位，因此每个分片字节数必须是8字节的整数倍，最后一个分片不要求）
>
> 每个数据报片再加上首部信息：
>
> 3200 + 160\*4 = 3840 bit
>
> 因此，第二个局域网向其上层要传送3840比特的数据。

**4-15  （1）试解释为什么ARP高速缓存每存入一个项目就要设置10~20分钟的超时计时器。这个事件设置得太大或太小会出现什么问题？**

**（2）举出至少两种不需要发送ARP请求分组的情况（即不需要请求将某个目的IP地址解析为相应的MAC地址）**

> 1）因为局域网随时可能会加入主机或者路由器（或者移除主机或路由器），随时需要更新IP地址和MAC地址的映射关系。
>
> 如果时间设置的太小，ARP高速缓存记录更新过快，频繁发送ARP请求和应答的时候会占用网络资源，网络负担过重。
>
> 如果时间设置的太长，ARP高速缓存记录更新过慢，可能会使更换网卡之后的主机迟迟无法和该网络上的其他主机通信。
>
> 2）第一种情况：目的IP地址在ARP高速缓存中有记录，直接在缓存里拿，不需要发送ARP                               请求。
>
> 第二种情况：源主机发送的是广播分组。
>
> 第三种情况：源主机和目的主机使用的是点对点链路（PPP）。

**4-17 主机A发送IP数据报给主机B，途中经过了5个路由器。试问在IP数据报的发送过程中总共使用了几次ARP？**

> ![](https://i-blog.csdnimg.cn/blog_migrate/3ce7b065dbc05d83f4e2d73e7c984e4f.png)
>
> 总共使用6次ARP

**4-18 设某路由器建立了如下转发表：**

![](https://i-blog.csdnimg.cn/blog_migrate/b7d717c9009dd9919affc56eea170513.png)

**现共收到5个分组，其目的地址分别为：**

**1）128.96.39.10**

**2）128.96.40.12**

**3）128.96.40.151**

**4）192.4.153.17**

**5）192.4.153.90**

**试分别计算下一跳**

> 1）如果网络号是前26位或者前25位，得到的网络号均为 128.96.39.0，因此匹配的下一跳为接口m0
>
> 2）如果网络号是前26位，得到的网络号为128.96.40.0,如果网络号是前25位，得到的网络号也是128.96.40.0,因此匹配的下一跳为R2
>
> 3）如果网络号是前26位，得到的网络号为128.96.40.128,如果网络号是前25位，得到的网络号也是128.96.40.128,均匹配失败，因此匹配的下一跳为默认路由R4
>
> 4）如果网络号是前26位，得到的网络号为192.4.153.0，如果网络号是前25位，得到的网络号也是192.4.153.0，因此匹配的下一跳为 R3
>
> 5）如果网络号是前26位，得到的网络号为192.4.153.64，如果网络号是前25位，得到的网络号也是192.4.153.0，均匹配失败，因此匹配的下一跳为默认路由R4

**4-19 某单位分配到一个地址块129.250/16.该单位有4000台机器，平均分布在16个不同的地点。试给每一个地点分配一个地址块，并算出每个地址块中IP地址的最小值和最大值。**

> 4000台机器，平均分布在16个不同的地点，那么每个地点的机器台数：
>
> 4000/16 = 250(台）
>
> 那么可以算出，至少需要8位主机号（2^7<250<2^8）,那么子网号有32-16-8 = 8（位）
>
> 因此，
>
> 分配的第一个地址块子网号为0000 0001,因此该地址块的IP地址范围为129.250.1.1~129.250.1.254
>
> 分配的第二个地址块的子网号为0000 0010,因此该地址块的IP地址范围为129.250.2.1~129.250.2.254
>
> 分配的第三个地址块的子网号为0000 0011,因此该地址块的IP地址范围为129.250.3.1~129.250.3.254
>
> 分配的第四个地址块的子网号为0000 0100,因此该地址块的IP地址范围为129.250.4.1~129.250.4.254
>
> 以此类推，第X个地址块的子网号为X,IP地址范围为129.250.X.1~129.250.X.254
>
> (注意，主机号为全0或全1的IP地址不能被分配）

**4-20 一个数据报长度为4000字节（固定首部长度）。现经过一个网络传送，但此网络能够传送的最大数据长度为1500字节。试问应当划分为几个短些的数据报片？各数据报片的数据字段长度、片偏移字段和MF标志应为何数值？**

> 首先应该记住，IP数据报的固定首部长度为20字节。
>
> 因此，可以算出这个数据报的数据部分长度为4000-20=3980字节，因为当前网络所能传送的最大数据长度为1500字节，因此该网络所能传送的最大数据部分为1480字节，3980 = 1480+1480+1020，所以应当划分为3个短些的数据报片：
>
> 第一个数据报片数据字段长度为1480,片偏移字段为0,因为后面还有分片，所以MF = 1
>
> 第二个数据报片数据字段长度为1480,片偏移字段为1480/8 = 185(片偏移是以8个字节为偏移单位），因为后面还有分片，所以MF = 1
>
> 第三个数据报片数据字段长度为1020,片偏移字段为2960/8 = 370,因为这是最后一个分片，所以MF = 0

**4-21 写出互联网的IP层查找路由的算法。**

> 使用CIDR查找路由的算法：
>
> 1）从ISP收到的数据报中提取目的IP地址
>
> 2）把该IP地址分别和ISP的路由器的路由表中的已有的各项的掩码逐位，将逐位与操作后的结果顺序写出
>
> 3）根据最长前缀匹配原则选择目的网络，把收到的数据报转发到所选择的匹配的目的网络
>
> tips：最长前缀匹配原则：在同网段内，掩码越长，越匹配
>
> 使用子网掩码查找路由的算法：
>
> 1）从收到的数据报首部提取目的IP地址
>
> 2）判断是否为直接交付
>
> 对路由器直接相连的网络逐个进行检查，用各网络的子网掩码和目的IP地址逐位相与，若匹配上了，就是直接交付（将IP地址转换成MAC地址，数据报封帧发送），转发任务结束；若没有匹配上，就是间接交付。
>
> 3）若路由表中有目的地址的特点主机路由，则把数据报传送给路由表中指明的下一套路由，否则执行4）
>
> 4）对路由表中的每一行逐个检查，匹配数据报传送给改行指明的下一跳路由器，否则执行步骤5）
>
> 5）若路由器中有一个默认路由，则把数据报传送给指定的默认路由器，否则就报告转发分组出错

**4-22  有如下的4个/24地址块，试进行最大可能的聚合。**

![](https://i-blog.csdnimg.cn/blog_migrate/a31797e501c5b79e273960bdb69646be.png)

> 由于四个地址块前两个字节都相同，只需将每个地址块的第三个字节转换为二进制：
>
> 212.56.1000 0100.0
>
> 212.56.1000 0101.0
>
> 212.56.1000 0110.0
>
> 212.56.1000 0111.0
>
> 可以发现，212.56.1000 01这一部分是相同的，因此可以聚合成212.56.132.0/22

**4-23 有两个CIDR地址块208.128/11和208.130.28/22.是否有哪一个地址块包含了另一个地址？如果有，请指出，并说明理由。**

> 208.128/11地址块包含了208.130.28/22这个地址块，因为前一个地址块的前11位与后一个地址块的前11位是相同的。

**4-24  已知路由器R1的转发表如下所示：**

![](https://i-blog.csdnimg.cn/blog_migrate/e8fd6818099731a78d260e67c8098c2e.png)

**试画出各网络和必要的路由器的连接拓扑，标注出必要的IP地址和接口。对不能确定的情况应当指明。**

> ![](https://i-blog.csdnimg.cn/blog_migrate/e94e0ebcf2c5dc54ce4cef9df56c3703.png)
>
> [(6条消息) 已知路由器R1的路由表如表4-12所示。试画出各网络和必要的路由器的连接拓扑，标注出必要的IP地址和接口。对不能确定的情况应当指明。\_W明Z帝M的博客-CSDN博客\_r1的路由表
>
> ![icon-default.png?t=N7T8](https://i-blog.csdnimg.cn/blog_migrate/003a2ce7eb50c2e24a8c624c260c5930.png)
> https://blog.csdn.net/W8Z8M/article/details/118066081](https://blog.csdn.net/W8Z8M/article/details/118066081 "(6条消息) 已知路由器R1的路由表如表4-12所示。试画出各网络和必要的路由器的连接拓扑，标注出必要的IP地址和接口。对不能确定的情况应当指明。_W明Z帝M的博客-CSDN博客_r1的路由表")

**4-25  一个自治系统分配到的IP地址块为30.138.118/23,并包含有5个局域网，其连接图如图所示，每个局域网上的主机数分别标注在图4-77上。试给出每一个局域网的地址块（包括前缀）。**

![](https://i-blog.csdnimg.cn/blog_migrate/5a6b75c59016b7bab1d8201938a46a94.png)

> 如图，
>
> LAN1下有三个局域网，至少需要分配6（2^2-2<3<2^3-2）个地址；
>
> LAN2至少要分配126个地址（2^6-2<91<2^7-2）;
>
> LAN3至少要分配254个地址（2^7-2<150<2^8-2）;
>
> LAN4至少要分配6个地址（2^2-2<4<2^3-2）;
>
> LAN5至少要分配30个地址（2^4-2<15<2^5-2）;
>
> 因此，如果按照地址从多往少划分，可以是：
>
> LAN1——30.138.118.192/29
>
> LAN2——30.138.118/25
>
> LAN3——30.138.119/24
>
> LAN4——30.138.118.224/29
>
> LAN5——30.138.118.128/27
>
> 上面只是众多划分方法中的一种，还可以有很多划分结果

**4-26 一个大公司有一个总部和三个下属部门。公司分配到的网络前缀是192.77.33/24.公司的网络布局如图4-78所示。总部共有5个局域网，其中的LAN1~LAN4都连接到路由器R1上，R1再通过LAN5与路由器R2相连。R2和远地的三个部门的局域网LAN6~LAN8通过广域网相连。每一个局域网旁边标明的数字是局域网上的主机数。试给每一个局域网分配一个合适的网络前缀。**

![](https://i-blog.csdnimg.cn/blog_migrate/5198efb07533502eabaea72d4a915eeb.png)

> 如果按照主机数由多到少的顺序来分配，可以是（有多种分法，只要地址块不重叠）：
>
> LAN1:192.77.33.0/26(子网号：00）
>
> LAN3:192.77.33.64/27（子网号：010）
>
> LAN8:192.77.33.96/27（子网号：011）
>
> LAN6:192.77.33.128/27（子网号：100）
>
> LAN7:192.77.33.160/27（子网号：101）
>
> LAN2:192.77.33.192/28（子网号：1100）
>
> LAN4:192.77.33.208/28（子网号：1101）
>
> LAN5:192.77.33.224/29（子网号：11100）

**4-27 以下地址中的哪一个和86.32/12匹配？请说明理由？**

**①86.33.224.123 ②86.79.65.216 ③86.58.119.74 ④86.68.206.154**

> 第一个，因为取第一个地址的前12位，与86.32吻合，所以选择第一个，其他三个选项都不吻合。

**4-28 以下的地址前缀中的哪一个地址与2.52.90.140匹配？请说明理由？**

**①0/4 ②32/4 ③4/6 ④80/4**

> 对于①，取2.52.90.140的前4位，等于0，所以匹配
>
> 对于②，取2.52.90.140的前4位，等于0！=32，所以不匹配
>
> 对于③，取2.52.90.140的前6位，等于0！=4，所以不匹配
>
> 对于④，取2.52.90.140的前4位，等于0！=80，所以不匹配

**4-29 下面的前缀中的哪一个和地址152.7.77.159及152.31.47.252都匹配，请说明理由？**

**①152.40/13 ②153.40/9 ③152.64/12 ④152.0/11**

> ④，因为取题目中给的两个地址的前11位，与④都是匹配的，其余选项不符合条件

**4-30 与下列掩码相对应的网络前缀各有多少位？**

**1）192.0.0.0； 2）240.0.0.0； 3）255.224.0.0； 4）255.255.255.252；**

> 掩码中“1 ”的个数就是网络前缀的位数，“0”的个数代表主机号的位数。
>
> 因此：
>
> 1）2位
>
> 2）4位
>
> 3）11位
>
> 4）30位

**4-31 已知地址块中的一个地址是140.120.84.24/20.试求这个地址块中的最小地址和最大地址。地址掩码是什么？地址块中共有多少个地址？相当于多少个C类地址？**

> 根据这个IP地址，可以得到该地址块的网络前缀为140.120.80/20，
>
> 因此，
>
> 最小地址为：140.120.80.0/20，最大地址为：140.120.95.255/20
>
> 地址掩码是：255.255.240.0（前20位都是1，后面全为0）
>
> 地址块中有2^12个地址
>
> 相当于2^12/2^8=16个C类地址

**4-32 已知某地址块中的一个地址是190.87.140.202/29.试重新计算上题。**

> 根据这个IP地址，可以得到该地址块的网络前缀为190.87.140.200，
>
> 因此，
>
> 最小地址为：190.120.87.200/29，最大地址为：190.128.95.207/29
>
> 地址掩码是：255.255.255.248（前29位都是1，后面全为0）
>
> 地址块中有2^3个地址
>
> 相当于2^3/2^8=1/32个C类地址

**4-33 某单位分配到一个地址块136.23.12.64/26.现在需要进一步划分为4个一样大的子网。试问：**

**（1）每一个子网的网络前缀有多长？**

**（2）每一个子网中有多少个地址？**

**（3）每一个子网的地址块是什么？**

**（4）每一个子网可分配给主机使用的最小地址和最大地址是什么？**

> **1）划分为4个子网需要两位子网号，因此每一个子网的网络前缀为26+2=28位**
>
> **2）每一个子网中有32-28 = 4位主机号，因此一共有2^4个地址**
>
> **3）每一个子网的地址块为：**
>
> **①136.23.12.64/28；②136.23.12.80/28；③136.23.12.96/28；④136.23.12.112/28；**
>
> **4）**
>
> **可分配的最小地址          可分配的最大地址**
>
> ①
> **136.23.12.65/28                136.23.12.78/28**
>
> **②      136.23.12.81/28                136.23.12.94/28**
>
> **③      136.23.12.97/28                136.23.12.110/28**
>
> **④      136.23.12.113/28              136.23.12.126/28**

**4-34  IGP和EGP这两类协议的主要区别是什么？**

> IGP-内部网关协议（Interior GateWay Protocol）：即在一个自治系统内部使用的路由选择协议，这与在互联网中的其他自治系统选用什么路由选择协议无关。目前这类路由选择协议使用最多的是RIP和OSPF协议。
>
> EGP-外部网关协议（External GateWay Protocol）：若源主机和目的主机处在不同的自治系统中（这两个自治系统可能使用不同的内部网关协议），那么在不同自治系统AS之间的路由选择，就需要使用外部网关协议EGP，目前使用最多的外部网关协议是BGP的版本4（BGP-4）
>
> ![](https://i-blog.csdnimg.cn/blog_migrate/ec7ac3828eb8edfc763644d0ddf85e59.png)

**4-35 试简述RIP，ODPF和BGP路由选择协议的主要特点？**

> RIP主要特点：
>
> ①是一个内部网关协议，其最大的优点是
> **简单**
>
> ②RIP是基于
> **距离向量**
> 的路由选择协议，RIP对“距离”的定义是：从一路由器到直接连接的网络的距离定义为1；从一主机到非直接连接的网络的距离定义为所经过的路由器+1
>
> ③要求网络中每个路由器都维护从它到其他
> **每一个目的网络的距离**
> 的记录
>
> ④RIP允许一条路径只能包含
> **15**
> 个网络，因此“距离”等于16即相当于
> **不可达**
> ，由此可见，RIP只适用于
> **小型网络**
>
> ⑤RIP要求网络中的路由器仅和
> **相邻路由器**
> 交换信息
>
> ⑥路由器交换的信息是本路由器所知道的
> **全部**
> 信息
>
> ⑦按
> **固定时间间隔**
> 交换路由信息
>
> ⑧“
> **坏消息传的慢**
> ，好消息传得快”——网络出故障的传播时间往往较长
>
> OSPF主要特点：
>
> ①是一个内部网关协议，是为了
> **克服RIP协议的缺点**
> 开发出来的
>
> ②OSPF是基于
> **链路状态**
> 的路由选择协议
>
> ③向本自治系统中
> **所有路由器**
> 发送消息——使用洪泛法
>
> ④发送的消息就是与本路由器相邻的所有路由器的
> **链路状态**
> （只是交换的
> **部分信息**
> ，而非全部信息）
>
> ⑤当链路状态
> **发生变化**
> 或
> **每隔一段时间**
> ，路由器向所有路由器用洪泛法发送链路信息
>
> ⑥由于各路由器之间频繁的交换路由状态信息，因此所有的路由器最后都能建立一个链路状态信息库——即
> **全网的拓扑结构图**
>
> ⑦OSPF的最大优点是
> **更新过程收敛得快**
>
> BGP主要特点：
>
> ①BGP是一种外部网关协议，其着眼点不在于发现和计算路由，而在于
> **控制路由的传播**
> 和
> **选择最佳路由**
>
> ②BGP
> **使用TCP**
> 作为其传输层协议（端口号：179），提高了协议的可靠性
>
> ③BGP是一种
> **距离矢量**
> 路由协议，在设计上就
> **避免了环路**
> 的发生
>
> ④BGP提供了丰富的路由策略，能够实现路由的灵活过滤和选择
>
> ⑤BGP采用
> **触发式增量更新**
> ，而不是周期性更新

**4-36 RIP使用UDP，OSPF使用IP，而BGP使用TCP。这样做有何优点？为什么RIP周期性地和邻站交换路由信息而BGP却不这样做？**

> BGP作为自治系统之间的路由协议，需要携带大量的路由信息，远远超出了IGP携带路由的数量。因此，BGP需要采用一种可靠的协议来承载。BGP选择了TCP协议作为其传输信息的协议，而不是IP/UDP。这样做的好处是：TCP是一种面向连接的协议，自身能够保证数据传输的可靠，通过重传等机制保证路由协议报文在网络中传输的可靠性，因此BGP协议本身可以省去保证传输可靠性的设计工作，简化了协议的设计。
>
> 而RIP、OSPF由于使用的是非面向连接的协议（UDP/IP），UDP/IP协议本身无法保证路由协议报文的可靠传输，因此RIP、OSPF就必须通过自身的协议实现来保证路由协议报文在网络中的可靠传输。为了做到这一点，RIP采用了定期更新的方法，每隔一个固定时间就重传路由，OSPF通过主从协商来做路由更新报文的隐式确认。
>
> [RIP使用UDP,OSPF使用IP,而BGP使用TCP.这样做有何优点 为什么RIP周期性地和邻站交换路由信息而BGP却不这样\_百度知道 (baidu.com)
>
> ![icon-default.png?t=N7T8](https://i-blog.csdnimg.cn/blog_migrate/003a2ce7eb50c2e24a8c624c260c5930.png)
> https://zhidao.baidu.com/question/22380859.html](https://zhidao.baidu.com/question/22380859.html "RIP使用UDP,OSPF使用IP,而BGP使用TCP.这样做有何优点 为什么RIP周期性地和邻站交换路由信息而BGP却不这样_百度知道 (baidu.com)")

**4-37 假定网络中的路由器B的路由表有如下的项目（这三列分别表示“目的网络”“距离”和“下一跳路由器”）：**

![](https://i-blog.csdnimg.cn/blog_migrate/96f0b88c22a3f6b06ce790988ed0cdb0.png)

**现在B收到从C发来的路由信息（这两列表示“目的网络”和“距离”）**

![](https://i-blog.csdnimg.cn/blog_migrate/103864623c65f148f7cf084b75a28a81.png)

**试求出路由器B更新后的路由表（详细说明每一个步骤）**

> 对于第一条信息：目的网络是N2,距离是5，下一跳是C，说明B经由C到N2的路由发生了变化，因此直接更新路由信息。
>
> 对于第二条信息：目的网络是N3,距离是9，下一跳是C，发现原来的路由表没有到N3的路由，因此直接在路由表中加入该路由信息
>
> 对于第三条信息：目的网络是N6,距离是5，下一跳是C，发现原来的路由表中有一条经由B到N6的路由，距离为8>5,因此更新该路由信息
>
> 对于第四条信息：目的网络是N8,距离是4，下一跳是C,发现原来的路由表中有一条经由E到N8的路由，距离为4=4,因此不更新该路由信息
>
> 对于第五条信息：目的网络是N9,距离是6，下一跳是C，发现原来的路由表中有一条经由F到N9的路由，距离为4<6，因此不更新该路由信息
>
> 因此，更新之后的路由表为:
>
> N1       7        A
>
> N2       5        C
>
> N3       9        C
>
> N6       5        C
>
> N8       4        E
>
> N9       4        F

**4-38 网络如图4-79所示。假定AS1和AS4运行程序RIP,AS2和AS3运行程序OSPF。AS之间运行程序eBGP和iBGP。目前先假定在AS2和AS4之间没有物理连接（图中的虚线表示这个假定）**

![](https://i-blog.csdnimg.cn/blog_migrate/1b84c94728ca4d1cde3a0af7544120af.png)

**（1）路由器R3c使用哪一个协议知道前缀X(X在AS4中）？**

**（2）路由器R3a使用哪一个协议知道前缀X?**

**（3）路由器R1c使用哪一个协议知道前缀X?**

**（4）路由器R1d使用哪一个协议知道前缀X?**

> (1)eBGP协议
>
> (2)iBGP协议
>
> (3)eBGP协议
>
> (4)iBGP协议

**4-39  网络同上题。路由器R1d知道前缀X，并将前缀X写入转发表。**

**（1）试问路由器R1d应当从接口1还是接口2转发分组呢？请简述理由。**

**（2）现假定AS2和AS4之间有物理连接，即图中的虚线变成了实线。假定路由器R1d知道到达前缀X可以经过AS2,但也可以经过AS3。试问路由器R1d应当从接口1还是接口2转发分组呢？请简述理由。**

**（3）现假定有另一个AS5处在AS2和AS4之间（图中的虚线之间未画出AS5）。假定路由器R1d知道到达前缀X可以经过路由[AS2 AS5 AS4],但也可以经过路由[AS3 AS4]。试问路由器R1d应当从接口1还是接口2转发分组呢？请简述理由。**

> （1）从接口1转发分组，因为AS4和AS2之间没有物理连接，用接口2的话，路由器之间的转发会更多
>
> （2）从接口2转发分组，AS2和AS4之间有了物理连接，从接口2转发会减少路由器之间的转发时间
>
> （3）从接口1转发分组，因为不知道AS5之间的路由器转发次数，多经过一个AS5可能会多很多次路由器转发，浪费时间

**4-40  IGMP协议的要点是什么？隧道技术在多播中是怎样使用的？**

> IGMP是网际组管理协议，它不是一个单独的协议，而是属于整个网际协议IP的一个组成部分。IGMP并非是在互联网范围内对所有多播组成员进行管理的协议。IGMP不知道多播组包含的成员数，也不知道这些成员都分布在哪些网络上。IGMP协议是让连接在本地局域网上的多播路由器知道本局域网上是否有主机（严格讲，是主机上的某个进程）参加或退出了某个多播组。
>
> 显然，仅有IGMP协议是不能完成多播任务的。连接在局域网上的多播路由器还必须和互联网上的其他多播路由器协同工作，以便把多播数据报用最小代价传送给所有的组成员。这就需要使用多播路由协议。
>
> 从概念上讲，IGMP的工作可分为两个阶段：
>
> ①第一个阶段：当某个主机加入新的多播组时，该主机应向多播组的多播地址发送一个IGMP报文，声明自己要成为该组的成员。本地的多播路由器收到IGMP报文后，还要利用多播路由选择协议把这种组成员关系转发给互联网上的其他多播路由器。
>
> ②第二个阶段：组成员的关系是动态的。本地多播路由器要周期性地探询本地局域网上的主机，以便知道这些主机是否还继续是组的成员。只要有一个主机对某个组响应，那么多播路由器就认为这个组是活跃的。但一个组在经过几次的探询后仍然没有一个主机响应，多播路由器就认为本网络上的主机已经都离开了这个组，因此也就不在把这个组的成员关系转发给其他的多播路由器。
>
> 隧道技术适用于多播组的位置在地理上很分散的情况。例如在下图中，网1和网2都支持多播。现在网1中的主机向网2中的一些主机进行多播。但路由器R1和R2之间的网络并不支持多播，因而R1和R2不能按多播地址转发数据报。为此，路由器R1就对多播数据报再次进行封装，即再加上普通数据报首部，使之成为向单一目的站发送的单播数据报，然后通过“隧道”从R1发送到R2。
>
> ![](https://i-blog.csdnimg.cn/blog_migrate/f1f35bd009682902b018822ec53dbdd0.png)
>
> 单播数据报到达路由器R2后，再由路由器R2剥去其首部，使它又恢复成原来的多播数据报，继续向多个目的站转发。
>
> [百度教育 (baidu.com)
>
> ![icon-default.png?t=N7T8](https://i-blog.csdnimg.cn/blog_migrate/003a2ce7eb50c2e24a8c624c260c5930.png)
> https://easylearn.baidu.com/edu-page/tiangong/questiondetail?id=1726852096618837849&fr=search](https://easylearn.baidu.com/edu-page/tiangong/questiondetail?id=1726852096618837849&fr=search "百度教育 (baidu.com)")

**4-41 什么是VPN？VPN有什么特点和优缺点？VPN有几种类别？**

> VPN——虚拟专用网，用于同一机构之间的主机的之间的通信的“专用网”，这里“专用网”不是真正的专用，而是使用隧道技术使得同一机构之间的主机利用外部的互联网通信，就像主机之间直接使用专用网进行通信一样。
>
> VPN的特点：
>
> （1）安全保障。VPN通过建立一个隧道，利用加密技术对传输数据进行加密，以保证数据的私有和安全性。
>   
> （2）服务质量保证（QoS）。VPN可以为不同要求提供不同等级的服务质量保证。
>   
> （3）可扩充性和灵活性。VPN支持通过Internet和Extranet(外联网，外部网，企业间网络)的任何类型的数据流。
>   
> （4）可管理性。VPN可以从用户和运营商角度方便进行管理。
>
> VPN的优缺点：
>
> 优点：
>
> ①与传统的广域网相比，虚拟专用网能够减少运营成本以及降低远程用户的连接成本。此外，虚拟专用网固定的通讯成本有助于企业更好地了解自己的运营开支。虚拟专用网还能够提供低成本的全球网络机会。
>
> ②虚拟专用网提供一个高水平的安全，使用高级的加密和身份识别协议防止数据被窥探，防止数据窃贼和其它非授权的用户窥探数据。
>
> ③设计良好的宽带虚拟专用网是模块化的和伸缩性的。虚拟专用网技术能够让应用者使用容易设置的互联网基础设施，允许迅速地和方便地向这个网络增加新用户。这个能力意味着企业不必增加额外的基础设施就能够提供大量的网络容量和应用。
>
> ④虚拟专用网能够让移动员工、远程办公人员、业务合作伙伴和其他人利用本地可用的、高速宽带接入技术访问公司的网络，如DSL、线缆和wifi等技术。此外，高速宽带连接为连接远程办公室提供一个节省成本的方法。
>
> 缺点：
>
> ①基于互联网的虚拟专用网的可靠性和性能不再企业的直接控制之下。机构必须依靠提供虚拟专用网的互联网服务提供商保持服务的启动和运行。这个因素对于与互联网服务提供商协商一个服务级协议，从而创建一个保证各种性能指标的协议，是非常重要的。
>
> ②企业创建和部署一个虚拟专用网并不是非常容易。这个技术需要对网路和安全问题有高水平的理解以及认真地规划和配置。因此，选择一个互联网服务提供商处理更多的具体的运营问题是一个好主意。
>
> ③不同厂商的虚拟专用网产品和解决方案并不是总是相互兼容的，因为许多厂商不愿意或者没有能力遵守虚拟专用网技术标准。因此，设备的混合搭配可能引起技术难题。另一方面，使用一家供应商的设备也许会增加成本。
>
> ④虚拟专用网在与无线设备一起使用时会产生安全风险。接入点之间的漫游特别容易出现问题。当用户在接入点之间漫游的时候，任何依靠高水平加密的解决方案都会被攻破。幸运的是有一些第三方解决方案能够解决这个缺陷。
>
> VPN的类别：内联网、外联网、远程接入VPN

**4-42 什么是NAT？NAPT有哪些特点？NAT的优点和缺点有哪些？**

> **NAT：**
>
> NAT是在内部专用网络中使用本地地址，而当内部主机要与外界网络发生联系时，就在边缘路由器或者防火墙处，将内部地址替换成全球地址，即可路由的合法注册地址，从而在外部公共网上正常使用，其具体的做法是把IP包内本地地址域用全球IP地址来替换。
>
> **NAPT特点：**
>
> 将内部连接映射到外部网络中的一个单独的IP地址上，同时在该地址上加上一个由NAT设备选定的TCP端口号，这样就可以使多个拥有本地地址的主机，共用NAT路由器上的一个全球IP地址。
>
> **NAT的优点:**
>
> * 节省全球地址
> * 处理地址交叉
> * 增强灵活性
> * 安全性
>
> **NAT的缺点:**
>
> * 延迟增大
> * 配置和维护的复杂性
> * 不支持某些应用
>
> [什么是NAT?NAPT有哪些特点?NAT的优点和缺点有哪些?NAT的优点和缺点有哪些?\_百度知道 (baidu.com)
>
> ![icon-default.png?t=N7T8](https://i-blog.csdnimg.cn/blog_migrate/003a2ce7eb50c2e24a8c624c260c5930.png)
> https://zhidao.baidu.com/question/159880404.html](https://zhidao.baidu.com/question/159880404.html "什么是NAT?NAPT有哪些特点?NAT的优点和缺点有哪些?NAT的优点和缺点有哪些?_百度知道 (baidu.com)")

4-43 试把下列IPv4地址从二进制记法转换为点分十进制记法。

![](https://i-blog.csdnimg.cn/blog_migrate/e8a04eda4ab93ded52d708a78375cfff.png)

> （1）129.11.11.239
>
> （2）193.131.27.255
>
> （3）231.219.139.111
>
> （4）249.155.251.15

**4-44 假设一段地址的首地址为146.102.29.0，末地址为146.102.32.255，求这个地址段的地址数。**

> （32-29+1）x（255-0+1） = 1024（个）

**4-45 已知一/27网络中有一个地址是167.199.170.82，问这个网络的网络掩码、网络前缀长度和网络后缀长度是多少？**

> 网络掩码：255.255.255.224
>
> 网络前缀长度：27
>
> 网络后缀长度：5

**4-46 已知条件同上题，试求这个地址块的地址数、首地址以及末地址各是多少？**

> 地址数：2^5 = 32
>
> 首地址：167.199.170.64
>
> 末地址：167.199.170.95

**4-47 某单位分配到一个地址块14.24.74.0/24.该单位需要用到三个子网，对这三个子地址块的具体要求是：子网N1需要120个地址，子网N2需要60个地址，子网N3需要10个地址。请给出地址块的分配方案。**

> 要分成三个子网，至少需要两位子网号2^2>3,因此：
>
> 分配方案可以是：
>
> N1:   14.24.74.0/26
>
> N2：14.24.74.128/26
>
> N3:   14.24.74.192/26

**4-48 如图4-80所示，网络145.13.0.0/16划分为四个子网N1,N2,N3和N4.这四个子网与路由器R连接的接口分别是m0，m1，m2和m3.路由器R的第五个接口m4连接到互联网。**

![](https://i-blog.csdnimg.cn/blog_migrate/4fe5fe241a4171f2e98aca1246494110.png)

**（1）试给出路由器R的路由表**

**（2）路由器R收到分组，其目的地址是145.13.160.78.试给出这个分组是怎样被转发的。**

> （1）
>
> 目的网络                子网掩码             下一跳
>
> 145.13.0.0/18          255.255.192.0             m0
>
> 145.13.64.0/18        255.255.192.0             m1
>
> 145.13.128.0/18       255.255.192.0             m2
>
> 145.13.192.0/18      255.255.192.0             m3
>
> 其他                      M                          m4
>
> （2）145.13.160.78由m2转发

**4-49 收到一个分组，其目的地址D = 11.1.2.5。要查找的转发表有这样的三项：**

![](https://i-blog.csdnimg.cn/blog_migrate/ae402f6778f33915d02960c9bb89d56b.png)

**试问在转发这个分组时应当选择哪一个路由？**

> 根据最长前缀匹配原则，虽然三个路由都能匹配上，但是路由3是最长的，因此应该选择路由3.

**4-50 同上题。假定路由1的目的网络 11.0.0.0/8中有一台主机H,其IP地址是11.1.2.3。当我们发送一个分组给主机H时，根据最长前缀匹配准则，上面的这个转发表却把这个分组转发到路由3的目的网络11.1.2.0/24.是最长前缀匹配准则有时会出错吗？**

> 最长前缀匹配准则是没有问题的，问题处在主机H的IP地址
>
> 如果单纯看网络11.0.0.0/8，那么就知道这个网络的前缀是8位，剩下的24位是主机号host-id,因此把host-id = 1.2.3分配给某个主机是完全可以的。
>
> 请注意，网络11.1.2.0/24是网络11.0.0.0/8的一个子网，而IP地址11.1.2.3正是子网11.1.2.0/24的一个合法IP地址。网络11.0.0.0/8在分配本网络的主机号时，不允许重复使用子网11.1.2.0/24中的任何一个地址。这样做会引起网络地址块的重叠，因而引起了混乱。
>
> [百度教育 (baidu.com)
>
> ![icon-default.png?t=N7T8](https://i-blog.csdnimg.cn/blog_migrate/003a2ce7eb50c2e24a8c624c260c5930.png)
> https://easylearn.baidu.com/edu-page/tiangong/questiondetail?id=1727693064409941375&fr=search](https://easylearn.baidu.com/edu-page/tiangong/questiondetail?id=1727693064409941375&fr=search "百度教育 (baidu.com)")

**4-51 已知一CIDR地址块为200.56.168.0/21.**

**（1）试用二进制形式表示这个地址块**

**（2）这个CIDR地址块包括有多少个C类地址块？**

> （1）110 1000.0011 1000.1001 1000.0000 0000
>
> （2）2^(32-21)/2^8 = 2^3(个）

**4-52 建议的IPv6协议没有首部检验和。这样做的优缺点是什么？**

> 优点：
>
> 取消了首部检验和，这样就加快了路由器处理数据报的速度。
>
> 缺点：
>
> 数据链路层已经将有差错的帧丢弃了，因此网络层可以省去这步骤，但不排除也有数据链路层检测不出来的差错，这个概率是极小的。

**4-53 在IPv4首部中有一个“协议”字段，但在IPv6的固定首部中却没有。这是为什么？**

> 在IP数据报传送的路径上的所有路由器都不需要这一字段的信息，只有目的主机才需要协议字段。在IPv6使用“下一个首部”字段完成IPv4中的“协议”字段的功能。

**4-54 当使用IPv6时，协议ARP是否需要改变，如果需要改变，那么应当进行概念性的改变还是技术性的改变？**

> 从概念上讲不需要改变。在技术上由于被请求的IP地址现在变大了因此需要比较大的域（也称段）。
>
> [当使用IPv6时，是否ARP协议需要改变？如果需要改变，那么应当概念性的改变还是 - 找题吧 (zhaotiba.com)
>
> ![icon-default.png?t=N7T8](https://i-blog.csdnimg.cn/blog_migrate/003a2ce7eb50c2e24a8c624c260c5930.png)
> https://www.zhaotiba.com/shiti/9412927.html](https://www.zhaotiba.com/shiti/9412927.html "当使用IPv6时，是否ARP协议需要改变？如果需要改变，那么应当概念性的改变还是 - 找题吧 (zhaotiba.com)")

**4-55 IPv6只允许在源点进行分片。这样做有什么好处？**

> IPV6把分片限制为由源点来完成可以保证采用的最小MTU(1280字节)，或者在发送数据前完成路径最大传送单元，以确定沿着该路径到终点的最小MTU。当需要分片时，源点在发送数据报前先把数据报分片，保证每个数据报片都小于此路径的MTU.因此，分片是端对端的，路径途中的路由器不允许进行分片。
>
> 端对端分片，可以减少路由器开销，简化了中间节点对数据报的处理，允许路由器在单位时间内处理更多的数据报。
>
> [IPv6 只允许在源点进行分片。这样做有什么好处？\_\_牛客网 (nowcoder.com)
>
> ![icon-default.png?t=N7T8](https://i-blog.csdnimg.cn/blog_migrate/003a2ce7eb50c2e24a8c624c260c5930.png)
> https://www.nowcoder.com/questionTerminal/c880c2737f8e404eb5a62f44f2598b06](https://www.nowcoder.com/questionTerminal/c880c2737f8e404eb5a62f44f2598b06 "IPv6 只允许在源点进行分片。这样做有什么好处？__牛客网 (nowcoder.com)")

**4-56 设每隔1微微秒就分配出100万个IPv6地址。试计算大约要用多少年才能将IPv6地址空间玩不用光。可以和宇宙的年龄（大约有100亿年）进行比较。**

> 据计算，
>
> 2^128/10^18/3600/24/265 = 1.08^14（约等于）
>
> 相当于10^3个宇宙的年龄

**4-57 试把以下的IPv6地址用零压缩法写成简洁的形式：**

![](https://i-blog.csdnimg.cn/blog_migrate/4fe224beb8dd5521e7f7699072a5671b.png)

> （1）::F53:6382:AB00:67DB:BB27:7332
>
> （2）::4D:ABCD
>
> （3）::AF36:7328:0:87AA:398
>
> （4）2819:AF::35:CB2:B271

**4-58 试把以下的零压缩的IPv6地址写成原来的形式：**

![](https://i-blog.csdnimg.cn/blog_migrate/fc225c086c45e9e64da09d5a194a2c63.png)

> （1）0000:0000:0000:0000:0000:0000:0000:0000
>
> （2）0000:00AA:0000:0000:0000:0000:0000:0000
>
> （3）0000:1234:0000:0000:0000:0000:0000:0003
>
> （4）0123:0000:0000:0000:0000:0000:0001:0002

**4-59 从IPv4过渡到IPv6的方法有哪些？**

> 由于现在整个互联网的规模太大，因此，“规定一个日期”，从这一天其所有的路由器一律都改用IPv6,显然是不可行的，这样，向IPv6过渡只能采用逐步演进的办法，同时，还必须使新安装的IPv6系统能够向后兼容。
>
> 下面是两种向IPv6过渡的策略：
>
> ①双协议栈：
>
> 指在完全过渡到IPv6之前，使一部分主机（或路由器）同时装有IPv4和IPv6这两种协议，双协议栈主机使用域名系统DNS来查询目的主机使用的是哪一种协议，若DNS返回的是IPv4地址，那么源主机就使用IPv4地址，否则就使用IPv6.但是这种方式需要付出的代价太大，因为要安装上两套协议。
>
> ②隧道技术：
>
> 比上面的方式要好，这种方法的要点就是在IPv6数据报要进入IPv4网络时，把IPv6数据报封装成为IPv4数据报。这样的IPv4数据报从路由器A经过C和D，传送到E时，IPv6数据报就好像在IPv4网络的隧道中传输。
>
> ![](https://i-blog.csdnimg.cn/blog_migrate/3b06fe2ec361234a11dece363b150ff9.png)

**4-60 多协议标签交换MPLS的工作原理是怎样的？它有哪些主要的功能？**

> 工作原理：
>
> 在传统的IP网络中，分组每到达一个路由器，都必须查找路由表，并按照“最长前缀匹配”的原则找到下一跳的IP地址。当网络很大时，查找含有大量项目的路由表要花费很多时间，在出现突发性的通信量时，往往还会使缓存溢出，这就会引起分组丢失、传输时延增大和服务质量下降。
>
> MPLS的一个重要特点就是不用长度可变的IP地址前缀来查找转发表的匹配项目，而是给每一个进入MPLS域的IP数据报打上固定长度的“标记”，然后对打上标记的IP数据报用硬件进行转发，这就使得IP数据报转发的过程省去了每到达一个路由器都要上升到第三层用软件查找路由表的过程，因而IP数据报转发的速率就大大加快了。
>
> 采用硬件技术对打上标记的IP数据报进行转发就称为标记交换，“交换”也表示在转发是=时不再上升到第三层查找转发表，而是根据标记在第二层用硬件进行转发。MPLS可使用多种链路层协议，如PPP、以太网、ATM以及帧中继等。
>
> 主要的功能：
>
> （1）属于一种面向连接的连网技术。
>
> （2）在MPLS域中的各标记交换路由器LSR，使用专门的标记分配协议LDP交换报文，并找出和特定标记相对应的路径。当IP数据报进入MPLS域时就被打上标记，然后在MPLS域的核心部分标记交换路由器LSR利用硬件进行转发，这样就加快了IP数据报的转发速度。
>
> （3）在MPLS的上面可以采用多种协议，但最常用的是IP协议。
>
> （4）具有转发等价类FEC的功能。入口结点并不是给每一个IP数据报指派一个不同的标记，而是将属于同样FEC的IP数据报都指派同样的标记，因而都按照同样方式转发。
>
> （5）MPLS可以把FEC用于负载平衡。网络管理员采用自定义的FEC就可以更好地管理网络的资源。这种均衡网络负载的做法也称为流量工程。

**4-61 SDN的广义转发与传统的基于终点的转发有何区别？**

> ①传统的转发是根据转发表来转发分组，而广义转发是基于“流表”进行转发的。
>
> ②广义转发不仅是转发分组，而且可以把具有相同目的地址的分组从不同的接口转发出去（为了负载均衡）。
>
> ③广义转发还可以重写IP首部，或者可以人为地阻挡或丢弃一些分组。
>
> ④广义转发不仅是可以在网络层，而是可以对应各种层次，所以完成广义转发的设备，不应该称为路由器，而是叫做：分组交换机或OpenFlow交换机。

**4-62 试举出IP数据报首部中能够在OpenFlow1.0中匹配的三个字段。试举出在OpenFlow中不能匹配的三个IP数据报首部。**

> 能够匹配的：IP目的、VLAN优先权、目的MAC
>
> 不能够匹配的：TTL字段、数据报长度、差错检验

**4-63 网络如图4-81所示**

**（1）假定路由器R1把所有发往网络前缀123.1.2.16/29的分组都从接口4转发出去。**

**（2）假定路由器R1要把H1发往123.1.2.16/29的分组从接口4转发出去，而把H2发往123.1.2.16/29的分组从接口3转发出去。**

**试问，在上述两种情况下，你都能够给出路由器R1的转发表吗？转发表只需要给出发往123.1.2.16/29的分组应当从哪一个接口转发出去。**

![](https://i-blog.csdnimg.cn/blog_migrate/182195813b72cd060e2692a19210bb97.png)

> (1)                网络前缀              转发接口
>
> 123.1.2.16/29            接口4
>
> (2)根据题目的条件，无法给出转发表

**4-64 已知一具有4个接口的路由器R1的转发表如表4-11所示，转发表的每一行给出了目的地址的范围，以及对应的转发接口。**

![](https://i-blog.csdnimg.cn/blog_migrate/9cacd5fd6f3bfe829a86e2f78b1a29c3.png)

![](https://i-blog.csdnimg.cn/blog_migrate/30a8f012f9880c62e6cc6dd9a7774ae6.png)
**（1）试把以上转发表改换为另一种形式，其中的目的地址范围改为前缀匹配，而转发表由4行增加为5行**

**（2）若路由器收到一个分组，其目的地址是：**

![](https://i-blog.csdnimg.cn/blog_migrate/67c39f0770ff501bb4b7e3e5214e14db.png)

**试给出每一种情况下分组应当通过的转发接口。**

> （1）转发表如下：
>
> ![](https://i-blog.csdnimg.cn/blog_migrate/39e44d4c4084e91a84dab89f8d28e197.png)
>
> （2）根据最长前缀匹配原则
>
> a.接口2
>
> b.接口1
>
> c.接口2

**4-65 一路由器连接到三个子网，这三个子网共同的前缀是255.2.17/24.假定子网N1要有62台主机，子网N2要有105台主机，而子网N3要有12台主机。试分配这三个子网的前缀。**

> 分配方案可以是:
>
> N2:255.2.17.0/25
>
> N1:255.2.17.128/26
>
> N3:255.2.17.192/28

![](https://i-blog.csdnimg.cn/blog_migrate/64c0f19a82dee892bf2855a35b152304.png)

> ![](https://i-blog.csdnimg.cn/blog_migrate/cf12ea0a9ebef8dc5ad68ae42c538d38.png)
>
> [(15条消息) 计算机网络原理（谢希仁第八版）第四章课后习题答案\_爱栗创的博客-CSDN博客\_计算机网络第八版谢希仁课后答案
>
> ![icon-default.png?t=N7T8](https://i-blog.csdnimg.cn/blog_migrate/003a2ce7eb50c2e24a8c624c260c5930.png)
> https://blog.csdn.net/qq\_51344334/article/details/120637198](https://blog.csdn.net/qq_51344334/article/details/120637198 "(15条消息) 计算机网络原理（谢希仁第八版）第四章课后习题答案_爱栗创的博客-CSDN博客_计算机网络第八版谢希仁课后答案")

68747470733a2f2f62:6c6f672e6373646e2e6e65742f71715f35363931393734302f:61727469636c652f64657461696c732f313238393038353733