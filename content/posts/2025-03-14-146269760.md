---
layout: post
title: "什么是-MyBatis"
date: 2025-03-14 23:57:43 +0800
description: "MyBatis 是一款优秀的持久层框架，用于简化 Java 应用程序与数据库的交互。它提供了一种基于 SQL 映射的持久化方案，避免了 JDBC 繁琐的代码，同时比全自动的 ORM 框架（如 Hibernate）更灵活。✅需要手写 SQL，优化查询性能的项目复杂数据库结构，ORM 框架难以满足需求的场景需要轻量级持久层框架的应用❌需要全自动 ORM，避免写 SQL 的项目（可以考虑 Hibernate）🎯总结：MyBatis 结合了 SQL 的灵活性和 ORM 的便利性，适用于大多数企业级应用。"
keywords: "什么是 MyBatis？"
categories: ['Mybatis']
tags: ['开发', '后端', 'Mybatis', 'Java']
artid: "146269760"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146269760
    alt: "什么是-MyBatis"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146269760
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146269760
cover: https://bing.ee123.net/img/rand?artid=146269760
image: https://bing.ee123.net/img/rand?artid=146269760
img: https://bing.ee123.net/img/rand?artid=146269760
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     什么是 MyBatis？
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
    </p>
    <p>
    </p>
    <h3>
     <a id="1_MyBatis__2">
     </a>
     1️⃣ MyBatis 简介
    </h3>
    <p>
     MyBatis 是一款优秀的
     <strong>
      持久层框架
     </strong>
     ，用于简化 Java 应用程序与数据库的交互。它提供了一种
     <strong>
      基于 SQL 映射
     </strong>
     的持久化方案，避免了 JDBC 繁琐的代码，同时比全自动的 ORM 框架（如 Hibernate）更灵活。
    </p>
    <h4>
     <a id="_MyBatis__6">
     </a>
     📌 MyBatis 主要特点
    </h4>
    <ul>
     <li>
      <strong>
       SQL 映射
      </strong>
      ：开发者可以手写 SQL，更加灵活，适用于复杂查询。
     </li>
     <li>
      <strong>
       简化 JDBC
      </strong>
      ：封装了数据库连接、参数设置、结果映射等步骤。
     </li>
     <li>
      <strong>
       动态 SQL
      </strong>
      ：支持
      <code>
       if
      </code>
      、
      <code>
       choose
      </code>
      、
      <code>
       foreach
      </code>
      等标签，使 SQL 更具适应性。
     </li>
     <li>
      <strong>
       缓存机制
      </strong>
      ：内置一级缓存和可选的二级缓存，提高查询效率。
     </li>
     <li>
      <strong>
       插件扩展
      </strong>
      ：可自定义拦截器，增强 SQL 执行逻辑。
     </li>
    </ul>
    <hr/>
    <h3>
     <a id="2_MyBatis_vs__JDBC_vs_Hibernate__16">
     </a>
     2️⃣ MyBatis vs 传统 JDBC vs Hibernate 📊
    </h3>
    <table>
     <thead>
      <tr>
       <th>
        特性
       </th>
       <th>
        JDBC
       </th>
       <th>
        MyBatis
       </th>
       <th>
        Hibernate
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        <strong>
         开发复杂度
        </strong>
       </td>
       <td>
        需手写 SQL，较复杂
       </td>
       <td>
        需手写 SQL，较灵活
       </td>
       <td>
        无需手写 SQL，自动映射
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         SQL 控制
        </strong>
       </td>
       <td>
        完全手动控制
       </td>
       <td>
        手写 SQL，可动态 SQL
       </td>
       <td>
        由框架生成，难以优化
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         性能
        </strong>
       </td>
       <td>
        可优化，但代码冗长
       </td>
       <td>
        适中，SQL 直接执行
       </td>
       <td>
        可能存在 N+1 查询问题
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         缓存机制
        </strong>
       </td>
       <td>
        无内置缓存
       </td>
       <td>
        一级、二级缓存支持
       </td>
       <td>
        一级、二级缓存 + JPA 级联缓存
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         学习成本
        </strong>
       </td>
       <td>
        低，但需处理大量重复代码
       </td>
       <td>
        适中，需要理解 XML 或注解映射
       </td>
       <td>
        高，需要学习 HQL、映射配置
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     ✅
     <strong>
      总结
     </strong>
     ：如果项目对 SQL 有高度控制需求，且查询较复杂，MyBatis 是一个很好的选择。
    </p>
    <hr/>
    <h3>
     <a id="3_MyBatis___30">
     </a>
     3️⃣ MyBatis 核心组件 🏗️
    </h3>
    <h4>
     <a id="1_SqlSessionFactory_32">
     </a>
     1. SqlSessionFactory
    </h4>
    <ul>
     <li>
      <p>
       <strong>
        作用
       </strong>
       ：创建
       <code>
        SqlSession
       </code>
       ，管理数据库连接。
      </p>
     </li>
     <li>
      <p>
       示例代码：
      </p>
      <pre><code class="prism language-java"><span class="token class-name">InputStream</span> inputStream <span class="token operator">=</span> <span class="token class-name">Resources</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">"mybatis-config.xml"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">SqlSessionFactory</span> sqlSessionFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionFactoryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>inputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
     </li>
    </ul>
    <h4>
     <a id="2_SqlSession_43">
     </a>
     2. SqlSession
    </h4>
    <ul>
     <li>
      <p>
       <strong>
        作用
       </strong>
       ：执行 SQL 语句，管理事务。
      </p>
     </li>
     <li>
      <p>
       示例代码：
      </p>
      <pre><code class="prism language-java"><span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">SqlSession</span> session <span class="token operator">=</span> sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">User</span> user <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">selectOne</span><span class="token punctuation">(</span><span class="token string">"com.example.mapper.UserMapper.selectUser"</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
     </li>
    </ul>
    <h4>
     <a id="3_Mapper_55">
     </a>
     3. Mapper（映射器）
    </h4>
    <ul>
     <li>
      <p>
       <strong>
        作用
       </strong>
       ：定义 SQL 语句的接口，MyBatis 会动态生成实现类。
      </p>
     </li>
     <li>
      <p>
       示例代码：
      </p>
      <pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserMapper</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">"SELECT * FROM users WHERE id = #{id}"</span><span class="token punctuation">)</span>
    <span class="token class-name">User</span> <span class="token function">selectUser</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
     </li>
    </ul>
    <hr/>
    <h3>
     <a id="4_MyBatis___70">
     </a>
     4️⃣ MyBatis 配置文件结构 📂
    </h3>
    <p>
     MyBatis 使用 XML 或 Java 代码进行配置，主要包含以下部分：
    </p>
    <ul>
     <li>
      <code>
       mybatis-config.xml
      </code>
      （核心配置）
     </li>
     <li>
      <code>
       mapper.xml
      </code>
      （SQL 映射文件）
     </li>
    </ul>
    <h4>
     <a id="_mybatisconfigxml__77">
     </a>
     📌
     <code>
      mybatis-config.xml
     </code>
     示例
    </h4>
    <pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environments</span> <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>development<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environment</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>development<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transactionManager</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>JDBC<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dataSource</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>POOLED<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>driver<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.mysql.cj.jdbc.Driver<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>url<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>jdbc:mysql://localhost:3306/test<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>username<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>root<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>123456<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dataSource</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environment</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environments</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
</code></pre>
    <h4>
     <a id="_UserMapperxml__95">
     </a>
     📌
     <code>
      UserMapper.xml
     </code>
     示例
    </h4>
    <pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.example.mapper.UserMapper<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>selectUser<span class="token punctuation">"</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.example.model.User<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        SELECT * FROM users WHERE id = #{id}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">&gt;</span></span>
</code></pre>
    <hr/>
    <h3>
     <a id="5_MyBatis___107">
     </a>
     5️⃣ MyBatis 的典型使用流程 🔄
    </h3>
    <p>
     1️⃣
     <strong>
      加载 MyBatis 配置文件，创建
      <code>
       SqlSessionFactory
      </code>
     </strong>
    </p>
    <p>
     2️⃣
     <strong>
      获取
      <code>
       SqlSession
      </code>
      ，执行 SQL 语句
     </strong>
    </p>
    <p>
     3️⃣
     <strong>
      使用
      <code>
       Mapper
      </code>
      进行数据库操作
     </strong>
    </p>
    <p>
     4️⃣
     <strong>
      提交事务（
      <code>
       openSession(true)
      </code>
      自动提交）
     </strong>
    </p>
    <p>
     5️⃣
     <strong>
      关闭
      <code>
       SqlSession
      </code>
      ，释放资源
     </strong>
    </p>
    <hr/>
    <h3>
     <a id="6___121">
     </a>
     6️⃣ 适用场景与总结 🎯
    </h3>
    <p>
     ✅
     <strong>
      Mybatis适用于：
     </strong>
    </p>
    <ul>
     <li>
      需要
      <strong>
       手写 SQL
      </strong>
      ，优化查询性能的项目
     </li>
     <li>
      复杂数据库结构，ORM 框架难以满足需求的场景
     </li>
     <li>
      需要
      <strong>
       轻量级持久层框架
      </strong>
      的应用
     </li>
    </ul>
    <p>
     ❌
     <strong>
      不适用于：
     </strong>
    </p>
    <ul>
     <li>
      需要全自动 ORM，避免写 SQL 的项目（可以考虑 Hibernate）
     </li>
    </ul>
    <p>
     🎯
     <strong>
      总结
     </strong>
     ：MyBatis 结合了 SQL 的灵活性和 ORM 的便利性，适用于大多数
     <strong>
      企业级应用
     </strong>
     。
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f6d305f37303837313134302f:61727469636c652f64657461696c732f313436323639373630" class_="artid" style="display:none">
 </p>
</div>


