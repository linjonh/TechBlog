---
layout: post
title: "ä»€ä¹ˆæ˜¯-MyBatis"
date: 2025-03-14 23:57:43 +0800
description: "MyBatis æ˜¯ä¸€æ¬¾ä¼˜ç§€çš„æŒä¹…å±‚æ¡†æ¶ï¼Œç”¨äºç®€åŒ– Java åº”ç”¨ç¨‹åºä¸æ•°æ®åº“çš„äº¤äº’ã€‚å®ƒæä¾›äº†ä¸€ç§åŸºäº SQL æ˜ å°„çš„æŒä¹…åŒ–æ–¹æ¡ˆï¼Œé¿å…äº† JDBC ç¹ççš„ä»£ç ï¼ŒåŒæ—¶æ¯”å…¨è‡ªåŠ¨çš„ ORM æ¡†æ¶ï¼ˆå¦‚ Hibernateï¼‰æ›´çµæ´»ã€‚âœ…éœ€è¦æ‰‹å†™ SQLï¼Œä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½çš„é¡¹ç›®å¤æ‚æ•°æ®åº“ç»“æ„ï¼ŒORM æ¡†æ¶éš¾ä»¥æ»¡è¶³éœ€æ±‚çš„åœºæ™¯éœ€è¦è½»é‡çº§æŒä¹…å±‚æ¡†æ¶çš„åº”ç”¨âŒéœ€è¦å…¨è‡ªåŠ¨ ORMï¼Œé¿å…å†™ SQL çš„é¡¹ç›®ï¼ˆå¯ä»¥è€ƒè™‘ Hibernateï¼‰ğŸ¯æ€»ç»“ï¼šMyBatis ç»“åˆäº† SQL çš„çµæ´»æ€§å’Œ ORM çš„ä¾¿åˆ©æ€§ï¼Œé€‚ç”¨äºå¤§å¤šæ•°ä¼ä¸šçº§åº”ç”¨ã€‚"
keywords: "ä»€ä¹ˆæ˜¯ MyBatisï¼Ÿ"
categories: ['Mybatis']
tags: ['å¼€å‘', 'åç«¯', 'Mybatis', 'Java']
artid: "146269760"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146269760
    alt: "ä»€ä¹ˆæ˜¯-MyBatis"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146269760
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146269760
cover: https://bing.ee123.net/img/rand?artid=146269760
image: https://bing.ee123.net/img/rand?artid=146269760
img: https://bing.ee123.net/img/rand?artid=146269760
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     ä»€ä¹ˆæ˜¯ MyBatisï¼Ÿ
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
    </p>
    <p>
    </p>
    <h3>
     <a id="1_MyBatis__2">
     </a>
     1ï¸âƒ£ MyBatis ç®€ä»‹
    </h3>
    <p>
     MyBatis æ˜¯ä¸€æ¬¾ä¼˜ç§€çš„
     <strong>
      æŒä¹…å±‚æ¡†æ¶
     </strong>
     ï¼Œç”¨äºç®€åŒ– Java åº”ç”¨ç¨‹åºä¸æ•°æ®åº“çš„äº¤äº’ã€‚å®ƒæä¾›äº†ä¸€ç§
     <strong>
      åŸºäº SQL æ˜ å°„
     </strong>
     çš„æŒä¹…åŒ–æ–¹æ¡ˆï¼Œé¿å…äº† JDBC ç¹ççš„ä»£ç ï¼ŒåŒæ—¶æ¯”å…¨è‡ªåŠ¨çš„ ORM æ¡†æ¶ï¼ˆå¦‚ Hibernateï¼‰æ›´çµæ´»ã€‚
    </p>
    <h4>
     <a id="_MyBatis__6">
     </a>
     ğŸ“Œ MyBatis ä¸»è¦ç‰¹ç‚¹
    </h4>
    <ul>
     <li>
      <strong>
       SQL æ˜ å°„
      </strong>
      ï¼šå¼€å‘è€…å¯ä»¥æ‰‹å†™ SQLï¼Œæ›´åŠ çµæ´»ï¼Œé€‚ç”¨äºå¤æ‚æŸ¥è¯¢ã€‚
     </li>
     <li>
      <strong>
       ç®€åŒ– JDBC
      </strong>
      ï¼šå°è£…äº†æ•°æ®åº“è¿æ¥ã€å‚æ•°è®¾ç½®ã€ç»“æœæ˜ å°„ç­‰æ­¥éª¤ã€‚
     </li>
     <li>
      <strong>
       åŠ¨æ€ SQL
      </strong>
      ï¼šæ”¯æŒ
      <code>
       if
      </code>
      ã€
      <code>
       choose
      </code>
      ã€
      <code>
       foreach
      </code>
      ç­‰æ ‡ç­¾ï¼Œä½¿ SQL æ›´å…·é€‚åº”æ€§ã€‚
     </li>
     <li>
      <strong>
       ç¼“å­˜æœºåˆ¶
      </strong>
      ï¼šå†…ç½®ä¸€çº§ç¼“å­˜å’Œå¯é€‰çš„äºŒçº§ç¼“å­˜ï¼Œæé«˜æŸ¥è¯¢æ•ˆç‡ã€‚
     </li>
     <li>
      <strong>
       æ’ä»¶æ‰©å±•
      </strong>
      ï¼šå¯è‡ªå®šä¹‰æ‹¦æˆªå™¨ï¼Œå¢å¼º SQL æ‰§è¡Œé€»è¾‘ã€‚
     </li>
    </ul>
    <hr/>
    <h3>
     <a id="2_MyBatis_vs__JDBC_vs_Hibernate__16">
     </a>
     2ï¸âƒ£ MyBatis vs ä¼ ç»Ÿ JDBC vs Hibernate ğŸ“Š
    </h3>
    <table>
     <thead>
      <tr>
       <th>
        ç‰¹æ€§
       </th>
       <th>
        JDBC
       </th>
       <th>
        MyBatis
       </th>
       <th>
        Hibernate
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        <strong>
         å¼€å‘å¤æ‚åº¦
        </strong>
       </td>
       <td>
        éœ€æ‰‹å†™ SQLï¼Œè¾ƒå¤æ‚
       </td>
       <td>
        éœ€æ‰‹å†™ SQLï¼Œè¾ƒçµæ´»
       </td>
       <td>
        æ— éœ€æ‰‹å†™ SQLï¼Œè‡ªåŠ¨æ˜ å°„
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         SQL æ§åˆ¶
        </strong>
       </td>
       <td>
        å®Œå…¨æ‰‹åŠ¨æ§åˆ¶
       </td>
       <td>
        æ‰‹å†™ SQLï¼Œå¯åŠ¨æ€ SQL
       </td>
       <td>
        ç”±æ¡†æ¶ç”Ÿæˆï¼Œéš¾ä»¥ä¼˜åŒ–
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         æ€§èƒ½
        </strong>
       </td>
       <td>
        å¯ä¼˜åŒ–ï¼Œä½†ä»£ç å†—é•¿
       </td>
       <td>
        é€‚ä¸­ï¼ŒSQL ç›´æ¥æ‰§è¡Œ
       </td>
       <td>
        å¯èƒ½å­˜åœ¨ N+1 æŸ¥è¯¢é—®é¢˜
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         ç¼“å­˜æœºåˆ¶
        </strong>
       </td>
       <td>
        æ— å†…ç½®ç¼“å­˜
       </td>
       <td>
        ä¸€çº§ã€äºŒçº§ç¼“å­˜æ”¯æŒ
       </td>
       <td>
        ä¸€çº§ã€äºŒçº§ç¼“å­˜ + JPA çº§è”ç¼“å­˜
       </td>
      </tr>
      <tr>
       <td>
        <strong>
         å­¦ä¹ æˆæœ¬
        </strong>
       </td>
       <td>
        ä½ï¼Œä½†éœ€å¤„ç†å¤§é‡é‡å¤ä»£ç 
       </td>
       <td>
        é€‚ä¸­ï¼Œéœ€è¦ç†è§£ XML æˆ–æ³¨è§£æ˜ å°„
       </td>
       <td>
        é«˜ï¼Œéœ€è¦å­¦ä¹  HQLã€æ˜ å°„é…ç½®
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     âœ…
     <strong>
      æ€»ç»“
     </strong>
     ï¼šå¦‚æœé¡¹ç›®å¯¹ SQL æœ‰é«˜åº¦æ§åˆ¶éœ€æ±‚ï¼Œä¸”æŸ¥è¯¢è¾ƒå¤æ‚ï¼ŒMyBatis æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ã€‚
    </p>
    <hr/>
    <h3>
     <a id="3_MyBatis___30">
     </a>
     3ï¸âƒ£ MyBatis æ ¸å¿ƒç»„ä»¶ ğŸ—ï¸
    </h3>
    <h4>
     <a id="1_SqlSessionFactory_32">
     </a>
     1. SqlSessionFactory
    </h4>
    <ul>
     <li>
      <p>
       <strong>
        ä½œç”¨
       </strong>
       ï¼šåˆ›å»º
       <code>
        SqlSession
       </code>
       ï¼Œç®¡ç†æ•°æ®åº“è¿æ¥ã€‚
      </p>
     </li>
     <li>
      <p>
       ç¤ºä¾‹ä»£ç ï¼š
      </p>
      <pre><code class="prism language-java"><span class="token class-name">InputStream</span> inputStream <span class="token operator">=</span> <span class="token class-name">Resources</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">"mybatis-config.xml"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">SqlSessionFactory</span> sqlSessionFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionFactoryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>inputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
     </li>
    </ul>
    <h4>
     <a id="2_SqlSession_43">
     </a>
     2. SqlSession
    </h4>
    <ul>
     <li>
      <p>
       <strong>
        ä½œç”¨
       </strong>
       ï¼šæ‰§è¡Œ SQL è¯­å¥ï¼Œç®¡ç†äº‹åŠ¡ã€‚
      </p>
     </li>
     <li>
      <p>
       ç¤ºä¾‹ä»£ç ï¼š
      </p>
      <pre><code class="prism language-java"><span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">SqlSession</span> session <span class="token operator">=</span> sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">User</span> user <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">selectOne</span><span class="token punctuation">(</span><span class="token string">"com.example.mapper.UserMapper.selectUser"</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
     </li>
    </ul>
    <h4>
     <a id="3_Mapper_55">
     </a>
     3. Mapperï¼ˆæ˜ å°„å™¨ï¼‰
    </h4>
    <ul>
     <li>
      <p>
       <strong>
        ä½œç”¨
       </strong>
       ï¼šå®šä¹‰ SQL è¯­å¥çš„æ¥å£ï¼ŒMyBatis ä¼šåŠ¨æ€ç”Ÿæˆå®ç°ç±»ã€‚
      </p>
     </li>
     <li>
      <p>
       ç¤ºä¾‹ä»£ç ï¼š
      </p>
      <pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserMapper</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">"SELECT * FROM users WHERE id = #{id}"</span><span class="token punctuation">)</span>
    <span class="token class-name">User</span> <span class="token function">selectUser</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
     </li>
    </ul>
    <hr/>
    <h3>
     <a id="4_MyBatis___70">
     </a>
     4ï¸âƒ£ MyBatis é…ç½®æ–‡ä»¶ç»“æ„ ğŸ“‚
    </h3>
    <p>
     MyBatis ä½¿ç”¨ XML æˆ– Java ä»£ç è¿›è¡Œé…ç½®ï¼Œä¸»è¦åŒ…å«ä»¥ä¸‹éƒ¨åˆ†ï¼š
    </p>
    <ul>
     <li>
      <code>
       mybatis-config.xml
      </code>
      ï¼ˆæ ¸å¿ƒé…ç½®ï¼‰
     </li>
     <li>
      <code>
       mapper.xml
      </code>
      ï¼ˆSQL æ˜ å°„æ–‡ä»¶ï¼‰
     </li>
    </ul>
    <h4>
     <a id="_mybatisconfigxml__77">
     </a>
     ğŸ“Œ
     <code>
      mybatis-config.xml
     </code>
     ç¤ºä¾‹
    </h4>
    <pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environments</span> <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>development<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environment</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>development<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transactionManager</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>JDBC<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dataSource</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>POOLED<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>driver<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.mysql.cj.jdbc.Driver<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>url<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>jdbc:mysql://localhost:3306/test<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>username<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>root<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>123456<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dataSource</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environment</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environments</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
</code></pre>
    <h4>
     <a id="_UserMapperxml__95">
     </a>
     ğŸ“Œ
     <code>
      UserMapper.xml
     </code>
     ç¤ºä¾‹
    </h4>
    <pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.example.mapper.UserMapper<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>selectUser<span class="token punctuation">"</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.example.model.User<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        SELECT * FROM users WHERE id = #{id}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">&gt;</span></span>
</code></pre>
    <hr/>
    <h3>
     <a id="5_MyBatis___107">
     </a>
     5ï¸âƒ£ MyBatis çš„å…¸å‹ä½¿ç”¨æµç¨‹ ğŸ”„
    </h3>
    <p>
     1ï¸âƒ£
     <strong>
      åŠ è½½ MyBatis é…ç½®æ–‡ä»¶ï¼Œåˆ›å»º
      <code>
       SqlSessionFactory
      </code>
     </strong>
    </p>
    <p>
     2ï¸âƒ£
     <strong>
      è·å–
      <code>
       SqlSession
      </code>
      ï¼Œæ‰§è¡Œ SQL è¯­å¥
     </strong>
    </p>
    <p>
     3ï¸âƒ£
     <strong>
      ä½¿ç”¨
      <code>
       Mapper
      </code>
      è¿›è¡Œæ•°æ®åº“æ“ä½œ
     </strong>
    </p>
    <p>
     4ï¸âƒ£
     <strong>
      æäº¤äº‹åŠ¡ï¼ˆ
      <code>
       openSession(true)
      </code>
      è‡ªåŠ¨æäº¤ï¼‰
     </strong>
    </p>
    <p>
     5ï¸âƒ£
     <strong>
      å…³é—­
      <code>
       SqlSession
      </code>
      ï¼Œé‡Šæ”¾èµ„æº
     </strong>
    </p>
    <hr/>
    <h3>
     <a id="6___121">
     </a>
     6ï¸âƒ£ é€‚ç”¨åœºæ™¯ä¸æ€»ç»“ ğŸ¯
    </h3>
    <p>
     âœ…
     <strong>
      Mybatisé€‚ç”¨äºï¼š
     </strong>
    </p>
    <ul>
     <li>
      éœ€è¦
      <strong>
       æ‰‹å†™ SQL
      </strong>
      ï¼Œä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½çš„é¡¹ç›®
     </li>
     <li>
      å¤æ‚æ•°æ®åº“ç»“æ„ï¼ŒORM æ¡†æ¶éš¾ä»¥æ»¡è¶³éœ€æ±‚çš„åœºæ™¯
     </li>
     <li>
      éœ€è¦
      <strong>
       è½»é‡çº§æŒä¹…å±‚æ¡†æ¶
      </strong>
      çš„åº”ç”¨
     </li>
    </ul>
    <p>
     âŒ
     <strong>
      ä¸é€‚ç”¨äºï¼š
     </strong>
    </p>
    <ul>
     <li>
      éœ€è¦å…¨è‡ªåŠ¨ ORMï¼Œé¿å…å†™ SQL çš„é¡¹ç›®ï¼ˆå¯ä»¥è€ƒè™‘ Hibernateï¼‰
     </li>
    </ul>
    <p>
     ğŸ¯
     <strong>
      æ€»ç»“
     </strong>
     ï¼šMyBatis ç»“åˆäº† SQL çš„çµæ´»æ€§å’Œ ORM çš„ä¾¿åˆ©æ€§ï¼Œé€‚ç”¨äºå¤§å¤šæ•°
     <strong>
      ä¼ä¸šçº§åº”ç”¨
     </strong>
     ã€‚
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f6d305f37303837313134302f:61727469636c652f64657461696c732f313436323639373630" class_="artid" style="display:none">
 </p>
</div>


