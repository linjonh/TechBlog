---
layout: post
title: "Docker系列Docker-容器文件拷贝"
date: 2025-03-07 15:28:15 +0800
description: "Docker 容器技术为应用程序的开发和运维提供了极大的便利，但容器与宿主机之间的文件操作仍然是一个重要的环节。通过使用docker cp命令，我们可以轻松地将容器内的文件拷贝到宿主机的指定目录。在实际操作中，需要注意路径的正确性、权限问题以及容器的状态。通过合理使用docker cp命令，可以有效提高开发和运维的效率，确保应用程序的稳定运行。👍🏻呗。❤️❤️❤️本人水平有限，如有纰漏，欢迎各位大佬评论批评指正！😄😄😄👍 👍 👍。"
keywords: "拷贝docker 容器内的文件"
categories: ['S', 'Docker']
tags: ['运维', '容器', 'Docker']
artid: "146096978"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146096978
    alt: "Docker系列Docker-容器文件拷贝"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146096978
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146096978
cover: https://bing.ee123.net/img/rand?artid=146096978
image: https://bing.ee123.net/img/rand?artid=146096978
img: https://bing.ee123.net/img/rand?artid=146096978
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     【Docker系列】Docker 容器文件拷贝
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <blockquote>
     <p>
      💝💝💝欢迎来到我的博客，很高兴能够在这里和您见面！希望您在这里可以感受到一份轻松愉快的氛围，不仅可以获得有趣的内容和知识，也可以畅所欲言、分享您的想法和见解。
      <br/>
      <img alt="img" src="https://img-blog.csdnimg.cn/img_convert/5ce5e68e322584b3aa8304269fb6a2f7.jpeg#pic_center"/>
     </p>
     <ul>
      <li>
       推荐:
       <a href="https://qinyingjie.blog.csdn.net/?type=blog" rel="nofollow">
        kwan 的首页
       </a>
       ,持续学习,不断总结,共同进步,活到老学到老
      </li>
      <li>
       导航
       <ul>
        <li>
         <a href="https://blog.csdn.net/qyj19920704/category_11763029.html">
          檀越剑指大厂系列
         </a>
         :全面总结 java 核心技术,jvm,并发编程 redis,kafka,Spring,微服务等
        </li>
        <li>
         <a href="https://blog.csdn.net/qyj19920704/category_11474211.html">
          常用开发工具系列
         </a>
         :常用的开发工具,IDEA,Mac,Alfred,Git,typora 等
        </li>
        <li>
         <a href="https://blog.csdn.net/qyj19920704/category_11474265.html">
          数据库系列
         </a>
         :详细总结了常用数据库 mysql 技术点,以及工作中遇到的 mysql 问题等
        </li>
        <li>
         <a href="https://meihua150.cn/" rel="nofollow">
          新空间代码工作室
         </a>
         :提供各种软件服务,承接各种毕业设计,毕业论文等
        </li>
        <li>
         <a href="https://blog.csdn.net/qyj19920704/category_7540627.html">
          懒人运维系列
         </a>
         :总结好用的命令,解放双手不香吗?能用一个命令完成绝不用两个操作
        </li>
        <li>
         <a href="https://blog.csdn.net/qyj19920704/category_11480075.html">
          数据结构与算法系列
         </a>
         :总结数据结构和算法,不同类型针对性训练,提升编程思维,剑指大厂
        </li>
       </ul>
      </li>
     </ul>
     <p>
      非常期待和您一起在这个小小的网络世界里共同探索、学习和成长。💝💝💝 ✨✨ 欢迎订阅本专栏 ✨✨
     </p>
    </blockquote>
    <p>
    </p>
    <p>
    </p>
    <h2>
     <a id="Docker__16">
     </a>
     Docker 容器文件拷贝
    </h2>
    <p>
     在现代软件开发和运维中，Docker 容器技术已经成为不可或缺的工具。它通过容器化的方式，为应用程序提供了一种轻量级、可移植的运行环境。然而，随着容器化应用的广泛使用，开发者和运维人员常常会遇到需要在容器和宿主机之间进行文件操作的场景，例如将容器内的配置文件、日志文件或数据文件拷贝到宿主机上。
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/b52a7ab68ff14f3b90c628de1266286c.png#pic_center"/>
    </p>
    <h3>
     <a id="Docker__21">
     </a>
     一、Docker 容器与文件操作的背景
    </h3>
    <p>
     Docker 容器是一个独立的运行环境，它通过隔离的方式运行应用程序，确保应用程序的依赖和运行环境不会受到宿主机或其他容器的干扰。容器内的文件系统是独立的，这意味着容器内的文件默认情况下无法直接访问宿主机的文件系统，反之亦然。然而，在某些情况下，我们可能需要将容器内的文件拷贝到宿主机上，以便进行进一步的分析、备份或配置修改。
    </p>
    <p>
     例如，开发人员可能需要从容器中提取日志文件以排查问题，或者运维人员可能需要将容器内的配置文件拷贝到宿主机上进行修改后再重新加载。这种需求在实际工作中非常常见，因此 Docker 提供了
     <code>
      docker cp
     </code>
     命令，用于在容器和宿主机之间进行文件拷贝操作。
    </p>
    <h3>
     <a id="docker_cp__27">
     </a>
     二、
     <code>
      docker cp
     </code>
     命令的使用方法
    </h3>
    <p>
     <code>
      docker cp
     </code>
     是 Docker 提供的一个强大工具，用于在容器和宿主机之间拷贝文件或目录。它的基本语法如下：
    </p>
    <pre><code class="prism language-bash"><span class="token function">docker</span> <span class="token function">cp</span> <span class="token operator">&lt;</span>container_name_or_id<span class="token operator">&gt;</span>:<span class="token operator">&lt;</span>container_path<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>host_path<span class="token operator">&gt;</span>
</code></pre>
    <ul>
     <li>
      <code>
       &lt;container_name_or_id&gt;
      </code>
      ：表示容器的名称或 ID，可以通过
      <code>
       docker ps
      </code>
      命令查询。
     </li>
     <li>
      <code>
       &lt;container_path&gt;
      </code>
      ：表示容器内的文件或目录路径。
     </li>
     <li>
      <code>
       &lt;host_path&gt;
      </code>
      ：表示宿主机上的目标路径。
     </li>
    </ul>
    <h4>
     <a id="_ID_39">
     </a>
     （一）查询容器名称或 ID
    </h4>
    <p>
     在使用
     <code>
      docker cp
     </code>
     命令之前，我们需要知道目标容器的名称或 ID。可以通过以下命令查询当前运行的容器：
    </p>
    <pre><code class="prism language-bash"><span class="token function">docker</span> <span class="token function">ps</span>
</code></pre>
    <p>
     该命令会列出当前所有正在运行的容器，包括容器的名称、ID、镜像名称、运行状态等信息。例如，输出可能如下所示：
    </p>
    <pre><code>CONTAINER ID   IMAGE          COMMAND                  CREATED         STATUS         PORTS                    NAMES
123456789abc   my-app-image   "python app.py"          2 hours ago     Up 2 hours     0.0.0.0:80-&gt;80/tcp       my-app-container
</code></pre>
    <p>
     从输出中可以看到，容器的名称为
     <code>
      my-app-container
     </code>
     ，容器 ID 为
     <code>
      123456789abc
     </code>
     。在执行
     <code>
      docker cp
     </code>
     命令时，可以使用容器名称或容器 ID 来指定目标容器。
    </p>
    <h4>
     <a id="_56">
     </a>
     （二）容器内文件路径的确定
    </h4>
    <p>
     在执行拷贝操作之前，还需要明确容器内文件的路径。容器内的文件路径是相对于容器根目录的路径。例如，假设容器内有一个文件位于
     <code>
      /app/api/core/workflow/nodes/answer/answer_stream_processor.py
     </code>
     ，那么在
     <code>
      docker cp
     </code>
     命令中，就需要使用这个完整的路径来指定要拷贝的文件。
    </p>
    <h4>
     <a id="_60">
     </a>
     （三）宿主机目标路径的准备
    </h4>
    <p>
     在将文件拷贝到宿主机之前，需要确保宿主机的目标路径已经存在。如果目标路径不存在，
     <code>
      docker cp
     </code>
     命令会报错。可以通过以下命令创建目标路径：
    </p>
    <pre><code class="prism language-bash"><span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /data2/test/aoi/config
</code></pre>
    <p>
     这里，
     <code>
      mkdir -p
     </code>
     命令会创建目标目录及其所有必要的父目录。如果目标路径已经存在，则该命令不会产生任何影响。
    </p>
    <h4>
     <a id="_70">
     </a>
     （四）执行拷贝命令
    </h4>
    <p>
     在确认容器名称或 ID、容器内文件路径和宿主机目标路径之后，就可以执行
     <code>
      docker cp
     </code>
     命令了。例如，将容器中的文件
     <code>
      /app/api/core/workflow/nodes/answer/answer_stream_processor.py
     </code>
     拷贝到宿主机的
     <code>
      /data2/test/aoi/config
     </code>
     目录，可以使用以下命令：
    </p>
    <pre><code class="prism language-bash"><span class="token function">docker</span> <span class="token function">cp</span> my-app-container:/app/api/core/workflow/nodes/answer/answer_stream_processor.py /data2/test/aoi/config
</code></pre>
    <p>
     或者，如果使用容器 ID，命令如下：
    </p>
    <pre><code class="prism language-bash"><span class="token function">docker</span> <span class="token function">cp</span> 123456789abc:/app/api/core/workflow/nodes/answer/answer_stream_processor.py /data2/test/aoi/config
</code></pre>
    <p>
     执行该命令后，文件将被成功拷贝到宿主机的指定目录。
    </p>
    <h3>
     <a id="_86">
     </a>
     三、权限问题与解决方法
    </h3>
    <p>
     在实际操作中，可能会遇到权限问题。例如，如果宿主机的目标路径属于其他用户，或者当前用户没有足够的权限访问容器，
     <code>
      docker cp
     </code>
     命令可能会失败。在这种情况下，可以使用
     <code>
      sudo
     </code>
     来提升命令的权限：
    </p>
    <pre><code class="prism language-bash"><span class="token function">sudo</span> <span class="token function">docker</span> <span class="token function">cp</span> my-app-container:/app/api/core/workflow/nodes/answer/answer_stream_processor.py /data2/test/aoi/config
</code></pre>
    <p>
     使用
     <code>
      sudo
     </code>
     时，需要确保当前用户具有执行该命令的权限，否则会提示权限不足的错误。
    </p>
    <h3>
     <a id="_96">
     </a>
     四、实际应用场景分析
    </h3>
    <h4>
     <a id="_98">
     </a>
     （一）开发与调试
    </h4>
    <p>
     在开发过程中，开发人员可能需要从容器中提取日志文件以排查问题。例如，假设容器内的日志文件位于
     <code>
      /var/log/app.log
     </code>
     ，开发人员可以使用
     <code>
      docker cp
     </code>
     命令将其拷贝到宿主机的
     <code>
      /tmp/logs
     </code>
     目录，然后使用文本编辑器或日志分析工具进行查看和分析。
    </p>
    <h4>
     <a id="_102">
     </a>
     （二）配置文件管理
    </h4>
    <p>
     在运维过程中，运维人员可能需要对容器内的配置文件进行修改。例如，容器内的配置文件位于
     <code>
      /etc/app/config.ini
     </code>
     ，运维人员可以先将其拷贝到宿主机的
     <code>
      /data/config
     </code>
     目录，修改后再将其拷贝回容器中。这种操作方式可以避免直接在容器内修改文件，从而减少对容器文件系统的直接操作，提高系统的稳定性和可维护性。
    </p>
    <h4>
     <a id="_106">
     </a>
     （三）数据备份
    </h4>
    <p>
     在数据管理方面，
     <code>
      docker cp
     </code>
     命令也可以用于备份容器内的数据文件。例如，容器内的数据库文件位于
     <code>
      /var/lib/mysql
     </code>
     ，可以通过
     <code>
      docker cp
     </code>
     命令将其备份到宿主机的
     <code>
      /data/backup
     </code>
     目录，以便在需要时进行恢复。
    </p>
    <h3>
     <a id="_110">
     </a>
     五、注意事项与最佳实践
    </h3>
    <h4>
     <a id="_112">
     </a>
     （一）路径检查
    </h4>
    <p>
     在执行
     <code>
      docker cp
     </code>
     命令之前，务必仔细检查容器内文件路径和宿主机目标路径的正确性。路径错误可能导致命令失败或拷贝错误的文件。
    </p>
    <h4>
     <a id="_116">
     </a>
     （二）文件权限
    </h4>
    <p>
     在将文件拷贝到宿主机后，可能需要调整文件的权限，以确保其他程序或用户可以正确访问该文件。可以通过
     <code>
      chmod
     </code>
     和
     <code>
      chown
     </code>
     命令来修改文件的权限和所有权。
    </p>
    <h4>
     <a id="_120">
     </a>
     （三）容器状态
    </h4>
    <p>
     在执行
     <code>
      docker cp
     </code>
     命令时，容器可以处于运行状态或停止状态。如果容器正在运行，建议在拷贝文件之前确认容器的状态，以避免文件被意外修改或覆盖。
    </p>
    <h4>
     <a id="_124">
     </a>
     （四）文件大小
    </h4>
    <p>
     如果要拷贝的文件较大，拷贝过程可能需要较长时间。在这种情况下，可以通过查看命令的输出来确认拷贝进度。
    </p>
    <h3>
     <a id="_128">
     </a>
     六、总结
    </h3>
    <p>
     Docker 容器技术为应用程序的开发和运维提供了极大的便利，但容器与宿主机之间的文件操作仍然是一个重要的环节。通过使用
     <code>
      docker cp
     </code>
     命令，我们可以轻松地将容器内的文件拷贝到宿主机的指定目录。在实际操作中，需要注意路径的正确性、权限问题以及容器的状态。通过合理使用
     <code>
      docker cp
     </code>
     命令，可以有效提高开发和运维的效率，确保应用程序的稳定运行。
    </p>
    <blockquote>
     <p>
      觉得有用的话点个赞
      <code>
       👍🏻
      </code>
      呗。
      <br/>
      ❤️❤️❤️本人水平有限，如有纰漏，欢迎各位大佬评论批评指正！😄😄😄
     </p>
     <p>
      💘💘💘如果觉得这篇文对你有帮助的话，也请给个点赞、收藏下吧，非常感谢!👍 👍 👍
     </p>
     <p>
      🔥🔥🔥Stay Hungry Stay Foolish 道阻且长,行则将至,让我们一起加油吧！🌙🌙🌙
     </p>
     <p>
      <img alt="img" src="https://img-blog.csdnimg.cn/img_convert/a08571f736dc04b5bef51cd09e8e3a0a.gif#pic_center"/>
     </p>
    </blockquote>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
  <div class="blog-extension-box" id="blogExtensionBox" style="width:400px;margin:auto;margin-top:12px">
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f71796a31393932303730342f:61727469636c652f64657461696c732f313436303936393738" class_="artid" style="display:none">
 </p>
</div>


