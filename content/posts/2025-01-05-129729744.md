---
layout: post
title: "Qt-Creator-与Python混合编程配置"
date: 2025-01-05 00:40:39 +0800
description: "qt creator软件配置python，实现qt与python混合编程_qt creator py"
keywords: "qt creator python"
categories: ['未分类']
tags: ['开发语言', 'Qt', 'Python', 'C']
artid: "129729744"
image:
  path: https://api.vvhan.com/api/bing?rand=sj&artid=129729744
  alt: "Qt-Creator-与Python混合编程配置"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=129729744
featuredImagePreview: https://bing.ee123.net/img/rand?artid=129729744
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Qt Creator 与Python混合编程配置
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <div class="kdocs-document">
     <h2 style="">
      第一步 创建Qt工程
     </h2>
     <div class="kdocs-line-container" style="display:flex;">
      <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:1984px;justify-content:center;align-items:center;height:auto;">
       <div class="kdocs-img" style="padding-top:65.27218%;height:0;">
        <img src="https://i-blog.csdnimg.cn/blog_migrate/e02570826dd6eb5e7e67892278d4bbff.png" style="margin-left:;display:block;width:1984px;margin-top:-65.27218%;height:auto;">
        </img>
       </div>
      </div>
     </div>
     <h2 style="text-align:left;">
      第二步 在项目.pro文件下添加python解释器安装路径
     </h2>
     <div class="kdocs-line-container" style="display:flex;">
      <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:1389px;justify-content:center;align-items:center;height:auto;">
       <div class="kdocs-img" style="padding-top:53.13175%;height:0;">
        <img src="https://i-blog.csdnimg.cn/blog_migrate/286390a3cb0fab4df7440680a8ee2de0.png" style="margin-left:;display:block;width:1389px;margin-top:-53.13175%;height:auto;">
        </img>
       </div>
      </div>
     </div>
     <p style="text-align:left;">
      添加代码如下，大家可复制后更改python版本以及安装路径
     </p>
     <pre class="kdocs-cpp"><code class="language-cpp">INCLUDEPATH += C:\Python\include
LIBS += -LC:\Python\libs -lpython311</code></pre>
     <h2 style="">
      第三步 给项目添加Python文件
     </h2>
     <div class="kdocs-line-container" style="display:flex;">
      <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:523px;justify-content:center;align-items:center;height:auto;">
       <div class="kdocs-img" style="padding-top:79.54111%;height:0;">
        <img src="https://i-blog.csdnimg.cn/blog_migrate/d98dd3108b106ea736bee284bff6b3d7.png" style="margin-left:;display:block;width:523px;margin-top:-79.54111%;height:auto;">
        </img>
       </div>
      </div>
     </div>
     <div class="kdocs-line-container" style="display:flex;">
      <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:1703px;justify-content:center;align-items:center;height:auto;">
       <div class="kdocs-img" style="padding-top:59.130947%;height:0;">
        <img src="https://i-blog.csdnimg.cn/blog_migrate/1e08abbad9fc55d40b25b30f53e4f517.png" style="margin-left:;display:block;width:1703px;margin-top:-59.130947%;height:auto;">
        </img>
       </div>
      </div>
     </div>
     <h2 style="text-align:left;">
      第四步 编写python代码验证安装【简单案例】
     </h2>
     <p style="">
      在创建的python文件里边写入下面代码：
     </p>
     <pre class="kdocs-python"><code class="language-python">def add(a, b):
    return a, b</code></pre>
     <div class="kdocs-line-container" style="display:flex;">
      <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:1498px;justify-content:center;align-items:center;height:auto;">
       <div class="kdocs-img" style="padding-top:30.841122%;height:0;">
        <img src="https://i-blog.csdnimg.cn/blog_migrate/c062eb2efb9b61646ac40c532acf7010.png" style="margin-left:;display:block;width:1498px;margin-top:-30.841122%;height:auto;">
        </img>
       </div>
      </div>
     </div>
     <p style="">
      在.h文件里边加入下面代码：【可以自己创建，我用的是创建项目生成的.h文件】
     </p>
     <pre class="kdocs-cpp"><code class="language-cpp">#include &lt;Python.h&gt;
#include &lt;iostream&gt;
#include &lt;QDebug&gt;</code></pre>
     <div class="kdocs-line-container" style="display:flex;">
      <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:1309px;justify-content:center;align-items:center;height:auto;">
       <div class="kdocs-img" style="padding-top:61.34454%;height:0;">
        <img src="https://i-blog.csdnimg.cn/blog_migrate/47500ab2092bf6145fdf9c578646c26a.png" style="margin-left:;display:block;width:1309px;margin-top:-61.34454%;height:auto;">
        </img>
       </div>
      </div>
     </div>
     <p style="">
      在.h文件对应的.cpp文件里边的函数内加入以下代码：【析构函数不变】
     </p>
     <pre class="kdocs-cpp"><code class="language-cpp">    //Python初始化
    Py_Initialize();
    if( !Py_IsInitialized() )
        qDebug()&lt;&lt;"初始化失败";

    //导入sys模块设置模块地址
    PyRun_SimpleString("import sys");
    PyRun_SimpleString("sys.path.append('./')");

    //创建模块指针
    PyObject* pModule = PyImport_ImportModule("Py_Module");
    if (!pModule)
        qDebug()&lt;&lt;"获取模块指针1失败";

    //创建函数指针
    PyObject* pFunc= PyObject_GetAttrString(pModule,"add");
    if(!pFunc)
        qDebug()&lt;&lt;"获取函数指针2失败";

    //创建函数参数，方法1
    PyObject* pPara = PyTuple_New(2);        // 2个参数
    PyTuple_SetItem(pPara, 0, Py_BuildValue("i",1));  //参数1为int型 1
    PyTuple_SetItem(pPara, 1, Py_BuildValue("i",2));  //参数2为int型 2
    //pPara = Py_BuildValue("(i,i)",1,2); //连写方式

    //创建函数参数，方法2
    PyObject* args = PyTuple_New(2);        // 2个参数
    PyObject* arg1 = PyLong_FromLong(4);    // 参数一设为4
    PyObject* arg2 = PyLong_FromLong(3);    // 参数二设为3
    PyTuple_SetItem(args, 0, arg1);
    PyTuple_SetItem(args, 1, arg2);

    //调用Python函数，传入元组参数pPara
    PyObject *FuncBack = PyObject_CallObject(pFunc,pPara);
    //PyObject_CallObject(pFunc,nullptr); //无参数调用

    //FuncBack是返回值指针，转换获取返回值
    int res = 0;
    PyArg_Parse(FuncBack,"i",&amp;res);
    qDebug()&lt;&lt;"返回值: "&lt;&lt;res;

    //调用结束，销毁
    Py_Finalize();</code></pre>
     <div class="kdocs-line-container" style="display:flex;">
      <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:1785px;justify-content:center;align-items:center;height:auto;">
       <div class="kdocs-img" style="padding-top:61.34454%;height:0;">
        <img src="https://i-blog.csdnimg.cn/blog_migrate/9a139760806acc03bb77bb179517ef81.png" style="margin-left:;display:block;width:1785px;margin-top:-61.34454%;height:auto;">
        </img>
       </div>
      </div>
     </div>
     <div class="kdocs-line-container" style="display:flex;">
      <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:1876px;justify-content:center;align-items:center;height:auto;">
       <div class="kdocs-img" style="padding-top:62.04691%;height:0;">
        <img src="https://i-blog.csdnimg.cn/blog_migrate/fbd31cb71b7480a433b3b47a293c6ab0.png" style="margin-left:;display:block;width:1876px;margin-top:-62.04691%;height:auto;">
        </img>
       </div>
      </div>
     </div>
     <p style="">
      点击运行
     </p>
     <div class="kdocs-line-container" style="display:flex;">
      <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:1077px;justify-content:center;align-items:center;height:auto;">
       <div class="kdocs-img" style="padding-top:44.47539%;height:0;">
        <img src="https://i-blog.csdnimg.cn/blog_migrate/8077b124a7db7ba9b797483ae0fcedbd.png" style="margin-left:;display:block;width:1077px;margin-top:-44.47539%;height:auto;"/>
       </div>
      </div>
     </div>
     <h2 style="">
      特别注意
     </h2>
     <h3 style="">
      一、导入python.h文件报错
     </h3>
     <div class="kdocs-line-container" style="display:flex;">
      <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:1880px;justify-content:center;align-items:center;height:auto;">
       <div class="kdocs-img" style="padding-top:9.946808%;height:0;">
        <img src="https://i-blog.csdnimg.cn/blog_migrate/9fa04663c2c53b814fb6e3344fa50e36.png" style="margin-left:;display:block;width:1880px;margin-top:-9.946808%;height:auto;"/>
       </div>
      </div>
     </div>
     <h4 style="">
      解决方法
     </h4>
     <p style="">
      object.h文件报错一般是因为宏定义冲突的问题，我们在文件报错所在地方加上一行代码取消宏定义就可以了
     </p>
     <pre class="kdocs-cpp"><code class="language-cpp">#undef slots  //取消宏定义</code></pre>
     <div class="kdocs-line-container" style="display:flex;">
      <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:1017px;justify-content:center;align-items:center;height:auto;">
       <div class="kdocs-img" style="padding-top:28.711897%;height:0;">
        <img src="https://i-blog.csdnimg.cn/blog_migrate/feab393904a0a321541f6b5450aa32d6.png" style="margin-left:;display:block;width:1017px;margin-top:-28.711897%;height:auto;"/>
       </div>
      </div>
     </div>
     <h3 style="">
      二、运行后提示找不到.py文件路径或导入.py文件报错
     </h3>
     <h4 style="">
      解决方法
     </h4>
     <p style="">
      将项目下的.py文件复制到项目debug文件夹下
     </p>
     <p style="">
      我的.py文件位置：C:\App\Qt\Qt_project\qt_python1
     </p>
     <p style="">
      我的项目debug文件夹位置：C:\App\Qt\Qt_project\build-qt_python1-Desktop_Qt_5_14_2_MinGW_64_bit-Debug\debug
     </p>
     <div class="kdocs-line-container" style="display:flex;">
      <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:1171px;justify-content:center;align-items:center;height:auto;">
       <div class="kdocs-img" style="padding-top:50.29889%;height:0;">
        <img src="https://i-blog.csdnimg.cn/blog_migrate/6918fe59621b307c0ffa3e0dc46fb088.png" style="margin-left:;display:block;width:1171px;margin-top:-50.29889%;height:auto;"/>
       </div>
      </div>
     </div>
     <div class="kdocs-line-container" style="display:flex;">
      <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:1199px;justify-content:center;align-items:center;height:auto;">
       <div class="kdocs-img" style="padding-top:54.378647%;height:0;">
        <img src="https://i-blog.csdnimg.cn/blog_migrate/35e82dbceb7ed813a2839cb03d613140.png" style="margin-left:;display:block;width:1199px;margin-top:-54.378647%;height:auto;"/>
       </div>
      </div>
     </div>
     <p style="">
     </p>
    </div>

   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f36343931353835352f:61727469636c652f64657461696c732f313239373239373434" class_="artid" style="display:none">
 </p>
</div>
