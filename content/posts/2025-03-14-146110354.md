---
layout: post
title: "C类和对象"
date: 2025-03-14 21:19:12 +0800
description: "类的基本思想是数据抽象（data abstraction）和封装（encapsulation）。数据抽象是一种依赖于接口（interface）和实现（implementatino）分离的编程技术。对象是类的实例，类是对象的模板。"
keywords: "【C++】类和对象"
categories: ['C']
tags: ['开发语言', 'C']
artid: "146110354"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146110354
    alt: "C类和对象"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146110354
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146110354
cover: https://bing.ee123.net/img/rand?artid=146110354
image: https://bing.ee123.net/img/rand?artid=146110354
img: https://bing.ee123.net/img/rand?artid=146110354
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     【C++】类和对象
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-tomorrow-night" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <blockquote>
     <p>
      类的基本思想是
      <strong>
       数据抽象
      </strong>
      （
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         d 
         
        
          a 
         
        
          t 
         
        
          a 
         
        
            
         
        
          a 
         
        
          b 
         
        
          s 
         
        
          t 
         
        
          r 
         
        
          a 
         
        
          c 
         
        
          t 
         
        
          i 
         
        
          o 
         
        
          n 
         
        
       
         data\ abstraction
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.6944em;">
          </span>
          <span class="mord mathnormal">
           d
          </span>
          <span class="mord mathnormal">
           a
          </span>
          <span class="mord mathnormal">
           t
          </span>
          <span class="mord mathnormal">
           a
          </span>
          <span class="mspace">
          </span>
          <span class="mord mathnormal">
           ab
          </span>
          <span class="mord mathnormal">
           s
          </span>
          <span class="mord mathnormal">
           t
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0278em;">
           r
          </span>
          <span class="mord mathnormal">
           a
          </span>
          <span class="mord mathnormal">
           c
          </span>
          <span class="mord mathnormal">
           t
          </span>
          <span class="mord mathnormal">
           i
          </span>
          <span class="mord mathnormal">
           o
          </span>
          <span class="mord mathnormal">
           n
          </span>
         </span>
        </span>
       </span>
      </span>
      ）和
      <strong>
       封装
      </strong>
      （
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         e 
         
        
          n 
         
        
          c 
         
        
          a 
         
        
          p 
         
        
          s 
         
        
          u 
         
        
          l 
         
        
          a 
         
        
          t 
         
        
          i 
         
        
          o 
         
        
          n 
         
        
       
         encapsulation
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;">
          </span>
          <span class="mord mathnormal">
           e
          </span>
          <span class="mord mathnormal">
           n
          </span>
          <span class="mord mathnormal">
           c
          </span>
          <span class="mord mathnormal">
           a
          </span>
          <span class="mord mathnormal">
           p
          </span>
          <span class="mord mathnormal">
           s
          </span>
          <span class="mord mathnormal">
           u
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0197em;">
           l
          </span>
          <span class="mord mathnormal">
           a
          </span>
          <span class="mord mathnormal">
           t
          </span>
          <span class="mord mathnormal">
           i
          </span>
          <span class="mord mathnormal">
           o
          </span>
          <span class="mord mathnormal">
           n
          </span>
         </span>
        </span>
       </span>
      </span>
      ）。数据抽象是一种依赖于
      <strong>
       接口
      </strong>
      （
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         i 
         
        
          n 
         
        
          t 
         
        
          e 
         
        
          r 
         
        
          f 
         
        
          a 
         
        
          c 
         
        
          e 
         
        
       
         interface
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;">
          </span>
          <span class="mord mathnormal">
           in
          </span>
          <span class="mord mathnormal">
           t
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0278em;">
           er
          </span>
          <span class="mord mathnormal" style="margin-right: 0.1076em;">
           f
          </span>
          <span class="mord mathnormal">
           a
          </span>
          <span class="mord mathnormal">
           ce
          </span>
         </span>
        </span>
       </span>
      </span>
      ）和
      <strong>
       实现
      </strong>
      （
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         i 
         
        
          m 
         
        
          p 
         
        
          l 
         
        
          e 
         
        
          m 
         
        
          e 
         
        
          n 
         
        
          t 
         
        
          a 
         
        
          t 
         
        
          i 
         
        
          n 
         
        
          o 
         
        
       
         implementatino
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;">
          </span>
          <span class="mord mathnormal">
           im
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0197em;">
           pl
          </span>
          <span class="mord mathnormal">
           e
          </span>
          <span class="mord mathnormal">
           m
          </span>
          <span class="mord mathnormal">
           e
          </span>
          <span class="mord mathnormal">
           n
          </span>
          <span class="mord mathnormal">
           t
          </span>
          <span class="mord mathnormal">
           a
          </span>
          <span class="mord mathnormal">
           t
          </span>
          <span class="mord mathnormal">
           in
          </span>
          <span class="mord mathnormal">
           o
          </span>
         </span>
        </span>
       </span>
      </span>
      ）分离的编程技术。对象是
      <strong>
       类的实例
      </strong>
      ，类是
      <strong>
       对象的模板
      </strong>
      。
     </p>
    </blockquote>
    <p>
    </p>
    <p>
    </p>
    <hr/>
    <h2>
     <a id="_6">
     </a>
     一、类的定义
    </h2>
    <blockquote>
     <p>
      类
      <strong>
       关键字
      </strong>
      是
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         c 
         
        
          l 
         
        
          a 
         
        
          s 
         
        
          s 
         
        
       
         class
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.6944em;">
          </span>
          <span class="mord mathnormal">
           c
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0197em;">
           l
          </span>
          <span class="mord mathnormal">
           a
          </span>
          <span class="mord mathnormal">
           ss
          </span>
         </span>
        </span>
       </span>
      </span>
      ，定义一个类和定义一个结构体类似，但是类里面不仅可以放
      <strong>
       变量
      </strong>
      ，还可以放
      <strong>
       函数
      </strong>
      。
     </p>
    </blockquote>
    <p>
     <strong>
      C++
     </strong>
     中
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        s 
        
       
         t 
        
       
         r 
        
       
         u 
        
       
         c 
        
       
         t 
        
       
      
        struct
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6151em;">
         </span>
         <span class="mord mathnormal">
          s
         </span>
         <span class="mord mathnormal">
          t
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0278em;">
          r
         </span>
         <span class="mord mathnormal">
          u
         </span>
         <span class="mord mathnormal">
          c
         </span>
         <span class="mord mathnormal">
          t
         </span>
        </span>
       </span>
      </span>
     </span>
     也可以定义类，
     <strong>
      C++
     </strong>
     兼容
     <strong>
      C
     </strong>
     中
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        s 
        
       
         t 
        
       
         r 
        
       
         u 
        
       
         c 
        
       
         t 
        
       
      
        struct
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6151em;">
         </span>
         <span class="mord mathnormal">
          s
         </span>
         <span class="mord mathnormal">
          t
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0278em;">
          r
         </span>
         <span class="mord mathnormal">
          u
         </span>
         <span class="mord mathnormal">
          c
         </span>
         <span class="mord mathnormal">
          t
         </span>
        </span>
       </span>
      </span>
     </span>
     的用法，同时
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        s 
        
       
         t 
        
       
         r 
        
       
         u 
        
       
         c 
        
       
         t 
        
       
      
        struct
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6151em;">
         </span>
         <span class="mord mathnormal">
          s
         </span>
         <span class="mord mathnormal">
          t
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0278em;">
          r
         </span>
         <span class="mord mathnormal">
          u
         </span>
         <span class="mord mathnormal">
          c
         </span>
         <span class="mord mathnormal">
          t
         </span>
        </span>
       </span>
      </span>
     </span>
     升级成了类，明显的变化是
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        s 
        
       
         t 
        
       
         r 
        
       
         u 
        
       
         c 
        
       
         t 
        
       
      
        struct
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6151em;">
         </span>
         <span class="mord mathnormal">
          s
         </span>
         <span class="mord mathnormal">
          t
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0278em;">
          r
         </span>
         <span class="mord mathnormal">
          u
         </span>
         <span class="mord mathnormal">
          c
         </span>
         <span class="mord mathnormal">
          t
         </span>
        </span>
       </span>
      </span>
     </span>
     中可以定义函数，一般情况下我们还是推荐用
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        c 
        
       
         l 
        
       
         a 
        
       
         s 
        
       
         s 
        
       
      
        class
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6944em;">
         </span>
         <span class="mord mathnormal">
          c
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0197em;">
          l
         </span>
         <span class="mord mathnormal">
          a
         </span>
         <span class="mord mathnormal">
          ss
         </span>
        </span>
       </span>
      </span>
     </span>
     定义类。
    </p>
    <pre><code class="prism language-cpp"><span class="token comment">// C++升级struct升级成了类</span>
<span class="token comment">// 1、类⾥⾯可以定义函数</span>
<span class="token comment">// 2、struct名称就可以代表类型</span>
<span class="token comment">// C++兼容C中struct的⽤法</span>
<span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">ListNodeC</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">struct</span> <span class="token class-name">ListNodeC</span><span class="token operator">*</span> next<span class="token punctuation">;</span>
	<span class="token keyword">int</span> val<span class="token punctuation">;</span>
<span class="token punctuation">}</span>LTNode<span class="token punctuation">;</span>

<span class="token comment">// 不再需要typedef，ListNodeCPP就可以代表类型</span>
<span class="token keyword">struct</span> <span class="token class-name">ListNodeCPP</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">void</span> <span class="token function">Init</span><span class="token punctuation">(</span><span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		next <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span>
		val <span class="token operator">=</span> x<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	ListNodeCPP<span class="token operator">*</span> next<span class="token punctuation">;</span>
	<span class="token keyword">int</span> val<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	LTNode nc<span class="token punctuation">;</span>
	ListNodeCPP ncpp<span class="token punctuation">;</span>

	ncpp<span class="token punctuation">.</span><span class="token function">Init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> ncpp<span class="token punctuation">.</span>val <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>	<span class="token comment">// 0</span>

	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <h3>
     <a id="1__46">
     </a>
     1. 类的概念及定义
    </h3>
    <p>
     类中的内容称为
     <strong>
      类的成员
     </strong>
     ：
    </p>
    <ol>
     <li>
      类的
      <strong>
       变量
      </strong>
      称为类的
      <strong>
       属性
      </strong>
      或
      <strong>
       成员变量
      </strong>
      。
     </li>
     <li>
      类的
      <strong>
       函数
      </strong>
      称为类的
      <strong>
       方法
      </strong>
      或
      <strong>
       成员函数
      </strong>
      。
     </li>
    </ol>
    <p>
     <code>
      注意：类定义结束时后⾯分号不能省略（和结构体类似）
     </code>
    </p>
    <p>
     例如，用
     <strong>
      C++
     </strong>
     的类
     <strong>
      封装
     </strong>
     一些
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        S 
        
       
         t 
        
       
         a 
        
       
         c 
        
       
         k 
        
       
      
        Stack
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6944em;">
         </span>
         <span class="mord mathnormal">
          St
         </span>
         <span class="mord mathnormal">
          a
         </span>
         <span class="mord mathnormal">
          c
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0315em;">
          k
         </span>
        </span>
       </span>
      </span>
     </span>
     的简单功能：
    </p>
    <pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">Stack</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token comment">// 成员函数（方法）</span>

	<span class="token keyword">void</span> <span class="token function">Init</span><span class="token punctuation">(</span><span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		a <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token operator">*</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>
		capacity <span class="token operator">=</span> n<span class="token punctuation">;</span>
		top <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">void</span> <span class="token function">Push</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token comment">// ...扩容</span>
		a<span class="token punctuation">[</span>top<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> x<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">int</span> <span class="token function">Top</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> a<span class="token punctuation">[</span>top <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">void</span> <span class="token function">Destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">free</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
		a <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span>
		top <span class="token operator">=</span> capacity <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
<span class="token keyword">private</span><span class="token operator">:</span>	
	<span class="token comment">// 成员变量（属性）</span>

	<span class="token keyword">int</span><span class="token operator">*</span> a<span class="token punctuation">;</span>

	size_t capacity<span class="token punctuation">;</span>
	
	size_t top<span class="token punctuation">;</span>

<span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// 分号不能省略</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	Stack st<span class="token punctuation">;</span> st<span class="token punctuation">.</span><span class="token function">Init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	st<span class="token punctuation">.</span><span class="token function">Push</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	st<span class="token punctuation">.</span><span class="token function">Push</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	cout <span class="token operator">&lt;&lt;</span> st<span class="token punctuation">.</span><span class="token function">Top</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	
	st<span class="token punctuation">.</span><span class="token function">Destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     成功调用四个函数，最终结果应该返回栈顶值
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        2 
        
       
      
        2
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6444em;">
         </span>
         <span class="mord">
          2
         </span>
        </span>
       </span>
      </span>
     </span>
     ：
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/97df4460896946cea226e80d79372214.png"/>
    </p>
    <blockquote>
     <p>
      为了
      <strong>
       区分成员变量
      </strong>
      ，⼀般习惯上成员变量会加⼀个
      <strong>
       特殊标识
      </strong>
      ，如成员变量前面或者后面加
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         _ 
         
        
       
         \_
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.4306em; vertical-align: -0.31em;">
          </span>
          <span class="mord" style="margin-right: 0.0278em;">
           _
          </span>
         </span>
        </span>
       </span>
      </span>
      或者
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         m 
         
        
       
         m
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.4306em;">
          </span>
          <span class="mord mathnormal">
           m
          </span>
         </span>
        </span>
       </span>
      </span>
      开头，注意C++中这个并不是强制的，只是⼀些惯例，具体看公司的要求。
     </p>
    </blockquote>
    <p>
     用一个日期类来举例：
    </p>
    <pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">Date</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token keyword">void</span> <span class="token function">Init</span><span class="token punctuation">(</span><span class="token keyword">int</span> year<span class="token punctuation">,</span> <span class="token keyword">int</span> month<span class="token punctuation">,</span> <span class="token keyword">int</span> day<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		_year <span class="token operator">=</span> year<span class="token punctuation">;</span>
		_month <span class="token operator">=</span> month<span class="token punctuation">;</span>
		_day <span class="token operator">=</span> day<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token comment">// 为了区分成员变量，⼀般习惯上成员变量</span>
	<span class="token comment">// 会加⼀个特殊标识，如_ 或者 m开头</span>
	<span class="token keyword">int</span> _year<span class="token punctuation">;</span> <span class="token comment">// year_ m_year</span>
	<span class="token keyword">int</span> _month<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _day<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	Date d<span class="token punctuation">;</span>
	d<span class="token punctuation">.</span><span class="token function">Init</span><span class="token punctuation">(</span><span class="token number">2024</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">31</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     这里主要是为了和初始化函数
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        I 
        
       
         n 
        
       
         i 
        
       
         t 
        
       
         ( 
        
       
         ) 
        
       
      
        Init()
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 1em; vertical-align: -0.25em;">
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0785em;">
          I
         </span>
         <span class="mord mathnormal">
          ni
         </span>
         <span class="mord mathnormal">
          t
         </span>
         <span class="mopen">
          (
         </span>
         <span class="mclose">
          )
         </span>
        </span>
       </span>
      </span>
     </span>
     的形参变量作区分。（这里命名都希望使
     <strong>
      各变量意义明确
     </strong>
     ，因此才会命名冲突）
    </p>
    <ul>
     <li>
      注意：定义在类里面的成员函数默认为
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         i 
         
        
          n 
         
        
          l 
         
        
          i 
         
        
          n 
         
        
          e 
         
        
       
         inline
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.6944em;">
          </span>
          <span class="mord mathnormal">
           in
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0197em;">
           l
          </span>
          <span class="mord mathnormal">
           in
          </span>
          <span class="mord mathnormal">
           e
          </span>
         </span>
        </span>
       </span>
      </span>
      （声明和定义分离就不是内联了，定义函数的时候需要加域作用限定符）。
     </li>
    </ul>
    <h3>
     <a id="2__149">
     </a>
     2. 访问限定符
    </h3>
    <blockquote>
     <p>
      <strong>
       C++
      </strong>
      一种实现
      <strong>
       封装
      </strong>
      的方式，用类将对象的
      <strong>
       属性与方法结合
      </strong>
      在⼀块，让对象更加完善，通过
      <strong>
       访问权限
      </strong>
      选择性的将其接口提供给外部的用户使用。
     </p>
    </blockquote>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/875b9f7402ea4122ad10fc6a09a6479d.png"/>
    </p>
    <ol>
     <li>
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         p 
         
        
          u 
         
        
          b 
         
        
          l 
         
        
          i 
         
        
          c 
         
        
       
         public
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;">
          </span>
          <span class="mord mathnormal">
           p
          </span>
          <span class="mord mathnormal">
           u
          </span>
          <span class="mord mathnormal">
           b
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0197em;">
           l
          </span>
          <span class="mord mathnormal">
           i
          </span>
          <span class="mord mathnormal">
           c
          </span>
         </span>
        </span>
       </span>
      </span>
     </li>
    </ol>
    <p>
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        p 
        
       
         u 
        
       
         b 
        
       
         l 
        
       
         i 
        
       
         c 
        
       
      
        public
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;">
         </span>
         <span class="mord mathnormal">
          p
         </span>
         <span class="mord mathnormal">
          u
         </span>
         <span class="mord mathnormal">
          b
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0197em;">
          l
         </span>
         <span class="mord mathnormal">
          i
         </span>
         <span class="mord mathnormal">
          c
         </span>
        </span>
       </span>
      </span>
     </span>
     修饰的成员在类外可以
     <strong>
      直接被访问
     </strong>
     。
    </p>
    <ol start="2">
     <li>
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         p 
         
        
          r 
         
        
          i 
         
        
          v 
         
        
          a 
         
        
          t 
         
        
          e 
         
        
       
         private
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.854em; vertical-align: -0.1944em;">
          </span>
          <span class="mord mathnormal">
           p
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0278em;">
           r
          </span>
          <span class="mord mathnormal">
           i
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0359em;">
           v
          </span>
          <span class="mord mathnormal">
           a
          </span>
          <span class="mord mathnormal">
           t
          </span>
          <span class="mord mathnormal">
           e
          </span>
         </span>
        </span>
       </span>
      </span>
      和
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         p 
         
        
          r 
         
        
          o 
         
        
          t 
         
        
          e 
         
        
          c 
         
        
          t 
         
        
          e 
         
        
          d 
         
        
       
         protected
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;">
          </span>
          <span class="mord mathnormal">
           p
          </span>
          <span class="mord mathnormal">
           ro
          </span>
          <span class="mord mathnormal">
           t
          </span>
          <span class="mord mathnormal">
           ec
          </span>
          <span class="mord mathnormal">
           t
          </span>
          <span class="mord mathnormal">
           e
          </span>
          <span class="mord mathnormal">
           d
          </span>
         </span>
        </span>
       </span>
      </span>
     </li>
    </ol>
    <p>
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        p 
        
       
         r 
        
       
         o 
        
       
         t 
        
       
         e 
        
       
         c 
        
       
         t 
        
       
         e 
        
       
         d 
        
       
      
        protected
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;">
         </span>
         <span class="mord mathnormal">
          p
         </span>
         <span class="mord mathnormal">
          ro
         </span>
         <span class="mord mathnormal">
          t
         </span>
         <span class="mord mathnormal">
          ec
         </span>
         <span class="mord mathnormal">
          t
         </span>
         <span class="mord mathnormal">
          e
         </span>
         <span class="mord mathnormal">
          d
         </span>
        </span>
       </span>
      </span>
     </span>
     和
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        p 
        
       
         r 
        
       
         i 
        
       
         v 
        
       
         a 
        
       
         t 
        
       
         e 
        
       
      
        private
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.854em; vertical-align: -0.1944em;">
         </span>
         <span class="mord mathnormal">
          p
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0278em;">
          r
         </span>
         <span class="mord mathnormal">
          i
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0359em;">
          v
         </span>
         <span class="mord mathnormal">
          a
         </span>
         <span class="mord mathnormal">
          t
         </span>
         <span class="mord mathnormal">
          e
         </span>
        </span>
       </span>
      </span>
     </span>
     修饰的成员在类外
     <strong>
      不能直接被访问
     </strong>
     。（
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        p 
        
       
         r 
        
       
         o 
        
       
         t 
        
       
         e 
        
       
         c 
        
       
         t 
        
       
         e 
        
       
         d 
        
       
      
        protected
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;">
         </span>
         <span class="mord mathnormal">
          p
         </span>
         <span class="mord mathnormal">
          ro
         </span>
         <span class="mord mathnormal">
          t
         </span>
         <span class="mord mathnormal">
          ec
         </span>
         <span class="mord mathnormal">
          t
         </span>
         <span class="mord mathnormal">
          e
         </span>
         <span class="mord mathnormal">
          d
         </span>
        </span>
       </span>
      </span>
     </span>
     和
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        p 
        
       
         r 
        
       
         i 
        
       
         v 
        
       
         a 
        
       
         t 
        
       
         e 
        
       
      
        private
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.854em; vertical-align: -0.1944em;">
         </span>
         <span class="mord mathnormal">
          p
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0278em;">
          r
         </span>
         <span class="mord mathnormal">
          i
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0359em;">
          v
         </span>
         <span class="mord mathnormal">
          a
         </span>
         <span class="mord mathnormal">
          t
         </span>
         <span class="mord mathnormal">
          e
         </span>
        </span>
       </span>
      </span>
     </span>
     是一样的，以后
     <strong>
      继承
     </strong>
     章节才能体现出他们的区别）
    </p>
    <blockquote>
     <p>
      一般
      <strong>
       成员变量
      </strong>
      都会被限制为
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         p 
         
        
          r 
         
        
          i 
         
        
          v 
         
        
          a 
         
        
          t 
         
        
          e 
         
        
          / 
         
        
          p 
         
        
          r 
         
        
          o 
         
        
          t 
         
        
          e 
         
        
          c 
         
        
          t 
         
        
          e 
         
        
          d 
         
        
       
         private/protected
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 1em; vertical-align: -0.25em;">
          </span>
          <span class="mord mathnormal">
           p
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0278em;">
           r
          </span>
          <span class="mord mathnormal">
           i
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0359em;">
           v
          </span>
          <span class="mord mathnormal">
           a
          </span>
          <span class="mord mathnormal">
           t
          </span>
          <span class="mord mathnormal">
           e
          </span>
          <span class="mord">
           /
          </span>
          <span class="mord mathnormal">
           p
          </span>
          <span class="mord mathnormal">
           ro
          </span>
          <span class="mord mathnormal">
           t
          </span>
          <span class="mord mathnormal">
           ec
          </span>
          <span class="mord mathnormal">
           t
          </span>
          <span class="mord mathnormal">
           e
          </span>
          <span class="mord mathnormal">
           d
          </span>
         </span>
        </span>
       </span>
      </span>
      ，需要给别人使用的
      <strong>
       成员函数
      </strong>
      才会放为
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         p 
         
        
          u 
         
        
          b 
         
        
          l 
         
        
          i 
         
        
          c 
         
        
       
         public
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;">
          </span>
          <span class="mord mathnormal">
           p
          </span>
          <span class="mord mathnormal">
           u
          </span>
          <span class="mord mathnormal">
           b
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0197em;">
           l
          </span>
          <span class="mord mathnormal">
           i
          </span>
          <span class="mord mathnormal">
           c
          </span>
         </span>
        </span>
       </span>
      </span>
      。
     </p>
    </blockquote>
    <pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">Stack</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token keyword">void</span> <span class="token function">Init</span><span class="token punctuation">(</span><span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		a <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token operator">*</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>
		capacity <span class="token operator">=</span> n<span class="token punctuation">;</span>
		top <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">void</span> <span class="token function">Push</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token comment">// ...扩容</span>
		a<span class="token punctuation">[</span>top<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> x<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">int</span> <span class="token function">Top</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> a<span class="token punctuation">[</span>top <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">void</span> <span class="token function">Destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">free</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
		a <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span>
		top <span class="token operator">=</span> capacity <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token keyword">int</span><span class="token operator">*</span> a<span class="token punctuation">;</span>
	size_t capacity<span class="token punctuation">;</span>
	size_t top<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	Stack st<span class="token punctuation">;</span> 
	
	<span class="token comment">//成员函数都是public权限（可以访问）</span>
	st<span class="token punctuation">.</span><span class="token function">Init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	st<span class="token punctuation">.</span><span class="token function">Push</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	st<span class="token punctuation">.</span><span class="token function">Push</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> st<span class="token punctuation">.</span><span class="token function">Top</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	st<span class="token punctuation">.</span><span class="token function">Destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//成员变量都是private权限（不可以访问）</span>
	st<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span> <span class="token comment">//error C2248: “Stack::capacity”: 无法访问 private 成员(在“Stack”类中声明)</span>
	st<span class="token punctuation">.</span>capacity <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">//error C2248: “Stack::capacity”: 无法访问 private 成员(在“Stack”类中声明)</span>
	st<span class="token punctuation">.</span>top <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">//error C2248: “Stack::top”: 无法访问 private 成员(在“Stack”类中声明)</span>

	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <ul>
     <li>
      <strong>
       访问权限作用域：
      </strong>
      从该访问限定符出现的位置开始直到下一个访问限定符出现时为止。（如果后面没有访问限定符，作用域就到
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         } 
         
        
       
         \}
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 1em; vertical-align: -0.25em;">
          </span>
          <span class="mclose">
           }
          </span>
         </span>
        </span>
       </span>
      </span>
      即类结束）
     </li>
     <li>
      <strong>
       定义成员没有被访问限定符修饰时：
      </strong>
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         c 
         
        
          l 
         
        
          a 
         
        
          s 
         
        
          s 
         
        
       
         class
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.6944em;">
          </span>
          <span class="mord mathnormal">
           c
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0197em;">
           l
          </span>
          <span class="mord mathnormal">
           a
          </span>
          <span class="mord mathnormal">
           ss
          </span>
         </span>
        </span>
       </span>
      </span>
      <strong>
       默认
      </strong>
      为
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         p 
         
        
          r 
         
        
          i 
         
        
          v 
         
        
          a 
         
        
          t 
         
        
          e 
         
        
       
         private
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.854em; vertical-align: -0.1944em;">
          </span>
          <span class="mord mathnormal">
           p
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0278em;">
           r
          </span>
          <span class="mord mathnormal">
           i
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0359em;">
           v
          </span>
          <span class="mord mathnormal">
           a
          </span>
          <span class="mord mathnormal">
           t
          </span>
          <span class="mord mathnormal">
           e
          </span>
         </span>
        </span>
       </span>
      </span>
      ，
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         s 
         
        
          t 
         
        
          r 
         
        
          u 
         
        
          c 
         
        
          t 
         
        
       
         struct
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.6151em;">
          </span>
          <span class="mord mathnormal">
           s
          </span>
          <span class="mord mathnormal">
           t
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0278em;">
           r
          </span>
          <span class="mord mathnormal">
           u
          </span>
          <span class="mord mathnormal">
           c
          </span>
          <span class="mord mathnormal">
           t
          </span>
         </span>
        </span>
       </span>
      </span>
      <strong>
       默认
      </strong>
      为
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         p 
         
        
          u 
         
        
          b 
         
        
          l 
         
        
          i 
         
        
          c 
         
        
       
         public
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;">
          </span>
          <span class="mord mathnormal">
           p
          </span>
          <span class="mord mathnormal">
           u
          </span>
          <span class="mord mathnormal">
           b
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0197em;">
           l
          </span>
          <span class="mord mathnormal">
           i
          </span>
          <span class="mord mathnormal">
           c
          </span>
         </span>
        </span>
       </span>
      </span>
      。
     </li>
    </ul>
    <h3>
     <a id="3__217">
     </a>
     3. 类域
    </h3>
    <blockquote>
     <p>
      <strong>
       类定义了一个新的作用域
      </strong>
      ，类的所有成员都在类的作用域中，在
      <strong>
       类体外
      </strong>
      定义成员时，需要
      <strong>
       使用
       <span class="katex--inline">
        <span class="katex">
         <span class="katex-mathml">
          : 
          
         
           : 
          
         
        
          ::
         </span>
         <span class="katex-html">
          <span class="base">
           <span class="strut" style="height: 0.4306em;">
           </span>
           <span class="mrel">
            ::
           </span>
          </span>
         </span>
        </span>
       </span>
       作用域操作符指明
      </strong>
      成员属于哪个类域。
     </p>
    </blockquote>
    <pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">Stack</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token keyword">void</span> <span class="token function">Init</span><span class="token punctuation">(</span><span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token keyword">int</span><span class="token operator">*</span> a<span class="token punctuation">;</span>
	<span class="token keyword">int</span> capacity<span class="token punctuation">;</span>
	<span class="token keyword">int</span> top<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">//编译错误</span>
<span class="token keyword">void</span> <span class="token function">Init</span><span class="token punctuation">(</span><span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	a <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token operator">*</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//error C2065: “a”: 未声明的标识符</span>
	capacity <span class="token operator">=</span> n<span class="token punctuation">;</span>						<span class="token comment">//error C2065: “capacity”: 未声明的标识符</span>
	top <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>							<span class="token comment">//error C2065 : “top”: 未声明的标识符</span>
<span class="token punctuation">}</span>

<span class="token comment">//正确写法：声明和定义分离，需要指定类域</span>
<span class="token keyword">void</span> <span class="token class-name">Stack</span><span class="token double-colon punctuation">::</span><span class="token function">Init</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	a <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token operator">*</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>
	capacity <span class="token operator">=</span> n<span class="token punctuation">;</span>
	top <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	Stack st<span class="token punctuation">;</span>
	st<span class="token punctuation">.</span><span class="token function">Init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     类域影响的是
     <strong>
      编译的查找规则
     </strong>
     ，如果不指名类域，编译器就会
     <strong>
      默认当作全局变量或全局函数
     </strong>
     ；只有指定类域，编译器才会当作成员函数或成员变量。
    </p>
    <hr/>
    <h2>
     <a id="_261">
     </a>
     二、实例化
    </h2>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/fc8a4b63965641eabac2bf9f2ba7ae8f.png"/>
    </p>
    <blockquote>
     <p>
      <strong>
       类好比是一个图纸
      </strong>
      ，而
      <strong>
       实例化
      </strong>
      产生的
      <strong>
       对象就是按照图纸建造的房子
      </strong>
      。
     </p>
    </blockquote>
    <p>
     类是对象进行一种抽象描述，是一个模型一样的东西，限定了类有哪些成员变量，这些成员变量只是声明，没有分配空间，用类实例化出对象时，才会分配空间。
    </p>
    <h3>
     <a id="1__268">
     </a>
     1. 实例化概念
    </h3>
    <blockquote>
     <p>
      ⽤
      <strong>
       类类型
      </strong>
      在
      <strong>
       物理内存
      </strong>
      中创建对象的过程，称为类
      <strong>
       实例化
      </strong>
      出对象。
     </p>
    </blockquote>
    <p>
     这里还是用日期类来举例：
    </p>
    <pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">Date</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token keyword">void</span> <span class="token function">Init</span><span class="token punctuation">(</span><span class="token keyword">int</span> year<span class="token punctuation">,</span> <span class="token keyword">int</span> month<span class="token punctuation">,</span> <span class="token keyword">int</span> day<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		_year <span class="token operator">=</span> year<span class="token punctuation">;</span>
		_month <span class="token operator">=</span> month<span class="token punctuation">;</span>
		_day <span class="token operator">=</span> day<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">void</span> <span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> _year <span class="token operator">&lt;&lt;</span> <span class="token string">"/"</span> <span class="token operator">&lt;&lt;</span> _month <span class="token operator">&lt;&lt;</span> <span class="token string">"/"</span> <span class="token operator">&lt;&lt;</span> _day <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token comment">// 这⾥只是声明，没有开空间</span>
	<span class="token keyword">int</span> _year<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _month<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _day<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">// Date类实例化出对象d1和d2</span>
	Date d1<span class="token punctuation">,</span> d2<span class="token punctuation">;</span>

	d1<span class="token punctuation">.</span><span class="token function">Init</span><span class="token punctuation">(</span><span class="token number">2025</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">28</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	d1<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	d2<span class="token punctuation">.</span><span class="token function">Init</span><span class="token punctuation">(</span><span class="token number">2025</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">31</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	d2<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     打印出来的信息就是对象示例化后的信息：
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/12856133b58d4527b00a92e2559f3d24.png"/>
    </p>
    <p>
     ⼀个类可以实例化出多个对象，实例化出的对象占用实际的物理空间，存储类成员变量。
    </p>
    <h3>
     <a id="2__313">
     </a>
     2. 对象大小
    </h3>
    <p>
     <br/>
     <em>
      <strong>
       类实例化出的每个对象，都有独立的数据空间，所以对象中肯定包含成员变量，那么成员函数是否包含呢？
      </strong>
     </em>
    </p>
    <p>
     首先函数被编译后是一段指令，对象中没办法存储，这些指令存储在一个单独的区域（
     <strong>
      代码段
     </strong>
     ），那么对象中非要存储的话，只能是
     <strong>
      成员函数的指针
     </strong>
     。
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/812d2109f9464df2bde25559677e92c2.png"/>
    </p>
    <p>
     第一种方式当然是全部存储，将成员变量和成员函数指针都存储起来，但如果实例化
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        10000 
        
       
      
        10000
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6444em;">
         </span>
         <span class="mord">
          10000
         </span>
        </span>
       </span>
      </span>
     </span>
     个对象，则需要存储
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        10000 
        
       
      
        10000
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6444em;">
         </span>
         <span class="mord">
          10000
         </span>
        </span>
       </span>
      </span>
     </span>
     个成员函数指针，而这些函数指针都指向同一块空间，函数指针被重复存储了
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        10000 
        
       
      
        10000
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6444em;">
         </span>
         <span class="mord">
          10000
         </span>
        </span>
       </span>
      </span>
     </span>
     次！这显然浪费空间。
    </p>
    <blockquote>
     <p>
      其实
      <strong>
       函数指针是不需要存储的
      </strong>
      ，函数指针是⼀个地址，调用函数被编译成汇编指令
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         [ 
         
        
          c 
         
        
          a 
         
        
          l 
         
        
          l 
         
        
           地址 
         
        
          ] 
         
        
       
         [call\ 地址]
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 1em; vertical-align: -0.25em;">
          </span>
          <span class="mopen">
           [
          </span>
          <span class="mord mathnormal">
           c
          </span>
          <span class="mord mathnormal">
           a
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0197em;">
           ll
          </span>
          <span class="mspace">
          </span>
          <span class="mord cjk_fallback">
           地址
          </span>
          <span class="mclose">
           ]
          </span>
         </span>
        </span>
       </span>
      </span>
      ， 其实
      <strong>
       编译器在编译链接时，就要找到函数的地址，不是在运行时找
      </strong>
      ，只有动态多态是在运行时找，才需要存储函数的地址。
     </p>
    </blockquote>
    <p>
     因此就有了第二种存储方式 ——
     <strong>
      只存放类的成员变量
     </strong>
     ，类的成员函数则放在
     <strong>
      公共代码区
     </strong>
     ：
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/933cbc69a0d14f2d851d56062b8ef65b.png">
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/0a9994b21d9d4577a861e52d13304cd9.png"/>
     </img>
    </p>
    <blockquote>
     <p>
      上面我们分析了
      <strong>
       对象中只存储成员变量
      </strong>
      ，C++规定类实例化的对象也要符合
      <strong>
       内存对齐
      </strong>
      的规则。
     </p>
    </blockquote>
    <p>
     <em>
      <strong>
       内存对齐规则：
      </strong>
     </em>
    </p>
    <ol>
     <li>
      第一个成员在结构体（类）偏移量为
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         0 
         
        
       
         0
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.6444em;">
          </span>
          <span class="mord">
           0
          </span>
         </span>
        </span>
       </span>
      </span>
      的地址处。
     </li>
     <li>
      其他成员变量要对齐到某个数字（对齐数）的整数倍的地址处。
     </li>
    </ol>
    <p>
     <span class="katex--display">
      <span class="katex-display">
       <span class="katex">
        <span class="katex-mathml">
         对齐数 
         
        
          = 
         
        
          = 
         
        
          m 
         
        
          i 
         
        
          n 
         
        
          ( 
         
        
          编译器默认对齐数 
         
        
          ( 
         
        
          V 
         
        
          S 
         
        
          默认对齐数为 
         
        
          8 
         
        
          ) 
         
        
          , 
         
        
          该成员变量大小 
         
        
          ) 
         
        
       
         对齐数 == min(编译器默认对齐数(VS默认对齐数为8),该成员变量大小)
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.6833em;">
          </span>
          <span class="mord cjk_fallback">
           对齐数
          </span>
          <span class="mspace" style="margin-right: 0.2778em;">
          </span>
          <span class="mrel">
           ==
          </span>
          <span class="mspace" style="margin-right: 0.2778em;">
          </span>
         </span>
         <span class="base">
          <span class="strut" style="height: 1em; vertical-align: -0.25em;">
          </span>
          <span class="mord mathnormal">
           min
          </span>
          <span class="mopen">
           (
          </span>
          <span class="mord cjk_fallback">
           编译器默认对齐数
          </span>
          <span class="mopen">
           (
          </span>
          <span class="mord mathnormal" style="margin-right: 0.2222em;">
           V
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0576em;">
           S
          </span>
          <span class="mord cjk_fallback">
           默认对齐数为
          </span>
          <span class="mord">
           8
          </span>
          <span class="mclose">
           )
          </span>
          <span class="mpunct">
           ,
          </span>
          <span class="mspace" style="margin-right: 0.1667em;">
          </span>
          <span class="mord cjk_fallback">
           该成员变量大小
          </span>
          <span class="mclose">
           )
          </span>
         </span>
        </span>
       </span>
      </span>
     </span>
    </p>
    <blockquote>
     <p>
      <span class="katex--display">
       <span class="katex-display">
        <span class="katex">
         <span class="katex-mathml">
          结构体（类）总大小为：最大对齐数（ 
          
         
           m 
          
         
           i 
          
         
           n 
          
         
           ( 
          
         
           编译器默认对齐数 
          
         
           , 
          
         
           m 
          
         
           a 
          
         
           x 
          
         
           { 
          
         
           所有变量类型 
          
         
           } 
          
         
           ) 
          
         
            ）的整数倍。 
          
         
        
          结构体（类）总大小为：最大对齐数（ min(编译器默认对齐数,max\{所有变量类型\})\ ）的整数倍。
         </span>
         <span class="katex-html">
          <span class="base">
           <span class="strut" style="height: 1em; vertical-align: -0.25em;">
           </span>
           <span class="mord cjk_fallback">
            结构体（类）总大小为：最大对齐数（
           </span>
           <span class="mord mathnormal">
            min
           </span>
           <span class="mopen">
            (
           </span>
           <span class="mord cjk_fallback">
            编译器默认对齐数
           </span>
           <span class="mpunct">
            ,
           </span>
           <span class="mspace" style="margin-right: 0.1667em;">
           </span>
           <span class="mord mathnormal">
            ma
           </span>
           <span class="mord mathnormal">
            x
           </span>
           <span class="mopen">
            {
            <!-- -->
           </span>
           <span class="mord cjk_fallback">
            所有变量类型
           </span>
           <span class="mclose">
            })
           </span>
           <span class="mspace">
           </span>
           <span class="mord cjk_fallback">
            ）的整数倍。
           </span>
          </span>
         </span>
        </span>
       </span>
      </span>
     </p>
    </blockquote>
    <p>
     <strong>
      如果嵌套了结构体（类）的情况
     </strong>
     ：
    </p>
    <ol>
     <li>
      嵌套的结构体（类）对齐到自己的最大对齐数的整数倍处
     </li>
     <li>
      结构体（类）的整体大小就是
      <strong>
       所有最大对齐数
      </strong>
      （含嵌套结构体（类）的对齐数）
      <strong>
       的整数倍
      </strong>
      。
     </li>
    </ol>
    <pre><code class="prism language-cpp"><span class="token comment">// 计算⼀下A/B/C实例化的对象是多大？</span>

<span class="token comment">//A:既有成员函数，又有成员变量</span>
<span class="token keyword">class</span> <span class="token class-name">A</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token keyword">void</span> <span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> _ch <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>		<span class="token comment">//因此最大对齐数为：4 Byte（2个成员变量因此对象大小为：8）</span>
	<span class="token keyword">char</span> _ch<span class="token punctuation">;</span>	<span class="token comment">//大小为 1 Byte</span>
	<span class="token keyword">int</span> _i<span class="token punctuation">;</span>		<span class="token comment">//大小为 4 Byte</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">//B:只有成员函数</span>
<span class="token keyword">class</span> <span class="token class-name">B</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token keyword">void</span> <span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token comment">//...</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">//C:空</span>
<span class="token keyword">class</span> <span class="token class-name">C</span>	
<span class="token punctuation">{<!-- --></span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	A a<span class="token punctuation">;</span> B b<span class="token punctuation">;</span> C c<span class="token punctuation">;</span>
	
	cout <span class="token operator">&lt;&lt;</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>	<span class="token comment">// 8</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>	<span class="token comment">// 1</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>	<span class="token comment">// 1</span>

	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     运行结果为：
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/05591d19a68343f5b81ffd6dbd40d0e2.png"/>
    </p>
    <p>
     通过上述结果我们发现：
     <strong>
      没有成员变量
     </strong>
     的
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        B 
        
       
      
        B
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6833em;">
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0502em;">
          B
         </span>
        </span>
       </span>
      </span>
     </span>
     和
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        C 
        
       
      
        C
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6833em;">
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0715em;">
          C
         </span>
        </span>
       </span>
      </span>
     </span>
     类对象的大小是
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        1 
        
       
      
        1
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6444em;">
         </span>
         <span class="mord">
          1
         </span>
        </span>
       </span>
      </span>
     </span>
     。
    </p>
    <p>
     <em>
      <strong>
       为什么没有成员变量还要给 1 个字节呢？
      </strong>
     </em>
    </p>
    <p>
     因为如果一个字节都不给，怎么表示对象存在过呢！所以这里给1字节，纯粹是为了
     <strong>
      占位标识对象存在
     </strong>
     。
    </p>
    <hr/>
    <h2>
     <a id="this__399">
     </a>
     三、this 指针
    </h2>
    <blockquote>
     <p>
      既然类中只存储成员变量，成员函数都存放到了公共代码区，那么
      <em>
       <strong>
        我们在创建的不同对象要访问同一个函数的时候应该如何区分呢？
       </strong>
      </em>
      那么这里就要看到C++给了一个
      <strong>
       隐含
      </strong>
      的
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         t 
         
        
          h 
         
        
          i 
         
        
          s 
         
        
       
         this
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.6944em;">
          </span>
          <span class="mord mathnormal">
           t
          </span>
          <span class="mord mathnormal">
           hi
          </span>
          <span class="mord mathnormal">
           s
          </span>
         </span>
        </span>
       </span>
      </span>
      指针解决这里的问题。
     </p>
    </blockquote>
    <p>
     这里我们还是用日期类来举例：
    </p>
    <pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">Date</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token comment">// void Init(Date* const this, int year, int month, int day)</span>
	<span class="token keyword">void</span> <span class="token function">Init</span><span class="token punctuation">(</span><span class="token keyword">int</span> year<span class="token punctuation">,</span> <span class="token keyword">int</span> month<span class="token punctuation">,</span> <span class="token keyword">int</span> day<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">this</span><span class="token operator">-&gt;</span>_year <span class="token operator">=</span> year<span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token operator">-&gt;</span>_month <span class="token operator">=</span> month<span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token operator">-&gt;</span>_day <span class="token operator">=</span> day<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
	<span class="token comment">// void Print(Date* const this)</span>
	<span class="token keyword">void</span> <span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token keyword">this</span><span class="token operator">-&gt;</span>_year <span class="token operator">&lt;&lt;</span> <span class="token string">"/"</span> <span class="token operator">&lt;&lt;</span> <span class="token keyword">this</span><span class="token operator">-&gt;</span>_month <span class="token operator">&lt;&lt;</span> <span class="token string">"/"</span> <span class="token operator">&lt;&lt;</span> <span class="token keyword">this</span><span class="token operator">-&gt;</span>_day <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token comment">// 这里只是声明，没有开空间</span>
	<span class="token keyword">int</span> _year<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _month<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _day<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	Date d1<span class="token punctuation">,</span> d2<span class="token punctuation">;</span>

	<span class="token comment">// d1.Init(&amp;d1, 2025, 3, 9)</span>
	d1<span class="token punctuation">.</span><span class="token function">Init</span><span class="token punctuation">(</span><span class="token number">2025</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// d2.Init(&amp;d1, 2005, 8, 23)</span>
	d2<span class="token punctuation">.</span><span class="token function">Init</span><span class="token punctuation">(</span><span class="token number">2005</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">23</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// d1.Print(&amp;d1)</span>
	d1<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// d2.Print(&amp;d2)</span>
	d2<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     编译器编译后，类的成员函数默认都会在
     <strong>
      形参第一个位置
     </strong>
     ，增加一个
     <strong>
      当前类类型
     </strong>
     的指针
     <code>
      Date* const this
     </code>
     ，叫做
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        t 
        
       
         h 
        
       
         i 
        
       
         s 
        
       
      
        this
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6944em;">
         </span>
         <span class="mord mathnormal">
          t
         </span>
         <span class="mord mathnormal">
          hi
         </span>
         <span class="mord mathnormal">
          s
         </span>
        </span>
       </span>
      </span>
     </span>
     指针。
    </p>
    <p>
     在各个对象调用函数的时候会默认把当前对象的地址传给第一个参数。（这里用日期类定义的的对象
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        d 
         
        
          1 
         
        
       
      
        d_1
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.8444em; vertical-align: -0.15em;">
         </span>
         <span class="mord">
          <span class="mord mathnormal">
           d
          </span>
          <span class="msupsub">
           <span class="vlist-t vlist-t2">
            <span class="vlist-r">
             <span class="vlist" style="height: 0.3011em;">
              <span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;">
               <span class="pstrut" style="height: 2.7em;">
               </span>
               <span class="sizing reset-size6 size3 mtight">
                <span class="mord mtight">
                 1
                </span>
               </span>
              </span>
             </span>
             <span class="vlist-s">
              ​
             </span>
            </span>
            <span class="vlist-r">
             <span class="vlist" style="height: 0.15em;">
              <span class="">
              </span>
             </span>
            </span>
           </span>
          </span>
         </span>
        </span>
       </span>
      </span>
     </span>
     来举例：
     <code>
      d1.Init(&amp;d1, 2025, 3, 9)
     </code>
     ）
    </p>
    <p>
     这样在函数调用的时候，每个函数都能通过
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        t 
        
       
         h 
        
       
         i 
        
       
         s 
        
       
      
        this
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6944em;">
         </span>
         <span class="mord mathnormal">
          t
         </span>
         <span class="mord mathnormal">
          hi
         </span>
         <span class="mord mathnormal">
          s
         </span>
        </span>
       </span>
      </span>
     </span>
     指针来找到
     <strong>
      对应对象的成员变量
     </strong>
     。
     <code>
      this-&gt;_year = year;
     </code>
    </p>
    <blockquote>
     <p>
      <strong>
       注意：
      </strong>
      C++规定不能在
      <strong>
       实参和形参
      </strong>
      的位置显式地写
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         t 
         
        
          h 
         
        
          i 
         
        
          s 
         
        
       
         this
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.6944em;">
          </span>
          <span class="mord mathnormal">
           t
          </span>
          <span class="mord mathnormal">
           hi
          </span>
          <span class="mord mathnormal">
           s
          </span>
         </span>
        </span>
       </span>
      </span>
      指针(编译时编译器会处理)，但是可以在
      <strong>
       函数体内
      </strong>
      显式使用
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         t 
         
        
          h 
         
        
          i 
         
        
          s 
         
        
       
         this
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.6944em;">
          </span>
          <span class="mord mathnormal">
           t
          </span>
          <span class="mord mathnormal">
           hi
          </span>
          <span class="mord mathnormal">
           s
          </span>
         </span>
        </span>
       </span>
      </span>
      指针。
     </p>
    </blockquote>
    <p>
     有一个面试题这么考过：
    </p>
    <p>
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        Q 
        
       
         ： 
        
       
         t 
        
       
         h 
        
       
         i 
        
       
         s 
        
       
         指针存在内存哪个区域的（  
        
       
         A 
        
       
          ） 
        
       
      
        Q：this指针存在内存哪个区域的 （\ A\ ）
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;">
         </span>
         <span class="mord mathnormal">
          Q
         </span>
         <span class="mord cjk_fallback">
          ：
         </span>
         <span class="mord mathnormal">
          t
         </span>
         <span class="mord mathnormal">
          hi
         </span>
         <span class="mord mathnormal">
          s
         </span>
         <span class="mord cjk_fallback">
          指针存在内存哪个区域的（
         </span>
         <span class="mspace">
         </span>
         <span class="mord mathnormal">
          A
         </span>
         <span class="mspace">
         </span>
         <span class="mord cjk_fallback">
          ）
         </span>
        </span>
       </span>
      </span>
     </span>
    </p>
    <p>
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        A 
        
       
         . 
        
       
         栈   
        
       
         B 
        
       
         . 
        
       
         堆   
        
       
         C 
        
       
         . 
        
       
         静态区   
        
       
         D 
        
       
         . 
        
       
         常量区   
        
       
         E 
        
       
         . 
        
       
         对象里面 
        
       
      
        A. 栈\ \ B.堆\ \ C.静态区\ \ D.常量区\ \ E.对象里面
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6833em;">
         </span>
         <span class="mord mathnormal">
          A
         </span>
         <span class="mord">
          .
         </span>
         <span class="mord cjk_fallback">
          栈
         </span>
         <span class="mspace">
         </span>
         <span class="mspace">
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0502em;">
          B
         </span>
         <span class="mord">
          .
         </span>
         <span class="mord cjk_fallback">
          堆
         </span>
         <span class="mspace">
         </span>
         <span class="mspace">
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0715em;">
          C
         </span>
         <span class="mord">
          .
         </span>
         <span class="mord cjk_fallback">
          静态区
         </span>
         <span class="mspace">
         </span>
         <span class="mspace">
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0278em;">
          D
         </span>
         <span class="mord">
          .
         </span>
         <span class="mord cjk_fallback">
          常量区
         </span>
         <span class="mspace">
         </span>
         <span class="mspace">
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0576em;">
          E
         </span>
         <span class="mord">
          .
         </span>
         <span class="mord cjk_fallback">
          对象里面
         </span>
        </span>
       </span>
      </span>
     </span>
    </p>
    <p>
     因为
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        t 
        
       
         h 
        
       
         i 
        
       
         s 
        
       
      
        this
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6944em;">
         </span>
         <span class="mord mathnormal">
          t
         </span>
         <span class="mord mathnormal">
          hi
         </span>
         <span class="mord mathnormal">
          s
         </span>
        </span>
       </span>
      </span>
     </span>
     指针实际上是
     <strong>
      形参
     </strong>
     ，因此会存在
     <strong>
      函数栈帧
     </strong>
     中，所以选
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        A 
        
       
      
        A
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6833em;">
         </span>
         <span class="mord mathnormal">
          A
         </span>
        </span>
       </span>
      </span>
     </span>
     是没问题的。（但是由于
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        t 
        
       
         h 
        
       
         i 
        
       
         s 
        
       
      
        this
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6944em;">
         </span>
         <span class="mord mathnormal">
          t
         </span>
         <span class="mord mathnormal">
          hi
         </span>
         <span class="mord mathnormal">
          s
         </span>
        </span>
       </span>
      </span>
     </span>
     指针会频繁使用，
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        V 
        
       
         S 
        
       
      
        VS
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6833em;">
         </span>
         <span class="mord mathnormal" style="margin-right: 0.2222em;">
          V
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0576em;">
          S
         </span>
        </span>
       </span>
      </span>
     </span>
     编译器会将他存到
     <strong>
      寄存器
     </strong>
     中进行优化）
    </p>
    <p>
     <strong>
      注意：
     </strong>
     这里不能选
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        E 
        
       
      
        E
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6833em;">
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0576em;">
          E
         </span>
        </span>
       </span>
      </span>
     </span>
     哈，因为
     <strong>
      对象里面只存成员变量
     </strong>
     ，连成员函数指针都不会存，更别提形参了。
    </p>
    <p>
     看下面一段程序：
    </p>
    <pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">A</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token keyword">void</span> <span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>	<span class="token comment">//这里 this == nullptr ，如果解引用就会报错 </span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"A::Print()"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		<span class="token comment">//对空指针解引用程序崩溃（不解引用就没事）</span>
		cout <span class="token operator">&lt;&lt;</span> _a <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>	<span class="token comment">//cout &lt;&lt; this-&gt;_a &lt;&lt; endl;</span>
	<span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token keyword">int</span> _a<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	A<span class="token operator">*</span> p <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span>
	
	<span class="token comment">//p是指向A类对象的指针且指向空</span>
	p<span class="token operator">-&gt;</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//直接传p的值当作this指针</span>
	
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     如果
     <strong>
      类对象的地址为空
     </strong>
     的话（
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        t 
        
       
         h 
        
       
         i 
        
       
         s 
        
       
         = 
        
       
         = 
        
       
         n 
        
       
         u 
        
       
         l 
        
       
         l 
        
       
         p 
        
       
         t 
        
       
         r 
        
       
      
        this == nullptr
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6944em;">
         </span>
         <span class="mord mathnormal">
          t
         </span>
         <span class="mord mathnormal">
          hi
         </span>
         <span class="mord mathnormal">
          s
         </span>
         <span class="mspace" style="margin-right: 0.2778em;">
         </span>
         <span class="mrel">
          ==
         </span>
         <span class="mspace" style="margin-right: 0.2778em;">
         </span>
        </span>
        <span class="base">
         <span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;">
         </span>
         <span class="mord mathnormal">
          n
         </span>
         <span class="mord mathnormal">
          u
         </span>
         <span class="mord mathnormal">
          llpt
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0278em;">
          r
         </span>
        </span>
       </span>
      </span>
     </span>
     ），则不能访问成员变量。（会对
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        t 
        
       
         h 
        
       
         i 
        
       
         s 
        
       
      
        this
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6944em;">
         </span>
         <span class="mord mathnormal">
          t
         </span>
         <span class="mord mathnormal">
          hi
         </span>
         <span class="mord mathnormal">
          s
         </span>
        </span>
       </span>
      </span>
     </span>
     <strong>
      空指针解引用
     </strong>
     导致程序崩溃）
    </p>
    <hr/>
    <h2>
     <a id="_491">
     </a>
     四、类的默认成员函数
    </h2>
    <blockquote>
     <p>
      默认成员函数就是用户没有显式实现，
      <strong>
       编译器会自动生成的成员函数
      </strong>
      称为
      <strong>
       默认成员函数
      </strong>
      。
     </p>
    </blockquote>
    <p>
     一个类，我们不写的情况下
     <strong>
      编译器会默认生成以下
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         6 
         
        
       
         6
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.6444em;">
          </span>
          <span class="mord">
           6
          </span>
         </span>
        </span>
       </span>
      </span>
      个默认成员函数
     </strong>
     ：
     <strong>
      构造函数
     </strong>
     、
     <strong>
      析构函数
     </strong>
     、
     <strong>
      拷贝构造函数
     </strong>
     、
     <strong>
      赋值重载
     </strong>
     、
     <strong>
      普通对象取地址重载
     </strong>
     和
     <strong>
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         c 
         
        
          o 
         
        
          n 
         
        
          s 
         
        
          t 
         
        
       
         const
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.6151em;">
          </span>
          <span class="mord mathnormal">
           co
          </span>
          <span class="mord mathnormal">
           n
          </span>
          <span class="mord mathnormal">
           s
          </span>
          <span class="mord mathnormal">
           t
          </span>
         </span>
        </span>
       </span>
      </span>
      对象取地址重载
     </strong>
     。（需要注意的是这
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        6 
        
       
      
        6
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6444em;">
         </span>
         <span class="mord">
          6
         </span>
        </span>
       </span>
      </span>
     </span>
     个中最重要的是前
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        4 
        
       
      
        4
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6444em;">
         </span>
         <span class="mord">
          4
         </span>
        </span>
       </span>
      </span>
     </span>
     个，最后两个取地址重载不重要，稍微了解一下即可）
    </p>
    <p>
     <strong>
      C++11
     </strong>
     以后还会增加两个默认成员函数：
     <strong>
      移动构造
     </strong>
     和
     <strong>
      移动赋值
     </strong>
     。
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/8d279124ef524cd99a10398c5a24100d.png"/>
    </p>
    <p>
     我们在学习默认成员函数的时候要始终怀揣着两个问题：
    </p>
    <ol>
     <li>
      我们不写时，编译器
      <em>
       <strong>
        默认生成的函数行为是什么？
       </strong>
      </em>
      <em>
       <strong>
        是否满足我们的需求？
       </strong>
      </em>
     </li>
     <li>
      编译器默认生成的函数不满足我们的需求，我们需要自己实现，那么
      <em>
       <strong>
        如何自己实现？
       </strong>
      </em>
     </li>
    </ol>
    <h3>
     <a id="1__505">
     </a>
     1. 构造函数
    </h3>
    <blockquote>
     <p>
      <em>
       <strong>
        构造函数
       </strong>
      </em>
      （
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         C 
         
        
          o 
         
        
          n 
         
        
          s 
         
        
          t 
         
        
          r 
         
        
          u 
         
        
          c 
         
        
          t 
         
        
          o 
         
        
          r 
         
        
       
         Constructor
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.6833em;">
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0715em;">
           C
          </span>
          <span class="mord mathnormal">
           o
          </span>
          <span class="mord mathnormal">
           n
          </span>
          <span class="mord mathnormal">
           s
          </span>
          <span class="mord mathnormal">
           t
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0278em;">
           r
          </span>
          <span class="mord mathnormal">
           u
          </span>
          <span class="mord mathnormal">
           c
          </span>
          <span class="mord mathnormal">
           t
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0278em;">
           or
          </span>
         </span>
        </span>
       </span>
      </span>
      ）
      <em>
       <strong>
        的主要任务是对象实例化时初始化对象
       </strong>
      </em>
      ，而不是开空间创建对象。(我们常使用的局部对象是栈帧创建时空间就开好了)
     </p>
    </blockquote>
    <p>
     <code>
      构造函数的本质是要替代我们以前Stack类和Date类中写的Init()函数（初始化函数）的功能，构造函数自动调用的特点就完美的替代的了Init()函数。
     </code>
    </p>
    <p>
     这里还是以日期类来举例：
    </p>
    <pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">Date</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>

	<span class="token comment">//1.无参构造函数</span>
	<span class="token function">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		_year <span class="token operator">=</span> <span class="token number">2000</span><span class="token punctuation">;</span>
		_month <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
		_day <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
	<span class="token comment">//2.带参构造函数</span>
	<span class="token function">Date</span><span class="token punctuation">(</span><span class="token keyword">int</span> year<span class="token punctuation">,</span> <span class="token keyword">int</span> month<span class="token punctuation">,</span> <span class="token keyword">int</span> day<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		_year <span class="token operator">=</span> year<span class="token punctuation">;</span>
		_month <span class="token operator">=</span> month<span class="token punctuation">;</span>
		_day <span class="token operator">=</span> day<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
	<span class="token comment">//3.全缺省构造函数</span>
	<span class="token function">Date</span><span class="token punctuation">(</span><span class="token keyword">int</span> year <span class="token operator">=</span> <span class="token number">2000</span><span class="token punctuation">,</span> <span class="token keyword">int</span> month <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token keyword">int</span> day <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		_year <span class="token operator">=</span> year<span class="token punctuation">;</span>
		_month <span class="token operator">=</span> month<span class="token punctuation">;</span>
		_day <span class="token operator">=</span> day<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
	<span class="token keyword">void</span> <span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> _year <span class="token operator">&lt;&lt;</span> <span class="token string">"/"</span> <span class="token operator">&lt;&lt;</span> _month <span class="token operator">&lt;&lt;</span> <span class="token string">"/"</span> <span class="token operator">&lt;&lt;</span> _day <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token keyword">int</span> _year<span class="token punctuation">;</span>	
	<span class="token keyword">int</span> _month<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _day<span class="token punctuation">;</span>	
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	Date d1<span class="token punctuation">;</span>
	Date <span class="token function">d2</span><span class="token punctuation">(</span><span class="token number">2025</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	Date <span class="token function">d3</span><span class="token punctuation">(</span><span class="token number">2025</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	d1<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// 2000/1/1</span>
	d2<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// 2025/1/1</span>
	d3<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// 2025/3/10</span>

	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     <strong>
      构造函数的特点：
     </strong>
    </p>
    <ol>
     <li>
      <p>
       <strong>
        函数名与类名相同
       </strong>
       。
      </p>
     </li>
     <li>
      <p>
       <strong>
        无返回值
       </strong>
       。（也不需要写
       <span class="katex--inline">
        <span class="katex">
         <span class="katex-mathml">
          v 
          
         
           o 
          
         
           i 
          
         
           d 
          
         
        
          void
         </span>
         <span class="katex-html">
          <span class="base">
           <span class="strut" style="height: 0.6944em;">
           </span>
           <span class="mord mathnormal" style="margin-right: 0.0359em;">
            v
           </span>
           <span class="mord mathnormal">
            o
           </span>
           <span class="mord mathnormal">
            i
           </span>
           <span class="mord mathnormal">
            d
           </span>
          </span>
         </span>
        </span>
       </span>
       ）
      </p>
     </li>
     <li>
      <p>
       对象实例化时，系统会
       <strong>
        自动调用
       </strong>
       对应的构造函数。
      </p>
     </li>
     <li>
      <p>
       构造函数
       <strong>
        可以重载
       </strong>
       。（无参和全缺省构成函数重载，但调用时会产生歧义，因此不能同时存在）
      </p>
     </li>
     <li>
      <p>
       如果类中没有显式定义构造函数，则C++编译器会
       <strong>
        自动生成一个（无参的）默认构造函数
       </strong>
       。（一旦用户显式定义编译器将不再生成）
      </p>
     </li>
     <li>
      <p>
       <strong>
        无参
       </strong>
       构造函数、
       <strong>
        全缺省
       </strong>
       构造函数、我们不写构造时
       <strong>
        编译器默认生成
       </strong>
       的构造函数，都叫做
       <strong>
        默认构造函数
       </strong>
       。但是这三个函数
       <strong>
        有且只有一个存在，不能同时存在
       </strong>
       。（调用时会存在歧义）
      </p>
     </li>
    </ol>
    <blockquote>
     <p>
      <strong>
       默认构造函数：不传实参就直接能自动调用的，就叫默认构造。
      </strong>
      （带参和半缺省都必须传参数）
     </p>
    </blockquote>
    <ol start="7">
     <li>
      对于
      <strong>
       内置类型成员变量
      </strong>
      ，编译器对其是否
      <strong>
       初始化是不确定
      </strong>
      的；而对于
      <strong>
       自定义类型成员变量
      </strong>
      ，要求调用这个成员变量的
      <strong>
       默认构造函数
      </strong>
      初始化，这样编译器生成的无参默认构造函数就能直接
      <strong>
       自动调用
      </strong>
      自定义类型的默认构造函数（因为不需要手动传参）。
     </li>
    </ol>
    <pre><code class="prism language-cpp"><span class="token keyword">typedef</span> <span class="token keyword">int</span> STDataType<span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Stack</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>				<span class="token comment">//应该写无参或者全缺省或者不写 Stack(int n = 4)</span>
	<span class="token function">Stack</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span>	<span class="token comment">//带参构造函数不是默认构造函数，因此会报错</span>
	<span class="token punctuation">{<!-- --></span>
		_a <span class="token operator">=</span> <span class="token punctuation">(</span>STDataType<span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>STDataType<span class="token punctuation">)</span> <span class="token operator">*</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">nullptr</span> <span class="token operator">==</span> _a<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token function">perror</span><span class="token punctuation">(</span><span class="token string">"malloc申请空间失败"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		_capacity <span class="token operator">=</span> n<span class="token punctuation">;</span>
		_top <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	STDataType<span class="token operator">*</span> _a<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _capacity<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _top<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 两个Stack实现队列</span>
<span class="token keyword">class</span> <span class="token class-name">MyQueue</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token comment">//编译器默认生成MyQueue的构造函数（无参）调⽤了Stack的构造，完成了两个成员的初始化</span>
	<span class="token comment">//因此不需要对自定义类型手写构造函数了</span>
	<span class="token comment">/*
	MyQueue()	//相当于省略无参构造函数
	{
		Stack pushst;
		Stack popst;
	}
	*/</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	Stack pushst<span class="token punctuation">;</span>
	Stack popst<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">//error C2665: “MyQueue::MyQueue”: 没有重载函数可以转换所有参数类型</span>
	MyQueue <span class="token function">mq</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//MyQueue mq;（编译器自动生成的默认构造函数是无参的）</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <blockquote>
     <p>
      如果
      <strong>
       自定义类型的成员变量
      </strong>
      没有默认构造函数，就要初始化这个成员变量，此时就需要用到
      <strong>
       初始化列表
      </strong>
      。
     </p>
    </blockquote>
    <p>
     <code>
      总结：大多数情况，构造函数都需要我们自己去实现。少数情况类似 MyQueue 且 Stack 有默认构造时，MyQueue 自动生成就可以用编译器默认生成的默认构造函数。（因此：构造函数应该写、尽量写）
     </code>
    </p>
    <h3>
     <a id="1_635">
     </a>
     【补充1】初始化列表
    </h3>
    <blockquote>
     <p>
      之前我们实现构造函数时，初始化成员变量主要使用
      <strong>
       函数体内赋值
      </strong>
      ，
      <strong>
       构造函数初始化
      </strong>
      还有⼀种方式，就是
      <strong>
       初始化列表
      </strong>
      。
     </p>
    </blockquote>
    <p>
     <em>
      <strong>
       第一个问题：初始化列表怎样使用？形式是怎样的？
      </strong>
     </em>
    </p>
    <p>
     <strong>
      初始化列表的使用方式
     </strong>
     是：
     <strong>
      以一个冒号开始
     </strong>
     ，接着是一个
     <strong>
      以逗号分隔
     </strong>
     的
     <strong>
      数据成员列表
     </strong>
     ，每个
     <strong>
      “成员变量”
     </strong>
     后面跟一个放在括号中的
     <strong>
      初始值
     </strong>
     或
     <strong>
      表达式
     </strong>
     ：
    </p>
    <pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">Date</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token comment">//初始化列表</span>
	<span class="token function">Date</span><span class="token punctuation">(</span><span class="token keyword">int</span> year <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">int</span> month <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">int</span> day <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span>
		<span class="token operator">:</span><span class="token function">_year</span><span class="token punctuation">(</span>year<span class="token punctuation">)</span>
		<span class="token punctuation">,</span><span class="token function">_month</span><span class="token punctuation">(</span>month<span class="token punctuation">)</span>
		<span class="token punctuation">,</span><span class="token function">_day</span><span class="token punctuation">(</span>day<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token keyword">int</span> _year<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _month<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _day<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
    <p>
     <em>
      <strong>
       第二个问题：初始化列表有什么用？为什么要使用初始化列表？
      </strong>
     </em>
    </p>
    <p>
     每个成员变量在初始化列表中只能出现一次，语法理解上
     <strong>
      初始化列表可以认为是每个成员变量定义初始化的地方。
     </strong>
     （只能初始化一次）
    </p>
    <pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">Date</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token comment">//初始化列表（每个成员变量定义的地方）</span>
	<span class="token function">Date</span><span class="token punctuation">(</span><span class="token keyword">int</span> year <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">int</span> month <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">int</span> day <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span>
		<span class="token operator">:</span><span class="token function">_year</span><span class="token punctuation">(</span>year<span class="token punctuation">)</span>
		<span class="token punctuation">,</span><span class="token function">_month</span><span class="token punctuation">(</span>month<span class="token punctuation">)</span>
		<span class="token punctuation">,</span> <span class="token function">_day</span><span class="token punctuation">(</span>day<span class="token punctuation">)</span>
		<span class="token punctuation">,</span><span class="token function">_year</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>	<span class="token comment">//error C2437: “_year”: 已初始化</span>
	<span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
	<span class="token keyword">void</span> <span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> _year <span class="token operator">&lt;&lt;</span> <span class="token string">"/"</span> <span class="token operator">&lt;&lt;</span> _month <span class="token operator">&lt;&lt;</span> <span class="token string">"/"</span> <span class="token operator">&lt;&lt;</span> _day <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token comment">//声明</span>
	<span class="token keyword">int</span> _year<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _month<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _day<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">//对象定义</span>
	Date <span class="token function">d</span><span class="token punctuation">(</span><span class="token number">2025</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">13</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	d<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     总结一下，
     <strong>
      初始化列表的作用是
     </strong>
     ：
     <em>
      <strong>
       定义和初始化每个成员变量
      </strong>
     </em>
     。
    </p>
    <p>
     了解了初始化列表是用来定义成员变量的，那么就引入了三个
     <em>
      <strong>
       只能用初始化列表初始化的变量：
      </strong>
     </em>
    </p>
    <ol>
     <li>
      被
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         c 
         
        
          o 
         
        
          n 
         
        
          s 
         
        
          t 
         
        
       
         const
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.6151em;">
          </span>
          <span class="mord mathnormal">
           co
          </span>
          <span class="mord mathnormal">
           n
          </span>
          <span class="mord mathnormal">
           s
          </span>
          <span class="mord mathnormal">
           t
          </span>
         </span>
        </span>
       </span>
      </span>
      修饰的
      <strong>
       成员变量
      </strong>
      。
     </li>
    </ol>
    <p>
     被
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        c 
        
       
         o 
        
       
         n 
        
       
         s 
        
       
         t 
        
       
      
        const
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6151em;">
         </span>
         <span class="mord mathnormal">
          co
         </span>
         <span class="mord mathnormal">
          n
         </span>
         <span class="mord mathnormal">
          s
         </span>
         <span class="mord mathnormal">
          t
         </span>
        </span>
       </span>
      </span>
     </span>
     修饰的变量必须初始化，且初始化后不能再对其修改。
    </p>
    <blockquote>
     <p>
      <em>
       <strong>
        注意：
        <span class="katex--inline">
         <span class="katex">
          <span class="katex-mathml">
           c 
           
          
            o 
           
          
            n 
           
          
            s 
           
          
            t 
           
          
         
           const
          </span>
          <span class="katex-html">
           <span class="base">
            <span class="strut" style="height: 0.6151em;">
            </span>
            <span class="mord mathnormal">
             co
            </span>
            <span class="mord mathnormal">
             n
            </span>
            <span class="mord mathnormal">
             s
            </span>
            <span class="mord mathnormal">
             t
            </span>
           </span>
          </span>
         </span>
        </span>
        修饰的变量（成员变量）只能在初始化定义的时候赋值，其他时候不能对其更改。
       </strong>
      </em>
     </p>
    </blockquote>
    <pre><code class="prism language-cpp"><span class="token comment">//error C2734: “x”: 如果不是外部的，则必须初始化常量对象</span>
<span class="token keyword">const</span> <span class="token keyword">int</span> x<span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token keyword">int</span> y <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token comment">//error C3892 : “y”: 不能给常量赋值</span>
y <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
</code></pre>
    <p>
     因此，如果被
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        c 
        
       
         o 
        
       
         n 
        
       
         s 
        
       
         t 
        
       
      
        const
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6151em;">
         </span>
         <span class="mord mathnormal">
          co
         </span>
         <span class="mord mathnormal">
          n
         </span>
         <span class="mord mathnormal">
          s
         </span>
         <span class="mord mathnormal">
          t
         </span>
        </span>
       </span>
      </span>
     </span>
     修饰的变量是成员变量的话，也必须初始化。所以就不能在函数体内初始化了（普通构造就不能用了），这个时候就只能用初始化列表去定义（必须在定义的时候就初始化）。
    </p>
    <ol start="2">
     <li>
      <strong>
       引用类型
      </strong>
      （
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         &amp; 
         
        
       
         \&amp;
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.6944em;">
          </span>
          <span class="mord">
           &amp;
          </span>
         </span>
        </span>
       </span>
      </span>
      ）的
      <strong>
       成员变量
      </strong>
      。
     </li>
    </ol>
    <p>
     引用类型的变量必须初始化。
    </p>
    <pre><code class="prism language-cpp"><span class="token comment">//error C2530: “ret”: 必须初始化引用</span>
<span class="token keyword">int</span><span class="token operator">&amp;</span> ret<span class="token punctuation">;</span>
</code></pre>
    <p>
     因此，如果引用类型的变量是成员变量的话，也必须初始化。所以就不能在函数体内初始化了（普通构造就不能用了），这个时候就只能用初始化列表去定义（必须在定义的时候就初始化）。
    </p>
    <ol start="3">
     <li>
      <strong>
       没有默认构造
      </strong>
      的
      <strong>
       类类型
      </strong>
      （自定义类型）的
      <strong>
       成员变量
      </strong>
      。
     </li>
    </ol>
    <pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">Time</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token function">Time</span><span class="token punctuation">(</span><span class="token keyword">int</span> hour<span class="token punctuation">)</span>	<span class="token comment">//带参构造函数不是默认构造函数，本来会报错，但是写了初始化列表就没事了</span>
		<span class="token operator">:</span><span class="token function">_hour</span><span class="token punctuation">(</span>hour<span class="token punctuation">)</span>	<span class="token comment">//hour是int类型，因此也可以在函数体内赋值（等价于下面函数体内注释的内容）</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Time()"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		<span class="token comment">//_hour = hour;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">void</span> <span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> _hour <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token keyword">int</span> _hour<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Date</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token comment">//初始化列表</span>
	<span class="token function">Date</span><span class="token punctuation">(</span><span class="token keyword">int</span> year <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">int</span> month <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">int</span> day <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span>
		<span class="token operator">:</span><span class="token function">_t</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span>
		<span class="token punctuation">,</span><span class="token function">_y</span><span class="token punctuation">(</span>_year<span class="token punctuation">)</span>
		<span class="token punctuation">,</span><span class="token function">_x</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		_year <span class="token operator">=</span> year<span class="token punctuation">;</span>
		_month <span class="token operator">=</span> month<span class="token punctuation">;</span>
		_day <span class="token operator">=</span> day<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">void</span> <span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> _year <span class="token operator">&lt;&lt;</span> <span class="token string">"/"</span> <span class="token operator">&lt;&lt;</span> _month <span class="token operator">&lt;&lt;</span> <span class="token string">"/"</span> <span class="token operator">&lt;&lt;</span> _day <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		_t<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token comment">//声明</span>
	<span class="token keyword">int</span> _year<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _month<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _day<span class="token punctuation">;</span>
	
	<span class="token comment">//必须在初始化列表初始化</span>
	<span class="token keyword">const</span> <span class="token keyword">int</span> _x<span class="token punctuation">;</span>	<span class="token comment">//1.const类型</span>
	<span class="token keyword">int</span><span class="token operator">&amp;</span> _y<span class="token punctuation">;</span>		<span class="token comment">//2.引用类型</span>
	Time _t<span class="token punctuation">;</span>		<span class="token comment">//3.自定义类型（没有默认构造）</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">//对象定义</span>
	Date d<span class="token punctuation">;</span>
	d<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     <code>
      注意：这里我们看到初始化列表中按照成员变量在类中声明顺序进行初始化，跟成员在初始化列表出现的的先后顺序⽆关。（上面都是逆置的顺序看到了吗？但不影响结果）但是建议声明顺序和初始化列表顺序保持一致。
     </code>
    </p>
    <p>
     <em>
      <strong>
       也就是说，除了这三种情况，其他成员变量既可以在函数内部赋值，也可以在初始化列表初始化，二者有啥区别呢？
      </strong>
     </em>
    </p>
    <p>
     这里可以用非成员变量来举例，既然初始化列表是用来定义和初始化成员变量的，那么可以理解为：
    </p>
    <pre><code class="prism language-cpp"><span class="token comment">//声明（未初始化）</span>
<span class="token keyword">int</span> m<span class="token punctuation">;</span>
<span class="token comment">//函数体内赋值</span>
m <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

<span class="token comment">//定义</span>
<span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>	<span class="token comment">//初始化列表赋值</span>
</code></pre>
    <p>
     看出区别了吗？
     <em>
      <strong>
       函数体内赋值相当于先声明后赋值
      </strong>
     </em>
     ，而
     <em>
      <strong>
       初始化列表是直接在定义的时候初始化
      </strong>
     </em>
     。
     <br/>
     因此，上面三个成员变量不支持先声明，因为定义变量的时候必须要初始化。
    </p>
    <blockquote>
     <p>
      <em>
       <strong>
        C++11支持在成员变量声明的位置给缺省值
       </strong>
      </em>
      ，这个缺省值主要是给没有显示在初始化列表初始化的成员使用的。
     </p>
    </blockquote>
    <p>
     什么意思呢？也就是说，可以不光对成员变量进行声明，
     <em>
      <strong>
       C++11支持成员变量在声明时给缺省值
      </strong>
     </em>
     ，使其即使没有初始化列表也能有个保底值：
    </p>
    <pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">Time</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token function">Time</span><span class="token punctuation">(</span><span class="token keyword">int</span> hour<span class="token punctuation">)</span>	<span class="token comment">//带参构造函数不是默认构造函数，本来会报错，但是写了初始化列表就没事了</span>
	<span class="token punctuation">{<!-- --></span>
		_hour <span class="token operator">=</span> hour<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">void</span> <span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> _hour <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token keyword">int</span> _hour<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Date</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token comment">//没写初始化列表也可以（因为有缺省值了）</span>
	<span class="token function">Date</span><span class="token punctuation">(</span><span class="token keyword">int</span> year <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">int</span> month <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">int</span> day <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		_year <span class="token operator">=</span> year<span class="token punctuation">;</span>
		_month <span class="token operator">=</span> month<span class="token punctuation">;</span>
		_day <span class="token operator">=</span> day<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">void</span> <span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> _year <span class="token operator">&lt;&lt;</span> <span class="token string">"/"</span> <span class="token operator">&lt;&lt;</span> _month <span class="token operator">&lt;&lt;</span> <span class="token string">"/"</span> <span class="token operator">&lt;&lt;</span> _day <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		_t<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token comment">//声明</span>
	<span class="token keyword">int</span> _year<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _month<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _day<span class="token punctuation">;</span>
	
	<span class="token comment">//直接在声明时给缺省值 -&gt; 给初始化列表用的</span>
	<span class="token keyword">const</span> <span class="token keyword">int</span> _x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>	<span class="token comment">//1.const类型</span>
	<span class="token keyword">int</span><span class="token operator">&amp;</span> _y <span class="token operator">=</span> _year<span class="token punctuation">;</span>	<span class="token comment">//2.引用类型</span>
	Time _t <span class="token operator">=</span> <span class="token number">12</span><span class="token punctuation">;</span>		<span class="token comment">//3.自定义类型（没有默认构造）</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">//对象定义</span>
	Date d<span class="token punctuation">;</span>
	d<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     <code>
      注意：这里是给缺省值而不是定义！（本质上还是声明）—— 因为没有开空间。
     </code>
    </p>
    <p>
     虽然这样也可以像这样直接初始化，多方便啊对吧，但是我们还是
     <strong>
      建议尽量使用初始化列表初始化
     </strong>
     。
    </p>
    <blockquote>
     <p>
      因为那些你
      <em>
       <strong>
        不在初始化列表初始化的成员也会走初始化列表
       </strong>
      </em>
      。
     </p>
    </blockquote>
    <ol>
     <li>
      <p>
       如果这个成员在声明位置
       <strong>
        给了缺省值
       </strong>
       ，
       <strong>
        初始化列表会用这个缺省值初始化
       </strong>
       。
      </p>
     </li>
     <li>
      <p>
       如果你
       <strong>
        没有给缺省值
       </strong>
       ，对于没有显示在初始化列表初始化的
       <strong>
        内置类型
       </strong>
       成员是否初始化
       <strong>
        取决于编译器
       </strong>
       ，C++并没有规定。
      </p>
     </li>
    </ol>
    <p>
     对于没有显示在初始化列表初始化的
     <strong>
      自定义类型
     </strong>
     成员会
     <strong>
      调用这个成员类型的默认构造函数
     </strong>
     ，如果没有默认构造
     <br/>
     会编译错误。
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/77828ab0e07c42b59ccecd09bd300bca.png"/>
    </p>
    <p>
     因此，
     <strong>
      初始化列表的值优先级是最高的
     </strong>
     ，其次是缺省值，再次就是默认构造或者靠编译器了。
    </p>
    <p>
     <em>
      <strong>
       初始化列表总结：
      </strong>
     </em>
    </p>
    <ol>
     <li>
      <p>
       无论是否显式写初始化列表，
       <strong>
        每个构造函数都有初始化列表
       </strong>
       。
      </p>
     </li>
     <li>
      <p>
       无论是否在初始化列表显示初始化成员变量，
       <strong>
        每个成员变量都要走初始化列表初始化
       </strong>
       。
      </p>
     </li>
    </ol>
    <h3>
     <a id="2_875">
     </a>
     【补充2】类型转换
    </h3>
    <blockquote>
     <p>
      <strong>
       C++
      </strong>
      支持
      <strong>
       内置类型/类类型
      </strong>
      隐式类型转换为
      <strong>
       类类型
      </strong>
      对象，但需要有相关
      <strong>
       内置类型/类类型为参数
      </strong>
      的
      <strong>
       构造函数
      </strong>
      。
     </p>
    </blockquote>
    <p>
     思考：
     <em>
      <strong>
       什么是类型转换？为什么要有类型转换？
      </strong>
     </em>
    </p>
    <pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">A</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token comment">//构造函数（为类型转换创建的）</span>
	<span class="token function">A</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">_a</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>

	<span class="token comment">//拷贝构造函数</span>
	<span class="token function">A</span><span class="token punctuation">(</span><span class="token keyword">const</span> A<span class="token operator">&amp;</span> a<span class="token punctuation">)</span> <span class="token operator">:</span><span class="token function">_a</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>_a<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>

	<span class="token keyword">void</span> <span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> _a <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">int</span> <span class="token function">Get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> _a<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token keyword">int</span> _a <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">B</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token comment">//构造函数（为类型转换创建的）</span>
	<span class="token function">B</span><span class="token punctuation">(</span><span class="token keyword">const</span> A<span class="token operator">&amp;</span> a<span class="token punctuation">)</span> <span class="token operator">:</span><span class="token function">_b</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>

	<span class="token keyword">void</span> <span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> _b <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token keyword">int</span> _b <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	A <span class="token function">a1</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//调用构造</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"a1："</span><span class="token punctuation">;</span> a1<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	A a2 <span class="token operator">=</span> a1<span class="token punctuation">;</span>	<span class="token comment">//调用拷贝构造</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"a2："</span><span class="token punctuation">;</span> a2<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	A a3 <span class="token operator">=</span> <span class="token number">22</span><span class="token punctuation">;</span>	<span class="token comment">//类型转换（内置类型 -&gt; 临时对象 -&gt; 自定义类型）</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"a3："</span><span class="token punctuation">;</span> a3<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	A <span class="token function">a4</span><span class="token punctuation">(</span><span class="token number">33</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	B b <span class="token operator">=</span> a4<span class="token punctuation">;</span>	<span class="token comment">//类型转换（类类型 -&gt; 临时对象 -&gt; 类类型）</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"b ："</span><span class="token punctuation">;</span>  b<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     运行结果为：
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/ca8c6b5519ad433da1e90f2dd9ca020d.png"/>
    </p>
    <p>
     这里在定义
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        a 
        
       
         3 
        
       
      
        a3
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6444em;">
         </span>
         <span class="mord mathnormal">
          a
         </span>
         <span class="mord">
          3
         </span>
        </span>
       </span>
      </span>
     </span>
     对象时，把右侧内置类型赋值给自定义类型（
     <strong>
      类型冲突
     </strong>
     ），因此需要进行（隐式）
     <strong>
      类型转换
     </strong>
     ：
    </p>
    <p>
     <strong>
      语法上：
     </strong>
     构造⼀个
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        A 
        
       
      
        A
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6833em;">
         </span>
         <span class="mord mathnormal">
          A
         </span>
        </span>
       </span>
      </span>
     </span>
     的
     <strong>
      临时对象
     </strong>
     ，再用这个临时对象
     <strong>
      拷贝构造
     </strong>
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        a 
        
       
         3 
        
       
      
        a3
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6444em;">
         </span>
         <span class="mord mathnormal">
          a
         </span>
         <span class="mord">
          3
         </span>
        </span>
       </span>
      </span>
     </span>
     。
    </p>
    <p>
     <strong>
      实际上：
     </strong>
     编译器遇到
     <strong>
      连续构造
     </strong>
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        + 
        
       
      
        +
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6667em; vertical-align: -0.0833em;">
         </span>
         <span class="mord">
          +
         </span>
        </span>
       </span>
      </span>
     </span>
     <strong>
      拷贝构造
     </strong>
     -&gt; 优化为
     <strong>
      直接构造
     </strong>
     。
    </p>
    <p>
     <em>
      <strong>
       补充1：构造函数前面加
       <span class="katex--inline">
        <span class="katex">
         <span class="katex-mathml">
          e 
          
         
           x 
          
         
           p 
          
         
           l 
          
         
           i 
          
         
           c 
          
         
           i 
          
         
           t 
          
         
        
          explicit
         </span>
         <span class="katex-html">
          <span class="base">
           <span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;">
           </span>
           <span class="mord mathnormal">
            e
           </span>
           <span class="mord mathnormal">
            x
           </span>
           <span class="mord mathnormal" style="margin-right: 0.0197em;">
            pl
           </span>
           <span class="mord mathnormal">
            i
           </span>
           <span class="mord mathnormal">
            c
           </span>
           <span class="mord mathnormal">
            i
           </span>
           <span class="mord mathnormal">
            t
           </span>
          </span>
         </span>
        </span>
       </span>
       就不再支持隐式类型转换：
      </strong>
     </em>
    </p>
    <pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">A</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token comment">//加上explicit构造函数就不支持类型转换了</span>
	<span class="token keyword">explicit</span> <span class="token function">A</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">_a</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>

	<span class="token keyword">void</span> <span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> _a <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">int</span> <span class="token function">Get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> _a<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token keyword">int</span> _a <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	A <span class="token function">a1</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//普通构造正常运行</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"a1："</span><span class="token punctuation">;</span> a1<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//结果为：a1：123</span>

	<span class="token comment">//error C2440: “初始化”: 无法从“int”转换为“A”</span>
	A a2 <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span>	<span class="token comment">//类型转换的构造函数失效了（被explicit修饰了）</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"a2："</span><span class="token punctuation">;</span> a2<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     类型转换的构造函数失效（被
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        e 
        
       
         x 
        
       
         p 
        
       
         l 
        
       
         i 
        
       
         c 
        
       
         i 
        
       
         t 
        
       
      
        explicit
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;">
         </span>
         <span class="mord mathnormal">
          e
         </span>
         <span class="mord mathnormal">
          x
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0197em;">
          pl
         </span>
         <span class="mord mathnormal">
          i
         </span>
         <span class="mord mathnormal">
          c
         </span>
         <span class="mord mathnormal">
          i
         </span>
         <span class="mord mathnormal">
          t
         </span>
        </span>
       </span>
      </span>
     </span>
     修饰），运行直接报错：
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/16705fd39fe445d8a16763b4c93ec669.png"/>
    </p>
    <p>
     <em>
      <strong>
       补充2：C++11后还支持多参数转换：
      </strong>
     </em>
    </p>
    <pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">C</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token comment">//构造函数</span>
	<span class="token function">C</span><span class="token punctuation">(</span><span class="token keyword">int</span> c1 <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token keyword">int</span> c2 <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">:</span><span class="token function">_c1</span><span class="token punctuation">(</span>c1<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">_c2</span><span class="token punctuation">(</span>c2<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>

	<span class="token keyword">void</span> <span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> _c1 <span class="token operator">+</span> _c2 <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token keyword">int</span> _c1 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> _c2 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	C c<span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"普通构造："</span><span class="token punctuation">;</span> c<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//C++11之后才支持多参数类型转换</span>
	C cc <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token number">20</span> <span class="token punctuation">,</span> <span class="token number">20</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"类型转换："</span><span class="token punctuation">;</span> cc<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     运行结果为：
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/3a9d484192474974948ffca8e2748ff5.png"/>
    </p>
    <h3>
     <a id="2__1013">
     </a>
     2. 析构函数
    </h3>
    <p>
     <code>
      析构函数与构造函数功能相反。
     </code>
    </p>
    <blockquote>
     <p>
      <em>
       <strong>
        析构函数（
        <span class="katex--inline">
         <span class="katex">
          <span class="katex-mathml">
           D 
           
          
            e 
           
          
            s 
           
          
            t 
           
          
            r 
           
          
            u 
           
          
            c 
           
          
            t 
           
          
            o 
           
          
            r 
           
          
         
           Destructor
          </span>
          <span class="katex-html">
           <span class="base">
            <span class="strut" style="height: 0.6833em;">
            </span>
            <span class="mord mathnormal">
             Des
            </span>
            <span class="mord mathnormal">
             t
            </span>
            <span class="mord mathnormal" style="margin-right: 0.0278em;">
             r
            </span>
            <span class="mord mathnormal">
             u
            </span>
            <span class="mord mathnormal">
             c
            </span>
            <span class="mord mathnormal">
             t
            </span>
            <span class="mord mathnormal" style="margin-right: 0.0278em;">
             or
            </span>
           </span>
          </span>
         </span>
        </span>
        ）的主要任务是完成对象中资源的清理释放工作
       </strong>
      </em>
      ，而不是完成对对象本身的销毁。（局部对象是存在栈帧的，函数结束栈帧销毁就释放了，不需要我们管）
     </p>
    </blockquote>
    <p>
     <code>
      析构函数的本质是要替代我们以前Stack类和Date类中写的Destroy()函数（销毁函数）的功能，C++规定对象在销毁时会自动调用析构函数，完成对象中资源的清理释放工作，其完美的替代了Destroy()函数。
     </code>
    </p>
    <p>
     我们会发现
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        D 
        
       
         a 
        
       
         t 
        
       
         e 
        
       
      
        Date
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6833em;">
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0278em;">
          D
         </span>
         <span class="mord mathnormal">
          a
         </span>
         <span class="mord mathnormal">
          t
         </span>
         <span class="mord mathnormal">
          e
         </span>
        </span>
       </span>
      </span>
     </span>
     类没有
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        D 
        
       
         e 
        
       
         s 
        
       
         t 
        
       
         r 
        
       
         o 
        
       
         y 
        
       
         ( 
        
       
         ) 
        
       
      
        Destroy()
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 1em; vertical-align: -0.25em;">
         </span>
         <span class="mord mathnormal">
          Des
         </span>
         <span class="mord mathnormal">
          t
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0359em;">
          roy
         </span>
         <span class="mopen">
          (
         </span>
         <span class="mclose">
          )
         </span>
        </span>
       </span>
      </span>
     </span>
     函数，其实就是没有资源需要释放（动态开辟的空间和指针变量），所以严格说
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        D 
        
       
         a 
        
       
         t 
        
       
         e 
        
       
      
        Date
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6833em;">
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0278em;">
          D
         </span>
         <span class="mord mathnormal">
          a
         </span>
         <span class="mord mathnormal">
          t
         </span>
         <span class="mord mathnormal">
          e
         </span>
        </span>
       </span>
      </span>
     </span>
     类是不需要析构函数的。
    </p>
    <p>
     因此，我们用
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        S 
        
       
         t 
        
       
         a 
        
       
         c 
        
       
         k 
        
       
      
        Stack
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6944em;">
         </span>
         <span class="mord mathnormal">
          St
         </span>
         <span class="mord mathnormal">
          a
         </span>
         <span class="mord mathnormal">
          c
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0315em;">
          k
         </span>
        </span>
       </span>
      </span>
     </span>
     和
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        M 
        
       
         y 
        
       
         Q 
        
       
         u 
        
       
         e 
        
       
         u 
        
       
         e 
        
       
      
        MyQueue
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.8778em; vertical-align: -0.1944em;">
         </span>
         <span class="mord mathnormal" style="margin-right: 0.109em;">
          M
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0359em;">
          y
         </span>
         <span class="mord mathnormal">
          Q
         </span>
         <span class="mord mathnormal">
          u
         </span>
         <span class="mord mathnormal">
          e
         </span>
         <span class="mord mathnormal">
          u
         </span>
         <span class="mord mathnormal">
          e
         </span>
        </span>
       </span>
      </span>
     </span>
     来举例：
    </p>
    <pre><code class="prism language-cpp"><span class="token keyword">typedef</span> <span class="token keyword">int</span> STDataType<span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Stack</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token comment">//构造函数</span>
	<span class="token function">Stack</span><span class="token punctuation">(</span><span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		_a <span class="token operator">=</span> <span class="token punctuation">(</span>STDataType<span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>STDataType<span class="token punctuation">)</span> <span class="token operator">*</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">nullptr</span> <span class="token operator">==</span> _a<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token function">perror</span><span class="token punctuation">(</span><span class="token string">"malloc failed!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		_capacity <span class="token operator">=</span> n<span class="token punctuation">;</span>
		_top <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">//析构函数</span>
	<span class="token operator">~</span><span class="token function">Stack</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"~Stack()"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		<span class="token function">free</span><span class="token punctuation">(</span>_a<span class="token punctuation">)</span><span class="token punctuation">;</span>
		_a <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span>
		_top <span class="token operator">=</span> _capacity <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	STDataType<span class="token operator">*</span> _a<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _capacity<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _top<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 两个Stack实现队列</span>
<span class="token keyword">class</span> <span class="token class-name">MyQueue</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token comment">//编译器默认⽣成MyQueue的析构函数调用了Stack的析构，释放的Stack内部的资源</span>
	<span class="token comment">//显式写析构，也会自动调用Stack的析构</span>
	<span class="token operator">~</span><span class="token function">MyQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"~MyQueue()"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	Stack pushst<span class="token punctuation">;</span>
	Stack popst<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	Stack st<span class="token punctuation">;</span>	<span class="token comment">//析构一次 Stack st</span>

	MyQueue mq<span class="token punctuation">;</span>	<span class="token comment">//析构两次 Stack pushst、Stack popst</span>

	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     <strong>
      析构函数的特点：
     </strong>
    </p>
    <ol>
     <li>
      <p>
       <strong>
        析构函数名是在类名前加上字符 ~
       </strong>
       。
      </p>
     </li>
     <li>
      <p>
       <strong>
        无参数无返回值
       </strong>
       。 (这里跟构造类似，也不需要加
       <span class="katex--inline">
        <span class="katex">
         <span class="katex-mathml">
          v 
          
         
           o 
          
         
           i 
          
         
           d 
          
         
        
          void
         </span>
         <span class="katex-html">
          <span class="base">
           <span class="strut" style="height: 0.6944em;">
           </span>
           <span class="mord mathnormal" style="margin-right: 0.0359em;">
            v
           </span>
           <span class="mord mathnormal">
            o
           </span>
           <span class="mord mathnormal">
            i
           </span>
           <span class="mord mathnormal">
            d
           </span>
          </span>
         </span>
        </span>
       </span>
       )
      </p>
     </li>
     <li>
      <p>
       对象生命周期结束时，系统会
       <strong>
        自动调用
       </strong>
       析构函数。
      </p>
     </li>
     <li>
      <p>
       <strong>
        一个类只能有一个析构函数
       </strong>
       。（若未显式定义，系统会
       <strong>
        自动生成默认的析构函数
       </strong>
       ）
      </p>
     </li>
     <li>
      <p>
       编译器自动生成的析构函数对
       <strong>
        内置类型
       </strong>
       成员
       <strong>
        不做处理
       </strong>
       。
      </p>
     </li>
     <li>
      <p>
       <strong>
        自定义类型
       </strong>
       成员无论什么情况都会
       <strong>
        自动调用析构函数
       </strong>
       。
      </p>
     </li>
    </ol>
    <p>
     如上面写的
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        M 
        
       
         y 
        
       
         Q 
        
       
         u 
        
       
         e 
        
       
         u 
        
       
         e 
        
       
      
        MyQueue
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.8778em; vertical-align: -0.1944em;">
         </span>
         <span class="mord mathnormal" style="margin-right: 0.109em;">
          M
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0359em;">
          y
         </span>
         <span class="mord mathnormal">
          Q
         </span>
         <span class="mord mathnormal">
          u
         </span>
         <span class="mord mathnormal">
          e
         </span>
         <span class="mord mathnormal">
          u
         </span>
         <span class="mord mathnormal">
          e
         </span>
        </span>
       </span>
      </span>
     </span>
     类，运行结果如下：
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/50cd478ddbcf4ff88dff26443b21e27a.png"/>
    </p>
    <p>
     因此对于自定义类型的成员变量不管写没写析构，都会自动调用成员变量的析构函数。
    </p>
    <blockquote>
     <p>
      如果
      <strong>
       类中没有申请资源或者默认生成的析构可以用时，析构函数可以不写
      </strong>
      ，直接使用编译器生成的默认析构函数即可，如
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         D 
         
        
          a 
         
        
          t 
         
        
          e 
         
        
       
         Date
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.6833em;">
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0278em;">
           D
          </span>
          <span class="mord mathnormal">
           a
          </span>
          <span class="mord mathnormal">
           t
          </span>
          <span class="mord mathnormal">
           e
          </span>
         </span>
        </span>
       </span>
      </span>
      和
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         M 
         
        
          y 
         
        
          Q 
         
        
          u 
         
        
          e 
         
        
          u 
         
        
          e 
         
        
       
         MyQueue
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.8778em; vertical-align: -0.1944em;">
          </span>
          <span class="mord mathnormal" style="margin-right: 0.109em;">
           M
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0359em;">
           y
          </span>
          <span class="mord mathnormal">
           Q
          </span>
          <span class="mord mathnormal">
           u
          </span>
          <span class="mord mathnormal">
           e
          </span>
          <span class="mord mathnormal">
           u
          </span>
          <span class="mord mathnormal">
           e
          </span>
         </span>
        </span>
       </span>
      </span>
      ；
      <br/>
      如果
      <strong>
       有资源申请时，一定要自己写析构，否则会造成资源泄漏
      </strong>
      ，如
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         S 
         
        
          t 
         
        
          a 
         
        
          c 
         
        
          k 
         
        
       
         Stack
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.6944em;">
          </span>
          <span class="mord mathnormal">
           St
          </span>
          <span class="mord mathnormal">
           a
          </span>
          <span class="mord mathnormal">
           c
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0315em;">
           k
          </span>
         </span>
        </span>
       </span>
      </span>
      。
     </p>
    </blockquote>
    <ol start="7">
     <li>
      一个局部域的多个对象，C++规定
      <strong>
       后定义的先析构
      </strong>
      。（栈帧结构：后进先出）
     </li>
    </ol>
    <h3>
     <a id="3__1106">
     </a>
     3. 拷贝构造函数
    </h3>
    <blockquote>
     <p>
      如果一个
      <strong>
       构造函数
      </strong>
      的
      <strong>
       第一个参数
      </strong>
      是
      <strong>
       自身类类型的引用
      </strong>
      ，且
      <strong>
       任何额外的参数都有默认值
      </strong>
      ，则此构造函数也叫做拷贝构造函数，也就是说：
      <em>
       <strong>
        拷贝构造是一个特殊的构造函数
       </strong>
      </em>
      。
     </p>
    </blockquote>
    <p>
     还是以日期类来举例：
    </p>
    <pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">Date</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token comment">//构造函数</span>
	<span class="token function">Date</span><span class="token punctuation">(</span><span class="token keyword">int</span> year <span class="token operator">=</span> <span class="token number">2000</span><span class="token punctuation">,</span> <span class="token keyword">int</span> month <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">int</span> day <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		_year <span class="token operator">=</span> year<span class="token punctuation">;</span>
		_month <span class="token operator">=</span> month<span class="token punctuation">;</span>
		_day <span class="token operator">=</span> day<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">//拷贝构造函数</span>
	<span class="token function">Date</span><span class="token punctuation">(</span><span class="token keyword">const</span> Date<span class="token operator">&amp;</span> d<span class="token punctuation">)</span>	<span class="token comment">//将d1的值拷贝给d2</span>
	<span class="token punctuation">{<!-- --></span>
		_year <span class="token operator">=</span> d<span class="token punctuation">.</span>_year<span class="token punctuation">;</span>
		_month <span class="token operator">=</span> d<span class="token punctuation">.</span>_month<span class="token punctuation">;</span>
		_day <span class="token operator">=</span> d<span class="token punctuation">.</span>_day<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">void</span> <span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> _year <span class="token operator">&lt;&lt;</span> <span class="token string">"/"</span> <span class="token operator">&lt;&lt;</span> _month <span class="token operator">&lt;&lt;</span> <span class="token string">"/"</span> <span class="token operator">&lt;&lt;</span> _day <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token keyword">int</span> _year<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _month<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _day<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	Date <span class="token function">d1</span><span class="token punctuation">(</span><span class="token number">2025</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//普通构造</span>
	d1<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	Date <span class="token function">d2</span><span class="token punctuation">(</span>d1<span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">//拷贝构造</span>
	d2<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     运行结果为：
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/73034b27de0e4d2786983d54bc0db0fe.png"/>
    </p>
    <p>
     可以看出拷贝构造其实是用对象去初始化对象（这里是用
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        d 
        
       
         1 
        
       
      
        d1
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6944em;">
         </span>
         <span class="mord mathnormal">
          d
         </span>
         <span class="mord">
          1
         </span>
        </span>
       </span>
      </span>
     </span>
     初始化了
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        d 
        
       
         2 
        
       
      
        d2
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6944em;">
         </span>
         <span class="mord mathnormal">
          d
         </span>
         <span class="mord">
          2
         </span>
        </span>
       </span>
      </span>
     </span>
     ）。
    </p>
    <p>
     <strong>
      拷贝构造的特点：
     </strong>
    </p>
    <ol>
     <li>
      <p>
       拷贝构造函数是
       <strong>
        构造函数的一个重载
       </strong>
       。
      </p>
     </li>
     <li>
      <p>
       拷贝构造函数的
       <strong>
        第一个参数必须是类类型对象的引用
       </strong>
       ，如果有多个参数，
       <strong>
        后面的参数必须有缺省值
       </strong>
       。
      </p>
     </li>
    </ol>
    <blockquote>
     <p>
      <strong>
       使用传值方式编译器直接报错，因为语法逻辑上会引发无穷递归调用。
      </strong>
      <br/>
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/c2a8b020e2424bde93aa6e091908a938.png"/>
     </p>
    </blockquote>
    <ol start="3">
     <li>
      C++ 规定
      <strong>
       自定义类型对象进行拷贝行为必须调用拷贝构造
      </strong>
      ，所以这里自定义类型传值传参和传值返回都会调用拷贝构造完成。
     </li>
    </ol>
    <pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">Date</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token comment">//构造函数</span>
	<span class="token function">Date</span><span class="token punctuation">(</span><span class="token keyword">int</span> year <span class="token operator">=</span> <span class="token number">2000</span><span class="token punctuation">,</span> <span class="token keyword">int</span> month <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">int</span> day <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		_year <span class="token operator">=</span> year<span class="token punctuation">;</span>
		_month <span class="token operator">=</span> month<span class="token punctuation">;</span>
		_day <span class="token operator">=</span> day<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">//拷贝构造函数</span>
	<span class="token function">Date</span><span class="token punctuation">(</span><span class="token keyword">const</span> Date<span class="token operator">&amp;</span> d<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"拷贝构造"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		_year <span class="token operator">=</span> d<span class="token punctuation">.</span>_year<span class="token punctuation">;</span>
		_month <span class="token operator">=</span> d<span class="token punctuation">.</span>_month<span class="token punctuation">;</span>
		_day <span class="token operator">=</span> d<span class="token punctuation">.</span>_day<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">void</span> <span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> _year <span class="token operator">&lt;&lt;</span> <span class="token string">"/"</span> <span class="token operator">&lt;&lt;</span> _month <span class="token operator">&lt;&lt;</span> <span class="token string">"/"</span> <span class="token operator">&lt;&lt;</span> _day <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token keyword">int</span> _year<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _month<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _day<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">Func1</span><span class="token punctuation">(</span>Date d2<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	d2<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	Date <span class="token function">d1</span><span class="token punctuation">(</span><span class="token number">2025</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//对象拷贝要要调用拷贝构造</span>
	Date <span class="token function">d2</span><span class="token punctuation">(</span>d1<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//传值传参要调用拷贝构造</span>
	<span class="token function">Func1</span><span class="token punctuation">(</span>d2<span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//调用 Date(const Date&amp; d) 函数</span>

	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     运行结果为：
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/bee9a8ec860d41368e3243719df83c07.png"/>
    </p>
    <p>
     可以看出，第一次
     <strong>
      对象拷贝
     </strong>
     调用了一次拷贝构造；第二次
     <strong>
      传值传参
     </strong>
     又调用了一次拷贝构造。
    </p>
    <ol start="4">
     <li>
      若未显式定义拷贝构造，
      <strong>
       编译器会自动生成拷贝构造函数
      </strong>
      。自动生成的拷贝构造对
      <strong>
       内置类型
      </strong>
      成员变量会完成
      <strong>
       值拷贝
      </strong>
      /
      <strong>
       浅拷贝
      </strong>
      (一个字节一个字节的拷贝)，对
      <strong>
       自定义类型
      </strong>
      成员变量会调用他的
      <strong>
       拷贝构造
      </strong>
      。
     </li>
    </ol>
    <p>
     因此日期类不需要写拷贝构造：
    </p>
    <pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">Date</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token comment">//构造函数</span>
	<span class="token function">Date</span><span class="token punctuation">(</span><span class="token keyword">int</span> year <span class="token operator">=</span> <span class="token number">2000</span><span class="token punctuation">,</span> <span class="token keyword">int</span> month <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">int</span> day <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		_year <span class="token operator">=</span> year<span class="token punctuation">;</span>
		_month <span class="token operator">=</span> month<span class="token punctuation">;</span>
		_day <span class="token operator">=</span> day<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">void</span> <span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> _year <span class="token operator">&lt;&lt;</span> <span class="token string">"/"</span> <span class="token operator">&lt;&lt;</span> _month <span class="token operator">&lt;&lt;</span> <span class="token string">"/"</span> <span class="token operator">&lt;&lt;</span> _day <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token keyword">int</span> _year<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _month<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _day<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">Func1</span><span class="token punctuation">(</span>Date d2<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	d2<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	Date <span class="token function">d1</span><span class="token punctuation">(</span><span class="token number">2025</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//对象拷贝要要调用拷贝构造</span>
	Date <span class="token function">d2</span><span class="token punctuation">(</span>d1<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//传值传参要调用拷贝构造</span>
	<span class="token function">Func1</span><span class="token punctuation">(</span>d2<span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//调用（编译器自动生成的）拷贝构造函数</span>

	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     运行结果：
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/aaac9338322a4ae49ada05bb4dd07b67.png"/>
    </p>
    <p>
     编译器自动生成的拷贝构造函数就已经很好地完成了任务，因此就没有必要再自己写拷贝构造了。
    </p>
    <p>
     因此总结一下：
    </p>
    <blockquote>
     <ol>
      <li>
       像
       <span class="katex--inline">
        <span class="katex">
         <span class="katex-mathml">
          D 
          
         
           a 
          
         
           t 
          
         
           e 
          
         
        
          Date
         </span>
         <span class="katex-html">
          <span class="base">
           <span class="strut" style="height: 0.6833em;">
           </span>
           <span class="mord mathnormal" style="margin-right: 0.0278em;">
            D
           </span>
           <span class="mord mathnormal">
            a
           </span>
           <span class="mord mathnormal">
            t
           </span>
           <span class="mord mathnormal">
            e
           </span>
          </span>
         </span>
        </span>
       </span>
       这样的类成员变量
       <strong>
        全是内置类型
       </strong>
       且
       <strong>
        没有指向什么资源
       </strong>
       ，编译器自动生成的拷贝构造就可以完成需要拷贝（
       <em>
        <strong>
         浅拷贝
        </strong>
       </em>
       ），所以不需要我们显式实现拷贝构造。
      </li>
     </ol>
    </blockquote>
    <p>
     <code>
      浅拷贝：一个字节一个字节地拷贝。
     </code>
    </p>
    <blockquote>
     <ol start="2">
      <li>
       而像
       <span class="katex--inline">
        <span class="katex">
         <span class="katex-mathml">
          S 
          
         
           t 
          
         
           a 
          
         
           c 
          
         
           k 
          
         
        
          Stack
         </span>
         <span class="katex-html">
          <span class="base">
           <span class="strut" style="height: 0.6944em;">
           </span>
           <span class="mord mathnormal">
            St
           </span>
           <span class="mord mathnormal">
            a
           </span>
           <span class="mord mathnormal">
            c
           </span>
           <span class="mord mathnormal" style="margin-right: 0.0315em;">
            k
           </span>
          </span>
         </span>
        </span>
       </span>
       这样的类，虽然也都是
       <strong>
        内置类型
       </strong>
       ，但是
       <span class="katex--inline">
        <span class="katex">
         <span class="katex-mathml">
          _ 
          
         
           a 
          
         
        
          \_a
         </span>
         <span class="katex-html">
          <span class="base">
           <span class="strut" style="height: 0.7406em; vertical-align: -0.31em;">
           </span>
           <span class="mord" style="margin-right: 0.0278em;">
            _
           </span>
           <span class="mord mathnormal">
            a
           </span>
          </span>
         </span>
        </span>
       </span>
       <strong>
        指向了资源
       </strong>
       ，编译器自动生成的拷贝构造完成的值拷贝/浅拷贝不符合我们的需求，所以需要我们自己实现
       <em>
        <strong>
         深拷贝
        </strong>
       </em>
       （对指向的资源也进行拷贝）。
      </li>
     </ol>
    </blockquote>
    <p>
     <code>
      深拷贝：对指向的资源也进行拷贝。
     </code>
    </p>
    <pre><code class="prism language-cpp"><span class="token keyword">typedef</span> <span class="token keyword">int</span> STDataType<span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Stack</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token comment">//构造函数</span>
	<span class="token function">Stack</span><span class="token punctuation">(</span><span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		_a <span class="token operator">=</span> <span class="token punctuation">(</span>STDataType<span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>STDataType<span class="token punctuation">)</span> <span class="token operator">*</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">nullptr</span> <span class="token operator">==</span> _a<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token function">perror</span><span class="token punctuation">(</span><span class="token string">"malloc failed!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		_capacity <span class="token operator">=</span> n<span class="token punctuation">;</span>
		_top <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">//析构函数</span>
	<span class="token operator">~</span><span class="token function">Stack</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"~Stack()"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		<span class="token function">free</span><span class="token punctuation">(</span>_a<span class="token punctuation">)</span><span class="token punctuation">;</span>
		_a <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span>
		_top <span class="token operator">=</span> _capacity <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span> 
	<span class="token keyword">void</span> <span class="token function">Push</span><span class="token punctuation">(</span>STDataType x<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>_top <span class="token operator">==</span> _capacity<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">int</span> newcapacity <span class="token operator">=</span> _capacity <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>
			STDataType<span class="token operator">*</span> tmp <span class="token operator">=</span> <span class="token punctuation">(</span>STDataType<span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">realloc</span><span class="token punctuation">(</span>_a<span class="token punctuation">,</span> newcapacity <span class="token operator">*</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>STDataType<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>tmp <span class="token operator">==</span> <span class="token constant">NULL</span><span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token function">perror</span><span class="token punctuation">(</span><span class="token string">"realloc fail"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">return</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			_a <span class="token operator">=</span> tmp<span class="token punctuation">;</span>
			_capacity <span class="token operator">=</span> newcapacity<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		_a<span class="token punctuation">[</span>_top<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> x<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">//没有写拷贝构造 -&gt; 调用编译器自己生成的（浅拷贝）</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	STDataType<span class="token operator">*</span> _a<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _capacity<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _top<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	Stack st1<span class="token punctuation">;</span>

	st1<span class="token punctuation">.</span><span class="token function">Push</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	st1<span class="token punctuation">.</span><span class="token function">Push</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// Stack不显式实现拷贝构造，用自动生成的拷贝构造完成浅拷贝</span>
	<span class="token comment">// 会导致st1和st2⾥⾯的_a指针指向同一块资源，析构时会析构两次，程序崩溃</span>
	Stack st2 <span class="token operator">=</span> st1<span class="token punctuation">;</span>

	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     因为编译器自己生成的拷贝构造时直接拷贝（浅拷贝），会导致
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        s 
        
       
         t 
        
       
         1 
        
       
      
        st1
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6444em;">
         </span>
         <span class="mord mathnormal">
          s
         </span>
         <span class="mord mathnormal">
          t
         </span>
         <span class="mord">
          1
         </span>
        </span>
       </span>
      </span>
     </span>
     和
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        s 
        
       
         t 
        
       
         2 
        
       
      
        st2
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6444em;">
         </span>
         <span class="mord mathnormal">
          s
         </span>
         <span class="mord mathnormal">
          t
         </span>
         <span class="mord">
          2
         </span>
        </span>
       </span>
      </span>
     </span>
     里的
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        _ 
        
       
         a 
        
       
      
        \_a
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.7406em; vertical-align: -0.31em;">
         </span>
         <span class="mord" style="margin-right: 0.0278em;">
          _
         </span>
         <span class="mord mathnormal">
          a
         </span>
        </span>
       </span>
      </span>
     </span>
     指针指向同一块空间，
     <strong>
      析构时会析构两次
     </strong>
     （
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        f 
        
       
         r 
        
       
         e 
        
       
         e 
        
       
      
        free
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;">
         </span>
         <span class="mord mathnormal" style="margin-right: 0.1076em;">
          f
         </span>
         <span class="mord mathnormal">
          ree
         </span>
        </span>
       </span>
      </span>
     </span>
     了两次），程序直接就崩溃了：
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/ba6c1840a95c422b956b802c1ad86dd7.png"/>
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/c9369c972823410884d64b2e53440535.png"/>
    </p>
    <p>
     这时候会发现，把析构函数 ~
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        S 
        
       
         t 
        
       
         a 
        
       
         c 
        
       
         k 
        
       
         ( 
        
       
         ) 
        
       
      
        Stack()
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 1em; vertical-align: -0.25em;">
         </span>
         <span class="mord mathnormal">
          St
         </span>
         <span class="mord mathnormal">
          a
         </span>
         <span class="mord mathnormal">
          c
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0315em;">
          k
         </span>
         <span class="mopen">
          (
         </span>
         <span class="mclose">
          )
         </span>
        </span>
       </span>
      </span>
     </span>
     删了就不会报错了。（但是这样会
     <strong>
      内存泄漏
     </strong>
     啊！！！不能这样干）
     <br/>
     因此我们这个时候就
     <strong>
      必须自己写拷贝构造函数
     </strong>
     了：
    </p>
    <pre><code class="prism language-cpp"><span class="token keyword">typedef</span> <span class="token keyword">int</span> STDataType<span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Stack</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token comment">//构造函数</span>
	<span class="token function">Stack</span><span class="token punctuation">(</span><span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		_a <span class="token operator">=</span> <span class="token punctuation">(</span>STDataType<span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>STDataType<span class="token punctuation">)</span> <span class="token operator">*</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">nullptr</span> <span class="token operator">==</span> _a<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token function">perror</span><span class="token punctuation">(</span><span class="token string">"malloc failed!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		_capacity <span class="token operator">=</span> n<span class="token punctuation">;</span>
		_top <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">//析构函数</span>
	<span class="token operator">~</span><span class="token function">Stack</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"~Stack()"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		<span class="token function">free</span><span class="token punctuation">(</span>_a<span class="token punctuation">)</span><span class="token punctuation">;</span>
		_a <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span>
		_top <span class="token operator">=</span> _capacity <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span> 
	<span class="token keyword">void</span> <span class="token function">Push</span><span class="token punctuation">(</span>STDataType x<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>_top <span class="token operator">==</span> _capacity<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">int</span> newcapacity <span class="token operator">=</span> _capacity <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>
			STDataType<span class="token operator">*</span> tmp <span class="token operator">=</span> <span class="token punctuation">(</span>STDataType<span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">realloc</span><span class="token punctuation">(</span>_a<span class="token punctuation">,</span> newcapacity <span class="token operator">*</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>STDataType<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>tmp <span class="token operator">==</span> <span class="token constant">NULL</span><span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token function">perror</span><span class="token punctuation">(</span><span class="token string">"realloc fail"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">return</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			_a <span class="token operator">=</span> tmp<span class="token punctuation">;</span>
			_capacity <span class="token operator">=</span> newcapacity<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		_a<span class="token punctuation">[</span>_top<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> x<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">//拷贝构造函数</span>
	<span class="token function">Stack</span><span class="token punctuation">(</span><span class="token keyword">const</span> Stack<span class="token operator">&amp;</span> st<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token comment">// 需要对_a指向资源创建同样大的资源再拷贝值</span>
		_a <span class="token operator">=</span> <span class="token punctuation">(</span>STDataType<span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>STDataType<span class="token punctuation">)</span> <span class="token operator">*</span> st<span class="token punctuation">.</span>_capacity<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">nullptr</span> <span class="token operator">==</span> _a<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token function">perror</span><span class="token punctuation">(</span><span class="token string">"malloc failed!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token function">memcpy</span><span class="token punctuation">(</span>_a<span class="token punctuation">,</span> st<span class="token punctuation">.</span>_a<span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>STDataType<span class="token punctuation">)</span> <span class="token operator">*</span> st<span class="token punctuation">.</span>_top<span class="token punctuation">)</span><span class="token punctuation">;</span>
		_top <span class="token operator">=</span> st<span class="token punctuation">.</span>_top<span class="token punctuation">;</span>
		_capacity <span class="token operator">=</span> st<span class="token punctuation">.</span>_capacity<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	STDataType<span class="token operator">*</span> _a<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _capacity<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _top<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	Stack st1<span class="token punctuation">;</span>

	st1<span class="token punctuation">.</span><span class="token function">Push</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	st1<span class="token punctuation">.</span><span class="token function">Push</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	Stack <span class="token function">st2</span><span class="token punctuation">(</span>st1<span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//Stack st2 = st1;</span>

	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     运行结果：
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/2e6314b5edc9425a999478e46ce16599.png"/>
    </p>
    <p>
     这里可以看到程序正常运行没有崩溃，且析构函数调用了两次（说明两个
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        _ 
        
       
         a 
        
       
      
        \_a
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.7406em; vertical-align: -0.31em;">
         </span>
         <span class="mord" style="margin-right: 0.0278em;">
          _
         </span>
         <span class="mord mathnormal">
          a
         </span>
        </span>
       </span>
      </span>
     </span>
     指针没有指向同一块空间）。因此
     <strong>
      只有自己写的拷贝构造函数才能避免指针指向同一块空间
     </strong>
     。
    </p>
    <blockquote>
     <ol start="3">
      <li>
       像
       <span class="katex--inline">
        <span class="katex">
         <span class="katex-mathml">
          M 
          
         
           y 
          
         
           Q 
          
         
           u 
          
         
           e 
          
         
           u 
          
         
           e 
          
         
        
          MyQueue
         </span>
         <span class="katex-html">
          <span class="base">
           <span class="strut" style="height: 0.8778em; vertical-align: -0.1944em;">
           </span>
           <span class="mord mathnormal" style="margin-right: 0.109em;">
            M
           </span>
           <span class="mord mathnormal" style="margin-right: 0.0359em;">
            y
           </span>
           <span class="mord mathnormal">
            Q
           </span>
           <span class="mord mathnormal">
            u
           </span>
           <span class="mord mathnormal">
            e
           </span>
           <span class="mord mathnormal">
            u
           </span>
           <span class="mord mathnormal">
            e
           </span>
          </span>
         </span>
        </span>
       </span>
       这样的类型内部主要是
       <strong>
        自定义类型
       </strong>
       <span class="katex--inline">
        <span class="katex">
         <span class="katex-mathml">
          S 
          
         
           t 
          
         
           a 
          
         
           c 
          
         
           k 
          
         
        
          Stack
         </span>
         <span class="katex-html">
          <span class="base">
           <span class="strut" style="height: 0.6944em;">
           </span>
           <span class="mord mathnormal">
            St
           </span>
           <span class="mord mathnormal">
            a
           </span>
           <span class="mord mathnormal">
            c
           </span>
           <span class="mord mathnormal" style="margin-right: 0.0315em;">
            k
           </span>
          </span>
         </span>
        </span>
       </span>
       成员，编译器自动生成的拷贝构造会调用
       <span class="katex--inline">
        <span class="katex">
         <span class="katex-mathml">
          S 
          
         
           t 
          
         
           a 
          
         
           c 
          
         
           k 
          
         
        
          Stack
         </span>
         <span class="katex-html">
          <span class="base">
           <span class="strut" style="height: 0.6944em;">
           </span>
           <span class="mord mathnormal">
            St
           </span>
           <span class="mord mathnormal">
            a
           </span>
           <span class="mord mathnormal">
            c
           </span>
           <span class="mord mathnormal" style="margin-right: 0.0315em;">
            k
           </span>
          </span>
         </span>
        </span>
       </span>
       的拷贝构造，也不需要我们显式地实现
       <span class="katex--inline">
        <span class="katex">
         <span class="katex-mathml">
          M 
          
         
           y 
          
         
           Q 
          
         
           u 
          
         
           e 
          
         
           u 
          
         
           e 
          
         
        
          MyQueue
         </span>
         <span class="katex-html">
          <span class="base">
           <span class="strut" style="height: 0.8778em; vertical-align: -0.1944em;">
           </span>
           <span class="mord mathnormal" style="margin-right: 0.109em;">
            M
           </span>
           <span class="mord mathnormal" style="margin-right: 0.0359em;">
            y
           </span>
           <span class="mord mathnormal">
            Q
           </span>
           <span class="mord mathnormal">
            u
           </span>
           <span class="mord mathnormal">
            e
           </span>
           <span class="mord mathnormal">
            u
           </span>
           <span class="mord mathnormal">
            e
           </span>
          </span>
         </span>
        </span>
       </span>
       的拷贝构造。
      </li>
     </ol>
    </blockquote>
    <pre><code class="prism language-cpp"><span class="token keyword">typedef</span> <span class="token keyword">int</span> STDataType<span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Stack</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token comment">//构造函数</span>
	<span class="token function">Stack</span><span class="token punctuation">(</span><span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		_a <span class="token operator">=</span> <span class="token punctuation">(</span>STDataType<span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>STDataType<span class="token punctuation">)</span> <span class="token operator">*</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">nullptr</span> <span class="token operator">==</span> _a<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token function">perror</span><span class="token punctuation">(</span><span class="token string">"malloc failed!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		_capacity <span class="token operator">=</span> n<span class="token punctuation">;</span>
		_top <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">//析构函数</span>
	<span class="token operator">~</span><span class="token function">Stack</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"~Stack()"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		<span class="token function">free</span><span class="token punctuation">(</span>_a<span class="token punctuation">)</span><span class="token punctuation">;</span>
		_a <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span>
		_top <span class="token operator">=</span> _capacity <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span> 
	<span class="token keyword">void</span> <span class="token function">Push</span><span class="token punctuation">(</span>STDataType x<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>_top <span class="token operator">==</span> _capacity<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">int</span> newcapacity <span class="token operator">=</span> _capacity <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>
			STDataType<span class="token operator">*</span> tmp <span class="token operator">=</span> <span class="token punctuation">(</span>STDataType<span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">realloc</span><span class="token punctuation">(</span>_a<span class="token punctuation">,</span> newcapacity <span class="token operator">*</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>STDataType<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>tmp <span class="token operator">==</span> <span class="token constant">NULL</span><span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token function">perror</span><span class="token punctuation">(</span><span class="token string">"realloc fail!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">return</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			_a <span class="token operator">=</span> tmp<span class="token punctuation">;</span>
			_capacity <span class="token operator">=</span> newcapacity<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		_a<span class="token punctuation">[</span>_top<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> x<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">//拷贝构造函数</span>
	<span class="token function">Stack</span><span class="token punctuation">(</span><span class="token keyword">const</span> Stack<span class="token operator">&amp;</span> st<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token comment">// 需要对_a指向资源创建同样大的资源再拷贝值</span>
		_a <span class="token operator">=</span> <span class="token punctuation">(</span>STDataType<span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>STDataType<span class="token punctuation">)</span> <span class="token operator">*</span> st<span class="token punctuation">.</span>_capacity<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">nullptr</span> <span class="token operator">==</span> _a<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token function">perror</span><span class="token punctuation">(</span><span class="token string">"malloc failed!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token function">memcpy</span><span class="token punctuation">(</span>_a<span class="token punctuation">,</span> st<span class="token punctuation">.</span>_a<span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>STDataType<span class="token punctuation">)</span> <span class="token operator">*</span> st<span class="token punctuation">.</span>_top<span class="token punctuation">)</span><span class="token punctuation">;</span>
		_top <span class="token operator">=</span> st<span class="token punctuation">.</span>_top<span class="token punctuation">;</span>
		_capacity <span class="token operator">=</span> st<span class="token punctuation">.</span>_capacity<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	STDataType<span class="token operator">*</span> _a<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _capacity<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _top<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 两个Stack实现队列</span>
<span class="token keyword">class</span> <span class="token class-name">MyQueue</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	Stack pushst<span class="token punctuation">;</span>
	Stack popst<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">func</span><span class="token punctuation">(</span>MyQueue mq<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">//...</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	MyQueue mq<span class="token punctuation">;</span>	<span class="token comment">// 调用MyQueue的构造函数（编译器实现） -&gt; 分别调用两个Stack的构造函数</span>
	
	<span class="token function">func</span><span class="token punctuation">(</span>mq<span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// 调用MyQueue的拷贝构造（编译器实现） -&gt; 分别调用两个Stack的拷贝构造</span>
				<span class="token comment">// 调用MyQueue的析构函数（编译器实现） -&gt; 分别调用两个Stack的析构函数</span>
				<span class="token comment">// （析构四次：两个构造的Stack和两个拷贝构造的Stack）</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     运行结果为：
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/28c52a8fa1be40b984c9fdeec7d1261c.png"/>
    </p>
    <p>
     一共析构了四次：两个
     <strong>
      构造
     </strong>
     的
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        S 
        
       
         t 
        
       
         a 
        
       
         c 
        
       
         k 
        
       
      
        Stack
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6944em;">
         </span>
         <span class="mord mathnormal">
          St
         </span>
         <span class="mord mathnormal">
          a
         </span>
         <span class="mord mathnormal">
          c
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0315em;">
          k
         </span>
        </span>
       </span>
      </span>
     </span>
     和两个
     <strong>
      拷贝构造
     </strong>
     的
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        S 
        
       
         t 
        
       
         a 
        
       
         c 
        
       
         k 
        
       
      
        Stack
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6944em;">
         </span>
         <span class="mord mathnormal">
          St
         </span>
         <span class="mord mathnormal">
          a
         </span>
         <span class="mord mathnormal">
          c
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0315em;">
          k
         </span>
        </span>
       </span>
      </span>
     </span>
     。
    </p>
    <p>
     <em>
      <strong>
       这里有一个小技巧：
      </strong>
     </em>
     <code>
      如果一个类显式实现了析构并释放资源，那么他就需要显式写拷贝构造，否则就不需要。
     </code>
    </p>
    <pre><code>P.S. 拷贝构造可以写成两种形式：
1. Stack st2(st1);
2. Stack st2 = st1;
这两种写法是等价的，都代表调用st1的拷贝构造函数，将结果拷贝给st2。
</code></pre>
    <ol start="5">
     <li>
      <p>
       <strong>
        传值返回会产生一个临时对象调用拷贝构造
       </strong>
       。
      </p>
      <p>
       <strong>
        传值引用返回，返回的是返回对象的别名（引用），没有产生拷贝
       </strong>
       。
      </p>
     </li>
    </ol>
    <pre><code class="prism language-cpp">Stack <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	Stack st<span class="token punctuation">;</span>

	<span class="token keyword">return</span> st<span class="token punctuation">;</span>	<span class="token comment">//调用Stack的拷贝构造</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	Stack ret <span class="token operator">=</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//将拷贝构造的值返回给ret</span>

	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     <em>
      （
      <strong>
       注意：
      </strong>
      如果返回对象是一个当前
      <strong>
       函数局部域的局部对象
      </strong>
      ，函数结束就销毁了，那么使用引用返回是有问题的，这时的引用相当于一个
      <strong>
       野引用
      </strong>
      ，类似一个野指针一样 ）
     </em>
    </p>
    <pre><code class="prism language-cpp">Stack<span class="token operator">&amp;</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	Stack st<span class="token punctuation">;</span>	<span class="token comment">//函数内部定义的局部变量出函数就会被销毁</span>
	
	<span class="token comment">//warning C4172: 返回局部变量的地址或临时 : st</span>
	<span class="token keyword">return</span> st<span class="token punctuation">;</span>	<span class="token comment">//返回st被销毁因此返回了一个野引用</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	Stack ret <span class="token operator">=</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//此时ret为野引用（一旦调用就会报错）</span>
	
	ret<span class="token punctuation">.</span><span class="token function">Push</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//realloc failed!</span>

	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     运行结果：
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/1306ebbf6ef1439f801a1362fa368d59.png"/>
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/a2acb4158bc547069fa02b2bc9989c80.png"/>
    </p>
    <p>
     这里因为对野引用进行操作所以就直接报错了。
     <strong>
      因此我们传引用返回的时候，要保证对象没有被销毁。
     </strong>
    </p>
    <p>
     因此我们可以在函数内部定义的对象加上
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        s 
        
       
         t 
        
       
         a 
        
       
         t 
        
       
         i 
        
       
         c 
        
       
      
        static
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6595em;">
         </span>
         <span class="mord mathnormal">
          s
         </span>
         <span class="mord mathnormal">
          t
         </span>
         <span class="mord mathnormal">
          a
         </span>
         <span class="mord mathnormal">
          t
         </span>
         <span class="mord mathnormal">
          i
         </span>
         <span class="mord mathnormal">
          c
         </span>
        </span>
       </span>
      </span>
     </span>
     让他变为
     <strong>
      静态全局的，延长它的生命周期
     </strong>
     ；还可以把对象在函数外定义好了
     <strong>
      传参给函数
     </strong>
     ，这样就不怕出了函数作用域对象销毁的问题了。
    </p>
    <blockquote>
     <p>
      <strong>
       传引用返回可以减少拷贝
      </strong>
      ，但是一定要确保返回对象，在当前函数结束后还在，（
      <strong>
       保证不是野引用
      </strong>
      ）才能用引用返回。
     </p>
    </blockquote>
    <h3>
     <a id="4__1581">
     </a>
     4. 赋值运算符重载
    </h3>
    <h4>
     <a id="41__1582">
     </a>
     4.1 运算符重载
    </h4>
    <blockquote>
     <p>
      当运算符被用于
      <strong>
       类类型
      </strong>
      的对象时，C++语言允许我们通过
      <strong>
       运算符重载
      </strong>
      的形式指定新的含义。
     </p>
    </blockquote>
    <p>
     <strong>
      运算符重载
     </strong>
     是一个特殊的
     <strong>
      函数
     </strong>
     ，他的名字是由
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        o 
        
       
         p 
        
       
         e 
        
       
         r 
        
       
         a 
        
       
         t 
        
       
         o 
        
       
         r 
        
       
      
        operator
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.8095em; vertical-align: -0.1944em;">
         </span>
         <span class="mord mathnormal">
          o
         </span>
         <span class="mord mathnormal">
          p
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0278em;">
          er
         </span>
         <span class="mord mathnormal">
          a
         </span>
         <span class="mord mathnormal">
          t
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0278em;">
          or
         </span>
        </span>
       </span>
      </span>
     </span>
     和后面要定义的
     <strong>
      运算符
     </strong>
     共同构成。
    </p>
    <p>
     <span class="katex--display">
      <span class="katex-display">
       <span class="katex">
        <span class="katex-mathml">
         ( 
         
        
          返回类型 
         
        
          ) 
         
        
            
         
        
          o 
         
        
          p 
         
        
          e 
         
        
          r 
         
        
          a 
         
        
          t 
         
        
          o 
         
        
          r 
         
        
          ( 
         
        
          运算符 
         
        
          ) 
         
        
            
         
        
          ( 
         
        
          参数 
         
        
          1 
         
        
          , 
         
        
          参数 
         
        
          2 
         
        
          ) 
         
        
          { 
         
        
          函数体 
         
        
          } 
         
        
       
         (返回类型)\ operator(运算符)\ (参数1,参数2) \{函数体\}
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 1em; vertical-align: -0.25em;">
          </span>
          <span class="mopen">
           (
          </span>
          <span class="mord cjk_fallback">
           返回类型
          </span>
          <span class="mclose">
           )
          </span>
          <span class="mspace">
          </span>
          <span class="mord mathnormal">
           o
          </span>
          <span class="mord mathnormal">
           p
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0278em;">
           er
          </span>
          <span class="mord mathnormal">
           a
          </span>
          <span class="mord mathnormal">
           t
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0278em;">
           or
          </span>
          <span class="mopen">
           (
          </span>
          <span class="mord cjk_fallback">
           运算符
          </span>
          <span class="mclose">
           )
          </span>
          <span class="mspace">
          </span>
          <span class="mopen">
           (
          </span>
          <span class="mord cjk_fallback">
           参数
          </span>
          <span class="mord">
           1
          </span>
          <span class="mpunct">
           ,
          </span>
          <span class="mspace" style="margin-right: 0.1667em;">
          </span>
          <span class="mord cjk_fallback">
           参数
          </span>
          <span class="mord">
           2
          </span>
          <span class="mclose">
           )
          </span>
          <span class="mopen">
           {
           <!-- -->
          </span>
          <span class="mord cjk_fallback">
           函数体
          </span>
          <span class="mclose">
           }
          </span>
         </span>
        </span>
       </span>
      </span>
     </span>
    </p>
    <ol>
     <li>
      C++规定
      <strong>
       类类型
      </strong>
      对象使用运算符时，必须转换成
      <strong>
       调用对应运算符重载
      </strong>
      ，若没有对应的运算符重载，则会编译报错。
     </li>
    </ol>
    <pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">Date</span>
<span class="token punctuation">{<!-- --></span><span class="token comment">//...};</span>

<span class="token keyword">bool</span> <span class="token keyword">operator</span> <span class="token operator">==</span> <span class="token punctuation">(</span>Date d1<span class="token punctuation">,</span> Date d2<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span><span class="token comment">//...}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	Date d1<span class="token punctuation">,</span> d2<span class="token punctuation">;</span>
	
	<span class="token comment">//如果没有定义operator函数会报错：</span>
	<span class="token comment">//error C2676: 二进制“==”:“Date”不定义该运算符或到预定义运算符可接收的类型的转换</span>
	d1 <span class="token operator">==</span> d2<span class="token punctuation">;</span>	<span class="token comment">//如果定义了operator==()函数会自动转化成下面的形式</span>
	<span class="token keyword">operator</span> <span class="token operator">==</span> <span class="token punctuation">(</span>d1<span class="token punctuation">,</span>d2<span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <ol start="2">
     <li>
      <p>
       一元运算符有一个参数、二元运算符有两个参数（
       <strong>
        左侧运算对象传给第一个参数
       </strong>
       ，
       <strong>
        右侧运算对象传给第二个参数
       </strong>
       ）
       <span class="katex--inline">
        <span class="katex">
         <span class="katex-mathml">
          . 
          
         
           . 
          
         
           . 
          
         
        
          ...
         </span>
         <span class="katex-html">
          <span class="base">
           <span class="strut" style="height: 0.1056em;">
           </span>
           <span class="mord">
            ...
           </span>
          </span>
         </span>
        </span>
       </span>
       <span class="katex--inline">
        <span class="katex">
         <span class="katex-mathml">
          n 
          
         
        
          n
         </span>
         <span class="katex-html">
          <span class="base">
           <span class="strut" style="height: 0.4306em;">
           </span>
           <span class="mord mathnormal">
            n
           </span>
          </span>
         </span>
        </span>
       </span>
       元运算符有
       <span class="katex--inline">
        <span class="katex">
         <span class="katex-mathml">
          n 
          
         
        
          n
         </span>
         <span class="katex-html">
          <span class="base">
           <span class="strut" style="height: 0.4306em;">
           </span>
           <span class="mord mathnormal">
            n
           </span>
          </span>
         </span>
        </span>
       </span>
       个参数。（大部分都是一元和二元）
      </p>
     </li>
     <li>
      <p>
       如果一个重载运算符函数是
       <strong>
        成员函数
       </strong>
       ，则
       <strong>
        它的第一个运算对象默认传给隐式的
        <span class="katex--inline">
         <span class="katex">
          <span class="katex-mathml">
           t 
           
          
            h 
           
          
            i 
           
          
            s 
           
          
         
           this
          </span>
          <span class="katex-html">
           <span class="base">
            <span class="strut" style="height: 0.6944em;">
            </span>
            <span class="mord mathnormal">
             t
            </span>
            <span class="mord mathnormal">
             hi
            </span>
            <span class="mord mathnormal">
             s
            </span>
           </span>
          </span>
         </span>
        </span>
        指针
       </strong>
       ，因此运算符重载作为成员函数时，参数比运算对象少一个（实际上少的那一个变成隐含的了）。
       <br/>
       <code>
        如果全局和成员都写了运算符重载，会优先调用成员函数的运算符重载。（先找类域，再找全局）
       </code>
      </p>
     </li>
    </ol>
    <p>
     当
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        o 
        
       
         p 
        
       
         e 
        
       
         r 
        
       
         a 
        
       
         t 
        
       
         o 
        
       
         r 
        
       
      
        operator
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.8095em; vertical-align: -0.1944em;">
         </span>
         <span class="mord mathnormal">
          o
         </span>
         <span class="mord mathnormal">
          p
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0278em;">
          er
         </span>
         <span class="mord mathnormal">
          a
         </span>
         <span class="mord mathnormal">
          t
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0278em;">
          or
         </span>
        </span>
       </span>
      </span>
     </span>
     定义为全局函数时，由于类的成员变量都是私有的，因此
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        o 
        
       
         p 
        
       
         e 
        
       
         r 
        
       
         a 
        
       
         t 
        
       
         o 
        
       
         r 
        
       
      
        operator
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.8095em; vertical-align: -0.1944em;">
         </span>
         <span class="mord mathnormal">
          o
         </span>
         <span class="mord mathnormal">
          p
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0278em;">
          er
         </span>
         <span class="mord mathnormal">
          a
         </span>
         <span class="mord mathnormal">
          t
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0278em;">
          or
         </span>
        </span>
       </span>
      </span>
     </span>
     不能直接访问其成员变量：
    </p>
    <pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">Date</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token function">Date</span><span class="token punctuation">(</span><span class="token keyword">int</span> year <span class="token operator">=</span> <span class="token number">2000</span><span class="token punctuation">,</span> <span class="token keyword">int</span> month <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">int</span> day <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		_year <span class="token operator">=</span> year<span class="token punctuation">;</span>
		_month <span class="token operator">=</span> month<span class="token punctuation">;</span>
		_day <span class="token operator">=</span> day<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">void</span> <span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> _year <span class="token operator">&lt;&lt;</span> <span class="token string">"/"</span> <span class="token operator">&lt;&lt;</span> _month <span class="token operator">&lt;&lt;</span> <span class="token string">"/"</span> <span class="token operator">&lt;&lt;</span> _day <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token comment">//private:</span>
	<span class="token keyword">int</span> _year<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _month<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _day<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">bool</span> <span class="token keyword">operator</span> <span class="token operator">==</span> <span class="token punctuation">(</span>Date d1<span class="token punctuation">,</span> Date d2<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> d1<span class="token punctuation">.</span>_year <span class="token operator">==</span> d2<span class="token punctuation">.</span>_year
		<span class="token operator">&amp;&amp;</span> d1<span class="token punctuation">.</span>_month <span class="token operator">==</span> d2<span class="token punctuation">.</span>_month
		<span class="token operator">&amp;&amp;</span> d1<span class="token punctuation">.</span>_day <span class="token operator">==</span> d2<span class="token punctuation">.</span>_day<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	Date d1<span class="token punctuation">,</span> <span class="token function">d2</span><span class="token punctuation">(</span><span class="token number">2025</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// operator == (d1,d2)</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>d1 <span class="token operator">==</span> d2<span class="token punctuation">)</span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"等于"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token keyword">else</span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"不等于"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     这里是把是直接把
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        p 
        
       
         r 
        
       
         i 
        
       
         v 
        
       
         a 
        
       
         t 
        
       
         e 
        
       
         : 
        
       
      
        private:
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.854em; vertical-align: -0.1944em;">
         </span>
         <span class="mord mathnormal">
          p
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0278em;">
          r
         </span>
         <span class="mord mathnormal">
          i
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0359em;">
          v
         </span>
         <span class="mord mathnormal">
          a
         </span>
         <span class="mord mathnormal">
          t
         </span>
         <span class="mord mathnormal">
          e
         </span>
         <span class="mspace" style="margin-right: 0.2778em;">
         </span>
         <span class="mrel">
          :
         </span>
        </span>
       </span>
      </span>
     </span>
     给注释掉了，即把成员变量先置为公有，让
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        o 
        
       
         p 
        
       
         e 
        
       
         r 
        
       
         a 
        
       
         t 
        
       
         o 
        
       
         r 
        
       
      
        operator
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.8095em; vertical-align: -0.1944em;">
         </span>
         <span class="mord mathnormal">
          o
         </span>
         <span class="mord mathnormal">
          p
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0278em;">
          er
         </span>
         <span class="mord mathnormal">
          a
         </span>
         <span class="mord mathnormal">
          t
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0278em;">
          or
         </span>
        </span>
       </span>
      </span>
     </span>
     能够访问到，不然会直接报错：
     <code>
      error C2248: “Date::_year”: 无法访问 private 成员(在“Date”类中声明)
     </code>
     。当然也可以像
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        J 
        
       
         a 
        
       
         v 
        
       
         a 
        
       
      
        Java
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6833em;">
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0962em;">
          J
         </span>
         <span class="mord mathnormal">
          a
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0359em;">
          v
         </span>
         <span class="mord mathnormal">
          a
         </span>
        </span>
       </span>
      </span>
     </span>
     一样搞一个
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        G 
        
       
         e 
        
       
         t 
        
       
         ( 
        
       
         ) 
        
       
      
        Get()
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 1em; vertical-align: -0.25em;">
         </span>
         <span class="mord mathnormal">
          G
         </span>
         <span class="mord mathnormal">
          e
         </span>
         <span class="mord mathnormal">
          t
         </span>
         <span class="mopen">
          (
         </span>
         <span class="mclose">
          )
         </span>
        </span>
       </span>
      </span>
     </span>
     函数，让成员变量变成只读。
    </p>
    <p>
     但是我们还可以直接把
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        o 
        
       
         p 
        
       
         e 
        
       
         r 
        
       
         a 
        
       
         t 
        
       
         o 
        
       
         r 
        
       
      
        operator
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.8095em; vertical-align: -0.1944em;">
         </span>
         <span class="mord mathnormal">
          o
         </span>
         <span class="mord mathnormal">
          p
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0278em;">
          er
         </span>
         <span class="mord mathnormal">
          a
         </span>
         <span class="mord mathnormal">
          t
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0278em;">
          or
         </span>
        </span>
       </span>
      </span>
     </span>
     函数直接放到类内部，这样就能直接访问：
    </p>
    <pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">Date</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token function">Date</span><span class="token punctuation">(</span><span class="token keyword">int</span> year <span class="token operator">=</span> <span class="token number">2000</span><span class="token punctuation">,</span> <span class="token keyword">int</span> month <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">int</span> day <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		_year <span class="token operator">=</span> year<span class="token punctuation">;</span>
		_month <span class="token operator">=</span> month<span class="token punctuation">;</span>
		_day <span class="token operator">=</span> day<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">void</span> <span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> _year <span class="token operator">&lt;&lt;</span> <span class="token string">"/"</span> <span class="token operator">&lt;&lt;</span> _month <span class="token operator">&lt;&lt;</span> <span class="token string">"/"</span> <span class="token operator">&lt;&lt;</span> _day <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">bool</span> <span class="token keyword">operator</span> <span class="token operator">==</span> <span class="token punctuation">(</span>Date d1<span class="token punctuation">,</span> Date d2<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> d1<span class="token punctuation">.</span>_year <span class="token operator">==</span> d2<span class="token punctuation">.</span>_year
			<span class="token operator">&amp;&amp;</span> d1<span class="token punctuation">.</span>_month <span class="token operator">==</span> d2<span class="token punctuation">.</span>_month
			<span class="token operator">&amp;&amp;</span> d1<span class="token punctuation">.</span>_day <span class="token operator">==</span> d2<span class="token punctuation">.</span>_day<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token keyword">int</span> _year<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _month<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _day<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	Date d1<span class="token punctuation">,</span> <span class="token function">d2</span><span class="token punctuation">(</span><span class="token number">2025</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//error C2804: 二进制“operator ==”的参数太多</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>d1 <span class="token operator">==</span> d2<span class="token punctuation">)</span>	
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"等于"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token keyword">else</span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"不等于"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     这里直接把
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        o 
        
       
         p 
        
       
         e 
        
       
         r 
        
       
         a 
        
       
         t 
        
       
         o 
        
       
         r 
        
       
      
        operator
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.8095em; vertical-align: -0.1944em;">
         </span>
         <span class="mord mathnormal">
          o
         </span>
         <span class="mord mathnormal">
          p
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0278em;">
          er
         </span>
         <span class="mord mathnormal">
          a
         </span>
         <span class="mord mathnormal">
          t
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0278em;">
          or
         </span>
        </span>
       </span>
      </span>
     </span>
     函数复制粘贴到类里面，运行后会发现直接报错了：
     <code>
      error C2804: 二进制“operator ==”的参数太多
     </code>
     。
    </p>
    <p>
     之前我们在学习
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        t 
        
       
         h 
        
       
         i 
        
       
         s 
        
       
      
        this
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6944em;">
         </span>
         <span class="mord mathnormal">
          t
         </span>
         <span class="mord mathnormal">
          hi
         </span>
         <span class="mord mathnormal">
          s
         </span>
        </span>
       </span>
      </span>
     </span>
     指针的时候，知道成员函数默认都会在
     <strong>
      形参第一个位置
     </strong>
     ，增加一个
     <strong>
      当前类类型
     </strong>
     的指针
     <code>
      Date* const this
     </code>
     ，叫做
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        t 
        
       
         h 
        
       
         i 
        
       
         s 
        
       
      
        this
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6944em;">
         </span>
         <span class="mord mathnormal">
          t
         </span>
         <span class="mord mathnormal">
          hi
         </span>
         <span class="mord mathnormal">
          s
         </span>
        </span>
       </span>
      </span>
     </span>
     指针。
    </p>
    <p>
     因此，
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        o 
        
       
         p 
        
       
         e 
        
       
         r 
        
       
         a 
        
       
         t 
        
       
         o 
        
       
         r 
        
       
      
        operator
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.8095em; vertical-align: -0.1944em;">
         </span>
         <span class="mord mathnormal">
          o
         </span>
         <span class="mord mathnormal">
          p
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0278em;">
          er
         </span>
         <span class="mord mathnormal">
          a
         </span>
         <span class="mord mathnormal">
          t
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0278em;">
          or
         </span>
        </span>
       </span>
      </span>
     </span>
     做成员变量的时候，第一个参数会默认为当前对象的
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        t 
        
       
         h 
        
       
         i 
        
       
         s 
        
       
      
        this
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6944em;">
         </span>
         <span class="mord mathnormal">
          t
         </span>
         <span class="mord mathnormal">
          hi
         </span>
         <span class="mord mathnormal">
          s
         </span>
        </span>
       </span>
      </span>
     </span>
     指针（隐藏起来了），这个指针访问的是
     <strong>
      当前类的成员变量
     </strong>
     即
     <strong>
      第一个对象
     </strong>
     的成员变量，这时只需要传一个参数（代表右侧运算对象）即可。
    </p>
    <blockquote>
     <p>
      <em>
       <strong>
        总结：运算符重载作为成员函数时，参数比运算对象少一个。
       </strong>
      </em>
      <strong>
       （第一个参数为
       <span class="katex--inline">
        <span class="katex">
         <span class="katex-mathml">
          t 
          
         
           h 
          
         
           i 
          
         
           s 
          
         
        
          this
         </span>
         <span class="katex-html">
          <span class="base">
           <span class="strut" style="height: 0.6944em;">
           </span>
           <span class="mord mathnormal">
            t
           </span>
           <span class="mord mathnormal">
            hi
           </span>
           <span class="mord mathnormal">
            s
           </span>
          </span>
         </span>
        </span>
       </span>
       指针）
      </strong>
     </p>
    </blockquote>
    <p>
     因此修改后的
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        o 
        
       
         p 
        
       
         e 
        
       
         r 
        
       
         a 
        
       
         t 
        
       
         o 
        
       
         r 
        
       
         = 
        
       
         = 
        
       
         ( 
        
       
         ) 
        
       
      
        operator == ()
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.8095em; vertical-align: -0.1944em;">
         </span>
         <span class="mord mathnormal">
          o
         </span>
         <span class="mord mathnormal">
          p
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0278em;">
          er
         </span>
         <span class="mord mathnormal">
          a
         </span>
         <span class="mord mathnormal">
          t
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0278em;">
          or
         </span>
         <span class="mspace" style="margin-right: 0.2778em;">
         </span>
         <span class="mrel">
          ==
         </span>
         <span class="mspace" style="margin-right: 0.2778em;">
         </span>
        </span>
        <span class="base">
         <span class="strut" style="height: 1em; vertical-align: -0.25em;">
         </span>
         <span class="mopen">
          (
         </span>
         <span class="mclose">
          )
         </span>
        </span>
       </span>
      </span>
     </span>
     函数应该只有一个参数：
    </p>
    <pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">Date</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token function">Date</span><span class="token punctuation">(</span><span class="token keyword">int</span> year <span class="token operator">=</span> <span class="token number">2000</span><span class="token punctuation">,</span> <span class="token keyword">int</span> month <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">int</span> day <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		_year <span class="token operator">=</span> year<span class="token punctuation">;</span>
		_month <span class="token operator">=</span> month<span class="token punctuation">;</span>
		_day <span class="token operator">=</span> day<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">void</span> <span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> _year <span class="token operator">&lt;&lt;</span> <span class="token string">"/"</span> <span class="token operator">&lt;&lt;</span> _month <span class="token operator">&lt;&lt;</span> <span class="token string">"/"</span> <span class="token operator">&lt;&lt;</span> _day <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">bool</span> <span class="token keyword">operator</span> <span class="token operator">==</span> <span class="token punctuation">(</span>Date d<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> _year <span class="token operator">==</span> d<span class="token punctuation">.</span>_year
			<span class="token operator">&amp;&amp;</span> _month <span class="token operator">==</span> d<span class="token punctuation">.</span>_month
			<span class="token operator">&amp;&amp;</span> _day <span class="token operator">==</span> d<span class="token punctuation">.</span>_day<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token keyword">int</span> _year<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _month<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _day<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	Date d1<span class="token punctuation">,</span> <span class="token function">d2</span><span class="token punctuation">(</span><span class="token number">2025</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// d1.operator == (d2)</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>d1 <span class="token operator">==</span> d2<span class="token punctuation">)</span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"等于"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token keyword">else</span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"不等于"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <blockquote>
     <p>
      <strong>
       归纳总结：重载为全局的面临对象访问私有成员变量
      </strong>
      的问题，有几种方法可以解决：
     </p>
     <ol>
      <li>
       <p>
        <strong>
         成员放公有。
        </strong>
       </p>
      </li>
      <li>
       <p>
        <strong>
         <span class="katex--inline">
          <span class="katex">
           <span class="katex-mathml">
            D 
            
           
             a 
            
           
             t 
            
           
             e 
            
           
          
            Date
           </span>
           <span class="katex-html">
            <span class="base">
             <span class="strut" style="height: 0.6833em;">
             </span>
             <span class="mord mathnormal" style="margin-right: 0.0278em;">
              D
             </span>
             <span class="mord mathnormal">
              a
             </span>
             <span class="mord mathnormal">
              t
             </span>
             <span class="mord mathnormal">
              e
             </span>
            </span>
           </span>
          </span>
         </span>
         提供
         <span class="katex--inline">
          <span class="katex">
           <span class="katex-mathml">
            g 
            
           
             e 
            
           
             t 
            
           
             x 
            
           
             x 
            
           
             x 
            
           
          
            getxxx
           </span>
           <span class="katex-html">
            <span class="base">
             <span class="strut" style="height: 0.8095em; vertical-align: -0.1944em;">
             </span>
             <span class="mord mathnormal" style="margin-right: 0.0359em;">
              g
             </span>
             <span class="mord mathnormal">
              e
             </span>
             <span class="mord mathnormal">
              t
             </span>
             <span class="mord mathnormal">
              xxx
             </span>
            </span>
           </span>
          </span>
         </span>
         函数。
        </strong>
       </p>
      </li>
      <li>
       <p>
        <strong>
         友元函数。
        </strong>
       </p>
      </li>
      <li>
       <p>
        <strong>
         重载为成员函数。
        </strong>
       </p>
      </li>
     </ol>
    </blockquote>
    <ol start="4">
     <li>
      <p>
       运算符重载以后，其
       <strong>
        优先级
       </strong>
       和
       <strong>
        结合性
       </strong>
       与对应的内置类型运算符保持一致。
      </p>
     </li>
     <li>
      <p>
       <strong>
        不能
       </strong>
       通过连接语法中没有的符号来
       <strong>
        创建
       </strong>
       新的操作符：比如
       <span class="katex--inline">
        <span class="katex">
         <span class="katex-mathml">
          o 
          
         
           p 
          
         
           e 
          
         
           r 
          
         
           a 
          
         
           t 
          
         
           o 
          
         
           r 
          
         
        
          operator
         </span>
         <span class="katex-html">
          <span class="base">
           <span class="strut" style="height: 0.8095em; vertical-align: -0.1944em;">
           </span>
           <span class="mord mathnormal">
            o
           </span>
           <span class="mord mathnormal">
            p
           </span>
           <span class="mord mathnormal" style="margin-right: 0.0278em;">
            er
           </span>
           <span class="mord mathnormal">
            a
           </span>
           <span class="mord mathnormal">
            t
           </span>
           <span class="mord mathnormal" style="margin-right: 0.0278em;">
            or
           </span>
          </span>
         </span>
        </span>
       </span>
       @。
      </p>
     </li>
    </ol>
    <blockquote>
     <p>
      <em>
       <strong>
        注意：以下五个运算符不能重载：
       </strong>
      </em>
      (1)
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         . 
         
        
          ∗ 
         
        
       
         .*
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.4653em;">
          </span>
          <span class="mord">
           .
          </span>
          <span class="mord">
           ∗
          </span>
         </span>
        </span>
       </span>
      </span>
      (2)
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         : 
         
        
          : 
         
        
       
         ::
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.4306em;">
          </span>
          <span class="mrel">
           ::
          </span>
         </span>
        </span>
       </span>
      </span>
      (3)
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         s 
         
        
          i 
         
        
          z 
         
        
          e 
         
        
          o 
         
        
          f 
         
        
       
         sizeof
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;">
          </span>
          <span class="mord mathnormal">
           s
          </span>
          <span class="mord mathnormal">
           i
          </span>
          <span class="mord mathnormal">
           zeo
          </span>
          <span class="mord mathnormal" style="margin-right: 0.1076em;">
           f
          </span>
         </span>
        </span>
       </span>
      </span>
      (4)
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         ? 
         
        
          : 
         
        
       
         ?:
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.6944em;">
          </span>
          <span class="mclose">
           ?
          </span>
          <span class="mspace" style="margin-right: 0.2778em;">
          </span>
          <span class="mrel">
           :
          </span>
         </span>
        </span>
       </span>
      </span>
      (5)
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         . 
         
        
       
         .
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.1056em;">
          </span>
          <span class="mord">
           .
          </span>
         </span>
        </span>
       </span>
      </span>
      （
      <strong>
       面试题常考
      </strong>
      ）。
     </p>
    </blockquote>
    <ol start="6">
     <li>
      <p>
       重载操作符至少有一个
       <strong>
        类类型
       </strong>
       参数，不能通过运算符重载改变内置类型对象的含义，如：
       <code>
        int operator+(int x, int y)
       </code>
       。
      </p>
     </li>
     <li>
      <p>
       一个类需要重载哪些运算符，是看哪些运算符重载后
       <strong>
        有意义
       </strong>
       ，比如
       <span class="katex--inline">
        <span class="katex">
         <span class="katex-mathml">
          D 
          
         
           a 
          
         
           t 
          
         
           e 
          
         
        
          Date
         </span>
         <span class="katex-html">
          <span class="base">
           <span class="strut" style="height: 0.6833em;">
           </span>
           <span class="mord mathnormal" style="margin-right: 0.0278em;">
            D
           </span>
           <span class="mord mathnormal">
            a
           </span>
           <span class="mord mathnormal">
            t
           </span>
           <span class="mord mathnormal">
            e
           </span>
          </span>
         </span>
        </span>
       </span>
       类重载
       <span class="katex--inline">
        <span class="katex">
         <span class="katex-mathml">
          o 
          
         
           p 
          
         
           e 
          
         
           r 
          
         
           a 
          
         
           t 
          
         
           o 
          
         
           r 
          
         
           − 
          
         
        
          operator-
         </span>
         <span class="katex-html">
          <span class="base">
           <span class="strut" style="height: 0.8095em; vertical-align: -0.1944em;">
           </span>
           <span class="mord mathnormal">
            o
           </span>
           <span class="mord mathnormal">
            p
           </span>
           <span class="mord mathnormal" style="margin-right: 0.0278em;">
            er
           </span>
           <span class="mord mathnormal">
            a
           </span>
           <span class="mord mathnormal">
            t
           </span>
           <span class="mord mathnormal" style="margin-right: 0.0278em;">
            or
           </span>
           <span class="mord">
            −
           </span>
          </span>
         </span>
        </span>
       </span>
       就有意义（中间多少天），但是重载
       <span class="katex--inline">
        <span class="katex">
         <span class="katex-mathml">
          o 
          
         
           p 
          
         
           e 
          
         
           r 
          
         
           a 
          
         
           t 
          
         
           o 
          
         
           r 
          
         
           + 
          
         
        
          operator+
         </span>
         <span class="katex-html">
          <span class="base">
           <span class="strut" style="height: 0.8095em; vertical-align: -0.1944em;">
           </span>
           <span class="mord mathnormal">
            o
           </span>
           <span class="mord mathnormal">
            p
           </span>
           <span class="mord mathnormal" style="margin-right: 0.0278em;">
            er
           </span>
           <span class="mord mathnormal">
            a
           </span>
           <span class="mord mathnormal">
            t
           </span>
           <span class="mord mathnormal" style="margin-right: 0.0278em;">
            or
           </span>
           <span class="mord">
            +
           </span>
          </span>
         </span>
        </span>
       </span>
       就没有意义。
      </p>
     </li>
     <li>
      <p>
       重载
       <span class="katex--inline">
        <span class="katex">
         <span class="katex-mathml">
          + 
          
         
           + 
          
         
        
          ++
         </span>
         <span class="katex-html">
          <span class="base">
           <span class="strut" style="height: 0.6667em; vertical-align: -0.0833em;">
           </span>
           <span class="mord">
            +
           </span>
           <span class="mord">
            +
           </span>
          </span>
         </span>
        </span>
       </span>
       运算符时，有
       <strong>
        前置++
       </strong>
       和
       <strong>
        后置++
       </strong>
       ，运算符重载函数名都是
       <span class="katex--inline">
        <span class="katex">
         <span class="katex-mathml">
          o 
          
         
           p 
          
         
           e 
          
         
           r 
          
         
           a 
          
         
           t 
          
         
           o 
          
         
           r 
          
         
           + 
          
         
           + 
          
         
        
          operator++
         </span>
         <span class="katex-html">
          <span class="base">
           <span class="strut" style="height: 0.8095em; vertical-align: -0.1944em;">
           </span>
           <span class="mord mathnormal">
            o
           </span>
           <span class="mord mathnormal">
            p
           </span>
           <span class="mord mathnormal" style="margin-right: 0.0278em;">
            er
           </span>
           <span class="mord mathnormal">
            a
           </span>
           <span class="mord mathnormal">
            t
           </span>
           <span class="mord mathnormal" style="margin-right: 0.0278em;">
            or
           </span>
           <span class="mspace" style="margin-right: 0.2222em;">
           </span>
           <span class="mbin">
            +
           </span>
           <span class="mspace" style="margin-right: 0.2222em;">
           </span>
          </span>
          <span class="base">
           <span class="strut" style="height: 0.6667em; vertical-align: -0.0833em;">
           </span>
           <span class="mord">
            +
           </span>
          </span>
         </span>
        </span>
       </span>
       ，无法很好的区分。
      </p>
      <p>
       <em>
        <strong>
         C++规定：后置++重载时，增加⼀个
         <span class="katex--inline">
          <span class="katex">
           <span class="katex-mathml">
            i 
            
           
             n 
            
           
             t 
            
           
          
            int
           </span>
           <span class="katex-html">
            <span class="base">
             <span class="strut" style="height: 0.6595em;">
             </span>
             <span class="mord mathnormal">
              in
             </span>
             <span class="mord mathnormal">
              t
             </span>
            </span>
           </span>
          </span>
         </span>
         形参，跟前置++构成函数重载，方便区分。
        </strong>
       </em>
      </p>
     </li>
    </ol>
    <pre><code class="prism language-cpp"><span class="token comment">//前置++/--</span>
Date<span class="token operator">&amp;</span> <span class="token keyword">operator</span> <span class="token operator">++</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//++d</span>
Date<span class="token operator">&amp;</span> <span class="token keyword">operator</span> <span class="token operator">--</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//--d</span>

<span class="token comment">//后置++/--</span>
<span class="token comment">//Date operator ++ (0);</span>
Date <span class="token keyword">operator</span> <span class="token operator">++</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//d++</span>
<span class="token comment">//Date operator ++ (0);</span>
Date <span class="token keyword">operator</span> <span class="token operator">--</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//d--</span>
</code></pre>
    <ol start="9">
     <li>
      重载
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         &lt; 
         
        
          &lt; 
         
        
       
         &lt;&lt;
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.5782em; vertical-align: -0.0391em;">
          </span>
          <span class="mrel">
           &lt;&lt;
          </span>
         </span>
        </span>
       </span>
      </span>
      和
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         &gt; 
         
        
          &gt; 
         
        
       
         &gt;&gt;
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.5782em; vertical-align: -0.0391em;">
          </span>
          <span class="mrel">
           &gt;&gt;
          </span>
         </span>
        </span>
       </span>
      </span>
      时，需要重载为
      <strong>
       全局函数
      </strong>
      。（因为重载为成员函数，
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         t 
         
        
          h 
         
        
          i 
         
        
          s 
         
        
       
         this
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.6944em;">
          </span>
          <span class="mord mathnormal">
           t
          </span>
          <span class="mord mathnormal">
           hi
          </span>
          <span class="mord mathnormal">
           s
          </span>
         </span>
        </span>
       </span>
      </span>
      指针
      <strong>
       默认抢占了第一个形参位置
      </strong>
      ，第一个形参位置是左侧运算对象，调用时就变成了
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         对象 
         
        
          &lt; 
         
        
          &lt; 
         
        
          c 
         
        
          o 
         
        
          u 
         
        
          t 
         
        
       
         对象&lt;&lt;cout
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.7224em; vertical-align: -0.0391em;">
          </span>
          <span class="mord cjk_fallback">
           对象
          </span>
          <span class="mspace" style="margin-right: 0.2778em;">
          </span>
          <span class="mrel">
           &lt;&lt;
          </span>
          <span class="mspace" style="margin-right: 0.2778em;">
          </span>
         </span>
         <span class="base">
          <span class="strut" style="height: 0.6151em;">
          </span>
          <span class="mord mathnormal">
           co
          </span>
          <span class="mord mathnormal">
           u
          </span>
          <span class="mord mathnormal">
           t
          </span>
         </span>
        </span>
       </span>
      </span>
      ，不符合使用习惯和可读性）
     </li>
    </ol>
    <pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">Date</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token comment">//...</span>
	<span class="token keyword">void</span> Date<span class="token double-colon punctuation">::</span><span class="token keyword">operator</span> <span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span>ostream<span class="token operator">&amp;</span> out<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		out <span class="token operator">&lt;&lt;</span> _year <span class="token operator">&lt;&lt;</span> <span class="token string">"年"</span> <span class="token operator">&lt;&lt;</span> _month <span class="token operator">&lt;&lt;</span> <span class="token string">"月"</span> <span class="token operator">&lt;&lt;</span> _day <span class="token operator">&lt;&lt;</span> <span class="token string">"日"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token comment">//...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	Date <span class="token function">d</span><span class="token punctuation">(</span><span class="token number">2025</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token comment">//error C2679: 二元“&lt;&lt;”: 没有找到接受“Date”类型的右操作数的运算符(或没有可接受的转换)</span>
	<span class="token comment">//cout &lt;&lt; d;</span>
	
	d <span class="token operator">&lt;&lt;</span> cout<span class="token punctuation">;</span>
	d<span class="token punctuation">.</span><span class="token keyword">operator</span> <span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span>cout<span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     如果写成
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        c 
        
       
         o 
        
       
         u 
        
       
         t 
        
       
         &lt; 
        
       
         &lt; 
        
       
         d 
        
       
      
        cout &lt;&lt; d
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6542em; vertical-align: -0.0391em;">
         </span>
         <span class="mord mathnormal">
          co
         </span>
         <span class="mord mathnormal">
          u
         </span>
         <span class="mord mathnormal">
          t
         </span>
         <span class="mspace" style="margin-right: 0.2778em;">
         </span>
         <span class="mrel">
          &lt;&lt;
         </span>
         <span class="mspace" style="margin-right: 0.2778em;">
         </span>
        </span>
        <span class="base">
         <span class="strut" style="height: 0.6944em;">
         </span>
         <span class="mord mathnormal">
          d
         </span>
        </span>
       </span>
      </span>
     </span>
     会直接报错，因为参数位置不匹配：
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/74bf6c5120e848e9ba3866938b191cf9.png"/>
    </p>
    <p>
     因为成员函数的第一个参数永远是
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        t 
        
       
         h 
        
       
         i 
        
       
         s 
        
       
      
        this
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6944em;">
         </span>
         <span class="mord mathnormal">
          t
         </span>
         <span class="mord mathnormal">
          hi
         </span>
         <span class="mord mathnormal">
          s
         </span>
        </span>
       </span>
      </span>
     </span>
     指针，因此会把
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        c 
        
       
         o 
        
       
         u 
        
       
         t 
        
       
      
        cout
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6151em;">
         </span>
         <span class="mord mathnormal">
          co
         </span>
         <span class="mord mathnormal">
          u
         </span>
         <span class="mord mathnormal">
          t
         </span>
        </span>
       </span>
      </span>
     </span>
     挤到第二个参数去。
     <br/>
     于是写成
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        d 
        
       
         &lt; 
        
       
         &lt; 
        
       
         c 
        
       
         o 
        
       
         u 
        
       
         t 
        
       
      
        d &lt;&lt; cout
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.7335em; vertical-align: -0.0391em;">
         </span>
         <span class="mord mathnormal">
          d
         </span>
         <span class="mspace" style="margin-right: 0.2778em;">
         </span>
         <span class="mrel">
          &lt;&lt;
         </span>
         <span class="mspace" style="margin-right: 0.2778em;">
         </span>
        </span>
        <span class="base">
         <span class="strut" style="height: 0.6151em;">
         </span>
         <span class="mord mathnormal">
          co
         </span>
         <span class="mord mathnormal">
          u
         </span>
         <span class="mord mathnormal">
          t
         </span>
        </span>
       </span>
      </span>
     </span>
     就不会报错了：
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/3cc0124576304860a0bc9fe150b84612.png"/>
    </p>
    <p>
     写成这样虽然正确，但用起来就有点
     <strong>
      倒反天罡
     </strong>
     的意思了。
    </p>
    <p>
     <em>
      <strong>
       因此，我们可以重载为全局函数，把
       <span class="katex--inline">
        <span class="katex">
         <span class="katex-mathml">
          o 
          
         
           s 
          
         
           t 
          
         
           r 
          
         
           e 
          
         
           a 
          
         
           m 
          
         
           / 
          
         
           i 
          
         
           s 
          
         
           t 
          
         
           r 
          
         
           e 
          
         
           a 
          
         
           m 
          
         
        
          ostream/istream
         </span>
         <span class="katex-html">
          <span class="base">
           <span class="strut" style="height: 1em; vertical-align: -0.25em;">
           </span>
           <span class="mord mathnormal">
            os
           </span>
           <span class="mord mathnormal">
            t
           </span>
           <span class="mord mathnormal">
            re
           </span>
           <span class="mord mathnormal">
            am
           </span>
           <span class="mord">
            /
           </span>
           <span class="mord mathnormal">
            i
           </span>
           <span class="mord mathnormal">
            s
           </span>
           <span class="mord mathnormal">
            t
           </span>
           <span class="mord mathnormal">
            re
           </span>
           <span class="mord mathnormal">
            am
           </span>
          </span>
         </span>
        </span>
       </span>
       放到第一个形参位置就可以了，第二个形参位置当类类型对象：
      </strong>
     </em>
    </p>
    <blockquote>
     <p>
      <em>
       <strong>
        注意：流对象不支持拷贝构造，因此调用时必须用引用：比如调用
        <span class="katex--inline">
         <span class="katex">
          <span class="katex-mathml">
           c 
           
          
            o 
           
          
            u 
           
          
            t 
           
          
         
           cout
          </span>
          <span class="katex-html">
           <span class="base">
            <span class="strut" style="height: 0.6151em;">
            </span>
            <span class="mord mathnormal">
             co
            </span>
            <span class="mord mathnormal">
             u
            </span>
            <span class="mord mathnormal">
             t
            </span>
           </span>
          </span>
         </span>
        </span>
        时用
        <span class="katex--inline">
         <span class="katex">
          <span class="katex-mathml">
           o 
           
          
            s 
           
          
            t 
           
          
            r 
           
          
            e 
           
          
            a 
           
          
            m 
           
          
            &amp; 
           
          
         
           ostream\&amp;
          </span>
          <span class="katex-html">
           <span class="base">
            <span class="strut" style="height: 0.6944em;">
            </span>
            <span class="mord mathnormal">
             os
            </span>
            <span class="mord mathnormal">
             t
            </span>
            <span class="mord mathnormal">
             re
            </span>
            <span class="mord mathnormal">
             am
            </span>
            <span class="mord">
             &amp;
            </span>
           </span>
          </span>
         </span>
        </span>
        。
       </strong>
      </em>
     </p>
    </blockquote>
    <pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">Date</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">//友元函数声明</span>
	<span class="token keyword">friend</span> <span class="token keyword">void</span> <span class="token keyword">operator</span> <span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span>ostream<span class="token operator">&amp;</span> out<span class="token punctuation">,</span> <span class="token keyword">const</span> Date<span class="token operator">&amp;</span> d<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token comment">//...</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token comment">//...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">//定义在全局（保证了参数顺序）</span>
<span class="token keyword">void</span> <span class="token keyword">operator</span> <span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span>ostream<span class="token operator">&amp;</span> out<span class="token punctuation">,</span> <span class="token keyword">const</span> Date<span class="token operator">&amp;</span> d<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	out <span class="token operator">&lt;&lt;</span> d<span class="token punctuation">.</span>_year <span class="token operator">&lt;&lt;</span> <span class="token string">"年"</span> <span class="token operator">&lt;&lt;</span> d<span class="token punctuation">.</span>_month <span class="token operator">&lt;&lt;</span> <span class="token string">"月"</span> <span class="token operator">&lt;&lt;</span> d<span class="token punctuation">.</span>_day <span class="token operator">&lt;&lt;</span> <span class="token string">"日"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	Date <span class="token function">d</span><span class="token punctuation">(</span><span class="token number">2025</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	cout <span class="token operator">&lt;&lt;</span> d<span class="token punctuation">;</span>
	<span class="token keyword">operator</span> <span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span>cout<span class="token punctuation">,</span> d<span class="token punctuation">)</span>
	
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     这样就可以正常运行了：
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/440ada1369d8497f9d9c132d5b253bdf.png"/>
    </p>
    <blockquote>
     <p>
      <strong>
       注意：
      </strong>
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         o 
         
        
          p 
         
        
          e 
         
        
          r 
         
        
          a 
         
        
          t 
         
        
          o 
         
        
          r 
         
        
          &lt; 
         
        
          &lt; 
         
        
       
         operator&lt;&lt;
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.8095em; vertical-align: -0.1944em;">
          </span>
          <span class="mord mathnormal">
           o
          </span>
          <span class="mord mathnormal">
           p
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0278em;">
           er
          </span>
          <span class="mord mathnormal">
           a
          </span>
          <span class="mord mathnormal">
           t
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0278em;">
           or
          </span>
          <span class="mspace" style="margin-right: 0.2778em;">
          </span>
          <span class="mrel">
           &lt;&lt;
          </span>
         </span>
        </span>
       </span>
      </span>
      在重载为
      <strong>
       全局函数
      </strong>
      之后，便对
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         D 
         
        
          a 
         
        
          t 
         
        
          e 
         
        
       
         Date
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.6833em;">
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0278em;">
           D
          </span>
          <span class="mord mathnormal">
           a
          </span>
          <span class="mord mathnormal">
           t
          </span>
          <span class="mord mathnormal">
           e
          </span>
         </span>
        </span>
       </span>
      </span>
      的成员变量
      <strong>
       失去了访问权
      </strong>
      （私有成员）。因此在
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         D 
         
        
          a 
         
        
          t 
         
        
          e 
         
        
       
         Date
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.6833em;">
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0278em;">
           D
          </span>
          <span class="mord mathnormal">
           a
          </span>
          <span class="mord mathnormal">
           t
          </span>
          <span class="mord mathnormal">
           e
          </span>
         </span>
        </span>
       </span>
      </span>
      类中对
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         o 
         
        
          p 
         
        
          e 
         
        
          r 
         
        
          a 
         
        
          t 
         
        
          o 
         
        
          r 
         
        
          &lt; 
         
        
          &lt; 
         
        
       
         operator&lt;&lt;
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.8095em; vertical-align: -0.1944em;">
          </span>
          <span class="mord mathnormal">
           o
          </span>
          <span class="mord mathnormal">
           p
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0278em;">
           er
          </span>
          <span class="mord mathnormal">
           a
          </span>
          <span class="mord mathnormal">
           t
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0278em;">
           or
          </span>
          <span class="mspace" style="margin-right: 0.2778em;">
          </span>
          <span class="mrel">
           &lt;&lt;
          </span>
         </span>
        </span>
       </span>
      </span>
      函数加上一个
      <strong>
       友元声明
      </strong>
      。
     </p>
    </blockquote>
    <p>
     这个时候还有一个问题，
     <em>
      <strong>
       怎么解决连续输出的问题呢？
      </strong>
     </em>
     —— 答案是：
     <strong>
      可以增加一个返回值
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         c 
         
        
          o 
         
        
          u 
         
        
          t 
         
        
       
         cout
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.6151em;">
          </span>
          <span class="mord mathnormal">
           co
          </span>
          <span class="mord mathnormal">
           u
          </span>
          <span class="mord mathnormal">
           t
          </span>
         </span>
        </span>
       </span>
      </span>
     </strong>
     。
     <br/>
     再更改一下上面的程序，整理一下就得到了一个比较完善的流提取的运算符重载函数：
    </p>
    <pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">Date</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">//友元函数声明</span>
	<span class="token keyword">friend</span> ostream<span class="token operator">&amp;</span> <span class="token keyword">operator</span> <span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span>ostream<span class="token operator">&amp;</span> out<span class="token punctuation">,</span> <span class="token keyword">const</span> Date<span class="token operator">&amp;</span> d<span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//输出</span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token comment">//...</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token comment">//...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">//定义在全局（保证了参数顺序）</span>
ostream<span class="token operator">&amp;</span> <span class="token keyword">operator</span> <span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span>ostream<span class="token operator">&amp;</span> out<span class="token punctuation">,</span> <span class="token keyword">const</span> Date<span class="token operator">&amp;</span> d<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	out <span class="token operator">&lt;&lt;</span> d<span class="token punctuation">.</span>_year <span class="token operator">&lt;&lt;</span> <span class="token string">"年"</span> <span class="token operator">&lt;&lt;</span> d<span class="token punctuation">.</span>_month <span class="token operator">&lt;&lt;</span> <span class="token string">"月"</span> <span class="token operator">&lt;&lt;</span> d<span class="token punctuation">.</span>_day <span class="token operator">&lt;&lt;</span> <span class="token string">"日"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	Date <span class="token function">d1</span><span class="token punctuation">(</span><span class="token number">2025</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">d2</span><span class="token punctuation">(</span><span class="token number">2005</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">23</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	cout <span class="token operator">&lt;&lt;</span> d1 <span class="token operator">&lt;&lt;</span> d2 <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token keyword">operator</span> <span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span><span class="token keyword">operator</span> <span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span>cout<span class="token punctuation">,</span> d1<span class="token punctuation">)</span><span class="token punctuation">,</span> d2<span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     运行结果如下，完美地完成了任务：
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/2a8a44acfe0248718569428b35a9c10d.png"/>
    </p>
    <p>
     <code>
      注意：赋值运算符是从右往左赋值，而流提取是从左往右返回。因此赋值操作的返回值会给第二个参数，而流提取的返回值会给第一个参数。
     </code>
    </p>
    <h4>
     <a id="42__1893">
     </a>
     4.2 赋值运算符重载
    </h4>
    <blockquote>
     <p>
      <strong>
       赋值运算符重载是一个默认成员函数
      </strong>
      ，用于完成
      <strong>
       两个已经存在的对象
      </strong>
      直接的
      <strong>
       拷贝赋值
      </strong>
      。（这里要注意跟拷贝构造区分，
      <strong>
       拷贝构造
      </strong>
      用于一个对象拷贝
      <strong>
       初始化
      </strong>
      给另一个要创建的对象）
     </p>
    </blockquote>
    <p>
     还是以日期类来举例：
    </p>
    <pre><code class="prism language-cpp">Date <span class="token function">d1</span><span class="token punctuation">(</span><span class="token number">2025</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Date <span class="token function">d2</span><span class="token punctuation">(</span><span class="token number">2025</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//Date d3(d1);</span>
Date d3 <span class="token operator">=</span> d1<span class="token punctuation">;</span>	<span class="token comment">//拷贝构造（初始化还未创建的对象d1）</span>

d1 <span class="token operator">=</span> d2<span class="token punctuation">;</span>		<span class="token comment">//赋值重载（两个已经存在的对象d1、d2）</span>
</code></pre>
    <p>
     <strong>
      赋值运算符重载的特点：
     </strong>
    </p>
    <ol>
     <li>
      <p>
       赋值运算符重载是一个
       <strong>
        运算符重载
       </strong>
       ，规定
       <strong>
        必须重载为成员函数
       </strong>
       。赋值运算重载的参数
       <strong>
        建议
       </strong>
       写成
       <span class="katex--inline">
        <span class="katex">
         <span class="katex-mathml">
          c 
          
         
           o 
          
         
           n 
          
         
           s 
          
         
           t 
          
         
        
          const
         </span>
         <span class="katex-html">
          <span class="base">
           <span class="strut" style="height: 0.6151em;">
           </span>
           <span class="mord mathnormal">
            co
           </span>
           <span class="mord mathnormal">
            n
           </span>
           <span class="mord mathnormal">
            s
           </span>
           <span class="mord mathnormal">
            t
           </span>
          </span>
         </span>
        </span>
       </span>
       <strong>
        当前类类型引用
       </strong>
       ，否则会传值传参会有拷贝。
      </p>
     </li>
     <li>
      <p>
       <strong>
        有返回值
       </strong>
       ，且
       <strong>
        建议
       </strong>
       写成
       <strong>
        当前类类型引用
       </strong>
       ，引用返回可以提高效率，有返回值目的是为了
       <strong>
        支持连续赋值
       </strong>
       场景。
      </p>
     </li>
    </ol>
    <pre><code class="prism language-cpp"><span class="token keyword">int</span> i<span class="token punctuation">,</span> j<span class="token punctuation">,</span> k<span class="token punctuation">;</span>

<span class="token comment">//赋值表达式的返回值是：左操作数</span>
i <span class="token operator">=</span> j <span class="token operator">=</span> k <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>	<span class="token comment">//对内置类型变量进行连续赋值</span>
<span class="token comment">// k = 1（返回k）-&gt; j = k（返回j）-&gt; i = j </span>

Date d1<span class="token punctuation">,</span> d2<span class="token punctuation">,</span> d3<span class="token punctuation">;</span>

d1 <span class="token operator">=</span> d2 <span class="token operator">=</span> d3<span class="token punctuation">;</span>	<span class="token comment">//对自定义类型进行连续赋值</span>
<span class="token comment">//同上：d2 = d3（返回d2）-&gt; d1 = d2</span>
<span class="token comment">//即：d1 = (operator = (d2,d3)) -&gt; operator = (d1,operator = (d2,d3.)) </span>
</code></pre>
    <p>
     这里的
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        o 
        
       
         p 
        
       
         e 
        
       
         r 
        
       
         a 
        
       
         t 
        
       
         o 
        
       
         r 
        
       
         = 
        
       
      
        operator=
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.8095em; vertical-align: -0.1944em;">
         </span>
         <span class="mord mathnormal">
          o
         </span>
         <span class="mord mathnormal">
          p
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0278em;">
          er
         </span>
         <span class="mord mathnormal">
          a
         </span>
         <span class="mord mathnormal">
          t
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0278em;">
          or
         </span>
         <span class="mspace" style="margin-right: 0.2778em;">
         </span>
         <span class="mrel">
          =
         </span>
        </span>
       </span>
      </span>
     </span>
     是全局函数，成员函数的
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        o 
        
       
         p 
        
       
         e 
        
       
         r 
        
       
         a 
        
       
         t 
        
       
         o 
        
       
         r 
        
       
         = 
        
       
      
        operator=
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.8095em; vertical-align: -0.1944em;">
         </span>
         <span class="mord mathnormal">
          o
         </span>
         <span class="mord mathnormal">
          p
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0278em;">
          er
         </span>
         <span class="mord mathnormal">
          a
         </span>
         <span class="mord mathnormal">
          t
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0278em;">
          or
         </span>
         <span class="mspace" style="margin-right: 0.2778em;">
         </span>
         <span class="mrel">
          =
         </span>
        </span>
       </span>
      </span>
     </span>
     第一个参数是
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        t 
        
       
         h 
        
       
         i 
        
       
         s 
        
       
      
        this
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6944em;">
         </span>
         <span class="mord mathnormal">
          t
         </span>
         <span class="mord mathnormal">
          hi
         </span>
         <span class="mord mathnormal">
          s
         </span>
        </span>
       </span>
      </span>
     </span>
     指针，应该返回啥呢？
    </p>
    <pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">Date</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token function">Date</span><span class="token punctuation">(</span><span class="token keyword">int</span> year <span class="token operator">=</span> <span class="token number">2000</span><span class="token punctuation">,</span> <span class="token keyword">int</span> month <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">int</span> day <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		_year <span class="token operator">=</span> year<span class="token punctuation">;</span>
		_month <span class="token operator">=</span> month<span class="token punctuation">;</span>

		_day <span class="token operator">=</span> day<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">const</span> Date<span class="token operator">&amp;</span> <span class="token keyword">operator</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">const</span> Date<span class="token operator">&amp;</span> d<span class="token punctuation">)</span>	<span class="token comment">//返回值和参数都建议写成引用（提高效率）</span>
	<span class="token punctuation">{<!-- --></span>
		_year <span class="token operator">=</span> d<span class="token punctuation">.</span>_year<span class="token punctuation">;</span>
		_month <span class="token operator">=</span> d<span class="token punctuation">.</span>_month<span class="token punctuation">;</span>
		_day <span class="token operator">=</span> d<span class="token punctuation">.</span>_day<span class="token punctuation">;</span>
		<span class="token comment">//this指针指向的是左侧运算对象的地址</span>
		<span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>	<span class="token comment">//解引用后代表左侧运算对象</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">void</span> <span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> _year <span class="token operator">&lt;&lt;</span> <span class="token string">"/"</span> <span class="token operator">&lt;&lt;</span> _month <span class="token operator">&lt;&lt;</span> <span class="token string">"/"</span> <span class="token operator">&lt;&lt;</span> _day <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token keyword">int</span> _year<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _month<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _day<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	Date d1<span class="token punctuation">,</span> <span class="token function">d2</span><span class="token punctuation">(</span><span class="token number">2025</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">d3</span><span class="token punctuation">(</span><span class="token number">2005</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"d1："</span><span class="token punctuation">;</span> d1<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"d2："</span><span class="token punctuation">;</span> d2<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"d3："</span><span class="token punctuation">;</span> d3<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	d1 <span class="token operator">=</span> d2 <span class="token operator">=</span> d3<span class="token punctuation">;</span>	<span class="token comment">// (d1 = (d2 = d3));</span>
	<span class="token comment">// (d2 = d3)的返回值是d2，(d1 = d2)的返回值是d1</span>
	cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"d1："</span><span class="token punctuation">;</span> d1<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"d2："</span><span class="token punctuation">;</span> d2<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"d3："</span><span class="token punctuation">;</span> d3<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     运行结果为：
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/70ba358e3e2e4fa2aa6d6ecd95b94018.png"/>
    </p>
    <p>
     可以看出，赋值重载给了返回值就可以进行连续赋值操作。
    </p>
    <ol start="3">
     <li>
      没有显式实现时，
      <strong>
       编译器会自动生成一个默认赋值运算符重载
      </strong>
      ，默认赋值运算符重载行为跟默认拷贝构造函数类似，对
      <strong>
       内置类型
      </strong>
      成员变量会完成
      <strong>
       值拷贝/浅拷贝
      </strong>
      (一个字节一个字节的拷贝)，对
      <strong>
       自定义类型
      </strong>
      成员变量会调用他的
      <strong>
       赋值重载
      </strong>
      函数。
     </li>
    </ol>
    <p>
     <em>
      <strong>
       这里和拷贝构造非常像：
      </strong>
     </em>
    </p>
    <blockquote>
     <ol>
      <li>
       像
       <span class="katex--inline">
        <span class="katex">
         <span class="katex-mathml">
          D 
          
         
           a 
          
         
           t 
          
         
           e 
          
         
        
          Date
         </span>
         <span class="katex-html">
          <span class="base">
           <span class="strut" style="height: 0.6833em;">
           </span>
           <span class="mord mathnormal" style="margin-right: 0.0278em;">
            D
           </span>
           <span class="mord mathnormal">
            a
           </span>
           <span class="mord mathnormal">
            t
           </span>
           <span class="mord mathnormal">
            e
           </span>
          </span>
         </span>
        </span>
       </span>
       这样的类成员变量
       <strong>
        全是内置类型
       </strong>
       且
       <strong>
        没有指向什么资源
       </strong>
       ，编译器自动生成的赋值运算符重载就可以完成需要的拷贝（
       <strong>
        浅拷贝
       </strong>
       ），所以不需要我们显式实现赋值运算符重载。
      </li>
     </ol>
    </blockquote>
    <blockquote>
     <ol start="2">
      <li>
       像
       <span class="katex--inline">
        <span class="katex">
         <span class="katex-mathml">
          S 
          
         
           t 
          
         
           a 
          
         
           c 
          
         
           k 
          
         
        
          Stack
         </span>
         <span class="katex-html">
          <span class="base">
           <span class="strut" style="height: 0.6944em;">
           </span>
           <span class="mord mathnormal">
            St
           </span>
           <span class="mord mathnormal">
            a
           </span>
           <span class="mord mathnormal">
            c
           </span>
           <span class="mord mathnormal" style="margin-right: 0.0315em;">
            k
           </span>
          </span>
         </span>
        </span>
       </span>
       这样的类，虽然也都是
       <strong>
        内置类型
       </strong>
       ，但是
       <span class="katex--inline">
        <span class="katex">
         <span class="katex-mathml">
          _ 
          
         
           a 
          
         
        
          \_a
         </span>
         <span class="katex-html">
          <span class="base">
           <span class="strut" style="height: 0.7406em; vertical-align: -0.31em;">
           </span>
           <span class="mord" style="margin-right: 0.0278em;">
            _
           </span>
           <span class="mord mathnormal">
            a
           </span>
          </span>
         </span>
        </span>
       </span>
       <strong>
        指向了资源
       </strong>
       ，编译器自动生成的赋值运算符重载完成的值拷贝/浅拷贝不符合我们的需求，所以需要我们自己实现
       <strong>
        深拷贝
       </strong>
       (对指向的资源也进行拷贝)。
      </li>
     </ol>
    </blockquote>
    <blockquote>
     <ol start="3">
      <li>
       像
       <span class="katex--inline">
        <span class="katex">
         <span class="katex-mathml">
          M 
          
         
           y 
          
         
           Q 
          
         
           u 
          
         
           e 
          
         
           u 
          
         
           e 
          
         
        
          MyQueue
         </span>
         <span class="katex-html">
          <span class="base">
           <span class="strut" style="height: 0.8778em; vertical-align: -0.1944em;">
           </span>
           <span class="mord mathnormal" style="margin-right: 0.109em;">
            M
           </span>
           <span class="mord mathnormal" style="margin-right: 0.0359em;">
            y
           </span>
           <span class="mord mathnormal">
            Q
           </span>
           <span class="mord mathnormal">
            u
           </span>
           <span class="mord mathnormal">
            e
           </span>
           <span class="mord mathnormal">
            u
           </span>
           <span class="mord mathnormal">
            e
           </span>
          </span>
         </span>
        </span>
       </span>
       这样的类型内部主要是
       <strong>
        自定义类型
       </strong>
       <span class="katex--inline">
        <span class="katex">
         <span class="katex-mathml">
          S 
          
         
           t 
          
         
           a 
          
         
           c 
          
         
           k 
          
         
        
          Stack
         </span>
         <span class="katex-html">
          <span class="base">
           <span class="strut" style="height: 0.6944em;">
           </span>
           <span class="mord mathnormal">
            St
           </span>
           <span class="mord mathnormal">
            a
           </span>
           <span class="mord mathnormal">
            c
           </span>
           <span class="mord mathnormal" style="margin-right: 0.0315em;">
            k
           </span>
          </span>
         </span>
        </span>
       </span>
       成员，编译器自动生成的赋值运算符重载会调用
       <span class="katex--inline">
        <span class="katex">
         <span class="katex-mathml">
          S 
          
         
           t 
          
         
           a 
          
         
           c 
          
         
           k 
          
         
        
          Stack
         </span>
         <span class="katex-html">
          <span class="base">
           <span class="strut" style="height: 0.6944em;">
           </span>
           <span class="mord mathnormal">
            St
           </span>
           <span class="mord mathnormal">
            a
           </span>
           <span class="mord mathnormal">
            c
           </span>
           <span class="mord mathnormal" style="margin-right: 0.0315em;">
            k
           </span>
          </span>
         </span>
        </span>
       </span>
       的赋值运算符重载，也不需要我们显式实现
       <span class="katex--inline">
        <span class="katex">
         <span class="katex-mathml">
          M 
          
         
           y 
          
         
           Q 
          
         
           u 
          
         
           e 
          
         
           u 
          
         
           e 
          
         
        
          MyQueue
         </span>
         <span class="katex-html">
          <span class="base">
           <span class="strut" style="height: 0.8778em; vertical-align: -0.1944em;">
           </span>
           <span class="mord mathnormal" style="margin-right: 0.109em;">
            M
           </span>
           <span class="mord mathnormal" style="margin-right: 0.0359em;">
            y
           </span>
           <span class="mord mathnormal">
            Q
           </span>
           <span class="mord mathnormal">
            u
           </span>
           <span class="mord mathnormal">
            e
           </span>
           <span class="mord mathnormal">
            u
           </span>
           <span class="mord mathnormal">
            e
           </span>
          </span>
         </span>
        </span>
       </span>
       的赋值运算符重载。
      </li>
     </ol>
    </blockquote>
    <p>
     <em>
      <strong>
       这里还有一个小技巧：
      </strong>
     </em>
     <code>
      如果一个类显式实现了析构并释放资源，那么他就需要显式写赋值运算符重载，否则就不需要。
     </code>
    </p>
    <h3>
     <a id="5__1995">
     </a>
     5. 取地址运算符重载
    </h3>
    <p>
     我们在定义对象的时候，不仅会定义
     <strong>
      普通对象
     </strong>
     ，也可能会定义
     <strong>
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         c 
         
        
          o 
         
        
          n 
         
        
          s 
         
        
          t 
         
        
       
         const
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.6151em;">
          </span>
          <span class="mord mathnormal">
           co
          </span>
          <span class="mord mathnormal">
           n
          </span>
          <span class="mord mathnormal">
           s
          </span>
          <span class="mord mathnormal">
           t
          </span>
         </span>
        </span>
       </span>
      </span>
      对象
     </strong>
     。
    </p>
    <p>
     以日期类来举例：
    </p>
    <pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">Date</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token function">Date</span><span class="token punctuation">(</span><span class="token keyword">int</span> year <span class="token operator">=</span> <span class="token number">1900</span><span class="token punctuation">,</span> <span class="token keyword">int</span> month <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">int</span> day <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		_year <span class="token operator">=</span> year<span class="token punctuation">;</span>
		_month <span class="token operator">=</span> month<span class="token punctuation">;</span>
		_day <span class="token operator">=</span> day<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">// void Print(Date* const this)</span>
	<span class="token keyword">void</span> <span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> _year <span class="token operator">&lt;&lt;</span> <span class="token string">"/"</span> <span class="token operator">&lt;&lt;</span> _month <span class="token operator">&lt;&lt;</span> <span class="token string">"/"</span> <span class="token operator">&lt;&lt;</span> _day <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token keyword">int</span> _year<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _month<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _day<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	Date <span class="token function">d1</span><span class="token punctuation">(</span><span class="token number">2025</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">13</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	d1<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//传的值&amp;d1是Date*</span>
	
	<span class="token keyword">const</span> Date <span class="token function">d2</span><span class="token punctuation">(</span><span class="token number">2025</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//error C2662: “void Date::Print(void)”: 不能将“this”指针从“const Date”转换为“Date &amp;”</span>
	d2<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//传的值&amp;d2是Date*（应该传const Date*）</span>

	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     这里如果定义的
     <strong>
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         c 
         
        
          o 
         
        
          n 
         
        
          s 
         
        
          t 
         
        
       
         const
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.6151em;">
          </span>
          <span class="mord mathnormal">
           co
          </span>
          <span class="mord mathnormal">
           n
          </span>
          <span class="mord mathnormal">
           s
          </span>
          <span class="mord mathnormal">
           t
          </span>
         </span>
        </span>
       </span>
      </span>
      对象
     </strong>
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        d 
        
       
         2 
        
       
      
        d2
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6944em;">
         </span>
         <span class="mord mathnormal">
          d
         </span>
         <span class="mord">
          2
         </span>
        </span>
       </span>
      </span>
     </span>
     如果想要访问其成员函数的话，会造成
     <em>
      <strong>
       权限放大
      </strong>
     </em>
     问题：
    </p>
    <p>
     这里的
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        d 
        
       
         2 
        
       
      
        d2
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6944em;">
         </span>
         <span class="mord mathnormal">
          d
         </span>
         <span class="mord">
          2
         </span>
        </span>
       </span>
      </span>
     </span>
     传的
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        t 
        
       
         h 
        
       
         i 
        
       
         s 
        
       
      
        this
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6944em;">
         </span>
         <span class="mord mathnormal">
          t
         </span>
         <span class="mord mathnormal">
          hi
         </span>
         <span class="mord mathnormal">
          s
         </span>
        </span>
       </span>
      </span>
     </span>
     指针是
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        D 
        
       
         a 
        
       
         t 
        
        
        
          e 
         
        
          ∗ 
         
        
       
      
        Date^*
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6887em;">
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0278em;">
          D
         </span>
         <span class="mord mathnormal">
          a
         </span>
         <span class="mord mathnormal">
          t
         </span>
         <span class="mord">
          <span class="mord mathnormal">
           e
          </span>
          <span class="msupsub">
           <span class="vlist-t">
            <span class="vlist-r">
             <span class="vlist" style="height: 0.6887em;">
              <span class="" style="top: -3.063em; margin-right: 0.05em;">
               <span class="pstrut" style="height: 2.7em;">
               </span>
               <span class="sizing reset-size6 size3 mtight">
                <span class="mbin mtight">
                 ∗
                </span>
               </span>
              </span>
             </span>
            </span>
           </span>
          </span>
         </span>
        </span>
       </span>
      </span>
     </span>
     类型的（忘了的话可以翻翻上面第三章关于
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        t 
        
       
         h 
        
       
         i 
        
       
         s 
        
       
      
        this
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6944em;">
         </span>
         <span class="mord mathnormal">
          t
         </span>
         <span class="mord mathnormal">
          hi
         </span>
         <span class="mord mathnormal">
          s
         </span>
        </span>
       </span>
      </span>
     </span>
     指针的内容），因此在语法层面上来讲，在成员函数里并没有对其限定不可修改，如果我想修改也是可以修改的：
    </p>
    <pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">Date</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token function">Date</span><span class="token punctuation">(</span><span class="token keyword">int</span> year <span class="token operator">=</span> <span class="token number">1900</span><span class="token punctuation">,</span> <span class="token keyword">int</span> month <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">int</span> day <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		_year <span class="token operator">=</span> year<span class="token punctuation">;</span>
		_month <span class="token operator">=</span> month<span class="token punctuation">;</span>
		_day <span class="token operator">=</span> day<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">// void Print(const Date* const this)</span>
	<span class="token keyword">void</span> <span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">this</span><span class="token operator">-&gt;</span>_year <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token keyword">this</span><span class="token operator">-&gt;</span>_month <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token keyword">this</span><span class="token operator">-&gt;</span>_day <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>	<span class="token comment">//直接修改</span>
		cout <span class="token operator">&lt;&lt;</span> _year <span class="token operator">&lt;&lt;</span> <span class="token string">"/"</span> <span class="token operator">&lt;&lt;</span> _month <span class="token operator">&lt;&lt;</span> <span class="token string">"/"</span> <span class="token operator">&lt;&lt;</span> _day <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token keyword">int</span> _year<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _month<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _day<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	Date <span class="token function">d</span><span class="token punctuation">(</span><span class="token number">2025</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	d<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//传的是 &amp;d -&gt; Date* const this</span>
	
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     <code>
      注意：这里Date* const this里的const是指定this不能修改，而不是指定this所指向的空间（Date类）不能修改。
     </code>
    </p>
    <p>
     完全可以把对象信息给改了：
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/a950ecc2a1e349c1a47b3ff4e70c3590.png"/>
    </p>
    <p>
     所以，如果我们定义的对象是
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        c 
        
       
         o 
        
       
         n 
        
       
         s 
        
       
         t 
        
       
      
        const
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6151em;">
         </span>
         <span class="mord mathnormal">
          co
         </span>
         <span class="mord mathnormal">
          n
         </span>
         <span class="mord mathnormal">
          s
         </span>
         <span class="mord mathnormal">
          t
         </span>
        </span>
       </span>
      </span>
     </span>
     对象，那么传到成员函数的参数
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        t 
        
       
         h 
        
       
         i 
        
       
         s 
        
       
      
        this
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6944em;">
         </span>
         <span class="mord mathnormal">
          t
         </span>
         <span class="mord mathnormal">
          hi
         </span>
         <span class="mord mathnormal">
          s
         </span>
        </span>
       </span>
      </span>
     </span>
     指针却是
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        D 
        
       
         a 
        
       
         t 
        
        
        
          e 
         
        
          ∗ 
         
        
       
           
        
       
         c 
        
       
         o 
        
       
         n 
        
       
         s 
        
       
         t 
        
       
           
        
       
         t 
        
       
         h 
        
       
         i 
        
       
         s 
        
       
      
        Date^*\ const\ this
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6944em;">
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0278em;">
          D
         </span>
         <span class="mord mathnormal">
          a
         </span>
         <span class="mord mathnormal">
          t
         </span>
         <span class="mord">
          <span class="mord mathnormal">
           e
          </span>
          <span class="msupsub">
           <span class="vlist-t">
            <span class="vlist-r">
             <span class="vlist" style="height: 0.6887em;">
              <span class="" style="top: -3.063em; margin-right: 0.05em;">
               <span class="pstrut" style="height: 2.7em;">
               </span>
               <span class="sizing reset-size6 size3 mtight">
                <span class="mbin mtight">
                 ∗
                </span>
               </span>
              </span>
             </span>
            </span>
           </span>
          </span>
         </span>
         <span class="mspace">
         </span>
         <span class="mord mathnormal">
          co
         </span>
         <span class="mord mathnormal">
          n
         </span>
         <span class="mord mathnormal">
          s
         </span>
         <span class="mord mathnormal">
          t
         </span>
         <span class="mspace">
         </span>
         <span class="mord mathnormal">
          t
         </span>
         <span class="mord mathnormal">
          hi
         </span>
         <span class="mord mathnormal">
          s
         </span>
        </span>
       </span>
      </span>
     </span>
     ，我们理应应当把其改为
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        c 
        
       
         o 
        
       
         n 
        
       
         s 
        
       
         t 
        
       
           
        
       
         D 
        
       
         a 
        
       
         t 
        
        
        
          e 
         
        
          ∗ 
         
        
       
           
        
       
         c 
        
       
         o 
        
       
         n 
        
       
         s 
        
       
         t 
        
       
           
        
       
         t 
        
       
         h 
        
       
         i 
        
       
         s 
        
       
      
        const\ Date^*\ const\ this
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6944em;">
         </span>
         <span class="mord mathnormal">
          co
         </span>
         <span class="mord mathnormal">
          n
         </span>
         <span class="mord mathnormal">
          s
         </span>
         <span class="mord mathnormal">
          t
         </span>
         <span class="mspace">
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0278em;">
          D
         </span>
         <span class="mord mathnormal">
          a
         </span>
         <span class="mord mathnormal">
          t
         </span>
         <span class="mord">
          <span class="mord mathnormal">
           e
          </span>
          <span class="msupsub">
           <span class="vlist-t">
            <span class="vlist-r">
             <span class="vlist" style="height: 0.6887em;">
              <span class="" style="top: -3.063em; margin-right: 0.05em;">
               <span class="pstrut" style="height: 2.7em;">
               </span>
               <span class="sizing reset-size6 size3 mtight">
                <span class="mbin mtight">
                 ∗
                </span>
               </span>
              </span>
             </span>
            </span>
           </span>
          </span>
         </span>
         <span class="mspace">
         </span>
         <span class="mord mathnormal">
          co
         </span>
         <span class="mord mathnormal">
          n
         </span>
         <span class="mord mathnormal">
          s
         </span>
         <span class="mord mathnormal">
          t
         </span>
         <span class="mspace">
         </span>
         <span class="mord mathnormal">
          t
         </span>
         <span class="mord mathnormal">
          hi
         </span>
         <span class="mord mathnormal">
          s
         </span>
        </span>
       </span>
      </span>
     </span>
     类型，才能确保对象受
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        c 
        
       
         o 
        
       
         n 
        
       
         s 
        
       
         t 
        
       
      
        const
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6151em;">
         </span>
         <span class="mord mathnormal">
          co
         </span>
         <span class="mord mathnormal">
          n
         </span>
         <span class="mord mathnormal">
          s
         </span>
         <span class="mord mathnormal">
          t
         </span>
        </span>
       </span>
      </span>
     </span>
     保护，在函数中也就不能随便修改了。
    </p>
    <p>
     <em>
      <strong>
       那么怎么在成员函数加上
       <span class="katex--inline">
        <span class="katex">
         <span class="katex-mathml">
          c 
          
         
           o 
          
         
           n 
          
         
           s 
          
         
           t 
          
         
        
          const
         </span>
         <span class="katex-html">
          <span class="base">
           <span class="strut" style="height: 0.6151em;">
           </span>
           <span class="mord mathnormal">
            co
           </span>
           <span class="mord mathnormal">
            n
           </span>
           <span class="mord mathnormal">
            s
           </span>
           <span class="mord mathnormal">
            t
           </span>
          </span>
         </span>
        </span>
       </span>
       呢？在哪加呢？
      </strong>
     </em>
     —— 我们引入了
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        c 
        
       
         o 
        
       
         n 
        
       
         s 
        
       
         t 
        
       
      
        const
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6151em;">
         </span>
         <span class="mord mathnormal">
          co
         </span>
         <span class="mord mathnormal">
          n
         </span>
         <span class="mord mathnormal">
          s
         </span>
         <span class="mord mathnormal">
          t
         </span>
        </span>
       </span>
      </span>
     </span>
     成员函数。
    </p>
    <h4>
     <a id="51_const__2076">
     </a>
     5.1 const 成员函数
    </h4>
    <blockquote>
     <p>
      <strong>
       将
       <span class="katex--inline">
        <span class="katex">
         <span class="katex-mathml">
          c 
          
         
           o 
          
         
           n 
          
         
           s 
          
         
           t 
          
         
        
          const
         </span>
         <span class="katex-html">
          <span class="base">
           <span class="strut" style="height: 0.6151em;">
           </span>
           <span class="mord mathnormal">
            co
           </span>
           <span class="mord mathnormal">
            n
           </span>
           <span class="mord mathnormal">
            s
           </span>
           <span class="mord mathnormal">
            t
           </span>
          </span>
         </span>
        </span>
       </span>
       修饰的成员函数称之为
       <span class="katex--inline">
        <span class="katex">
         <span class="katex-mathml">
          c 
          
         
           o 
          
         
           n 
          
         
           s 
          
         
           t 
          
         
        
          const
         </span>
         <span class="katex-html">
          <span class="base">
           <span class="strut" style="height: 0.6151em;">
           </span>
           <span class="mord mathnormal">
            co
           </span>
           <span class="mord mathnormal">
            n
           </span>
           <span class="mord mathnormal">
            s
           </span>
           <span class="mord mathnormal">
            t
           </span>
          </span>
         </span>
        </span>
       </span>
       成员函数
      </strong>
      ，
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         c 
         
        
          o 
         
        
          n 
         
        
          s 
         
        
          t 
         
        
       
         const
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.6151em;">
          </span>
          <span class="mord mathnormal">
           co
          </span>
          <span class="mord mathnormal">
           n
          </span>
          <span class="mord mathnormal">
           s
          </span>
          <span class="mord mathnormal">
           t
          </span>
         </span>
        </span>
       </span>
      </span>
      修饰成员函数放到
      <strong>
       成员函数参数列表的后面
      </strong>
      。
     </p>
    </blockquote>
    <p>
     以
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        D 
        
       
         a 
        
       
         t 
        
       
         e 
        
       
      
        Date
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6833em;">
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0278em;">
          D
         </span>
         <span class="mord mathnormal">
          a
         </span>
         <span class="mord mathnormal">
          t
         </span>
         <span class="mord mathnormal">
          e
         </span>
        </span>
       </span>
      </span>
     </span>
     类里的
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        P 
        
       
         r 
        
       
         i 
        
       
         n 
        
       
         t 
        
       
         ( 
        
       
         ) 
        
       
      
        Print()
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 1em; vertical-align: -0.25em;">
         </span>
         <span class="mord mathnormal" style="margin-right: 0.1389em;">
          P
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0278em;">
          r
         </span>
         <span class="mord mathnormal">
          in
         </span>
         <span class="mord mathnormal">
          t
         </span>
         <span class="mopen">
          (
         </span>
         <span class="mclose">
          )
         </span>
        </span>
       </span>
      </span>
     </span>
     函数举例：
    </p>
    <p>
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        c 
        
       
         o 
        
       
         n 
        
       
         s 
        
       
         t 
        
       
      
        const
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6151em;">
         </span>
         <span class="mord mathnormal">
          co
         </span>
         <span class="mord mathnormal">
          n
         </span>
         <span class="mord mathnormal">
          s
         </span>
         <span class="mord mathnormal">
          t
         </span>
        </span>
       </span>
      </span>
     </span>
     修饰
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        D 
        
       
         a 
        
       
         t 
        
       
         e 
        
       
      
        Date
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6833em;">
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0278em;">
          D
         </span>
         <span class="mord mathnormal">
          a
         </span>
         <span class="mord mathnormal">
          t
         </span>
         <span class="mord mathnormal">
          e
         </span>
        </span>
       </span>
      </span>
     </span>
     类的
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        P 
        
       
         r 
        
       
         i 
        
       
         n 
        
       
         t 
        
       
         ( 
        
       
         ) 
        
       
      
        Print()
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 1em; vertical-align: -0.25em;">
         </span>
         <span class="mord mathnormal" style="margin-right: 0.1389em;">
          P
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0278em;">
          r
         </span>
         <span class="mord mathnormal">
          in
         </span>
         <span class="mord mathnormal">
          t
         </span>
         <span class="mopen">
          (
         </span>
         <span class="mclose">
          )
         </span>
        </span>
       </span>
      </span>
     </span>
     成员函数，
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        P 
        
       
         r 
        
       
         i 
        
       
         n 
        
       
         t 
        
       
         ( 
        
       
         ) 
        
       
      
        Print()
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 1em; vertical-align: -0.25em;">
         </span>
         <span class="mord mathnormal" style="margin-right: 0.1389em;">
          P
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0278em;">
          r
         </span>
         <span class="mord mathnormal">
          in
         </span>
         <span class="mord mathnormal">
          t
         </span>
         <span class="mopen">
          (
         </span>
         <span class="mclose">
          )
         </span>
        </span>
       </span>
      </span>
     </span>
     隐含的
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        t 
        
       
         h 
        
       
         i 
        
       
         s 
        
       
      
        this
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6944em;">
         </span>
         <span class="mord mathnormal">
          t
         </span>
         <span class="mord mathnormal">
          hi
         </span>
         <span class="mord mathnormal">
          s
         </span>
        </span>
       </span>
      </span>
     </span>
     指针由
     <span class="katex--display">
      <span class="katex-display">
       <span class="katex">
        <span class="katex-mathml">
         D 
         
        
          a 
         
        
          t 
         
         
         
           e 
          
         
           ∗ 
          
         
        
            
         
        
          c 
         
        
          o 
         
        
          n 
         
        
          s 
         
        
          t 
         
        
            
         
        
          t 
         
        
          h 
         
        
          i 
         
        
          s 
         
        
       
         Date^*\ const\ this
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.7387em;">
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0278em;">
           D
          </span>
          <span class="mord mathnormal">
           a
          </span>
          <span class="mord mathnormal">
           t
          </span>
          <span class="mord">
           <span class="mord mathnormal">
            e
           </span>
           <span class="msupsub">
            <span class="vlist-t">
             <span class="vlist-r">
              <span class="vlist" style="height: 0.7387em;">
               <span class="" style="top: -3.113em; margin-right: 0.05em;">
                <span class="pstrut" style="height: 2.7em;">
                </span>
                <span class="sizing reset-size6 size3 mtight">
                 <span class="mbin mtight">
                  ∗
                 </span>
                </span>
               </span>
              </span>
             </span>
            </span>
           </span>
          </span>
          <span class="mspace">
          </span>
          <span class="mord mathnormal">
           co
          </span>
          <span class="mord mathnormal">
           n
          </span>
          <span class="mord mathnormal">
           s
          </span>
          <span class="mord mathnormal">
           t
          </span>
          <span class="mspace">
          </span>
          <span class="mord mathnormal">
           t
          </span>
          <span class="mord mathnormal">
           hi
          </span>
          <span class="mord mathnormal">
           s
          </span>
         </span>
        </span>
       </span>
      </span>
     </span>
     要变为
     <span class="katex--display">
      <span class="katex-display">
       <span class="katex">
        <span class="katex-mathml">
         c 
         
        
          o 
         
        
          n 
         
        
          s 
         
        
          t 
         
        
            
         
        
          D 
         
        
          a 
         
        
          t 
         
         
         
           e 
          
         
           ∗ 
          
         
        
            
         
        
          c 
         
        
          o 
         
        
          n 
         
        
          s 
         
        
          t 
         
        
            
         
        
          t 
         
        
          h 
         
        
          i 
         
        
          s 
         
        
       
         const\ Date^*\ const\ this
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.7387em;">
          </span>
          <span class="mord mathnormal">
           co
          </span>
          <span class="mord mathnormal">
           n
          </span>
          <span class="mord mathnormal">
           s
          </span>
          <span class="mord mathnormal">
           t
          </span>
          <span class="mspace">
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0278em;">
           D
          </span>
          <span class="mord mathnormal">
           a
          </span>
          <span class="mord mathnormal">
           t
          </span>
          <span class="mord">
           <span class="mord mathnormal">
            e
           </span>
           <span class="msupsub">
            <span class="vlist-t">
             <span class="vlist-r">
              <span class="vlist" style="height: 0.7387em;">
               <span class="" style="top: -3.113em; margin-right: 0.05em;">
                <span class="pstrut" style="height: 2.7em;">
                </span>
                <span class="sizing reset-size6 size3 mtight">
                 <span class="mbin mtight">
                  ∗
                 </span>
                </span>
               </span>
              </span>
             </span>
            </span>
           </span>
          </span>
          <span class="mspace">
          </span>
          <span class="mord mathnormal">
           co
          </span>
          <span class="mord mathnormal">
           n
          </span>
          <span class="mord mathnormal">
           s
          </span>
          <span class="mord mathnormal">
           t
          </span>
          <span class="mspace">
          </span>
          <span class="mord mathnormal">
           t
          </span>
          <span class="mord mathnormal">
           hi
          </span>
          <span class="mord mathnormal">
           s
          </span>
         </span>
        </span>
       </span>
      </span>
     </span>
     才能保证对象不被修改（权限匹配），而由于
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        t 
        
       
         h 
        
       
         i 
        
       
         s 
        
       
      
        this
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6944em;">
         </span>
         <span class="mord mathnormal">
          t
         </span>
         <span class="mord mathnormal">
          hi
         </span>
         <span class="mord mathnormal">
          s
         </span>
        </span>
       </span>
      </span>
     </span>
     指针是隐含的，没有办法直接在参数前加上
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        c 
        
       
         o 
        
       
         n 
        
       
         s 
        
       
         t 
        
       
      
        const
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6151em;">
         </span>
         <span class="mord mathnormal">
          co
         </span>
         <span class="mord mathnormal">
          n
         </span>
         <span class="mord mathnormal">
          s
         </span>
         <span class="mord mathnormal">
          t
         </span>
        </span>
       </span>
      </span>
     </span>
     。
    </p>
    <p>
     因此，规定成员函数
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        v 
        
       
         o 
        
       
         i 
        
       
         d 
        
       
           
        
       
         P 
        
       
         r 
        
       
         i 
        
       
         n 
        
       
         t 
        
       
         ( 
        
       
         ) 
        
       
           
        
       
         { 
        
       
         . 
        
       
         . 
        
       
         . 
        
       
         } 
        
       
      
        void\ Print()\ \{...\}
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 1em; vertical-align: -0.25em;">
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0359em;">
          v
         </span>
         <span class="mord mathnormal">
          o
         </span>
         <span class="mord mathnormal">
          i
         </span>
         <span class="mord mathnormal">
          d
         </span>
         <span class="mspace">
         </span>
         <span class="mord mathnormal" style="margin-right: 0.1389em;">
          P
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0278em;">
          r
         </span>
         <span class="mord mathnormal">
          in
         </span>
         <span class="mord mathnormal">
          t
         </span>
         <span class="mopen">
          (
         </span>
         <span class="mclose">
          )
         </span>
         <span class="mspace">
         </span>
         <span class="mopen">
          {
          <!-- -->
         </span>
         <span class="mord">
          ...
         </span>
         <span class="mclose">
          }
         </span>
        </span>
       </span>
      </span>
     </span>
     用
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        c 
        
       
         o 
        
       
         n 
        
       
         s 
        
       
         t 
        
       
      
        const
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6151em;">
         </span>
         <span class="mord mathnormal">
          co
         </span>
         <span class="mord mathnormal">
          n
         </span>
         <span class="mord mathnormal">
          s
         </span>
         <span class="mord mathnormal">
          t
         </span>
        </span>
       </span>
      </span>
     </span>
     修饰后写成
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        v 
        
       
         o 
        
       
         i 
        
       
         d 
        
       
           
        
       
         P 
        
       
         r 
        
       
         i 
        
       
         n 
        
       
         t 
        
       
         ( 
        
       
         ) 
        
       
           
        
       
         c 
        
       
         o 
        
       
         n 
        
       
         s 
        
       
         t 
        
       
           
        
       
         { 
        
       
         . 
        
       
         . 
        
       
         . 
        
       
         } 
        
       
      
        void\ Print()\ const\ \{...\}
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 1em; vertical-align: -0.25em;">
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0359em;">
          v
         </span>
         <span class="mord mathnormal">
          o
         </span>
         <span class="mord mathnormal">
          i
         </span>
         <span class="mord mathnormal">
          d
         </span>
         <span class="mspace">
         </span>
         <span class="mord mathnormal" style="margin-right: 0.1389em;">
          P
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0278em;">
          r
         </span>
         <span class="mord mathnormal">
          in
         </span>
         <span class="mord mathnormal">
          t
         </span>
         <span class="mopen">
          (
         </span>
         <span class="mclose">
          )
         </span>
         <span class="mspace">
         </span>
         <span class="mord mathnormal">
          co
         </span>
         <span class="mord mathnormal">
          n
         </span>
         <span class="mord mathnormal">
          s
         </span>
         <span class="mord mathnormal">
          t
         </span>
         <span class="mspace">
         </span>
         <span class="mopen">
          {
          <!-- -->
         </span>
         <span class="mord">
          ...
         </span>
         <span class="mclose">
          }
         </span>
        </span>
       </span>
      </span>
     </span>
     。
    </p>
    <blockquote>
     <p>
      <em>
       <strong>
        <span class="katex--inline">
         <span class="katex">
          <span class="katex-mathml">
           c 
           
          
            o 
           
          
            n 
           
          
            s 
           
          
            t 
           
          
         
           const
          </span>
          <span class="katex-html">
           <span class="base">
            <span class="strut" style="height: 0.6151em;">
            </span>
            <span class="mord mathnormal">
             co
            </span>
            <span class="mord mathnormal">
             n
            </span>
            <span class="mord mathnormal">
             s
            </span>
            <span class="mord mathnormal">
             t
            </span>
           </span>
          </span>
         </span>
        </span>
        实际修饰该成员函数隐含的
        <span class="katex--inline">
         <span class="katex">
          <span class="katex-mathml">
           t 
           
          
            h 
           
          
            i 
           
          
            s 
           
          
         
           this
          </span>
          <span class="katex-html">
           <span class="base">
            <span class="strut" style="height: 0.6944em;">
            </span>
            <span class="mord mathnormal">
             t
            </span>
            <span class="mord mathnormal">
             hi
            </span>
            <span class="mord mathnormal">
             s
            </span>
           </span>
          </span>
         </span>
        </span>
        指针，表明在该成员函数中不能对类的任何成员进行修改
       </strong>
      </em>
      。
     </p>
    </blockquote>
    <pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">Date</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token function">Date</span><span class="token punctuation">(</span><span class="token keyword">int</span> year <span class="token operator">=</span> <span class="token number">1900</span><span class="token punctuation">,</span> <span class="token keyword">int</span> month <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">int</span> day <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		_year <span class="token operator">=</span> year<span class="token punctuation">;</span>
		_month <span class="token operator">=</span> month<span class="token punctuation">;</span>
		_day <span class="token operator">=</span> day<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">// void Print(const Date* const this)</span>
	<span class="token keyword">void</span> <span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token comment">//error C3490 : 由于正在通过常量对象访问“_year”，因此无法对其进行修改</span>
		<span class="token comment">//error C3490 : 由于正在通过常量对象访问“_month”，因此无法对其进行修改</span>
		<span class="token comment">//error C3490: 由于正在通过常量对象访问“_day”，因此无法对其进行修改</span>
		<span class="token comment">//this-&gt;_year = 0; this-&gt;_month = 0; this-&gt;_day = 0;</span>
		cout <span class="token operator">&lt;&lt;</span> _year <span class="token operator">&lt;&lt;</span> <span class="token string">"/"</span> <span class="token operator">&lt;&lt;</span> _month <span class="token operator">&lt;&lt;</span> <span class="token string">"/"</span> <span class="token operator">&lt;&lt;</span> _day <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token keyword">int</span> _year<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _month<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _day<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">// 这里非const对象也可以调用const成员函数是一种权限的缩小</span>
	Date <span class="token function">d1</span><span class="token punctuation">(</span><span class="token number">2025</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	d1<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">const</span> Date <span class="token function">d2</span><span class="token punctuation">(</span><span class="token number">2025</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	d2<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     这样就成功调用
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        d 
        
       
         2 
        
       
      
        d2
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6944em;">
         </span>
         <span class="mord mathnormal">
          d
         </span>
         <span class="mord">
          2
         </span>
        </span>
       </span>
      </span>
     </span>
     ：
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/e5aead96d1e64ef2b85fc12dcfe3cbb4.png"/>
    </p>
    <p>
     且如果修改了对象的内容会直接报错：
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/91c6d2b15e3b457b9a0424908b20efd8.png"/>
    </p>
    <blockquote>
     <p>
      <em>
       <strong>
        总结：只要不修改对象的成员函数都可以加
        <span class="katex--inline">
         <span class="katex">
          <span class="katex-mathml">
           c 
           
          
            o 
           
          
            n 
           
          
            s 
           
          
            t 
           
          
         
           const
          </span>
          <span class="katex-html">
           <span class="base">
            <span class="strut" style="height: 0.6151em;">
            </span>
            <span class="mord mathnormal">
             co
            </span>
            <span class="mord mathnormal">
             n
            </span>
            <span class="mord mathnormal">
             s
            </span>
            <span class="mord mathnormal">
             t
            </span>
           </span>
          </span>
         </span>
        </span>
        ，加上
        <span class="katex--inline">
         <span class="katex">
          <span class="katex-mathml">
           c 
           
          
            o 
           
          
            n 
           
          
            s 
           
          
            t 
           
          
         
           const
          </span>
          <span class="katex-html">
           <span class="base">
            <span class="strut" style="height: 0.6151em;">
            </span>
            <span class="mord mathnormal">
             co
            </span>
            <span class="mord mathnormal">
             n
            </span>
            <span class="mord mathnormal">
             s
            </span>
            <span class="mord mathnormal">
             t
            </span>
           </span>
          </span>
         </span>
        </span>
        肯定更安全。
       </strong>
      </em>
     </p>
    </blockquote>
    <h4>
     <a id="52__2136">
     </a>
     5.2 取地址运算符重载
    </h4>
    <blockquote>
     <p>
      取地址运算符重载分为
      <strong>
       普通取地址运算符重载
      </strong>
      和
      <strong>
       <span class="katex--inline">
        <span class="katex">
         <span class="katex-mathml">
          c 
          
         
           o 
          
         
           n 
          
         
           s 
          
         
           t 
          
         
        
          const
         </span>
         <span class="katex-html">
          <span class="base">
           <span class="strut" style="height: 0.6151em;">
           </span>
           <span class="mord mathnormal">
            co
           </span>
           <span class="mord mathnormal">
            n
           </span>
           <span class="mord mathnormal">
            s
           </span>
           <span class="mord mathnormal">
            t
           </span>
          </span>
         </span>
        </span>
       </span>
       取地址运算符重载
      </strong>
      。
     </p>
    </blockquote>
    <p>
     <em>
      <strong>
       一般这两个函数编译器自动生成的就可以够我们用了，不需要我们去显式实现。（默认成员函数）
      </strong>
     </em>
    </p>
    <p>
     除非一些很特殊的场景：比如我们不想让别人取到当前类对象的地址，就可以自己实现一份，胡乱返回一个地址。（可见也没啥真正使实用的应用场景）
    </p>
    <pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">Date</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token comment">//1.普通取地址</span>
	Date<span class="token operator">*</span> <span class="token keyword">operator</span> <span class="token operator">&amp;</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">//2.const取地址</span>
	<span class="token keyword">const</span> Date<span class="token operator">*</span> <span class="token keyword">operator</span> <span class="token operator">&amp;</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token keyword">int</span> _year<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _month<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _day<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
    <p>
     可见这两个函数唯一的区别在于返回值：
    </p>
    <ol>
     <li>
      普通取地址运算符重载：需要返回
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         D 
         
        
          a 
         
        
          t 
         
         
         
           e 
          
         
           ∗ 
          
         
        
       
         Date^*
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.6887em;">
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0278em;">
           D
          </span>
          <span class="mord mathnormal">
           a
          </span>
          <span class="mord mathnormal">
           t
          </span>
          <span class="mord">
           <span class="mord mathnormal">
            e
           </span>
           <span class="msupsub">
            <span class="vlist-t">
             <span class="vlist-r">
              <span class="vlist" style="height: 0.6887em;">
               <span class="" style="top: -3.063em; margin-right: 0.05em;">
                <span class="pstrut" style="height: 2.7em;">
                </span>
                <span class="sizing reset-size6 size3 mtight">
                 <span class="mbin mtight">
                  ∗
                 </span>
                </span>
               </span>
              </span>
             </span>
            </span>
           </span>
          </span>
         </span>
        </span>
       </span>
      </span>
      。
     </li>
     <li>
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         c 
         
        
          o 
         
        
          n 
         
        
          s 
         
        
          t 
         
        
       
         const
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.6151em;">
          </span>
          <span class="mord mathnormal">
           co
          </span>
          <span class="mord mathnormal">
           n
          </span>
          <span class="mord mathnormal">
           s
          </span>
          <span class="mord mathnormal">
           t
          </span>
         </span>
        </span>
       </span>
      </span>
      取地址运算符重载：需要返回
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         c 
         
        
          o 
         
        
          n 
         
        
          s 
         
        
          t 
         
        
            
         
        
          D 
         
        
          a 
         
        
          t 
         
         
         
           e 
          
         
           ∗ 
          
         
        
       
         const\ Date^*
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.6887em;">
          </span>
          <span class="mord mathnormal">
           co
          </span>
          <span class="mord mathnormal">
           n
          </span>
          <span class="mord mathnormal">
           s
          </span>
          <span class="mord mathnormal">
           t
          </span>
          <span class="mspace">
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0278em;">
           D
          </span>
          <span class="mord mathnormal">
           a
          </span>
          <span class="mord mathnormal">
           t
          </span>
          <span class="mord">
           <span class="mord mathnormal">
            e
           </span>
           <span class="msupsub">
            <span class="vlist-t">
             <span class="vlist-r">
              <span class="vlist" style="height: 0.6887em;">
               <span class="" style="top: -3.063em; margin-right: 0.05em;">
                <span class="pstrut" style="height: 2.7em;">
                </span>
                <span class="sizing reset-size6 size3 mtight">
                 <span class="mbin mtight">
                  ∗
                 </span>
                </span>
               </span>
              </span>
             </span>
            </span>
           </span>
          </span>
         </span>
        </span>
       </span>
      </span>
     </li>
    </ol>
    <p>
     <code>
      注意：虽然普通对象也可以访问const取地址重载函数，但返回的是const Date*就不合理，因此要写两个。
     </code>
    </p>
    <p>
     函数实现直接返回
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        t 
        
       
         h 
        
       
         i 
        
       
         s 
        
       
      
        this
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6944em;">
         </span>
         <span class="mord mathnormal">
          t
         </span>
         <span class="mord mathnormal">
          hi
         </span>
         <span class="mord mathnormal">
          s
         </span>
        </span>
       </span>
      </span>
     </span>
     指针（本身就是指向对象的地址）即可，根本不用写什么东西，编译器都实现好了。
    </p>
    <hr/>
    <h2>
     <a id="static__2175">
     </a>
     五、static 成员
    </h2>
    <blockquote>
     <p>
      ⽤
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         s 
         
        
          t 
         
        
          a 
         
        
          t 
         
        
          i 
         
        
          c 
         
        
       
         static
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.6595em;">
          </span>
          <span class="mord mathnormal">
           s
          </span>
          <span class="mord mathnormal">
           t
          </span>
          <span class="mord mathnormal">
           a
          </span>
          <span class="mord mathnormal">
           t
          </span>
          <span class="mord mathnormal">
           i
          </span>
          <span class="mord mathnormal">
           c
          </span>
         </span>
        </span>
       </span>
      </span>
      修饰的成员变量，称之为
      <strong>
       静态成员变量
      </strong>
      ，静态成员变量一定要在
      <strong>
       类外进行初始化
      </strong>
      。（但是要
      <strong>
       在类内声明
      </strong>
      ：因为
      <strong>
       静态成员也是类的成员
      </strong>
      ，因此也受
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         p 
         
        
          u 
         
        
          b 
         
        
          l 
         
        
          i 
         
        
          c 
         
        
       
         public
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;">
          </span>
          <span class="mord mathnormal">
           p
          </span>
          <span class="mord mathnormal">
           u
          </span>
          <span class="mord mathnormal">
           b
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0197em;">
           l
          </span>
          <span class="mord mathnormal">
           i
          </span>
          <span class="mord mathnormal">
           c
          </span>
         </span>
        </span>
       </span>
      </span>
      、
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         p 
         
        
          r 
         
        
          o 
         
        
          t 
         
        
          e 
         
        
          c 
         
        
          t 
         
        
          e 
         
        
          d 
         
        
       
         protected
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;">
          </span>
          <span class="mord mathnormal">
           p
          </span>
          <span class="mord mathnormal">
           ro
          </span>
          <span class="mord mathnormal">
           t
          </span>
          <span class="mord mathnormal">
           ec
          </span>
          <span class="mord mathnormal">
           t
          </span>
          <span class="mord mathnormal">
           e
          </span>
          <span class="mord mathnormal">
           d
          </span>
         </span>
        </span>
       </span>
      </span>
      、
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         p 
         
        
          r 
         
        
          i 
         
        
          v 
         
        
          a 
         
        
          t 
         
        
          e 
         
        
       
         private
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.854em; vertical-align: -0.1944em;">
          </span>
          <span class="mord mathnormal">
           p
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0278em;">
           r
          </span>
          <span class="mord mathnormal">
           i
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0359em;">
           v
          </span>
          <span class="mord mathnormal">
           a
          </span>
          <span class="mord mathnormal">
           t
          </span>
          <span class="mord mathnormal">
           e
          </span>
         </span>
        </span>
       </span>
      </span>
      <strong>
       访问限定符的限制
      </strong>
      ）
      <br/>
      <br/>
      <code>
       注意：这里静态成员变量不能在声明位置给缺省值初始化，因为缺省值是个构造函数初始化列表的，静态成员变量不属于某个对象，不走构造函数初始化列表。
      </code>
     </p>
    </blockquote>
    <p>
     <em>
      <strong>
       注意：静态成员变量为类的所有对象所共享，不属于某个具体的对象，不存在对象中，存放在静态区。
      </strong>
     </em>
    </p>
    <pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">A</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token comment">//...</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token keyword">static</span> <span class="token keyword">int</span> _a<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	A a<span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     运行结果为：
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/c91e9c0eadce4006a2ae727026dd4578.png"/>
    </p>
    <p>
     可以看出，静态成员变量并没有存到对象里。（这里对象大小为
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        1 
        
       
      
        1
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6444em;">
         </span>
         <span class="mord">
          1
         </span>
        </span>
       </span>
      </span>
     </span>
     说明对象里面没有值）
    </p>
    <blockquote>
     <p>
      ⽤
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         s 
         
        
          t 
         
        
          a 
         
        
          t 
         
        
          i 
         
        
          c 
         
        
       
         static
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.6595em;">
          </span>
          <span class="mord mathnormal">
           s
          </span>
          <span class="mord mathnormal">
           t
          </span>
          <span class="mord mathnormal">
           a
          </span>
          <span class="mord mathnormal">
           t
          </span>
          <span class="mord mathnormal">
           i
          </span>
          <span class="mord mathnormal">
           c
          </span>
         </span>
        </span>
       </span>
      </span>
      修饰的成员函数，称之为
      <strong>
       静态成员函数
      </strong>
      ，静态成员函数
      <strong>
       没有
       <span class="katex--inline">
        <span class="katex">
         <span class="katex-mathml">
          t 
          
         
           h 
          
         
           i 
          
         
           s 
          
         
        
          this
         </span>
         <span class="katex-html">
          <span class="base">
           <span class="strut" style="height: 0.6944em;">
           </span>
           <span class="mord mathnormal">
            t
           </span>
           <span class="mord mathnormal">
            hi
           </span>
           <span class="mord mathnormal">
            s
           </span>
          </span>
         </span>
        </span>
       </span>
       指针
      </strong>
      。
     </p>
    </blockquote>
    <p>
     因此，
    </p>
    <ol>
     <li>
      <p>
       <strong>
        静态成员函数
       </strong>
       中
       <strong>
        可以访问其他的静态成员
       </strong>
       ，但是
       <strong>
        不能访问非静态的
       </strong>
       ，因为没有
       <span class="katex--inline">
        <span class="katex">
         <span class="katex-mathml">
          t 
          
         
           h 
          
         
           i 
          
         
           s 
          
         
        
          this
         </span>
         <span class="katex-html">
          <span class="base">
           <span class="strut" style="height: 0.6944em;">
           </span>
           <span class="mord mathnormal">
            t
           </span>
           <span class="mord mathnormal">
            hi
           </span>
           <span class="mord mathnormal">
            s
           </span>
          </span>
         </span>
        </span>
       </span>
       指针。
      </p>
     </li>
     <li>
      <p>
       <strong>
        非静态的成员函数
       </strong>
       ，
       <strong>
        可以访问任意
       </strong>
       的静态成员变量和非静态成员函数，因为有
       <span class="katex--inline">
        <span class="katex">
         <span class="katex-mathml">
          t 
          
         
           h 
          
         
           i 
          
         
           s 
          
         
        
          this
         </span>
         <span class="katex-html">
          <span class="base">
           <span class="strut" style="height: 0.6944em;">
           </span>
           <span class="mord mathnormal">
            t
           </span>
           <span class="mord mathnormal">
            hi
           </span>
           <span class="mord mathnormal">
            s
           </span>
          </span>
         </span>
        </span>
       </span>
       指针。
      </p>
     </li>
    </ol>
    <p>
     也就是说，
     <em>
      <strong>
       静态成员是大家公有的、共享的；而非静态成员只能通过
       <span class="katex--inline">
        <span class="katex">
         <span class="katex-mathml">
          t 
          
         
           h 
          
         
           i 
          
         
           s 
          
         
        
          this
         </span>
         <span class="katex-html">
          <span class="base">
           <span class="strut" style="height: 0.6944em;">
           </span>
           <span class="mord mathnormal">
            t
           </span>
           <span class="mord mathnormal">
            hi
           </span>
           <span class="mord mathnormal">
            s
           </span>
          </span>
         </span>
        </span>
       </span>
       指针来访问。
      </strong>
     </em>
    </p>
    <p>
     <em>
      <strong>
       突破类域就可以访问静态成员：
      </strong>
     </em>
    </p>
    <p>
     可以通过
     <span class="katex--display">
      <span class="katex-display">
       <span class="katex">
        <span class="katex-mathml">
         类名 
         
        
          : 
         
        
          : 
         
        
          静态成员 
         
        
       
         类名::静态成员
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.6833em;">
          </span>
          <span class="mord cjk_fallback">
           类名
          </span>
          <span class="mspace" style="margin-right: 0.2778em;">
          </span>
          <span class="mrel">
           ::
          </span>
          <span class="mspace" style="margin-right: 0.2778em;">
          </span>
         </span>
         <span class="base">
          <span class="strut" style="height: 0.6833em;">
          </span>
          <span class="mord cjk_fallback">
           静态成员
          </span>
         </span>
        </span>
       </span>
      </span>
     </span>
     或者
     <span class="katex--display">
      <span class="katex-display">
       <span class="katex">
        <span class="katex-mathml">
         对象 
         
        
          . 
         
        
          静态成员 
         
        
       
         对象.静态成员
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.6833em;">
          </span>
          <span class="mord cjk_fallback">
           对象
          </span>
          <span class="mord">
           .
          </span>
          <span class="mord cjk_fallback">
           静态成员
          </span>
         </span>
        </span>
       </span>
      </span>
     </span>
     来访问
     <strong>
      静态成员变量
     </strong>
     和
     <strong>
      静态成员函数
     </strong>
     。
    </p>
    <pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">A</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token comment">//...</span>
	<span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">Get_a1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> _a1<span class="token punctuation">;</span>
		<span class="token comment">//error C2597: 对非静态成员“A::a1”的非法引用</span>
		<span class="token comment">//return _a2;	//静态成员函数不能访问非静态成员变量</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">void</span> <span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> _a1 <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span> <span class="token operator">&lt;&lt;</span> _a2 <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>	<span class="token comment">//非静态成员函数可以随便访问任意成员变量</span>
	<span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token comment">//类内部声明</span>
	<span class="token keyword">static</span> <span class="token keyword">int</span> _a1<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _a2 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">//类外部初始化</span>
<span class="token keyword">int</span> A<span class="token double-colon punctuation">::</span>_a1 <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>	

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	A a<span class="token punctuation">;</span>
	
	<span class="token comment">//打印_a的值：10</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token class-name">A</span><span class="token double-colon punctuation">::</span><span class="token function">Get_a1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>	<span class="token comment">//1.类名::静态成员</span>
	cout <span class="token operator">&lt;&lt;</span> a<span class="token punctuation">.</span><span class="token function">Get_a1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>		<span class="token comment">//2.对象.静态成员</span>
	
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     <em>
      <strong>
       那么
       <span class="katex--inline">
        <span class="katex">
         <span class="katex-mathml">
          s 
          
         
           t 
          
         
           a 
          
         
           t 
          
         
           i 
          
         
           c 
          
         
        
          static
         </span>
         <span class="katex-html">
          <span class="base">
           <span class="strut" style="height: 0.6595em;">
           </span>
           <span class="mord mathnormal">
            s
           </span>
           <span class="mord mathnormal">
            t
           </span>
           <span class="mord mathnormal">
            a
           </span>
           <span class="mord mathnormal">
            t
           </span>
           <span class="mord mathnormal">
            i
           </span>
           <span class="mord mathnormal">
            c
           </span>
          </span>
         </span>
        </span>
       </span>
       成员具体有啥应用呢？
      </strong>
     </em>
    </p>
    <p>
     提出一个问题：
     <em>
      <strong>
       实现一个类，计算程序中创建出了多少个类对象？
      </strong>
     </em>
    </p>
    <pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">A</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token comment">//构造函数</span>
	<span class="token function">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		_scount<span class="token operator">++</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">//拷贝构造函数</span>
	<span class="token function">A</span><span class="token punctuation">(</span><span class="token keyword">const</span> A<span class="token operator">&amp;</span> a<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		_scount<span class="token operator">++</span><span class="token punctuation">;</span>	
	<span class="token punctuation">}</span>
	<span class="token comment">//析构函数</span>
	<span class="token operator">~</span><span class="token function">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		_scount<span class="token operator">--</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">int</span> <span class="token function">Get_scount</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> _scount<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token comment">//类里面声明</span>
	<span class="token keyword">static</span> <span class="token keyword">int</span> _scount<span class="token punctuation">;</span>	<span class="token comment">//计算程序创建了多少个类对象</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>						<span class="token comment">//（构造+1、析构-1）</span>

<span class="token comment">//类外面初始化</span>
<span class="token keyword">int</span> A<span class="token double-colon punctuation">::</span>_scount <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	A a<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span>	<span class="token comment">//创建了10个A类型对象</span>
	
	<span class="token comment">//由此可见，10个对象的static成员都是共享的</span>
	<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
		cout <span class="token operator">&lt;&lt;</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">Get_scount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     运行结果为：
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/912a84d8ce4a4f4cac6ff8d7c7a79c13.png"/>
    </p>
    <p>
     由此可见，
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        s 
        
       
         t 
        
       
         a 
        
       
         t 
        
       
         i 
        
       
         c 
        
       
      
        static
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6595em;">
         </span>
         <span class="mord mathnormal">
          s
         </span>
         <span class="mord mathnormal">
          t
         </span>
         <span class="mord mathnormal">
          a
         </span>
         <span class="mord mathnormal">
          t
         </span>
         <span class="mord mathnormal">
          i
         </span>
         <span class="mord mathnormal">
          c
         </span>
        </span>
       </span>
      </span>
     </span>
     成员确实都是共享的，每个对象都一样。
    </p>
    <p>
     通过上面这段程序，我们就可以用这种方法做下面这道题：
    </p>
    <p>
     【题目信息】
    </p>
    <p>
     <a href="https://www.nowcoder.com/practice/7a0da8fc483247ff8800059e12d7caf1?tpId=13&amp;tqId=11200&amp;tPage=3&amp;rp=3&amp;ru=/ta/coding-interviews&amp;qru=/ta/coding-interviews/question-ranking" rel="nofollow">
      【剑指
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         o 
         
        
          f 
         
        
          f 
         
        
          e 
         
        
          r 
         
        
       
         offer
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;">
          </span>
          <span class="mord mathnormal">
           o
          </span>
          <span class="mord mathnormal" style="margin-right: 0.1076em;">
           ff
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0278em;">
           er
          </span>
         </span>
        </span>
       </span>
      </span>
      】
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         64. 
         
        
       
         64.
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.6444em;">
          </span>
          <span class="mord">
           64.
          </span>
         </span>
        </span>
       </span>
      </span>
      求
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         1 
         
        
          + 
         
        
          2 
         
        
          + 
         
        
          3 
         
        
          + 
         
        
          . 
         
        
          . 
         
        
          . 
         
        
          + 
         
        
          n 
         
        
       
         1+2+3+...+n
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.7278em; vertical-align: -0.0833em;">
          </span>
          <span class="mord">
           1
          </span>
          <span class="mspace" style="margin-right: 0.2222em;">
          </span>
          <span class="mbin">
           +
          </span>
          <span class="mspace" style="margin-right: 0.2222em;">
          </span>
         </span>
         <span class="base">
          <span class="strut" style="height: 0.7278em; vertical-align: -0.0833em;">
          </span>
          <span class="mord">
           2
          </span>
          <span class="mspace" style="margin-right: 0.2222em;">
          </span>
          <span class="mbin">
           +
          </span>
          <span class="mspace" style="margin-right: 0.2222em;">
          </span>
         </span>
         <span class="base">
          <span class="strut" style="height: 0.7278em; vertical-align: -0.0833em;">
          </span>
          <span class="mord">
           3
          </span>
          <span class="mspace" style="margin-right: 0.2222em;">
          </span>
          <span class="mbin">
           +
          </span>
          <span class="mspace" style="margin-right: 0.2222em;">
          </span>
         </span>
         <span class="base">
          <span class="strut" style="height: 0.6667em; vertical-align: -0.0833em;">
          </span>
          <span class="mord">
           ...
          </span>
          <span class="mspace" style="margin-right: 0.2222em;">
          </span>
          <span class="mbin">
           +
          </span>
          <span class="mspace" style="margin-right: 0.2222em;">
          </span>
         </span>
         <span class="base">
          <span class="strut" style="height: 0.4306em;">
          </span>
          <span class="mord mathnormal">
           n
          </span>
         </span>
        </span>
       </span>
      </span>
      ：
     </a>
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/5ff631282f684972a8f09b2de0a0f41f.png"/>
    </p>
    <p>
     这是
     <strong>
      《剑指
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         o 
         
        
          f 
         
        
          f 
         
        
          e 
         
        
          r 
         
        
       
         offer
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;">
          </span>
          <span class="mord mathnormal">
           o
          </span>
          <span class="mord mathnormal" style="margin-right: 0.1076em;">
           ff
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0278em;">
           er
          </span>
         </span>
        </span>
       </span>
      </span>
      》
     </strong>
     上的一道题，虽然题目很简单，但是给了很多条件限制，因此常规方法基本上是不能用的，所以我们要
     <strong>
      另辟蹊径
     </strong>
     —— 用
     <strong>
      非常规方法
     </strong>
     ：
    </p>
    <p>
     【题目解析】
    </p>
    <p>
     这道题的意思是只能用
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        + 
        
       
         、 
        
       
         − 
        
       
      
        +、-
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.7667em; vertical-align: -0.0833em;">
         </span>
         <span class="mord">
          +
         </span>
         <span class="mord cjk_fallback">
          、
         </span>
         <span class="mord">
          −
         </span>
        </span>
       </span>
      </span>
     </span>
     来实现累加了，那么找规律发现一共有
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        n 
        
       
      
        n
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.4306em;">
         </span>
         <span class="mord mathnormal">
          n
         </span>
        </span>
       </span>
      </span>
     </span>
     项，从第
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        1 
        
       
      
        1
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6444em;">
         </span>
         <span class="mord">
          1
         </span>
        </span>
       </span>
      </span>
     </span>
     项到第
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        n 
        
       
      
        n
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.4306em;">
         </span>
         <span class="mord mathnormal">
          n
         </span>
        </span>
       </span>
      </span>
     </span>
     项，每一项都是上一项
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        + 
        
       
         + 
        
       
      
        ++
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6667em; vertical-align: -0.0833em;">
         </span>
         <span class="mord">
          +
         </span>
         <span class="mord">
          +
         </span>
        </span>
       </span>
      </span>
     </span>
     后的结果，也就是说可以定义一个
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        i 
        
       
      
        i
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6595em;">
         </span>
         <span class="mord mathnormal">
          i
         </span>
        </span>
       </span>
      </span>
     </span>
     变量代表每一个元素，加到一个初始值为
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        0 
        
       
      
        0
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6444em;">
         </span>
         <span class="mord">
          0
         </span>
        </span>
       </span>
      </span>
     </span>
     的
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        s 
        
       
         u 
        
       
         m 
        
       
      
        sum
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.4306em;">
         </span>
         <span class="mord mathnormal">
          s
         </span>
         <span class="mord mathnormal">
          u
         </span>
         <span class="mord mathnormal">
          m
         </span>
        </span>
       </span>
      </span>
     </span>
     变量中，代表累加和，每次加完就让
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        i 
        
       
         + 
        
       
         + 
        
       
      
        i++
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.7429em; vertical-align: -0.0833em;">
         </span>
         <span class="mord mathnormal">
          i
         </span>
         <span class="mspace" style="margin-right: 0.2222em;">
         </span>
         <span class="mbin">
          +
         </span>
         <span class="mspace" style="margin-right: 0.2222em;">
         </span>
        </span>
        <span class="base">
         <span class="strut" style="height: 0.6667em; vertical-align: -0.0833em;">
         </span>
         <span class="mord">
          +
         </span>
        </span>
       </span>
      </span>
     </span>
     ，一共加上
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        n 
        
       
      
        n
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.4306em;">
         </span>
         <span class="mord mathnormal">
          n
         </span>
        </span>
       </span>
      </span>
     </span>
     次就完美的解决了问题。
    </p>
    <p>
     <em>
      <strong>
       现在的问题是：怎么不用循环累加
       <span class="katex--inline">
        <span class="katex">
         <span class="katex-mathml">
          n 
          
         
        
          n
         </span>
         <span class="katex-html">
          <span class="base">
           <span class="strut" style="height: 0.4306em;">
           </span>
           <span class="mord mathnormal">
            n
           </span>
          </span>
         </span>
        </span>
       </span>
       次呢？
      </strong>
     </em>
    </p>
    <p>
     这看似有些难为人，但可以发现，我们上面的程序可以计算程序中创建出了多少个类对象，也就是说，
     <strong>
      创建多少次对象，就会执行多少次构造函数
     </strong>
     。
    </p>
    <p>
     因此，我们可以将
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        i 
        
       
      
        i
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6595em;">
         </span>
         <span class="mord mathnormal">
          i
         </span>
        </span>
       </span>
      </span>
     </span>
     和
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        s 
        
       
         u 
        
       
         m 
        
       
      
        sum
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.4306em;">
         </span>
         <span class="mord mathnormal">
          s
         </span>
         <span class="mord mathnormal">
          u
         </span>
         <span class="mord mathnormal">
          m
         </span>
        </span>
       </span>
      </span>
     </span>
     定义成静态变量，放到构造函数里去累加，这样如果创建一个个数为
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        n 
        
       
      
        n
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.4306em;">
         </span>
         <span class="mord mathnormal">
          n
         </span>
        </span>
       </span>
      </span>
     </span>
     的
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        S 
        
       
         u 
        
       
         m 
        
       
      
        Sum
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6833em;">
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0576em;">
          S
         </span>
         <span class="mord mathnormal">
          u
         </span>
         <span class="mord mathnormal">
          m
         </span>
        </span>
       </span>
      </span>
     </span>
     类类型数组，即创建
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        n 
        
       
      
        n
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.4306em;">
         </span>
         <span class="mord mathnormal">
          n
         </span>
        </span>
       </span>
      </span>
     </span>
     个对象，那么这个构造函数就会被执行
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        n 
        
       
      
        n
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.4306em;">
         </span>
         <span class="mord mathnormal">
          n
         </span>
        </span>
       </span>
      </span>
     </span>
     次，这样就很好的完成了任务。
    </p>
    <p>
     【代码实现】
    </p>
    <pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">Sum</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token function">Sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
    	 _i<span class="token operator">++</span><span class="token punctuation">;</span>		<span class="token comment">//_i从0自增到n-1</span>
        _ret<span class="token operator">+=</span>_i<span class="token punctuation">;</span>	<span class="token comment">//_ret(n)从1加到n-1</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">Get_ret</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> _ret<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">static</span> <span class="token keyword">int</span> _i<span class="token punctuation">;</span>
    <span class="token keyword">static</span> <span class="token keyword">int</span> _ret<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> Sum<span class="token double-colon punctuation">::</span>_ret <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> Sum<span class="token double-colon punctuation">::</span>_i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token keyword">int</span> <span class="token function">Sum_Solution</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        Sum s<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span>	<span class="token comment">//变长数组</span>
        <span class="token keyword">return</span> <span class="token class-name">Sum</span><span class="token double-colon punctuation">::</span><span class="token function">Get_ret</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
    <p>
     【题目总结】
    </p>
    <p>
     虽然题目做出来了，但是这也仅仅适用于面试这种专门难为人的应用场景了，可以说在现实中根本不会这样用，也就是说这种方法只有教学意义，而没有实际应用意义。
    </p>
    <hr/>
    <h2>
     <a id="_2363">
     </a>
     六、友元
    </h2>
    <blockquote>
     <p>
      友元提供了一种
      <strong>
       突破类访问限定符封装
      </strong>
      的方式，友元分为：
      <strong>
       友元函数
      </strong>
      和
      <strong>
       友元类
      </strong>
      ，在函数声明或者类声明的前面加
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         f 
         
        
          r 
         
        
          i 
         
        
          e 
         
        
          n 
         
        
          d 
         
        
       
         friend
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;">
          </span>
          <span class="mord mathnormal" style="margin-right: 0.1076em;">
           f
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0278em;">
           r
          </span>
          <span class="mord mathnormal">
           i
          </span>
          <span class="mord mathnormal">
           e
          </span>
          <span class="mord mathnormal">
           n
          </span>
          <span class="mord mathnormal">
           d
          </span>
         </span>
        </span>
       </span>
      </span>
      ，并且
      <strong>
       把友元声明放到一个类的里面
      </strong>
      。
     </p>
    </blockquote>
    <p>
     <em>
      <strong>
       1. 友元函数：
      </strong>
     </em>
    </p>
    <p>
     外部友元函数
     <strong>
      可访问类的私有（
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         p 
         
        
          r 
         
        
          i 
         
        
          v 
         
        
          a 
         
        
          t 
         
        
          e 
         
        
       
         private
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.854em; vertical-align: -0.1944em;">
          </span>
          <span class="mord mathnormal">
           p
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0278em;">
           r
          </span>
          <span class="mord mathnormal">
           i
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0359em;">
           v
          </span>
          <span class="mord mathnormal">
           a
          </span>
          <span class="mord mathnormal">
           t
          </span>
          <span class="mord mathnormal">
           e
          </span>
         </span>
        </span>
       </span>
      </span>
      ）和保护（
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         p 
         
        
          r 
         
        
          o 
         
        
          t 
         
        
          e 
         
        
          c 
         
        
          t 
         
        
          e 
         
        
          d 
         
        
       
         protected
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;">
          </span>
          <span class="mord mathnormal">
           p
          </span>
          <span class="mord mathnormal">
           ro
          </span>
          <span class="mord mathnormal">
           t
          </span>
          <span class="mord mathnormal">
           ec
          </span>
          <span class="mord mathnormal">
           t
          </span>
          <span class="mord mathnormal">
           e
          </span>
          <span class="mord mathnormal">
           d
          </span>
         </span>
        </span>
       </span>
      </span>
      ）成员
     </strong>
     ，
     <strong>
      友元函数仅仅是一种声明，他不是类的成员函数。
     </strong>
    </p>
    <pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">A</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">//这里可以看出友元函数可以在类定义的任何地方声明，不受类访问限定符限制。</span>
	<span class="token keyword">friend</span> <span class="token keyword">void</span> <span class="token function">Print_fa</span><span class="token punctuation">(</span><span class="token keyword">const</span> A<span class="token operator">&amp;</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//友元声明</span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token comment">//...</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token keyword">int</span> _a <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">//1.未声明友元</span>
<span class="token keyword">void</span> <span class="token function">Print_a</span><span class="token punctuation">(</span><span class="token keyword">const</span> A<span class="token operator">&amp;</span> a<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">//error C2248: “A::_a”: 无法访问 private 成员(在“A”类中声明)</span>
	cout <span class="token operator">&lt;&lt;</span> a<span class="token punctuation">.</span>_a <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//2.声明友元</span>
<span class="token keyword">void</span> <span class="token function">Print_fa</span><span class="token punctuation">(</span><span class="token keyword">const</span> A<span class="token operator">&amp;</span> a<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	cout <span class="token operator">&lt;&lt;</span> a<span class="token punctuation">.</span>_a <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	A a<span class="token punctuation">;</span>
	<span class="token function">Print_fa</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     <code>
      注意：这里可以看出，友元函数可以在类定义的任何地方声明，不受类访问限定符限制。
     </code>
    </p>
    <blockquote>
     <p>
      <em>
       <strong>
        可以说，友元存在的目的就是为了让类外函数能够访问类内的成员。
       </strong>
      </em>
     </p>
    </blockquote>
    <p>
     <strong>
      一个函数还可以是多个类的友元函数。
     </strong>
    </p>
    <p>
     也就是说，
     <strong>
      一个函数可以访问到多个类的成员
     </strong>
     ，这也很合理。
    </p>
    <pre><code class="prism language-cpp"><span class="token comment">// 前置声明，否则A的友元函数声明编译器不认识B</span>
<span class="token keyword">class</span> <span class="token class-name">B</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">A</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">//友元声明</span>
	<span class="token keyword">friend</span> <span class="token keyword">void</span> <span class="token function">Print_f</span><span class="token punctuation">(</span><span class="token keyword">const</span> A<span class="token operator">&amp;</span> a<span class="token punctuation">,</span> <span class="token keyword">const</span> B<span class="token operator">&amp;</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token comment">//...</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token keyword">int</span> _a <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">B</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">//友元声明</span>
	<span class="token keyword">friend</span> <span class="token keyword">void</span> <span class="token function">Print_f</span><span class="token punctuation">(</span><span class="token keyword">const</span> A<span class="token operator">&amp;</span> a<span class="token punctuation">,</span> <span class="token keyword">const</span> B<span class="token operator">&amp;</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token comment">//...</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token keyword">int</span> _b <span class="token operator">=</span> <span class="token number">456</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">Print_f</span><span class="token punctuation">(</span><span class="token keyword">const</span> A<span class="token operator">&amp;</span> a<span class="token punctuation">,</span><span class="token keyword">const</span> B<span class="token operator">&amp;</span> b<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	cout <span class="token operator">&lt;&lt;</span> a<span class="token punctuation">.</span>_a <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span> <span class="token operator">&lt;&lt;</span> b<span class="token punctuation">.</span>_b <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	A a<span class="token punctuation">;</span> B b<span class="token punctuation">;</span>
	<span class="token function">Print_f</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     <code>
      注意：一定要加前置声明class B，否则A的友元函数声明编译器不认识B，会直接报错。
     </code>
    </p>
    <p>
     <em>
      <strong>
       2. 友元类：
      </strong>
     </em>
    </p>
    <p>
     <strong>
      友元类中的成员函数都可以是另一个类的友元函数，都可以访问另一个类中的私有和保护成员。
     </strong>
    </p>
    <p>
     所以，要是一个类需要频繁访问另一个类的非公有成员的话，声明成友元类比较方便：
    </p>
    <pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">A</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">//友元声明</span>
	<span class="token keyword">friend</span> <span class="token keyword">class</span> <span class="token class-name">B</span><span class="token punctuation">;</span> <span class="token comment">//即类B可以访问A的所有成员了</span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token comment">//...</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token keyword">int</span> _a1 <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> _a2 <span class="token operator">=</span> <span class="token number">456</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">B</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token keyword">void</span> <span class="token function">func1</span><span class="token punctuation">(</span><span class="token keyword">const</span> A<span class="token operator">&amp;</span> a<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"a1："</span> <span class="token operator">&lt;&lt;</span> a<span class="token punctuation">.</span>_a1 <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">void</span> <span class="token function">func2</span><span class="token punctuation">(</span><span class="token keyword">const</span> A<span class="token operator">&amp;</span> a<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"a2："</span> <span class="token operator">&lt;&lt;</span> a<span class="token punctuation">.</span>_a2 <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">void</span> <span class="token function">func3</span><span class="token punctuation">(</span><span class="token keyword">const</span> A<span class="token operator">&amp;</span> a<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"a1 + a2："</span> <span class="token operator">&lt;&lt;</span> a<span class="token punctuation">.</span>_a1 <span class="token operator">+</span> a<span class="token punctuation">.</span>_a2 <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token comment">//...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	A a<span class="token punctuation">;</span> B b<span class="token punctuation">;</span>

	b<span class="token punctuation">.</span><span class="token function">func1</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
	b<span class="token punctuation">.</span><span class="token function">func2</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	b<span class="token punctuation">.</span><span class="token function">func3</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     友元类的
     <strong>
      关系是单向的，不具有交换性
     </strong>
     ，比如
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        A 
        
       
      
        A
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6833em;">
         </span>
         <span class="mord mathnormal">
          A
         </span>
        </span>
       </span>
      </span>
     </span>
     类是
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        B 
        
       
      
        B
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6833em;">
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0502em;">
          B
         </span>
        </span>
       </span>
      </span>
     </span>
     类的友元，但是
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        B 
        
       
      
        B
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6833em;">
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0502em;">
          B
         </span>
        </span>
       </span>
      </span>
     </span>
     类不是
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        A 
        
       
      
        A
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6833em;">
         </span>
         <span class="mord mathnormal">
          A
         </span>
        </span>
       </span>
      </span>
     </span>
     类的友元。
    </p>
    <pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">A</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">//友元声明</span>
	<span class="token keyword">friend</span> <span class="token keyword">class</span> <span class="token class-name">B</span><span class="token punctuation">;</span> <span class="token comment">//即类B可以访问A的所有成员了,但是A不能访问B的成员</span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token keyword">void</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token keyword">const</span> B<span class="token operator">&amp;</span> b<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token comment">//error C2027: 使用了未定义类型“B”</span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"b："</span> <span class="token operator">&lt;&lt;</span> b<span class="token punctuation">.</span>_b <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token keyword">int</span> _a <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">B</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token keyword">void</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token keyword">const</span> A<span class="token operator">&amp;</span> a<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"a："</span> <span class="token operator">&lt;&lt;</span> a<span class="token punctuation">.</span>_a <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token keyword">int</span> _b <span class="token operator">=</span> <span class="token number">456</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	A a<span class="token punctuation">;</span> B b<span class="token punctuation">;</span>

	a<span class="token punctuation">.</span><span class="token function">func</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//报错：成员 "B::_b" (已声明) 不可访问</span>
	b<span class="token punctuation">.</span><span class="token function">func</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//a：123</span>

	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     友元类
     <strong>
      关系不能传递
     </strong>
     ，如果
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        A 
        
       
      
        A
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6833em;">
         </span>
         <span class="mord mathnormal">
          A
         </span>
        </span>
       </span>
      </span>
     </span>
     是
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        B 
        
       
      
        B
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6833em;">
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0502em;">
          B
         </span>
        </span>
       </span>
      </span>
     </span>
     的友元，
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        B 
        
       
      
        B
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6833em;">
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0502em;">
          B
         </span>
        </span>
       </span>
      </span>
     </span>
     是
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        C 
        
       
      
        C
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6833em;">
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0715em;">
          C
         </span>
        </span>
       </span>
      </span>
     </span>
     的友元，但是
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        A 
        
       
      
        A
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6833em;">
         </span>
         <span class="mord mathnormal">
          A
         </span>
        </span>
       </span>
      </span>
     </span>
     不是
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        C 
        
       
      
        C
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6833em;">
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0715em;">
          C
         </span>
        </span>
       </span>
      </span>
     </span>
     的友元。
    </p>
    <pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">A</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">//友元声明</span>
	<span class="token keyword">friend</span> <span class="token keyword">class</span> <span class="token class-name">B</span><span class="token punctuation">;</span>	<span class="token comment">//A是B的友元</span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token comment">//...</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token keyword">int</span> _a <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">B</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">//友元声明</span>
	<span class="token keyword">friend</span> <span class="token keyword">class</span> <span class="token class-name">C</span><span class="token punctuation">;</span>	<span class="token comment">//B是C的友元</span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token keyword">void</span> <span class="token function">Print</span><span class="token punctuation">(</span><span class="token keyword">const</span> A<span class="token operator">&amp;</span> a<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> a<span class="token punctuation">.</span>_a <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token keyword">int</span> _b <span class="token operator">=</span> <span class="token number">456</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">C</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token keyword">void</span> <span class="token function">Print</span><span class="token punctuation">(</span><span class="token keyword">const</span> B<span class="token operator">&amp;</span> b<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> b<span class="token punctuation">.</span>_b <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">void</span> <span class="token function">Print</span><span class="token punctuation">(</span><span class="token keyword">const</span> A<span class="token operator">&amp;</span> a<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> a<span class="token punctuation">.</span>_a <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token keyword">int</span> _c <span class="token operator">=</span> <span class="token number">789</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	A a<span class="token punctuation">;</span> B b<span class="token punctuation">;</span> C c<span class="token punctuation">;</span>

	b<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">//A是B的友元</span>
	c<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">//B是C的友元</span>

	<span class="token comment">//error C2248: “A::_a”: 无法访问 private 成员(在“A”类中声明)</span>
	c<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">//推不出A是C的友元（因此C不能访问A）</span>

	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     <em>
      <strong>
       友元总结：
      </strong>
     </em>
    </p>
    <blockquote>
     <p>
      <strong>
       虽然友元有时提供了便利，但是友元会增加耦合度，破坏了封装，所以友元不宜多用。
      </strong>
     </p>
    </blockquote>
    <hr/>
    <h2>
     <a id="_2596">
     </a>
     七、内部类
    </h2>
    <blockquote>
     <p>
      如果
      <strong>
       一个类定义在另一个类的内部
      </strong>
      ，这个内部类就叫做
      <strong>
       内部类
      </strong>
      。
      <strong>
       内部类是一个独立的类
      </strong>
      ，跟定义在全局相比，他只是
      <strong>
       受外部类类域限制
      </strong>
      和
      <strong>
       访问限定符限制
      </strong>
      ，所以
      <strong>
       外部类定义的对象中不包含内部类
      </strong>
      。
     </p>
    </blockquote>
    <pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">A</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token keyword">int</span> _a <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token keyword">class</span> <span class="token class-name">B</span>	<span class="token comment">//B默认为A的友元</span>
	<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">public</span><span class="token operator">:</span>
		<span class="token comment">//...</span>
	<span class="token keyword">private</span><span class="token operator">:</span>
		<span class="token keyword">int</span> _b <span class="token operator">=</span> <span class="token number">456</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	A a<span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     运行结果为：
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/3cd97b8bb1a944198b7ad0530497c010.png"/>
    </p>
    <p>
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        A 
        
       
      
        A
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6833em;">
         </span>
         <span class="mord mathnormal">
          A
         </span>
        </span>
       </span>
      </span>
     </span>
     类对象的大小为
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        4 
        
       
      
        4
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6444em;">
         </span>
         <span class="mord">
          4
         </span>
        </span>
       </span>
      </span>
     </span>
     ，可以看出
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        A 
        
       
      
        A
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6833em;">
         </span>
         <span class="mord mathnormal">
          A
         </span>
        </span>
       </span>
      </span>
     </span>
     类中的成员只包含了
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        _ 
        
       
         a 
        
       
      
        \_a
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.7406em; vertical-align: -0.31em;">
         </span>
         <span class="mord" style="margin-right: 0.0278em;">
          _
         </span>
         <span class="mord mathnormal">
          a
         </span>
        </span>
       </span>
      </span>
     </span>
     这一个成员变量，并没有包含内部类
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        B 
        
       
      
        B
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6833em;">
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0502em;">
          B
         </span>
        </span>
       </span>
      </span>
     </span>
     。
    </p>
    <p>
     也就是说，
     <strong>
      内部类不是外部类的成员
     </strong>
     ，定义在外部类的内部只是因为
     <em>
      <strong>
       内部类默认是外部类的友元类
      </strong>
     </em>
     。
    </p>
    <pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">A</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">//内部类默认为友元</span>
	<span class="token comment">//friend class B;</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token keyword">int</span> _a <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span>
	<span class="token keyword">static</span> <span class="token keyword">int</span> _sa<span class="token punctuation">;</span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token keyword">class</span> <span class="token class-name">B</span>	<span class="token comment">//A默认为B的友元（但B不是A的友元）</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token comment">//A如果想要访问B的成员，必须要进行友元声明</span>
		<span class="token keyword">friend</span> <span class="token keyword">class</span> <span class="token class-name">A</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span><span class="token operator">:</span>
		<span class="token keyword">void</span> <span class="token function">Print</span><span class="token punctuation">(</span><span class="token keyword">const</span> A<span class="token operator">&amp;</span> a<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			cout <span class="token operator">&lt;&lt;</span> a<span class="token punctuation">.</span>_a <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span> <span class="token operator">&lt;&lt;</span> a<span class="token punctuation">.</span>_sa <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token keyword">private</span><span class="token operator">:</span>
		<span class="token keyword">int</span> _b <span class="token operator">=</span> <span class="token number">456</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token keyword">void</span> <span class="token function">Print</span><span class="token punctuation">(</span><span class="token keyword">const</span> B<span class="token operator">&amp;</span> b<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token comment">//不加友元声明会报错：error C2248: “A::B::_b”: 无法访问 private 成员(在“A::B”类中声明)</span>
		cout <span class="token operator">&lt;&lt;</span> b<span class="token punctuation">.</span>_b <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> A<span class="token double-colon punctuation">::</span>_sa <span class="token operator">=</span> <span class="token number">789</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	A a<span class="token punctuation">;</span> 
	A<span class="token double-colon punctuation">::</span>B b<span class="token punctuation">;</span>		<span class="token comment">//指定类域</span>

	b<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//内部类默认能够访问外部类</span>
	a<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//外部类要加友元声明才能访问内部类</span>
	
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     <em>
      <strong>
       总结一下：内部类本质也是一种封装
      </strong>
     </em>
     。当
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        A 
        
       
      
        A
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6833em;">
         </span>
         <span class="mord mathnormal">
          A
         </span>
        </span>
       </span>
      </span>
     </span>
     类跟
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        B 
        
       
      
        B
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6833em;">
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0502em;">
          B
         </span>
        </span>
       </span>
      </span>
     </span>
     类紧密关联，
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        A 
        
       
      
        A
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6833em;">
         </span>
         <span class="mord mathnormal">
          A
         </span>
        </span>
       </span>
      </span>
     </span>
     类实现出来主要就是给
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        B 
        
       
      
        B
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6833em;">
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0502em;">
          B
         </span>
        </span>
       </span>
      </span>
     </span>
     类使用，那么可以考虑把
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        A 
        
       
      
        A
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6833em;">
         </span>
         <span class="mord mathnormal">
          A
         </span>
        </span>
       </span>
      </span>
     </span>
     类设计为
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        B 
        
       
      
        B
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6833em;">
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0502em;">
          B
         </span>
        </span>
       </span>
      </span>
     </span>
     的
     <strong>
      内部类
     </strong>
     。（如果放到
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        p 
        
       
         r 
        
       
         i 
        
       
         v 
        
       
         a 
        
       
         t 
        
       
         e 
        
       
         / 
        
       
         p 
        
       
         r 
        
       
         o 
        
       
         t 
        
       
         e 
        
       
         c 
        
       
         t 
        
       
         e 
        
       
         d 
        
       
      
        private/protected
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 1em; vertical-align: -0.25em;">
         </span>
         <span class="mord mathnormal">
          p
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0278em;">
          r
         </span>
         <span class="mord mathnormal">
          i
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0359em;">
          v
         </span>
         <span class="mord mathnormal">
          a
         </span>
         <span class="mord mathnormal">
          t
         </span>
         <span class="mord mathnormal">
          e
         </span>
         <span class="mord">
          /
         </span>
         <span class="mord mathnormal">
          p
         </span>
         <span class="mord mathnormal">
          ro
         </span>
         <span class="mord mathnormal">
          t
         </span>
         <span class="mord mathnormal">
          ec
         </span>
         <span class="mord mathnormal">
          t
         </span>
         <span class="mord mathnormal">
          e
         </span>
         <span class="mord mathnormal">
          d
         </span>
        </span>
       </span>
      </span>
     </span>
     位置，那么
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        A 
        
       
      
        A
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6833em;">
         </span>
         <span class="mord mathnormal">
          A
         </span>
        </span>
       </span>
      </span>
     </span>
     类就是
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        B 
        
       
      
        B
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6833em;">
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0502em;">
          B
         </span>
        </span>
       </span>
      </span>
     </span>
     类的
     <strong>
      专属内部类
     </strong>
     ，其他地方都用不了）
    </p>
    <hr/>
    <h2>
     <a id="_2673">
     </a>
     八、匿名对象
    </h2>
    <blockquote>
     <p>
      用
      <strong>
       类型
      </strong>
      （实参）定义出来的对象叫做
      <strong>
       匿名对象
      </strong>
      ，相比之前我们定义的
      <strong>
       类型对象名
      </strong>
      （实参）定义出来的叫
      <strong>
       有名对象
      </strong>
      。
     </p>
    </blockquote>
    <pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">A</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token function">A</span><span class="token punctuation">(</span><span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		_a <span class="token operator">=</span> a<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">void</span> <span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> _a <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token keyword">int</span> _a<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	A <span class="token function">a1</span><span class="token punctuation">(</span><span class="token number">456</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//有名对象</span>
	a1<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token comment">//error C2228: “.Print”的左边必须有类/结构/联合（说明了编译器没有把a2对象定义出来）</span>
	A <span class="token function">a2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//不能这么定义对象，因为编译器无法识别下面是一个函数声明，还是对象定义</span>
	<span class="token comment">//a2.Print();</span>

	<span class="token function">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">//匿名对象</span>
	<span class="token function">A</span><span class="token punctuation">(</span><span class="token number">789</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     <em>
      <strong>
       那么我们就有问题为什么要定义匿名对象呢？匿名对象可以用来干什么呢？
      </strong>
     </em>
    </p>
    <p>
     <strong>
      匿名对象的生命周期只在当前一行
     </strong>
     ，一般如果想临时定义一个对象就当前用一下即可，如：想
     <strong>
      直接调用成员函数
     </strong>
     ，就可以定义匿名对象，这样就不必为了调用类中的函数而特意定义一个对象了：
    </p>
    <pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">Solution</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token keyword">void</span> <span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Solution()"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token comment">//...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">//先定义有名对象，再调用其成员函数</span>
	Solution st<span class="token punctuation">;</span>			<span class="token comment">//生命周期在整个域内（main函数）</span>
	st<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//直接调用匿名对象的成员函数（这一行代码结束，匿名对象就销毁了）</span>
	<span class="token function">Solution</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">//生命周期在这一行</span>

	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <hr/>
    <h2>
     <a id="_2736">
     </a>
     九、对象拷贝时编译器的优化（了解）
    </h2>
    <blockquote>
     <p>
      现代编译器会为了尽可能
      <strong>
       提高程序的效率
      </strong>
      ，在不影响正确性的情况下会尽可能
      <strong>
       减少
      </strong>
      一些
      <strong>
       传参
      </strong>
      和
      <strong>
       传返回值
      </strong>
      的过程中
      <strong>
       可以省略的拷贝
      </strong>
      。
     </p>
    </blockquote>
    <p>
     <code>
      具体如何优化C++标准并没有严格规定，各个编译器会根据情况自行处理。
     </code>
    </p>
    <p>
     当前主流的相对新一点的编译器对于
     <strong>
      连续一个表达式
     </strong>
     步骤中的
     <strong>
      连续拷贝
     </strong>
     会进行
     <strong>
      合并优化
     </strong>
     ，有些更新更"激进"的编译器还会进行
     <strong>
      跨行跨表达式
     </strong>
     的
     <strong>
      合并优化
     </strong>
     。
    </p>
    <p>
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        L 
        
       
         i 
        
       
         n 
        
       
         u 
        
       
         x 
        
       
      
        Linux
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6833em;">
         </span>
         <span class="mord mathnormal">
          L
         </span>
         <span class="mord mathnormal">
          in
         </span>
         <span class="mord mathnormal">
          ux
         </span>
        </span>
       </span>
      </span>
     </span>
     下可以将下面代码拷贝到
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        t 
        
       
         e 
        
       
         s 
        
       
         t 
        
       
         . 
        
       
         c 
        
       
         p 
        
       
         p 
        
       
      
        test.cpp
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.8095em; vertical-align: -0.1944em;">
         </span>
         <span class="mord mathnormal">
          t
         </span>
         <span class="mord mathnormal">
          es
         </span>
         <span class="mord mathnormal">
          t
         </span>
         <span class="mord">
          .
         </span>
         <span class="mord mathnormal">
          c
         </span>
         <span class="mord mathnormal">
          pp
         </span>
        </span>
       </span>
      </span>
     </span>
     文件，编译时用
    </p>
    <pre><code class="prism language-bash">g++ test.cpp -fno-elide-constructors 
</code></pre>
    <p>
     的方式
     <strong>
      关闭构造相关的优化
     </strong>
     。
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/ca3c978d9ea14be9bfe261223981cb23.png"/>
    </p>
    <pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">A</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token comment">//构造函数</span>
	<span class="token function">A</span><span class="token punctuation">(</span><span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span>
		<span class="token operator">:</span><span class="token function">_a</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"A(int a)"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">//拷贝构造函数</span>
	<span class="token function">A</span><span class="token punctuation">(</span><span class="token keyword">const</span> A<span class="token operator">&amp;</span> a<span class="token punctuation">)</span>
		<span class="token operator">:</span><span class="token function">_a</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>_a<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"A(const A&amp; a)"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">//赋值重载函数</span>
	A<span class="token operator">&amp;</span> <span class="token keyword">operator</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">const</span> A<span class="token operator">&amp;</span> a<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"A&amp; operator = (cosnt A&amp; a)"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token operator">!=</span> <span class="token operator">&amp;</span>a<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			_a <span class="token operator">=</span> a<span class="token punctuation">.</span>_a<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">//析构函数</span>
	<span class="token operator">~</span><span class="token function">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"~A()"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token keyword">int</span> _a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">func1</span><span class="token punctuation">(</span>A a<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">func2</span><span class="token punctuation">(</span><span class="token keyword">const</span> A<span class="token operator">&amp;</span> a<span class="token punctuation">)</span>	<span class="token comment">//引用传参可以减少拷贝（不用进行一次拷贝构造了）</span>
<span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>

A <span class="token function">func3</span><span class="token punctuation">(</span><span class="token punctuation">)</span>	
<span class="token punctuation">{<!-- --></span>
	A a<span class="token punctuation">;</span>		<span class="token comment">//构造1次</span>
	<span class="token keyword">return</span> a<span class="token punctuation">;</span>	<span class="token comment">//a出了作用域就销毁了，因此返回时会产生临时对象（拷贝构造1次）</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">//类型转换本来应该先产生临时变量（构造1次），再将临时变量拷贝给类类型变量（拷贝构造1次）</span>
	<span class="token comment">//但这里只构造了一次，是因为编译器进行了合并优化</span>
	A a1 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>			<span class="token comment">// A(int a)</span>

	A a2 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token comment">//传值传参（拷贝）</span>
	<span class="token function">func1</span><span class="token punctuation">(</span>a2<span class="token punctuation">)</span><span class="token punctuation">;</span>			<span class="token comment">// A(int a) + A(const A&amp; a)</span>
	<span class="token comment">//引用传参</span>
	<span class="token function">func2</span><span class="token punctuation">(</span>a2<span class="token punctuation">)</span><span class="token punctuation">;</span>			<span class="token comment">// A(int a)</span>
	
	<span class="token comment">//匿名对象（优化）</span>
	<span class="token function">func1</span><span class="token punctuation">(</span><span class="token function">A</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">// A(int a)</span>
	
	<span class="token comment">//隐式类型转换（临时构造）-&gt; 但编译器优化了（直接构造）</span>
	<span class="token function">func1</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>			<span class="token comment">// A(int a)</span>
	
	<span class="token comment">//编译器vs2022都优化了（把返回的临时变量a直接优化掉了）</span>
	<span class="token function">func3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>			<span class="token comment">// A(int a)</span>
	<span class="token function">func3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// A(int a)</span>
	A ret <span class="token operator">=</span> <span class="token function">func3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// A(int a)</span>

	A ret<span class="token punctuation">;</span>				<span class="token comment">// A(int a)</span>
	ret <span class="token operator">=</span> <span class="token function">func3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">// A(int a) + A&amp; operator = (cosnt A&amp; a)</span>
	
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     这部分只做了解即可，因为不同的编译器可能优化方式不同，因为C++标准没有明确统一规定，因此我们只要做到见怪不怪即可。
    </p>
    <hr/>
    <h2>
     <a id="_2831">
     </a>
     完整代码示例
    </h2>
    <h3>
     <a id="1_C__C__Stack__2832">
     </a>
     1. C++ 和 C 语言实现 Stack 对比（封装）
    </h3>
    <blockquote>
     <p>
      面向对象三大特性：
      <strong>
       封装
      </strong>
      、
      <strong>
       继承
      </strong>
      、
      <strong>
       多态
      </strong>
      ，下面的对比我们可以初步了解⼀下封装。
     </p>
    </blockquote>
    <p>
     C++实现
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        S 
        
       
         t 
        
       
         a 
        
       
         c 
        
       
         k 
        
       
      
        Stack
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6944em;">
         </span>
         <span class="mord mathnormal">
          St
         </span>
         <span class="mord mathnormal">
          a
         </span>
         <span class="mord mathnormal">
          c
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0315em;">
          k
         </span>
        </span>
       </span>
      </span>
     </span>
     形态上还是发生了挺多的变化，底层和逻辑上没啥变化。（只是进行了
     <strong>
      封装
     </strong>
     ）
    </p>
    <ol>
     <li>
      <strong>
       C语言：
      </strong>
     </li>
    </ol>
    <pre><code class="prism language-cpp"><span class="token comment">/*1.栈的数据结构*/</span>

<span class="token keyword">typedef</span> <span class="token keyword">int</span> STDataType<span class="token punctuation">;</span>
<span class="token comment">//支持动态增长的栈</span>
<span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">Stack</span>
<span class="token punctuation">{<!-- --></span>
	STDataType<span class="token operator">*</span> a<span class="token punctuation">;</span>
	<span class="token keyword">int</span> top<span class="token punctuation">;</span>		<span class="token comment">//栈顶</span>
	<span class="token keyword">int</span> capacity<span class="token punctuation">;</span>	<span class="token comment">//容量</span>
<span class="token punctuation">}</span>ST<span class="token punctuation">;</span>

<span class="token comment">/*2.栈的基本操作*/</span>

<span class="token comment">//1.初始化</span>
<span class="token keyword">void</span> <span class="token function">STInit</span><span class="token punctuation">(</span>ST<span class="token operator">*</span> ps<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">assert</span><span class="token punctuation">(</span>ps<span class="token punctuation">)</span><span class="token punctuation">;</span>
	ps<span class="token operator">-&gt;</span>a <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
	ps<span class="token operator">-&gt;</span>capacity <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token comment">//1.top指向栈顶的下一个元素</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">if</span> <span class="token expression"><span class="token number">1</span></span></span>
	ps<span class="token operator">-&gt;</span>top <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span>
	<span class="token comment">//2.top指向栈顶元素</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">if</span> <span class="token expression"><span class="token number">0</span></span></span>
	ps<span class="token operator">-&gt;</span>top <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span>
<span class="token punctuation">}</span>

<span class="token comment">//2.入栈</span>
<span class="token keyword">void</span> <span class="token function">STPush</span><span class="token punctuation">(</span>ST<span class="token operator">*</span> ps<span class="token punctuation">,</span> STDataType x<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">assert</span><span class="token punctuation">(</span>ps<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//判断是否需要扩容</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>ps<span class="token operator">-&gt;</span>capacity <span class="token operator">==</span> ps<span class="token operator">-&gt;</span>top<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">int</span> newcapacity <span class="token operator">=</span> ps<span class="token operator">-&gt;</span>capacity <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token number">4</span> <span class="token operator">:</span> ps<span class="token operator">-&gt;</span>capacity <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>
		STDataType<span class="token operator">*</span> tmp <span class="token operator">=</span> <span class="token punctuation">(</span>STDataType<span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">realloc</span><span class="token punctuation">(</span>ps<span class="token operator">-&gt;</span>a<span class="token punctuation">,</span> newcapacity <span class="token operator">*</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>STDataType<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">//判断realloc是否成功申请空间</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>tmp <span class="token operator">==</span> <span class="token constant">NULL</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token function">perror</span><span class="token punctuation">(</span><span class="token string">"relloc failed!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		ps<span class="token operator">-&gt;</span>a <span class="token operator">=</span> tmp<span class="token punctuation">;</span>
		ps<span class="token operator">-&gt;</span>capacity <span class="token operator">=</span> newcapacity<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">//插入元素</span>
	ps<span class="token operator">-&gt;</span>a<span class="token punctuation">[</span>ps<span class="token operator">-&gt;</span>top<span class="token punctuation">]</span> <span class="token operator">=</span> x<span class="token punctuation">;</span>
	ps<span class="token operator">-&gt;</span>top<span class="token operator">++</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//3.出栈</span>
<span class="token keyword">void</span> <span class="token function">STPop</span><span class="token punctuation">(</span>ST<span class="token operator">*</span> ps<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">assert</span><span class="token punctuation">(</span>ps <span class="token operator">&amp;&amp;</span> ps<span class="token operator">-&gt;</span>top <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//top=0时栈中恰好没有元素（NULL）</span>
	ps<span class="token operator">-&gt;</span>top<span class="token operator">--</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//4.获取栈顶元素</span>
STDataType <span class="token function">STTop</span><span class="token punctuation">(</span>ST<span class="token operator">*</span> ps<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">assert</span><span class="token punctuation">(</span>ps <span class="token operator">&amp;&amp;</span> ps<span class="token operator">-&gt;</span>top <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> ps<span class="token operator">-&gt;</span>a<span class="token punctuation">[</span>ps<span class="token operator">-&gt;</span>top <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//5.获取栈中有效元素的个数</span>
<span class="token keyword">int</span> <span class="token function">STSize</span><span class="token punctuation">(</span>ST<span class="token operator">*</span> ps<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">assert</span><span class="token punctuation">(</span>ps<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> ps<span class="token operator">-&gt;</span>top<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//6.检测栈是否为空</span>
<span class="token keyword">bool</span> <span class="token function">STEmpty</span><span class="token punctuation">(</span>ST<span class="token operator">*</span> ps<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">assert</span><span class="token punctuation">(</span>ps<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>ps<span class="token operator">-&gt;</span>top <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
		<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//7.销毁栈</span>
<span class="token keyword">void</span> <span class="token function">STDestroy</span><span class="token punctuation">(</span>ST<span class="token operator">*</span> ps<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">assert</span><span class="token punctuation">(</span>ps<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">free</span><span class="token punctuation">(</span>ps<span class="token operator">-&gt;</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
	ps<span class="token operator">-&gt;</span>a <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
	ps<span class="token operator">-&gt;</span>capacity <span class="token operator">=</span> ps<span class="token operator">-&gt;</span>top <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//测试</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	ST s<span class="token punctuation">;</span>
	<span class="token function">STInit</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token function">STPush</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>s<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">STPush</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>s<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">STPush</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>s<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">STPush</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>s<span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">STEmpty</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span> <span class="token function">STTop</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">STPop</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
	<span class="token function">STDestroy</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <ol start="2">
     <li>
      <strong>
       C++：
      </strong>
     </li>
    </ol>
    <pre><code class="prism language-cpp"><span class="token keyword">typedef</span> <span class="token keyword">int</span> STDataType<span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Stack</span>
<span class="token punctuation">{<!-- --></span>	
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token comment">//成员函数</span>
	
	<span class="token comment">//1.初始化</span>
	<span class="token keyword">void</span> <span class="token function">Init</span><span class="token punctuation">(</span><span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">)</span>	
	<span class="token punctuation">{<!-- --></span>
		_a <span class="token operator">=</span> <span class="token punctuation">(</span>STDataType<span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>STDataType<span class="token punctuation">)</span> <span class="token operator">*</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>_a <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token function">perror</span><span class="token punctuation">(</span><span class="token string">"malloc failed!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		_top <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
		_capacity <span class="token operator">=</span> n<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">//2.入栈</span>
	<span class="token keyword">void</span> <span class="token function">Push</span><span class="token punctuation">(</span>STDataType x<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token comment">//判断是否需要扩容</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>_capacity <span class="token operator">==</span> _top<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">int</span> newcapacity <span class="token operator">=</span> _capacity <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>
			STDataType<span class="token operator">*</span> tmp <span class="token operator">=</span> <span class="token punctuation">(</span>STDataType<span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">realloc</span><span class="token punctuation">(</span>_a<span class="token punctuation">,</span> newcapacity <span class="token operator">*</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>STDataType<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">//判断realloc是否成功申请空间</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>tmp <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token function">perror</span><span class="token punctuation">(</span><span class="token string">"relloc failed!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">return</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			_a <span class="token operator">=</span> tmp<span class="token punctuation">;</span>
			_capacity <span class="token operator">=</span> newcapacity<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">//插入元素</span>
		_a<span class="token punctuation">[</span>_top<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> x<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">//3.出栈</span>
	<span class="token keyword">void</span> <span class="token function">Pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">assert</span><span class="token punctuation">(</span>_top <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//top=0时栈中恰好没有元素</span>
		_top<span class="token operator">--</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">//4.获取栈顶元素</span>
	STDataType <span class="token function">Top</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">assert</span><span class="token punctuation">(</span>_top <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> _a<span class="token punctuation">[</span>_top <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">//5.获取栈中有效元素的个数</span>
	<span class="token keyword">int</span> <span class="token function">Size</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> _top<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">//6.检测栈是否为空</span>
	<span class="token keyword">bool</span> <span class="token function">Empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> _top <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">//7.销毁栈</span>
	<span class="token keyword">void</span> <span class="token function">Destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">free</span><span class="token punctuation">(</span>_a<span class="token punctuation">)</span><span class="token punctuation">;</span>
		_a <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span>
		_capacity <span class="token operator">=</span> _top <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token comment">//成员变量</span>
	STDataType<span class="token operator">*</span> _a<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _top<span class="token punctuation">;</span>		<span class="token comment">//栈顶</span>
	<span class="token keyword">int</span> _capacity<span class="token punctuation">;</span>	<span class="token comment">//容量</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">//测试</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	Stack s<span class="token punctuation">;</span>
	s<span class="token punctuation">.</span><span class="token function">Init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	s<span class="token punctuation">.</span><span class="token function">Push</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	s<span class="token punctuation">.</span><span class="token function">Push</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	s<span class="token punctuation">.</span><span class="token function">Push</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	s<span class="token punctuation">.</span><span class="token function">Push</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>s<span class="token punctuation">.</span><span class="token function">Empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> s<span class="token punctuation">.</span><span class="token function">Top</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		s<span class="token punctuation">.</span><span class="token function">Pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	s<span class="token punctuation">.</span><span class="token function">Destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <blockquote>
     <p>
      C++中
      <strong>
       数据和函数
      </strong>
      都放到了类里面，通过
      <strong>
       访问限定符
      </strong>
      进行了限制，不能再随意通过对象直接修改数据，这是
      <strong>
       C++封装
      </strong>
      的⼀种体现，这个是最重要的变化。
     </p>
    </blockquote>
    <p>
     上述C++实现栈的代码相对于C语言可以说简洁了许多，主要有以下改变：
    </p>
    <ol>
     <li>
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         I 
         
        
          n 
         
        
          i 
         
        
          t 
         
        
          ( 
         
        
          ) 
         
        
       
         Init()
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 1em; vertical-align: -0.25em;">
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0785em;">
           I
          </span>
          <span class="mord mathnormal">
           ni
          </span>
          <span class="mord mathnormal">
           t
          </span>
          <span class="mopen">
           (
          </span>
          <span class="mclose">
           )
          </span>
         </span>
        </span>
       </span>
      </span>
      函数给的缺省参数会方便很多。
     </li>
     <li>
      成员函数每次不需要传对象地址，因为
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         t 
         
        
          h 
         
        
          i 
         
        
          s 
         
        
       
         this
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.6944em;">
          </span>
          <span class="mord mathnormal">
           t
          </span>
          <span class="mord mathnormal">
           hi
          </span>
          <span class="mord mathnormal">
           s
          </span>
         </span>
        </span>
       </span>
      </span>
      指针隐含的传递了，方便了很多。
     </li>
     <li>
      使用类型不再需要
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         t 
         
        
          y 
         
        
          p 
         
        
          e 
         
        
          d 
         
        
          e 
         
        
          f 
         
        
       
         typedef
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;">
          </span>
          <span class="mord mathnormal">
           t
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0359em;">
           y
          </span>
          <span class="mord mathnormal">
           p
          </span>
          <span class="mord mathnormal">
           e
          </span>
          <span class="mord mathnormal">
           d
          </span>
          <span class="mord mathnormal">
           e
          </span>
          <span class="mord mathnormal" style="margin-right: 0.1076em;">
           f
          </span>
         </span>
        </span>
       </span>
      </span>
      ，直接用类名就很方便。
     </li>
    </ol>
    <p>
     这只是
     <strong>
      C++
     </strong>
     入门阶段实现的
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        S 
        
       
         t 
        
       
         a 
        
       
         c 
        
       
         k 
        
       
      
        Stack
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6944em;">
         </span>
         <span class="mord mathnormal">
          St
         </span>
         <span class="mord mathnormal">
          a
         </span>
         <span class="mord mathnormal">
          c
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0315em;">
          k
         </span>
        </span>
       </span>
      </span>
     </span>
     看起来变了很多，但是实质上变化不大。等后面看
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        S 
        
       
         T 
        
       
         L 
        
       
      
        STL
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6833em;">
         </span>
         <span class="mord mathnormal" style="margin-right: 0.1389em;">
          ST
         </span>
         <span class="mord mathnormal">
          L
         </span>
        </span>
       </span>
      </span>
     </span>
     中的用
     <strong>
      适配器
     </strong>
     实现的
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        S 
        
       
         t 
        
       
         a 
        
       
         c 
        
       
         k 
        
       
      
        Stack
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6944em;">
         </span>
         <span class="mord mathnormal">
          St
         </span>
         <span class="mord mathnormal">
          a
         </span>
         <span class="mord mathnormal">
          c
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0315em;">
          k
         </span>
        </span>
       </span>
      </span>
     </span>
     ，就能够感受到
     <strong>
      C++
     </strong>
     的魅力。
    </p>
    <h3>
     <a id="2__3068">
     </a>
     2. 日期类的实现（运算符重载）
    </h3>
    <blockquote>
     <p>
      实现一个日期类主要是为了
      <strong>
       练习运算符重载的使用
      </strong>
      ，使一个
      <strong>
       自定义类型
      </strong>
      能够进行和
      <strong>
       内置类型
      </strong>
      类似的
      <strong>
       加
      </strong>
      、
      <strong>
       减
      </strong>
      、
      <strong>
       比较大小
      </strong>
      和
      <strong>
       输入输出
      </strong>
      等运算符操作，同时也能学会
      <strong>
       日期类问题
      </strong>
      的解决思路。
     </p>
    </blockquote>
    <p>
     我们在实现一个项目（类）时，要做到声明和定义分离，养成一个好习惯，因此我们把日期类总共分为了三个文件：
    </p>
    <ol>
     <li>
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         d 
         
        
          a 
         
        
          t 
         
        
          e 
         
        
          . 
         
        
          h 
         
        
       
         date.h
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.6944em;">
          </span>
          <span class="mord mathnormal">
           d
          </span>
          <span class="mord mathnormal">
           a
          </span>
          <span class="mord mathnormal">
           t
          </span>
          <span class="mord mathnormal">
           e
          </span>
          <span class="mord">
           .
          </span>
          <span class="mord mathnormal">
           h
          </span>
         </span>
        </span>
       </span>
      </span>
      用来存放
      <strong>
       头文件以及日期类的定义和其方法的声明
      </strong>
      ；
     </li>
    </ol>
    <pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">once </span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;assert.h&gt;</span></span>

<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Date</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">//友元函数声明</span>
	<span class="token keyword">friend</span> ostream<span class="token operator">&amp;</span> <span class="token keyword">operator</span> <span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span>ostream<span class="token operator">&amp;</span> out<span class="token punctuation">,</span> <span class="token keyword">const</span> Date<span class="token operator">&amp;</span> d<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">friend</span> istream<span class="token operator">&amp;</span> <span class="token keyword">operator</span> <span class="token operator">&gt;&gt;</span> <span class="token punctuation">(</span>istream<span class="token operator">&amp;</span> in<span class="token punctuation">,</span> Date<span class="token operator">&amp;</span> d<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token comment">//检查非法日期</span>
	<span class="token keyword">bool</span> <span class="token function">CheckDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>

	<span class="token comment">//全缺省的构造函数</span>
	<span class="token function">Date</span><span class="token punctuation">(</span><span class="token keyword">int</span> year <span class="token operator">=</span> <span class="token number">1900</span><span class="token punctuation">,</span> <span class="token keyword">int</span> month <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">int</span> day <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//析构函数</span>
	<span class="token operator">~</span><span class="token function">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//拷贝构造函数 d2(d1)</span>
	<span class="token function">Date</span><span class="token punctuation">(</span><span class="token keyword">const</span> Date<span class="token operator">&amp;</span> d<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//赋值运算符重载 d2 = d3 -&gt; d2.operator=(&amp;d2, d3)</span>
	Date<span class="token operator">&amp;</span> <span class="token keyword">operator</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">const</span> Date<span class="token operator">&amp;</span> d<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//打印日期</span>
	<span class="token keyword">void</span> <span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>

	<span class="token comment">//获取某年某月的天数（默认是inline）</span>
	<span class="token keyword">inline</span> <span class="token keyword">int</span> <span class="token function">GetMonthDay</span><span class="token punctuation">(</span><span class="token keyword">int</span> year<span class="token punctuation">,</span> <span class="token keyword">int</span> month<span class="token punctuation">)</span> <span class="token keyword">const</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">assert</span><span class="token punctuation">(</span>month <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> month <span class="token operator">&lt;</span> <span class="token number">13</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">//下标对应第几个月（静态全局数组）</span>
		<span class="token keyword">static</span> <span class="token keyword">int</span> monthDayArray<span class="token punctuation">[</span><span class="token number">13</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">31</span><span class="token punctuation">,</span><span class="token number">28</span><span class="token punctuation">,</span><span class="token number">31</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token number">31</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token number">31</span><span class="token punctuation">,</span><span class="token number">31</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token number">31</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token number">31</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
		<span class="token comment">//判断闰年</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>month <span class="token operator">==</span> <span class="token number">2</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>year <span class="token operator">%</span> <span class="token number">4</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> year <span class="token operator">%</span> <span class="token number">100</span> <span class="token operator">!=</span> <span class="token number">0</span> <span class="token operator">||</span> year <span class="token operator">%</span> <span class="token number">400</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> <span class="token number">29</span><span class="token punctuation">;</span>	<span class="token comment">//不要修改数组：return monthDayArray[2]++;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> monthDayArray<span class="token punctuation">[</span>month<span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">//比较操作</span>
	<span class="token keyword">bool</span> <span class="token keyword">operator</span> <span class="token operator">&lt;</span> <span class="token punctuation">(</span><span class="token keyword">const</span> Date<span class="token operator">&amp;</span> d<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
	<span class="token keyword">bool</span> <span class="token keyword">operator</span> <span class="token operator">&lt;=</span> <span class="token punctuation">(</span><span class="token keyword">const</span> Date<span class="token operator">&amp;</span> d<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
	<span class="token keyword">bool</span> <span class="token keyword">operator</span> <span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token keyword">const</span> Date<span class="token operator">&amp;</span> d<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
	<span class="token keyword">bool</span> <span class="token keyword">operator</span> <span class="token operator">&gt;=</span> <span class="token punctuation">(</span><span class="token keyword">const</span> Date<span class="token operator">&amp;</span> d<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
	<span class="token keyword">bool</span> <span class="token keyword">operator</span> <span class="token operator">==</span> <span class="token punctuation">(</span><span class="token keyword">const</span> Date<span class="token operator">&amp;</span> d<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
	<span class="token keyword">bool</span> <span class="token keyword">operator</span> <span class="token operator">!=</span> <span class="token punctuation">(</span><span class="token keyword">const</span> Date<span class="token operator">&amp;</span> d<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>

	<span class="token comment">//加减天数</span>
	Date<span class="token operator">&amp;</span> <span class="token keyword">operator</span> <span class="token operator">+=</span> <span class="token punctuation">(</span><span class="token keyword">int</span> day<span class="token punctuation">)</span><span class="token punctuation">;</span>
	Date <span class="token keyword">operator</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token keyword">int</span> day<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
	Date<span class="token operator">&amp;</span> <span class="token keyword">operator</span> <span class="token operator">-=</span> <span class="token punctuation">(</span><span class="token keyword">int</span> day<span class="token punctuation">)</span><span class="token punctuation">;</span>
	Date <span class="token keyword">operator</span> <span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">int</span> day<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>

	<span class="token comment">//前置（++/-- d）</span>
	Date<span class="token operator">&amp;</span> <span class="token keyword">operator</span> <span class="token operator">++</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	Date<span class="token operator">&amp;</span> <span class="token keyword">operator</span> <span class="token operator">--</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//后置（d ++/--）</span>
	Date <span class="token keyword">operator</span> <span class="token operator">++</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	Date <span class="token keyword">operator</span> <span class="token operator">--</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//日期-日期（相隔天数）</span>
	<span class="token keyword">int</span> <span class="token keyword">operator</span> <span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">const</span> Date<span class="token operator">&amp;</span> d<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>

<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token keyword">int</span> _year<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _month<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _day<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">//输入输出</span>
ostream<span class="token operator">&amp;</span> <span class="token keyword">operator</span> <span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span>ostream<span class="token operator">&amp;</span> out<span class="token punctuation">,</span> <span class="token keyword">const</span> Date<span class="token operator">&amp;</span> d<span class="token punctuation">)</span><span class="token punctuation">;</span>
istream<span class="token operator">&amp;</span> <span class="token keyword">operator</span> <span class="token operator">&gt;&gt;</span> <span class="token punctuation">(</span>istream<span class="token operator">&amp;</span> in<span class="token punctuation">,</span> Date<span class="token operator">&amp;</span> d<span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//流提取就不能加const了</span>
</code></pre>
    <ol start="2">
     <li>
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         d 
         
        
          a 
         
        
          t 
         
        
          e 
         
        
          . 
         
        
          c 
         
        
          p 
         
        
          p 
         
        
       
         date.cpp
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;">
          </span>
          <span class="mord mathnormal">
           d
          </span>
          <span class="mord mathnormal">
           a
          </span>
          <span class="mord mathnormal">
           t
          </span>
          <span class="mord mathnormal">
           e
          </span>
          <span class="mord">
           .
          </span>
          <span class="mord mathnormal">
           c
          </span>
          <span class="mord mathnormal">
           pp
          </span>
         </span>
        </span>
       </span>
      </span>
      用来存放
      <strong>
       日期类方法的实现
      </strong>
      ；
     </li>
    </ol>
    <pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">"Date.h"</span> </span>

<span class="token keyword">bool</span> <span class="token class-name">Date</span><span class="token double-colon punctuation">::</span><span class="token function">CheckDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>_month <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> _month <span class="token operator">&lt;</span> <span class="token number">13</span> <span class="token operator">&amp;&amp;</span> _day <span class="token operator">&lt;=</span> <span class="token function">GetMonthDay</span><span class="token punctuation">(</span>_year<span class="token punctuation">,</span> _month<span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token class-name">Date</span><span class="token double-colon punctuation">::</span><span class="token function">Date</span><span class="token punctuation">(</span><span class="token keyword">int</span> year<span class="token punctuation">,</span> <span class="token keyword">int</span> month<span class="token punctuation">,</span> <span class="token keyword">int</span> day<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	_year <span class="token operator">=</span> year<span class="token punctuation">;</span>
	_month <span class="token operator">=</span> month<span class="token punctuation">;</span>
	_day <span class="token operator">=</span> day<span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">CheckDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"非法日期："</span><span class="token punctuation">;</span>
		<span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token class-name">Date</span><span class="token double-colon punctuation">::</span><span class="token operator">~</span><span class="token function">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	_year <span class="token operator">=</span> _month <span class="token operator">=</span> _day <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token class-name">Date</span><span class="token double-colon punctuation">::</span><span class="token function">Date</span><span class="token punctuation">(</span><span class="token keyword">const</span> Date<span class="token operator">&amp;</span> d<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	_year <span class="token operator">=</span> d<span class="token punctuation">.</span>_year<span class="token punctuation">;</span>
	_month <span class="token operator">=</span> d<span class="token punctuation">.</span>_month<span class="token punctuation">;</span>
	_day <span class="token operator">=</span> d<span class="token punctuation">.</span>_day<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

Date<span class="token operator">&amp;</span> Date<span class="token double-colon punctuation">::</span><span class="token keyword">operator</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">const</span> Date<span class="token operator">&amp;</span> d<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	_year <span class="token operator">=</span> d<span class="token punctuation">.</span>_year<span class="token punctuation">;</span>
	_month <span class="token operator">=</span> d<span class="token punctuation">.</span>_month<span class="token punctuation">;</span>
	_day <span class="token operator">=</span> d<span class="token punctuation">.</span>_day<span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">Date</span><span class="token double-colon punctuation">::</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
<span class="token punctuation">{<!-- --></span>
	cout <span class="token operator">&lt;&lt;</span> _year <span class="token operator">&lt;&lt;</span> <span class="token string">"/"</span> <span class="token operator">&lt;&lt;</span> _month <span class="token operator">&lt;&lt;</span> <span class="token string">"/"</span> <span class="token operator">&lt;&lt;</span> _day <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

Date<span class="token operator">&amp;</span> Date<span class="token double-colon punctuation">::</span><span class="token keyword">operator</span> <span class="token operator">+=</span> <span class="token punctuation">(</span><span class="token keyword">int</span> day<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>day <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span> <span class="token operator">-=</span> <span class="token punctuation">(</span><span class="token operator">-</span>day<span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//+会复用+=</span>
	<span class="token punctuation">}</span>
	_day <span class="token operator">+=</span> day<span class="token punctuation">;</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span>_day <span class="token operator">&gt;</span> <span class="token function">GetMonthDay</span><span class="token punctuation">(</span>_year<span class="token punctuation">,</span> _month<span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		_day <span class="token operator">-=</span> <span class="token function">GetMonthDay</span><span class="token punctuation">(</span>_year<span class="token punctuation">,</span> _month<span class="token punctuation">)</span><span class="token punctuation">;</span>
		_month<span class="token operator">++</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>_month <span class="token operator">==</span> <span class="token number">13</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			_month <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
			_year<span class="token operator">++</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

Date Date<span class="token double-colon punctuation">::</span><span class="token keyword">operator</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token keyword">int</span> day<span class="token punctuation">)</span> <span class="token keyword">const</span>
<span class="token punctuation">{<!-- --></span>
	Date tmp <span class="token operator">=</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>

	tmp <span class="token operator">+=</span> day<span class="token punctuation">;</span>	<span class="token comment">//复用+=：相比复用+少了3次拷贝（效率高）</span>

	<span class="token keyword">return</span> tmp<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

Date Date<span class="token double-colon punctuation">::</span><span class="token keyword">operator</span> <span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">int</span> day<span class="token punctuation">)</span> <span class="token keyword">const</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>day <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token operator">-</span>day<span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//-=会复用-</span>
	<span class="token punctuation">}</span>
	Date tmp <span class="token operator">=</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
	tmp<span class="token punctuation">.</span>_day <span class="token operator">-=</span> day<span class="token punctuation">;</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span>tmp<span class="token punctuation">.</span>_day <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		tmp<span class="token punctuation">.</span>_month<span class="token operator">--</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>tmp<span class="token punctuation">.</span>_month <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			tmp<span class="token punctuation">.</span>_year<span class="token operator">--</span><span class="token punctuation">;</span>
			<span class="token function">assert</span><span class="token punctuation">(</span>tmp<span class="token punctuation">.</span>_year <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			tmp<span class="token punctuation">.</span>_month <span class="token operator">=</span> <span class="token number">12</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		tmp<span class="token punctuation">.</span>_day <span class="token operator">+=</span> <span class="token function">GetMonthDay</span><span class="token punctuation">(</span>tmp<span class="token punctuation">.</span>_year<span class="token punctuation">,</span> tmp<span class="token punctuation">.</span>_month<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> tmp<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

Date<span class="token operator">&amp;</span> Date<span class="token double-colon punctuation">::</span><span class="token keyword">operator</span> <span class="token operator">-=</span> <span class="token punctuation">(</span><span class="token keyword">int</span> day<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token operator">*</span><span class="token keyword">this</span> <span class="token operator">=</span> <span class="token operator">*</span><span class="token keyword">this</span> <span class="token operator">-</span> day<span class="token punctuation">;</span>	<span class="token comment">//复用-：相比复用-=多了3次拷贝（效率低）</span>

	<span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">bool</span> Date<span class="token double-colon punctuation">::</span><span class="token keyword">operator</span> <span class="token operator">&lt;</span> <span class="token punctuation">(</span><span class="token keyword">const</span> Date<span class="token operator">&amp;</span> d<span class="token punctuation">)</span> <span class="token keyword">const</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>_year <span class="token operator">&lt;</span> d<span class="token punctuation">.</span>_year<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>_year <span class="token operator">==</span> d<span class="token punctuation">.</span>_year<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>_month <span class="token operator">&lt;</span> d<span class="token punctuation">.</span>_month<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>_month <span class="token operator">==</span> d<span class="token punctuation">.</span>_month<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> _day <span class="token operator">&lt;</span> d<span class="token punctuation">.</span>_day<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">bool</span> Date<span class="token double-colon punctuation">::</span><span class="token keyword">operator</span> <span class="token operator">==</span> <span class="token punctuation">(</span><span class="token keyword">const</span> Date<span class="token operator">&amp;</span> d<span class="token punctuation">)</span> <span class="token keyword">const</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>_year <span class="token operator">==</span> d<span class="token punctuation">.</span>_year <span class="token operator">&amp;&amp;</span> _month <span class="token operator">==</span> d<span class="token punctuation">.</span>_month <span class="token operator">&amp;&amp;</span> _day <span class="token operator">==</span> d<span class="token punctuation">.</span>_day<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">bool</span> Date<span class="token double-colon punctuation">::</span><span class="token keyword">operator</span> <span class="token operator">&lt;=</span> <span class="token punctuation">(</span><span class="token keyword">const</span> Date<span class="token operator">&amp;</span> d<span class="token punctuation">)</span> <span class="token keyword">const</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span> <span class="token operator">&lt;</span> d <span class="token operator">||</span> <span class="token operator">*</span><span class="token keyword">this</span> <span class="token operator">==</span> d<span class="token punctuation">;</span>	<span class="token comment">//复用&lt;和==</span>
<span class="token punctuation">}</span>

<span class="token keyword">bool</span> Date<span class="token double-colon punctuation">::</span><span class="token keyword">operator</span> <span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token keyword">const</span> Date<span class="token operator">&amp;</span> d<span class="token punctuation">)</span> <span class="token keyword">const</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> <span class="token operator">!</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token keyword">this</span> <span class="token operator">&lt;=</span> d<span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//复用&lt;=</span>
<span class="token punctuation">}</span>

<span class="token keyword">bool</span> Date<span class="token double-colon punctuation">::</span><span class="token keyword">operator</span> <span class="token operator">&gt;=</span> <span class="token punctuation">(</span><span class="token keyword">const</span> Date<span class="token operator">&amp;</span> d<span class="token punctuation">)</span> <span class="token keyword">const</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> <span class="token operator">!</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token keyword">this</span> <span class="token operator">&lt;</span> d<span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//复用&lt;</span>
<span class="token punctuation">}</span>

<span class="token keyword">bool</span> Date<span class="token double-colon punctuation">::</span><span class="token keyword">operator</span> <span class="token operator">!=</span> <span class="token punctuation">(</span><span class="token keyword">const</span> Date<span class="token operator">&amp;</span> d<span class="token punctuation">)</span> <span class="token keyword">const</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> <span class="token operator">!</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token keyword">this</span> <span class="token operator">==</span> d<span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//复用==</span>
<span class="token punctuation">}</span>

Date<span class="token operator">&amp;</span> Date<span class="token double-colon punctuation">::</span><span class="token keyword">operator</span> <span class="token operator">++</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token operator">*</span><span class="token keyword">this</span> <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>	<span class="token comment">//前置++没有拷贝（效率高）</span>
<span class="token punctuation">}</span>

Date Date<span class="token double-colon punctuation">::</span><span class="token keyword">operator</span> <span class="token operator">++</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	Date tmp <span class="token operator">=</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
	<span class="token operator">*</span><span class="token keyword">this</span> <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> tmp<span class="token punctuation">;</span>	<span class="token comment">//后置++有2次拷贝（效率低）</span>
<span class="token punctuation">}</span>

Date<span class="token operator">&amp;</span> Date<span class="token double-colon punctuation">::</span><span class="token keyword">operator</span> <span class="token operator">--</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token operator">*</span><span class="token keyword">this</span> <span class="token operator">-=</span> <span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

Date Date<span class="token double-colon punctuation">::</span><span class="token keyword">operator</span> <span class="token operator">--</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	Date tmp <span class="token operator">=</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
	<span class="token operator">*</span><span class="token keyword">this</span> <span class="token operator">-=</span> <span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> tmp<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> Date<span class="token double-colon punctuation">::</span><span class="token keyword">operator</span> <span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">const</span> Date<span class="token operator">&amp;</span> d<span class="token punctuation">)</span> <span class="token keyword">const</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> flag <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>	<span class="token comment">//如果假设成立</span>
	Date min <span class="token operator">=</span> d<span class="token punctuation">;</span>
	Date max <span class="token operator">=</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>min <span class="token operator">&gt;</span> max<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		min <span class="token operator">=</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
		max <span class="token operator">=</span> d<span class="token punctuation">;</span>
		flag <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>	<span class="token comment">//假设错误</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span>min <span class="token operator">&lt;</span> max<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token operator">++</span>min<span class="token punctuation">;</span>	<span class="token comment">//自定义类型最好用前置++（不需要拷贝）</span>
		n<span class="token operator">++</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> n <span class="token operator">*</span> flag<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

ostream<span class="token operator">&amp;</span> <span class="token keyword">operator</span> <span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span>ostream<span class="token operator">&amp;</span> out<span class="token punctuation">,</span> <span class="token keyword">const</span> Date<span class="token operator">&amp;</span> d<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	out <span class="token operator">&lt;&lt;</span> d<span class="token punctuation">.</span>_year <span class="token operator">&lt;&lt;</span> <span class="token string">"年"</span> <span class="token operator">&lt;&lt;</span> d<span class="token punctuation">.</span>_month <span class="token operator">&lt;&lt;</span> <span class="token string">"月"</span> <span class="token operator">&lt;&lt;</span> d<span class="token punctuation">.</span>_day <span class="token operator">&lt;&lt;</span> <span class="token string">"日"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token keyword">return</span> out<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

istream<span class="token operator">&amp;</span> <span class="token keyword">operator</span> <span class="token operator">&gt;&gt;</span> <span class="token punctuation">(</span>istream<span class="token operator">&amp;</span> in<span class="token punctuation">,</span> Date<span class="token operator">&amp;</span> d<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"请依次输入年月日："</span><span class="token punctuation">;</span>
		in <span class="token operator">&gt;&gt;</span> d<span class="token punctuation">.</span>_year <span class="token operator">&gt;&gt;</span> d<span class="token punctuation">.</span>_month <span class="token operator">&gt;&gt;</span> d<span class="token punctuation">.</span>_day<span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>d<span class="token punctuation">.</span><span class="token function">CheckDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			cout <span class="token operator">&lt;&lt;</span> <span class="token string">"非法日期："</span><span class="token punctuation">;</span>
			d<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			cout <span class="token operator">&lt;&lt;</span> <span class="token string">"请重新输入!"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
			cout <span class="token operator">&lt;&lt;</span> <span class="token string">"-----------------"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> in<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <ol start="3">
     <li>
      还有一个
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         t 
         
        
          e 
         
        
          s 
         
        
          t 
         
        
          . 
         
        
          c 
         
        
          p 
         
        
          p 
         
        
       
         test.cpp
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 0.8095em; vertical-align: -0.1944em;">
          </span>
          <span class="mord mathnormal">
           t
          </span>
          <span class="mord mathnormal">
           es
          </span>
          <span class="mord mathnormal">
           t
          </span>
          <span class="mord">
           .
          </span>
          <span class="mord mathnormal">
           c
          </span>
          <span class="mord mathnormal">
           pp
          </span>
         </span>
        </span>
       </span>
      </span>
      文件用来
      <strong>
       测试
      </strong>
      我们写的日期类对不对，是否能达到我们的需求。
     </li>
    </ol>
    <pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">"Date.h"</span> </span>

<span class="token keyword">void</span> <span class="token function">test_1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	Date d1<span class="token punctuation">,</span> d2<span class="token punctuation">,</span> d3<span class="token punctuation">,</span> d4<span class="token punctuation">;</span>

	d1<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> d2<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> d3<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> d4<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

	<span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span>cin <span class="token operator">&gt;&gt;</span> n<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		d1 <span class="token operator">-</span> n<span class="token punctuation">;</span>
		d2 <span class="token operator">+</span> n<span class="token punctuation">;</span>
		d3 <span class="token operator">-=</span> n<span class="token punctuation">;</span>
		d4 <span class="token operator">+=</span> n<span class="token punctuation">;</span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"d1："</span><span class="token punctuation">;</span> d1<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"d2："</span><span class="token punctuation">;</span> d2<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"d3："</span><span class="token punctuation">;</span> d3<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"d4："</span><span class="token punctuation">;</span> d4<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">test_2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	Date <span class="token function">d1</span><span class="token punctuation">(</span><span class="token number">2025</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	Date d2 <span class="token operator">=</span> d1<span class="token punctuation">;</span>
	Date <span class="token function">d3</span><span class="token punctuation">(</span><span class="token number">2005</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">23</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//d1.Print(); d2.Print(); d3.Print();</span>

	d1 <span class="token operator">+=</span> <span class="token number">30000</span><span class="token punctuation">;</span> d1<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	d2 <span class="token operator">-=</span> <span class="token number">30000</span><span class="token punctuation">;</span> d2<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	d3 <span class="token operator">+=</span> <span class="token number">30000</span><span class="token punctuation">;</span> d3<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">test_3</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	Date <span class="token function">d1</span><span class="token punctuation">(</span><span class="token number">2025</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	Date d2 <span class="token operator">=</span> d1 <span class="token operator">-</span> <span class="token number">10</span><span class="token punctuation">;</span>
	Date d3 <span class="token operator">=</span> d1 <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">;</span>
	Date d4 <span class="token operator">=</span> d1<span class="token punctuation">;</span>

	<span class="token keyword">if</span> <span class="token punctuation">(</span>d1 <span class="token operator">&lt;</span> d2<span class="token punctuation">)</span> cout <span class="token operator">&lt;&lt;</span> <span class="token string">"d1 &lt; d2"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>d1 <span class="token operator">==</span> d2<span class="token punctuation">)</span> cout <span class="token operator">&lt;&lt;</span> <span class="token string">"d1 == d2"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>d1 <span class="token operator">&gt;</span> d2<span class="token punctuation">)</span> cout <span class="token operator">&lt;&lt;</span> <span class="token string">"d1 &gt; d2"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

	<span class="token keyword">if</span> <span class="token punctuation">(</span>d1 <span class="token operator">&lt;</span> d3<span class="token punctuation">)</span> cout <span class="token operator">&lt;&lt;</span> <span class="token string">"d1 &lt; d3"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>d1 <span class="token operator">==</span> d3<span class="token punctuation">)</span> cout <span class="token operator">&lt;&lt;</span> <span class="token string">"d1 == d3"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>d1 <span class="token operator">&gt;</span> d3<span class="token punctuation">)</span> cout <span class="token operator">&lt;&lt;</span> <span class="token string">"d1 &gt; d3"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

	<span class="token keyword">if</span> <span class="token punctuation">(</span>d1 <span class="token operator">&lt;</span> d4<span class="token punctuation">)</span> cout <span class="token operator">&lt;&lt;</span> <span class="token string">"d1 &lt; d4"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>d1 <span class="token operator">==</span> d4<span class="token punctuation">)</span> cout <span class="token operator">&lt;&lt;</span> <span class="token string">"d1 == d4"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>d1 <span class="token operator">&gt;</span> d4<span class="token punctuation">)</span> cout <span class="token operator">&lt;&lt;</span> <span class="token string">"d1 &gt; d4"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

	cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

	<span class="token keyword">if</span> <span class="token punctuation">(</span>d1 <span class="token operator">&lt;=</span> d2<span class="token punctuation">)</span> cout <span class="token operator">&lt;&lt;</span> <span class="token string">"d1 &lt;= d2"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token keyword">else</span> cout <span class="token operator">&lt;&lt;</span> <span class="token string">"d1 &gt; d2"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

	<span class="token keyword">if</span> <span class="token punctuation">(</span>d1 <span class="token operator">&lt;=</span> d3<span class="token punctuation">)</span> cout <span class="token operator">&lt;&lt;</span> <span class="token string">"d1 &lt;= d3"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token keyword">else</span> cout <span class="token operator">&lt;&lt;</span> <span class="token string">"d1 &gt; d3"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

	<span class="token keyword">if</span> <span class="token punctuation">(</span>d1 <span class="token operator">&lt;=</span> d4<span class="token punctuation">)</span> cout <span class="token operator">&lt;&lt;</span> <span class="token string">"d1 &lt;= d4"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token keyword">else</span> cout <span class="token operator">&lt;&lt;</span> <span class="token string">"d1 &gt; d4"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

	cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

	<span class="token keyword">if</span> <span class="token punctuation">(</span>d1 <span class="token operator">!=</span> d2<span class="token punctuation">)</span> cout <span class="token operator">&lt;&lt;</span> <span class="token string">"d1 != d2"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token keyword">else</span> cout <span class="token operator">&lt;&lt;</span> <span class="token string">"d1 == d2"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

	<span class="token keyword">if</span> <span class="token punctuation">(</span>d1 <span class="token operator">!=</span> d3<span class="token punctuation">)</span> cout <span class="token operator">&lt;&lt;</span> <span class="token string">"d1 != d3"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token keyword">else</span> cout <span class="token operator">&lt;&lt;</span> <span class="token string">"d1 == d3"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

	<span class="token keyword">if</span> <span class="token punctuation">(</span>d1 <span class="token operator">!=</span> d4<span class="token punctuation">)</span> cout <span class="token operator">&lt;&lt;</span> <span class="token string">"d1 != d4"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token keyword">else</span> cout <span class="token operator">&lt;&lt;</span> <span class="token string">"d1 == d4"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">test_4</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	Date <span class="token function">d1</span><span class="token punctuation">(</span><span class="token number">2025</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	Date d2 <span class="token operator">=</span> d1<span class="token punctuation">;</span>
	Date d3 <span class="token operator">=</span> d1<span class="token punctuation">;</span>
	Date d4 <span class="token operator">=</span> d1<span class="token punctuation">;</span>

	Date r1 <span class="token operator">=</span> d1<span class="token operator">++</span><span class="token punctuation">;</span> 
	r1<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> d1<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

	Date r2 <span class="token operator">=</span> <span class="token operator">++</span>d2<span class="token punctuation">;</span>
	r2<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> d2<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

	Date r3 <span class="token operator">=</span> d3<span class="token operator">--</span><span class="token punctuation">;</span>
	r3<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> d3<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

	Date r4 <span class="token operator">=</span> <span class="token operator">--</span>d4<span class="token punctuation">;</span>
	r4<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> d4<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">test_5</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	Date <span class="token function">d1</span><span class="token punctuation">(</span><span class="token number">2025</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">d2</span><span class="token punctuation">(</span><span class="token number">2005</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	Date <span class="token function">d3</span><span class="token punctuation">(</span><span class="token number">2025</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	cout <span class="token operator">&lt;&lt;</span> d1 <span class="token operator">-</span> d2 <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

	cout <span class="token operator">&lt;&lt;</span> d1 <span class="token operator">-</span> d3 <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">test_6</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	Date d1<span class="token punctuation">,</span> d2<span class="token punctuation">;</span>

	cin <span class="token operator">&gt;&gt;</span> d1 <span class="token operator">&gt;&gt;</span> d2<span class="token punctuation">;</span>
	<span class="token comment">//operator &gt;&gt; (operator &gt;&gt; (cin, d1), d2);</span>

	cout <span class="token operator">&lt;&lt;</span> endl <span class="token operator">&lt;&lt;</span> <span class="token string">"d1："</span> <span class="token operator">&lt;&lt;</span> d1 <span class="token operator">&lt;&lt;</span> <span class="token string">"d2："</span> <span class="token operator">&lt;&lt;</span> d2 <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token comment">//operator &lt;&lt; (operator &lt;&lt; (cout, d1), d2);</span>

	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"还有"</span> <span class="token operator">&lt;&lt;</span> d2 <span class="token operator">-</span> d1 <span class="token operator">&lt;&lt;</span> <span class="token string">"天。"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">//test_1();	//多次测试+、-、+=、-=</span>

	<span class="token comment">//test_2();	//单次测试+=、-=</span>

	<span class="token comment">//test_3();	//测试比较大小</span>

	<span class="token comment">//test_4();	//测试++、--</span>

	<span class="token comment">//test_5();	//测试d1-d2</span>

	<span class="token function">test_6</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//测试&gt;&gt;、&lt;&lt;</span>

	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <hr/>
    <h2>
     <a id="_3536">
     </a>
     总结
    </h2>
    <p>
     以上就是对
     <strong>
      C++
     </strong>
     中类和对象部分的大总结，这篇博客我前前后后码了差不多有一个周，全文差不多有
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        4.5 
        
       
         w 
        
       
      
        4.5w
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.6444em;">
         </span>
         <span class="mord">
          4.5
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0269em;">
          w
         </span>
        </span>
       </span>
      </span>
     </span>
     字左右，希望能对你有所帮助。
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f:2f626c6f672e6373646e2e6e65742f6a6d6c616e67656c5f2f:61727469636c652f64657461696c732f313436313130333534" class_="artid" style="display:none">
 </p>
</div>


