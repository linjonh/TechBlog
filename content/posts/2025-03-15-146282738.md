---
layout: post
title: "RHCERHCSA复习npmdnf源码安装实验"
date: 2025-03-15 18:09:44 +0800
description: "AppStream、BaseOS：rpm包的所在目录，是 Red Hat 系列操作系统中的软件仓库分类将AppStream、BaseOS作为仓库，供后面的DNF来使用。"
keywords: "RHCE(RHCSA复习：npm、dnf、源码安装实验)"
categories: ['高级运维']
tags: ['云计算', 'Rhcsa', 'Npm', 'Linux', 'Dnf']
artid: "146282738"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146282738
    alt: "RHCERHCSA复习npmdnf源码安装实验"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146282738
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146282738
cover: https://bing.ee123.net/img/rand?artid=146282738
image: https://bing.ee123.net/img/rand?artid=146282738
img: https://bing.ee123.net/img/rand?artid=146282738
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     RHCE(RHCSA复习：npm、dnf、源码安装实验)
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h2>
     <a id="_0">
     </a>
     七、软件管理
    </h2>
    <h3>
     <a id="71_rpm__1">
     </a>
     7.1 rpm 安装
    </h3>
    <h4>
     <a id="711__2">
     </a>
     7.1.1 挂载
    </h4>
    <pre><code class="prism language-bash"><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># ll /mnt</span>
total <span class="token number">0</span>
drwxr-xr-x. <span class="token number">2</span> root root <span class="token number">6</span> Oct <span class="token number">27</span> <span class="token number">21</span>:32 hgfs

<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># mount /dev/sr0 /mnt   #挂载</span>
mount: /mnt: WARNING: <span class="token builtin class-name">source</span> write-protected, mounted read-only.
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># </span>

<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># ll /mnt    #挂载后再次查看，里面是 ISO 镜像的内容</span>
total <span class="token number">44</span>
drwxr-xr-x. <span class="token number">1</span> root root  <span class="token number">2048</span> Oct <span class="token number">25</span>  <span class="token number">2023</span> AppStream
drwxr-xr-x. <span class="token number">1</span> root root  <span class="token number">2048</span> Oct <span class="token number">25</span>  <span class="token number">2023</span> BaseOS
drwxrwxr-x. <span class="token number">1</span> root root  <span class="token number">2048</span> Oct <span class="token number">25</span>  <span class="token number">2023</span> EFI
-r--r--r--. <span class="token number">1</span> root root  <span class="token number">8154</span> Oct <span class="token number">25</span>  <span class="token number">2023</span> EULA
-r--r--r--. <span class="token number">1</span> root root  <span class="token number">1455</span> Oct <span class="token number">25</span>  <span class="token number">2023</span> extra_files.json
-r--r--r--. <span class="token number">1</span> root root <span class="token number">18092</span> Oct <span class="token number">25</span>  <span class="token number">2023</span> GPL
drwxrwxr-x. <span class="token number">1</span> root root  <span class="token number">2048</span> Oct <span class="token number">25</span>  <span class="token number">2023</span> images
drwxrwxr-x. <span class="token number">1</span> root root  <span class="token number">2048</span> Oct <span class="token number">25</span>  <span class="token number">2023</span> isolinux
-r--r--r--. <span class="token number">1</span> root root   <span class="token number">103</span> Oct <span class="token number">25</span>  <span class="token number">2023</span> media.repo
-r--r--r--. <span class="token number">1</span> root root  <span class="token number">1669</span> Oct <span class="token number">25</span>  <span class="token number">2023</span> RPM-GPG-KEY-redhat-beta
-r--r--r--. <span class="token number">1</span> root root  <span class="token number">3682</span> Oct <span class="token number">25</span>  <span class="token number">2023</span> RPM-GPG-KEY-redhat-release

</code></pre>
    <p>
     AppStream、BaseOS：rpm包的所在目录，是 Red Hat 系列操作系统中的软件仓库分类
    </p>
    <h4>
     <a id="712rpmmntrpm_29">
     </a>
     7.1.2创建/rpm目录，将/mnt下的仓库拷贝到/rpm下
    </h4>
    <pre><code class="prism language-bash"><span class="token comment">#新建一个目录，将AppStream、BaseOS拷贝</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># mkdir /rpm   </span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># cp /mnt/AppStream/ /rpm/ -r</span>

<span class="token comment">#拷贝需要时间，因此要新建一个xshell连接该虚拟机，将BaseOS也拷贝过来</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># cp /mnt/BaseOS/ /rpm/ -r</span>

</code></pre>
    <p>
     将AppStream、BaseOS作为仓库，供后面的DNF来使用
    </p>
    <h4>
     <a id="713_rpm_41">
     </a>
     7.1.3 查看/rpm下的信息
    </h4>
    <pre><code class="prism language-bash"><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># ll /rpm       #列出位于 /rpm 目录下的文件和子目录的详细信息。</span>
total <span class="token number">0</span>
drwxr-xr-x. <span class="token number">4</span> root root <span class="token number">38</span> Mar <span class="token number">15</span> <span class="token number">11</span>:40 AppStream
drwxr-xr-x. <span class="token number">4</span> root root <span class="token number">38</span> Mar <span class="token number">15</span> <span class="token number">11</span>:41 BaseOS

<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># tree /rpm    #以树状图的形式列出指定目录（ /rpm）下的所有文件和子目录，以及它们的嵌套层次。</span>

</code></pre>
    <h4>
     <a id="714_rpmBaseOSPackages_51">
     </a>
     7.1.4 切换路径到/rpm/BaseOS/Packages/，查看后发现有大量的软件包
    </h4>
    <pre><code class="prism language-bash"><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># cd /rpm/BaseOS/</span>
<span class="token punctuation">[</span>root@localhost BaseOS<span class="token punctuation">]</span><span class="token comment"># ll   #/rpm/BaseOS下有两个包Packages、repodata</span>
total <span class="token number">92</span>
drwxr-xr-x. <span class="token number">2</span> root root <span class="token number">61440</span> Mar <span class="token number">15</span> <span class="token number">11</span>:41 Packages
drwxr-xr-x. <span class="token number">2</span> root root  <span class="token number">4096</span> Mar <span class="token number">15</span> <span class="token number">11</span>:41 repodata
<span class="token punctuation">[</span>root@localhost BaseOS<span class="token punctuation">]</span><span class="token comment"># cd Packages/</span>
<span class="token punctuation">[</span>root@localhost Packages<span class="token punctuation">]</span><span class="token comment"># ll</span>
total <span class="token number">1310536</span>
-r--r--r--. <span class="token number">1</span> root root     <span class="token number">84797</span> Mar <span class="token number">15</span> <span class="token number">11</span>:41 accel-config-3.5.3-2.el9.i686.rpm
-r--r--r--. <span class="token number">1</span> root root     <span class="token number">81657</span> Mar <span class="token number">15</span> <span class="token number">11</span>:41 accel-config-3.5.3-2.el9.x86_64.rpm
-r--r--r--. <span class="token number">1</span> root root     <span class="token number">54604</span> Mar <span class="token number">15</span> <span class="token number">11</span>:41 accel-config-libs-3.5.3-2.el9.i686.rpm
-r--r--r--. <span class="token number">1</span> root root     <span class="token number">54176</span> Mar <span class="token number">15</span> <span class="token number">11</span>:41 accel-config-libs-3.5.3-2.el9.x86_64.rpm

</code></pre>
    <h4>
     <a id="715_zsh589el9x86_64rpm_68">
     </a>
     7.1.5 如果我们要安装zsh-5.8-9.el9.x86_64.rpm包，则使用下面的命令
    </h4>
    <pre><code class="prism language-bash">root@localhost Packages<span class="token punctuation">]</span><span class="token comment"># rpm -i zsh-5.8-9.el9.x86_64.rpm</span>
<span class="token comment">#-i：这个选项表示你想要安装一个新的 RPM 包。它告诉 rpm 命令执行安装操作。</span>

<span class="token punctuation">[</span>root@localhost Packages<span class="token punctuation">]</span><span class="token comment"># rpm -qa | grep zsh</span>
<span class="token comment">#查询系统中所有已安装的 RPM 包，并过滤出名称中包含 "zsh" 的包。</span>
<span class="token comment">#-qa 中的 -q 表示查询模式，而 -a 则表示所有包。</span>
</code></pre>
    <h4>
     <a id="716__79">
     </a>
     7.1.6 删除该包
    </h4>
    <pre><code class="prism language-bash"><span class="token punctuation">[</span>root@localhost Packages<span class="token punctuation">]</span><span class="token comment"># rpm -e zsh</span>
<span class="token comment">#-e：卸载</span>
</code></pre>
    <h3>
     <a id="72_dnf__86">
     </a>
     7.2 dnf 本地安装
    </h3>
    <h4>
     <a id="721_etcyumreposddnf_87">
     </a>
     7.2.1 切换路径到/etc/yum.repos.d/，清空仓库，为演示dnf安装做准备
    </h4>
    <pre><code class="prism language-bash"><span class="token punctuation">[</span>root@localhost Packages<span class="token punctuation">]</span><span class="token comment"># cd  /etc/yum.repos.d/                             #cd /etc/yum.repos.d/：这一步将当前工作目录更改到 /etc/yum.repos.d/，这是存放 YUM（Yellowdog Updater, Modified）仓库配置文件的目录。</span>
<span class="token punctuation">[</span>root@localhost yum.repos.d<span class="token punctuation">]</span><span class="token comment"># ll</span>
total <span class="token number">8</span>
-rw-r--r--. <span class="token number">1</span> root root <span class="token number">358</span> Nov  <span class="token number">2</span> <span class="token number">10</span>:02 redhat.repo
-rw-r--r--. <span class="token number">1</span> root root <span class="token number">113</span> Nov  <span class="token number">2</span> <span class="token number">10</span>:00 rpm.repo
<span class="token punctuation">[</span>root@localhost yum.repos.d<span class="token punctuation">]</span><span class="token comment"># rm -rf *</span>
<span class="token punctuation">[</span>root@localhost yum.repos.d<span class="token punctuation">]</span><span class="token comment"># ll</span>
total <span class="token number">0</span>
<span class="token punctuation">[</span>root@localhost yum.repos.d<span class="token punctuation">]</span><span class="token comment"># cd</span>

<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># dnf install http -y</span>
Updating Subscription Management repositories.
Unable to <span class="token builtin class-name">read</span> consumer identity

This system is not registered with an entitlement server. You can use subscription-manager to register.

Error: There are no enabled repositories <span class="token keyword">in</span> <span class="token string">"/etc/yum.repos.d"</span>, <span class="token string">"/etc/yum/repos.d"</span>, <span class="token string">"/etc/distro.repos.d"</span><span class="token builtin class-name">.</span>
<span class="token comment">#该错误表明 DNF/YUM 在尝试查找软件包进行安装时，未能找到任何已启用的软件仓库。这通常是因为 /etc/yum.repos.d/ 目录中没有任何有效的 .repo 文件，正如之前命令中所做的那样清空了该目录。</span>
</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/9ad3425b7a6c49529c8d45d0203d2b68.png"/>
    </p>
    <p>
     注意：前面还有步骤：7.1.1、7.1.2
    </p>
    <h4>
     <a id="722_bendirepoetcyumreposd_112">
     </a>
     7.2.2 定义仓库bendi.repo，一般在/etc/yum.repos.d/目录下
    </h4>
    <pre><code class="prism language-bash"><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># cd /etc/yum.repos.d/</span>
<span class="token punctuation">[</span>root@localhost yum.repos.d<span class="token punctuation">]</span><span class="token comment"># ll</span>
total <span class="token number">4</span>
-rw-r--r--. <span class="token number">1</span> root root <span class="token number">358</span> Mar <span class="token number">15</span> <span class="token number">15</span>:58 redhat.repo
<span class="token punctuation">[</span>root@localhost yum.repos.d<span class="token punctuation">]</span><span class="token comment"># vim bendi.repo</span>
<span class="token punctuation">[</span>root@localhost yum.repos.d<span class="token punctuation">]</span><span class="token comment"># cat bendi.repo</span>
<span class="token punctuation">[</span>baseos<span class="token punctuation">]</span>
<span class="token assign-left variable">name</span><span class="token operator">=</span>baseos
<span class="token assign-left variable">baseurl</span><span class="token operator">=</span>/rpm/BaseOS
<span class="token assign-left variable">gpgcheck</span><span class="token operator">=</span><span class="token number">0</span>
<span class="token punctuation">[</span>appstream<span class="token punctuation">]</span>
<span class="token assign-left variable">name</span><span class="token operator">=</span>appstream
<span class="token assign-left variable">baseurl</span><span class="token operator">=</span>/rpm/AppStream
<span class="token assign-left variable">gpgcheck</span><span class="token operator">=</span><span class="token number">0</span>

</code></pre>
    <h4>
     <a id="723__131">
     </a>
     7.2.3 安装
    </h4>
    <pre><code class="prism language-bash"><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># dnf install httpd -y</span>
Updating Subscription Management repositories.
Unable to <span class="token builtin class-name">read</span> consumer identity

This system is not registered with an entitlement server. You can use subscription-manager to register.

baseos                                                      <span class="token number">133</span> MB/s <span class="token operator">|</span> <span class="token number">2.0</span> MB     00:00    
appstream                                                   <span class="token number">150</span> MB/s <span class="token operator">|</span> <span class="token number">6.5</span> MB     00:00    
Dependencies resolved.
<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span>
 Package                    Architecture   Version                  Repository         Size
<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span>
Installing:
 httpd                      x86_64         <span class="token number">2.4</span>.57-5.el9             appstream          <span class="token number">52</span> k
<span class="token comment">#软件包名                     架构信息        具体版本                  从 appstream 仓库安装                    </span>
</code></pre>
    <h3>
     <a id="73_dnf_151">
     </a>
     7.3 dnf网络仓库安装
    </h3>
    <h4>
     <a id="731_bendirepo_152">
     </a>
     7.3.1 删除bendi.repo，为网络安装做准备
    </h4>
    <pre><code class="prism language-bash"><span class="token punctuation">[</span>root@localhost yum.repos.d<span class="token punctuation">]</span><span class="token comment"># cd /etc/yum.repos.d/</span>
<span class="token punctuation">[</span>root@localhost yum.repos.d<span class="token punctuation">]</span><span class="token comment"># ll</span>
total <span class="token number">8</span>
-rw-r--r--. <span class="token number">1</span> root root <span class="token number">113</span> Mar <span class="token number">15</span> <span class="token number">16</span>:24 bendi.repo
-rw-r--r--. <span class="token number">1</span> root root <span class="token number">358</span> Mar <span class="token number">15</span> <span class="token number">15</span>:58 redhat.repo
<span class="token punctuation">[</span>root@localhost yum.repos.d<span class="token punctuation">]</span><span class="token comment"># rm -rf bendi.repo</span>

</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/9ad3425b7a6c49529c8d45d0203d2b68.png"/>
    </p>
    <p>
     注意：前面还有步骤：7.1.1、7.1.2，然后将本地仓库换成下文中的网络仓库
    </p>
    <h4>
     <a id="732__166">
     </a>
     7.3.2 编写网络仓库
    </h4>
    <pre><code class="prism language-bash"><span class="token punctuation">[</span>root@localhost yum.repos.d<span class="token punctuation">]</span><span class="token comment"># vim wangluo.repo</span>
<span class="token punctuation">[</span>root@localhost yum.repos.d<span class="token punctuation">]</span><span class="token comment"># cat wangluo.repo</span>
<span class="token punctuation">[</span>baseos<span class="token punctuation">]</span>
<span class="token assign-left variable">name</span><span class="token operator">=</span>baseos
<span class="token assign-left variable">baseurl</span><span class="token operator">=</span>http://47.108.86.156/rhel9.0/x86_64/dvd/BaseOS/
<span class="token assign-left variable">gpgcheck</span><span class="token operator">=</span><span class="token number">0</span>
<span class="token punctuation">[</span>appstream<span class="token punctuation">]</span>
<span class="token assign-left variable">name</span><span class="token operator">=</span>appstream
<span class="token assign-left variable">baseurl</span><span class="token operator">=</span>http://47.108.86.156/rhel9.0/x86_64/dvd/AppStream
<span class="token assign-left variable">gpgcheck</span><span class="token operator">=</span><span class="token number">0</span>

<span class="token comment">#http://47.108.86.156/rhel9.0/x86_64/dvd/BaseOS/和http://47.108.86.156/rhel9.0/x86_64/dvd/AppStream是网络连接，</span>
<span class="token comment">#baseurl：这个参数指定了软件仓库的 URL 地址。在这个例子中，baseurl 设置为http://47.108.86.156/rhel9.0/x86_64/dvd/BaseOS/ 和 http://47.108.86.156/rhel9.0/x86_64/dvd/AppStream/，这意味着 DNF 将从这个远程服务器上下载所需的软件包。</span>
</code></pre>
    <h4>
     <a id="733__183">
     </a>
     7.3.3 查看网络仓库
    </h4>
    <pre><code class="prism language-bash"><span class="token punctuation">[</span>root@localhost yum.repos.d<span class="token punctuation">]</span><span class="token comment"># cd</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># dnf repolist    #列出所有已启用的仓库，意味着 DNF 可以从这些仓库下载和安装软件包。</span>
Updating Subscription Management repositories.
Unable to <span class="token builtin class-name">read</span> consumer identity

This system is not registered with an entitlement server. You can use subscription-manager to register.

repo <span class="token function">id</span>                                       repo name
appstream                                     appstream
baseos                                        baseos
<span class="token comment">#repo id：仓库的唯一标识符，在你的配置文件中对应于方括号内的名称，例如 [baseos] 和 [appstream]。</span>
<span class="token comment">#repo name：仓库的描述性名称，对应于 .repo 文件中的 name 字段。</span>
</code></pre>
    <h4>
     <a id="734__199">
     </a>
     7.3.4 下载
    </h4>
    <pre><code class="prism language-bash"><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># dnf install vsftpd -y</span>
</code></pre>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f:672e6373646e2e6e65742f747431393132333635373138382f:61727469636c652f64657461696c732f313436323832373338" class_="artid" style="display:none">
 </p>
</div>


