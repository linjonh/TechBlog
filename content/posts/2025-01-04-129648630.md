---
arturl_encode: "68747470733a2f2f62:6c6f672e6373646e2e6e65742f71715f34343130303236332f:61727469636c652f64657461696c732f313239363438363330"
layout: post
title: "äº‘å¹³å°éƒ¨ç½²Stable-Diffusion-WebuiåŠä½¿ç”¨æ‰‹å†Œè¶…è¯¦ç»†"
date: 2025-01-04 14:43:20 +08:00
description: "ä¸€ä¸ªå€’éœ‰çš„ç½‘ç»œæ°‘å·¥åœ¨æ ¡å¹³å°äºŒæ¬¡éƒ¨ç½²Stable Diffusion webuiæƒ¨ç—›ç»å†"
keywords: "äº‘å¹³å°éƒ¨ç½²Stable-Diffusion-WebuiåŠä½¿ç”¨æ‰‹å†Œï¼ˆè¶…è¯¦ç»†ï¼‰"
categories: ['Python']
tags: ['Stable', 'Github', 'Git', 'Diffusion']
artid: "129648630"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=129648630
    alt: "äº‘å¹³å°éƒ¨ç½²Stable-Diffusion-WebuiåŠä½¿ç”¨æ‰‹å†Œè¶…è¯¦ç»†"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=129648630
featuredImagePreview: https://bing.ee123.net/img/rand?artid=129648630
---

# äº‘å¹³å°éƒ¨ç½²Stable-Diffusion-WebuiåŠä½¿ç”¨æ‰‹å†Œï¼ˆè¶…è¯¦ç»†ï¼‰

#### ç›®å½•

* [ä¸€ã€ç¯å¢ƒæ­å»ºåŠStable-Diffusion-Webui](#StableDiffusionWebui_1)
* + [ç³»ç»Ÿé…ç½®](#_2)
  + [åŸºç¡€ç¯å¢ƒé…ç½®](#_4)
  + [æ­£å¼éƒ¨ç½²Stable Diffusion](#Stable_Diffusion_22)
* [äºŒã€Stable-Diffusion-Webuiä½¿ç”¨æ‰‹å†Œ](#StableDiffusionWebui_73)
* [ä¸‰ã€å‚è€ƒé“¾æ¥](#_94)

## ä¸€ã€ç¯å¢ƒæ­å»ºåŠStable-Diffusion-Webui

### ç³»ç»Ÿé…ç½®

å­¦æ ¡çš„äº‘è®¡ç®—å¹³å°ï¼ˆLinuxç³»ç»Ÿï¼‰ï¼ˆCPU 1æ ¸ï¼ŒGPU 0.5å¡ï¼Œå†…å­˜ 20Gï¼‰ã€Xftp7

### åŸºç¡€ç¯å¢ƒé…ç½®

é…ç½®python3.10ç¯å¢ƒï¼Œ
`<env_name>`
ä¸ºè®¾å®šçš„ç¯å¢ƒåç§°

```bash
conda create -n <env_name> python=3.10 ipykernel

```

æ¿€æ´»ç¯å¢ƒ

```bash
source activate <env_name>

```

å°†ç¯å¢ƒå†™å…¥Notebookçš„Kernelé‡Œ

```bash
python -m ipykernel install --user --name <env_name> --display-name "<env_name>"

```

é‡å¯å®ä¾‹ï¼Œå¯ä»¥çœ‹åˆ°è‡ªå·±åˆ›å»ºçš„py3.10ç¯å¢ƒï¼Œæ‰“å¼€Terminalï¼Œå®‰è£…git

```bash
conda install git

```

### æ­£å¼éƒ¨ç½²Stable Diffusion

æ¿€æ´»ç¯å¢ƒ

```bash
source activate <env_name>

```

ç¡®è®¤gitç‰ˆæœ¬ï¼Œæœ€å¥½æ˜¯2.XX
  
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/fc6d4fa46022deec3768c67df1ec6546.png)
  
ä¸‹è½½ä»£ç 

```bash
git clone https://github.com/AUTOMATIC1111/stable-diffusion-webui.git

```

è¿›å…¥ç›®å½•

```bash
cd stable-diffusion-webui

```

å®‰è£…ä¾èµ–

```bash
pip config set global.index-url https://mirrors.aliyun.com/pypi/simple/ 
pip install -r requirements_versions.txt 

```

æ‰“å¼€
`stable-diffusion-webui/launch.py`
ï¼Œæ‰¾åˆ°
`prepare_`
å‡½æ•°ï¼ŒæŠŠé‡Œé¢æ‰€æœ‰çš„â€œ
`https://github.com`
â€æ›¿æ¢ä¸ºâ€œ
`https://ghproxy.com/https://github.com`
â€ï¼Œåˆ©ç”¨Ghproxyè¿›è¡Œä»£ç†ï¼ŒåŠ é€Ÿå›½å†…Git
  
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/fb6e3dd701330c1ce8a0dd1ae3d8ecf4.png)
  
æ‰“å¼€ç›®å½•ä¸‹çš„
`webui-user.bat`
ï¼Œåœ¨å›¾ç¤ºä½ç½®å¢åŠ 
`--xformers`
ï¼Œè™½ç„¶å¯¹äºæˆ‘é‡åˆ°çš„
`--xformers Cannot import xformers`
æŠ¥é”™å¥½åƒæ²¡ä»€ä¹ˆç”¨ï¼Œä½†è°çŸ¥é“å¯¹å…¶ä»–æœ‹å‹æœ‰æ²¡æœ‰ç”¨å‘¢ï¼Ÿ
  
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/784c4912cf4c964b6c1e8fa77209b403.png)
  
å¯åŠ¨ç¨‹åº

```bash
./webui.sh

```

é‡åˆ°æŠ¥é”™å°è¯•æ ¹æ®Commandï¼Œç›´æ¥åˆ©ç”¨gitä¸‹è½½ï¼Œæ¯”å¦‚ï¼š

```bash
git clone https://xx.git

```

ä¸‹è½½å®Œä¹‹åç»§ç»­é‡å¤ä¸Šè¿°æ“ä½œ

å¦‚æœæç¤ºæ²¡æœ‰ä¸»æ¨¡å‹checkpointï¼Œå»
[å®˜ç½‘](https://huggingface.co/CompVis/stable-diffusion-v-1-4-original)
ä¸‹è½½ä¸»æ¨¡å‹
  
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/d071d306fcdc262d485148625e52783e.png)
  
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/ba0bded994d4ba75bc261ecbb2afb183.png)
  
sd-v1-4ä¸ºåŠç²¾åº¦ï¼Œå¤§æ¦‚4Gï¼Œsd-v1-4-full-emaä¸ºå•ç²¾åº¦ï¼Œå¤§æ¦‚7Gï¼Œæˆ‘æ˜¯å…ˆä¸‹è½½åˆ°æœ¬åœ°ï¼Œå†é€šè¿‡xftpè¿æ¥åˆ°äº‘å¹³å°è¿›è¡Œä¸Šä¼ åˆ°ä¸‹é¢è¿™ä¸ªä½ç½®ï¼š

```bash
/home/XXXX/stable-diffusion-webui/models/Stable-diffusion/

```

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/26cf7a413fec1e15f088407e41c49375.png)
  
æˆ‘è£…ç¬¬äºŒæ¬¡çš„æ—¶å€™
~~ï¼ˆè°çŸ¥é“æˆ‘ä¸ªæ†¨æ†¨ä¸ºä»€ä¹ˆä¸å°å¿ƒæŠŠæ–‡ä»¶å¤¹åˆ äº†è¿˜æ‰¾ä¸å›æ¥å‘¢ï¼‰~~
ï¼Œéå¸¸é¡ºåˆ©ï¼Œæ²¡æœ‰æç¤ºopen_clipçš„é—®é¢˜ï¼Œè¿˜è‡ªåŠ¨ç»™æˆ‘å®‰è£…äº†v1-5çš„ä¸»æ¨¡å‹ï¼ˆå’±å°±æ˜¯è¯´å¾ˆç„å­¦ï¼‰
  
è‡³äºxformersè¯´æ²¡å®‰è£…çš„é—®é¢˜ï¼Œå…¶å®ä¹Ÿä¸å½±å“è¿è¡Œï¼Œåªæ˜¯ä¸ªè­¦å‘Šâš è€Œå·²ã€‚ã€‚ã€‚

open_clipçš„é—®é¢˜ï¼Œæˆ‘ä¹Ÿæ‰¾åˆ°è§£å†³æ–¹æ³•ï¼Œå¯ä¾›å‚è€ƒğŸ‘‡
  
ç›´æ¥å»githubæŠŠ
[open_clip](https://gitcode.net/mirrors/mlfoundations/open_clip/-/tree/main/src)
ä¸‹è½½åˆ°stable-diffusion-webui/ç›®å½•ä¸‹é¢ï¼Œæ³¨æ„æ˜¯
`/src/open_clip`
è¿™é‡Œçš„
`open_clip`

ç­‰åˆ°æ˜¾ç¤ºäº†ä¸€ä¸ª
`local URL`
ä¹‹åï¼Œè¾“å…¥
`./webui.sh --share`
å†è·‘ä¸€ä¸‹ï¼Œå°±èƒ½æœ‰ä¸ª
`public URL`
ï¼Œç²˜è´´åˆ°æµè§ˆå™¨å°±å¯ä»¥ä½¿ç”¨äº†ï¼Œæ‰‹æœºç”µè„‘éƒ½èƒ½è¿è¡Œï¼ˆåªè¦äº‘å¹³å°ä¸å…³æœºï¼‰
  
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/e226056fb5b23c80489a7a55dbde56cd.png)

## äºŒã€Stable-Diffusion-Webuiä½¿ç”¨æ‰‹å†Œ

* æ¨¡å‹è°ƒæ•´ï¼ˆæ”¹å˜é£æ ¼ã€ä¼˜åŒ–äººä½“å½¢æ€ç­‰ç­‰ï¼‰ï¼Œç½‘ä¸Šæœ‰å¾ˆå¤šå…¬å¼€çš„ckptæ–‡ä»¶ï¼ŒæŠŠå®ƒä»¬ä¼ åˆ°ä¸Šé¢ä¸»æ¨¡å‹ä½ç½®å¤„å°±è¡Œï¼Œä½¿ç”¨çš„æ—¶å€™ï¼Œé€šè¿‡åˆ‡æ¢Stable
    
  Diffusion checkpointå³å¯æ›´æ¢æ¨¡å‹
* promptæç¤ºè¯å‚è€ƒç½‘ç«™ï¼š
  <https://lexica.art/>
* æ¨èå¤§ä½¬åšå®¢ã€Š
  [æ¨¡å‹åº”ç”¨â€”ä½¿ç”¨Stable Diffusion UIæ‰‹å†Œ](https://zhuanlan.zhihu.com/p/570954565)
  ã€‹
* æ¨èå¤§ä½¬åšå®¢ã€Š
  [ä½¿ç”¨stable-diffusion-webuiéƒ¨ç½²NovelAi/Stable Diffusion ä¿å§†çº§æ•™ç¨‹ã€å‘½ä»¤è§£é‡Šã€åŸç†è®²è§£(colabã€windowsã€Linux )](https://zhuanlan.zhihu.com/p/574200991)
  ã€‹
* ç•Œé¢ä½¿ç”¨ï¼ˆç›®å‰æˆ‘æ¢ç´¢çš„è¿˜æ¯”è¾ƒæœ‰é™ï¼Œä¼šè¿›ä¸€æ­¥è·Ÿè¿›ç†è®ºçŸ¥è¯†å­¦ä¹ ï¼‰
    
  txt2img â€” æ ‡å‡†çš„æ–‡å­—ç”Ÿæˆå›¾åƒï¼Œå…·ä½“å‚è€ƒä¸‹å›¾æ‰€ç¤ºï¼›
    
  img2img â€” æ ¹æ®å›¾åƒæˆæ–‡èŒƒæœ¬ã€ç»“åˆæ–‡å­—ç”Ÿæˆå›¾åƒï¼Œå¢åŠ è¦æ¨¡ä»¿çš„å›¾åƒï¼Œå‚æ•°è®¾ç½®è¾“å‡ºå›¾ç‰‡å°ºå¯¸ã€ä¸åŸå›¾ä¸€è‡´æ€§ç¨‹åº¦
    
  Extras â€” ä¼˜åŒ–(æ¸…æ™°ã€æ‰©å±•)å›¾åƒï¼›
    
  PNG Info â€” å›¾åƒåŸºæœ¬ä¿¡æ¯
    
  Checkpoint Merger â€” æ¨¡å‹åˆå¹¶
    
  Textual inversion â€” è®­ç»ƒæ¨¡å‹å¯¹äºæŸç§å›¾åƒé£æ ¼
    
  Settings â€” é»˜è®¤å‚æ•°ä¿®æ”¹
    
  ![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/f1151273a4b20868a8bf173c1f2a3ca3.png)
    
  ![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/e537615dc8e22ded7cfe8157eb378252.png)

## ä¸‰ã€å‚è€ƒé“¾æ¥

* https://blog.csdn.net/weixin_45569617/article/details/126873709
* https://blog.csdn.net/qq_52360013/article/details/127661249
* https://zhuanlan.zhihu.com/p/569663856
* https://www.douban.com/note/845051967/?_i=9139642RrDlhSY,9316584ryzr_Rz
* https://blog.csdn.net/qq_40902709/article/details/128152329
* https://github.com/Sygil-Dev/sygil-webui/issues/1430
* https://www.bilibili.com/read/cv21987039
* https://www.bilibili.com/read/cv19991459?spm_id_from=333.976.0.0
* https://zhuanlan.zhihu.com/p/574200991
* https://www.bilibili.com/read/cv19991459/