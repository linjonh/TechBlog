---
layout: post
title: "ASP.NET-CORE-MVC-EF框架"
date: 2025-03-10 17:34:47 +0800
description: "1. 视图中跨Form变量不能用，得各自定义变量。"
keywords: "ASP.NET CORE MVC EF框架"
categories: ['未分类']
tags: ['Ef', 'Core', 'Asp']
artid: "146159688"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146159688
    alt: "ASP.NET-CORE-MVC-EF框架"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146159688
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146159688
cover: https://bing.ee123.net/img/rand?artid=146159688
image: https://bing.ee123.net/img/rand?artid=146159688
img: https://bing.ee123.net/img/rand?artid=146159688
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     ASP.NET CORE MVC EF框架
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p>
     1.一个视图中的多个表单Form中的变量。
    </p>
    <p>
     方式一：视图中跨Form变量不能用，得各自定义变量否则编译不能通过。变量名还不能相同。
    </p>
    <p>
     或者方式二：在Form之外定义变量
    </p>
    <pre><code>@{
	ViewData["Title"] = "ExpenseForm";
}
﻿
@{
	Layout = null;
}


&lt;!DOCTYPE html&gt;

&lt;html&gt;
&lt;head&gt;
	&lt;meta name="viewport" content="width=device-width" /&gt;
	&lt;title&gt;ExpenseForm&lt;/title&gt;
	&lt;style type="text/css"&gt;
		div, table, tr, td {
			margin: 0px;
			padding: 0px;
		}

		.myTable {
			width: 600px;
			margin: 20px auto;
			border-collapse: collapse;
		}

			.myTable td, .myTable th {
				height: 30px;
				line-heigh: 30px;
				padding: 6px;
			}

	&lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
	&lt;h1 style="text-align:center"&gt;费用信息&lt;/h1&gt;
	@{
		int MaxProjectId = (ViewBag.Project as IEnumerable&lt;Project&gt;)?.Any() == true
		? ((IEnumerable&lt;Project&gt;)ViewBag.Project).Max(p =&gt; p.ProjectId)
		: 0;
		var maxProject = (ViewBag.Project as IEnumerable&lt;Project&gt;)?.FirstOrDefault(p =&gt; p.ProjectId == MaxProjectId);
	}
	&lt;form action="ExpenseForm"&gt;
		&lt;table class="myTable" border="1"&gt;
			&lt;tr&gt;
				&lt;td colspan="2" align="center" style="font-weight:bold;"&gt;
					&lt;a href="ProjectForm" style="float: left"&gt;更多项目信息&lt;/a&gt;
					项目选择
					&lt;input type="submit" value="确认" /&gt;

				&lt;/td&gt;

			&lt;/tr&gt;
			&lt;tr&gt;
				&lt;td width="200" align="right"&gt;项目序号：&lt;/td&gt;
				&lt;td width="600" align="left"&gt;
					@* @{
					int MaxProjectId = (ViewBag.Project as IEnumerable&lt;Project&gt;)?.Any() == true
					? ((IEnumerable&lt;Project&gt;)ViewBag.Project).Max(p =&gt; p.ProjectId)
					: 0;
					var maxProject = (ViewBag.Project as IEnumerable&lt;Project&gt;)?.FirstOrDefault(p =&gt; p.ProjectId == MaxProjectId);} *@
					
					&lt;select name="ddlProjectId" id="ddlProjectId"&gt;
						&lt;option value="0"&gt;--请选择--&lt;/option&gt;

						@foreach (var item in ViewBag.Project)
						{
							&lt;!option value="@item.ProjectId" @(item.ProjectId == @MaxProjectId ? "selected" : "")&gt;@item.ProjectId&lt;/!option&gt;
						}
					&lt;/select&gt;

				&lt;/td&gt;
			&lt;/tr&gt;

			&lt;tr&gt;
				&lt;td&gt;项目编号:	&lt;/td&gt;
				&lt;td&gt;@maxProject?.ProjectNo&lt;/td&gt;
			&lt;/tr&gt;
			&lt;tr&gt;
				&lt;td&gt;报销次数:&lt;/td&gt;
				&lt;td&gt;@maxProject?.Times&lt;/td&gt;
			&lt;/tr&gt;
			&lt;tr&gt;
				&lt;td&gt;项目名称:&lt;/td&gt;
				&lt;td&gt;@maxProject?.ProjectName&lt;/td&gt;

			&lt;/tr&gt;
		&lt;/table&gt;
	&lt;/form&gt;







	&lt;table class="myTable" border="1"&gt;
		&lt;tr&gt;
			&lt;td colspan="6" align="center" style="font-weight:bold;"&gt;
				&lt;a href="SearchForm" style="float: left"&gt;费用查询&lt;/a&gt;
				费用信息
			&lt;/td&gt;
		&lt;/tr&gt;
		&lt;tr&gt;
			&lt;th&gt;项目序号：&lt;/th&gt;
			&lt;th&gt;费用序号：&lt;/th&gt;
			&lt;th&gt;费用类型：&lt;/th&gt;
			&lt;th&gt;金额：&lt;/th&gt;


			&lt;th&gt;日期：&lt;/th&gt;
			&lt;th&gt;操作：&lt;/th&gt;
		&lt;/tr&gt;
		@if (ViewBag.selExpense != null)
			@foreach (var item in ViewBag.selExpense)
			{


				&lt;tr&gt;
					&lt;td&gt;@item.ProjectId&lt;/td&gt;
					&lt;td&gt;@item.ExpenseId&lt;/td&gt;
					&lt;td&gt;@item.ExpenseType&lt;/td&gt;
					&lt;td&gt;@item.Amount&lt;/td&gt;

					&lt;td&gt;@item.CreateDate&lt;/td&gt;
					&lt;td&gt;
						&lt;a href="ConmonFileForm?ExpenseId=@item.ExpenseId" target="_blank"&gt;编辑&lt;/a&gt;|
						&lt;a href="#"&gt;删除&lt;/a&gt;
					&lt;/td&gt;

				&lt;/tr&gt;
			}
	&lt;/table&gt;

	&lt;form method="post" action="AddExpense"&gt;
		@{
			int MaxProjectId2 = (ViewBag.Project as IEnumerable&lt;Project&gt;)?.Any() == true
			? ((IEnumerable&lt;Project&gt;)ViewBag.Project).Max(p =&gt; p.ProjectId)
			: 0;
			var maxProject2 = (ViewBag.Project as IEnumerable&lt;Project&gt;)?.FirstOrDefault(p =&gt; p.ProjectId == MaxProjectId2);
		}
		&lt;input type="hidden" name="hdProjectId" value="@maxProject?.ProjectId" /&gt;
		&lt;div style="text-align:center"&gt;
			&lt;table class="myTable" border="1"&gt;
				&lt;tr&gt;
					&lt;td colspan="2" align="center" style="font-weight:bold;"&gt;新增费用&lt;/td&gt;
				&lt;/tr&gt;

				&lt;tr&gt;
					&lt;td width="200" align="right"&gt;费用类型：&lt;/td&gt;
					&lt;td width="600" align="left"&gt;
						&lt;select name="ExpenseType" id="ExpenseType"&gt;
							&lt;option value="0"&gt;--请选择--&lt;/option&gt;

							@foreach (var item in ViewBag.ExpenseTypes)
							{
								&lt;option value="@item.Note"&gt;@item.Note&lt;/option&gt;
							}
						&lt;/select&gt;
						&lt;a href="ExpenseForm"&gt;更多费用类型&lt;/a&gt;
					&lt;/td&gt;
				&lt;/tr&gt;

				&lt;tr&gt;
					&lt;td width="200" align="right"&gt;费用金额：&lt;/td&gt;
					&lt;td width="600" align="left"&gt;&lt;input type="text" name="txtAmount" /&gt;&lt;/td&gt;
				&lt;/tr&gt;
				&lt;tr&gt;
					&lt;td width="200" align="right"&gt;&lt;/td&gt;
					&lt;td width="600" align="left"&gt;
						&lt;input type="submit" value="新增" /&gt;

					&lt;/td&gt;
				&lt;/tr&gt;

			&lt;/table&gt;
		&lt;/div&gt;

	&lt;/form&gt;
&lt;/body&gt;
</code></pre>
    <p>
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f71715f32353139343638312f:61727469636c652f64657461696c732f313436313539363838" class_="artid" style="display:none">
 </p>
</div>


