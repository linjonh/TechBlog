---
layout: post
title: "Docker-常用命令大全"
date: 2024-05-22 23:58:59 +0800
description: "docker 命令大全"
keywords: "docker常用命令"
categories: ['Docker']
tags: ['运维', '容器', 'Docker']
artid: "139130248"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=139130248
    alt: "Docker-常用命令大全"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=139130248
featuredImagePreview: https://bing.ee123.net/img/rand?artid=139130248
cover: https://bing.ee123.net/img/rand?artid=139130248
image: https://bing.ee123.net/img/rand?artid=139130248
img: https://bing.ee123.net/img/rand?artid=139130248
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Docker 常用命令大全！！
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-light" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
    </p>
    <p>
    </p>
    <h2>
     <a id="_1">
     </a>
     一、启动类
    </h2>
    <h4>
     <a id="1__docker_2">
     </a>
     1. 启动 docker
    </h4>
    <pre><code class="prism language-shell">systemctl start <span class="token function">docker</span>
</code></pre>
    <h4>
     <a id="2__docker_6">
     </a>
     2. 关闭 docker
    </h4>
    <pre><code class="prism language-shell">systemctl stop <span class="token function">docker</span>
</code></pre>
    <h4>
     <a id="3__docker_10">
     </a>
     3. 重新启动 docker
    </h4>
    <pre><code class="prism language-shell">systemctl restart <span class="token function">docker</span>

</code></pre>
    <h4>
     <a id="4_docker__16">
     </a>
     4. docker 设置自启动
    </h4>
    <pre><code class="prism language-shell">systemctl <span class="token builtin class-name">enable</span> <span class="token function">docker</span>
</code></pre>
    <h4>
     <a id="5__docker__21">
     </a>
     5. 查看 docker 运行状态
    </h4>
    <pre><code class="prism language-shell">systemctl status <span class="token function">docker</span>
</code></pre>
    <h4>
     <a id="6__docker__26">
     </a>
     6. 查看 docker 版本号等信息
    </h4>
    <pre><code class="prism language-shell"><span class="token function">docker</span> version
</code></pre>
    <p>
     或者
    </p>
    <pre><code class="prism language-shell"><span class="token function">docker</span> info
</code></pre>
    <p>
     该命令还可以查看到有多少
     <strong>
      容器及其状态
     </strong>
     和
     <strong>
      镜像
     </strong>
     的信息
    </p>
    <p>
     <img alt="docker info" src="https://i-blog.csdnimg.cn/blog_migrate/bfdcbcbbf854704c53589e1cca727fa2.png"/>
    </p>
    <h4>
     <a id="7_docker__39">
     </a>
     7. docker 帮助
    </h4>
    <pre><code class="prism language-shell"><span class="token function">docker</span> <span class="token parameter variable">--help</span> // 查看总体文档
<span class="token function">docker</span> run <span class="token parameter variable">--help</span> // 查看docker run 的帮助文档
</code></pre>
    <h2>
     <a id="__45">
     </a>
     二、 镜像类
    </h2>
    <h4>
     <a id="1__46">
     </a>
     1. 查看镜像
    </h4>
    <pre><code class="prism language-shell"><span class="token function">docker</span> images
</code></pre>
    <h4>
     <a id="2__50">
     </a>
     2. 搜索镜像
    </h4>
    <pre><code class="prism language-shell"><span class="token function">docker</span> search <span class="token punctuation">[</span>OPTIONS<span class="token punctuation">]</span> 镜像名字
<span class="token function">docker</span> search mysql
</code></pre>
    <h4>
     <a id="3__55">
     </a>
     3. 拉取镜像
    </h4>
    <pre><code class="prism language-shell"><span class="token function">docker</span> pull
<span class="token function">docker</span> pull mysql <span class="token comment">#没有制定版本则默认最新版 </span>
</code></pre>
    <p>
     <a href="https://hub.docker.com/search?type=image" rel="nofollow">
      docker 官方镜像地址
     </a>
    </p>
    <h4>
     <a id="4__61">
     </a>
     4. 运行镜像
    </h4>
    <pre><code class="prism language-shell"><span class="token function">docker</span> run
<span class="token function">docker</span> run tomcat
</code></pre>
    <p>
     运行镜像后可以按
     <code>
      ctrl+c
     </code>
     退出
    </p>
    <h4>
     <a id="5__67">
     </a>
     5. 删除镜像
    </h4>
    <pre><code class="prism language-shell"><span class="token function">docker</span> rmi  镜像名/镜像ID <span class="token comment">#若镜像在运行则会报错</span>
<span class="token function">docker</span> rmi <span class="token parameter variable">-f</span> 镜像名/镜像ID <span class="token comment">#强制删除一个</span>
<span class="token function">docker</span> rmi <span class="token parameter variable">-f</span> mysql

<span class="token function">docker</span> rmi <span class="token parameter variable">-f</span> 镜像名/镜像ID 镜像名/镜像ID 镜像名/镜像ID <span class="token comment">#删除多个 其镜像ID或镜像用用空格隔开即可 </span>
<span class="token function">docker</span> rmi <span class="token parameter variable">-f</span> mysql redis

<span class="token function">docker</span> rmi <span class="token parameter variable">-f</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">docker</span> images <span class="token parameter variable">-aq</span><span class="token variable">)</span></span>
<span class="token comment">#删除全部镜像  -a 意思为显示全部, -q 意思为只显示ID</span>
</code></pre>
    <h4>
     <a id="6__80">
     </a>
     6. 加载镜像
    </h4>
    <pre><code class="prism language-shell"><span class="token function">docker</span> load <span class="token parameter variable">-i</span> 镜像保存文件位置
<span class="token function">docker</span> load myimage.tar
</code></pre>
    <h4>
     <a id="7__86">
     </a>
     7. 保存镜像
    </h4>
    <pre><code class="prism language-shell"><span class="token function">docker</span> save 镜像名/镜像ID <span class="token parameter variable">-o</span> 镜像保存位置和名字
<span class="token function">docker</span> save tomcat <span class="token parameter variable">-o</span> /myimage.tar
</code></pre>
    <h2>
     <a id="_91">
     </a>
     三、容器类
    </h2>
    <h4>
     <a id="1__92">
     </a>
     1. 查看正在运行的容器
    </h4>
    <pre><code class="prism language-shell"><span class="token function">docker</span> <span class="token function">ps</span>
<span class="token function">docker</span> <span class="token function">ps</span> <span class="token parameter variable">-a</span> <span class="token comment"># 查看所有容器</span>
<span class="token comment">#加格式化方式访问，格式会更加清爽</span>
<span class="token function">docker</span> <span class="token function">ps</span> <span class="token parameter variable">--format</span> <span class="token string">"table {<!-- -->{.ID}}<span class="token entity" title="\t">\t</span>{<!-- -->{.Image}}<span class="token entity" title="\t">\t</span>{<!-- -->{.Ports}}<span class="token entity" title="\t">\t</span>{<!-- -->{.Status}}<span class="token entity" title="\t">\t</span>{<!-- -->{.Names}}"</span>
</code></pre>
    <h4>
     <a id="2__99">
     </a>
     2. 创建容器
    </h4>
    <pre><code class="prism language-shell"><span class="token function">docker</span> run <span class="token punctuation">[</span>OPTIONS<span class="token punctuation">]</span> IMAGE <span class="token punctuation">[</span>COMMAND<span class="token punctuation">]</span> <span class="token punctuation">[</span>ARG<span class="token punctuation">..</span>.<span class="token punctuation">]</span>
常用参数：
<span class="token parameter variable">--name</span><span class="token operator">=</span>NAME   <span class="token comment">#为容器指定名字为NAME，不使用的话系统自动为容器命名</span>
-d: 后台运行容器并返回容器ID，也即启动守护式容器<span class="token punctuation">(</span>后台运行<span class="token punctuation">)</span>；
 
-i：以交互模式运行容器，通常与 <span class="token parameter variable">-t</span> 同时使用；
-t：为容器重新分配一个伪输入终端，通常与 <span class="token parameter variable">-i</span> 同时使用；
也即启动交互式容器<span class="token punctuation">(</span>前台有伪终端，等待交互，一般连用，即-it<span class="token punctuation">)</span>；
 
-P: 随机端口映射，大写P
-p: 指定端口映射，小写p

<span class="token comment"># 创建并允许 Nginx 容器</span>
<span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">--name</span> nginx <span class="token parameter variable">-p</span> <span class="token number">80</span>:80 nginx
</code></pre>
    <h4>
     <a id="3__117">
     </a>
     3. 启动守护式容器（后台运行）
    </h4>
    <pre><code class="prism language-shell"><span class="token function">docker</span> run <span class="token parameter variable">-d</span> 容器名
<span class="token function">docker</span> run <span class="token parameter variable">-d</span> redis:6.0.8
</code></pre>
    <h4>
     <a id="4__122">
     </a>
     4. 停止容器
    </h4>
    <pre><code class="prism language-shell"><span class="token function">docker</span> stop 容器名
<span class="token function">docker</span> stop nginx
</code></pre>
    <h4>
     <a id="5__127">
     </a>
     5. 启动容器
    </h4>
    <pre><code class="prism language-shell"><span class="token function">docker</span> start 容器名
<span class="token function">docker</span> start nginx
<span class="token function">docker</span> restart 容器名
<span class="token function">docker</span> restart nginx

</code></pre>
    <h4>
     <a id="6__136">
     </a>
     6. 进入正在运行的容器
    </h4>
    <pre><code class="prism language-shell"><span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> 容器名 bashshell
<span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> nginx /bin/bash```
</code></pre>
    <h4>
     <a id="7__141">
     </a>
     7. 停止容器
    </h4>
    <pre><code class="prism language-shell"><span class="token function">docker</span> stop 容器名
<span class="token function">docker</span> stop nginx
</code></pre>
    <h4>
     <a id="8__146">
     </a>
     8. 强制停止容器
    </h4>
    <pre><code class="prism language-shell"><span class="token function">docker</span> <span class="token function">kill</span> 容器名
<span class="token function">docker</span> <span class="token function">kill</span> nginx
</code></pre>
    <h4>
     <a id="9__151">
     </a>
     9. 删除容器
    </h4>
    <pre><code class="prism language-shell"><span class="token comment">#删除一个</span>
<span class="token function">docker</span> <span class="token function">rm</span> 容器ID  
<span class="token function">docker</span> <span class="token function">rm</span> nginx
<span class="token function">docker</span> <span class="token function">rm</span> <span class="token parameter variable">-f</span> 容器ID  <span class="token comment">#强制删除</span>
<span class="token function">docker</span> <span class="token function">rm</span> <span class="token parameter variable">-f</span> nginx

 
<span class="token comment">#删除多个</span>
<span class="token function">docker</span> <span class="token function">rm</span> <span class="token parameter variable">-f</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">docker</span> <span class="token function">ps</span> <span class="token parameter variable">-a</span> <span class="token parameter variable">-q</span><span class="token variable">)</span></span>
或
<span class="token function">docker</span> <span class="token function">ps</span> <span class="token parameter variable">-a</span> <span class="token parameter variable">-q</span> <span class="token operator">|</span> <span class="token function">xargs</span> <span class="token function">docker</span> <span class="token function">rm</span>
</code></pre>
    <h4>
     <a id="10__165">
     </a>
     10. 查看容器日志
    </h4>
    <pre><code class="prism language-shell"><span class="token function">docker</span> logs 容器名
<span class="token function">docker</span> logs nginx
</code></pre>
    <h4>
     <a id="11__170">
     </a>
     11. 查看容器内运行的进程
    </h4>
    <pre><code class="prism language-shell"><span class="token function">docker</span> <span class="token function">top</span> 容器名
<span class="token function">docker</span> <span class="token function">top</span> nginx
</code></pre>
    <h4>
     <a id="12__176">
     </a>
     12. 查看容器内部细节
    </h4>
    <pre><code class="prism language-shell"><span class="token function">docker</span> inspect 容器名
<span class="token function">docker</span> inspect nginx
</code></pre>
    <h4>
     <a id="13__181">
     </a>
     13. 创建容器数据卷挂载
    </h4>
    <pre><code class="prism language-shell"><span class="token comment"># 创建容器并指定数据卷，注意通过 -v 参数来指定数据卷</span>
<span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">--name</span> nginx <span class="token parameter variable">-p</span> <span class="token number">80</span>:80 <span class="token parameter variable">-v</span> html:/usr/share/nginx/html nginx
</code></pre>
    <h4>
     <a id="14__187">
     </a>
     14. 查看数据卷
    </h4>
    <pre><code class="prism language-shell"><span class="token function">docker</span> volume <span class="token function">ls</span>
</code></pre>
    <h4>
     <a id="15__191">
     </a>
     15. 查看数据卷详情
    </h4>
    <pre><code class="prism language-shell"><span class="token function">docker</span> volume inspect 数据卷名
<span class="token function">docker</span> volume inspect html
</code></pre>
    <h4>
     <a id="16__197">
     </a>
     16. 删除数据卷
    </h4>
    <pre><code class="prism language-shell"><span class="token function">docker</span> volume <span class="token function">rm</span> 数据卷名
<span class="token function">docker</span> volume <span class="token function">rm</span> html
</code></pre>
    <h2>
     <a id="__202">
     </a>
     四. 网络类
    </h2>
    <h4>
     <a id="1__203">
     </a>
     1. 查看网络
    </h4>
    <pre><code class="prism language-shell"><span class="token function">docker</span> network <span class="token function">ls</span>
</code></pre>
    <h4>
     <a id="2__207">
     </a>
     2. 创建网络
    </h4>
    <pre><code class="prism language-shell"><span class="token function">docker</span> network create 网络名
<span class="token function">docker</span> network create hmall
</code></pre>
    <h4>
     <a id="3__213">
     </a>
     3. 查看网络数据源
    </h4>
    <pre><code class="prism language-shell"><span class="token function">docker</span> network inspect 网络名
<span class="token function">docker</span> network inspect hmall
</code></pre>
    <h4>
     <a id="4__218">
     </a>
     4. 删除网络
    </h4>
    <pre><code class="prism language-shell"><span class="token function">docker</span> network <span class="token function">rm</span> 网络名
<span class="token function">docker</span> nerwork <span class="token function">rm</span> hmall
</code></pre>
    <h2>
     <a id="_Docker_compose_223">
     </a>
     五、 Docker compose
    </h2>
    <p>
     <a href="https://docs.docker.com/compose/compose-file/legacy-versions/" rel="nofollow">
      官方文档：基本语法
     </a>
     <br/>
     假设docker run 部署 mysql命令如下：
    </p>
    <pre><code class="prism language-shell"><span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token punctuation">\</span>
  <span class="token parameter variable">--name</span> mysql <span class="token punctuation">\</span>
  <span class="token parameter variable">-p</span> <span class="token number">3306</span>:3306 <span class="token punctuation">\</span>
  <span class="token parameter variable">-e</span> <span class="token assign-left variable">TZ</span><span class="token operator">=</span>Asia/Shanghai <span class="token punctuation">\</span>
  <span class="token parameter variable">-e</span> <span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span><span class="token number">123</span> <span class="token punctuation">\</span>
  <span class="token parameter variable">-v</span> ./mysql/data:/var/lib/mysql <span class="token punctuation">\</span>
  <span class="token parameter variable">-v</span> ./mysql/conf:/etc/mysql/conf.d <span class="token punctuation">\</span>
  <span class="token parameter variable">-v</span> ./mysql/init:/docker-entrypoint-initdb.d <span class="token punctuation">\</span>
  <span class="token parameter variable">--network</span> hmall
  mysql
</code></pre>
    <p>
     那么用docker-compose.yml 文件定义就是：
    </p>
    <pre><code class="prism language-shell">version: <span class="token string">"3.8"</span>

services:
  mysql:
    image: mysql
    container_name: mysql
    ports:
      - <span class="token string">"3306:3306"</span>
    environment:
      TZ: Asia/Shanghai
      MYSQL_ROOT_PASSWORD: <span class="token number">123</span>
    volumes:
      - <span class="token string">"./mysql/conf:/etc/mysql/conf.d"</span>
      - <span class="token string">"./mysql/data:/var/lib/mysql"</span>
    networks:
      - new
networks:
  new:
    name: hmall
</code></pre>
    <h4>
     <a id="1__260">
     </a>
     1. 查看帮助
    </h4>
    <pre><code class="prism language-shell"><span class="token function">docker-compose</span> <span class="token parameter variable">-h</span>
</code></pre>
    <h4>
     <a id="2__264">
     </a>
     2. 启动所有服务
    </h4>
    <pre><code class="prism language-shell"><span class="token function">docker-compose</span> up
<span class="token function">docker-compose</span> up <span class="token parameter variable">-d</span> <span class="token comment"># 后台运行</span>
</code></pre>
    <h4>
     <a id="3__269">
     </a>
     3. 停止并删除容器、网络、卷、镜像。
    </h4>
    <pre><code class="prism language-shell"><span class="token function">docker-compose</span> down
</code></pre>
    <h4>
     <a id="4__273">
     </a>
     4. 进入容器实例内部
    </h4>
    <pre><code class="prism language-shell"><span class="token function">docker-compose</span> <span class="token builtin class-name">exec</span>  yml里面的服务id
</code></pre>
    <h4>
     <a id="5__277">
     </a>
     5. 展示容器
    </h4>
    <pre><code class="prism language-shell">ocker-compose <span class="token function">ps</span>
</code></pre>
    <h4>
     <a id="6__282">
     </a>
     6. 展示进程
    </h4>
    <pre><code class="prism language-shell"><span class="token function">docker-compose</span> <span class="token function">top</span>
</code></pre>
    <h4>
     <a id="7__287">
     </a>
     7. 查看容器输出日志
    </h4>
    <pre><code class="prism language-shell"><span class="token function">docker-compose</span> logs  yml里面的服务id
</code></pre>
    <h4>
     <a id="8__292">
     </a>
     8. 检查配置
    </h4>
    <pre><code class="prism language-shell"><span class="token function">docker-compose</span> config
<span class="token function">docker-compose</span> config <span class="token parameter variable">-q</span> <span class="token comment"># 检查配置，有问题才有输出</span>
</code></pre>
    <h4>
     <a id="9__297">
     </a>
     9. 启动服务
    </h4>
    <pre><code class="prism language-shell"><span class="token function">docker-compose</span> start
</code></pre>
    <h4>
     <a id="10__301">
     </a>
     10. 重启服务
    </h4>
    <pre><code class="prism language-shell"><span class="token function">docker-compose</span> restart
</code></pre>
    <h4>
     <a id="11__305">
     </a>
     11. 停止服务
    </h4>
    <pre><code class="prism language-shell"><span class="token function">docker-compose</span> stop
</code></pre>
    <h2>
     <a id="__309">
     </a>
     六、 其他
    </h2>
    <h4>
     <a id="1__310">
     </a>
     1. 命令别名
    </h4>
    <pre><code class="prism language-shell"><span class="token comment"># 修改/root/.bashrc文件</span>
<span class="token function">vi</span> /root/.bashrc
内容如下：
<span class="token comment"># .bashrc</span>

<span class="token comment"># User specific aliases and functions</span>

<span class="token builtin class-name">alias</span> <span class="token assign-left variable">rm</span><span class="token operator">=</span><span class="token string">'rm -i'</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">cp</span><span class="token operator">=</span><span class="token string">'cp -i'</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">mv</span><span class="token operator">=</span><span class="token string">'mv -i'</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">dps</span><span class="token operator">=</span><span class="token string">'docker ps --format "table {<!-- -->{.ID}}\t{<!-- -->{.Image}}\t{<!-- -->{.Ports}}\t{<!-- -->{.Status}}\t{<!-- -->{.Names}}"'</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">dis</span><span class="token operator">=</span><span class="token string">'docker images'</span>

<span class="token comment"># Source global definitions</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-f</span> /etc/bashrc <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
        <span class="token builtin class-name">.</span> /etc/bashrc
<span class="token keyword">fi</span>
<span class="token comment">#退出</span>
<span class="token builtin class-name">exit</span>
:wq

<span class="token comment">#执行命令使别名生效</span>
<span class="token builtin class-name">source</span> /root/.bashrc
</code></pre>
    <p>
     <strong>
      学习期间经常忘记 docker 的命令记录一下 ~
     </strong>
    </p>
    <p>
     <strong>
      求点赞收藏o(￣▽￣)ｄ~
     </strong>
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f6d305f36333635333434342f:61727469636c652f64657461696c732f313339313330323438" class_="artid" style="display:none">
 </p>
</div>


