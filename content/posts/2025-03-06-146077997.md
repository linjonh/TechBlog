---
layout: post
title: "reactä¸­çš„useContext-ä¸ºä»€ä¹ˆä½¿ç”¨ä¸€"
date: 2025-03-06 19:15:55 +0800
description: "è®©å­ç»„ä»¶æŠŠæ–°çš„æ•°æ®â€œåå‘â€ä¼ å›çˆ¶ç»„ä»¶ï¼Œè®©çˆ¶ç»„ä»¶æ›´æ–°æ•°æ®ã€‚React æä¾›äº† useContextã€‚ï¼Œå­ç»„ä»¶æ— æ³•ç›´æ¥ä¿®æ”¹çˆ¶ç»„ä»¶çš„æ•°æ®ã€‚åœ¨ React ä¸­ï¼Œï¼Œä½†è¿™è¿˜ä¸ç®—å¤ªç³Ÿç³•ã€‚ï¼Œå°±ä¼šå˜å¾—éå¸¸ç—›è‹¦ã€‚"
keywords: "usecontext å­ç»„ä»¶å¯ä»¥æ”¹å˜çˆ¶ç»„ä»¶"
categories: ['React']
tags: ['å‰ç«¯æ¡†æ¶', 'å‰ç«¯', 'React']
artid: "146077997"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146077997
    alt: "reactä¸­çš„useContext-ä¸ºä»€ä¹ˆä½¿ç”¨ä¸€"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146077997
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146077997
cover: https://bing.ee123.net/img/rand?artid=146077997
image: https://bing.ee123.net/img/rand?artid=146077997
img: https://bing.ee123.net/img/rand?artid=146077997
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     reactä¸­çš„useContext--ä¸ºä»€ä¹ˆä½¿ç”¨ï¼ˆä¸€ï¼‰
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-dracula" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h4>
     <a id="React__0">
     </a>
     <strong>
      React çš„æ•°æ®ä¼ é€’æµç¨‹
     </strong>
    </h4>
    <p>
     åœ¨ React ä¸­ï¼Œ
     <strong>
      æ•°æ®ä¼ é€’
     </strong>
     é€šå¸¸æ˜¯
     <strong>
      è‡ªä¸Šè€Œä¸‹
     </strong>
     çš„ï¼Œä¹Ÿå°±æ˜¯
     <strong>
      çˆ¶ç»„ä»¶æŠŠæ•°æ®é€šè¿‡
      <code>
       props
      </code>
      ä¼ é€’ç»™å­ç»„ä»¶
     </strong>
     ï¼Œå­ç»„ä»¶æ— æ³•ç›´æ¥ä¿®æ”¹çˆ¶ç»„ä»¶çš„æ•°æ®ã€‚
     <br/>
     <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://i-blog.csdnimg.cn/direct/90a7b35cb40e4bb4a0d1e787df5eaadf.jpeg#pic_center"/>
    </p>
    <h5>
     <a id="_4">
     </a>
     <strong>
      ä¾‹å­ï¼šçˆ¶ç»„ä»¶å‘å­ç»„ä»¶ä¼ é€’æ•°æ®
     </strong>
    </h5>
    <pre><code class="prism language-jsx">const Parent = () =&gt; {
  const user = { name: "John", age: 24 };
  
  return &lt;Child user={user} /&gt;;
};

const Child = ({ user }) =&gt; {
  return (
    &lt;div&gt;
      &lt;h2&gt;å§“å: {user.name}&lt;/h2&gt;
      &lt;h2&gt;å¹´é¾„: {user.age}&lt;/h2&gt;
    &lt;/div&gt;
  );
};
</code></pre>
    <p>
     <strong>
      é—®é¢˜ä¸å¤§ï¼Œçœ‹èµ·æ¥å¾ˆç®€å•ï¼Œå¯¹å§ï¼Ÿ
     </strong>
    </p>
    <hr/>
    <h4>
     <a id="_25">
     </a>
     <strong>
      å­ç»„ä»¶ä¼ é€’æ•°æ®çš„â€œå™©æ¢¦â€
     </strong>
    </h4>
    <p>
     ä½†å¦‚æœ
     <strong>
      å­ç»„ä»¶éœ€è¦ä¿®æ”¹çˆ¶ç»„ä»¶çš„æ•°æ®
     </strong>
     ï¼Œå°±å¿…é¡»é€šè¿‡
     <strong>
      å›è°ƒå‡½æ•°
     </strong>
     ï¼Œè®©å­ç»„ä»¶æŠŠæ–°çš„æ•°æ®â€œåå‘â€ä¼ å›çˆ¶ç»„ä»¶ï¼Œè®©çˆ¶ç»„ä»¶æ›´æ–°æ•°æ®ã€‚
    </p>
    <h5>
     <a id="_28">
     </a>
     <strong>
      ä¾‹å­ï¼šå­ç»„ä»¶ä¿®æ”¹çˆ¶ç»„ä»¶æ•°æ®
     </strong>
    </h5>
    <pre><code class="prism language-jsx">const Parent = () =&gt; {
  const [user, setUser] = useState({ name: "John", age: 24 });

  // è®©å­ç»„ä»¶è°ƒç”¨è¿™ä¸ªæ–¹æ³•æ¥ä¿®æ”¹ user
  const updateUser = (newName) =&gt; {
    setUser({ ...user, name: newName });
  };

  return &lt;Child user={user} updateUser={updateUser} /&gt;;
};

const Child = ({ user, updateUser }) =&gt; {
  return (
    &lt;div&gt;
      &lt;h2&gt;å§“å: {user.name}&lt;/h2&gt;
      &lt;button onClick={() =&gt; updateUser("Alice")}&gt;æ”¹åä¸º Alice&lt;/button&gt;
    &lt;/div&gt;
  );
};
</code></pre>
    <p>
     è¿™æ ·ï¼Œç‚¹å‡»æŒ‰é’®åï¼Œ
     <code>
      John
     </code>
     å°±ä¼šå˜æˆ
     <code>
      Alice
     </code>
     ï¼Œä½†è¿™è¿˜ä¸ç®—å¤ªç³Ÿç³•ã€‚
    </p>
    <p>
     <strong>
      çœŸæ­£çš„é—®é¢˜æ˜¯ï¼šå¦‚æœæœ‰å¾ˆå¤šå±‚åµŒå¥—æ€ä¹ˆåŠï¼Ÿ
     </strong>
    </p>
    <hr/>
    <h4>
     <a id="_56">
     </a>
     <strong>
      å¤šå±‚åµŒå¥—æ—¶çš„â€œæ•°æ®ä¼ é€’åœ°ç‹±â€
     </strong>
    </h4>
    <p>
     å¦‚æœ
     <code>
      Child
     </code>
     ä¸æ˜¯ç›´æ¥åœ¨
     <code>
      Parent
     </code>
     é‡Œé¢ï¼Œè€Œæ˜¯åµŒå¥—äº†
     <strong>
      å¥½å‡ å±‚
     </strong>
     ï¼Œæ¯ä¸€å±‚éƒ½è¦æ‰‹åŠ¨ä¼ 
     <code>
      props
     </code>
     ï¼Œå°±ä¼šå˜å¾—éå¸¸ç—›è‹¦ã€‚
    </p>
    <h5>
     <a id="_59">
     </a>
     <strong>
      æ•°æ®ä¼ é€’â€œåœ°ç‹±â€ç¤ºä¾‹
     </strong>
    </h5>
    <pre><code class="prism language-jsx">const Parent = () =&gt; {
  const [user, setUser] = useState({ name: "John", age: 24 });

  const updateUser = (newName) =&gt; {
    setUser({ ...user, name: newName });
  };

  return &lt;Level1 user={user} updateUser={updateUser} /&gt;;
};

// ä¸€å±‚åˆä¸€å±‚åœ°ä¼ é€’ props...
const Level1 = ({ user, updateUser }) =&gt; &lt;Level2 user={user} updateUser={updateUser} /&gt;;
const Level2 = ({ user, updateUser }) =&gt; &lt;Level3 user={user} updateUser={updateUser} /&gt;;
const Level3 = ({ user, updateUser }) =&gt; &lt;Level4 user={user} updateUser={updateUser} /&gt;;
const Level4 = ({ user, updateUser }) =&gt; (
  &lt;div&gt;
    &lt;h2&gt;å§“å: {user.name}&lt;/h2&gt;
    &lt;button onClick={() =&gt; updateUser("Alice")}&gt;æ”¹åä¸º Alice&lt;/button&gt;
  &lt;/div&gt;
);
</code></pre>
    <p>
     <strong>
      é—®é¢˜ï¼š
     </strong>
    </p>
    <ul>
     <li>
      ä½ è¦åœ¨
      <strong>
       æ¯ä¸€å±‚ç»„ä»¶
      </strong>
      éƒ½å†™
      <code>
       props
      </code>
      ä¼ é€’ï¼Œä»£ç å˜å¾—å†—é•¿ä¸”éš¾ä»¥ç»´æŠ¤ã€‚
     </li>
     <li>
      ç»„ä»¶è¶Šå¤šï¼Œæ•°æ®ä¼ é€’è¶Šæ··ä¹±ï¼Œå¾ˆå®¹æ˜“å‡ºé”™ã€‚
     </li>
     <li>
      è¿™ä¸ªé—®é¢˜è¢«ç§°ä¸º
      <strong>
       â€œProps Drillingâ€ï¼ˆå±æ€§æŒ–æ˜ï¼‰
      </strong>
      ï¼Œå°±åƒæŒ–çŸ¿ä¸€æ ·ï¼Œæ•°æ®è¦ä¸€å±‚ä¸€å±‚å¾€ä¸‹æŒ–ã€‚
     </li>
    </ul>
    <hr/>
    <h4>
     <a id="_useContext__89">
     </a>
     <strong>
      å¦‚ä½•è§£å†³ï¼Ÿâ€”â€”
      <code>
       useContext
      </code>
      æ¥æ•‘åœºï¼
     </strong>
    </h4>
    <p>
     React æä¾›äº†
     <strong>
      <code>
       useContext
      </code>
     </strong>
     ï¼Œå®ƒå°±åƒä¸€ä¸ª
     <strong>
      å…¨å±€æ•°æ®ä»“åº“
     </strong>
     ï¼Œå¯ä»¥è®©ä»»ä½•ç»„ä»¶
     <strong>
      ç›´æ¥è®¿é—®
     </strong>
     æ•°æ®ï¼Œè€Œä¸éœ€è¦å±‚å±‚
     <code>
      props
     </code>
     ä¼ é€’ã€‚
    </p>
    <h5>
     <a id="_1_Context_92">
     </a>
     <strong>
      æ­¥éª¤ 1ï¼šåˆ›å»º Context
     </strong>
    </h5>
    <pre><code class="prism language-jsx">import { createContext, useState } from "react";

// 1. åˆ›å»º Context
const UserContext = createContext();

// 2. åˆ›å»º Provider ç»„ä»¶
const UserProvider = ({ children }) =&gt; {
  const [user, setUser] = useState({ name: "John", age: 24 });

  const updateUser = (newName) =&gt; {
    setUser({ ...user, name: newName });
  };

  return (
    &lt;UserContext.Provider value={<!-- -->{ user, updateUser }}&gt;
      {children}  {/* è¿™é‡Œçš„ children è®©æ‰€æœ‰å­ç»„ä»¶éƒ½èƒ½è®¿é—®è¿™ä¸ª Context */}
    &lt;/UserContext.Provider&gt;
  );
};

export { UserContext, UserProvider };
</code></pre>
    <hr/>
    <h5>
     <a id="_2_useContext__119">
     </a>
     <strong>
      æ­¥éª¤ 2ï¼šå­ç»„ä»¶ç›´æ¥ç”¨
      <code>
       useContext
      </code>
      è¯»å–æ•°æ®
     </strong>
    </h5>
    <pre><code class="prism language-jsx">import { useContext } from "react";
import { UserContext } from "./UserContext";

const UserProfile = () =&gt; {
  const { user, updateUser } = useContext(UserContext);

  return (
    &lt;div&gt;
      &lt;h2&gt;å§“å: {user.name}&lt;/h2&gt;
      &lt;button onClick={() =&gt; updateUser("Alice")}&gt;æ”¹åä¸º Alice&lt;/button&gt;
    &lt;/div&gt;
  );
};

export default UserProfile;
</code></pre>
    <hr/>
    <h5>
     <a id="_3_Appjs__Provider_140">
     </a>
     <strong>
      æ­¥éª¤ 3ï¼šåœ¨
      <code>
       App.js
      </code>
      é‡ŒåŒ…è£¹ Provider
     </strong>
    </h5>
    <pre><code class="prism language-jsx">import React from "react";
import { UserProvider } from "./UserContext";
import UserProfile from "./UserProfile";

const App = () =&gt; {
  return (
    &lt;UserProvider&gt;
      &lt;UserProfile /&gt;
    &lt;/UserProvider&gt;
  );
};

export default App;
</code></pre>
    <hr/>
    <h4>
     <a id="_useContext__159">
     </a>
     <strong>
      ä¸ºä»€ä¹ˆ
      <code>
       useContext
      </code>
      å¾ˆå¼ºå¤§ï¼Ÿ
     </strong>
    </h4>
    <ol>
     <li>
      <strong>
       é¿å…äº†â€œæ•°æ®ä¼ é€’åœ°ç‹±â€
      </strong>
      ï¼šä¸éœ€è¦å±‚å±‚
      <code>
       props
      </code>
      ä¼ é€’ï¼Œæ‰€æœ‰ç»„ä»¶éƒ½èƒ½ç›´æ¥è®¿é—®æ•°æ®ã€‚
     </li>
     <li>
      <strong>
       ä»£ç æ›´æ¸…æ™°
      </strong>
      ï¼šä¸ç®¡ç»„ä»¶åµŒå¥—å¤šå°‘å±‚ï¼Œéƒ½èƒ½æ–¹ä¾¿åœ°è¯»å–å’Œæ›´æ–°æ•°æ®ã€‚
     </li>
     <li>
      <strong>
       æ€§èƒ½æ›´å¥½
      </strong>
      ï¼šä¸ä¼šå› ä¸º
      <code>
       props
      </code>
      å˜åŒ–å¯¼è‡´æ‰€æœ‰ä¸­é—´ç»„ä»¶éƒ½é‡æ–°æ¸²æŸ“ã€‚
     </li>
    </ol>
    <hr/>
    <h4>
     <a id="_166">
     </a>
     <strong>
      æ€»ç»“
     </strong>
    </h4>
    <ol>
     <li>
      <p>
       <strong>
        ä¼ ç»Ÿæ•°æ®ä¼ é€’æ–¹å¼ï¼ˆ
        <code>
         props
        </code>
        ï¼‰
       </strong>
      </p>
      <ul>
       <li>
        é€‚åˆå°å‹é¡¹ç›®ï¼Œæ•°æ®ä¼ é€’ç®€å•æ—¶ä½¿ç”¨ã€‚
       </li>
       <li>
        ä½†æ˜¯å½“å±‚çº§å˜æ·±æ—¶ï¼Œ
        <code>
         props drilling
        </code>
        è®©ä»£ç å˜å¾—éš¾ä»¥ç»´æŠ¤ã€‚
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        <code>
         useContext
        </code>
        æ–¹å¼
       </strong>
      </p>
      <ul>
       <li>
        é€‚åˆå…±äº«çŠ¶æ€çš„åœºæ™¯ï¼Œæ¯”å¦‚ç”¨æˆ·ä¿¡æ¯ã€ä¸»é¢˜è®¾ç½®ã€è¯­è¨€åˆ‡æ¢ç­‰ã€‚
       </li>
       <li>
        è®©æ‰€æœ‰ç»„ä»¶éƒ½èƒ½
        <strong>
         ç›´æ¥è®¿é—®æ•°æ®
        </strong>
        ï¼Œé¿å…
        <code>
         props
        </code>
        å±‚å±‚ä¼ é€’ã€‚
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        æœ€ä½³å®è·µ
       </strong>
      </p>
      <ul>
       <li>
        å¦‚æœæ•°æ®åªåœ¨
        <strong>
         çˆ¶å­ç»„ä»¶ä¹‹é—´ä¼ é€’
        </strong>
        ï¼Œç”¨
        <code>
         props
        </code>
        å³å¯ã€‚
       </li>
       <li>
        å¦‚æœæ•°æ®éœ€è¦è¢«å¤šä¸ªç»„ä»¶å…±äº«ï¼Œä½¿ç”¨
        <code>
         useContext
        </code>
        æ¥ç®€åŒ–ä»£ç ã€‚
       </li>
      </ul>
     </li>
    </ol>
    <p>
     ğŸš€
     <strong>
      ç°åœ¨ï¼Œä½ å¯ä»¥æ‘†è„±â€œæ•°æ®ä¼ é€’åœ°ç‹±â€ï¼Œç”¨
      <code>
       useContext
      </code>
      è®© React ä»£ç æ›´æ¸…çˆ½ï¼
     </strong>
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f:626c6f672e6373646e2e6e65742f753031323434363936332f:61727469636c652f64657461696c732f313436303737393937" class_="artid" style="display:none">
 </p>
</div>


