---
layout: post
title: "Centos的ElasticSearch安装教程"
date: 2025-03-07 11:51:53 +0800
description: "运行/elasticsearch-plugin install http://43.136.108.62:8080/elasticsearch-analysis-ik-6.5.4.zip。需要在：/etc/sysctl.conf 添加上：vm.max_map_count=262144。再docker exec -it 885 bash进行es容器，进入es容器的bin目录。docker compose up -d拉取，es比较大，需要一点时间。出现这个页面则去查看是否报错。然后再次进入网站，运行。"
keywords: "Centos的ElasticSearch安装教程"
categories: ['智能化运维']
tags: ['运维', '计算机网络', '智能路由器', 'Jenkins', 'Es', 'Elasticsearch', 'Centos']
artid: "146091990"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146091990
    alt: "Centos的ElasticSearch安装教程"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146091990
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146091990
cover: https://bing.ee123.net/img/rand?artid=146091990
image: https://bing.ee123.net/img/rand?artid=146091990
img: https://bing.ee123.net/img/rand?artid=146091990
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Centos的ElasticSearch安装教程
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p style="margin-left:0; margin-right:0; text-align:justify">
     由于我们是用于校园学习，所以最好是关闭防火墙
    </p>
    <p style="margin-left:0; margin-right:0; text-align:justify">
     systemctl stop firewalld
    </p>
    <p style="margin-left:0; margin-right:0; text-align:justify">
     systemctl disable firewalld
    </p>
    <p style="margin-left:0; margin-right:0; text-align:justify">
     个人喜欢安装在opt临时目录，大家可以随意
    </p>
    <p style="margin-left:0; margin-right:0; text-align:justify">
     在opt目录下创建一个es-standonely-docker目录
    </p>
    <p style="margin-left:0; margin-right:0; text-align:justify">
     mkdir es-standonely-docker
    </p>
    <p style="margin-left:0; margin-right:0; text-align:justify">
     <img src="https://i-blog.csdnimg.cn/direct/dce4d667c5f84023aaca6f87eb654048.png"/>
    </p>
    <p style="margin-left:0; margin-right:0; text-align:justify">
     进入目录编辑yml文件
    </p>
    <p style="margin-left:0; margin-right:0; text-align:justify">
     <img src="https://i-blog.csdnimg.cn/direct/3de30f49d8a94c5dafd5f498908be667.png"/>
    </p>
    <blockquote>
     <p style="margin-left:0; margin-right:0; text-align:justify">
      services:
     </p>
     <p style="margin-left:0; margin-right:0; text-align:justify">
      elasticsearch:
     </p>
     <p style="margin-left:0; margin-right:0; text-align:justify">
      image: elasticsearch:6.5.4
     </p>
     <p style="margin-left:0; margin-right:0; text-align:justify">
      restart: always
     </p>
     <p style="margin-left:0; margin-right:0; text-align:justify">
      container_name: elasticsearch
     </p>
     <p style="margin-left:0; margin-right:0; text-align:justify">
      ports:
     </p>
     <p style="margin-left:0; margin-right:0; text-align:justify">
      - 9200:9200
     </p>
     <p style="margin-left:0; margin-right:0; text-align:justify">
      environment:
     </p>
     <p style="margin-left:0; margin-right:0; text-align:justify">
      - JAVA_OPTS=--Xms256m -Xmx1024m
     </p>
     <p style="margin-left:0; margin-right:0; text-align:justify">
      kibana:
     </p>
     <p style="margin-left:0; margin-right:0; text-align:justify">
      image: kibana:6.5.4
     </p>
     <p style="margin-left:0; margin-right:0; text-align:justify">
      restart: always
     </p>
     <p style="margin-left:0; margin-right:0; text-align:justify">
      container_name: kibana
     </p>
     <p style="margin-left:0; margin-right:0; text-align:justify">
      ports:
     </p>
     <p style="margin-left:0; margin-right:0; text-align:justify">
      - 5601:5601
     </p>
     <p style="margin-left:0; margin-right:0; text-align:justify">
      environment:
     </p>
     <p style="margin-left:0; margin-right:0; text-align:justify">
      - elasticsearch_url=http://10.1.1.97:9200
     </p>
     <p style="margin-left:0; margin-right:0; text-align:justify">
      depends_on:
     </p>
     <p style="margin-left:0; margin-right:0; text-align:justify">
      - elasticsearch
     </p>
    </blockquote>
    <p style="margin-left:0; margin-right:0; text-align:justify">
     <img src="https://i-blog.csdnimg.cn/direct/d767bc3e80844bdc9b11e2339e77e770.png"/>
    </p>
    <p style="margin-left:0; margin-right:0; text-align:justify">
     docker compose up -d拉取，es比较大，需要一点时间
    </p>
    <p style="margin-left:0; margin-right:0; text-align:justify">
     <img src="https://i-blog.csdnimg.cn/direct/f796d379dd2a465cadedb286e2a09919.png"/>
    </p>
    <p style="margin-left:0; margin-right:0; text-align:justify">
     docker compose ps
    </p>
    <p style="margin-left:0; margin-right:0; text-align:justify">
     <img src="https://i-blog.csdnimg.cn/direct/79c5b0e4107e4379b814b343bb8c5f97.png"/>
    </p>
    <p style="margin-left:0; margin-right:0; text-align:justify">
     docker cmpose up
    </p>
    <p style="margin-left:0; margin-right:0; text-align:justify">
     <img src="https://i-blog.csdnimg.cn/direct/5f3a807e2ed7473e917d0d7fed42e08a.png"/>
    </p>
    <p style="margin-left:0; margin-right:0; text-align:justify">
     出现这个页面则去查看是否报错
    </p>
    <p style="margin-left:0; margin-right:0; text-align:justify">
     <img src="https://i-blog.csdnimg.cn/direct/9b80993334b74fb692465c4c297fe47a.png"/>
    </p>
    <p style="margin-left:0; margin-right:0; text-align:justify">
     报错
    </p>
    <p style="margin-left:0; margin-right:0; text-align:justify">
     如果我们的es报： max virtual memory areas vm.max_map_count [65530] is too low, increase to at least [262144]
    </p>
    <p style="margin-left:0; margin-right:0; text-align:justify">
     这是虚拟机太小
    </p>
    <p style="margin-left:0; margin-right:0; text-align:justify">
     需要在：/etc/sysctl.conf 添加上：vm.max_map_count=262144
    </p>
    <p style="margin-left:0; margin-right:0; text-align:justify">
     最后启动配置：sysctl -w vm.max_map_count=262144
    </p>
    <p style="margin-left:0; margin-right:0; text-align:justify">
     <img src="https://i-blog.csdnimg.cn/direct/060e6a6bc5c440289cb21146fb52d136.png"/>
    </p>
    <p style="margin-left:0; margin-right:0; text-align:justify">
     <img src="https://i-blog.csdnimg.cn/direct/6e1afdc47fd34d27aa68d7597dc40531.png"/>
    </p>
    <p style="margin-left:0; margin-right:0; text-align:justify">
     然后进入浏览器，输入IP:5601
    </p>
    <p style="margin-left:0; margin-right:0; text-align:justify">
     <img src="https://i-blog.csdnimg.cn/direct/2348d5d74b754d18b5bf176950b16212.png"/>
    </p>
    <p style="margin-left:0; margin-right:0; text-align:justify">
     下载分词器
    </p>
    <p style="margin-left:0; margin-right:0; text-align:justify">
     先docker compose -d后台运行es
    </p>
    <p style="margin-left:0; margin-right:0; text-align:justify">
     然后docker ps可以看见es的容器
    </p>
    <p style="margin-left:0; margin-right:0; text-align:justify">
     再docker exec -it 885 bash进行es容器，进入es容器的bin目录
    </p>
    <p style="margin-left:0; margin-right:0; text-align:justify">
     运行/elasticsearch-plugin install http://43.136.108.62:8080/elasticsearch-analysis-ik-6.5.4.zip
    </p>
    <p style="margin-left:0; margin-right:0; text-align:justify">
     <img src="https://i-blog.csdnimg.cn/direct/afa7d31fa3a949e99d1979274e6bcb4c.png"/>
    </p>
    <p style="margin-left:0; margin-right:0; text-align:justify">
     然后重启ES的容器，让IK分词器生效。
    </p>
    <p style="margin-left:0; margin-right:0; text-align:justify">
     docker restart elasticsearch
    </p>
    <p style="margin-left:0; margin-right:0; text-align:justify">
     然后再次进入网站，运行
    </p>
    <p style="margin-left:0; margin-right:0; text-align:justify">
     <img src="https://i-blog.csdnimg.cn/direct/9143521959b34a838313f20b571ed3d6.png"/>
    </p>
    <p>
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f:2f626c6f672e6373646e2e6e65742f41313131315f3539392f:61727469636c652f64657461696c732f313436303931393930" class_="artid" style="display:none">
 </p>
</div>


