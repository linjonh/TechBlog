---
layout: post
title: "有关于简书页面爬取破解的两个爬虫编写时间20200104"
date: 2023-11-02 15:53:07 +0800
description: "由于课程设计需要编写了一系列爬虫，期中包括：博客园页面+博客园搜索百度搜索+百度文库简书搜索+简书页"
keywords: "简书有反爬机制吗"
categories: ['Python']
tags: ['无标签']
artid: "104037264"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=104037264
    alt: "有关于简书页面爬取破解的两个爬虫编写时间20200104"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=104037264
featuredImagePreview: https://bing.ee123.net/img/rand?artid=104037264
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     有关于简书页面爬取破解的两个爬虫（编写时间20200104）
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-light" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h5>
     <a id="_0">
     </a>
     由于课程设计需要编写了一系列爬虫，期中包括：
    </h5>
    <ul>
     <li>
      博客园页面+博客园搜索
     </li>
     <li>
      百度搜索+百度文库
     </li>
     <li>
      简书搜索+简书页面
     </li>
     <li>
      爱学术搜索
     </li>
    </ul>
    <h6>
     <a id="URL_6">
     </a>
     具体目的就详细说明，反正就搜集一下资料和URL
    </h6>
    <h6>
     <a id="20200104_7">
     </a>
     下为简书的两个爬虫（编写时间20200104）
    </h6>
    <ul>
     <li>
      首先是简书页面爬虫，这个是基础爬虫，并没有什么反爬措施，只要频率别太高一般是可以用的
     </li>
    </ul>
    <pre><code class="prism language-python"><span class="token keyword">import</span> requests
<span class="token keyword">import</span> time
<span class="token keyword">from</span> lxml <span class="token keyword">import</span> etree
<span class="token keyword">import</span> random
<span class="token keyword">import</span> os
<span class="token keyword">import</span> json

headers <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string">"User-Agent"</span><span class="token punctuation">:</span> <span class="token string">"Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36"</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>

<span class="token keyword">def</span> <span class="token function">getContent</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">try</span><span class="token punctuation">:</span>
        re <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">,</span>headers <span class="token operator">=</span> headers<span class="token punctuation">)</span>
        re<span class="token punctuation">.</span>encoding <span class="token operator">=</span> re<span class="token punctuation">.</span>apparent_encoding
        <span class="token comment"># print(re.text)</span>
        html <span class="token operator">=</span> etree<span class="token punctuation">.</span>HTML<span class="token punctuation">(</span>re<span class="token punctuation">.</span>text<span class="token punctuation">)</span>
        title <span class="token operator">=</span> html<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">"//*[@id='__next']/div[1]/div/div/section[1]/h1/text()"</span><span class="token punctuation">)</span>
        content <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        <span class="token keyword">for</span> each <span class="token keyword">in</span> html<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">"//*[@id='__next']/div[1]/div/div/section[1]/article/*"</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            con_temp <span class="token operator">=</span> each<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">"string(.)"</span><span class="token punctuation">)</span>
            <span class="token keyword">if</span>  con_temp<span class="token punctuation">:</span>
                content<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">(</span>con_temp<span class="token punctuation">)</span><span class="token punctuation">)</span>
            con_temp <span class="token operator">=</span> each<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">".//@data-original-src"</span><span class="token punctuation">)</span>

            <span class="token keyword">if</span> con_temp<span class="token punctuation">:</span>
                <span class="token keyword">for</span> ImgIndex <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>con_temp<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                    <span class="token keyword">if</span> ImgIndex<span class="token operator">&gt;</span><span class="token number">0</span> <span class="token operator">and</span> con_temp<span class="token punctuation">[</span>ImgIndex<span class="token punctuation">]</span> <span class="token keyword">is</span> <span class="token operator">not</span> con_temp<span class="token punctuation">[</span>ImgIndex<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
                        content<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">"![]({})"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>con_temp<span class="token punctuation">[</span>ImgIndex<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                    <span class="token keyword">elif</span> ImgIndex<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">:</span>
                        content<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">"![]({})"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>con_temp<span class="token punctuation">[</span>ImgIndex<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                    <span class="token comment"># print(ImgIndex,con_temp[ImgIndex])</span>
        <span class="token keyword">return</span> title<span class="token punctuation">,</span>content
    <span class="token keyword">except</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token string">""</span><span class="token punctuation">,</span><span class="token string">""</span>
<span class="token keyword">def</span> <span class="token function">save</span><span class="token punctuation">(</span>title<span class="token punctuation">,</span>content<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">"{}.md"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>title<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'w'</span><span class="token punctuation">,</span>encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
        f<span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">(</span>title<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">'\n\n'</span><span class="token punctuation">)</span>
        <span class="token keyword">for</span> each <span class="token keyword">in</span> content<span class="token punctuation">:</span>
            f<span class="token punctuation">.</span>write<span class="token punctuation">(</span>each<span class="token operator">+</span><span class="token string">'\n'</span><span class="token punctuation">)</span>


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    url <span class="token operator">=</span> <span class="token string">"https://www.jianshu.com/p/280c6a6f2594"</span>
    url <span class="token operator">=</span> <span class="token string">"https://www.jianshu.com/p/d75211cec9df"</span>
    title<span class="token punctuation">,</span>content <span class="token operator">=</span> getContent<span class="token punctuation">(</span>url<span class="token punctuation">)</span>
    <span class="token keyword">if</span> title <span class="token keyword">is</span> <span class="token operator">not</span> <span class="token string">""</span><span class="token punctuation">:</span>
            save<span class="token punctuation">(</span>title<span class="token punctuation">,</span>content<span class="token punctuation">)</span>
            <span class="token keyword">pass</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"访问出错，请确认下url试试"</span><span class="token punctuation">)</span>
</code></pre>
    <ul>
     <li>
      <p>
       接下来是比较有意思的简书搜索爬虫——简书搜索爬虫
       <br/>
       <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/a83fb4630152004fbca51e3381914d97.png"/>
      </p>
     </li>
     <li>
      <p>
       就是这个搜索框（由于这个爬虫是20年1月4号编写，可能存在一定的局限性）
      </p>
     </li>
     <li>
      <p>
       没错、这个搜索功能的返回值动态的、似乎还有个密码
      </p>
     </li>
     <li>
      <p>
       在请求头中有几样必不可少的东西，分别是：x-csrf-token、_m7e_session_core还有user-agent
      </p>
     </li>
     <li>
      <p>
       user-agent好说，是不变的，但是前两个是动态生成的，是会变的，如何破解它的生成机制就是关键
      </p>
     </li>
     <li>
      <p>
       仔细分析搜索简书分析流程发现简书的搜索分为两个步骤：
      </p>
      <ul>
       <li>
        1.搜索
        <code>
         url = "https://www.jianshu.com/search?q={}&amp;page=1&amp;type=note".format(word)
        </code>
       </li>
       <li>
        2.搜索
        <code>
         url = "https://www.jianshu.com/search/do?q={}&amp;type=note&amp;page={}&amp;order_by=default".format( word, page)
        </code>
       </li>
      </ul>
     </li>
     <li>
      <p>
       第一步search下的这个URL，会返回一个页面，具体长啥样忘了，这个页面里就直接存在期中一个值
       <code>
        head["x-csrf-token"] = str(html.xpath("//*[@name='csrf-token']/@content")[0])
       </code>
       ，就是这个x-csrf-token，我们可以通过xpath获得，另外一个值在cookie中
       <code>
        strCookie = "_m7e_session_core={};".format( re.cookies.get("_m7e_session_core"))
       </code>
       通过类似与字典取值的方法将这个cookie取出来，然后用这两个值二次构造我们的header请求头
      </p>
     </li>
     <li>
      <p>
       第二步do下的这个URL是请求真正的数据的，也是此行的主要目标，用上二次构造好的header重新访问，即可拿到真正的数据，是Json的，接下来就是机械化地分析~数据处理等
      </p>
     </li>
    </ul>
    <h6>
     <a id="PS__79">
     </a>
     PS 更新：文末会指出两个关键值的所在位置
    </h6>
    <pre><code class="prism language-python"><span class="token keyword">import</span> requests
<span class="token keyword">import</span> time
<span class="token keyword">from</span> lxml <span class="token keyword">import</span> etree
<span class="token keyword">import</span> random
<span class="token keyword">import</span> os
<span class="token keyword">import</span> json
<span class="token keyword">import</span> utils<span class="token punctuation">.</span>Utils <span class="token keyword">as</span> sq

headers <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string">"User-Agent"</span><span class="token punctuation">:</span> <span class="token string">"Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36"</span>
<span class="token punctuation">}</span>

proxy_list <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token string">'117.90.131.247:8118'</span><span class="token punctuation">,</span>
    <span class="token string">'171.11.32.77:9999'</span><span class="token punctuation">,</span>
    <span class="token string">'223.199.31.112:9999'</span><span class="token punctuation">,</span>
    <span class="token string">'27.191.234.69:9999'</span><span class="token punctuation">,</span>
    <span class="token string">'223.199.31.5:9999'</span><span class="token punctuation">,</span>
    <span class="token string">'60.167.135.179:9999'</span>
<span class="token punctuation">]</span>


<span class="token comment"># 获取必要的两个访问头x-csrf-token和_m7e_session_core</span>
<span class="token keyword">def</span> <span class="token function">getCookie</span><span class="token punctuation">(</span>word<span class="token punctuation">,</span> head<span class="token punctuation">,</span> proxy<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># 先通过必要的一次访问获取x-csrf-token值和cookie中_m7e_session_core的值，二次构造header</span>
    url <span class="token operator">=</span> <span class="token string">"https://www.jianshu.com/search?q={}&amp;page=1&amp;type=note"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>word<span class="token punctuation">)</span>
    re <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token operator">=</span>url<span class="token punctuation">,</span> headers<span class="token operator">=</span>head<span class="token punctuation">,</span> timeout<span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">,</span> proxies<span class="token operator">=</span>proxy<span class="token punctuation">)</span>
    html <span class="token operator">=</span> etree<span class="token punctuation">.</span>HTML<span class="token punctuation">(</span>re<span class="token punctuation">.</span>text<span class="token punctuation">)</span>
    head<span class="token punctuation">[</span><span class="token string">"x-csrf-token"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token builtin">str</span><span class="token punctuation">(</span>html<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">"//*[@name='csrf-token']/@content"</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    strCookie <span class="token operator">=</span> <span class="token string">"_m7e_session_core={};"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>
        re<span class="token punctuation">.</span>cookies<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"_m7e_session_core"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    head<span class="token punctuation">[</span><span class="token string">"cookie"</span><span class="token punctuation">]</span> <span class="token operator">=</span> strCookie
    <span class="token comment"># print(head)</span>
    <span class="token keyword">return</span> head


<span class="token keyword">def</span> <span class="token function">getContent</span><span class="token punctuation">(</span>word<span class="token punctuation">,</span> head<span class="token punctuation">,</span> proxy<span class="token punctuation">,</span> page<span class="token punctuation">,</span> content<span class="token punctuation">,</span> total_pages<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"当前第{}页"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>page<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">try</span><span class="token punctuation">:</span>
        <span class="token comment"># 用post请求访问真正数据</span>
        url <span class="token operator">=</span> <span class="token string">"https://www.jianshu.com/search/do?q={}&amp;type=note&amp;page={}&amp;order_by=default"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>
            word<span class="token punctuation">,</span> page<span class="token punctuation">)</span>
        re <span class="token operator">=</span> requests<span class="token punctuation">.</span>post<span class="token punctuation">(</span>url<span class="token operator">=</span>url<span class="token punctuation">,</span> headers<span class="token operator">=</span>head<span class="token punctuation">,</span> timeout<span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">,</span> proxies<span class="token operator">=</span>proxy<span class="token punctuation">)</span>

        <span class="token comment"># Json分析</span>
        js <span class="token operator">=</span> json<span class="token punctuation">.</span>loads<span class="token punctuation">(</span>re<span class="token punctuation">.</span>text<span class="token punctuation">)</span>
        <span class="token comment"># 从JSON中获取总页数</span>
        <span class="token keyword">try</span><span class="token punctuation">:</span>
            <span class="token keyword">if</span> total_pages <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
                total_pages <span class="token operator">=</span> js<span class="token punctuation">[</span><span class="token string">"total_pages"</span><span class="token punctuation">]</span>
            data <span class="token operator">=</span> js<span class="token punctuation">[</span><span class="token string">"entries"</span><span class="token punctuation">]</span>
        <span class="token keyword">except</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"total_pages or error"</span><span class="token punctuation">)</span>

        <span class="token keyword">if</span> data<span class="token punctuation">:</span>
            <span class="token keyword">for</span> each <span class="token keyword">in</span> data<span class="token punctuation">:</span>
                temp_title <span class="token operator">=</span> each<span class="token punctuation">[</span><span class="token string">"title"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">"\""</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">"\n"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">")"</span><span class="token punctuation">,</span> <span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">"("</span><span class="token punctuation">,</span>
                                                                                                         <span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span>
                    <span class="token string">"\\"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span>
                temp_content <span class="token operator">=</span> each<span class="token punctuation">[</span><span class="token string">"content"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">"\""</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">"\n"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">")"</span><span class="token punctuation">,</span> <span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">"("</span><span class="token punctuation">,</span>
                                                                                                             <span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span>
                    <span class="token string">"\\"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span>
                temp_url <span class="token operator">=</span> <span class="token string">"https://www.jianshu.com/p/{}"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>each<span class="token punctuation">[</span><span class="token string">"slug"</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
                <span class="token comment"># print("{}\n{}\n{}\n\n".format(temp_title, temp_content, temp_url))</span>
                content<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">[</span>temp_url<span class="token punctuation">,</span> temp_title<span class="token punctuation">,</span> temp_content<span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token comment"># 递归访问下一页</span>
        <span class="token keyword">if</span> total_pages <span class="token operator">!=</span> <span class="token number">0</span> <span class="token operator">and</span> total_pages <span class="token operator">&gt;</span> page <span class="token operator">and</span> page <span class="token operator">&lt;</span> <span class="token number">15</span><span class="token punctuation">:</span>
            time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> getContent<span class="token punctuation">(</span>word<span class="token operator">=</span>word<span class="token punctuation">,</span> head<span class="token operator">=</span>head<span class="token punctuation">,</span> proxy<span class="token operator">=</span>proxy<span class="token punctuation">,</span> page<span class="token operator">=</span>page <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> content<span class="token operator">=</span>content<span class="token punctuation">,</span>
                              total_pages<span class="token operator">=</span>total_pages<span class="token punctuation">)</span>
    <span class="token keyword">except</span> NameError <span class="token keyword">as</span>  e<span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> <span class="token string">"访问出错"</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> content


<span class="token keyword">def</span> <span class="token function">do</span><span class="token punctuation">(</span>word<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># 随机获取代理ip</span>
    proxy <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token string">"http"</span><span class="token punctuation">:</span> random<span class="token punctuation">.</span>choice<span class="token punctuation">(</span>proxy_list<span class="token punctuation">)</span><span class="token punctuation">}</span>
    <span class="token comment"># print(proxy)</span>
    head <span class="token operator">=</span> getCookie<span class="token punctuation">(</span>word<span class="token operator">=</span>word<span class="token punctuation">,</span> head<span class="token operator">=</span>headers<span class="token punctuation">.</span>copy<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> proxy<span class="token operator">=</span>proxy<span class="token punctuation">)</span>
    content <span class="token operator">=</span> getContent<span class="token punctuation">(</span>word<span class="token operator">=</span>word<span class="token punctuation">,</span> head<span class="token operator">=</span>head<span class="token punctuation">,</span> proxy<span class="token operator">=</span>proxy<span class="token punctuation">,</span> page<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> content<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> total_pages<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token comment"># for each in content:</span>
    <span class="token comment">#     print("title={}\ncontent={}\nurl={}\n\n".format(each[0],each[1],each[2]))</span>
    sq<span class="token punctuation">.</span>insert_into_inital_data<span class="token punctuation">(</span>content<span class="token punctuation">,</span> <span class="token string">"简书"</span><span class="token punctuation">)</span>


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    word <span class="token operator">=</span> <span class="token string">"电路SAT"</span>
    do<span class="token punctuation">(</span>word<span class="token punctuation">)</span>

</code></pre>
    <h5>
     <a id="_174">
     </a>
     总结
    </h5>
    <ul>
     <li>
      破解访问机制还是蛮有意思的，拿着自己的爬虫出来溜一圈才发现之前学的不过是皮毛罢了，简书这个还算比较简单的，CSDN这个我到现在还没完全破解，等我有时间了好好研究这个页面加密的问题是个什么情况。
     </li>
     <li>
      刚刚回去翻了翻，似乎简书的搜索功能被关了？好像不太能用了~估计是在更新？还是就挂了？等它好了再尝试给它破解看看~
     </li>
    </ul>
    <hr/>
    <h6>
     <a id="_180">
     </a>
     更新：
    </h6>
    <ul>
     <li>
      搜索功能可以用了，发现似乎没啥变化
     </li>
     <li>
      下面是：x-csrf-token的位置
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/2b99e048cad5def9775228ae85893b61.png"/>
     </li>
     <li>
      下面是 ： _m7e_session_core 的位置
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/aeefe3c37cc7732741bd79d76d2f1b92.png"/>
     </li>
    </ul>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a:2f2f626c6f672e6373646e2e6e65742f73796d75616d75612f:61727469636c652f64657461696c732f313034303337323634" class_="artid" style="display:none">
 </p>
</div>


