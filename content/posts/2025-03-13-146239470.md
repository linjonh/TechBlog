---
layout: post
title: "GPT入门第20课-文心千帆注册与API调用"
date: 2025-03-13 21:51:28 +0800
description: "本文，讲解注册文心千帆步骤，再用ＡＰＩ体验调用流程，调用接口跟OPENAI一样。"
keywords: "【GPT入门】第20课 文心千帆注册与API调用"
categories: ['大模型']
tags: ['Gpt', 'Dubbo']
artid: "146239470"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146239470
    alt: "GPT入门第20课-文心千帆注册与API调用"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146239470
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146239470
cover: https://bing.ee123.net/img/rand?artid=146239470
image: https://bing.ee123.net/img/rand?artid=146239470
img: https://bing.ee123.net/img/rand?artid=146239470
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     【GPT入门】第20课 文心千帆注册与API调用
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
    </p>
    <p>
    </p>
    <h2>
     <a id="_1">
     </a>
     概述
    </h2>
    <p>
     本文，讲解注册文心千帆步骤，再用ＡＰＩ体验调用流程，调用接口跟OPENAI一样
    </p>
    <h2>
     <a id="2__4">
     </a>
     2. 注册文心千帆
    </h2>
    <p>
     申请文心千帆的AK（API Key）和SK（Secret Key），具体步骤如下：
    </p>
    <ol>
     <li>
      <strong>
       注册账号并登录
      </strong>
      ：打开
      <a href="https://cloud.baidu.com/" rel="nofollow">
       百度智能云官网
      </a>
      ，点击“立即使用”，如果没有百度账号则先进行注册，注册完成后登录。首次注册的用户，需要进行实名认证，点击实名认证，填写真实姓名和身份证号码，点击提交即可。首次注册的用户也会赠送一定额度的代金券，无需激活，直接使用，可以作为免费试用。
     </li>
     <li>
      <strong>
       进入应用接入页面
      </strong>
      ：登录成功后，选择千帆大模型平台ModelBuilder，进入控制台。在侧边栏找到“大模型服务”下的“应用接入”，然后选择“创建应用”。
     </li>
     <li>
      <strong>
       创建应用
      </strong>
      ：进入应用创建页面，填写对应的应用名称和简介，这部分仅作为个人应用开发的标识，根据实际需求填写即可。服务配置中，已经默认开启了所有公共的服务，无须选择，直接点击“创建”。
     </li>
     <li>
      <strong>
       获取AK和SK
      </strong>
      ：创建完成之后，在应用列表中，可以看到刚刚创建的应用，其中包含了APP ID、API Key（即AK）和Secret Key（即SK，需点击显示），复制出来，妥善保存。
     </li>
    </ol>
    <p>
     以上步骤可能会根据百度智能云平台的更新而有所变化，如有疑问，可参考百度智能云的官方文档或联系客服人员。
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/4eff6deb956f493986134534f67a5d0d.png">
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/dd6bea69739b4bf6a34ca853dcbded47.png"/>
     </img>
    </p>
    <h2>
     <a id="2_API__15">
     </a>
     2. API 调用
    </h2>
    <p>
     ERNIE_CLIENT_ID，ERNIE_CLIENT_SECRET从文心上一步骤获取，配置到环境变量。
    </p>
    <pre><code class="prism language-c">from langchain_community<span class="token punctuation">.</span>chat_models import QianfanChatEndpoint
from langchain_core<span class="token punctuation">.</span>messages import HumanMessage
import os

<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"os.getenv('ERNIE_CLIENT_ID'):"</span><span class="token punctuation">,</span> <span class="token function">str</span><span class="token punctuation">(</span>os<span class="token punctuation">.</span><span class="token function">getenv</span><span class="token punctuation">(</span><span class="token char">'ERNIE_CLIENT_ID'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"os.getenv('ERNIE_CLIENT_SECRET'):"</span><span class="token punctuation">,</span><span class="token function">str</span><span class="token punctuation">(</span>os<span class="token punctuation">.</span><span class="token function">getenv</span><span class="token punctuation">(</span><span class="token char">'ERNIE_CLIENT_SECRET'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
llm <span class="token operator">=</span> <span class="token function">QianfanChatEndpoint</span><span class="token punctuation">(</span>
    qianfan_ak<span class="token operator">=</span>os<span class="token punctuation">.</span><span class="token function">getenv</span><span class="token punctuation">(</span><span class="token char">'ERNIE_CLIENT_ID'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    qianfan_sk<span class="token operator">=</span>os<span class="token punctuation">.</span><span class="token function">getenv</span><span class="token punctuation">(</span><span class="token char">'ERNIE_CLIENT_SECRET'</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>

messages <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token function">HumanMessage</span><span class="token punctuation">(</span>content<span class="token operator">=</span><span class="token string">"介绍一下你自己"</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span>

ret <span class="token operator">=</span> llm<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>messages<span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span>ret<span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span>ret<span class="token punctuation">.</span>content<span class="token punctuation">)</span>
</code></pre>
    <pre><code>content='您好，我是文心一言，英文名是ERNIE Bot。我能够与人对话互动，回答问题，协助创作，高效便捷地帮助人们获取信息、知识和灵感。' additional_kwargs={'finish_reason': 'content_filter', 'request_id': 'as-q8up34aygp', 'object': 'chat.completion', 'search_info': []} response_metadata={'token_usage': {'prompt_tokens': 2, 'completion_tokens': 49, 'total_tokens': 51}, 'model_name': None, 'finish_reason': 'content_filter', 'id': 'as-q8up34aygp', 'object': 'chat.completion', 'created': 1741865974, 'result': '您好，我是文心一言，英文名是ERNIE Bot。我能够与人对话互动，回答问题，协助创作，高效便捷地帮助人们获取信息、知识和灵感。', 'is_truncated': False, 'need_clear_history': False, 'usage': {'prompt_tokens': 2, 'completion_tokens': 49, 'total_tokens': 51}} id='run-d0bf1076-c614-4cd6-9551-bd716d28dbaf-0' usage_metadata={'input_tokens': 2, 'output_tokens': 49, 'total_tokens': 51}
您好，我是文心一言，英文名是ERNIE Bot。我能够与人对话互动，回答问题，协助创作，高效便捷地帮助人们获取信息、知识和灵感。

</code></pre>
    <pre><code></code></pre>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f:2f626c6f672e6373646e2e6e65742f737061726b5f6465762f:61727469636c652f64657461696c732f313436323339343730" class_="artid" style="display:none">
 </p>
</div>


