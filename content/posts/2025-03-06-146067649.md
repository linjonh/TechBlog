---
layout: post
title: "多源BFS问题01-矩阵"
date: 2025-03-06 13:24:21 +0800
description: "​\t\t然后以此类推直到队列中没有节点为止，如下图所示：（红色表示当前队列中的节点，蓝色表示新一层更新的距离）​\t\t然后这是我们遇到的第一道多源最短路问题，会讲的详细一点！的时候，对于这个 “超级源点” 来说，只知道它本身距离 0。​\t\t有了大概的思路，其实代码也不难写，和单源路径其实差不多。​\t\t但是有一个问题，如果我们按照题目的要求，以值为 1。的元素作为源点的话，会有一个问题，就是当所有的 1。，请输出一个大小相同的矩阵，其中每一个格子是。为源点向外一层一层的拓展，也就是将 0。"
keywords: "【多源BFS问题】01 矩阵"
categories: ['优选算法干碎面食馆']
tags: ['算法', '矩阵', '宽度优先', 'C']
artid: "146067649"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146067649
    alt: "多源BFS问题01-矩阵"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146067649
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146067649
cover: https://bing.ee123.net/img/rand?artid=146067649
image: https://bing.ee123.net/img/rand?artid=146067649
img: https://bing.ee123.net/img/rand?artid=146067649
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     【多源BFS问题】01 矩阵
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-light" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
    </p>
    <br/>
    <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/55974c8974604c5a926941c93be951f9.gif#pic_center" width="300">
     <p>
     </p>
     <h2>
      <a id="542_01__2">
      </a>
      542. 01 矩阵
     </h2>
     <p>
      <a href="https://leetcode.cn/problems/01-matrix/" rel="nofollow">
       542. 01 矩阵
      </a>
     </p>
     <p>
      ​ 给定一个由
      <code>
       0
      </code>
      和
      <code>
       1
      </code>
      组成的矩阵
      <code>
       mat
      </code>
      ，请输出一个大小相同的矩阵，其中每一个格子是
      <code>
       mat
      </code>
      中对应位置元素到最近的
      <code>
       0
      </code>
      的距离。
     </p>
     <p>
      ​ 两个相邻元素间的距离为
      <code>
       1
      </code>
      。
     </p>
     <p>
      <strong>
       示例 1：
      </strong>
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/cf8059c1fe7e4c7b9a96d61353ab5d08.png#pic_center" width="200"/>
     </p>
     <pre><code>输入：mat = [[0,0,0],[0,1,0],[0,0,0]]
输出：[[0,0,0],[0,1,0],[0,0,0]]
</code></pre>
     <p>
      <strong>
       示例 2：
      </strong>
     </p>
     <p>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/9a9655a5e843432ca80477d571c0a8a2.png#pic_center" width="200"/>
     </p>
     <pre><code>输入：mat = [[0,0,0],[0,1,0],[1,1,1]]
输出：[[0,0,0],[0,1,0],[1,2,1]]
</code></pre>
     <p>
      <strong>
       提示：
      </strong>
     </p>
     <ul>
      <li>
       <code>
        m == mat.length
       </code>
      </li>
      <li>
       <code>
        n == mat[i].length
       </code>
      </li>
      <li>
       <code>
        1 &lt;= m, n &lt;= 104
       </code>
      </li>
      <li>
       <code>
        1 &lt;= m * n &lt;= 104
       </code>
      </li>
      <li>
       <code>
        mat[i][j] is either 0 or 1.
       </code>
      </li>
      <li>
       <code>
        mat
       </code>
       中至少有一个
       <code>
        0
       </code>
      </li>
     </ul>
     <hr/>
     <h2>
      <a id="BFS___40">
      </a>
      解题思路：多源
      <code>
       BFS
      </code>
      + 正难则反
     </h2>
     <p>
      ​ 首先这里用暴力解法肯定会超时，所以就不讲解了！
     </p>
     <p>
      ​ 然后这是我们遇到的第一道多源最短路问题，会讲的详细一点！前面简介说过，多源
      <strong>
       <code>
        BFS
       </code>
      </strong>
      来解决多源最短路问题
      <strong>
       <mark>
        需要满足边权为一
       </mark>
      </strong>
      的条件，很明显这道题是符合的，所以按照下面的两步走：
     </p>
     <ol>
      <li>
       <mark>
        <strong>
         将所有的源点加入到队列中
        </strong>
       </mark>
      </li>
      <li>
       <mark>
        <strong>
         一层一层的往外拓展
        </strong>
       </mark>
      </li>
     </ol>
     <p>
      ​ 但是有一个问题，如果我们按照题目的要求，以值为
      <strong>
       <code>
        1
       </code>
      </strong>
      的元素作为源点的话，会有一个问题，就是当所有的
      <strong>
       <code>
        1
       </code>
      </strong>
      作为源点去向外拓展找到
      <strong>
       <code>
        0
       </code>
      </strong>
      的时候，对于这个 “超级源点” 来说，只知道它本身距离
      <strong>
       <code>
        0
       </code>
      </strong>
      的长度，而并不知道里面每个
      <strong>
       <code>
        1
       </code>
      </strong>
      元素距离
      <strong>
       <code>
        0
       </code>
      </strong>
      的长度，这就麻烦了，如下图所示：
     </p>
     <p>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/55091dd17a60476c97ab7e72fdbb2cd0.png#pic_center" width="400"/>
     </p>
     <p>
      ​ 既然遇到这个问题，我们就换个思路，正难则反：
      <strong>
       <mark>
        以值为
        <code>
         0
        </code>
        的元素作为源点向外拓展更新距离
       </mark>
      </strong>
      ！为什么这样子可以呢，因为以
      <strong>
       <code>
        0
       </code>
      </strong>
      作为源点的话，我们是知道
      <strong>
       <code>
        0
       </code>
      </strong>
      元素最后的距离其实就是
      <strong>
       <code>
        0
       </code>
      </strong>
      ，而向外拓展每一层又可以更新
      <strong>
       <code>
        1
       </code>
      </strong>
      距离当前的距离，一举两得！
     </p>
     <p>
      ​ 所以我们只需要
      <strong>
       <mark>
        创建一个二维数组
        <code>
         distance
        </code>
        表示每个元素距离
        <code>
         0
        </code>
        元素的最近距离
       </mark>
      </strong>
      ，然后
      <strong>
       <mark>
        将
        <code>
         0
        </code>
        位置的距离都初始化为
        <code>
         0
        </code>
       </mark>
      </strong>
      ，而将
      <strong>
       <mark>
        其它位置的距离都初始化为
        <code>
         -1
        </code>
        即可
       </mark>
      </strong>
      ，这样子后面我们也
      <strong>
       <mark>
        不需要使用
        <code>
         used
        </code>
        数组
       </mark>
      </strong>
      来标记走过的元素了，因为可以通过判断是否为
      <strong>
       <code>
        -1
       </code>
      </strong>
      来决定当前位置是否走过！如下图所示：
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/a7b7b5f91fd849f28cf6e1032513963e.png#pic_center" width="500"/>
     </p>
     <p>
      ​ 之后以
      <strong>
       <code>
        0
       </code>
      </strong>
      为源点向外一层一层的拓展，也就是将
      <strong>
       <code>
        0
       </code>
      </strong>
      位置都入队列，然后进行
      <strong>
       <code>
        bfs
       </code>
      </strong>
      操作，然后下一层的距离就是当前层距离加一了。下图是向外拓展一层的情况：
     </p>
     <p>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/a87dc05479a14faf955c84780564bcc5.png#pic_center" width="500"/>
     </p>
     <p>
      ​ 然后以此类推直到队列中没有节点为止，如下图所示：（红色表示当前队列中的节点，蓝色表示新一层更新的距离）
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/cf589c06e6244546b9417c04ca095d01.png#pic_center" width="500"/>
     </p>
     <p>
      ​ 有了大概的思路，其实代码也不难写，和单源路径其实差不多
     </p>
     <pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{<!-- --></span>
<span class="token keyword">private</span><span class="token operator">:</span>
    <span class="token keyword">int</span> dx<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> dy<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;&gt;</span> <span class="token function">updateMatrix</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;&gt;</span><span class="token operator">&amp;</span> mat<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">int</span> m <span class="token operator">=</span> mat<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> n <span class="token operator">=</span> mat<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;&gt;</span> <span class="token function">distance</span><span class="token punctuation">(</span>m<span class="token punctuation">,</span> <span class="token generic-function"><span class="token function">vector</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 初始化距离矩阵为-1</span>

        <span class="token comment">// 正难则反：将0的位置都入队列，并且将其距离设置为0</span>
        queue<span class="token operator">&lt;</span>pair<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">&gt;&gt;</span> bfs<span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> m<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> <span class="token operator">++</span>j<span class="token punctuation">)</span>
            <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>mat<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
                <span class="token punctuation">{<!-- --></span>
                    distance<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                    bfs<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>i<span class="token punctuation">,</span> j<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>bfs<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token comment">// 一层一层往外拓展，更新距离</span>
            <span class="token keyword">int</span> size <span class="token operator">=</span> bfs<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">while</span><span class="token punctuation">(</span>size<span class="token operator">--</span><span class="token punctuation">)</span>
            <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">auto</span> <span class="token punctuation">[</span>x<span class="token punctuation">,</span> y<span class="token punctuation">]</span> <span class="token operator">=</span> bfs<span class="token punctuation">.</span><span class="token function">front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                bfs<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                
                <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">4</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>
                <span class="token punctuation">{<!-- --></span>
                    <span class="token keyword">int</span> newx <span class="token operator">=</span> x <span class="token operator">+</span> dx<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> newy <span class="token operator">=</span> y <span class="token operator">+</span> dy<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
                    <span class="token keyword">if</span><span class="token punctuation">(</span>newx <span class="token operator">&gt;=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> newy <span class="token operator">&gt;=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> newx <span class="token operator">&lt;</span> m <span class="token operator">&amp;&amp;</span> newy <span class="token operator">&lt;</span> n <span class="token operator">&amp;&amp;</span> distance<span class="token punctuation">[</span>newx<span class="token punctuation">]</span><span class="token punctuation">[</span>newy<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
                    <span class="token punctuation">{<!-- --></span>
                        bfs<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>newx<span class="token punctuation">,</span> newy<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        distance<span class="token punctuation">[</span>newx<span class="token punctuation">]</span><span class="token punctuation">[</span>newy<span class="token punctuation">]</span> <span class="token operator">=</span> distance<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span>y<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// 只需要在当前距离上加一即可</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> distance<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
     <p>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/55974c8974604c5a926941c93be951f9.gif#pic_center" width="300"/>
     </p>
    </img>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f:2f626c6f672e6373646e2e6e65742f6c6972656e646164612f:61727469636c652f64657461696c732f313436303637363439" class_="artid" style="display:none">
 </p>
</div>


