---
layout: post
title: "Java实现将Markdown格式文本转换为纯文本"
date: 2025-03-16 23:29:27 +0800
description: "Markdown格式文本转换为纯文本"
keywords: "Java实现【将Markdown格式文本转换为纯文本】"
categories: ['未分类']
tags: ['Java']
artid: "146303787"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146303787
    alt: "Java实现将Markdown格式文本转换为纯文本"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146303787
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146303787
cover: https://bing.ee123.net/img/rand?artid=146303787
image: https://bing.ee123.net/img/rand?artid=146303787
img: https://bing.ee123.net/img/rand?artid=146303787
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Java实现【将Markdown格式文本转换为纯文本】
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atelier-sulphurpool-light" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
     以下是两种在 Java 中实现 Markdown 转纯文本的主流方法，根据需求选择适合的方案：
    </p>
    <hr/>
    <h4>
     <a id="_5">
     </a>
     方法一：使用正则表达式（轻量级方案）
    </h4>
    <p>
     <strong>
      适用于简单 Markdown 内容的快速转换
     </strong>
    </p>
    <pre><code class="prism language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>regex<span class="token punctuation">.</span></span><span class="token class-name">Pattern</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MarkdownToText</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 定义 Markdown 常见语法正则表达式</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Pattern</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token constant">MARKDOWN_PATTERNS</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">Pattern</span><span class="token punctuation">.</span><span class="token function">compile</span><span class="token punctuation">(</span><span class="token string">"\\[(.*?)\\]\\(.*?\\)"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>     <span class="token comment">// 链接 [text](url)</span>
        <span class="token class-name">Pattern</span><span class="token punctuation">.</span><span class="token function">compile</span><span class="token punctuation">(</span><span class="token string">"!\\[.*?\\]\\(.*?\\)"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>      <span class="token comment">// 图片 ![alt](url)</span>
        <span class="token class-name">Pattern</span><span class="token punctuation">.</span><span class="token function">compile</span><span class="token punctuation">(</span><span class="token string">"`{3,}[\\s\\S]*?`{3,}"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>     <span class="token comment">// 代码块 ```code```</span>
        <span class="token class-name">Pattern</span><span class="token punctuation">.</span><span class="token function">compile</span><span class="token punctuation">(</span><span class="token string">"`(.+?)`"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                 <span class="token comment">// 行内代码 `code`</span>
        <span class="token class-name">Pattern</span><span class="token punctuation">.</span><span class="token function">compile</span><span class="token punctuation">(</span><span class="token string">"^[#]{1,6}\\s*"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            <span class="token comment">// 标题 # ## ###</span>
        <span class="token class-name">Pattern</span><span class="token punctuation">.</span><span class="token function">compile</span><span class="token punctuation">(</span><span class="token string">"\\*{1,2}(.*?)\\*{1,2}"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token comment">// 加粗/斜体 *text*</span>
        <span class="token class-name">Pattern</span><span class="token punctuation">.</span><span class="token function">compile</span><span class="token punctuation">(</span><span class="token string">"~{2}(.*?)~{2}"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            <span class="token comment">// 删除线 ~~text~~</span>
        <span class="token class-name">Pattern</span><span class="token punctuation">.</span><span class="token function">compile</span><span class="token punctuation">(</span><span class="token string">"^\\s*[-*+]\\s"</span><span class="token punctuation">,</span> <span class="token class-name">Pattern</span><span class="token punctuation">.</span><span class="token constant">MULTILINE</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 无序列表项</span>
        <span class="token class-name">Pattern</span><span class="token punctuation">.</span><span class="token function">compile</span><span class="token punctuation">(</span><span class="token string">"^\\s*\\d+\\.\\s"</span><span class="token punctuation">,</span> <span class="token class-name">Pattern</span><span class="token punctuation">.</span><span class="token constant">MULTILINE</span><span class="token punctuation">)</span> <span class="token comment">// 有序列表项</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">String</span> <span class="token function">convertToText</span><span class="token punctuation">(</span><span class="token class-name">String</span> markdown<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>markdown <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> markdown<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token string">""</span><span class="token punctuation">;</span>

        <span class="token comment">// 逐步替换所有 Markdown 语法</span>
        <span class="token class-name">String</span> text <span class="token operator">=</span> markdown<span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Pattern</span> pattern <span class="token operator">:</span> <span class="token constant">MARKDOWN_PATTERNS</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            text <span class="token operator">=</span> pattern<span class="token punctuation">.</span><span class="token function">matcher</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">"$1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// 处理换行和多余空格</span>
        <span class="token keyword">return</span> text<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">"\n{3,}"</span><span class="token punctuation">,</span> <span class="token string">"\n\n"</span><span class="token punctuation">)</span>   <span class="token comment">// 多个空行合并为两个</span>
                <span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">" {2,}"</span><span class="token punctuation">,</span> <span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// 多个空格合并为一个</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">String</span> md <span class="token operator">=</span> <span class="token string">"# Hello World!\n"</span> <span class="token operator">+</span>
                <span class="token string">"This is **bold** and *italic* text.\n"</span> <span class="token operator">+</span>
                <span class="token string">"[Link](https://example.com)"</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token function">convertToText</span><span class="token punctuation">(</span>md<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">/* 输出：
        Hello World!
        This is bold and italic text.
        Link
         */</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     <strong>
      优点
     </strong>
     ：零依赖、轻量快速
     <br/>
     <strong>
      缺点
     </strong>
     ：无法处理复杂嵌套结构
    </p>
    <hr/>
    <h4>
     <a id="_Flexmarkjava__61">
     </a>
     方法二：使用 Flexmark-java 库（专业方案）
    </h4>
    <p>
     <strong>
      推荐用于处理复杂 Markdown 文档
     </strong>
    </p>
    <h5>
     <a id="1_Maven_65">
     </a>
     1. 添加依赖（Maven）
    </h5>
    <p>
     xml
    </p>
    <p>
     复制
    </p>
    <pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.vladsch.flexmark<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>flexmark-all<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>0.64.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre>
    <p>
     运行 HTML
    </p>
    <h5>
     <a id="2__81">
     </a>
     2. 转换代码实现
    </h5>
    <p>
     java
    </p>
    <p>
     复制
    </p>
    <pre><code class="prism language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>vladsch<span class="token punctuation">.</span>flexmark<span class="token punctuation">.</span>ast<span class="token punctuation">.</span></span><span class="token class-name">Node</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>vladsch<span class="token punctuation">.</span>flexmark<span class="token punctuation">.</span>ext<span class="token punctuation">.</span>gfm<span class="token punctuation">.</span>tables<span class="token punctuation">.</span></span><span class="token class-name">TablesExtension</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>vladsch<span class="token punctuation">.</span>flexmark<span class="token punctuation">.</span>html<span class="token punctuation">.</span></span><span class="token class-name">HtmlRenderer</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>vladsch<span class="token punctuation">.</span>flexmark<span class="token punctuation">.</span>parser<span class="token punctuation">.</span></span><span class="token class-name">Parser</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>vladsch<span class="token punctuation">.</span>flexmark<span class="token punctuation">.</span>util<span class="token punctuation">.</span>data<span class="token punctuation">.</span></span><span class="token class-name">MutableDataSet</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>jsoup<span class="token punctuation">.</span></span><span class="token class-name">Jsoup</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Arrays</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MarkdownToTextPro</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">String</span> <span class="token function">convert</span><span class="token punctuation">(</span><span class="token class-name">String</span> markdown<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>markdown <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> markdown<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token string">""</span><span class="token punctuation">;</span>

        <span class="token comment">// 配置解析器（支持表格等扩展）</span>
        <span class="token class-name">MutableDataSet</span> options <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MutableDataSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        options<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token class-name">Parser</span><span class="token punctuation">.</span><span class="token constant">EXTENSIONS</span><span class="token punctuation">,</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token class-name">TablesExtension</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 构建解析器和渲染器</span>
        <span class="token class-name">Parser</span> parser <span class="token operator">=</span> <span class="token class-name">Parser</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">HtmlRenderer</span> renderer <span class="token operator">=</span> <span class="token class-name">HtmlRenderer</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 将 Markdown 解析为 HTML</span>
        <span class="token class-name">Node</span> document <span class="token operator">=</span> parser<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>markdown<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> html <span class="token operator">=</span> renderer<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 使用 JSoup 去除 HTML 标签</span>
        <span class="token keyword">return</span> <span class="token class-name">Jsoup</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>html<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">"\\s+"</span><span class="token punctuation">,</span> <span class="token string">" "</span><span class="token punctuation">)</span>   <span class="token comment">// 合并多余空格</span>
                <span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">String</span> md <span class="token operator">=</span> <span class="token string">"| Tables   | Are           | Cool  |\n"</span> <span class="token operator">+</span>
                <span class="token string">"|----------|:-------------:|------:|\n"</span> <span class="token operator">+</span>
                <span class="token string">"| col 1 is | left-aligned | $1600 |\n"</span> <span class="token operator">+</span>
                <span class="token string">"| col 2 is | centered      |   $12 |"</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token function">convert</span><span class="token punctuation">(</span>md<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">/* 输出：
        Tables Are Cool col 1 is left-aligned $1600 col 2 is centered $12
         */</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     <strong>
      优点
     </strong>
     ：
    </p>
    <ul>
     <li>
      准确处理复杂结构（表格、嵌套列表等）
     </li>
     <li>
      保留内容逻辑顺序
     </li>
     <li>
      支持 Markdown 扩展语法
     </li>
    </ul>
    <hr/>
    <h4>
     <a id="_141">
     </a>
     方案对比
    </h4>
    <table>
     <thead>
      <tr>
       <th align="left">
        特性
       </th>
       <th align="left">
        正则方案
       </th>
       <th align="left">
        Flexmark 方案
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td align="left">
        依赖项
       </td>
       <td align="left">
        无
       </td>
       <td align="left">
        需要引入 JAR
       </td>
      </tr>
      <tr>
       <td align="left">
        处理速度
       </td>
       <td align="left">
        极快
       </td>
       <td align="left">
        较快
       </td>
      </tr>
      <tr>
       <td align="left">
        语法支持
       </td>
       <td align="left">
        基础语法
       </td>
       <td align="left">
        完整语法+扩展
       </td>
      </tr>
      <tr>
       <td align="left">
        代码复杂度
       </td>
       <td align="left">
        简单
       </td>
       <td align="left">
        中等
       </td>
      </tr>
      <tr>
       <td align="left">
        处理嵌套结构能力
       </td>
       <td align="left">
        有限
       </td>
       <td align="left">
        优秀
       </td>
      </tr>
      <tr>
       <td align="left">
        输出可读性
       </td>
       <td align="left">
        一般
       </td>
       <td align="left">
        优秀
       </td>
      </tr>
     </tbody>
    </table>
    <hr/>
    <h4>
     <a id="_154">
     </a>
     使用建议
    </h4>
    <ol>
     <li>
      <strong>
       简单内容处理
      </strong>
      ：如果只需要处理标题、链接等基础语法，选择正则方案
     </li>
     <li>
      <strong>
       复杂文档转换
      </strong>
      ：如果需要处理表格、代码块、数学公式等复杂内容，使用 Flexmark 方案
     </li>
     <li>
      <strong>
       保留格式结构
      </strong>
      ：若需要保留段落换行等格式，可调整正则方案中的换行处理逻辑
     </li>
    </ol>
    <p>
     对于需要更高精度的转换，可以结合两种方法：先用 Flexmark 转换，再通过正则处理特殊字符。
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f79323733363337353634322f:61727469636c652f64657461696c732f313436333033373837" class_="artid" style="display:none">
 </p>
</div>


