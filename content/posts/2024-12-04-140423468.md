---
layout: post
title: "小程序如何生成自己想要的各类小程序码,现成的方法送给你"
date: 2024-12-04 17:42:11 +0800
description: "如何生成自己想要的小程序码，扫码进入具体商品，文章或者应用，这几个方法好用方便。"
keywords: "小程序如何生成自己想要的各类小程序码，现成的方法送给你"
categories: ['未分类']
tags: ['小程序']
artid: "140423468"
image:
  path: https://api.vvhan.com/api/bing?rand=sj&artid=140423468
  alt: "小程序如何生成自己想要的各类小程序码,现成的方法送给你"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=140423468
featuredImagePreview: https://bing.ee123.net/img/rand?artid=140423468
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     小程序如何生成自己想要的各类小程序码，现成的方法送给你
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
     我们在微信小程序后台下载的小程序码只有一个，那么遇到各类的文章页面，还有产品页面，又或者开发的各类应用页面如何生成各自的小程序码呢，今天呢，小编直接上现成的代码，改几个参数就能用。
    </p>
    <h3>
     <a id="_1">
     </a>
     话不多说，代码先上：
    </h3>
    <pre><code class="prism language-css"><span class="token selector">function getCode($page,$scene,$orcname)</span>
    <span class="token punctuation">{<!-- --></span>
    	$appid = <span class="token string">'wx**************42b'</span><span class="token punctuation">;</span>
    	$appsecret = <span class="token string">'288d******************d54'</span><span class="token punctuation">;</span>
        $access_token = <span class="token function">accessToken</span><span class="token punctuation">(</span>$appid<span class="token punctuation">,</span> $appsecret<span class="token punctuation">)</span><span class="token punctuation">;</span>
        $width = 430<span class="token punctuation">;</span>//二维码宽度
        $page = $page<span class="token punctuation">;</span>//小程序路径<span class="token punctuation">(</span>pages/index/index<span class="token punctuation">)</span>
        $scene = $scene<span class="token punctuation">;</span>//携带的参数（?id=1&amp;tag=2）

        $wx_api = <span class="token string">"https://api.weixin.qq.com/wxa/getwxacodeunlimit?access_token="</span>.$access_token<span class="token punctuation">;</span>
        $data = [
            <span class="token string">'page'</span>      =&gt; $page<span class="token punctuation">,</span>
            <span class="token string">'scene'</span>     =&gt; $scene<span class="token punctuation">,</span>
            <span class="token string">'width'</span>     =&gt; $width<span class="token punctuation">,</span>
        ]<span class="token punctuation">;</span>

        $post_data  = json_<span class="token function">encode</span><span class="token punctuation">(</span>$data<span class="token punctuation">)</span><span class="token punctuation">;</span>

        $result     = api_notice_<span class="token function">increment</span><span class="token punctuation">(</span>$wx_api<span class="token punctuation">,</span> $post_data<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token selector">//获取微信小程序二维码
        if(!$result)</span><span class="token punctuation">{<!-- --></span>
            return false<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        $imgUrl = <span class="token string">'data:image/jpg;base64,'</span>.base64_<span class="token function">encode</span><span class="token punctuation">(</span>$result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    	//$img_base64 = base64_<span class="token function">encode</span><span class="token punctuation">(</span>$result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    	//<span class="token function">header</span><span class="token punctuation">(</span><span class="token string">"Content-type: image/jpg;charset=gb2312"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        //echo $output1<span class="token punctuation">;</span>
        //echo <span class="token string">'&lt;img src="'</span> . $imgUrl . <span class="token string">'"&gt;'</span><span class="token punctuation">;</span>

        $url = $orcname<span class="token punctuation">;</span>   // 设定不同的小程序码名称
        file_put_<span class="token function">contents</span><span class="token punctuation">(</span>$url<span class="token punctuation">,</span> $result<span class="token punctuation">,</span> true<span class="token punctuation">)</span><span class="token punctuation">;</span>  //将生成的小程序码保存到本地
    <span class="token punctuation">}</span>

    <span class="token selector">function accessToken($APP_ID, $SECRET)</span>
    <span class="token punctuation">{<!-- --></span>
        $token_access_url = <span class="token string">"https://api.weixin.qq.com/cgi-bin/token?grant_type=client_credential&amp;appid="</span> . $APP_ID . <span class="token string">"&amp;secret="</span> . $SECRET<span class="token punctuation">;</span>
        $res = file_get_<span class="token function">contents</span><span class="token punctuation">(</span>$token_access_url<span class="token punctuation">)</span><span class="token punctuation">;</span>
        $result = json_<span class="token function">decode</span><span class="token punctuation">(</span>$res<span class="token punctuation">,</span> true<span class="token punctuation">)</span><span class="token punctuation">;</span>
        $access_token = $result[<span class="token string">'access_token'</span>]<span class="token punctuation">;</span>
        return $access_token<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token selector">function api_notice_increment($url, $data)</span>
    <span class="token punctuation">{<!-- --></span>
        $ch = curl_<span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        $header = <span class="token function">array</span><span class="token punctuation">(</span><span class="token string">"Accept-Charset: utf-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        curl_<span class="token function">setopt</span><span class="token punctuation">(</span>$ch<span class="token punctuation">,</span> CURLOPT_URL<span class="token punctuation">,</span> $url<span class="token punctuation">)</span><span class="token punctuation">;</span>
        curl_<span class="token function">setopt</span><span class="token punctuation">(</span>$ch<span class="token punctuation">,</span> CURLOPT_CUSTOMREQUEST<span class="token punctuation">,</span> <span class="token string">"POST"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        curl_<span class="token function">setopt</span><span class="token punctuation">(</span>$ch<span class="token punctuation">,</span> CURLOPT_SSL_VERIFYPEER<span class="token punctuation">,</span> FALSE<span class="token punctuation">)</span><span class="token punctuation">;</span>
        curl_<span class="token function">setopt</span><span class="token punctuation">(</span>$ch<span class="token punctuation">,</span> CURLOPT_SSL_VERIFYHOST<span class="token punctuation">,</span> FALSE<span class="token punctuation">)</span><span class="token punctuation">;</span>
        curl_<span class="token function">setopt</span><span class="token punctuation">(</span>$ch<span class="token punctuation">,</span> CURLOPT_HTTPHEADER<span class="token punctuation">,</span> $header<span class="token punctuation">)</span><span class="token punctuation">;</span>
        curl_<span class="token function">setopt</span><span class="token punctuation">(</span>$ch<span class="token punctuation">,</span> CURLOPT_USERAGENT<span class="token punctuation">,</span> <span class="token string">'Mozilla/5.0 (compatible; MSIE 5.01; Windows NT 5.0)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        curl_<span class="token function">setopt</span><span class="token punctuation">(</span>$ch<span class="token punctuation">,</span> CURLOPT_FOLLOWLOCATION<span class="token punctuation">,</span> 1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        curl_<span class="token function">setopt</span><span class="token punctuation">(</span>$ch<span class="token punctuation">,</span> CURLOPT_AUTOREFERER<span class="token punctuation">,</span> 1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        curl_<span class="token function">setopt</span><span class="token punctuation">(</span>$ch<span class="token punctuation">,</span> CURLOPT_POSTFIELDS<span class="token punctuation">,</span> $data<span class="token punctuation">)</span><span class="token punctuation">;</span>
        curl_<span class="token function">setopt</span><span class="token punctuation">(</span>$ch<span class="token punctuation">,</span> CURLOPT_RETURNTRANSFER<span class="token punctuation">,</span> true<span class="token punctuation">)</span><span class="token punctuation">;</span>
        $tmpInfo = curl_<span class="token function">exec</span><span class="token punctuation">(</span>$ch<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token selector">if (curl_errno($ch))</span> <span class="token punctuation">{<!-- --></span>
            return false<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token selector">else</span><span class="token punctuation">{<!-- --></span>
            // var_<span class="token function">dump</span><span class="token punctuation">(</span>$tmpInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>
            return $tmpInfo<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

</code></pre>
<p>
放完方法代码，可不能少了对如何使用的讲解，下面小编就来讲讲如何调用：
</p>
<h3>
<a id="_71">
</a>
代码如何使用
</h3>
<pre><code class="prism language-css">$page=<span class="token string">'pagesExt/mingpian/zhiweizhanshi'</span><span class="token punctuation">;</span>
$scene=<span class="token string">'id\_'</span>.$row[<span class="token string">'id'</span>]<span class="token punctuation">;</span>
$orcname=<span class="token string">'yonggong'</span>.$row[<span class="token string">'id'</span>].<span class="token string">'.jpg'</span><span class="token punctuation">;</span>
<span class="token function">getCode</span><span class="token punctuation">(</span>$page<span class="token punctuation">,</span>$scene<span class="token punctuation">,</span>$orcname<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>
getCode(
<span class="katex--inline">
<span class="katex">
<span class="katex-mathml">
p

         a


         g


         e


         ,



        page,
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.625em; vertical-align: -0.1944em;">
         </span>
         <span class="mord mathnormal">
          p
         </span>
         <span class="mord mathnormal">
          a
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0359em;">
          g
         </span>
         <span class="mord mathnormal">
          e
         </span>
         <span class="mpunct">
          ,
         </span>
        </span>
       </span>
      </span>
     </span>
     scene,$orcname);
     <br/>
     要传三个参数：
     <br/>
     $page=‘pagesExt/mingpian/zhiweizhanshi’;
     <br/>
     $page就是访问的具体小程序页面
     <br/>
     <span class="katex--inline">
      KaTeX parse error: Expected group after '_' at position 10: scene='id_̲'.
     </span>
     row[‘id’];
     <br/>
     $scene为传递的参数，这里根据具体规则，可以是id=什么，小编这边小程序这边接受代码中是以“_”来区分的，这块各位使用的时候要注意，根据自己写的解析函数来定。
     <br/>
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        o


         r


         c


         n


         a


         m


         e



          =


          ′



         y


         o


         n


         g


         g


         o


         n



          g


          ′



         .



        orcname='yonggong'.
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.7519em;">
         </span>
         <span class="mord mathnormal">
          orc
         </span>
         <span class="mord mathnormal">
          nam
         </span>
         <span class="mord mathnormal">
          e
         </span>
         <span class="mspace" style="margin-right: 0.2778em;">
         </span>
         <span class="mrel">
          <span class="mrel">
           =
          </span>
          <span class="msupsub">
           <span class="vlist-t">
            <span class="vlist-r">
             <span class="vlist" style="height: 0.7519em;">
              <span class="" style="top: -3.063em; margin-right: 0.05em;">
               <span class="pstrut" style="height: 2.7em;">
               </span>
               <span class="sizing reset-size6 size3 mtight">
                <span class="mord mtight">
                 <span class="mord mtight">
                  ′
                 </span>
                </span>
               </span>
              </span>
             </span>
            </span>
           </span>
          </span>
         </span>
         <span class="mspace" style="margin-right: 0.2778em;">
         </span>
        </span>
        <span class="base">
         <span class="strut" style="height: 0.9463em; vertical-align: -0.1944em;">
         </span>
         <span class="mord mathnormal">
          yo
         </span>
         <span class="mord mathnormal">
          n
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0359em;">
          gg
         </span>
         <span class="mord mathnormal">
          o
         </span>
         <span class="mord mathnormal">
          n
         </span>
         <span class="mord">
          <span class="mord mathnormal" style="margin-right: 0.0359em;">
           g
          </span>
          <span class="msupsub">
           <span class="vlist-t">
            <span class="vlist-r">
             <span class="vlist" style="height: 0.7519em;">
              <span class="" style="top: -3.063em; margin-right: 0.05em;">
               <span class="pstrut" style="height: 2.7em;">
               </span>
               <span class="sizing reset-size6 size3 mtight">
                <span class="mord mtight">
                 <span class="mord mtight">
                  ′
                 </span>
                </span>
               </span>
              </span>
             </span>
            </span>
           </span>
          </span>
         </span>
         <span class="mord">
          .
         </span>
        </span>
       </span>
      </span>
     </span>
     row[‘id’].‘.jpg’;
     <br/>
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        o


         r


         c


         n


         a


         m


         e


         这个就是生成图片的名称，如果生成的多，一定要区分出来，一般规则，前面


         y


         o


         n


         g


         g


         o


         n


         g


         是区分不同功能的前缀，后面



        orcname这个就是生成图片的名称，如果生成的多，一定要区分出来，一般规则，前面yonggong是区分不同功能的前缀，后面
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 0.8778em; vertical-align: -0.1944em;">
         </span>
         <span class="mord mathnormal">
          orc
         </span>
         <span class="mord mathnormal">
          nam
         </span>
         <span class="mord mathnormal">
          e
         </span>
         <span class="mord cjk_fallback">
          这个就是生成图片的名称，如果生成的多，一定要区分出来，一般规则，前面
         </span>
         <span class="mord mathnormal">
          yo
         </span>
         <span class="mord mathnormal">
          n
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0359em;">
          gg
         </span>
         <span class="mord mathnormal">
          o
         </span>
         <span class="mord mathnormal">
          n
         </span>
         <span class="mord mathnormal" style="margin-right: 0.0359em;">
          g
         </span>
         <span class="mord cjk_fallback">
          是区分不同功能的前缀，后面
         </span>
        </span>
       </span>
      </span>
     </span>
     row[‘id’]也就是在不同应用中数据库调用的id号，这样就能区分开了
    </p>
    <h3>
     <a id="_88">
     </a>
     最终效果
    </h3>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/ee167778534648fd9f8f155647304b0a.png">
      <br/>
      最终实现就可以做到每条记录一个自己的小程序码了，特别是放在PC端，或者写公众号中都可以嵌入，方便用户直接到小程序中的具体页面。
      <br/>
      好了，今天就说到这里，大家有什么问题可以留言。
     </img>
    </p>

   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f666569787565776973646f6d6c65652f:61727469636c652f64657461696c732f313430343233343638" class_="artid" style="display:none">
 </p>
</div>
