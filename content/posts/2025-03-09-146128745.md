---
layout: post
title: "C深入理解C模板从原理到实践"
date: 2025-03-09 10:49:09 +0800
description: "C++模板是泛型编程的核心工具，它允许开发者编写与类型无关的代码。然而，模板的实现机制和编译过程往往令人感到神秘。"
keywords: "【C++】深入理解C++模板：从原理到实践"
categories: ['C']
tags: ['C']
artid: "146128745"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146128745
    alt: "C深入理解C模板从原理到实践"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146128745
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146128745
cover: https://bing.ee123.net/img/rand?artid=146128745
image: https://bing.ee123.net/img/rand?artid=146128745
img: https://bing.ee123.net/img/rand?artid=146128745
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     【C++】深入理解C++模板：从原理到实践
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
    </p>
    <p>
    </p>
    <h2>
     <a id="_2">
     </a>
     引言
    </h2>
    <blockquote>
     <p>
      C++模板是泛型编程的核心工具，它允许开发者编写与类型无关的代码。然而，模板的实现机制和编译过程往往令人感到神秘。本文将通过模板
      <strong>
       实例化过程
      </strong>
      、
      <strong>
       类型推导规则
      </strong>
      和
      <strong>
       模板元编程
      </strong>
      三个维度，深入理解C++模板的工作原理。
     </p>
    </blockquote>
    <h2>
     <a id="1_6">
     </a>
     1、模板基础知识
    </h2>
    <h3>
     <a id="11__8">
     </a>
     1.1 函数模板
    </h3>
    <pre><code class="prism language-cpp"><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token operator">&gt;</span>
<span class="token keyword">void</span> <span class="token function">Swap</span><span class="token punctuation">(</span>T<span class="token operator">&amp;</span> a<span class="token punctuation">,</span> T<span class="token operator">&amp;</span> b<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    T temp <span class="token operator">=</span> a<span class="token punctuation">;</span>
    a <span class="token operator">=</span> b<span class="token punctuation">;</span>
    b <span class="token operator">=</span> temp<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <ul>
     <li>
      编译器通过调用上下文推导
      <code>
       T
      </code>
      的类型。
     </li>
     <li>
      生产具体类型版本的过程成为
      <strong>
       隐式实例化
      </strong>
      。
     </li>
    </ul>
    <pre><code class="prism language-cpp"><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token operator">&gt;</span>
<span class="token keyword">void</span> <span class="token function">Swap</span><span class="token punctuation">(</span>T<span class="token operator">&amp;</span> a<span class="token punctuation">,</span> T<span class="token operator">&amp;</span> b<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    T temp <span class="token operator">=</span> a<span class="token punctuation">;</span>
    a <span class="token operator">=</span> b<span class="token punctuation">;</span>
    b <span class="token operator">=</span> temp<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> b <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> a <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span> <span class="token operator">&lt;&lt;</span> b <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
    <span class="token function">Swap</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> a <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span> <span class="token operator">&lt;&lt;</span> b <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"---------"</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>

    <span class="token keyword">double</span> c <span class="token operator">=</span> <span class="token number">1.2</span><span class="token punctuation">,</span> d <span class="token operator">=</span> <span class="token number">3.4</span><span class="token punctuation">;</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> c <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span> <span class="token operator">&lt;&lt;</span> d <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
    <span class="token function">Swap</span><span class="token punctuation">(</span>c<span class="token punctuation">,</span> d<span class="token punctuation">)</span><span class="token punctuation">;</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> c <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span> <span class="token operator">&lt;&lt;</span> d <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     <img alt="自动推导类型" src="https://i-blog.csdnimg.cn/img_convert/9b644e7f3a0be966dff3a8baa696dd4f.png"/>
    </p>
    <p>
     <img alt="自动推导类型" src="https://i-blog.csdnimg.cn/img_convert/68ee2a45e707053e7d60f8ccf3d5d07b.png"/>
    </p>
    <h3>
     <a id="12__49">
     </a>
     1.2 类模板
    </h3>
    <pre><code class="prism language-cpp"><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token operator">&gt;</span>
<span class="token keyword">class</span> <span class="token class-name">Vector</span> <span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token function">Vector</span><span class="token punctuation">(</span><span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">)</span>
        <span class="token operator">:</span> <span class="token function">size_</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">capacity_</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        data_ <span class="token operator">=</span> <span class="token keyword">new</span> T<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">void</span> <span class="token function">PushBack</span><span class="token punctuation">(</span><span class="token keyword">const</span> T<span class="token operator">&amp;</span> item<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 尾插逻辑...</span>
    <span class="token punctuation">}</span>

    <span class="token operator">~</span><span class="token function">Vector</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">delete</span><span class="token punctuation">[</span><span class="token punctuation">]</span> data_<span class="token punctuation">;</span>
        size_ <span class="token operator">=</span> capacity_ <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
    T<span class="token operator">*</span> data_<span class="token punctuation">;</span>
    <span class="token keyword">int</span> size_<span class="token punctuation">;</span>
    <span class="token keyword">int</span> capacity_<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
    <ul>
     <li>
      必须显式指定模板参数类型（C++17前）。
     </li>
     <li>
      支持成员函数模板和静态成员。
     </li>
    </ul>
    <pre><code class="prism language-cpp"><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span>
<span class="token keyword">class</span> <span class="token class-name">Vector</span> <span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token function">Vector</span><span class="token punctuation">(</span><span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">)</span>
        <span class="token operator">:</span> <span class="token function">size_</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">capacity_</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        data_ <span class="token operator">=</span> <span class="token keyword">new</span> T<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">void</span> <span class="token function">PushBack</span><span class="token punctuation">(</span><span class="token keyword">const</span> T<span class="token operator">&amp;</span> item<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 尾插逻辑...</span>
    <span class="token punctuation">}</span>

    <span class="token operator">~</span><span class="token function">Vector</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">delete</span><span class="token punctuation">[</span><span class="token punctuation">]</span> data_<span class="token punctuation">;</span>
        size_ <span class="token operator">=</span> capacity_ <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
    T<span class="token operator">*</span> data_<span class="token punctuation">;</span>
    <span class="token keyword">int</span> size_<span class="token punctuation">;</span>
    <span class="token keyword">int</span> capacity_<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    Vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> v<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <blockquote>
     <p>
      <strong>
       <code>
        typename
       </code>
       <strong>
        是用来定义模板参数的关键字，也可以使用
       </strong>
       <code>
        class
       </code>
      </strong>
      。
     </p>
    </blockquote>
    <h2>
     <a id="2_111">
     </a>
     2、模板实例化机制
    </h2>
    <h3>
     <a id="21__113">
     </a>
     2.1 两阶段编译
    </h3>
    <ol>
     <li>
      模板定义阶段：检查语法和与模板参数无关的错误。
     </li>
     <li>
      实例化阶段：生产具体类型的代码，检查类型相关操作。
     </li>
    </ol>
    <p>
     <img alt="模板实例化" src="https://i-blog.csdnimg.cn/img_convert/bf51eff837eccfc98cb437d34294fb63.png"/>
    </p>
    <h3>
     <a id="22__120">
     </a>
     2.2 实例化控制
    </h3>
    <ul>
     <li>
      显示实例化（减少代码膨胀）。
     </li>
    </ul>
    <pre><code class="prism language-cpp"><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token operator">&gt;</span>
<span class="token keyword">void</span> <span class="token function">Swap</span><span class="token punctuation">(</span>T<span class="token operator">&amp;</span> a<span class="token punctuation">,</span> T<span class="token operator">&amp;</span> b<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    T temp <span class="token operator">=</span> a<span class="token punctuation">;</span>
    a <span class="token operator">=</span> b<span class="token punctuation">;</span>
    b <span class="token operator">=</span> temp<span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token operator">&gt;</span>
<span class="token keyword">class</span> <span class="token class-name">Vector</span> <span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token function">Vector</span><span class="token punctuation">(</span><span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">)</span>
        <span class="token operator">:</span> <span class="token function">size_</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">capacity_</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        data_ <span class="token operator">=</span> <span class="token keyword">new</span> T<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">void</span> <span class="token function">PushBack</span><span class="token punctuation">(</span><span class="token keyword">const</span> T<span class="token operator">&amp;</span> item<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 尾插逻辑...</span>
    <span class="token punctuation">}</span>

    <span class="token operator">~</span><span class="token function">Vector</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">delete</span><span class="token punctuation">[</span><span class="token punctuation">]</span> data_<span class="token punctuation">;</span>
        size_ <span class="token operator">=</span> capacity_ <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
    T<span class="token operator">*</span> data_<span class="token punctuation">;</span>
    <span class="token keyword">int</span> size_<span class="token punctuation">;</span>
    <span class="token keyword">int</span> capacity_<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">template</span> <span class="token keyword">class</span> <span class="token class-name">Vector</span><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// 显示实例化整个类</span>
<span class="token keyword">template</span> <span class="token keyword">void</span> <span class="token generic-function"><span class="token function">Swap</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">&amp;</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">&amp;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 显示实例化函数</span>
</code></pre>
    <ul>
     <li>
      外部实例化声明（C++11）。
     </li>
    </ul>
    <pre><code class="prism language-cpp"><span class="token keyword">extern</span> <span class="token keyword">template</span> <span class="token keyword">class</span> <span class="token class-name">Vector</span><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
</code></pre>
    <h2>
     <a id="3_166">
     </a>
     3、模板参数推导
    </h2>
    <h3>
     <a id="31__168">
     </a>
     3.1 类型推导规则
    </h3>
    <ul>
     <li>
      函数模板参数推导遵循以下优先级：
      <ol>
       <li>
        完美匹配。
       </li>
       <li>
        类型提升（
        <code>
         float
        </code>
        <span class="katex--inline">
         <span class="katex">
          <span class="katex-mathml">
           → 
           
          
         
           \rightarrow
          </span>
          <span class="katex-html">
           <span class="base">
            <span class="strut" style="height: 0.3669em;">
            </span>
            <span class="mrel">
             →
            </span>
           </span>
          </span>
         </span>
        </span>
        <code>
         double
        </code>
        ）。
       </li>
       <li>
        标准转换（
        <code>
         int
        </code>
        <span class="katex--inline">
         <span class="katex">
          <span class="katex-mathml">
           → 
           
          
         
           \rightarrow
          </span>
          <span class="katex-html">
           <span class="base">
            <span class="strut" style="height: 0.3669em;">
            </span>
            <span class="mrel">
             →
            </span>
           </span>
          </span>
         </span>
        </span>
        <code>
         long
        </code>
        ）。
       </li>
       <li>
        用户定义转换。
       </li>
      </ol>
     </li>
    </ul>
    <h3>
     <a id="32_CTAD_176">
     </a>
     3.2 CTAD（类模板参数推导）
    </h3>
    <ul>
     <li>
      C++17引入的自动推导机制。
     </li>
    </ul>
    <pre><code class="prism language-cpp">std<span class="token double-colon punctuation">::</span>vector v<span class="token punctuation">{<!-- --></span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// 推导为std::vector&lt;int&gt;</span>
</code></pre>
    <h2>
     <a id="4_184">
     </a>
     4、模板特化与偏特化
    </h2>
    <h3>
     <a id="41__186">
     </a>
     4.1 全特化
    </h3>
    <pre><code class="prism language-cpp"><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
<span class="token keyword">class</span> <span class="token class-name">ClassName</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">*</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">//针对void*类型的特殊实现</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
    <h3>
     <a id="42__195">
     </a>
     4.2 偏特化
    </h3>
    <pre><code class="prism language-cpp"><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token operator">&gt;</span>
<span class="token keyword">class</span> <span class="token class-name">ClassName</span><span class="token operator">&lt;</span>T<span class="token operator">*</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">//针对所有指针类型的通用实现</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
    <h2>
     <a id="5_204">
     </a>
     5、模板元编程
    </h2>
    <h3>
     <a id="51__206">
     </a>
     5.1 编译时计算
    </h3>
    <pre><code class="prism language-cpp"><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">int</span> N<span class="token operator">&gt;</span>
<span class="token keyword">struct</span> <span class="token class-name">Factorial</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">static</span> <span class="token keyword">const</span> <span class="token keyword">int</span> ret <span class="token operator">=</span> N <span class="token operator">*</span> Factorial<span class="token operator">&lt;</span>N <span class="token operator">-</span> <span class="token number">1</span><span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span>ret<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
<span class="token keyword">struct</span> <span class="token class-name">Factorial</span><span class="token operator">&lt;</span><span class="token number">0</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">static</span> <span class="token keyword">const</span> <span class="token keyword">int</span> ret <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> Factorial<span class="token operator">&lt;</span><span class="token number">5</span><span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span>ret <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span> <span class="token comment">// 120</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <h3>
     <a id="52_SFINAE_225">
     </a>
     5.2 SFINAE与类型检查
    </h3>
    <pre><code class="prism language-cpp"><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token operator">&gt;</span>
<span class="token keyword">class</span> <span class="token class-name">std</span><span class="token operator">:</span><span class="token base-clause"><span class="token operator">:</span><span class="token class-name">enable_if</span><span class="token operator">&lt;</span>std<span class="token double-colon punctuation">::</span><span class="token class-name">is_integral</span><span class="token operator">&lt;</span><span class="token class-name">T</span><span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span><span class="token class-name">value</span><span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span><span class="token class-name">type</span> <span class="token function">process</span><span class="token punctuation">(</span><span class="token class-name">T</span> <span class="token class-name">val</span><span class="token punctuation">)</span></span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 仅对整数类型生效的实现</span>
<span class="token punctuation">}</span>
</code></pre>
    <h3>
     <a id="53_C20Concepts_234">
     </a>
     5.3 C++20概念（Concepts）
    </h3>
    <pre><code class="prism language-cpp"><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token operator">&gt;</span>
<span class="token keyword">requires</span> std<span class="token double-colon punctuation">::</span>floating_point<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span>
T <span class="token function">precise_calc</span><span class="token punctuation">(</span>T a<span class="token punctuation">,</span> T b<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 高精度浮点计算</span>
<span class="token punctuation">}</span>
</code></pre>
    <h2>
     <a id="6_244">
     </a>
     6、模板实践建议
    </h2>
    <ol>
     <li>
      避免过度使用模板元编程（TMP）。
     </li>
     <li>
      使用
      <code>
       static_assert
      </code>
      进行模板参数校验。
     </li>
     <li>
      注意模板导致的代码膨胀问题。
     </li>
     <li>
      有限选择标准库类型特征（type_traits）
     </li>
    </ol>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f:2f626c6f672e6373646e2e6e65742f79697368616f6261692f:61727469636c652f64657461696c732f313436313238373435" class_="artid" style="display:none">
 </p>
</div>


