---
layout: post
title: "使用-Theos-开发-iOS-应用IPA记事本"
date: 2025-03-14 09:17:35 +0800
description: "生成的 deb 包位于。dpkg -r 包名。"
keywords: "thoes制作deb"
categories: ['未分类']
tags: ['Ios', 'C']
artid: "146242602"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146242602
    alt: "使用-Theos-开发-iOS-应用IPA记事本"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146242602
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146242602
cover: https://bing.ee123.net/img/rand?artid=146242602
image: https://bing.ee123.net/img/rand?artid=146242602
img: https://bing.ee123.net/img/rand?artid=146242602
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     使用 Theos 开发 iOS 应用（IPA）记事本
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h2>
     <a id="_Theos__iOS_IPA_0">
     </a>
     使用 Theos 开发 iOS 应用（IPA）记事本
    </h2>
    <h3>
     <a id="_2">
     </a>
     前提条件
    </h3>
    <ul>
     <li>
      已越狱的 iOS 设备
     </li>
     <li>
      已安装 Theos
     </li>
     <li>
      已安装 OpenSSH（用于远程操作）
     </li>
     <li>
      Windows 电脑（可选，用于远程操作）
     </li>
    </ul>
    <h3>
     <a id="Theos__8">
     </a>
     Theos 环境搭建
    </h3>
    <h4>
     <a id="Windows__10">
     </a>
     Windows 环境搭建
    </h4>
    <ol>
     <li>
      <strong>
       安装 WSL (Windows Subsystem for Linux)
      </strong>
     </li>
    </ol>
    <pre><code class="prism language-bash">wsl <span class="token parameter variable">--install</span>
</code></pre>
    <ol start="2">
     <li>
      <strong>
       安装必要工具
      </strong>
     </li>
    </ol>
    <pre><code class="prism language-bash"><span class="token function">sudo</span> <span class="token function">apt-get</span> update
<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> <span class="token function">git</span> perl build-essential <span class="token function">curl</span>
</code></pre>
    <ol start="3">
     <li>
      <strong>
       安装 Theos
      </strong>
     </li>
    </ol>
    <pre><code class="prism language-bash"><span class="token function">git</span> clone <span class="token parameter variable">--recursive</span> https://github.com/theos/theos.git <span class="token variable">$THEOS</span>
</code></pre>
    <ol start="4">
     <li>
      <strong>
       设置环境变量
      </strong>
      <br/>
      在
      <code>
       ~/.bashrc
      </code>
      或
      <code>
       ~/.zshrc
      </code>
      中添加：
     </li>
    </ol>
    <pre><code class="prism language-bash"><span class="token builtin class-name">export</span> <span class="token assign-left variable">THEOS</span><span class="token operator">=~</span>/theos
<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token variable">$THEOS</span>/bin:<span class="token environment constant">$PATH</span>
</code></pre>
    <h4>
     <a id="iOS__34">
     </a>
     iOS 设备端搭建
    </h4>
    <ol>
     <li>
      <strong>
       添加 Theos 源
      </strong>
     </li>
    </ol>
    <ul>
     <li>
      在 Cydia/Sileo 中添加源：
      <code>
       https://repo.chariz.com/
      </code>
     </li>
    </ul>
    <ol start="2">
     <li>
      <strong>
       安装必要组件
      </strong>
     </li>
    </ol>
    <ul>
     <li>
      Theos Dependencies
     </li>
     <li>
      Darwin CC Tools
     </li>
     <li>
      OpenSSH
     </li>
     <li>
      Preferenceloader
     </li>
    </ul>
    <ol start="3">
     <li>
      <strong>
       设置 SSH 连接
      </strong>
     </li>
    </ol>
    <pre><code class="prism language-bash"><span class="token builtin class-name">export</span> <span class="token assign-left variable">THEOS_DEVICE_IP</span><span class="token operator">=</span>设备IP地址
<span class="token builtin class-name">export</span> <span class="token assign-left variable">THEOS_DEVICE_PORT</span><span class="token operator">=</span><span class="token number">22</span>
</code></pre>
    <h3>
     <a id="_50">
     </a>
     应用图标制作工具
    </h3>
    <h4>
     <a id="1__52">
     </a>
     1. 在线工具
    </h4>
    <ol>
     <li>
      <strong>
       App Icon Generator
      </strong>
     </li>
    </ol>
    <ul>
     <li>
      网址：https://appicon.co/
     </li>
     <li>
      特点：直接生成所有尺寸的图标
     </li>
     <li>
      使用方法：上传 1024x1024 图标，自动生成各尺寸
     </li>
    </ul>
    <ol start="2">
     <li>
      <strong>
       MakeAppIcon
      </strong>
     </li>
    </ol>
    <ul>
     <li>
      网址：https://makeappicon.com/
     </li>
     <li>
      特点：支持多平台，提供图标优化
     </li>
    </ul>
    <ol start="3">
     <li>
      <strong>
       Icon Kitchen
      </strong>
     </li>
    </ol>
    <ul>
     <li>
      网址：https://icon.kitchen/
     </li>
     <li>
      特点：提供图标编辑功能，支持自定义背景
     </li>
    </ul>
    <h4>
     <a id="2__66">
     </a>
     2. 本地工具
    </h4>
    <ol>
     <li>
      <strong>
       ImageMagick 命令行工具
      </strong>
      <br/>
      安装：
     </li>
    </ol>
    <pre><code class="prism language-bash"><span class="token comment"># Windows (使用 Chocolatey)</span>
choco <span class="token function">install</span> imagemagick

<span class="token comment"># Linux</span>
<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> imagemagick
</code></pre>
    <p>
     批量生成图标命令：
    </p>
    <pre><code class="prism language-bash"><span class="token comment"># 生成 2x 图标</span>
convert icon.png <span class="token parameter variable">-resize</span> 60x60 Resources/AppIcon60x60@2x.png
convert icon.png <span class="token parameter variable">-resize</span> 40x40 Resources/AppIcon40x40@2x.png
convert icon.png <span class="token parameter variable">-resize</span> 29x29 Resources/AppIcon29x29@2x.png

<span class="token comment"># 生成 3x 图标</span>
convert icon.png <span class="token parameter variable">-resize</span> 60x60 Resources/AppIcon60x60@3x.png
</code></pre>
    <ol start="2">
     <li>
      <strong>
       Sketch/Figma
      </strong>
     </li>
    </ol>
    <ul>
     <li>
      支持导出多尺寸图标
     </li>
     <li>
      提供专业的设计工具
     </li>
     <li>
      可以使用模板快速生成
     </li>
    </ul>
    <h4>
     <a id="3_Python__94">
     </a>
     3. Python 脚本方案
    </h4>
    <pre><code class="prism language-python"><span class="token keyword">from</span> PIL <span class="token keyword">import</span> Image
<span class="token keyword">import</span> os

<span class="token keyword">def</span> <span class="token function">generate_icons</span><span class="token punctuation">(</span>source_image<span class="token punctuation">,</span> output_dir<span class="token punctuation">)</span><span class="token punctuation">:</span>
    sizes <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
        <span class="token string">'AppIcon60x60@2x'</span><span class="token punctuation">:</span> <span class="token number">120</span><span class="token punctuation">,</span>
        <span class="token string">'AppIcon60x60@3x'</span><span class="token punctuation">:</span> <span class="token number">180</span><span class="token punctuation">,</span>
        <span class="token string">'AppIcon40x40@2x'</span><span class="token punctuation">:</span> <span class="token number">80</span><span class="token punctuation">,</span>
        <span class="token string">'AppIcon29x29@2x'</span><span class="token punctuation">:</span> <span class="token number">58</span>
    <span class="token punctuation">}</span>
    
    img <span class="token operator">=</span> Image<span class="token punctuation">.</span><span class="token builtin">open</span><span class="token punctuation">(</span>source_image<span class="token punctuation">)</span>
    <span class="token keyword">for</span> name<span class="token punctuation">,</span> size <span class="token keyword">in</span> sizes<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        resized <span class="token operator">=</span> img<span class="token punctuation">.</span>resize<span class="token punctuation">(</span><span class="token punctuation">(</span>size<span class="token punctuation">,</span> size<span class="token punctuation">)</span><span class="token punctuation">,</span> Image<span class="token punctuation">.</span>LANCZOS<span class="token punctuation">)</span>
        resized<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>output_dir<span class="token punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>name<span class="token punctuation">}</span></span><span class="token string">.png'</span></span><span class="token punctuation">)</span>
</code></pre>
    <h3>
     <a id="_113">
     </a>
     步骤一：环境准备
    </h3>
    <h4>
     <a id="1__115">
     </a>
     1. 在越狱设备上安装必要组件
    </h4>
    <p>
     通过 Cydia/Sileo 安装：
    </p>
    <ul>
     <li>
      OpenSSH
     </li>
     <li>
      Theos Dependencies
     </li>
     <li>
      Darwin CC Tools
     </li>
    </ul>
    <h4>
     <a id="2__Windows__121">
     </a>
     2. 远程连接设置（如果使用 Windows 开发）
    </h4>
    <ol>
     <li>
      安装 PuTTY
     </li>
     <li>
      使用设备 IP 地址连接（端口 22）
     </li>
     <li>
      用户名：root
     </li>
     <li>
      默认密码：alpine（建议修改）
     </li>
    </ol>
    <h3>
     <a id="_127">
     </a>
     步骤二：创建项目
    </h3>
    <ol>
     <li>
      <strong>
       创建项目目录
      </strong>
      ：
     </li>
    </ol>
    <pre><code class="prism language-bash"><span class="token builtin class-name">cd</span> ~
<span class="token function">mkdir</span> projects
<span class="token builtin class-name">cd</span> projects
</code></pre>
    <ol start="2">
     <li>
      <strong>
       创建新的 Theos 应用项目
      </strong>
      ：
     </li>
    </ol>
    <pre><code class="prism language-bash"><span class="token variable">$THEOS</span>/bin/nic.pl
</code></pre>
    <ol start="3">
     <li>
      <strong>
       选择项目模板
      </strong>
      ：
     </li>
    </ol>
    <ul>
     <li>
      选择
      <code>
       iphone/application
      </code>
     </li>
     <li>
      输入项目名称（如：MyfirstApp）
     </li>
     <li>
      输入包名（如：com.yourname.myfirstapp）
     </li>
     <li>
      输入作者名称
     </li>
     <li>
      输入类名前缀（如：MF）
     </li>
    </ul>
    <h3>
     <a id="_148">
     </a>
     步骤三：配置项目
    </h3>
    <ol>
     <li>
      <strong>
       准备应用图标
      </strong>
      ：
     </li>
    </ol>
    <ul>
     <li>
      将图标文件放在 Resources 目录
     </li>
     <li>
      必需的图标尺寸：
      <ul>
       <li>
        AppIcon60x60@2x.png
       </li>
       <li>
        AppIcon60x60@3x.png
       </li>
       <li>
        AppIcon40x40@2x.png
       </li>
       <li>
        AppIcon29x29@2x.png
       </li>
      </ul>
     </li>
    </ul>
    <ol start="2">
     <li>
      <strong>
       确保图标权限正确
      </strong>
      ：
     </li>
    </ol>
    <pre><code class="prism language-bash"><span class="token function">chmod</span> <span class="token number">644</span> Resources/AppIcon*.png
</code></pre>
    <h3>
     <a id="_163">
     </a>
     步骤四：编译和打包
    </h3>
    <ol>
     <li>
      <strong>
       清理旧的构建文件
      </strong>
      ：
     </li>
    </ol>
    <pre><code class="prism language-bash"><span class="token function">make</span> clean
</code></pre>
    <ol start="2">
     <li>
      <strong>
       编译和打包
      </strong>
      ：
     </li>
    </ol>
    <pre><code class="prism language-bash"><span class="token function">make</span> package
</code></pre>
    <p>
     生成的 deb 包位于
     <code>
      packages
     </code>
     目录。
    </p>
    <h3>
     <a id="_177">
     </a>
     步骤五：安装应用
    </h3>
    <h4>
     <a id="_make_install_179">
     </a>
     方法一：使用 make install
    </h4>
    <pre><code class="prism language-bash"><span class="token function">make</span> <span class="token function">install</span>
</code></pre>
    <h4>
     <a id="_deb_184">
     </a>
     方法二：手动安装 deb
    </h4>
    <pre><code class="prism language-bash">dpkg <span class="token parameter variable">-i</span> packages/com.yourname.myfirstapp_*.deb
</code></pre>
    <h3>
     <a id="_189">
     </a>
     步骤六：解决常见问题
    </h3>
    <h4>
     <a id="1__191">
     </a>
     1. 图标不显示问题
    </h4>
    <p>
     执行以下命令：
    </p>
    <pre><code class="prism language-bash">uicache <span class="token parameter variable">--all</span>
<span class="token function">killall</span> SpringBoard
</code></pre>
    <h4>
     <a id="2__198">
     </a>
     2. 权限问题修复
    </h4>
    <pre><code class="prism language-bash"><span class="token function">chmod</span> <span class="token number">755</span> /Applications/应用名.app
<span class="token function">chmod</span> <span class="token number">755</span> /Applications/应用名.app/可执行文件
<span class="token function">chown</span> <span class="token parameter variable">-R</span> root:wheel /Applications/应用名.app
</code></pre>
    <h3>
     <a id="_205">
     </a>
     注意事项
    </h3>
    <ol>
     <li>
      确保所有图标文件大小不为 0
     </li>
     <li>
      Info.plist 中的图标配置要正确
     </li>
     <li>
      包名（Bundle ID）要唯一
     </li>
     <li>
      注意文件权限设置
     </li>
    </ol>
    <h3>
     <a id="_211">
     </a>
     调试技巧
    </h3>
    <ol>
     <li>
      检查应用安装位置：
      <code>
       /Applications/应用名.app/
      </code>
     </li>
     <li>
      检查日志：
      <code>
       tail -f /var/log/syslog
      </code>
     </li>
     <li>
      使用 Cydia 查看包信息
     </li>
    </ol>
    <h3>
     <a id="_216">
     </a>
     常用命令参考
    </h3>
    <ul>
     <li>
      清理构建：
      <code>
       make clean
      </code>
     </li>
     <li>
      打包：
      <code>
       make package
      </code>
     </li>
     <li>
      安装：
      <code>
       make install
      </code>
      或
      <code>
       dpkg -i xxx.deb
      </code>
     </li>
     <li>
      卸载：
      <code>
       dpkg -r 包名
      </code>
     </li>
     <li>
      刷新图标：
      <code>
       uicache --all
      </code>
     </li>
     <li>
      重启 SpringBoard：
      <code>
       killall SpringBoard
      </code>
     </li>
    </ul>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f71715f34333132393837382f:61727469636c652f64657461696c732f313436323432363032" class_="artid" style="display:none">
 </p>
</div>


