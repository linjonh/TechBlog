---
layout: post
title: "2025力扣打卡系列动态规划从记忆化搜索到递推"
date: 2025-03-10 16:31:42 +0800
description: "坚持按题型打卡&刷&梳理力扣算法题系列，语言为python3，Day4。"
keywords: "【2025力扣打卡系列】动态规划+从记忆化搜索到递推"
categories: ['未分类']
tags: ['算法', '动态规划', 'Python', 'Leetcode']
artid: "146136436"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146136436
    alt: "2025力扣打卡系列动态规划从记忆化搜索到递推"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146136436
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146136436
cover: https://bing.ee123.net/img/rand?artid=146136436
image: https://bing.ee123.net/img/rand?artid=146136436
img: https://bing.ee123.net/img/rand?artid=146136436
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     【2025力扣打卡系列】动态规划+从记忆化搜索到递推
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <blockquote>
     <p>
      坚持按题型打卡&amp;刷&amp;梳理力扣算法题系列，语言为python3，Day4
     </p>
    </blockquote>
    <ul>
     <li>
      回溯三问
      <ul>
       <li>
        当前操作？枚举
        <strong>
         第
        </strong>
        i 个房子选/不选
       </li>
       <li>
        子问题？从
        <strong>
         前
        </strong>
        i 个房子中得到的最大金额和
       </li>
       <li>
        下一个子问题？分类讨论：
        <ul>
         <li>
          不选：从
          <strong>
           前
          </strong>
          i - 1个房子中得到的最大金额和
         </li>
         <li>
          选：从
          <strong>
           前
          </strong>
          i -2 个房子中得到的最大金额和
         </li>
        </ul>
       </li>
      </ul>
     </li>
     <li>
      没有将得到的金额作为递归的入参，而是作为返回值
     </li>
     <li>
      记忆化搜索
      <ul>
       <li>
        递归搜索 + 保存计算结果 = 记忆化搜索
        <ul>
         <li>
          把递归的计算结果保存下来，那么下次递归到同样的入参时，就直接返回先前保存的结果
         </li>
        </ul>
       </li>
       <li>
        @cache
        <ul>
         <li>
          原理：用一个hashmap来记录入参 和 对应的返回值
         </li>
         <li>
          或者用数组来实现
          <ul>
           <li>
            cache = [-1] * n
           </li>
           <li>
            在dfs的过程中，if cache[I] != -1: return cache[I]（当前I对应的cache[I]对应的值不为-1时，就返回cache[I]保存的值）；在return res之前，将cache[I]中的值更新，即cache[I] = res
           </li>
          </ul>
         </li>
        </ul>
       </li>
      </ul>
     </li>
    </ul>
    <h6>
     <a id="_18">
     </a>
     打家劫舍
    </h6>
    <ul>
     <li>
      题目描述
      <br/>
      在这里插入图片描述
     </li>
     <li>
      代码参考
     </li>
    </ul>
    <pre><code class="prism language-python"><span class="token comment"># 法一：直接用cache装饰器（击败100%）</span>
<span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">rob</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nums<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">int</span><span class="token punctuation">:</span>
        n <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span>
        <span class="token decorator annotation punctuation">@cache</span>
        <span class="token keyword">def</span> <span class="token function">dfs</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">if</span> i <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">:</span>
                <span class="token keyword">return</span> <span class="token number">0</span> 
            res <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span>dfs<span class="token punctuation">(</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>dfs<span class="token punctuation">(</span>i<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">+</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> res
        <span class="token keyword">return</span> dfs<span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>

<span class="token comment"># 法二：单独开一个cache数组（击败3.55%）</span>
<span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">rob</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nums<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">int</span><span class="token punctuation">:</span>
        n <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span>
        cache <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">*</span> n 
        <span class="token keyword">def</span> <span class="token function">dfs</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">if</span> i <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">:</span>
                <span class="token keyword">return</span> <span class="token number">0</span> 
            <span class="token keyword">if</span> cache<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">:</span>
                <span class="token keyword">return</span> cache<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
            res <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span>dfs<span class="token punctuation">(</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>dfs<span class="token punctuation">(</span>i<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">+</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
            cache<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> res
            <span class="token keyword">return</span> res
        <span class="token keyword">return</span> dfs<span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>

</code></pre>
    <ul>
     <li>
      升级版
     </li>
     <li>
      自顶向下算：记忆化搜索
     </li>
     <li>
      自底向上算：递推
     </li>
     <li>
      1:1翻译成递推
      <ul>
       <li>
        dfs——》f数组
       </li>
       <li>
        递归——〉循环
       </li>
       <li>
        递归边界——》数组初始值
       </li>
      </ul>
     </li>
    </ul>
    <pre><code class="prism language-python"><span class="token comment"># 法三</span>
<span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">rob</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nums<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">int</span><span class="token punctuation">:</span>
        n <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span>
        f <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token punctuation">(</span>n<span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">)</span>
        <span class="token keyword">for</span> i<span class="token punctuation">,</span> x <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">:</span>
            f<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span>f<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>f<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">+</span>x<span class="token punctuation">)</span>
        <span class="token keyword">return</span> f<span class="token punctuation">[</span>n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token comment"># f(n-1 +2) 因为整体全都+2了</span>

<span class="token comment"># 空间优化</span>
<span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">rob</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nums<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">int</span><span class="token punctuation">:</span>
        n <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span>
        f0<span class="token operator">=</span>f1<span class="token operator">=</span><span class="token number">0</span>
        <span class="token keyword">for</span> i<span class="token punctuation">,</span>x <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">:</span>
            new_f <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span>f1<span class="token punctuation">,</span>f0 <span class="token operator">+</span> x<span class="token punctuation">)</span>
            f0 <span class="token operator">=</span> f1
            f1 <span class="token operator">=</span> new_f
        <span class="token keyword">return</span> f1
</code></pre>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f71715f34353733343734352f:61727469636c652f64657461696c732f313436313336343336" class_="artid" style="display:none">
 </p>
</div>


