---
layout: post
title: "虚幻FPS开发-day02开枪以及光线追综"
date: 2025-03-13 19:36:17 +0800
description: "首先设置音效资产变量，在蓝图中动态的设置音效资产绑定开火事件，在输入事件中设置鼠标左键按下事件在代码中设置当鼠标左键按下时对应的槽函数，绑定输入事件和槽函数之间的关系获取开火资产GitHub - DruidMech/UE4-CPP-Shooter-Series: Unreal Engine C++ Shooter Series Project创建音效蓝图在BP_Character中设置资产至此，开火音效已经实现首先创建开火粒子特效变量以动态绑定资产，在我看来蓝图类就像是配置文件在鼠标左键点击开火时调用的回调"
keywords: "虚幻FPS开发 day02:开枪以及光线追综"
categories: ['未分类']
tags: ['虚幻', '游戏引擎']
artid: "146231794"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146231794
    alt: "虚幻FPS开发-day02开枪以及光线追综"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146231794
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146231794
cover: https://bing.ee123.net/img/rand?artid=146231794
image: https://bing.ee123.net/img/rand?artid=146231794
img: https://bing.ee123.net/img/rand?artid=146231794
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     虚幻FPS开发 day02:开枪以及光线追综
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <h2>
     0.下面所有的操作都是基于day01的基础上开始的
    </h2>
    <h2>
     1.开火音效
    </h2>
    <p>
     <strong>
      首先设置音效资产变量，在蓝图中动态的设置音效资产
     </strong>
    </p>
    <p>
     <img alt="" height="78" src="https://i-blog.csdnimg.cn/direct/d9bf3c2f8bae47d9a11bcfc8cfdcc0d9.png" width="1004"/>
    </p>
    <p>
     <strong>
      绑定开火事件，在输入事件中设置鼠标左键按下事件
     </strong>
    </p>
    <p>
     <img alt="" height="140" src="https://i-blog.csdnimg.cn/direct/3f05d9cd684449c4b0eeb79b8d5d0e3d.png" width="740"/>
    </p>
    <p>
     <strong>
      在代码中设置当鼠标左键按下时对应的槽函数，
     </strong>
    </p>
    <p>
     <img alt="" height="32" src="https://i-blog.csdnimg.cn/direct/1bfb904201f145c2ac8e565980df8519.png" width="977"/>
    </p>
    <p>
     <img alt="" height="153" src="https://i-blog.csdnimg.cn/direct/71126d30ac804486bb62082dc188a57a.png" width="871"/>
    </p>
    <p>
     <strong>
      绑定输入事件和槽函数之间的关系
     </strong>
    </p>
    <p>
     <img alt="" height="51" src="https://i-blog.csdnimg.cn/direct/3d5686e40a4e417ea4bf6c1ccfc813bc.png" width="1055"/>
    </p>
    <p>
     <strong>
      获取开火资产
     </strong>
    </p>
    <p>
     <a href="https://github.com/DruidMech/UE4-CPP-Shooter-Series" title="GitHub - DruidMech/UE4-CPP-Shooter-Series: Unreal Engine C++ Shooter Series Project">
      GitHub - DruidMech/UE4-CPP-Shooter-Series: Unreal Engine C++ Shooter Series Project
     </a>
    </p>
    <p>
     <img alt="" height="745" src="https://i-blog.csdnimg.cn/direct/d6517295d197499981de3029d08f689d.png" width="1402"/>
    </p>
    <p>
     <strong>
      创建音效蓝图
     </strong>
    </p>
    <p>
     <img alt="" height="136" src="https://i-blog.csdnimg.cn/direct/f3d429e42a094e58b82b0f671ab74590.png" width="545"/>
    </p>
    <p>
     <img alt="" height="339" src="https://i-blog.csdnimg.cn/direct/8928f9d202f74f2682a039406070ae22.png" width="750"/>
    </p>
    <p>
     <strong>
      在BP_Character中设置资产
     </strong>
    </p>
    <p>
     <img alt="" height="148" src="https://i-blog.csdnimg.cn/direct/0d7a54c20e084c8190a163b0390ddd7e.png" width="780"/>
    </p>
    <p>
     <strong>
      至此，开火音效已经实现
     </strong>
    </p>
    <p>
    </p>
    <h2>
     <strong>
      2.开火粒子特效
     </strong>
    </h2>
    <p>
     <strong>
      首先创建开火粒子特效变量以动态绑定资产，在我看来蓝图类就像是配置文件
     </strong>
    </p>
    <p>
     <img alt="" height="80" src="https://i-blog.csdnimg.cn/direct/ff1c492a8b464ef8bfd7d5f5c290c26c.png" width="1040"/>
    </p>
    <p>
     <strong>
      在鼠标左键点击开火时调用的回调函数 FireWeapon 中在指定的位置生成粒子特效
     </strong>
    </p>
    <p>
     <strong>
      该位置为武器的枪口，所以需要在武器枪口创建一个插槽，用来生成后续的粒子特效
     </strong>
    </p>
    <p>
     <strong>
      打开蓝图Cahracter，点击对应的网格体，跳转到对应的资产位置并打开
     </strong>
    </p>
    <p>
     <img alt="" height="872" src="https://i-blog.csdnimg.cn/direct/204f117c1e054b25aa5c27888be1f516.png" width="2417"/>
    </p>
    <p>
     <strong>
      点击骨骼
     </strong>
    </p>
    <p>
     <img alt="" height="145" src="https://i-blog.csdnimg.cn/direct/10b3e5e52d49473980a9d2b4e7933ed9.png" width="745"/>
    </p>
    <p>
     <strong>
      点击武器，在武器下新建一个插槽
     </strong>
    </p>
    <p>
     <img alt="" height="366" src="https://i-blog.csdnimg.cn/direct/7d5604112816456b8c7e735b33d4a7e4.png" width="692"/>
    </p>
    <p>
     <strong>
      我这边已经添加好了
     </strong>
    </p>
    <p>
     <strong>
      由于后期需要获取插槽的向前向量，所以此处将X轴调整为枪口方向
     </strong>
    </p>
    <p>
     <img alt="" height="163" src="https://i-blog.csdnimg.cn/direct/a43a51e859d743b0a05f73aa36278e19.png" width="219"/>
    </p>
    <p>
    </p>
    <p>
     <strong>
      开火粒子特效资产
     </strong>
    </p>
    <p>
     <strong>
      在上一节导入的资产包中已包含
     </strong>
    </p>
    <p>
     <img alt="" height="188" src="https://i-blog.csdnimg.cn/direct/8c60c15bb677402194a8364fde25d6c4.png" width="915"/>
    </p>
    <p>
     <strong>
      由于该资产下开一枪会蹦出三个子弹，修改所有的发射器
     </strong>
    </p>
    <p>
     <img alt="" height="1105" src="https://i-blog.csdnimg.cn/direct/6079e501cf6441fabe286ab2efbf0efe.png" width="1008"/>
    </p>
    <p>
     <img alt="" height="204" src="https://i-blog.csdnimg.cn/direct/fe6a5f0c2a1140cea1005b3481854bf5.png" width="1720"/>
    </p>
    <p>
     <strong>
      修改好后，在蓝图Character中设置该资产引用
     </strong>
    </p>
    <p>
     <img alt="" height="95" src="https://i-blog.csdnimg.cn/direct/68fa901a5338435bb05e131ab226cfac.png" width="708"/>
    </p>
    <p>
     <strong>
      在对应的回调函数中先获取武器插槽，在生成枪口火焰
     </strong>
    </p>
    <p>
     <img alt="" height="181" src="https://i-blog.csdnimg.cn/direct/7c4844cab83d42469fc15d1f1683f4a6.png" width="1277"/>
    </p>
    <p>
     <strong>
      遇到头文件缺失问题，如果之间说的跳转到对应的.h文件在切换.cpp文件获取头文件的方式不奏效，可以采取下面这种，在下载的虚幻编辑器中
     </strong>
    </p>
    <p>
     <img alt="" height="241" src="https://i-blog.csdnimg.cn/direct/5f892cb26ff941d5b52d181e4a25c710.png" width="1088"/>
    </p>
    <p>
     <img alt="" height="399" src="https://i-blog.csdnimg.cn/direct/b5e9dc974a36442c95104e6de5ec4042.png" width="1020"/>
    </p>
    <p>
     <img alt="" height="996" src="https://i-blog.csdnimg.cn/direct/4a86b4a27ed940caa37382bfb9c4f1ac.png" width="978"/>
    </p>
    <p>
    </p>
    <h2>
     3.开枪蒙太奇
    </h2>
    <p>
     <strong>
      在c++类中创建蒙太奇动画变量，供蓝图Character添加该资产
     </strong>
    </p>
    <p>
     <img alt="" height="78" src="https://i-blog.csdnimg.cn/direct/54e3721f919c4c4a83d261d727899cdd.png" width="996"/>
    </p>
    <p>
     <strong>
      在编辑器中创建开枪蒙太奇动画
     </strong>
    </p>
    <p>
     <img alt="" height="227" src="https://i-blog.csdnimg.cn/direct/adba6c58ae5d41f5a4539103545a3d9d.png" width="674"/>
    </p>
    <p>
     <img alt="" height="710" src="https://i-blog.csdnimg.cn/direct/48bdb52cc5b14d3992fff17721b2304f.png" width="2529"/>
    </p>
    <p>
     <strong>
      在蓝图Character中添加对应的动画蒙太奇资产
     </strong>
    </p>
    <p>
     <strong>
      在开火对应的回调函数中添加播放开火蒙太奇
     </strong>
    </p>
    <p>
     <img alt="" height="173" src="https://i-blog.csdnimg.cn/direct/1114cf90be20468c985660bcc43467a7.png" width="1016"/>
    </p>
    <p>
    </p>
    <h2>
     4.碰撞特效
    </h2>
    <p>
     <strong>
      创建变量，在蓝图Character中动态的导入资产
     </strong>
    </p>
    <p>
     <img alt="" height="82" src="https://i-blog.csdnimg.cn/direct/8e84501fe5764a4487f678ddeb3f195e.png" width="1011"/>
    </p>
    <p>
     <img alt="" height="109" src="https://i-blog.csdnimg.cn/direct/2daa3c8db0dd406fbe892e777319d873.png" width="666"/>
    </p>
    <p>
     <img alt="" height="128" src="https://i-blog.csdnimg.cn/direct/4feb9a8ed7614d7eb2db29c25f51f069.png" width="1210"/>
    </p>
    <p>
    </p>
    <h2>
     5.轨迹粒子特效
    </h2>
    <p>
     <strong>
      同上
     </strong>
    </p>
    <p>
     <img alt="" height="87" src="https://i-blog.csdnimg.cn/direct/a787b6ccec864d83aa2bae6e2b3fc2fe.png" width="1013"/>
    </p>
    <p>
     <strong>
      导入轨迹资产
     </strong>
    </p>
    <p>
     <img alt="" height="458" src="https://i-blog.csdnimg.cn/direct/b1471b05364e4bcaa184d5a13852aabc.png" width="1212"/>
    </p>
    <p>
     <strong>
      在蓝图Character中导入该资产
     </strong>
    </p>
    <p>
     <img alt="" height="92" src="https://i-blog.csdnimg.cn/direct/dd1797f51dd842bc81eea86e1a574e0a.png" width="684"/>
    </p>
    <p>
     <strong>
      在对应的回调函数中，绘制射线
     </strong>
    </p>
    <p>
     <img alt="" height="241" src="https://i-blog.csdnimg.cn/direct/589d1e1485484d7680e584530ebfe4b2.png" width="1342"/>
    </p>
    <h2>
     <br/>
     <br/>
     6.准星
    </h2>
    <h3>
     绑定信号槽
    </h3>
    <p>
     <strong>
      设置新的按键输入，鼠标右键点击瞄准，再次点击正常视角
     </strong>
    </p>
    <p>
     <img alt="" height="67" src="https://i-blog.csdnimg.cn/direct/b0335be3e9f149788cef1fdc8655e1f3.png" width="625"/>
    </p>
    <p>
     <strong>
      设置bool变量判断是否在瞄准
     </strong>
    </p>
    <p>
     <img alt="" height="76" src="https://i-blog.csdnimg.cn/direct/5d5619b6a9904eacb5dcd2411d3676bb.png" width="1004"/>
    </p>
    <p>
     <strong>
      绑定对应的回调函数
     </strong>
    </p>
    <p>
     <img alt="" height="52" src="https://i-blog.csdnimg.cn/direct/c0683f6d454d4a43907c1da4da937f8b.png" width="1150"/>
    </p>
    <h3>
    </h3>
    <h3>
     绘制准星
    </h3>
    <p>
     <strong>
      创建HUD
     </strong>
    </p>
    <p>
     <img alt="" height="290" src="https://i-blog.csdnimg.cn/direct/bf2e1ef1ade04e7bba9e280fcf1877f9.png" width="953"/>
    </p>
    <p>
     <img alt="" height="359" src="https://i-blog.csdnimg.cn/direct/a588d256fc2d45dda108fadefb10019f.png" width="1488"/>
    </p>
    <p>
     <img alt="" height="706" src="https://i-blog.csdnimg.cn/direct/40a86619b4db4d599980eee9291bda3b.png" width="2406"/>
    </p>
    <p>
     <strong>
      获取准星资产
     </strong>
    </p>
    <p>
     <img alt="" height="540" src="https://i-blog.csdnimg.cn/direct/9c1b0c34e12248a6aa75b6b457732a6a.png" width="1675"/>
    </p>
    <p>
     <img alt="" height="436" src="https://i-blog.csdnimg.cn/direct/da6114b2ff7d4babadf3b34569390883.png" width="1677"/>
    </p>
    <h2>
    </h2>
    <h2>
     7.完整的鼠标左键点击对应的开火回调函数
    </h2>
    <p>
     <img alt="" height="1124" src="https://i-blog.csdnimg.cn/direct/b49a1fc409634ced8358ae9b38dfaf69.png" width="1602"/>
    </p>
    <p>
     <img alt="" height="1020" src="https://i-blog.csdnimg.cn/direct/1fd6d6753e4b4566934fb6a95fe5a7e8.png" width="1769"/>
    </p>
    <p>
    </p>
    <h2>
     8.视角缩放的插值
    </h2>
    <p>
     <img alt="" height="302" src="https://i-blog.csdnimg.cn/direct/69e21eefafe74d57b1c8e5ebcd2149d7.png" width="1417"/>
    </p>
    <p>
     <img alt="" height="82" src="https://i-blog.csdnimg.cn/direct/f62e72d3de7649e687c86997db8eec33.png" width="1046"/>
    </p>
    <p>
    </p>
    <h2>
     9.至此开火的音效，火焰，射线以及受击特效和准星瞄准已经设置完毕
    </h2>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e63:73646e2e6e65742f79756d69616e7869616f6c616e676a752f:61727469636c652f64657461696c732f313436323331373934" class_="artid" style="display:none">
 </p>
</div>


