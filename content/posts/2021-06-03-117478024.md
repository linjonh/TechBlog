---
layout: post
title: "HarmonyOS实战Hello-World"
date: 2021-06-03 08:00:44 +0800
description: "昨天看了会那个CSDN上的HarmonyOS 发布会,感慨挺多，第一个国产终端分布式操作系统，感觉是"
keywords: "harmonyos 分布式软时钟"
categories: ['Ai']
tags: ['新星计划', 'Harmonyos']
artid: "117478024"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=117478024
    alt: "HarmonyOS实战Hello-World"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=117478024
featuredImagePreview: https://bing.ee123.net/img/rand?artid=117478024
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     HarmonyOS实战—Hello World
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-tomorrow-night-eighties" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h4>
     <a id="_2">
     </a>
     写在前面
    </h4>
    <p>
     昨天看了会那个CSDN上的HarmonyOS 发布会,感慨挺多，第一个国产终端分布式操作系统，感觉是有时代意义的存在，感觉作为一个开发人员来说，要做出有意义的东西才行。所以耐不住好奇，学了一小会HarmonyOS开发,没有机器，只有一个在线模拟器，所以也没办法做分布式模拟，以后要是有机会整体学下。
     <strong>
      <a href="https://developer.harmonyos.com/cn/home/" rel="nofollow">
       笔记都是文档上的东西，建议大家直接看文档学习：https://developer.harmonyos.com/cn/home0
      </a>
     </strong>
     . 2021.6.02
    </p>
    <hr/>
    <h6>
     <a id="_5">
     </a>
     发布会笔记：
    </h6>
    <ul>
     <li>
      全栈解耦
     </li>
     <li>
      软总线
     </li>
     <li>
      超级终端连接
     </li>
     <li>
      音画同步：软时钟，抗干扰算法
     </li>
     <li>
      应用跨设备流转(硬件抽象)
     </li>
     <li>
      原子化服务卡片
     </li>
     <li>
      渲染和逻辑的分离
     </li>
    </ul>
    <h6>
     <a id="HarmonyOS__13">
     </a>
     HarmonyOS 开发：
    </h6>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/38c4840f1e6dcb7370d96f7c873ee4e7.png"/>
    </p>
    <p>
     建议小伙伴直接看文档学习，
     <strong>
      IDE安装教程
     </strong>
     啥的，全都有。文档很详细：
    </p>
    <ul>
     <li>
      <p>
       代码：
       <a href="https://gitee.com/openharmony?utm_source=alading&amp;utm_campaign=repo" rel="nofollow">
        OpenHarmony
       </a>
      </p>
     </li>
     <li>
      <p>
       Demo：
       <a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/hello_world-0000001054516888" rel="nofollow">
        新建工程的文档：创建和运行Hello World
       </a>
      </p>
     </li>
     <li>
      <p>
       Hello World代码：
       <a href="https://gitee.com/liruilonger/harmony-os_-hello-world" rel="nofollow">
        git@gitee.com:liruilonger/harmony-os_-hello-world.git
       </a>
       <br/>
       <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/b6c3153c5035a50aea37d130f9fb36c6.png">
        <br/>
        <code>
         MainAbility是应用所具备能力的抽象
        </code>
        <br/>
        <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/e4469d95384b265ff276ab76f7ed73ee.png">
         <br/>
         <code>
          具体的页面
         </code>
         <br/>
         <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/006c0aa4aea7f70f0e3bc4e38b9941d3.png">
          <br/>
          <code>
           实现一个按钮的页面。
          </code>
         </img>
        </img>
       </img>
      </p>
     </li>
    </ul>
    <pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>liruilong<span class="token punctuation">.</span>myapplication<span class="token punctuation">.</span>slice</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>liruilong<span class="token punctuation">.</span>myapplication<span class="token punctuation">.</span></span><span class="token class-name">ResourceTable</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">ohos<span class="token punctuation">.</span>aafwk<span class="token punctuation">.</span>ability<span class="token punctuation">.</span></span><span class="token class-name">AbilitySlice</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">ohos<span class="token punctuation">.</span>aafwk<span class="token punctuation">.</span>content<span class="token punctuation">.</span></span><span class="token class-name">Intent</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">ohos<span class="token punctuation">.</span>agp<span class="token punctuation">.</span>components<span class="token punctuation">.</span></span><span class="token class-name">Button</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MainAbilitySlice</span> <span class="token keyword">extends</span> <span class="token class-name">AbilitySlice</span> <span class="token punctuation">{<!-- --></span>

    <span class="token comment">/*
     * HarmonyOS提供了Ability和AbilitySlice两个基础类，
     * 一个有界面的Ability可以由一个或多个AbilitySlice构成，
     * AbilitySlice主要用于承载单个页面的具体逻辑实现和界面UI，
     * 是应用显示、运行和跳转的最小单元。
     * */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onStart</span><span class="token punctuation">(</span><span class="token class-name">Intent</span> intent<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onStart</span><span class="token punctuation">(</span>intent<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//使用setUIContent方法加载“ability_main.xml”布局。</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">setUIContent</span><span class="token punctuation">(</span><span class="token class-name">ResourceTable<span class="token punctuation">.</span>Layout_ability_main</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Button</span> button <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Button</span><span class="token punctuation">)</span> <span class="token function">findComponentById</span><span class="token punctuation">(</span><span class="token class-name">ResourceTable<span class="token punctuation">.</span>Id_button</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onActive</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onActive</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onForeground</span><span class="token punctuation">(</span><span class="token class-name">Intent</span> intent<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onForeground</span><span class="token punctuation">(</span>intent<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre>
    <pre><code class="prism language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>DirectionalLayout</span>
    <span class="token attr-name"><span class="token namespace">xmlns:</span>ohos</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.huawei.com/res/ohos<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">ohos:</span>height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">ohos:</span>width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">ohos:</span>orientation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vertical<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Text</span>
        <span class="token attr-name"><span class="token namespace">ohos:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$+id:text<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">ohos:</span>height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_content<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">ohos:</span>width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_content<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">ohos:</span>background_element</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$graphic:background_ability_main<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">ohos:</span>layout_alignment</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>horizontal_center<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">ohos:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$string:mainability_HelloWorld<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">ohos:</span>text_size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>20px<span class="token punctuation">"</span></span>
        <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>
        <span class="token attr-name"><span class="token namespace">ohos:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$+id:button<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">ohos:</span>width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_content<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">ohos:</span>height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_content<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">ohos:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Li Ruilong<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">ohos:</span>text_size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>19fp<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">ohos:</span>text_color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#FFFFFF<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">ohos:</span>top_padding</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>8vp<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">ohos:</span>bottom_padding</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>8vp<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">ohos:</span>right_padding</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>70vp<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">ohos:</span>left_padding</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>70vp<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">ohos:</span>center_in_parent</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">ohos:</span>below</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$id:text<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">ohos:</span>margin</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>10vp<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">ohos:</span>background_element</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$graphic:background_button<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>DirectionalLayout</span><span class="token punctuation">&gt;</span></span>
</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/d3b8251e7674d81ffbd1cc5c79387ca0.png"/>
    </p>
    <h5>
     <a id="_99">
     </a>
     <code>
      增加跳转事件
     </code>
    </h5>
    <p>
     java类的形式写一个跳转页面
    </p>
    <pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>liruilong<span class="token punctuation">.</span>myapplication<span class="token punctuation">.</span>slice</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>liruilong<span class="token punctuation">.</span>myapplication<span class="token punctuation">.</span></span><span class="token class-name">ResourceTable</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">ohos<span class="token punctuation">.</span>aafwk<span class="token punctuation">.</span>ability<span class="token punctuation">.</span></span><span class="token class-name">AbilitySlice</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">ohos<span class="token punctuation">.</span>aafwk<span class="token punctuation">.</span>content<span class="token punctuation">.</span></span><span class="token class-name">Intent</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">ohos<span class="token punctuation">.</span>agp<span class="token punctuation">.</span>colors<span class="token punctuation">.</span></span><span class="token class-name">RgbColor</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">ohos<span class="token punctuation">.</span>agp<span class="token punctuation">.</span>components<span class="token punctuation">.</span></span><span class="token class-name">DependentLayout</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">ohos<span class="token punctuation">.</span>agp<span class="token punctuation">.</span>components<span class="token punctuation">.</span></span><span class="token class-name">Text</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">ohos<span class="token punctuation">.</span>agp<span class="token punctuation">.</span>components<span class="token punctuation">.</span>element<span class="token punctuation">.</span></span><span class="token class-name">ShapeElement</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">ohos<span class="token punctuation">.</span>agp<span class="token punctuation">.</span>components<span class="token punctuation">.</span></span><span class="token class-name">DependentLayout</span><span class="token punctuation">.</span><span class="token class-name">LayoutConfig</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">ohos<span class="token punctuation">.</span>agp<span class="token punctuation">.</span>utils<span class="token punctuation">.</span></span><span class="token class-name">Color</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SecondAbilitySlice</span> <span class="token keyword">extends</span> <span class="token class-name">AbilitySlice</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onStart</span><span class="token punctuation">(</span><span class="token class-name">Intent</span> intent<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onStart</span><span class="token punctuation">(</span>intent<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 声明布局</span>
        <span class="token class-name">DependentLayout</span> myLayout <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DependentLayout</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 设置布局宽高</span>
        myLayout<span class="token punctuation">.</span><span class="token function">setWidth</span><span class="token punctuation">(</span><span class="token class-name">LayoutConfig</span><span class="token punctuation">.</span><span class="token constant">MATCH_PARENT</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        myLayout<span class="token punctuation">.</span><span class="token function">setHeight</span><span class="token punctuation">(</span><span class="token class-name">LayoutConfig</span><span class="token punctuation">.</span><span class="token constant">MATCH_PARENT</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 设置布局背景为白色</span>
        <span class="token class-name">ShapeElement</span> background <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ShapeElement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        background<span class="token punctuation">.</span><span class="token function">setRgbColor</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">RgbColor</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        myLayout<span class="token punctuation">.</span><span class="token function">setBackground</span><span class="token punctuation">(</span>background<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 创建一个文本</span>
        <span class="token class-name">Text</span> text <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        text<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">"Hi there"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        text<span class="token punctuation">.</span><span class="token function">setWidth</span><span class="token punctuation">(</span><span class="token class-name">LayoutConfig</span><span class="token punctuation">.</span><span class="token constant">MATCH_PARENT</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        text<span class="token punctuation">.</span><span class="token function">setTextSize</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        text<span class="token punctuation">.</span><span class="token function">setTextColor</span><span class="token punctuation">(</span><span class="token class-name">Color</span><span class="token punctuation">.</span><span class="token constant">BLACK</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 设置文本的布局</span>
        <span class="token class-name">DependentLayout<span class="token punctuation">.</span>LayoutConfig</span> textConfig <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DependentLayout<span class="token punctuation">.</span>LayoutConfig</span><span class="token punctuation">(</span><span class="token class-name">LayoutConfig</span><span class="token punctuation">.</span><span class="token constant">MATCH_CONTENT</span><span class="token punctuation">,</span> <span class="token class-name">LayoutConfig</span><span class="token punctuation">.</span><span class="token constant">MATCH_CONTENT</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        textConfig<span class="token punctuation">.</span><span class="token function">addRule</span><span class="token punctuation">(</span><span class="token class-name">LayoutConfig</span><span class="token punctuation">.</span><span class="token constant">CENTER_IN_PARENT</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        text<span class="token punctuation">.</span><span class="token function">setLayoutConfig</span><span class="token punctuation">(</span>textConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>
        myLayout<span class="token punctuation">.</span><span class="token function">addComponent</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">setUIContent</span><span class="token punctuation">(</span>myLayout<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre>
    <p>
     <code>
      添加跳转逻辑
     </code>
    </p>
    <pre><code class="prism language-java">  <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onStart</span><span class="token punctuation">(</span><span class="token class-name">Intent</span> intent<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onStart</span><span class="token punctuation">(</span>intent<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//使用setUIContent方法加载“ability_main.xml”布局。</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">setUIContent</span><span class="token punctuation">(</span><span class="token class-name">ResourceTable<span class="token punctuation">.</span>Layout_ability_main</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Button</span> button <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Button</span><span class="token punctuation">)</span> <span class="token function">findComponentById</span><span class="token punctuation">(</span><span class="token class-name">ResourceTable<span class="token punctuation">.</span>Id_button</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 点击按钮跳转至第二个页面</span>
        button<span class="token punctuation">.</span><span class="token function">setClickedListener</span><span class="token punctuation">(</span>listener <span class="token operator">-&gt;</span> <span class="token function">present</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">SecondAbilitySlice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Intent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/f6a17f2516aa2a692a96d4060ac7c97a.png"/>
    </p>
    <h3>
     <a id="Ability_159">
     </a>
     Ability
    </h3>
    <h4>
     <a id="Ability_160">
     </a>
     Ability概述
    </h4>
    <p>
     Ability是应用所具备能力的抽象，也是应用程序的重要组成部分。一个应用可以具备多种能力（即可以包含多个Ability），
     <code>
      HarmonyOS
     </code>
     支持应用以
     <code>
      Ability
     </code>
     为单位进行部署。Ability可以分为
     <code>
      FA（Feature Ability）
     </code>
     和
     <code>
      PA（Particle Ability）
     </code>
     两种类型，每种类型为开发者提供了不同的模板，以便实现不同的业务功能。
    </p>
    <ul>
     <li>
      <code>
       FA支持Page Ability
      </code>
      ：Page模板是FA唯一支持的模板，用于提供与用户交互的能力。一个Page实例可以包含一组相关页面，每个页面用一个AbilitySlice实例表示。
     </li>
     <li>
      <code>
       PA支持Service Ability和Data Ability
      </code>
      ：
      <ul>
       <li>
        Service模板：用于提供后台运行任务的能力。
       </li>
       <li>
        Data模板：用于对外部提供统一的数据访问抽象。
        <br/>
        在配置文件
        <code>
         （config.json）
        </code>
        中
        <code>
         注册Ability
        </code>
        时，可以通过
        <code>
         配置Ability元素
        </code>
        中的“type”属性来指定Ability模板类型，示例如下。
       </li>
      </ul>
     </li>
    </ul>
    <pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
  <span class="token string-property property">"app"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string-property property">"bundleName"</span><span class="token operator">:</span> <span class="token string">"com.liruilong.myapplication"</span><span class="token punctuation">,</span>
    <span class="token string-property property">"vendor"</span><span class="token operator">:</span> <span class="token string">"liruilong"</span><span class="token punctuation">,</span>
    <span class="token string-property property">"version"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      <span class="token string-property property">"code"</span><span class="token operator">:</span> <span class="token number">1000000</span><span class="token punctuation">,</span>
      <span class="token string-property property">"name"</span><span class="token operator">:</span> <span class="token string">"1.0.0"</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string-property property">"apiVersion"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      <span class="token string-property property">"compatible"</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
      <span class="token string-property property">"target"</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
      <span class="token string-property property">"releaseType"</span><span class="token operator">:</span> <span class="token string">"Release"</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string-property property">"deviceConfig"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string-property property">"module"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string-property property">"package"</span><span class="token operator">:</span> <span class="token string">"com.liruilong.myapplication"</span><span class="token punctuation">,</span>
    <span class="token string-property property">"name"</span><span class="token operator">:</span> <span class="token string">".MyApplication"</span><span class="token punctuation">,</span>
    <span class="token string-property property">"deviceType"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">"phone"</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string-property property">"distro"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      <span class="token string-property property">"deliveryWithInstall"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token string-property property">"moduleName"</span><span class="token operator">:</span> <span class="token string">"entry"</span><span class="token punctuation">,</span>
      <span class="token string-property property">"moduleType"</span><span class="token operator">:</span> <span class="token string">"entry"</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string-property property">"abilities"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{<!-- --></span>
        <span class="token string-property property">"skills"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{<!-- --></span>
            <span class="token string-property property">"entities"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
              <span class="token string">"entity.system.home"</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token string-property property">"actions"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
              <span class="token string">"action.system.home"</span>
            <span class="token punctuation">]</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token string-property property">"orientation"</span><span class="token operator">:</span> <span class="token string">"unspecified"</span><span class="token punctuation">,</span>
        <span class="token string-property property">"name"</span><span class="token operator">:</span> <span class="token string">"com.liruilong.myapplication.MainAbility"</span><span class="token punctuation">,</span>
        <span class="token string-property property">"icon"</span><span class="token operator">:</span> <span class="token string">"$media:icon"</span><span class="token punctuation">,</span>
        <span class="token string-property property">"description"</span><span class="token operator">:</span> <span class="token string">"$string:mainability_description"</span><span class="token punctuation">,</span>
        <span class="token string-property property">"label"</span><span class="token operator">:</span> <span class="token string">"$string:app_name"</span><span class="token punctuation">,</span>
        <span class="token string-property property">"type"</span><span class="token operator">:</span> <span class="token string">"page"</span><span class="token punctuation">,</span>
        <span class="token string-property property">"launchType"</span><span class="token operator">:</span> <span class="token string">"standard"</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     其中，“type”的取值可以为“page”、“service”或“data”，分别代表Page模板、Service模板、Data模板。
    </p>
    <h6>
     <a id="httpsdeveloperharmonyoscomcndocsdocumentationdocguidesabilityabilityoverview0000000000029852_220">
     </a>
     <a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/ability-ability-overview-0000000000029852" rel="nofollow">
      相关实例
     </a>
    </h6>
    <h5>
     <a id="PageAbilitySlice_221">
     </a>
     Page与AbilitySlice
    </h5>
    <p>
     Page模板（以下简称“Page”）是FA唯一支持的模板，用于提供与用户交互的能力。一个
     <code>
      Page
     </code>
     可以由一个或多个
     <code>
      AbilitySlice
     </code>
     构成，
     <code>
      AbilitySlice是指应用的单个页面及其控制逻辑的总和
     </code>
     。
    </p>
    <p>
     当一个Page由
     <code>
      多个AbilitySlice
     </code>
     共同构成时，这些AbilitySlice页面提供的
     <code>
      业务能力应具有高度相关性
     </code>
     。例如，新闻浏览功能可以通过一个Page来实现，其中包含了两个AbilitySlice：
     <code>
      一个AbilitySlice
     </code>
     用于展示新闻列表，
     <code>
      另一个AbilitySlice
     </code>
     用于展示新闻详情。
    </p>
    <h6>
     <a id="AbilitySlice_226">
     </a>
     AbilitySlice路由配置
    </h6>
    <p>
     虽然一个Page可以包含多个AbilitySlice，但是Page进入前台时界面
     <code>
      默认只展示一个AbilitySlice
     </code>
     。默认展示的AbilitySlice是通过
     <code>
      setMainRoute()
     </code>
     方法来指定的。如果需要更改默认展示的
     <code>
      AbilitySlice
     </code>
     ，可以通过
     <code>
      addActionRoute()方法
     </code>
     为此AbilitySlice配置一条路由规则。
    </p>
    <pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyAbility</span> <span class="token keyword">extends</span> <span class="token class-name">Ability</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onStart</span><span class="token punctuation">(</span><span class="token class-name">Intent</span> intent<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onStart</span><span class="token punctuation">(</span>intent<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// set the main route</span>
        <span class="token function">setMainRoute</span><span class="token punctuation">(</span><span class="token class-name">MainSlice</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// set the action route</span>
        <span class="token function">addActionRoute</span><span class="token punctuation">(</span><span class="token string">"action.pay"</span><span class="token punctuation">,</span> <span class="token class-name">PaySlice</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">addActionRoute</span><span class="token punctuation">(</span><span class="token string">"action.scan"</span><span class="token punctuation">,</span> <span class="token class-name">ScanSlice</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
    <span class="token string-property property">"module"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
        <span class="token string-property property">"abilities"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{<!-- --></span>
                <span class="token string-property property">"skills"</span><span class="token operator">:</span><span class="token punctuation">[</span>
                    <span class="token punctuation">{<!-- --></span>
                        <span class="token string-property property">"actions"</span><span class="token operator">:</span><span class="token punctuation">[</span>
                            <span class="token string">"action.pay"</span><span class="token punctuation">,</span>
                            <span class="token string">"action.scan"</span>
                        <span class="token punctuation">]</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">]</span>
                <span class="token operator">...</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
        <span class="token operator">...</span>
    <span class="token punctuation">}</span>
    <span class="token operator">...</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     此时，当其他Page实例期望导航到此AbilitySlice时，可以在Intent中指定Action，详见不同Page间导航。
    </p>
    <h5>
     <a id="Page_265">
     </a>
     Page生命周期回调
    </h5>
    <p>
     Page生命周期的不同状态转换及其对应的回调，如图1所示。
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/bf433ac67fc46f836768d3450b2d7142.png"/>
    </p>
    <h5>
     <a id="Service_Ability_269">
     </a>
     Service Ability基本概念
    </h5>
    <p>
     基于
     <code>
      Service
     </code>
     模板的
     <code>
      Ability
     </code>
     （以下简称“Service”）主要用于
     <code>
      后台运行任务
     </code>
     （如执行音乐播放、文件下载等），但
     <code>
      不提供
     </code>
     用户交互界面。
     <code>
      Service
     </code>
     可由其他应用或
     <code>
      Ability启动
     </code>
     ，即使用户切换到其他应用，
     <code>
      Service
     </code>
     仍将在后台继续运行。
    </p>
    <p>
     <code>
      Service
     </code>
     是
     <code>
      单实例
     </code>
     的。在一个设备上，相同的
     <code>
      Service
     </code>
     只会存在一个实例。如果
     <code>
      多个Ability
     </code>
     共用这个
     <code>
      实例
     </code>
     ，只有当与Service绑定的所有Ability都退出后，Service才能够退出。由于Service是在
     <code>
      主线程里
     </code>
     执行的，因此，如果在Service里面的操作时间过长，开发者必须在
     <code>
      Service
     </code>
     里创建
     <code>
      新的线程
     </code>
     来处理（详见线程间通信），防止造成
     <code>
      主线程阻塞
     </code>
     ，应用程序无响应。
    </p>
    <h5>
     <a id="Service_Ability_274">
     </a>
     Service Ability生命周期
    </h5>
    <p>
     与
     <code>
      Page
     </code>
     类似，
     <code>
      Service
     </code>
     也拥有生命周期，如图1所示。根据调用方法的不同，其生命周期有以下两种路径：
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/717128c3a91851b678569ab4baa4aacf.png"/>
    </p>
    <ul>
     <li>
      <code>
       启动Service
      </code>
      该Service在其他Ability调用
      <code>
       startAbility()
      </code>
      时创建，然后保持运行。其他Ability通过调用
      <code>
       stopAbility()
      </code>
      来停止Service，Service停止后，系统会将其销毁。
     </li>
     <li>
      <code>
       连接Service
      </code>
      该Service在其他Ability调用
      <code>
       connectAbility()
      </code>
      时创建，客户端可通过调用
      <code>
       disconnectAbility​()
      </code>
      断开连接。多个客户端可以绑定到相同Service，而且当所有绑定全部取消后，系统即会销毁该Service。
     </li>
    </ul>
    <hr/>
    <h3>
     <a id="Demo_280">
     </a>
     嗯，Demo没法整，没机器，只学理论感觉意义不大，所以以后在学!
    </h3>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
  <div class="blog-extension-box" id="blogExtensionBox" style="width:400px;margin:auto;margin-top:12px">
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f73616e6865777579616e672f:61727469636c652f64657461696c732f313137343738303234" class_="artid" style="display:none">
 </p>
</div>


