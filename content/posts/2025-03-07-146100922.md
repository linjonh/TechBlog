---
layout: post
title: "redis的淘汰策略"
date: 2025-03-07 17:27:03 +0800
description: "Redis 的淘汰策略（Eviction Policy）是指当 Redis 内存不足时，如何选择删除哪些数据来腾出空间。"
keywords: "redis的淘汰策略"
categories: ['Redis']
tags: ['数据库', 'Redis', 'Java']
artid: "146100922"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146100922
    alt: "redis的淘汰策略"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146100922
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146100922
cover: https://bing.ee123.net/img/rand?artid=146100922
image: https://bing.ee123.net/img/rand?artid=146100922
img: https://bing.ee123.net/img/rand?artid=146100922
---

# redis的淘汰策略

Redis 的淘汰策略（Eviction Policy）是指当 Redis 内存不足时，如何选择删除哪些数据来腾出空间。以下是 Redis
支持的几种淘汰策略，用通俗的话解释它们的特点：

* * *

#### 1\. **noeviction（不淘汰）**

  * **特点** ：

    * 当内存不足时，新写入的数据会报错，旧数据不会被删除。

  * **适用场景** ：

    * 数据非常重要，绝对不能丢失。

  * **通俗解释** ：

    * “内存满了？那就别写新数据了，直接报错！”

* * *

#### 2\. **allkeys-lru（最近最少使用）**

  * **特点** ：

    * 从所有 Key 中，删除最近最少使用的 Key。

  * **适用场景** ：

    * 适合大多数场景，优先保留最近常用的数据。

  * **通俗解释** ：

    * “谁最近没用过，就把谁踢出去！”

* * *

#### 3\. **volatile-lru（最近最少使用，仅限过期 Key）**

  * **特点** ：

    * 从设置了过期时间的 Key 中，删除最近最少使用的 Key。

  * **适用场景** ：

    * 只淘汰那些可能会过期的数据，保留永久数据。

  * **通俗解释** ：

    * “只踢那些可能会过期的，而且最近没用的！”

* * *

#### 4\. **allkeys-random（随机淘汰）**

  * **特点** ：

    * 从所有 Key 中，随机删除一个 Key。

  * **适用场景** ：

    * 数据没有明显的访问模式，随机淘汰即可。

  * **通俗解释** ：

    * “随便踢一个，看谁倒霉！”

* * *

#### 5\. **volatile-random（随机淘汰，仅限过期 Key）**

  * **特点** ：

    * 从设置了过期时间的 Key 中，随机删除一个 Key。

  * **适用场景** ：

    * 只淘汰那些可能会过期的数据，随机选择。

  * **通俗解释** ：

    * “只踢那些可能会过期的，随便踢一个！”

* * *

#### 6\. **volatile-ttl（最短存活时间）**

  * **特点** ：

    * 从设置了过期时间的 Key 中，删除剩余存活时间最短的 Key。

  * **适用场景** ：

    * 优先淘汰即将过期的数据。

  * **通俗解释** ：

    * “谁快过期了，就先踢谁！”

* * *

#### 7\. **allkeys-lfu（最少频率使用）**

  * **特点** ：

    * 从所有 Key 中，删除访问频率最低的 Key。

  * **适用场景** ：

    * 适合访问频率有明显差异的场景。

  * **通俗解释** ：

    * “谁用得最少，就把谁踢出去！”

* * *

#### 8\. **volatile-lfu（最少频率使用，仅限过期 Key）**

  * **特点** ：

    * 从设置了过期时间的 Key 中，删除访问频率最低的 Key。

  * **适用场景** ：

    * 只淘汰那些可能会过期的数据，优先淘汰访问频率低的。

  * **通俗解释** ：

    * “只踢那些可能会过期的，而且用得最少的！”

* * *

#### 9\. **总结**

策略名称| 特点| 通俗解释  
---|---|---  
**noeviction**|  内存不足时，新写入数据报错，不删除旧数据| “内存满了？直接报错！”  
**allkeys-lru**|  删除最近最少使用的 Key| “谁最近没用过，就把谁踢出去！”  
**volatile-lru**|  删除设置了过期时间的 Key 中，最近最少使用的 Key| “只踢那些可能会过期的，而且最近没用的！”  
**allkeys-random**|  随机删除一个 Key| “随便踢一个，看谁倒霉！”  
**volatile-random**|  随机删除一个设置了过期时间的 Key| “只踢那些可能会过期的，随便踢一个！”  
**volatile-ttl**|  删除设置了过期时间的 Key 中，剩余存活时间最短的 Key| “谁快过期了，就先踢谁！”  
**allkeys-lfu**|  删除访问频率最低的 Key| “谁用得最少，就把谁踢出去！”  
**volatile-lfu**|  删除设置了过期时间的 Key 中，访问频率最低的 Key| “只踢那些可能会过期的，而且用得最少的！”  
  
* * *

#### 10\. **如何选择淘汰策略？**

  * 如果数据非常重要，不能丢失，选择 **noeviction** 。

  * 如果数据有明确的访问模式，选择 **LRU** 或 **LFU** 。

  * 如果数据没有明显的访问模式，选择 **random** 。

  * 如果数据有过期时间，选择 **volatile** 相关的策略。



