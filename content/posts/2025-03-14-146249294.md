---
layout: post
title: "ä¸ƒSpring-Bootå­¦ä¹ Redisä½¿ç”¨"
date: 2025-03-14 10:04:21 +0800
description: "æœ‰éƒ¨åˆ†å†…å®¹æ˜¯å¸¸ç”¨çš„ï¼Œä¸ºäº†é¿å…æ¯æ¬¡éƒ½æŸ¥è¯¢æ•°æ®åº“ï¼Œå°†éƒ¨åˆ†æ•°æ®å­˜å…¥Redisã€‚Windows ç‰ˆçš„ Redis å®˜æ–¹å·²ä¸å†ç»´æŠ¤ï¼Œä½ å¯ä»¥ä½¿ç”¨ã€‚è¯´æ˜ Redis æœåŠ¡å™¨å·²æˆåŠŸå¯åŠ¨ ğŸ‰ã€‚ä½ å¯ä»¥åœ¨ Controller é‡Œè°ƒç”¨ã€‚åˆ›å»ºä¸€ä¸ª Redis é…ç½®ç±»ï¼Œæ³¨å…¥ã€‚é…ç½® Redis è¿æ¥ä¿¡æ¯ã€‚ï¼ˆå¦‚æ¶ˆæ¯é˜Ÿåˆ—ã€æ’è¡Œæ¦œç­‰ï¼‰ã€‚æä¾›çš„æ–¹æ³•æ¥å­˜å–æ•°æ®ã€‚ï¼ˆå¦‚æ ‡ç­¾ã€å¥½å‹åˆ—è¡¨ç­‰ï¼‰ã€‚æ¥æ“ä½œ Redisã€‚"
keywords: "springboot å¼•å…¥redis6.2.6"
categories: ['æœªåˆ†ç±»']
tags: ['å­¦ä¹ ', 'Spring', 'Redis', 'Boot']
artid: "146249294"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146249294
    alt: "ä¸ƒSpring-Bootå­¦ä¹ Redisä½¿ç”¨"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146249294
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146249294
cover: https://bing.ee123.net/img/rand?artid=146249294
image: https://bing.ee123.net/img/rand?artid=146249294
img: https://bing.ee123.net/img/rand?artid=146249294
---

# ï¼ˆä¸ƒï¼‰Spring Bootå­¦ä¹ â€”â€”Redisä½¿ç”¨

æœ‰éƒ¨åˆ†å†…å®¹æ˜¯å¸¸ç”¨çš„ï¼Œä¸ºäº†é¿å…æ¯æ¬¡éƒ½æŸ¥è¯¢æ•°æ®åº“ï¼Œå°†éƒ¨åˆ†æ•°æ®å­˜å…¥Redisã€‚

**ä¸€ã€ ä¸‹è½½å¹¶å®‰è£… Redis**

Windows ç‰ˆçš„ Redis å®˜æ–¹å·²ä¸å†ç»´æŠ¤ï¼Œä½ å¯ä»¥ä½¿ç”¨ **å¾®è½¯æä¾›çš„ Redis for Windows ç‰ˆæœ¬** æˆ–è€… **ä½¿ç”¨
WSLï¼ˆWindows Subsystem for Linuxï¼‰å®‰è£… Redis** ã€‚

  1. **ä¸‹è½½ Redis for Windows**

     * [ç‚¹å‡»è¿™é‡Œä¸‹è½½ Redis for Windows](https://github.com/microsoftarchive/redis/releases "ç‚¹å‡»è¿™é‡Œä¸‹è½½ Redis for Windows")ï¼ˆæ¨èä¸‹è½½ `Redis-x64-3.2.100.msi`ï¼‰
     * ä¸‹è½½å®Œæˆåï¼Œè¿›è¡Œå®‰è£…ï¼Œå®‰è£…è·¯å¾„å»ºè®®ï¼š`C:\Redis\`
  2. **è§£å‹å¹¶è¿›å…¥ Redis ç›®å½•**

`cd C:\Redis `

  3. **å¯åŠ¨ Redis æœåŠ¡å™¨**

`redis-server.exe redis.windows.conf `

  4. **éªŒè¯ Redis æ˜¯å¦å¯åŠ¨** æ‰“å¼€å¦ä¸€ä¸ª **å‘½ä»¤è¡Œçª—å£ï¼ˆCMDï¼‰** ï¼Œè¾“å…¥ï¼š

`redis-cli.exe ping `

å¦‚æœè¿”å›ï¼š

`PONG `

è¯´æ˜ Redis æœåŠ¡å™¨å·²æˆåŠŸå¯åŠ¨ ğŸ‰ã€‚

**äºŒã€ é…ç½® Redis**

### **1\. æ·»åŠ  Redis ä¾èµ–**

å¦‚æœä½¿ç”¨ **Maven** ï¼Œåœ¨ `pom.xml` æ·»åŠ ï¼š

    
    
    <dependency> 
        <groupId>org.springframework.boot</groupId> 
        <artifactId>spring-boot-starter-data-redis</artifactId> 
    </dependency>

**âš ï¸ Spring Boot 2.0+ é»˜è®¤ä½¿ç”¨ Lettuceï¼Œè€Œä¸æ˜¯ Jedisã€‚å¦‚æœè¦ä½¿ç”¨ Jedisï¼Œéœ€è¦é¢å¤–æ·»åŠ ä¾èµ–**

    
    
    <dependency> 
        <groupId>redis.clients</groupId> 
        <artifactId>jedis</artifactId> 
    </dependency>

* * *

### **âœ… 2. é…ç½® Redis è¿æ¥**

åœ¨ `application.yml` æˆ– `application.properties` é…ç½® Redis è¿æ¥ä¿¡æ¯ã€‚

#### **ğŸ”¹`application.properties` é…ç½®**

    
    
    #é…ç½®redis
    spring.data.redis.host=127.0.0.1
    spring.data.redis.port=6379
    spring.data.redis.password=
    spring.data.redis.database=0
    spring.data.redis.timeout=5000ms
    spring.data.redis.lettuce.pool.max-active=8
    spring.data.redis.lettuce.pool.max-idle=8
    spring.data.redis.lettuce.pool.min-idle=0
    spring.data.redis.lettuce.pool.max-wait=-1ms

**âš ï¸ æ³¨æ„ï¼š**

  * `host`ï¼šRedis æœåŠ¡å™¨åœ°å€
  * `port`ï¼šRedis ç«¯å£ï¼ˆé»˜è®¤ 6379ï¼‰
  * `password`ï¼šå¦‚æœ Redis æ²¡æœ‰å¯†ç ï¼Œä¿æŒä¸ºç©º
  * `database`ï¼šé€‰æ‹© Redis æ•°æ®åº“ï¼ˆé»˜è®¤ 0ï¼‰
  * `timeout`ï¼šè¿æ¥è¶…æ—¶æ—¶é—´ï¼ˆ5 ç§’ï¼‰

* * *

### **âœ… 3. ç¼–å†™ Redis å·¥å…·ç±»**

å¯ä»¥ä½¿ç”¨ **RedisTemplate** æ¥æ“ä½œ Redisã€‚

#### **ğŸ”¹`RedisConfig.java`**

åˆ›å»ºä¸€ä¸ª Redis é…ç½®ç±»ï¼Œæ³¨å…¥ `RedisTemplate`ï¼š

    
    
    @Configuration
    public class RedisConfig {
        @Bean
        public RedisTemplate<String, Object> redisTemplate(RedisConnectionFactory redisConnectionFactory) {
            RedisTemplate<String, Object> redisTemplate = new RedisTemplate<>();
            redisTemplate.setConnectionFactory(redisConnectionFactory);
            // ä½¿ç”¨ String åºåˆ—åŒ– keyï¼Œé¿å…ä¹±ç 
            redisTemplate.setKeySerializer(new StringRedisSerializer());
            redisTemplate.setHashKeySerializer(new StringRedisSerializer());
            return redisTemplate;
        }
    }

* * *

### **âœ… 4. åœ¨ Service ä¸­ä½¿ç”¨ Redis**

ä½ å¯ä»¥ç›´æ¥åœ¨ `RedisService` ä¸­ä½¿ç”¨ `RedisTemplate` æä¾›çš„æ–¹æ³•æ¥å­˜å–æ•°æ®ã€‚

#### **ğŸ”¹ (1) æ“ä½œå­—ç¬¦ä¸²**

Redis çš„ `opsForValue()` ä¸»è¦ç”¨äºå­˜å–**å­—ç¬¦ä¸²** æ•°æ®ï¼š

    
    
    @Service
    public class RedisService {
        @Autowired
        private RedisTemplate<String, Object> redisTemplate;
    
        // å­˜å‚¨å­—ç¬¦ä¸²æ•°æ®
        public void setString(String key, String value, long timeout) {
            redisTemplate.opsForValue().set(key, value, timeout, TimeUnit.SECONDS);
        }
    
        // è·å–å­—ç¬¦ä¸²æ•°æ®
        public String getString(String key) {
            return (String) redisTemplate.opsForValue().get(key);
        }
    
        // åˆ é™¤ Key
        public void deleteKey(String key) {
            redisTemplate.delete(key);
        }
    }
    

* * *

### **âœ… 2. æ“ä½œå“ˆå¸Œè¡¨ï¼ˆHashï¼‰**

Redis çš„ `opsForHash()` é€‚ç”¨äºå­˜å‚¨**å¯¹è±¡ã€é”®å€¼å¯¹** ç­‰ã€‚

    
    
    @Service
    public class RedisHashService {
        @Autowired
        private RedisTemplate<String, Object> redisTemplate;
    
        // è®¾ç½® Hash å€¼
        public void setHash(String key, String field, String value) {
            redisTemplate.opsForHash().put(key, field, value);
        }
    
        // è·å– Hash å€¼
        public Object getHash(String key, String field) {
            return redisTemplate.opsForHash().get(key, field);
        }
    
        // è·å–æ•´ä¸ª Hash å¯¹è±¡
        public Map<Object, Object> getAllHash(String key) {
            return redisTemplate.opsForHash().entries(key);
        }
    
        // åˆ é™¤ Hash å­—æ®µ
        public void deleteHashField(String key, String field) {
            redisTemplate.opsForHash().delete(key, field);
        }
    }
    

**ç¤ºä¾‹**

`redisHashService.setHash("user:1001", "name", "Tom"); String name =
redisHashService.getHash("user:1001", "name"); // "Tom" `

* * *

### **âœ… 3. æ“ä½œåˆ—è¡¨ï¼ˆListï¼‰**

Redis `opsForList()` é€‚ç”¨äºå­˜å‚¨**åˆ—è¡¨æ•°æ®** ï¼ˆå¦‚æ¶ˆæ¯é˜Ÿåˆ—ã€æ’è¡Œæ¦œç­‰ï¼‰ã€‚

    
    
    @Service
    public class RedisListService {
        @Autowired
        private RedisTemplate<String, Object> redisTemplate;
    
        // å·¦ä¾§æ¨å…¥åˆ—è¡¨
        public void leftPush(String key, String value) {
            redisTemplate.opsForList().leftPush(key, value);
        }
    
        // å³ä¾§æ¨å…¥åˆ—è¡¨
        public void rightPush(String key, String value) {
            redisTemplate.opsForList().rightPush(key, value);
        }
    
        // è·å–åˆ—è¡¨èŒƒå›´
        public List<Object> getListRange(String key, long start, long end) {
            return redisTemplate.opsForList().range(key, start, end);
        }
    
        // å¼¹å‡ºå·¦ä¾§å…ƒç´ 
        public Object leftPop(String key) {
            return redisTemplate.opsForList().leftPop(key);
        }
    }
    

**ç¤ºä¾‹**

`redisListService.leftPush("queue", "task1"); `

`redisListService.leftPush("queue", "task2"); `

`List<Object> tasks = redisListService.getListRange("queue", 0, -1); //
["task2", "task1"] `

* * *

### **âœ… 4. æ“ä½œé›†åˆï¼ˆSetï¼‰**

Redis `opsForSet()` é€‚ç”¨äºå­˜å‚¨**æ— åºå”¯ä¸€é›†åˆ** ï¼ˆå¦‚æ ‡ç­¾ã€å¥½å‹åˆ—è¡¨ç­‰ï¼‰ã€‚

    
    
    @Service
    public class RedisSetService {
        @Autowired
        private RedisTemplate<String, Object> redisTemplate;
    
        // æ·»åŠ é›†åˆå…ƒç´ 
        public void addToSet(String key, String value) {
            redisTemplate.opsForSet().add(key, value);
        }
    
        // è·å–é›†åˆä¸­çš„æ‰€æœ‰å…ƒç´ 
        public Set<Object> getSetMembers(String key) {
            return redisTemplate.opsForSet().members(key);
        }
    
        // åˆ é™¤é›†åˆä¸­çš„æŸä¸ªå…ƒç´ 
        public void removeFromSet(String key, String value) {
            redisTemplate.opsForSet().remove(key, value);
        }
    }
    

**ç¤ºä¾‹**

`redisSetService.addToSet("users", "Alice"); `

`redisSetService.addToSet("users", "Bob"); `

`Set<Object> users = redisSetService.getSetMembers("users"); // ["Alice",
"Bob"] `

* * *

### **âœ… 5. åœ¨ Controller ä¸­è°ƒç”¨**

ä½ å¯ä»¥åœ¨ Controller é‡Œè°ƒç”¨ `RedisService` æ¥æµ‹è¯• Redis çš„ä½¿ç”¨ï¼š

    
    
    import org.springframework.beans.factory.annotation.Autowired;
    import org.springframework.web.bind.annotation.*;
    
    @RestController
    @RequestMapping("/redis")
    public class RedisController {
    
        @Autowired
        private RedisService redisService;
    
        // å­˜å‚¨ Key-Value
        @PostMapping("/set")
        public String setKey(@RequestParam String key, @RequestParam String value) {
            redisService.setString(key, value, 3600);
            return "å­˜å‚¨æˆåŠŸ";
        }
    
        // è·å– Key çš„å€¼
        @GetMapping("/get")
        public String getKey(@RequestParam String key) {
            return redisService.getString(key);
        }
    
        // åˆ é™¤ Key
        @DeleteMapping("/delete")
        public String deleteKey(@RequestParam String key) {
            redisService.deleteKey(key);
            return "åˆ é™¤æˆåŠŸ";
        }
    }
    



