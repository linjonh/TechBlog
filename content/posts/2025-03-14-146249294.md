---
layout: post
title: "ä¸ƒSpring-Bootå­¦ä¹ Redisä½¿ç”¨"
date: 2025-03-14 10:04:21 +0800
description: "æœ‰éƒ¨åˆ†å†…å®¹æ˜¯å¸¸ç”¨çš„ï¼Œä¸ºäº†é¿å…æ¯æ¬¡éƒ½æŸ¥è¯¢æ•°æ®åº“ï¼Œå°†éƒ¨åˆ†æ•°æ®å­˜å…¥Redisã€‚Windows ç‰ˆçš„ Redis å®˜æ–¹å·²ä¸å†ç»´æŠ¤ï¼Œä½ å¯ä»¥ä½¿ç”¨ã€‚è¯´æ˜ Redis æœåŠ¡å™¨å·²æˆåŠŸå¯åŠ¨ ğŸ‰ã€‚ä½ å¯ä»¥åœ¨ Controller é‡Œè°ƒç”¨ã€‚åˆ›å»ºä¸€ä¸ª Redis é…ç½®ç±»ï¼Œæ³¨å…¥ã€‚é…ç½® Redis è¿æ¥ä¿¡æ¯ã€‚ï¼ˆå¦‚æ¶ˆæ¯é˜Ÿåˆ—ã€æ’è¡Œæ¦œç­‰ï¼‰ã€‚æä¾›çš„æ–¹æ³•æ¥å­˜å–æ•°æ®ã€‚ï¼ˆå¦‚æ ‡ç­¾ã€å¥½å‹åˆ—è¡¨ç­‰ï¼‰ã€‚æ¥æ“ä½œ Redisã€‚"
keywords: "ï¼ˆä¸ƒï¼‰Spring Bootå­¦ä¹ â€”â€”Redisä½¿ç”¨"
categories: ['æœªåˆ†ç±»']
tags: ['å­¦ä¹ ', 'Spring', 'Redis', 'Boot']
artid: "146249294"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146249294
    alt: "ä¸ƒSpring-Bootå­¦ä¹ Redisä½¿ç”¨"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146249294
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146249294
cover: https://bing.ee123.net/img/rand?artid=146249294
image: https://bing.ee123.net/img/rand?artid=146249294
img: https://bing.ee123.net/img/rand?artid=146249294
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     ï¼ˆä¸ƒï¼‰Spring Bootå­¦ä¹ â€”â€”Redisä½¿ç”¨
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p>
     æœ‰éƒ¨åˆ†å†…å®¹æ˜¯å¸¸ç”¨çš„ï¼Œä¸ºäº†é¿å…æ¯æ¬¡éƒ½æŸ¥è¯¢æ•°æ®åº“ï¼Œå°†éƒ¨åˆ†æ•°æ®å­˜å…¥Redisã€‚
    </p>
    <p>
     <strong>
      ä¸€ã€Â ä¸‹è½½å¹¶å®‰è£… Redis
     </strong>
    </p>
    <p>
     Windows ç‰ˆçš„ Redis å®˜æ–¹å·²ä¸å†ç»´æŠ¤ï¼Œä½ å¯ä»¥ä½¿ç”¨
     <strong>
      å¾®è½¯æä¾›çš„ Redis for Windows ç‰ˆæœ¬
     </strong>
     æˆ–è€…
     <strong>
      ä½¿ç”¨ WSLï¼ˆWindows Subsystem for Linuxï¼‰å®‰è£… Redis
     </strong>
     ã€‚
    </p>
    <ol>
     <li>
      <p>
       <strong>
        ä¸‹è½½ Redis for Windows
       </strong>
      </p>
      <ul>
       <li>
        <a href="https://github.com/microsoftarchive/redis/releases" title="ç‚¹å‡»è¿™é‡Œä¸‹è½½ Redis for Windows">
         ç‚¹å‡»è¿™é‡Œä¸‹è½½ Redis for Windows
        </a>
        ï¼ˆæ¨èä¸‹è½½
        <code>
         Redis-x64-3.2.100.msi
        </code>
        ï¼‰
       </li>
       <li>
        ä¸‹è½½å®Œæˆåï¼Œè¿›è¡Œå®‰è£…ï¼Œå®‰è£…è·¯å¾„å»ºè®®ï¼š
        <code>
         C:\Redis\
        </code>
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        è§£å‹å¹¶è¿›å…¥ Redis ç›®å½•
       </strong>
      </p>
      <p>
       <code>
        cd C:\Redis
       </code>
      </p>
     </li>
     <li>
      <p>
       <strong>
        å¯åŠ¨ Redis æœåŠ¡å™¨
       </strong>
      </p>
      <p>
       <code>
        redis-server.exe redis.windows.conf
       </code>
      </p>
     </li>
     <li>
      <p>
       <strong>
        éªŒè¯ Redis æ˜¯å¦å¯åŠ¨
       </strong>
       æ‰“å¼€å¦ä¸€ä¸ª
       <strong>
        å‘½ä»¤è¡Œçª—å£ï¼ˆCMDï¼‰
       </strong>
       ï¼Œè¾“å…¥ï¼š
      </p>
      <p>
       <code>
        redis-cli.exe ping
       </code>
      </p>
      <p>
       å¦‚æœè¿”å›ï¼š
      </p>
      <p>
       <code>
        PONG
       </code>
      </p>
      <p>
       è¯´æ˜ Redis æœåŠ¡å™¨å·²æˆåŠŸå¯åŠ¨ ğŸ‰ã€‚
      </p>
     </li>
    </ol>
    <p>
     <strong>
      äºŒã€Â é…ç½® Redis
     </strong>
    </p>
    <p>
    </p>
    <h3>
     <strong>
      1. æ·»åŠ  Redis ä¾èµ–
     </strong>
    </h3>
    <p>
     å¦‚æœä½¿ç”¨
     <strong>
      Maven
     </strong>
     ï¼Œåœ¨
     <code>
      pom.xml
     </code>
     æ·»åŠ ï¼š
    </p>
    <pre><code class="language-XML">&lt;dependency&gt; 
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; 
    &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt; 
&lt;/dependency&gt;</code></pre>
    <p>
     <strong>
      âš ï¸ Spring Boot 2.0+ é»˜è®¤ä½¿ç”¨ Lettuceï¼Œè€Œä¸æ˜¯ Jedisã€‚å¦‚æœè¦ä½¿ç”¨ Jedisï¼Œéœ€è¦é¢å¤–æ·»åŠ ä¾èµ–
     </strong>
    </p>
    <pre><code class="language-XML">&lt;dependency&gt; 
    &lt;groupId&gt;redis.clients&lt;/groupId&gt; 
    &lt;artifactId&gt;jedis&lt;/artifactId&gt; 
&lt;/dependency&gt;</code></pre>
    <hr/>
    <h3>
     <strong>
      âœ… 2. é…ç½® Redis è¿æ¥
     </strong>
    </h3>
    <p>
     åœ¨
     <code>
      application.yml
     </code>
     æˆ–
     <code>
      application.properties
     </code>
     é…ç½® Redis è¿æ¥ä¿¡æ¯ã€‚
    </p>
    <h4>
     <strong>
      ğŸ”¹
      <code>
       application.properties
      </code>
      é…ç½®
     </strong>
    </h4>
    <pre><code class="language-XML">#é…ç½®redis
spring.data.redis.host=127.0.0.1
spring.data.redis.port=6379
spring.data.redis.password=
spring.data.redis.database=0
spring.data.redis.timeout=5000ms
spring.data.redis.lettuce.pool.max-active=8
spring.data.redis.lettuce.pool.max-idle=8
spring.data.redis.lettuce.pool.min-idle=0
spring.data.redis.lettuce.pool.max-wait=-1ms</code></pre>
    <p>
     <strong>
      âš ï¸ æ³¨æ„ï¼š
     </strong>
    </p>
    <ul>
     <li>
      <code>
       host
      </code>
      ï¼šRedis æœåŠ¡å™¨åœ°å€
     </li>
     <li>
      <code>
       port
      </code>
      ï¼šRedis ç«¯å£ï¼ˆé»˜è®¤ 6379ï¼‰
     </li>
     <li>
      <code>
       password
      </code>
      ï¼šå¦‚æœ Redis æ²¡æœ‰å¯†ç ï¼Œä¿æŒä¸ºç©º
     </li>
     <li>
      <code>
       database
      </code>
      ï¼šé€‰æ‹© Redis æ•°æ®åº“ï¼ˆé»˜è®¤ 0ï¼‰
     </li>
     <li>
      <code>
       timeout
      </code>
      ï¼šè¿æ¥è¶…æ—¶æ—¶é—´ï¼ˆ5 ç§’ï¼‰
     </li>
    </ul>
    <hr/>
    <h3>
     <strong>
      âœ… 3. ç¼–å†™ Redis å·¥å…·ç±»
     </strong>
    </h3>
    <p>
     å¯ä»¥ä½¿ç”¨
     <strong>
      RedisTemplate
     </strong>
     æ¥æ“ä½œ Redisã€‚
    </p>
    <h4>
     <strong>
      ğŸ”¹
      <code>
       RedisConfig.java
      </code>
     </strong>
    </h4>
    <p>
     åˆ›å»ºä¸€ä¸ª Redis é…ç½®ç±»ï¼Œæ³¨å…¥
     <code>
      RedisTemplate
     </code>
     ï¼š
    </p>
    <pre><code class="language-java">
@Configuration
public class RedisConfig {
    @Bean
    public RedisTemplate&lt;String, Object&gt; redisTemplate(RedisConnectionFactory redisConnectionFactory) {
        RedisTemplate&lt;String, Object&gt; redisTemplate = new RedisTemplate&lt;&gt;();
        redisTemplate.setConnectionFactory(redisConnectionFactory);
        // ä½¿ç”¨ String åºåˆ—åŒ– keyï¼Œé¿å…ä¹±ç 
        redisTemplate.setKeySerializer(new StringRedisSerializer());
        redisTemplate.setHashKeySerializer(new StringRedisSerializer());
        return redisTemplate;
    }
}</code></pre>
    <hr/>
    <h3>
     <strong>
      âœ… 4. åœ¨ Service ä¸­ä½¿ç”¨ Redis
     </strong>
    </h3>
    <p>
     ä½ å¯ä»¥ç›´æ¥åœ¨
     <code>
      RedisService
     </code>
     ä¸­ä½¿ç”¨
     <code>
      RedisTemplate
     </code>
     æä¾›çš„æ–¹æ³•æ¥å­˜å–æ•°æ®ã€‚
    </p>
    <h4>
     <strong>
      ğŸ”¹ (1) æ“ä½œå­—ç¬¦ä¸²
     </strong>
    </h4>
    <p>
     Redis çš„
     <code>
      opsForValue()
     </code>
     ä¸»è¦ç”¨äºå­˜å–
     <strong>
      å­—ç¬¦ä¸²
     </strong>
     æ•°æ®ï¼š
    </p>
    <pre><code class="language-java">
@Service
public class RedisService {
    @Autowired
    private RedisTemplate&lt;String, Object&gt; redisTemplate;

    // å­˜å‚¨å­—ç¬¦ä¸²æ•°æ®
    public void setString(String key, String value, long timeout) {
        redisTemplate.opsForValue().set(key, value, timeout, TimeUnit.SECONDS);
    }

    // è·å–å­—ç¬¦ä¸²æ•°æ®
    public String getString(String key) {
        return (String) redisTemplate.opsForValue().get(key);
    }

    // åˆ é™¤ Key
    public void deleteKey(String key) {
        redisTemplate.delete(key);
    }
}
</code></pre>
    <hr/>
    <h3>
     <strong>
      âœ… 2. æ“ä½œå“ˆå¸Œè¡¨ï¼ˆHashï¼‰
     </strong>
    </h3>
    <p>
     Redis çš„
     <code>
      opsForHash()
     </code>
     é€‚ç”¨äºå­˜å‚¨
     <strong>
      å¯¹è±¡ã€é”®å€¼å¯¹
     </strong>
     ç­‰ã€‚
    </p>
    <pre><code class="language-java">
@Service
public class RedisHashService {
    @Autowired
    private RedisTemplate&lt;String, Object&gt; redisTemplate;

    // è®¾ç½® Hash å€¼
    public void setHash(String key, String field, String value) {
        redisTemplate.opsForHash().put(key, field, value);
    }

    // è·å– Hash å€¼
    public Object getHash(String key, String field) {
        return redisTemplate.opsForHash().get(key, field);
    }

    // è·å–æ•´ä¸ª Hash å¯¹è±¡
    public Map&lt;Object, Object&gt; getAllHash(String key) {
        return redisTemplate.opsForHash().entries(key);
    }

    // åˆ é™¤ Hash å­—æ®µ
    public void deleteHashField(String key, String field) {
        redisTemplate.opsForHash().delete(key, field);
    }
}
</code></pre>
    <p>
     <strong>
      ç¤ºä¾‹
     </strong>
    </p>
    <p>
     <code>
      redisHashService.setHash("user:1001", "name", "Tom"); String name = redisHashService.getHash("user:1001", "name"); // "Tom"
     </code>
    </p>
    <hr/>
    <h3>
     <strong>
      âœ… 3. æ“ä½œåˆ—è¡¨ï¼ˆListï¼‰
     </strong>
    </h3>
    <p>
     Redis
     <code>
      opsForList()
     </code>
     é€‚ç”¨äºå­˜å‚¨
     <strong>
      åˆ—è¡¨æ•°æ®
     </strong>
     ï¼ˆå¦‚æ¶ˆæ¯é˜Ÿåˆ—ã€æ’è¡Œæ¦œç­‰ï¼‰ã€‚
    </p>
    <pre><code class="language-java">@Service
public class RedisListService {
    @Autowired
    private RedisTemplate&lt;String, Object&gt; redisTemplate;

    // å·¦ä¾§æ¨å…¥åˆ—è¡¨
    public void leftPush(String key, String value) {
        redisTemplate.opsForList().leftPush(key, value);
    }

    // å³ä¾§æ¨å…¥åˆ—è¡¨
    public void rightPush(String key, String value) {
        redisTemplate.opsForList().rightPush(key, value);
    }

    // è·å–åˆ—è¡¨èŒƒå›´
    public List&lt;Object&gt; getListRange(String key, long start, long end) {
        return redisTemplate.opsForList().range(key, start, end);
    }

    // å¼¹å‡ºå·¦ä¾§å…ƒç´ 
    public Object leftPop(String key) {
        return redisTemplate.opsForList().leftPop(key);
    }
}
</code></pre>
    <p>
     <strong>
      ç¤ºä¾‹
     </strong>
    </p>
    <p>
     <code>
      redisListService.leftPush("queue", "task1");
     </code>
    </p>
    <p>
     <code>
      redisListService.leftPush("queue", "task2");
     </code>
    </p>
    <p>
     <code>
      List&lt;Object&gt; tasks = redisListService.getListRange("queue", 0, -1); // ["task2", "task1"]
     </code>
    </p>
    <hr/>
    <h3>
     <strong>
      âœ… 4. æ“ä½œé›†åˆï¼ˆSetï¼‰
     </strong>
    </h3>
    <p>
     Redis
     <code>
      opsForSet()
     </code>
     é€‚ç”¨äºå­˜å‚¨
     <strong>
      æ— åºå”¯ä¸€é›†åˆ
     </strong>
     ï¼ˆå¦‚æ ‡ç­¾ã€å¥½å‹åˆ—è¡¨ç­‰ï¼‰ã€‚
    </p>
    <pre><code class="language-java">
@Service
public class RedisSetService {
    @Autowired
    private RedisTemplate&lt;String, Object&gt; redisTemplate;

    // æ·»åŠ é›†åˆå…ƒç´ 
    public void addToSet(String key, String value) {
        redisTemplate.opsForSet().add(key, value);
    }

    // è·å–é›†åˆä¸­çš„æ‰€æœ‰å…ƒç´ 
    public Set&lt;Object&gt; getSetMembers(String key) {
        return redisTemplate.opsForSet().members(key);
    }

    // åˆ é™¤é›†åˆä¸­çš„æŸä¸ªå…ƒç´ 
    public void removeFromSet(String key, String value) {
        redisTemplate.opsForSet().remove(key, value);
    }
}
</code></pre>
    <p>
     <strong>
      ç¤ºä¾‹
     </strong>
    </p>
    <p>
     <code>
      redisSetService.addToSet("users", "Alice");
     </code>
    </p>
    <p>
     <code>
      redisSetService.addToSet("users", "Bob");
     </code>
    </p>
    <p>
     <code>
      Set&lt;Object&gt; users = redisSetService.getSetMembers("users"); // ["Alice", "Bob"]
     </code>
    </p>
    <hr/>
    <h3>
     <strong>
      âœ… 5. åœ¨ Controller ä¸­è°ƒç”¨
     </strong>
    </h3>
    <p>
     ä½ å¯ä»¥åœ¨ Controller é‡Œè°ƒç”¨
     <code>
      RedisService
     </code>
     æ¥æµ‹è¯• Redis çš„ä½¿ç”¨ï¼š
    </p>
    <pre><code class="language-java">import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.*;

@RestController
@RequestMapping("/redis")
public class RedisController {

    @Autowired
    private RedisService redisService;

    // å­˜å‚¨ Key-Value
    @PostMapping("/set")
    public String setKey(@RequestParam String key, @RequestParam String value) {
        redisService.setString(key, value, 3600);
        return "å­˜å‚¨æˆåŠŸ";
    }

    // è·å– Key çš„å€¼
    @GetMapping("/get")
    public String getKey(@RequestParam String key) {
        return redisService.getString(key);
    }

    // åˆ é™¤ Key
    @DeleteMapping("/delete")
    public String deleteKey(@RequestParam String key) {
        redisService.deleteKey(key);
        return "åˆ é™¤æˆåŠŸ";
    }
}
</code></pre>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f71715f33353431383235302f:61727469636c652f64657461696c732f313436323439323934" class_="artid" style="display:none">
 </p>
</div>


