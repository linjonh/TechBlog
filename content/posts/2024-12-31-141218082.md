---
layout: post
title: "HarmonyOS应用服务发布打包编译"
date: 2024-12-31 09:27:00 +0800
description: "HarmonyOS应用/服务发布（打包编译）_harmony 打包"
keywords: "harmony 打包"
categories: ['Os', 'Harmony']
tags: ['华为', 'Harmonyos']
artid: "141218082"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=141218082
    alt: "HarmonyOS应用服务发布打包编译"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=141218082
featuredImagePreview: https://bing.ee123.net/img/rand?artid=141218082
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     HarmonyOS应用/服务发布（打包编译）
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p id="ZH-CN_TOPIC_0000001058015911__p3659373344">
     HarmonyOS通过数字证书与Profile文件等签名信息来保证应用/服务的完整性，应用/服务上架到AppGallery Connect必须通过签名校验。因此，您需要使用发布证书和Profile文件对应用/服务进行签名后才能发布。
    </p>
    <h3 id="section6406135115814">
     发布流程
    </h3>
    <p id="ZH-CN_TOPIC_0000001058015911__p14313163934018">
     开发者完成HarmonyOS应用/服务开发后，需要将应用/服务打包成App Pack（.app文件），用于上架到AppGallery Connect。发布应用/服务的流程如下图所示：
    </p>
    <p id="ZH-CN_TOPIC_0000001058015911__p1313163918408">
    </p>
    <p class="img-center">
     <img alt="" height="344" src="https://i-blog.csdnimg.cn/blog_migrate/e2c3824cd41b2f1da2782119677f8bc3.png" width="875"/>
    </p>
    <p id="ZH-CN_TOPIC_0000001058015911__p87795494401">
     关于以上流程的详细介绍，请继续查阅本章节内容。
    </p>
    <h3 id="section793484619307">
     准备签名文件
    </h3>
    <p id="ZH-CN_TOPIC_0000001058015911__p169021343185711">
     HarmonyOS应用/服务通过数字证书（.cer文件）和Profile文件（.p7b文件）来保证应用/服务的完整性。在申请数字证书和Profile文件前，首先需要通过DevEco Studio来生成密钥（存储在格式为.p12的密钥库文件中）和证书请求文件（.csr文件）。
    </p>
    <p>
     <strong>
      基本概念
     </strong>
    </p>
    <ul id="ZH-CN_TOPIC_0000001058015911__u2e866e312e534455966ed91a6445a0af">
     <li id="ZH-CN_TOPIC_0000001058015911__l8ad4dce5e97c4c2ea652059aa2d46354">
      <strong>
       密钥
      </strong>
      ：包含非对称加密中使用的公钥和私钥，存储在密钥库文件中，格式为.p12，公钥和私钥对用于数字签名和验证。
     </li>
     <li id="ZH-CN_TOPIC_0000001058015911__l9e4676b07dbc4fdeab009902661177c4">
      <strong>
       证书请求文件
      </strong>
      ：格式为.csr，全称为Certificate Signing Request，包含密钥对中的公钥和公共名称、组织名称、组织单位等信息，用于向AppGallery Connect申请数字证书。
     </li>
     <li id="ZH-CN_TOPIC_0000001058015911__l35375c226c7e44368df2f455a44ff165">
      <strong>
       数字证书
      </strong>
      ：格式为.cer，由华为AppGallery Connect颁发。
     </li>
     <li id="ZH-CN_TOPIC_0000001058015911__lc29e1bd6f9884d60b3f9b81a9eecca61">
      <strong>
       Profile文件
      </strong>
      ：格式为.p7b，包含HarmonyOS应用/服务的包名、数字证书信息、描述应用/服务允许申请的证书权限列表，以及允许应用/服务调试的设备列表（如果应用/服务类型为Release类型，则设备列表为空）等内容，每个应用/服务包中均必须包含一个Profile文件。
     </li>
    </ul>
    <h4 id="section1079214271414">
     生成密钥和证书请求文件
    </h4>
    <ol id="ZH-CN_TOPIC_0000001058015911__oe87ac8c0057a4581982d46ccdb188ed0">
     <li id="ZH-CN_TOPIC_0000001058015911__l71106db9434e4f08b1556a1b0563939e">
      在主菜单栏单击
      <strong>
       Build &gt; Generate Key
      </strong>
      <strong>
       and CSR
      </strong>
      。
      <p>
      </p>
      <p>
       说明
      </p>
      <p id="ZH-CN_TOPIC_0000001058015911__a40545d3d638c45b88339f9f15a9f8b29">
       如果本地已有对应的密钥，无需新生成密钥，可以在
       <strong>
        Generate Key
       </strong>
       界面中单击下方的Skip跳过密钥生成过程，直接使用已有密钥生成证书请求文件。
      </p>
      <p>
      </p>
     </li>
     <li id="ZH-CN_TOPIC_0000001058015911__li1463962225219">
      在
      <strong>
       Key Store File
      </strong>
      中，可以单击
      <strong>
       Choose Existing
      </strong>
      选择已有的密钥库文件（存储有密钥的.p12文件）；如果没有密钥库文件，单击
      <strong>
       New
      </strong>
      进行创建。下面以新创建密钥库文件为例进行说明。
      <p>
      </p>
      <p id="ZH-CN_TOPIC_0000001058015911__p2638112265216">
      </p>
      <p class="img-center">
       <img alt="" height="155" src="https://i-blog.csdnimg.cn/blog_migrate/96e619264b55450178202704cba21bca.png" width="565"/>
      </p>
      <p>
      </p>
     </li>
     <li id="ZH-CN_TOPIC_0000001058015911__l77d9295a43f443b9a3c933b8914bdd17">
      在
      <strong>
       Create Key Store
      </strong>
      窗口中，填写密钥库信息后，单击
      <strong>
       OK
      </strong>
      。
      <p>
      </p>
      <ul id="ZH-CN_TOPIC_0000001058015911__u9709651544bd4d7aa839be5d5a876cc0">
       <li id="ZH-CN_TOPIC_0000001058015911__lc8550019f2fb49cb87930fd8129711b6">
        <strong>
         Key Store File
        </strong>
        ：设置密钥库文件存储路径，并填写p12文件名。
       </li>
       <li id="ZH-CN_TOPIC_0000001058015911__lf22f34a87c35490bae148482eaff97d9">
        <strong>
         Password
        </strong>
        ：设置密钥库密码，必须由大写字母、小写字母、数字和特殊符号中的两种以上字符的组合，长度至少为8位。请记住该密码，后续签名配置需要使用。
       </li>
       <li id="ZH-CN_TOPIC_0000001058015911__lbc0c422b780144e18b7598d74751594b">
        <strong>
         Confirm Password
        </strong>
        ：再次输入密钥库密码。
       </li>
      </ul>
      <p id="ZH-CN_TOPIC_0000001058015911__a16453c2ee03f4c03919497b638c87808">
      </p>
      <p class="img-center">
       <img alt="" height="178" src="https://i-blog.csdnimg.cn/blog_migrate/141949d9240e74a91452c35048383146.png" width="457"/>
      </p>
      <p>
      </p>
     </li>
     <li id="ZH-CN_TOPIC_0000001058015911__l14fd717d0a104c988da2bd4ec7501bb9">
      在
      <strong>
       Generate Key
      </strong>
      <strong>
       and CSR
      </strong>
      界面中，继续填写密钥信息后，单击
      <strong>
       Next
      </strong>
      。
      <p>
      </p>
      <ul id="ZH-CN_TOPIC_0000001058015911__udac01c1ed2614b95ab14ea19d6f0e22f">
       <li id="ZH-CN_TOPIC_0000001058015911__l58d3b339d0344502adeb2deea28e577e">
        <strong>
         Alias
        </strong>
        ：密钥的别名信息，用于标识密钥名称。请记住该别名，后续签名配置需要使用。
       </li>
       <li id="ZH-CN_TOPIC_0000001058015911__l4cd66cfa934b4cceba50ca657bf2b56f">
        <strong>
         Password
        </strong>
        ：密钥对应的密码，与密钥库密码保持一致，无需手动输入。
       </li>
       <li id="ZH-CN_TOPIC_0000001058015911__lf9aa21da6ec44164acc33db8535a4525">
        <strong>
         Validity
        </strong>
        ：证书有效期，建议设置为25年及以上，覆盖应用/服务的完整生命周期。
       </li>
       <li id="ZH-CN_TOPIC_0000001058015911__lfef4f5fdfd3a407391a6826ef9eb688d">
        <strong>
         Certificate
        </strong>
        ：输入证书基本信息，如组织、城市或地区、国家码等。
       </li>
      </ul>
      <p id="ZH-CN_TOPIC_0000001058015911__a15fa783fdf2d4af693ef9cbd69c828fc">
      </p>
      <p class="img-center">
       <img alt="" height="601" src="https://i-blog.csdnimg.cn/blog_migrate/05bdf38ad23bfdedc1b534f3f42db2d7.png" width="517"/>
      </p>
      <p>
      </p>
     </li>
     <li id="ZH-CN_TOPIC_0000001058015911__l360beffb091d401c8f3dbf9bc083147e">
      在
      <strong>
       Generate Key
      </strong>
      <strong>
       and CSR
      </strong>
      界面，设置CSR文件存储路径和CSR文件名。
      <p>
      </p>
      <p id="ZH-CN_TOPIC_0000001058015911__a6b77c8b0ae7e42c4b55a189b0c6b0b44">
      </p>
      <p class="img-center">
       <img alt="" height="299" src="https://i-blog.csdnimg.cn/blog_migrate/8aa630a10676791a8cdd23b54f097a39.png" width="520"/>
      </p>
      <p>
      </p>
     </li>
     <li id="ZH-CN_TOPIC_0000001058015911__l3b6f4fbfd7a549819b4cd907a5bc8ee6">
      单击
      <strong>
       OK
      </strong>
      按钮，创建CSR文件成功，可以在存储路径下获取生成的密钥库文件（.p12）和证书请求文件（.csr）。
      <p>
      </p>
      <p id="ZH-CN_TOPIC_0000001058015911__a75ac4b7d586a4142b6028a40594ca3e8">
      </p>
      <p class="img-center">
       <img alt="" height="176" src="https://i-blog.csdnimg.cn/blog_migrate/d839d73de48d1ab52113a7d6664829f0.png" width="480"/>
      </p>
      <p>
      </p>
     </li>
    </ol>
    <h4 id="section178461193713">
     申请发布证书和Profile文件
    </h4>
    <p>
     通过生成的证书请求文件，向AppGallery Connect申请发布证书和Profile文件，操作如下。
    </p>
    <ul id="ZH-CN_TOPIC_0000001058015911__ul2034586145910">
     <li id="ZH-CN_TOPIC_0000001058015911__li203453685913">
      创建HarmonyOS应用/服务：在AppGallery Connect项目中，创建一个HarmonyOS应用/服务，用于发布证书和Profile文件申请，具体请参考
      <a href="https://developer.huawei.com/consumer/cn/doc/app/agc-help-createharmonyapp-0000001945392297" rel="nofollow" title="创建HarmonyOS应用/服务">
       创建HarmonyOS应用/服务
      </a>
      。
      <p>
       说明
      </p>
      <p id="ZH-CN_TOPIC_0000001058015911__p0484559185918">
       如果申请元服务的签名证书，在“创建应用”操作时，“是否元服务”选项请选择“
       <strong>
        是
       </strong>
       ”。
      </p>
     </li>
     <li id="ZH-CN_TOPIC_0000001058015911__li69627212010">
      申请发布证书和Profile文件：在AppGallery Connect中申请、下载发布证书和Profile文件，具体请参考
      <a href="https://developer.huawei.com/consumer/cn/doc/app/agc-help-add-releasecert-0000001946273961" rel="nofollow" title="申请发布证书">
       申请发布证书
      </a>
      和
      <a href="https://developer.huawei.com/consumer/cn/doc/app/agc-help-add-releaseprofile-0000001914714796" rel="nofollow" title="申请发布Profile">
       申请发布Profile
      </a>
      。
     </li>
    </ul>
    <p id="ZH-CN_TOPIC_0000001058015911__p337472193815">
     用于发布的证书和Profile文件申请完成后，请在DevEco Studio中进行签名，请参考
     <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/ide-publish-app-0000001053223745-V5#section280162182818" rel="nofollow" title="配置签名信息">
      配置签名信息
     </a>
     。
    </p>
    <h3 id="section280162182818">
     配置签名信息
    </h3>
    <p id="ZH-CN_TOPIC_0000001058015911__p1189264213316">
     使用制作的私钥（.p12）文件、在AppGallery Connect中申请的证书（.cer）文件和Profile（.p7b）文件，在DevEco Studio配置工程的签名信息，构建携带发布签名信息的APP。
    </p>
    <p>
     在
     <strong>
      File &gt;
     </strong>
     <strong>
      Project Structure &gt;
     </strong>
     <strong>
      Project &gt; Signing Configs
     </strong>
     <strong>
      &gt; default
     </strong>
     界面中，取消“Automatically generate signature”勾选项，然后配置工程的签名信息。
    </p>
    <ul id="ZH-CN_TOPIC_0000001058015911__ul1792615256125">
     <li id="ZH-CN_TOPIC_0000001058015911__li1492662531218">
      <strong>
       Store File
      </strong>
      ：选择密钥库文件，文件后缀为.p12。
     </li>
     <li id="ZH-CN_TOPIC_0000001058015911__li13926925201215">
      <strong>
       Store Password
      </strong>
      ：输入密钥库密码。
     </li>
     <li id="ZH-CN_TOPIC_0000001058015911__li8926202591211">
      <strong>
       Key Alias
      </strong>
      ：输入密钥的别名信息。
     </li>
     <li id="ZH-CN_TOPIC_0000001058015911__li15926132581218">
      <strong>
       Key Password
      </strong>
      ：输入密钥的密码。
     </li>
     <li id="ZH-CN_TOPIC_0000001058015911__li5926225191217">
      <strong>
       Sign Alg
      </strong>
      ：签名算法，固定为SHA256withECDSA。
     </li>
     <li id="ZH-CN_TOPIC_0000001058015911__li15927202551214">
      <strong>
       Profile File
      </strong>
      ：选择申请的发布Profile文件，文件后缀为.p7b。
     </li>
     <li id="ZH-CN_TOPIC_0000001058015911__li19927132531214">
      <strong>
       Certpath File
      </strong>
      ：选择申请的发布数字证书文件，文件后缀为.cer。
     </li>
    </ul>
    <p id="ZH-CN_TOPIC_0000001058015911__p153771115142311">
    </p>
    <p class="img-center">
     <img alt="" height="630" src="https://i-blog.csdnimg.cn/blog_migrate/ad9cd3e1d00802d3ea866369a8a426ca.png" width="901"/>
    </p>
    <p id="ZH-CN_TOPIC_0000001058015911__p157241118103619">
     设置完签名信息后，单击
     <strong>
      OK
     </strong>
     进行保存，然后使用DevEco Studio生成APP，请参考
     <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/ide-publish-app-0000001053223745-V5#section1992513343374" rel="nofollow" title="编译构建.app文件">
      编译构建.app文件
     </a>
     。
    </p>
    <h3 id="section1992513343374">
     编译构建.app文件
    </h3>
    <p>
     注意
    </p>
    <p id="ZH-CN_TOPIC_0000001058015911__p66733372332">
     应用上架时，要求应用包类型为Release类型。
    </p>
    <p id="ZH-CN_TOPIC_0000001058015911__p142814154610">
     打包APP时，DevEco Studio会将工程目录下的所有HAP/HSP模块打包到APP中，因此，如果工程目录中存在不需要打包到APP的HAP/HSP模块，请手动删除后再进行编译构建生成APP。
    </p>
    <ol id="ZH-CN_TOPIC_0000001058015911__ol97017348209">
     <li id="ZH-CN_TOPIC_0000001058015911__li10980839125513">
      单击
      <strong>
       Build &gt; Build Hap(s)/APP(s) &gt; Build APP(s)
      </strong>
      ，等待编译构建完成已签名的应用包。
      <p>
      </p>
      <p>
       说明
      </p>
      <p id="ZH-CN_TOPIC_0000001058015911__p2751193193314">
       当未指定
       <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/ide-hvigor-compilation-options-customizing-guide-0000001731595148-V5#section192461528194916" rel="nofollow" title="构建模式">
        构建模式
       </a>
       时，构建APP包，默认Release模式；构建HAP/HSP/HAR包，默认Debug模式。
      </p>
      <p id="ZH-CN_TOPIC_0000001058015911__p27774423920">
       即
       <strong>
        Build APP(s)
       </strong>
       时，默认构建的APP包为Release类型，符合上架要求，开发者无需进行另外设置。
      </p>
      <p>
      </p>
     </li>
     <li id="ZH-CN_TOPIC_0000001058015911__li1561949185816">
      编译构建完成后，可以在工程目录
      <strong>
       build &gt; outputs &gt; default
      </strong>
      下，获取带签名的应用包。
      <p>
      </p>
      <p id="ZH-CN_TOPIC_0000001058015911__p165868915263">
      </p>
      <p class="img-center">
       <img alt="" height="199" src="https://i-blog.csdnimg.cn/blog_migrate/992d003499b43c47f56714eee2c51898.png" width="425"/>
      </p>
     </li>
    </ol>
    <h3 id="section52722118382">
     上架.app文件到AGC
    </h3>
    <p id="ZH-CN_TOPIC_0000001058015911__p6921143616381">
     将HarmonyOS应用/服务打包成.app文件后上架到AppGallery Connect，上架详细操作指导请参考
     <a href="https://developer.huawei.com/consumer/cn/doc/app/agc-help-harmonyos-releaseapp-0000001914554900" rel="nofollow" title="上架HarmonyOS应用">
      上架HarmonyOS应用
     </a>
     或
     <a href="https://developer.huawei.com/consumer/cn/doc/app/agc-help-harmonyos-releaseservice-0000001946273965" rel="nofollow" title="上架元服务">
      上架元服务
     </a>
     。
    </p>
    <p>
    </p>
    <p>
     链接：
     <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/ide-publish-app-0000001053223745-V5#section1992513343374" rel="nofollow" title="文档中心">
      文档中心
     </a>
    </p>
    <p>
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f34323630323930302f:61727469636c652f64657461696c732f313431323138303832" class_="artid" style="display:none">
 </p>
</div>


