---
layout: post
title: "设计模式-原型模式"
date: 2025-03-08 14:30:54 +0800
description: "简单来说，原型模式就是\"复制\"而不是\"新建\"！它通过复制一个已有对象来创建新对象，而不是通过new关键字实例化。当你需要创建大量相似对象时，这个模式简直是救星！不仅提高性能，还能简化创建过程，太赞了！✨。"
keywords: "设计模式-原型模式"
categories: ['未分类']
tags: ['设计模式', '原型模式']
artid: "146116088"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146116088
    alt: "设计模式-原型模式"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146116088
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146116088
cover: https://bing.ee123.net/img/rand?artid=146116088
image: https://bing.ee123.net/img/rand?artid=146116088
img: https://bing.ee123.net/img/rand?artid=146116088
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     设计模式-原型模式
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
    </p>
    <p>
    </p>
    <h2>
     <a id="Java_3">
     </a>
     【干货分享】Java原型模式全解析，看完秒懂！🔥
    </h2>
    <p>
     大家好呀！今天给大家带来Java设计模式系列的又一篇干货 - 原型模式！这个模式超级实用但很多小伙伴都不太了解，赶紧学起来吧！👇
    </p>
    <h3>
     <a id="_7">
     </a>
     什么是原型模式？🤔
    </h3>
    <p>
     简单来说，原型模式就是"复制"而不是"新建"！它通过复制一个已有对象来创建新对象，而不是通过new关键字实例化。
    </p>
    <p>
     当你需要创建大量相似对象时，这个模式简直是救星！不仅提高性能，还能简化创建过程，太赞了！✨
    </p>
    <h3>
     <a id="_13">
     </a>
     如何实现原型模式？💻
    </h3>
    <p>
     Java中实现超简单，只需要：
    </p>
    <ol>
     <li>
      实现Cloneable接口
     </li>
     <li>
      重写clone()方法
     </li>
    </ol>
    <p>
     看代码：
    </p>
    <pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Prototype</span> <span class="token keyword">implements</span> <span class="token class-name">Cloneable</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Prototype</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// getter和setter省略...</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Prototype</span> <span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">Prototype</span><span class="token punctuation">)</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">CloneNotSupportedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre>
    <p>
     使用起来也超简单：
    </p>
    <pre><code class="prism language-java"><span class="token class-name">Prototype</span> original <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Prototype</span><span class="token punctuation">(</span><span class="token string">"原始对象"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Prototype</span> copy <span class="token operator">=</span> original<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 修改克隆对象不会影响原型对象</span>
copy<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"修改后的克隆对象"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre>
    <h3>
     <a id="vs_56">
     </a>
     浅拷贝vs深拷贝，傻傻分不清？🧐
    </h3>
    <p>
     这个必须说清楚！很多面试都会问到！
    </p>
    <h4>
     <a id="clone_60">
     </a>
     浅拷贝（默认的clone方式）
    </h4>
    <p>
     只复制基本类型和引用，但引用的对象本身不会被复制。
    </p>
    <p>
     ❌ 缺点：修改克隆对象中的引用类型，原型对象也会受影响！
    </p>
    <h4>
     <a id="_66">
     </a>
     深拷贝（进阶版）
    </h4>
    <p>
     不仅复制对象本身，还递归复制所有引用类型的成员变量。
    </p>
    <p>
     ✅ 优点：完全独立的两个对象，互不影响！
    </p>
    <p>
     深拷贝实现方式：
    </p>
    <pre><code class="prism language-java"><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token class-name">DeepCopy</span> <span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">DeepCopy</span> clone <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">DeepCopy</span><span class="token punctuation">)</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 深拷贝引用类型</span>
        clone<span class="token punctuation">.</span>address <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>address<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> clone<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">CloneNotSupportedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre>
    <h3>
     <a id="___89">
     </a>
     还有一招绝杀 - 序列化实现深拷贝！💯
    </h3>
    <p>
     这个方法超级实用，尤其是对象结构复杂的时候：
    </p>
    <pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token class-name">SerializableDeepCopy</span> <span class="token function">deepCopy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 写入流</span>
        <span class="token class-name">ByteArrayOutputStream</span> bos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ByteArrayOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">ObjectOutputStream</span> oos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectOutputStream</span><span class="token punctuation">(</span>bos<span class="token punctuation">)</span><span class="token punctuation">;</span>
        oos<span class="token punctuation">.</span><span class="token function">writeObject</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 读出来</span>
        <span class="token class-name">ByteArrayInputStream</span> bis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ByteArrayInputStream</span><span class="token punctuation">(</span>bos<span class="token punctuation">.</span><span class="token function">toByteArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">ObjectInputStream</span> ois <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectInputStream</span><span class="token punctuation">(</span>bis<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">SerializableDeepCopy</span><span class="token punctuation">)</span> ois<span class="token punctuation">.</span><span class="token function">readObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre>
    <h3>
     <a id="_112">
     </a>
     原型模式有什么优缺点？📊
    </h3>
    <h4>
     <a id="_114">
     </a>
     优点👍
    </h4>
    <ul>
     <li>
      性能提升：复制比new创建快多了
     </li>
     <li>
      简化创建：不用管对象创建的细节
     </li>
     <li>
      可以保存对象状态：运行时想复制就复制
     </li>
    </ul>
    <h4>
     <a id="_120">
     </a>
     缺点👎
    </h4>
    <ul>
     <li>
      循环引用的对象克隆起来好麻烦
     </li>
     <li>
      深拷贝实现有点复杂
     </li>
     <li>
      必须实现接口和方法
     </li>
    </ul>
    <h3>
     <a id="_126">
     </a>
     什么时候用原型模式？🕒
    </h3>
    <ul>
     <li>
      创建对象成本高，但对象之间差异小
     </li>
     <li>
      不想创建一堆工厂类
     </li>
     <li>
      类初始化需要消耗超多资源
     </li>
    </ul>
    <h3>
     <a id="_132">
     </a>
     实际应用在哪里？🌟
    </h3>
    <ul>
     <li>
      Java的Object克隆
     </li>
     <li>
      Spring框架的Bean复制
     </li>
     <li>
      各种配置信息的复制
     </li>
    </ul>
    <p>
     学会了原型模式，你的代码效率立刻提升一个档次！是不是超级实用？快点赞+收藏吧！❤️
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f34343130323136322f:61727469636c652f64657461696c732f313436313136303838" class_="artid" style="display:none">
 </p>
</div>


