---
layout: post
title: "Windows安装milvus和图形化管理工具attu"
date: 2025-03-11 19:57:44 +0800
description: "milvus官方网站并没有针对windows系统的安装有系统性的安装讲解，因此走了很多的弯路，为让兄弟们一路畅通，把安装过程做了如下记录。另外有几点提醒：1、（网上大多说不支持，只有个别牛人说支持，但是我历尽千辛万苦，尝试了很多方法，依然无效。所以，权当不支持吧，有不怕苦的兄弟，也可以自己试试）2、（原本我想要原生安装的，但也是无果，默哀10分钟）"
keywords: "Windows安装milvus和图形化管理工具attu"
categories: ['未分类']
tags: ['Windows', 'Milvus']
artid: "146186738"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146186738
    alt: "Windows安装milvus和图形化管理工具attu"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146186738
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146186738
cover: https://bing.ee123.net/img/rand?artid=146186738
image: https://bing.ee123.net/img/rand?artid=146186738
img: https://bing.ee123.net/img/rand?artid=146186738
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Windows安装milvus和图形化管理工具attu
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
     milvus官方网站并没有针对windows系统的安装有系统性的安装讲解，因此走了很多的弯路，为让兄弟们一路畅通，把安装过程做了如下记录。
     <br/>
     另外有几点提醒：
     <br/>
     1、
     <strong>
      windows无法安装milvus lite
     </strong>
     （网上大多说不支持，只有个别牛人说支持，但是我历尽千辛万苦，尝试了很多方法，依然无效。所以，权当不支持吧，有不怕苦的兄弟，也可以自己试试）
     <br/>
     2、
     <strong>
      windows安装milvus只支持docker安装
     </strong>
     （原本我想要原生安装的，但也是无果，默哀10分钟）
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/6ce83c6cbe0d4e22918ada7c8df2f4ec.png#pic_center"/>
    </p>
    <h3>
     <a id="_7">
     </a>
     一、准备工作
    </h3>
    <p>
     确保电脑上已装了python 3.8+
    </p>
    <h3>
     <a id="Docker_11">
     </a>
     二、安装Docker
    </h3>
    <p>
     1、先安装Hyper-V
     <br/>
     以此打开开：控制面板 - 程序和功能 - 启用或关闭Windows功能，选中Hyper-V，点确定安装
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/461ddccb582043f7b9d75188aff0adfc.png">
      <br/>
      2、下载Docker桌面版
      <br/>
      下载地址：https://www.docker.com/
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/0a43c06432c94784a28bf50fabf659f6.png">
       <br/>
       3、运行一直点击下一步安装至完成
       <br/>
       <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/db923e0a1a8242989093ddcbc3cbb4fe.png">
        <br/>
        <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/7a948e27cd6d4df7b9ef1caf79b9b427.png">
         <br/>
         看到这个画面代表安装成功
         <br/>
         <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/7eb7808f3467445581aebd30fc56ae6f.png">
          <br/>
          如果中途弹出安装wsl --update失败的窗口，就自己用管理员权限打开Windows PowerShell重新执行以下代码
         </img>
        </img>
       </img>
      </img>
     </img>
    </p>
    <pre><code class="prism language-bash">wsl <span class="token parameter variable">--update</span>
</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/3ff1de36ca854b28be088cb89a346bcd.png"/>
    </p>
    <h3>
     <a id="Milvus_29">
     </a>
     三、安装Milvus
    </h3>
    <p>
     1、点击此链接下载文件并保存到本地（可能需要梯子），重命名为：standalone.bat
     <br/>
     文件链接：https://raw.githubusercontent.com/milvus-io/milvus/refs/heads/master/scripts/standalone_embed.bat
     <br/>
     如果无法下载，请新建standalone.bat文件，并将以下代码粘贴至standalone.bat文件中：
    </p>
    <pre><code class="prism language-bash">@REM  Licensed to the LF AI <span class="token operator">&amp;</span> Data foundation under one
@REM  or <span class="token function">more</span> contributor license agreements. See the NOTICE <span class="token function">file</span>
@REM  distributed with this work <span class="token keyword">for</span> additional information
@REM  regarding copyright ownership. The ASF licenses this <span class="token function">file</span>
@REM  to you under the Apache License, Version <span class="token number">2.0</span> <span class="token punctuation">(</span>the
@REM  <span class="token string">"License"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> you may not use this <span class="token function">file</span> except <span class="token keyword">in</span> compliance
@REM  with the License. You may obtain a copy of the License at
@REM 
@REM    http://www.apache.org/licenses/LICENSE-2.0
@REM 
@REM  Unless required by applicable law or agreed to <span class="token keyword">in</span> writing, software
@REM  distributed under the License is distributed on an <span class="token string">"AS IS"</span> BASIS,
@REM  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
@REM  See the License <span class="token keyword">for</span> the specific language governing permissions and
@REM  limitations under the License.

@echo off
setlocal enabledelayedexpansion

:main
<span class="token keyword">if</span> <span class="token string">"%1"</span><span class="token operator">==</span><span class="token string">""</span> <span class="token punctuation">(</span>
    <span class="token builtin class-name">echo</span> Please use standalone_embed.bat restart^<span class="token operator">|</span>start^<span class="token operator">|</span>stop^<span class="token operator">|</span>delete
    <span class="token builtin class-name">exit</span> /b <span class="token number">1</span>
<span class="token punctuation">)</span>

<span class="token keyword">if</span> <span class="token string">"%1"</span><span class="token operator">==</span><span class="token string">"restart"</span> <span class="token punctuation">(</span>
    call :stop
    call :start
<span class="token punctuation">)</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token string">"%1"</span><span class="token operator">==</span><span class="token string">"start"</span> <span class="token punctuation">(</span>
    call :start
<span class="token punctuation">)</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token string">"%1"</span><span class="token operator">==</span><span class="token string">"stop"</span> <span class="token punctuation">(</span>
    call :stop
<span class="token punctuation">)</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token string">"%1"</span><span class="token operator">==</span><span class="token string">"delete"</span> <span class="token punctuation">(</span>
    call :delete
<span class="token punctuation">)</span> <span class="token keyword">else</span> <span class="token punctuation">(</span>
    <span class="token builtin class-name">echo</span> Unknown command.
    <span class="token builtin class-name">echo</span> Please use standalone_embed.bat restart^<span class="token operator">|</span>start^<span class="token operator">|</span>stop^<span class="token operator">|</span>upgrade^<span class="token operator">|</span>delete
    <span class="token builtin class-name">exit</span> /b <span class="token number">1</span>
<span class="token punctuation">)</span>
goto :eof

:run_embed
<span class="token punctuation">(</span>
<span class="token builtin class-name">echo</span> listen-client-urls: http://0.0.0.0:2379
<span class="token builtin class-name">echo</span> advertise-client-urls: http://0.0.0.0:2379
<span class="token builtin class-name">echo</span> quota-backend-bytes: <span class="token number">4294967296</span>
<span class="token builtin class-name">echo</span> auto-compaction-mode: revision
<span class="token builtin class-name">echo</span> auto-compaction-retention: <span class="token string">'1000'</span>
<span class="token punctuation">)</span> <span class="token operator">&gt;</span> embedEtcd.yaml

<span class="token punctuation">(</span>
<span class="token builtin class-name">echo</span> <span class="token comment"># Extra config to override default milvus.yaml</span>
<span class="token punctuation">)</span> <span class="token operator">&gt;</span> user.yaml

<span class="token keyword">if</span> not exist <span class="token string">"embedEtcd.yaml"</span> <span class="token punctuation">(</span>
    <span class="token builtin class-name">echo</span> embedEtcd.yaml <span class="token function">file</span> does not exist. Please try to create it <span class="token keyword">in</span> the current directory.
    <span class="token builtin class-name">exit</span> /b <span class="token number">1</span>
<span class="token punctuation">)</span>
<span class="token keyword">if</span> not exist <span class="token string">"user.yaml"</span> <span class="token punctuation">(</span>
    <span class="token builtin class-name">echo</span> user.yaml <span class="token function">file</span> does not exist. Please try to create it <span class="token keyword">in</span> the current directory.
    <span class="token builtin class-name">exit</span> /b <span class="token number">1</span>
<span class="token punctuation">)</span>

<span class="token function">docker</span> run <span class="token parameter variable">-d</span> ^
    <span class="token parameter variable">--name</span> milvus-standalone ^
    --security-opt seccomp:unconfined ^
    <span class="token parameter variable">-e</span> <span class="token assign-left variable">ETCD_USE_EMBED</span><span class="token operator">=</span>true ^
    <span class="token parameter variable">-e</span> <span class="token assign-left variable">ETCD_DATA_DIR</span><span class="token operator">=</span>/var/lib/milvus/etcd ^
    <span class="token parameter variable">-e</span> <span class="token assign-left variable">ETCD_CONFIG_PATH</span><span class="token operator">=</span>/milvus/configs/embedEtcd.yaml ^
    <span class="token parameter variable">-e</span> <span class="token assign-left variable">COMMON_STORAGETYPE</span><span class="token operator">=</span>local ^
    <span class="token parameter variable">-v</span> <span class="token string">"%cd%<span class="token entity" title="\v">\v</span>olumes\milvus:/var/lib/milvus"</span> ^
    <span class="token parameter variable">-v</span> <span class="token string">"%cd%<span class="token entity" title="\e">\e</span>mbedEtcd.yaml:/milvus/configs/embedEtcd.yaml"</span> ^
    <span class="token parameter variable">-v</span> <span class="token string">"%cd%\user.yaml:/milvus/configs/user.yaml"</span> ^
    <span class="token parameter variable">-p</span> <span class="token number">19530</span>:19530 ^
    <span class="token parameter variable">-p</span> <span class="token number">9091</span>:9091 ^
    <span class="token parameter variable">-p</span> <span class="token number">2379</span>:2379 ^
    --health-cmd<span class="token operator">=</span><span class="token string">"curl -f http://localhost:9091/healthz"</span> ^
    --health-interval<span class="token operator">=</span>30s ^
    --health-start-period<span class="token operator">=</span>90s ^
    --health-timeout<span class="token operator">=</span>20s ^
    --health-retries<span class="token operator">=</span><span class="token number">3</span> ^
    milvusdb/milvus:v2.5.5 ^
    milvus run standalone <span class="token operator">&gt;</span>nul
<span class="token keyword">if</span> %errorlevel% neq <span class="token number">0</span> <span class="token punctuation">(</span>
    <span class="token builtin class-name">echo</span> Failed to start Milvus container.
    <span class="token builtin class-name">exit</span> /b <span class="token number">1</span>
<span class="token punctuation">)</span>

goto :eof

:wait_for_milvus_running
<span class="token builtin class-name">echo</span> Wait <span class="token keyword">for</span> Milvus Starting<span class="token punctuation">..</span>.
:wait_loop
<span class="token keyword">for</span> /f <span class="token string">"tokens=*"</span> %%A <span class="token keyword">in</span> <span class="token punctuation">(</span><span class="token string">'docker ps ^| findstr "milvus-standalone" ^| findstr "healthy"'</span><span class="token punctuation">)</span> <span class="token keyword">do</span> <span class="token builtin class-name">set</span> <span class="token assign-left variable">running</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token keyword">if</span> <span class="token string">"!running!"</span><span class="token operator">==</span><span class="token string">"1"</span> <span class="token punctuation">(</span>
    <span class="token builtin class-name">echo</span> Start successfully.
    <span class="token builtin class-name">echo</span> To change the default Milvus configuration, edit user.yaml and restart the service.
    goto :eof
<span class="token punctuation">)</span>
<span class="token function">timeout</span> /t <span class="token number">1</span> <span class="token operator">&gt;</span>nul
goto wait_loop

:start
<span class="token keyword">for</span> /f <span class="token string">"tokens=*"</span> %%A <span class="token keyword">in</span> <span class="token punctuation">(</span><span class="token string">'docker ps ^| findstr "milvus-standalone" ^| findstr "healthy"'</span><span class="token punctuation">)</span> <span class="token keyword">do</span> <span class="token punctuation">(</span>
    <span class="token builtin class-name">echo</span> Milvus is running.
    <span class="token builtin class-name">exit</span> /b <span class="token number">0</span>
<span class="token punctuation">)</span>

<span class="token keyword">for</span> /f <span class="token string">"tokens=*"</span> %%A <span class="token keyword">in</span> <span class="token punctuation">(</span><span class="token string">'docker ps -a ^| findstr "milvus-standalone"'</span><span class="token punctuation">)</span> <span class="token keyword">do</span> <span class="token builtin class-name">set</span> <span class="token assign-left variable">container_exists</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token keyword">if</span> defined container_exists <span class="token punctuation">(</span>
    <span class="token function">docker</span> start milvus-standalone <span class="token operator">&gt;</span>nul
<span class="token punctuation">)</span> <span class="token keyword">else</span> <span class="token punctuation">(</span>
    call :run_embed
<span class="token punctuation">)</span>

<span class="token keyword">if</span> %errorlevel% neq <span class="token number">0</span> <span class="token punctuation">(</span>
    <span class="token builtin class-name">echo</span> Start failed.
    <span class="token builtin class-name">exit</span> /b <span class="token number">1</span>
<span class="token punctuation">)</span>

call :wait_for_milvus_running
goto :eof

:stop
<span class="token function">docker</span> stop milvus-standalone <span class="token operator">&gt;</span>nul
<span class="token keyword">if</span> %errorlevel% neq <span class="token number">0</span> <span class="token punctuation">(</span>
    <span class="token builtin class-name">echo</span> Stop failed.
    <span class="token builtin class-name">exit</span> /b <span class="token number">1</span>
<span class="token punctuation">)</span>
<span class="token builtin class-name">echo</span> Stop successfully.
goto :eof

:delete_container
<span class="token keyword">for</span> /f <span class="token string">"tokens=*"</span> %%A <span class="token keyword">in</span> <span class="token punctuation">(</span><span class="token string">'docker ps ^| findstr "milvus-standalone"'</span><span class="token punctuation">)</span> <span class="token keyword">do</span> <span class="token punctuation">(</span>
    <span class="token builtin class-name">echo</span> Please stop Milvus <span class="token function">service</span> before delete.
    <span class="token builtin class-name">exit</span> /b <span class="token number">1</span>
<span class="token punctuation">)</span>
<span class="token function">docker</span> <span class="token function">rm</span> milvus-standalone <span class="token operator">&gt;</span>nul
<span class="token keyword">if</span> %errorlevel% neq <span class="token number">0</span> <span class="token punctuation">(</span>
    <span class="token builtin class-name">echo</span> Delete Milvus container failed.
    <span class="token builtin class-name">exit</span> /b <span class="token number">1</span>
<span class="token punctuation">)</span>
<span class="token builtin class-name">echo</span> Delete Milvus container successfully.
goto :eof

:delete
call :delete_container
<span class="token function">rmdir</span> /s /q <span class="token string">"%cd%<span class="token entity" title="\v">\v</span>olumes"</span>
del /q embedEtcd.yaml
del /q user.yaml
<span class="token builtin class-name">echo</span> Delete successfully.
goto :eof

:EOF
</code></pre>
    <p>
     2、执行安装
    </p>
    <pre><code class="prism language-bash">standalone.bat start
</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/8c7bc9c623fd47aaa01659d0e66364be.png"/>
     <br/>
     （可能需要梯子，请自备）
    </p>
    <p>
     3、测试链接
     <br/>
     在本地新建test.py文件，贴上以下代码，执行后不报错，说明已经安装成功
    </p>
    <pre><code class="prism language-python"><span class="token keyword">from</span> pymilvus <span class="token keyword">import</span> connections

<span class="token comment"># 连接到 Milvus 服务</span>
connections<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>
    alias<span class="token operator">=</span><span class="token string">"default"</span><span class="token punctuation">,</span>
    host<span class="token operator">=</span><span class="token string">'localhost'</span><span class="token punctuation">,</span>
    port<span class="token operator">=</span><span class="token string">'19530'</span>
<span class="token punctuation">)</span>
</code></pre>
    <h3>
     <a id="attu_212">
     </a>
     四、安装图形化管理工具attu
    </h3>
    <p>
     1、查看docker虚拟IP
     <br/>
     打开cmd命令行窗口，并执行以下代码
    </p>
    <pre><code class="prism language-bash">ipconfig
</code></pre>
    <p>
     找到如下IP（WSL (Hyper-V firewall) IPv4地址），如：172.24.208.1
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/526bf9b24911412bb398148c4d5aef0e.png"/>
    </p>
    <p>
     2、执行安装attu
    </p>
    <p>
     将以下命令中的{milvus server IP}替换成上一步获取到的docker虚拟IP
    </p>
    <pre><code class="prism language-bash"><span class="token function">docker</span> run <span class="token parameter variable">-p</span> <span class="token number">8000</span>:3000 <span class="token parameter variable">-e</span> <span class="token assign-left variable">MILVUS_URL</span><span class="token operator">=</span><span class="token punctuation">{<!-- --></span>milvus server IP<span class="token punctuation">}</span>:19530 zilliz/attu:v2.5
</code></pre>
    <p>
     如：
    </p>
    <pre><code class="prism language-bash"><span class="token function">docker</span> run <span class="token parameter variable">-p</span> <span class="token number">8000</span>:3000 <span class="token parameter variable">-e</span> <span class="token assign-left variable">MILVUS_URL</span><span class="token operator">=</span><span class="token number">172.24</span>.208.1:19530 zilliz/attu:v2.5
</code></pre>
    <p>
     等待执行完毕
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/0e2c4a587f6f43919eaaabc2b1bc7636.png"/>
     <br/>
     在浏览器打开：http://127.0.0.1:8000/
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/64ddb285b89f4ba0bfc2241e7ebfced5.png"/>
     <br/>
     确保Milvus地址是docker虚拟IP，端口是19530，点击“连接”，即可看到图形化的管理界面了。
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/00c5a627285e47c196bd86fa35bd925d.png"/>
    </p>
    <h3>
     <a id="milvus_239">
     </a>
     五、运行milvus
    </h3>
    <p>
     经过以上步骤安装好milvus后，第二天会发现电脑重启开启，milvus服务却不能用了。可以按照以下方式手动运行，就可以继续访问了。
     <br/>
     步骤如下：
     <br/>
     打开Docker - Containers，并选中Actions列的运行按钮（三角型按钮）
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/61215672fc674fa59c57bfd0bc7341e9.png"/>
     <br/>
     点击运行之后，需要等待一段时间，点击Name，可以查看运行进度详情
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/a484b245c56a40a4ab28619663d8fac0.png"/>
     <br/>
     我们也可以访问http://localhost:19530，如出现下图显示，也代表milvus已运行成功
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/d779a01da78c45a385fff8be0467f1a7.png"/>
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f:626c6f672e6373646e2e6e65742f79697869616f303330372f:61727469636c652f64657461696c732f313436313836373338" class_="artid" style="display:none">
 </p>
</div>


