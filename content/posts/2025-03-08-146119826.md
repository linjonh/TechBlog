---
layout: post
title: "GPT入门第5课-思维链的提出与案例"
date: 2025-03-08 18:10:13 +0800
description: "思维链的使用"
keywords: "【GPT入门】第5课 思维链的提出与案例"
categories: ['大模型']
tags: ['Gpt', 'Android']
artid: "146119826"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146119826
    alt: "GPT入门第5课-思维链的提出与案例"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146119826
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146119826
cover: https://bing.ee123.net/img/rand?artid=146119826
image: https://bing.ee123.net/img/rand?artid=146119826
img: https://bing.ee123.net/img/rand?artid=146119826
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     【GPT入门】第5课 思维链的提出与案例
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
    </p>
    <p>
    </p>
    <h2>
     <a id="1__3">
     </a>
     1. 思维链的提出
    </h2>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/5100f66613ee4f7ebc0fdb91d7bc122d.png"/>
    </p>
    <h2>
     <a id="2_5">
     </a>
     2.思维链的应用
    </h2>
    <p>
     针对复杂场景，AI回直接给出答案，可能是错误的
     <br/>
     例如，题：
    </p>
    <p>
     **题一：**我去市场买了 10 个苹果。我给了邻居 2 个苹果和修理工 2 个苹果。然后我去买了 5 个苹果并吃了 1 个。我还剩下多少苹果？
    </p>
    <p>
     **题二：**我去市场买了 10 个苹果。我给了邻居 2 个苹果和修理工 2 个苹果。然后我去买了 5 个苹果并吃了 1 个。我还剩下多少苹果？"
     <br/>
     prompt = “我去市场买了 10 个苹果。我给了邻居 2 个苹果和修理工 2 个苹果。然后我去买了 5 个苹果并吃了 1 个, 又买了5个，吃掉3个。我还剩下多少苹果？”
    </p>
    <p>
     但，在题后面，给出，
     <strong>
      请一步步思考
     </strong>
     的提示，AI又会做正确。
    </p>
    <p>
     自己试试，不同模型给的答案可能不一样。
    </p>
    <h2>
     <a id="3_19">
     </a>
     3.思维链代码
    </h2>
    <pre><code class="prism language-c">from openai import OpenAI

# 加载 <span class="token punctuation">.</span>env 文件到环境变量
from dotenv import load_dotenv<span class="token punctuation">,</span> find_dotenv
_ <span class="token operator">=</span> <span class="token function">load_dotenv</span><span class="token punctuation">(</span><span class="token function">find_dotenv</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

client <span class="token operator">=</span> <span class="token function">OpenAI</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token macro property"><span class="token directive-hash">#</span> <span class="token directive keyword">prompt</span> <span class="token expression"><span class="token operator">=</span> </span><span class="token string">"我去市场买了 10 个苹果。我给了邻居 2 个苹果和修理工 2 个苹果。然后我去买了 5 个苹果并吃了 1 个。我还剩下多少苹果？"</span></span>
prompt <span class="token operator">=</span> <span class="token string">"我去市场买了 10 个苹果。我给了邻居 2 个苹果和修理工 2 个苹果。然后我去买了 5 个苹果并吃了 1 个, 又买了5个，吃掉3个。我还剩下多少苹果？"</span>


def <span class="token function">get_completion</span><span class="token punctuation">(</span>prompt<span class="token punctuation">,</span> model<span class="token operator">=</span><span class="token char">'gpt-3.5-turbo'</span><span class="token punctuation">)</span><span class="token operator">:</span>
    messages <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{<!-- --></span><span class="token string">"role"</span><span class="token operator">:</span><span class="token string">"user"</span><span class="token punctuation">,</span><span class="token string">"content"</span><span class="token operator">:</span>prompt<span class="token punctuation">}</span><span class="token punctuation">]</span>
    response <span class="token operator">=</span> client<span class="token punctuation">.</span>chat<span class="token punctuation">.</span>completions<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>
        model<span class="token operator">=</span>model<span class="token punctuation">,</span>
        messages<span class="token operator">=</span>messages
    <span class="token punctuation">)</span>
    <span class="token keyword">return</span> response<span class="token punctuation">.</span>choices<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>message<span class="token punctuation">.</span>content

<span class="token function">print</span><span class="token punctuation">(</span><span class="token function">get_completion</span><span class="token punctuation">(</span>prompt<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
    <p>
     它的回答：
     <br/>
     我剩下 10 - 2 - 2 - 5 + 1 - 5 + 3 = 0 个苹果。我已经吃完了所有买来的苹果。
    </p>
    <h2>
     <a id="4__48">
     </a>
     4. 增加请一步步思考的思维链提示
    </h2>
    <p>
     prompt = “我去市场买了 10 个苹果。我给了邻居 2 个苹果和修理工 2 个苹果。然后我去买了 5 个苹果并吃了 1 个, 又买了5个，吃掉3个。我还剩下多少苹果？ 请一步步思考”
     <br/>
     它的答案竟然就对了。openAI给的回答如下：
    </p>
    <pre><code class="prism language-c"><span class="token number">1.</span> 一开始我买了<span class="token number">10</span>个苹果。
<span class="token number">2.</span> 给邻居和修理工各<span class="token number">2</span>个苹果后，我剩下了<span class="token number">10</span> <span class="token operator">-</span> <span class="token number">2</span> <span class="token operator">-</span> <span class="token number">2</span> <span class="token operator">=</span> <span class="token number">6</span>个苹果。
<span class="token number">3.</span> 我又买了<span class="token number">5</span>个苹果，剩下的苹果数量为<span class="token number">6</span> <span class="token operator">+</span> <span class="token number">5</span> <span class="token operator">=</span> <span class="token number">11</span>个。
<span class="token number">4.</span> 在这<span class="token number">11</span>个苹果中，我吃了<span class="token number">1</span>个，剩下<span class="token number">10</span>个。
<span class="token number">5.</span> 我又买了<span class="token number">5</span>个苹果，剩下的苹果数量为<span class="token number">10</span> <span class="token operator">+</span> <span class="token number">5</span> <span class="token operator">=</span> <span class="token number">15</span>个。
<span class="token number">6.</span> 在这<span class="token number">15</span>个苹果中，我又吃了<span class="token number">3</span>个，剩下的苹果数量为<span class="token number">15</span> <span class="token operator">-</span> <span class="token number">3</span> <span class="token operator">=</span> <span class="token number">12</span>个。

</code></pre>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f:2f626c6f672e6373646e2e6e65742f737061726b5f6465762f:61727469636c652f64657461696c732f313436313139383236" class_="artid" style="display:none">
 </p>
</div>


