---
layout: post
title: "äº‘åŸç”Ÿ3.3-Kubernetes-ä¸­é—´ä»¶éƒ¨ç½²å®æˆ˜"
date: 2024-02-29 15:16:00 +0800
description: "ä¸€ä¸ªé¡¹ç›®æ€»ä¼šæœ‰æ•°æ®å§ï¼Ÿæ•°æ®å­˜é‚£é‡Œå‘¢ï¼Ÿåœ¨å‰é¢æˆ‘ä»¬è®²è¿‡ï¼Œå¾ˆæ˜æ˜¾ç›´æ¥å­˜åœ¨æ•°æ®å·é‡Œé¢ï¼ˆPVCï¼‰ï¼Œä¾‹å¦‚ MyS"
keywords: "äº‘åŸç”Ÿkuberneteså…¨æ ˆæ¶æ„å¸ˆå®æˆ˜ pdfä¸‹è½½"
categories: ['äº‘åŸç”Ÿç³»åˆ—']
tags: ['å®¹å™¨', 'äº‘åŸç”Ÿ', 'ä¸­é—´ä»¶', 'Kubernetes', 'Docker']
artid: "125697602"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=125697602
    alt: "äº‘åŸç”Ÿ3.3-Kubernetes-ä¸­é—´ä»¶éƒ¨ç½²å®æˆ˜"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=125697602
featuredImagePreview: https://bing.ee123.net/img/rand?artid=125697602
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     ã€äº‘åŸç”Ÿã€‘3.3 Kubernetes ä¸­é—´ä»¶éƒ¨ç½²å®æˆ˜
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <blockquote>
     <p>
      å“ˆå–½~å¤§å®¶å¥½å‘€ï¼Œè¿™ç¯‡ç»§ç»­ä¸Šç¯‡çš„å®æˆ˜è®²è§£â€”â€”å¼€å§‹æˆ‘ä»¬çš„ä¸­é—´ä»¶éƒ¨ç½²å®æˆ˜
     </p>
     <p>
     </p>
     <p>
     </p>
     <p style="text-align:center;">
      ğŸ¥‡ä¸ªäººä¸»é¡µï¼š
      <a href="https://blog.csdn.net/aasd23?spm=1000.2115.3001.5343" title="ä¸ªäººä¸»é¡µâ€‹â€‹â€‹â€‹â€‹">
       ä¸ªäººä¸»é¡µâ€‹â€‹â€‹â€‹â€‹
      </a>
     </p>
     <p style="text-align:center;">
      ğŸ¥ˆÂ ç³»åˆ—ä¸“æ ï¼š
      <a href="https://blog.csdn.net/aasd23/category_11852592.html?spm=1001.2014.3001.5482" title="ã€äº‘åŸç”Ÿç³»åˆ—ã€‘">
       ã€äº‘åŸç”Ÿç³»åˆ—ã€‘
      </a>
     </p>
     <p style="text-align:center;">
      ğŸ¥‰ä¸è¿™ç¯‡ç›¸å…³çš„æ–‡ç« ï¼š
     </p>
     <p>
     </p>
     <table border="1" cellpadding="1" cellspacing="1">
      <tbody>
       <tr>
        <td>
         ã€äº‘åŸç”Ÿã€‘2.5 Kubernetes æ ¸å¿ƒå®æˆ˜ï¼ˆä¸‹ï¼‰
        </td>
        <td>
         <a href="https://blog.csdn.net/aasd23/article/details/125564019?spm=1001.2014.3001.5501" title="ã€äº‘åŸç”Ÿã€‘2.5 Kubernetes æ ¸å¿ƒå®æˆ˜ï¼ˆä¸‹ï¼‰_ç¨‹åºçŒ¿è¿½çš„åšå®¢-CSDNåšå®¢">
          ã€äº‘åŸç”Ÿã€‘2.5 Kubernetes æ ¸å¿ƒå®æˆ˜ï¼ˆä¸‹ï¼‰_ç¨‹åºçŒ¿è¿½çš„åšå®¢-CSDNåšå®¢
         </a>
        </td>
       </tr>
       <tr>
        <td>
         ã€äº‘åŸç”Ÿã€‘3.1 Kuberneteså¹³å°å®‰è£…KubeSpher
        </td>
        <td>
         <a href="https://blog.csdn.net/aasd23/article/details/125617467?spm=1001.2014.3001.5501" title="ã€äº‘åŸç”Ÿã€‘3.1 Kuberneteså¹³å°å®‰è£…KubeSpher_ç¨‹åºçŒ¿è¿½çš„åšå®¢-CSDNåšå®¢">
          ã€äº‘åŸç”Ÿã€‘3.1 Kuberneteså¹³å°å®‰è£…KubeSpher_ç¨‹åºçŒ¿è¿½çš„åšå®¢-CSDNåšå®¢
         </a>
        </td>
       </tr>
       <tr>
        <td>
         ã€äº‘åŸç”Ÿã€‘3.2 Kubernetes å®æˆ˜ä¹‹å¤šç§Ÿæˆ·ç³»ç»Ÿå®æˆ˜
        </td>
        <td>
         <a href="https://blog.csdn.net/aasd23/article/details/125667760?spm=1001.2014.3001.5501" title="ã€äº‘åŸç”Ÿã€‘3.2 Kubernetes å®æˆ˜ä¹‹å¤šç§Ÿæˆ·ç³»ç»Ÿå®æˆ˜_ç¨‹åºçŒ¿è¿½çš„åšå®¢-CSDNåšå®¢">
          ã€äº‘åŸç”Ÿã€‘3.2 Kubernetes å®æˆ˜ä¹‹å¤šç§Ÿæˆ·ç³»ç»Ÿå®æˆ˜_ç¨‹åºçŒ¿è¿½çš„åšå®¢-CSDNåšå®¢
         </a>
        </td>
       </tr>
      </tbody>
     </table>
    </blockquote>
    <p>
    </p>
    <p id="main-toc">
     <strong>
      ç›®å½•
     </strong>
    </p>
    <p id="%E4%B8%80%E3%80%81%E5%89%8D%E8%A8%80-toc" style="margin-left:0px;">
     <a href="#%E4%B8%80%E3%80%81%E5%89%8D%E8%A8%80" rel="nofollow">
      ä¸€ã€å‰è¨€
     </a>
    </p>
    <p id="%E4%BA%8C%E3%80%81%E9%83%A8%E7%BD%B2MySQL%E6%9C%89%E7%8A%B6%E6%80%81%E5%89%AF%E6%9C%AC%E9%9B%86-toc" style="margin-left:0px;">
     <a href="#%E4%BA%8C%E3%80%81%E9%83%A8%E7%BD%B2MySQL%E6%9C%89%E7%8A%B6%E6%80%81%E5%89%AF%E6%9C%AC%E9%9B%86" rel="nofollow">
      äºŒã€éƒ¨ç½²MySQLæœ‰çŠ¶æ€å‰¯æœ¬é›†
     </a>
    </p>
    <p id="%E4%B8%89%E3%80%81%E9%83%A8%E7%BD%B2MySQL%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E7%BD%91%E7%BB%9C-toc" style="margin-left:0px;">
     <a href="#%E4%B8%89%E3%80%81%E9%83%A8%E7%BD%B2MySQL%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E7%BD%91%E7%BB%9C" rel="nofollow">
      ä¸‰ã€éƒ¨ç½²MySQLè´Ÿè½½å‡è¡¡ç½‘ç»œ
     </a>
    </p>
    <p id="%E5%9B%9B%E3%80%81%E9%83%A8%E7%BD%AERedis%E8%AE%BE%E7%BD%AE%E7%BD%91%E7%BB%9C-toc" style="margin-left:0px;">
     <a href="#%E5%9B%9B%E3%80%81%E9%83%A8%E7%BD%AERedis%E8%AE%BE%E7%BD%AE%E7%BD%91%E7%BB%9C" rel="nofollow">
      å››ã€éƒ¨ç½®Redisè®¾ç½®ç½‘ç»œ
     </a>
    </p>
    <p id="NRstb-toc" style="margin-left:40px;">
     <a href="#NRstb" rel="nofollow">
      1ã€rediså®¹å™¨å¯åŠ¨
     </a>
    </p>
    <p id="%E4%BA%94%E3%80%81%E9%83%A8%E7%BD%B2%20ElasticSearch-toc" style="margin-left:0px;">
     <a href="#%E4%BA%94%E3%80%81%E9%83%A8%E7%BD%B2%20ElasticSearch" rel="nofollow">
      äº”ã€éƒ¨ç½² ElasticSearch
     </a>
    </p>
    <p id="1%E3%80%81es%E5%AE%B9%E5%99%A8%E5%90%AF%E5%8A%A8-toc" style="margin-left:40px;">
     <a href="#1%E3%80%81es%E5%AE%B9%E5%99%A8%E5%90%AF%E5%8A%A8" rel="nofollow">
      1ã€eså®¹å™¨å¯åŠ¨
     </a>
    </p>
    <hr id="hr-toc"/>
    <p>
    </p>
    <h2 id="%E4%B8%80%E3%80%81%E5%89%8D%E8%A8%80">
     ä¸€ã€å‰è¨€
    </h2>
    <blockquote>
     <p>
      åœ¨å‰é¢å‘¢ï¼Œæˆ‘ä»¬åšäº†ä¸€ä¸ªå¤šç§Ÿæˆ·ç³»ç»Ÿï¼Œè¿™æ¬¡ç”¨ä¸Šæ¬¡çš„ä¸€ä¸ªæ™®é€šç”¨æˆ·ç™»å…¥è¿›å»ç³»ç»Ÿã€‚
     </p>
     <p>
      æˆ‘ä»¬å¦‚ä½•åœ¨äº‘ä¸Šéƒ¨ç½²ä¸€ä¸ªåº”ç”¨ï¼Ÿæ˜¯ä»¥ä»€ä¹ˆæ ·çš„æ–¹å¼ï¼Ÿè¯¥åº”ç”¨åˆæ˜¯ä»€ä¹ˆæ ·å­ï¼Ÿ
     </p>
     <p>
      åœ¨Â KubeSphere é‡Œé¢æœ‰ä¸ªå«å·¥ä½œè´Ÿè½½é‡Œé¢æœ‰éƒ¨ç½²ã€æœ‰çŠ¶æ€å‰¯æœ¬é›†ã€å®ˆæŠ¤è¿›ç¨‹é›†ï¼Œå¯¹åº”çš„å°±æ˜¯ä»¥å‰çš„
      <strong>
       éƒ¨ç½²ï¼ˆDeploymentï¼‰ã€æœ‰çŠ¶æ€å‰¯æœ¬é›†ï¼ˆStatefulSetï¼‰ã€å®ˆæŠ¤è¿›ç¨‹é›†ï¼ˆDaemonSetï¼‰
      </strong>
      <br/>
      <img alt="" height="478" src="https://i-blog.csdnimg.cn/blog_migrate/d2f2d95c2378f13d7d3d824fd4466b65.png" width="1087"/>
     </p>
    </blockquote>
    <blockquote>
     <p>
      ä¸€ä¸ªé¡¹ç›®æ€»ä¼šæœ‰æ•°æ®å§ï¼Ÿæ•°æ®å­˜é‚£é‡Œå‘¢ï¼Ÿåœ¨å‰é¢æˆ‘ä»¬è®²è¿‡ï¼Œå¾ˆæ˜æ˜¾ç›´æ¥å­˜åœ¨æ•°æ®å·é‡Œé¢ï¼ˆPVCï¼‰ï¼Œä¾‹å¦‚ MySQLçš„æ•°æ®ã€‚æ¯”å¦‚ MySQLæœ‰è‡ªå·±çš„é…ç½®æ–‡ä»¶ã€Redis æœ‰è‡ªå·±çš„é…ç½®æ–‡ä»¶ã€å¾®æœåŠ¡ä¹Ÿæœ‰è‡ªå·±çš„é…ç½®æ–‡ä»¶ï¼Œå°†å®ƒä»¬æŒ‚åœ¨åˆ°é…ç½®é›†é‡Œé¢ï¼ˆConfigMapï¼‰ï¼ŒæœåŠ¡é‡‡ç”¨çš„æ˜¯ ClusterlP ä¸
      <br/>
      NodePortã€‚
     </p>
    </blockquote>
    <h2 id="%E4%BA%8C%E3%80%81%E9%83%A8%E7%BD%B2MySQL%E6%9C%89%E7%8A%B6%E6%80%81%E5%89%AF%E6%9C%AC%E9%9B%86">
     äºŒã€éƒ¨ç½²MySQLæœ‰çŠ¶æ€å‰¯æœ¬é›†
    </h2>
    <blockquote>
     <p>
      æ— è®ºéƒ¨ç½²ä¸€ä¸ªä¸­é—´ä»¶ï¼Œéƒ½è¦æ‰§è¡Œç¬¬ä¸€æ­¥â€”â€”åœ¨ docker hub é‡Œé¢åœ¨åˆ°ä¸­é—´ä»¶çš„é•œåƒã€‚
     </p>
     <p>
      åœ¨é…ç½®ä¸­å¿ƒâ€”â€”&gt;é…ç½®é‡Œé¢åˆ›å»ºä¸€ä¸ªé…ç½®ï¼ˆåç§°ï¼Œæè¿°ä¿¡æ¯ï¼‰ï¼Œæ·»åŠ æ•°æ®ï¼ˆKey ä¸ valueï¼‰
     </p>
    </blockquote>
    <p>
     <strong>
      ğŸ¡é…ç½®ä¸€ä¸‹å€¼
     </strong>
    </p>
    <pre><code>docker run -p 3306:3306 --name mysql-01 \
-v /mydata/mysql/log:/var/log/mysql \
-v /mydata/mysql/data:/var/lib/mysql \
-v /mydata/mysql/conf:/etc/mysql/conf.d \
-e MYSQL_ROOT_PASSWORD=root \
--restart=always \
-d mysql:5.7 </code></pre>
    <p>
     <img alt="" height="757" src="https://i-blog.csdnimg.cn/blog_migrate/8c504b5ec7a31727ca29f5e141d924b7.png" width="1200"/>
    </p>
    <p>
     å†åˆ›å»ºä¸€ä¸ªå­˜å‚¨çš„åœ°æ–¹ï¼ˆå­˜å‚¨å·ï¼‰ä½¿ç”¨å•ä¸ªèŠ‚ç‚¹è¯»å†™ï¼ˆReadWriteOnce(RW0)ï¼‰
    </p>
    <p>
     <img alt="" height="110" src="https://i-blog.csdnimg.cn/blog_migrate/655ef076313f7094a540cc0bd3f8a36b.png" width="956"/>
    </p>
    <p>
    </p>
    <p>
     è®¾ç½®ä¸‹å®¹å™¨é•œåƒï¼ˆè®°å¾—å‹¾é€‰åŒæ­¥ä¸»æœºæ—¶åŒºï¼‰ã€æŒ‚åœ¨å­˜å‚¨ï¼ˆé…ç½®æ–‡ä»¶ä¸€èˆ¬ä¸ºåªè¯»çš„æ–¹å¼ï¼‰ã€é«˜çº§è®¾ç½®ç­‰è®¾ç½®
    </p>
    <p>
     <img alt="" height="777" src="https://i-blog.csdnimg.cn/blog_migrate/b0d0b19c5dde829cf4548de925d07502.png" width="1200"/>
    </p>
    <p>
    </p>
    <p>
     åœ¨è¿™é‡Œæˆ‘ä»¬çš„ MySQL æœ‰çŠ¶æ€å‰¯æœ¬é›†å°±åˆ›å»ºå¥½äº†ï¼Œåˆ°æ­¤æ—¶åº”ç”¨è¿˜ä¸èƒ½è®¿é—®
    </p>
    <p>
     <strong>
      ğŸ¡mysqlé…ç½®ç¤ºä¾‹
     </strong>
    </p>
    <pre><code>[client]
default-character-set=utf8mb4
 
[mysql]
default-character-set=utf8mb4
 
[mysqld]
init_connect='SET collation_connection = utf8mb4_unicode_ci'
init_connect='SET NAMES utf8mb4'
character-set-server=utf8mb4
collation-server=utf8mb4_unicode_ci
skip-character-set-client-handshake
skip-name-resolve</code></pre>
    <h2 id="%E4%B8%89%E3%80%81%E9%83%A8%E7%BD%B2MySQL%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E7%BD%91%E7%BB%9C">
     ä¸‰ã€éƒ¨ç½²MySQLè´Ÿè½½å‡è¡¡ç½‘ç»œ
    </h2>
    <blockquote>
     <p>
      æˆ‘ä»¬åœ¨ä¸Šé¢åˆ›å»ºå¥½çš„æœ‰çŠ¶æ€å‰¯æœ¬é›†åªèƒ½åœ¨é›†ç¾¤é‡Œé¢è®¿é—®ï¼Œåœ¨é›†ç¾¤å†…éƒ¨ï¼Œç›´æ¥é€šè¿‡åº”ç”¨çš„ ã€æœåŠ¡å.é¡¹ç›®åã€‘ ç›´æ¥è®¿é—®
     </p>
    </blockquote>
    <pre><code>mysql -uroot -hhis-mysql-glgf.his -p</code></pre>
    <blockquote>
     <p>
      åœ¨åº”ç”¨è´Ÿè½½â€”â€”&gt;æœåŠ¡é‡Œé¢è®¾ç½®
      <strong>
       åŸºæœ¬ä¿¡æ¯ï¼ˆè®¾ç½®åç§°ï¼Œæè¿°ä¿¡æ¯ï¼‰ã€æœåŠ¡è®¾ç½®ï¼ˆè®¾ç½®è®¿é—®ç±»å‹ï¼Œæ·»åŠ ä¸€ä¸ªç«¯å£ï¼‰ã€é«˜çº§è®¾ç½®ï¼ˆè®¾ç½®è®¿é—®æ–¹å¼ï¼Œåƒå¤–ç½‘è®¿é—®ä¸€æ ·ï¼‰
      </strong>
     </p>
    </blockquote>
    <p>
     <img alt="" height="747" src="https://i-blog.csdnimg.cn/blog_migrate/df70deac4e1336d56810124dcc64e91d.png" width="1200"/>
    </p>
    <p>
     <strong>
      ğŸ¡
     </strong>
     <strong>
      å¯åŠ¨ MySQL æ·»åŠ è¿æ¥åå­—ï¼ŒIP åœ°å€ç­‰ä¿¡æ¯
     </strong>
    </p>
    <p>
     <img alt="" height="812" src="https://i-blog.csdnimg.cn/blog_migrate/b060e285bb26a3c1de6ad158ed320d64.png" width="1200"/>
    </p>
    <p>
     <strong>
      ğŸ¡Â è¿™é‡Œæˆ‘ä»¬éƒ¨ç½²çš„é¡¹ç›®åœ¨ MySQL ä¹Ÿèƒ½è®¿é—®äº†
     </strong>
    </p>
    <h2 id="%E5%9B%9B%E3%80%81%E9%83%A8%E7%BD%AERedis%E8%AE%BE%E7%BD%AE%E7%BD%91%E7%BB%9C">
     å››ã€éƒ¨ç½®Redisè®¾ç½®ç½‘ç»œ
    </h2>
    <p>
     <strong>
      ğŸ¡åŒæ ·çš„ï¼Œå…ˆæ‰¾åˆ°Â Redis å®˜æ–¹é•œåƒï¼Œç„¶åè¿›è¡Œè®¾ç½®
     </strong>
    </p>
    <h3 id="NRstb">
     1ã€rediså®¹å™¨å¯åŠ¨
    </h3>
    <p>
     <strong>
      ğŸ¡åˆ›å»ºé…ç½®æ–‡ä»¶ï¼Œå‡†å¤‡redisé…ç½®æ–‡ä»¶å†…å®¹
     </strong>
    </p>
    <pre><code>mkdir -p /mydata/redis/conf &amp;&amp; vim /mydata/redis/conf/redis.conf</code></pre>
    <p>
     <br/>
     <strong>
      ğŸ¡é…ç½®ç¤ºä¾‹
     </strong>
    </p>
    <pre><code>appendonly yes
port 6379
bind 0.0.0.0</code></pre>
    <p>
     <br/>
     <strong>
      ğŸ¡dockerå¯åŠ¨redis
     </strong>
    </p>
    <pre><code>docker run -d -p 6379:6379 --restart=always \
-v /mydata/redis/conf/redis.conf:/etc/redis/redis.conf \
-v Â /mydata/redis-01/data:/data \
Â --name redis-01 redis:6.2.5 \
Â redis-server /etc/redis/redis.conf</code></pre>
    <p>
     <strong>
      ğŸ¡é…ç½®ä¸­å¿ƒâ€”â€”&gt;é…ç½®é‡Œé¢é…ç½®ä¸€å¯¹ KV ã€‚
     </strong>
    </p>
    <p>
     <strong>
      ğŸ¡åº”ç”¨è´Ÿè½½â€”â€”&gt;å·¥ä½œè´Ÿè½½é‡Œé¢å†åˆ›å»ºä¸€ä¸ªæœ‰çŠ¶æ€å‰¯æœ¬é›†ï¼ˆredis çš„ï¼‰
     </strong>
    </p>
    <p>
    </p>
    <h2 id="%E4%BA%94%E3%80%81%E9%83%A8%E7%BD%B2%20ElasticSearch">
     äº”ã€éƒ¨ç½² ElasticSearch
    </h2>
    <h3 id="1%E3%80%81es%E5%AE%B9%E5%99%A8%E5%90%AF%E5%8A%A8">
     1ã€eså®¹å™¨å¯åŠ¨
    </h3>
    <p>
     <strong>
      ğŸ¡åˆ›å»ºæ•°æ®ç›®å½•
     </strong>
    </p>
    <pre><code>mkdir -p /mydata/es-01 &amp;&amp; chmod 777 -R /mydata/es-01</code></pre>
    <p>
     <strong>
      ğŸ¡å®¹å™¨å¯åŠ¨
     </strong>
    </p>
    <pre><code>docker run --restart=always -d -p 9200:9200 -p 9300:9300 \
-e "discovery.type=single-node" \
-e ES_JAVA_OPTS="-Xms512m -Xmx512m" \
-v es-config:/usr/share/elasticsearch/config \
-v /mydata/es-01/data:/usr/share/elasticsearch/data \
--name es-01 \
elasticsearch:7.13.4</code></pre>
    <p>
     <img alt="" height="490" src="https://i-blog.csdnimg.cn/blog_migrate/9ef4f4492a221d55be656982eedf829f.png" width="996"/>
    </p>
    <blockquote>
     <p>
      <strong>
       éœ€è¦æ³¨æ„çš„æ˜¯å­è·¯å¾„æŒ‚è½½ï¼Œé…ç½®ä¿®æ”¹åï¼Œk8s ä¸ä¼šå¯¹å…¶ Pod å†…çš„ç›¸å…³é…ç½®æ–‡ä»¶è¿›è¡Œçƒ­æ›´æ–°ï¼Œéœ€è¦è‡ªå·±é‡å¯Pod
      </strong>
     </p>
    </blockquote>
    <p>
    </p>
    <p>
     ï¼ˆæ±‚å…³æ³¨ï¼‰æŒç»­æ›´æ–°ä¸­â€¦â€¦
    </p>
    <p>
     <img alt="" height="200" src="https://i-blog.csdnimg.cn/blog_migrate/c99b6dc8e005c51cb60e4c27f9b1c072.gif" width="200"/>
    </p>
   </div>
  </div>
  <div class="blog-extension-box" id="blogExtensionBox" style="width:400px;margin:auto;margin-top:12px">
  </div>
 </article>
 <p alt="68747470:733a2f2f626c6f672e6373646e2e6e65742f6161736432332f:61727469636c652f64657461696c732f313235363937363032" class_="artid" style="display:none">
 </p>
</div>


