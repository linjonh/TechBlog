---
layout: post
title: "基于容器的部署扩展和管理3.10-云原生容器运行时环境和配置管理"
date: 2023-06-14 15:05:37 +0800
description: "文章介绍了云原生容器的关键要素，包括运行时环境（如容器编排器、镜像管理、环境管理）和配置管理（如配置"
keywords: "云原生配置管理"
categories: ['第三章基于容器的部署扩展和管理', '云原生设计开发与实践更新中']
tags: ['运维', '容器', '云原生', 'Kubernetes', 'Java']
artid: "131208187"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=131208187
    alt: "基于容器的部署扩展和管理3.10-云原生容器运行时环境和配置管理"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=131208187
featuredImagePreview: https://bing.ee123.net/img/rand?artid=131208187
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     【基于容器的部署、扩展和管理】3.10 云原生容器运行时环境和配置管理
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
     <strong>
      往期回顾：
     </strong>
    </p>
    <p>
     <a href="https://blog.csdn.net/weixin_44427181/category_12282197.html?spm=1001.2014.3001.5482">
      第一章：【云原生概念和技术】
     </a>
    </p>
    <p>
     <a href="https://blog.csdn.net/weixin_44427181/category_12296722.html?spm=1001.2014.3001.5482">
      第二章：【容器化应用程序设计和开发】
     </a>
    </p>
    <p>
     <a href="https://blog.csdn.net/weixin_44427181/article/details/130923228?spm=1001.2014.3001.5501">
      第三章：【3.1 容器编排系统和Kubernetes集群的构建】
     </a>
    </p>
    <p>
     <a href="https://blog.csdn.net/weixin_44427181/article/details/131114204?spm=1001.2014.3001.5501">
      第三章：【3.2 基于容器的应用程序部署和升级】
     </a>
    </p>
    <p>
     <a href="https://blog.csdn.net/weixin_44427181/article/details/131131332?spm=1001.2014.3001.5501">
      第三章：【3.3 自动化扩展和负载均衡】
     </a>
    </p>
    <p>
     <a href="https://blog.csdn.net/weixin_44427181/article/details/131147399?spm=1001.2014.3001.5501">
      第三章：【3.4 灰度发布和A/B测试】
     </a>
    </p>
    <p>
     <a href="https://yeqiu.blog.csdn.net/article/details/131156457?spm=1001.2014.3001.5502" rel="nofollow">
      第三章：【3.5 高可用性和故障恢复机制】
     </a>
    </p>
    <p>
     <a href="https://blog.csdn.net/weixin_44427181/article/details/131165473?spm=1001.2014.3001.5501">
      第三章：【3.6 集群监控和日志收集】
     </a>
    </p>
    <p>
     <a href="https://blog.csdn.net/weixin_44427181/article/details/131184820?spm=1001.2014.3001.5501">
      第三章：【3.7 资源调度和优化】
     </a>
    </p>
    <p>
     <a href="https://yeqiu.blog.csdn.net/article/details/131190191?spm=1001.2014.3001.5502" rel="nofollow">
      第三章：【3.8 容器镜像仓库和镜像管理】
     </a>
    </p>
    <p>
     <a href="https://yeqiu.blog.csdn.net/article/details/131190191?spm=1001.2014.3001.5502" rel="nofollow">
      第三章：【3.9 云原生容器的安全性和合规性】
     </a>
     <br/>
    </p>
    <div class="toc">
     <h4>
      3.10 云原生容器运行时环境和配置管理
     </h4>
     <ul>
      <li>
       <a href="#310__26" rel="nofollow">
        3.10 云原生容器运行时环境和配置管理
       </a>
      </li>
      <li>
       <ul>
        <li>
         <a href="#3101__32" rel="nofollow">
          3.10.1 云原生容器运行时环境
         </a>
        </li>
        <li>
         <a href="#3102__42" rel="nofollow">
          3.10.2 云原生容器配置管理
         </a>
        </li>
       </ul>
      </li>
     </ul>
    </div>
    <p>
    </p>
    <h2>
     <a id="310__26">
     </a>
     3.10 云原生容器运行时环境和配置管理
    </h2>
    <p>
     云原生容器是一种流行的容器编排和部署方法，它提供了一种自动化、可移植和可扩展的方式来创建、运行和管理容器化应用程序。云原生容器运行时环境和配置管理是实现云原生容器的关键要素。
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/329121992f4a6c34508c3a05eba52444.jpeg#pic_center"/>
    </p>
    <h3>
     <a id="3101__32">
     </a>
     3.10.1 云原生容器运行时环境
    </h3>
    <p>
     云原生容器运行时环境是指一个容器在运行时所依赖的基础设施和服务。这些基础设施和服务可以是开源的，也可以是商业的。云原生容器运行时环境通常包括以下组件:
    </p>
    <ol>
     <li>
      <p>
       容器编排器：容器编排器负责创建、运行和管理容器化应用程序。常见的容器编排器包括 Kubernetes、Docker Swarm 和 Mesos 等。
      </p>
     </li>
     <li>
      <p>
       镜像管理工具：镜像管理工具用于创建、存储和管理容器镜像。常见的镜像管理工具包括 Docker Hub、Docker Store 和 Nexus 等。
      </p>
     </li>
     <li>
      <p>
       容器镜像生成器：容器镜像生成器用于生成容器镜像。常见的容器镜像生成器包括 Dockerfile 和 CI/CD 流水线等。
      </p>
     </li>
     <li>
      <p>
       环境管理工具：环境管理工具用于配置和管理容器的环境。常见的环境管理工具包括 Shell 脚本和 Sysdig 等。
      </p>
     </li>
    </ol>
    <h3>
     <a id="3102__42">
     </a>
     3.10.2 云原生容器配置管理
    </h3>
    <p>
     云原生容器配置管理是指对容器化应用程序进行配置的管理。配置管理可以帮助确保容器化应用程序在不同环境中的一致性和可移植性。云原生容器配置管理通常包括以下方面:
    </p>
    <ol>
     <li>
      <p>
       配置迁移：配置迁移是指将配置从一台服务器迁移到另一台服务器。这可以通过自动化工具来实现，例如 Sysdig 和 ConfigMap 等。
      </p>
     </li>
     <li>
      <p>
       配置管理：配置管理是指对容器化应用程序进行统一的配置管理。这可以通过容器编排器和镜像管理工具来实现，例如 Kubernetes 和 Docker Swarm 等。
      </p>
     </li>
     <li>
      <p>
       配置更新：配置更新是指更新容器化应用程序的配置。这可以通过自动化工具来实现，例如 ConfigMap 和 Secret 等。
      </p>
     </li>
     <li>
      <p>
       配置一致性：配置一致性是指确保容器化应用程序在不同环境中的配置保持一致。这可以通过配置管理工具来实现，例如 Kubernetes 和 Docker Swarm 等。
      </p>
     </li>
    </ol>
    <p>
     总之，云原生容器运行时环境和配置管理是实现云原生容器的关键要素。它们可以帮助提高容器化应用程序的可移植性、可靠性和可扩展性，从而提高应用程序的性能和管理效率。
    </p>
    <pre><code class="prism language-java"><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>catalina<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span><span class="token class-name">StandardContext</span><span class="token punctuation">;</span>  
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>catalina<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span><span class="token class-name">ContainerBase</span><span class="token punctuation">;</span>  
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>catalina<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span><span class="token class-name">ApplicationListener</span><span class="token punctuation">;</span>  
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>catalina<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span><span class="token class-name">StandardHost</span><span class="token punctuation">;</span>  
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>catalina<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span><span class="token class-name">StandardContext</span><span class="token punctuation">;</span>  
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>catalina<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span><span class="token class-name">SessionsListener</span><span class="token punctuation">;</span>  
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>catalina<span class="token punctuation">.</span>ha<span class="token punctuation">.</span></span><span class="token class-name">Catalinaalinaalina</span><span class="token punctuation">;</span>  
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>catalina<span class="token punctuation">.</span>ha<span class="token punctuation">.</span>coyote<span class="token punctuation">.</span>coyote</span> 卜卜<span class="token punctuation">;</span>  
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>catalina<span class="token punctuation">.</span>ha<span class="token punctuation">.</span>coyote<span class="token punctuation">.</span>coyote</span> 卜卜卜<span class="token punctuation">;</span>  
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>catalina<span class="token punctuation">.</span>ha<span class="token punctuation">.</span>session<span class="token punctuation">.</span>ha<span class="token punctuation">.</span></span><span class="token class-name">HaSessionsListener</span><span class="token punctuation">;</span>  
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>tomcat<span class="token punctuation">.</span>util<span class="token punctuation">.</span>net<span class="token punctuation">.</span></span><span class="token class-name">JIoEndpoint</span><span class="token punctuation">;</span>  
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>tomcat<span class="token punctuation">.</span>util<span class="token punctuation">.</span>net<span class="token punctuation">.</span></span><span class="token class-name">SocketFactory</span><span class="token punctuation">;</span>  
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span><span class="token punctuation">;</span>  
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>net<span class="token punctuation">.</span></span>URI<span class="token punctuation">;</span>  
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>net<span class="token punctuation">.</span></span><span class="token class-name">URISyntaxException</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DockerContainerRuntimeEnvironment</span> <span class="token keyword">implements</span> <span class="token class-name">ApplicationListener</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ContainerBase</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> RUNTIME_ENVIRONMENT <span class="token operator">=</span> <span class="token string">"docker_runtime_environment"</span><span class="token punctuation">;</span>  
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> DOCKER_HOST <span class="token operator">=</span> <span class="token string">"docker_host"</span><span class="token punctuation">;</span>  
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> DOCKER_PORT <span class="token operator">=</span> <span class="token string">"docker_port"</span><span class="token punctuation">;</span>  
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> DOCKER_USERNAME <span class="token operator">=</span> <span class="token string">"docker_username"</span><span class="token punctuation">;</span>  
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> DOCKER_PASSWORD <span class="token operator">=</span> <span class="token string">"docker_password"</span><span class="token punctuation">;</span>  
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> DOCKER_TRUST_CERTIFICATES <span class="token operator">=</span> <span class="token string">"docker_trust_certificates"</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> WORKDIR <span class="token operator">=</span> <span class="token string">"WORKDIR"</span><span class="token punctuation">;</span>  
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> COPY_FROM_IMAGE <span class="token operator">=</span> <span class="token string">"COPY_FROM_IMAGE"</span><span class="token punctuation">;</span>  
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> FROM_IMAGE <span class="token operator">=</span> <span class="token string">"FROM_IMAGE"</span><span class="token punctuation">;</span>  
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> USER <span class="token operator">=</span> <span class="token string">"USER"</span><span class="token punctuation">;</span>  
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> CMD <span class="token operator">=</span> <span class="token string">"CMD"</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">DockerContainerRuntimeEnvironment</span> instance<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Tomcat</span> tomcat<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">DockerContainerRuntimeEnvironment</span><span class="token punctuation">(</span><span class="token class-name">Tomcat</span> tomcat<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>  
        <span class="token keyword">this</span><span class="token punctuation">.</span>tomcat <span class="token operator">=</span> tomcat<span class="token punctuation">;</span>  
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">DockerContainerRuntimeEnvironment</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>  
        <span class="token keyword">return</span> instance<span class="token punctuation">;</span>  
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>  
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onApplicationEvent</span><span class="token punctuation">(</span><span class="token class-name">ContainerBase</span> container<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>  
        <span class="token keyword">if</span> <span class="token punctuation">(</span>container<span class="token punctuation">.</span><span class="token function">isTomcat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>  
            <span class="token comment">// 获取当前容器运行时环境  </span>
            <span class="token class-name">String</span> environment <span class="token operator">=</span> RUNTIME_ENVIRONMENT<span class="token punctuation">;</span>  
            <span class="token class-name">String</span> dockerHost <span class="token operator">=</span> <span class="token function">getDockerHost</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
            <span class="token class-name">String</span> dockerPort <span class="token operator">=</span> <span class="token function">getDockerPort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
            <span class="token class-name">String</span> dockerUsername <span class="token operator">=</span> <span class="token function">getDockerUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
            <span class="token class-name">String</span> dockerPassword <span class="token operator">=</span> <span class="token function">getDockerPassword</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
            <span class="token class-name">String</span> dockerTrustCertificates <span class="token operator">=</span> <span class="token function">getDockerTrustCertificates</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// 设置容器运行时环境变量  </span>
            tomcat<span class="token punctuation">.</span><span class="token function">getServletHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span>RUNTIME_ENVIRONMENT<span class="token punctuation">,</span> environment<span class="token punctuation">)</span><span class="token punctuation">;</span>  
            tomcat<span class="token punctuation">.</span><span class="token function">getServletHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span>DOCKER_HOST<span class="token punctuation">,</span> dockerHost<span class="token punctuation">)</span><span class="token punctuation">;</span>  
            tomcat<span class="token punctuation">.</span><span class="token function">getServletHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span>DOCKER_PORT<span class="token punctuation">,</span> dockerPort<span class="token punctuation">)</span><span class="token punctuation">;</span>  
            tomcat<span class="token punctuation">.</span><span class="token function">getServletHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span>DOCKER_USERNAME<span class="token punctuation">,</span> dockerUsername<span class="token punctuation">)</span><span class="token punctuation">;</span>  
            tomcat<span class="token punctuation">.</span><span class="token function">getServletHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span>DOCKER_PASSWORD<span class="token punctuation">,</span> dockerPassword<span class="token punctuation">)</span><span class="token punctuation">;</span>  
            tomcat<span class="token punctuation">.</span><span class="token function">getServletHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span>DOCKER_TRUST_CERTIFICATES<span class="token punctuation">,</span> dockerTrustCertificates<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// 设置容器复制来源  </span>
            <span class="token class-name">String</span> sourceImage <span class="token operator">=</span> <span class="token function">getCopyFromImage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
            tomcat<span class="token punctuation">.</span><span class="token function">getServletHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span>COPY_FROM_IMAGE<span class="token punctuation">,</span> sourceImage<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// 设置容器启动参数  </span>
            <span class="token class-name">String</span> user <span class="token operator">=</span> <span class="token function">getUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
            <span class="token class-name">String</span> command <span class="token operator">=</span> <span class="token function">getCMD</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
            tomcat<span class="token punctuation">.</span><span class="token function">getServletHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span>USER<span class="token punctuation">,</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>  
            tomcat<span class="token punctuation">.</span><span class="token function">getServletHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span>CMD<span class="token punctuation">,</span> command<span class="token punctuation">)</span><span class="token punctuation">;</span>  
        <span class="token punctuation">}</span>  
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> <span class="token function">getDockerHost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>  
        <span class="token comment">// 获取 Docker 主机地址  </span>
        <span class="token class-name">String</span> dockerHost <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">getenv</span><span class="token punctuation">(</span>DOCKER_HOST<span class="token punctuation">)</span><span class="token punctuation">;</span>  
        <span class="token keyword">if</span> <span class="token punctuation">(</span>dockerHost <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>  
            dockerHost <span class="token operator">=</span> <span class="token function">getTomcatHost</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
        <span class="token punctuation">}</span>  
        <span class="token keyword">return</span> dockerHost<span class="token punctuation">;</span>  
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> <span class="token function">getDockerPort</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>  
        <span class="token comment">// 获取 Docker 端口  </span>
        <span class="token class-name">String</span> dockerPort <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">getenv</span><span class="token punctuation">(</span>DOCKER_PORT<span class="token punctuation">)</span><span class="token punctuation">;</span>  
        <span class="token keyword">if</span> <span class="token punctuation">(</span>dockerPort <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>  
            dockerPort <span class="token operator">=</span> <span class="token function">getTomcatPort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
        <span class="token punctuation">}</span>  
        <span class="token keyword">return</span> dockerPort<span class="token punctuation">;</span>  
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> <span class="token function">getDockerUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>  
        <span class="token comment">// 获取 Docker 用户名  </span>
        <span class="token class-name">String</span> dockerUsername <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">getenv</span><span class="token punctuation">(</span>DOCKER_USERNAME<span class="token punctuation">)</span><span class="token punctuation">;</span>  
        
       <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
  <div class="blog-extension-box" id="blogExtensionBox" style="width:400px;margin:auto;margin-top:12px">
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f34343432373138312f:61727469636c652f64657461696c732f313331323038313837" class_="artid" style="display:none">
 </p>
</div>


