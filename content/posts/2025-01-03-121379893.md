---
arturl_encode: "68747470733a2f:2f626c6f672e6373646e2e6e65742f71667a68616f68616e2f:61727469636c652f64657461696c732f313231333739383933"
layout: post
title: "Javaä¸­çš„ç§’è¡¨-StopWatch"
date: 2025-01-03 10:02:55 +0800
description: "æœ¬æ–‡ä»‹ç»äº†Javaä¸­ç”¨äºæ€§èƒ½æµ‹è¯•çš„StopWatchå·¥å…·ç±»ï¼Œåˆ†åˆ«ä»Apache Commons La"
keywords: "java stopwatch"
categories: ['æœªåˆ†ç±»']
tags: ['æœåŠ¡å™¨', 'æ•°æ®åº“', 'Mysql']
artid: "121379893"
image:
  path: https://api.vvhan.com/api/bing?rand=sj&artid=121379893
  alt: "Javaä¸­çš„ç§’è¡¨-StopWatch"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=121379893
featuredImagePreview: https://bing.ee123.net/img/rand?artid=121379893
---

# Javaä¸­çš„ç§’è¡¨-StopWatch

**ä¸šåŠ¡ä»£ç **
æˆ–è€…
**ç®—æ³•**
çš„
**æ€§èƒ½**
ä¸€ç›´æ˜¯æˆ‘ä»¬é‡è¦çš„å…³æ³¨ç‚¹ä¹‹ä¸€ã€‚è€Œè¡¡é‡æ€§èƒ½çš„é‡è¦æŒ‡æ ‡ä¹‹ä¸€å°±æ˜¯æ—¶é—´å¤æ‚åº¦ã€‚æˆ‘ä»¬é™¤äº†ç”¨å¤§Oè¡¨ç¤ºæ³•å¤–ï¼Œæœ‰æ—¶è¿˜éœ€è¦ç›´è§‚åœ°é€šè¿‡ç¨‹åºçš„å®é™…è¿è¡Œæ—¶é—´è¡¡é‡ç®—æ³•çš„æ€§èƒ½ã€‚ä»Šå¤©æˆ‘ä»¬å°±ä»‹ç»ä¸€ä¸‹åœ¨è®¡æ—¶æ–¹é¢ååˆ†é‡è¦çš„å·¥å…·ç±»
**StopWatch**
ã€‚

StopWatchæ˜¯ä¸åœ¨javaæ ‡å‡†åŒ…ä¸­çš„ï¼Œä½ å¯ä»¥åœ¨ä»¥ä¸‹ä¸¤ä¸ªç¨‹åºåŒ…ä¸­æ‰¾åˆ°StopWatchå·¥å…·ç±»

* **org.apache.commons.lang3.time**
  + Apache Commons Langæä¾›äº†ä¸€äº›Javaæ ‡å‡†åº“ä¸­æ²¡æœ‰æä¾›çš„ç±»ä¸æ–¹æ³•ï¼Œå°¤å…¶æ˜¯åœ¨Stringæ“ä½œæ–¹æ³•ï¼ŒåŸºç¡€æ•°å€¼æ–¹æ³•ï¼Œå¯¹è±¡å¼•ç”¨ï¼Œå¹¶å‘è¡Œï¼Œåˆ›å»ºåŠåºåˆ—åŒ–ï¼Œç³»ç»Ÿå±æ€§ç­‰æ–¹é¢æä¾›äº†å¼ºå¤§çš„åŠŸèƒ½
* **org.springframework.util**
  + springæ¡†æ¶ä¸ºç°ä»£javaä¼ä¸šçº§åº”ç”¨æä¾›äº†ä¸€ä¸ªç®€æ´å¹¶ä¸”å¯Œæœ‰è¡¨è¾¾èƒ½åŠ›çš„å¯ä»¥è¿è¡Œåœ¨ä»»ä½•éƒ¨ç½²å¹³å°çš„ç¼–ç¨‹ä¸è®¾ç½®æ¨¡å‹

ç°åœ¨åˆ†åˆ«è®²è§£ä¸€ä¸‹ä¸¤ç¨‹åºåŒ…ä¸­çš„StopWatchå·¥å…·ç±»çš„å…·ä½“ç”¨æ³•ã€‚

#### **Apache Commons Langä¸­çš„StopWatch**

Apache Commons Langä¸­çš„StopWatchä¸æˆ‘ä»¬å¹³æ—¶å¸¸ç”¨çš„ç§’è¡¨çš„è¡Œä¸ºæ¯”è¾ƒç±»ä¼¼ï¼Œæˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹å…¶ä¸­çš„ä¸€äº›é‡è¦æ–¹æ³•

* æ„é€ å™¨ï¼šå¯ä»¥ä½¿ç”¨æ— å‚æ„é€ å™¨ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ä¼ å…¥äº†ä¸€ä¸ªStringç±»å‹çš„messageçš„æ„é€ å™¨ï¼Œåˆ›å»ºä¸€ä¸ªæœ‰å­—ç¬¦ä¸²è¡¨ç¤ºçš„ç§’è¡¨å¯¹è±¡
* æ–¹æ³•
  + start()ï¼šå¼€å§‹è®¡æ—¶
  + stop()ï¼šåœæ­¢è®¡æ—¶
  + suspend()ï¼šæš‚åœç§’è¡¨
  + resume()ï¼šæ¢å¤ç§’è¡¨
  + reset()ï¼šé‡ç½®ç§’è¡¨
  + split()ï¼šè®¾å®šsplitç‚¹
  + getSplitTime()ï¼šè·å–æ—¶é—´ï¼Œæ—¶é—´ä¸ºä»è®¡æ—¶èµ·ç‚¹åˆ°æœ€æ–°è®¾ç½®çš„splitç‚¹ä¹‹é—´çš„æ—¶é•¿
  + getTime()ï¼šæ˜¾ç¤ºå½“å‰ç§’è¡¨æ—¶é—´ï¼Œå¯ä»¥é€šè¿‡æŒ‡å®šTimeUnitæ¥æŒ‡å®šè¿”å›çš„æ—¶é—´å•ä½

**é™„ç¤ºä¾‹ä»£ç ï¼ˆJunitæµ‹è¯•ç±»ï¼‰**

```
import org.apache.commons.lang3.time.StopWatch;
import org.junit.Test;
â€‹
import java.util.concurrent.TimeUnit;
â€‹
public class StopWatchTest {
    @Test
    public void testStopWatch() throws InterruptedException {
        StopWatch stopWatch = new StopWatch();
        sleepOneSecondAndGetStopWatchReading(stopWatch);
        stopWatch.start();
        sleepOneSecondAndGetStopWatchReading(stopWatch);
        stopWatch.stop();
        sleepOneSecondAndGetStopWatchReading(stopWatch);
        stopWatch.reset();
        sleepOneSecondAndGetStopWatchReading(stopWatch);
        stopWatch.start();
        sleepOneSecondAndGetStopWatchReading(stopWatch);
        stopWatch.split();
        sleepOneSecondAndGetStopWatchReading(stopWatch);
        stopWatch.split();
        sleepOneSecondAndGetStopWatchReading(stopWatch);
        stopWatch.unsplit();
        sleepOneSecondAndGetStopWatchReading(stopWatch);
        stopWatch.split();
        System.out.println("Last Split time :"+stopWatch.getSplitTime()+" ms");
        System.out.println(stopWatch.toSplitString());
        System.out.println(stopWatch.toString());
    }
â€‹
    private void sleepOneSecondAndGetStopWatchReading(StopWatch stopWatch) throws InterruptedException {
        Thread.sleep(1000);
        System.out.println("StopWatch Time: "+stopWatch.getTime(TimeUnit.MILLISECONDS)+"ms");
    }
}
```

#### **è¿è¡Œç»“æœ**

```
StopWatch Time: 0ms
StopWatch Time: 1013ms
StopWatch Time: 1013ms
StopWatch Time: 0ms
StopWatch Time: 1006ms
StopWatch Time: 2009ms
StopWatch Time: 3024ms
StopWatch Time: 4031ms
Last Split time :4031 ms
00:00:04.031
00:00:04.049
â€‹
Process finished with exit code 0
```

#### **Spring Frameworkä¸­çš„StopWatch**

ç›¸æ¯”äºApache Commons Langä¸­çš„StopWatchï¼ŒSpring Frameworkä¸­çš„StopWatchæä¾›äº†é¢å¤–çš„ä»»åŠ¡è®¡æ—¶åŠŸèƒ½ï¼šä¸ä»…å¯ä»¥ç»Ÿè®¡å•ä¸ªä»»åŠ¡æ—¶é—´ï¼Œè¿˜å¯ä»¥ä¼˜é›…åœ°æ‰“å°å‡ºå¤šä¸ªä»»åŠ¡çš„è¯¦ç»†è€—æ—¶æƒ…å†µ

æˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹StopWatchç±»çš„æ„é€ å™¨å’Œä¸€äº›å…³é”®æ–¹æ³•

* æ„é€ å™¨ï¼šå¯ä»¥ä½¿ç”¨æ— å‚æ•°æ„é€ å™¨ï¼Œä¹Ÿå¯ä½¿ç”¨ä¼ å…¥ä¸€ä¸ªStringç±»å‹çš„idï¼Œåˆ›å»ºä¸€ä¸ªæŒ‡å®šäº†idçš„StopWatch
* æ–¹æ³•
  + start()ï¼šå¯ä»¥ä¸ä¼ å…¥å‚æ•°ï¼Œå¼€å§‹ä¸€ä¸ª
    **æ— åç§°çš„ä»»åŠ¡**
    çš„è®¡æ—¶ï¼Œä¹Ÿå¯ä»¥ä¼ å…¥Stringç±»å‹çš„å‚æ•°æ¥å¼€å§‹æŒ‡å®šä»»åŠ¡åçš„ä»»åŠ¡è®¡æ—¶
  + stop()ï¼šåœæ­¢å½“å‰ä»»åŠ¡çš„è®¡æ—¶
  + isRunning()ï¼šè¿”å›æ­¤stopWatchæ˜¯å¦æ­£åœ¨è®¡æ—¶æŸä»»åŠ¡
  + getTotalTimeMillis()ï¼šè¿”å›æ‰€æœ‰ä»»åŠ¡çš„æ€»ä½“æ‰§è¡Œæ—¶é—´(æ¯«ç§’å•ä½)
  + getLastTaskTimeMillis()ï¼šè¿”å›ä¸Šä¸€ä¸ªä»»åŠ¡çš„è€—æ—¶(æ¯«ç§’å•ä½)
  + prettyPrint()ï¼šä¼˜ç¾åœ°æ‰“å°æ‰€æœ‰ä»»åŠ¡çš„è¯¦ç»†è€—æ—¶æƒ…å†µ

#### **ç¤ºä¾‹ä»£ç **

```
public static void main(String[] args) {
    StopWatch stopWatch = new StopWatch();
    for (int i=0;i<10;i++){
        stopWatch.start("Task"+i);
        //Some Real Business Logic
        stopWatch.stop();
    }
    stopWatch.prettyPrint();
}
```

ä»£ç ä¸­å¯åŠ¨å¹¶åœ¨çœŸæ­£çš„ä¸šåŠ¡é€»è¾‘å®Œæˆååˆ†åˆ«åœæ­¢äº†åä¸ªä»»åŠ¡çš„è®¡æ—¶ï¼Œæœ€ç»ˆæˆ‘ä»¬å¯ä»¥é€šè¿‡prettyPrintæ–¹æ³•æ¥è·å¾—è¯¦ç»†çš„ä»»åŠ¡æ‰§è¡Œè€—æ—¶æƒ…å†µ

#### **å¯¹StopWatchç±»ä½¿ç”¨çš„æ€è€ƒ**

ç”±äºstart()å’Œstop()æ–¹æ³•é€šå¸¸éœ€è¦æˆå¯¹è¢«è°ƒç”¨ï¼Œè€Œä¸”é€šå¸¸åˆ†åˆ«å¤„äºè¢«è®¡æ—¶ä»£ç å—çš„èµ·å§‹ä½ç½®å’Œç»“æŸä½ç½®ï¼Œæ‰€ä»¥ä¸€å®šè¦æ³¨æ„è¢«è®¡æ—¶çš„ä»£ç å—ä¸­çš„é€»è¾‘æ˜¯å¦æœ‰å¯èƒ½å¯¼è‡´stop()å’Œstart()çš„æˆå¯¹è°ƒç”¨å…³ç³»è¢«ç ´åè€ŒæŠ›å‡ºIllegalStateException(å¦‚ï¼ŒtryCatchFinally,continue,breakç­‰ç­‰)

éœ€è¦æ›´å¤šæ•™ç¨‹ï¼Œå¾®ä¿¡æ‰«ç å³å¯

![](https://i-blog.csdnimg.cn/blog_migrate/2844a2a5555f256a2506b9b80e0a9e22.png)

ğŸ‘†ğŸ‘†ğŸ‘†

åˆ«å¿˜äº†æ‰«ç é¢†èµ„æ–™å“¦ã€é«˜æ¸…Javaå­¦ä¹ è·¯çº¿å›¾ã€‘

å’Œã€å…¨å¥—å­¦ä¹ è§†é¢‘åŠé…å¥—èµ„æ–™ã€‘