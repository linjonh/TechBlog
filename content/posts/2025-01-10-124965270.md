---
layout: post
title: "SQLServer学习笔记二数据库的操作"
date: 2025-01-10 09:19:38 +0800
description: "数据库的增删改查_sqlserver学习资料"
keywords: "sqlserver学习资料"
categories: ['Sql', 'Server']
tags: ['数据库', '学习', 'Sqlserver']
artid: "124965270"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=124965270
    alt: "SQLServer学习笔记二数据库的操作"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=124965270
featuredImagePreview: https://bing.ee123.net/img/rand?artid=124965270
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     SQLServer学习笔记（二）：数据库的操作
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-tomorrow-night" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
    </p>
    <div class="toc">
     <h4>
      数据库的操作
     </h4>
     <ul>
      <li>
       <a href="#_1" rel="nofollow">
        一、连接服务器
       </a>
      </li>
      <li>
       <a href="#_8" rel="nofollow">
        二、新建登录名
       </a>
      </li>
      <li>
       <a href="#_15" rel="nofollow">
        三、创建数据库
       </a>
      </li>
      <li>
       <ul>
        <li>
         <a href="#_16" rel="nofollow">
          图形化界面
         </a>
        </li>
        <li>
         <a href="#SQL_19" rel="nofollow">
          SQL语句
         </a>
        </li>
       </ul>
      </li>
      <li>
       <a href="#_75" rel="nofollow">
        四、数据库的修改
       </a>
      </li>
      <li>
       <ul>
        <li>
         <a href="#_76" rel="nofollow">
          图形化界面
         </a>
        </li>
        <li>
         <a href="#SQL_80" rel="nofollow">
          SQL语句
         </a>
        </li>
       </ul>
      </li>
      <li>
       <a href="#_104" rel="nofollow">
        五、数据库的删除
       </a>
      </li>
      <li>
       <ul>
        <li>
         <a href="#_105" rel="nofollow">
          图形化界面
         </a>
        </li>
        <li>
         <a href="#SQL_109" rel="nofollow">
          SQL语句
         </a>
        </li>
       </ul>
      </li>
      <li>
       <a href="#_121" rel="nofollow">
        六、数据库的备份
       </a>
      </li>
      <li>
       <ul>
        <li>
         <a href="#_124" rel="nofollow">
          图像化界面
         </a>
        </li>
       </ul>
      </li>
      <li>
       <a href="#_127" rel="nofollow">
        七、数据库的还原
       </a>
      </li>
      <li>
       <ul>
        <li>
         <a href="#_128" rel="nofollow">
          图像化界面
         </a>
        </li>
       </ul>
      </li>
     </ul>
    </div>
    <p>
    </p>
    <h2>
     <a id="_1">
     </a>
     一、连接服务器
    </h2>
    <p>
     打开SQL Server Management Studio
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/14bcda84d960462db7b20271209fa0ed.png">
      <br/>
      服务器类型：选择数据库引擎
      <br/>
      服务器名称：本地服务器：local、.、127.0.0.1。远程服务器：服务器IP，端口号
      <br/>
      身份验证：以Windows身份验证登陆时表示以管理图
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/c1cd962646e3318b2e63be0972aadb0f.png"/>
     </img>
    </p>
    <h2>
     <a id="_8">
     </a>
     二、新建登录名
    </h2>
    <p>
     选择“登陆名”，右键-&gt;新建登录名
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/ec411ac3d867a2915cda9f030baec1b0.png">
      <br/>
      注意如果选择SQLServer身份验证时，不要勾选“用户在下次登录时必须更改密码”
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/3fb57658470398abec09787b6d831a0c.png">
       <br/>
       如果想给某个登录名设置管理员的权限，选择登录名，右键-&gt;属性-&gt;服务器角色，勾选sysadmin即可。
       <br/>
       <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/c14a0d633b89747ae04d116cc1d03761.png"/>
      </img>
     </img>
    </p>
    <h2>
     <a id="_15">
     </a>
     三、创建数据库
    </h2>
    <h3>
     <a id="_16">
     </a>
     图形化界面
    </h3>
    <p>
     右键“数据库”-&gt;新建数据库，可以根据需求修改数据库文件的属性，这里我修改了testdb初始大小为10MB，testdb_log的大小为5MB。
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/d16c6acc49d64404d529593b2da038e0.png"/>
    </p>
    <h3>
     <a id="SQL_19">
     </a>
     SQL语句
    </h3>
    <p>
     1、点击“新建查询”打开SQL脚本的编辑界面。可以在“工具”-&gt;“选项”-&gt;“环境”-&gt;"字体和颜色"修改字号。
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/094fb93487fcb779b211577105f5047e.png">
      <br/>
      2、在编辑界面输入以下代码：
     </img>
    </p>
    <pre><code class="prism language-sql"><span class="token keyword">create</span> <span class="token keyword">database</span> testdb01         <span class="token comment">-- 创建名为testdb01的数据库</span>
<span class="token keyword">on</span> <span class="token keyword">primary</span><span class="token punctuation">(</span>                      <span class="token comment">-- 创建文件组</span>
name<span class="token operator">=</span><span class="token string">'testdb01'</span><span class="token punctuation">,</span>    
filename<span class="token operator">=</span><span class="token string">'E:\SQLServer\testdb01.mdf'</span><span class="token punctuation">,</span>      
size<span class="token operator">=</span><span class="token number">10</span>MB<span class="token punctuation">,</span>
maxsize<span class="token operator">=</span><span class="token number">100</span>MB<span class="token punctuation">,</span>
filegrowth<span class="token operator">=</span><span class="token number">5</span>MB                    <span class="token comment">-- 增量</span>
<span class="token punctuation">)</span>
log <span class="token keyword">on</span><span class="token punctuation">(</span>                          <span class="token comment">-- 创建标签文件</span>
name<span class="token operator">=</span><span class="token string">'testdb01_log'</span><span class="token punctuation">,</span>
filename<span class="token operator">=</span><span class="token string">'E:\SQLServer\testdb01_log.ldf'</span><span class="token punctuation">,</span>
size<span class="token operator">=</span><span class="token number">10</span>MB<span class="token punctuation">,</span>
maxsize<span class="token operator">=</span><span class="token number">100</span>MB<span class="token punctuation">,</span>
filegrowth<span class="token operator">=</span><span class="token number">5</span>MB 

<span class="token punctuation">)</span>
</code></pre>
    <p>
     补充：SQL语句的单行注释：注意–和注释之间要有空格。
    </p>
    <pre><code class="prism language-sql"><span class="token keyword">create</span> <span class="token keyword">database</span> testdb01         <span class="token comment">-- 创建名为testdb01的数据库</span>
</code></pre>
    <p>
     多行注释：
    </p>
    <pre><code class="prism language-sql"><span class="token comment">/*创建文件组
*/</span>
<span class="token keyword">on</span> <span class="token keyword">primary</span><span class="token punctuation">(</span>                      
name<span class="token operator">=</span><span class="token string">'testdb01'</span><span class="token punctuation">,</span>    
filename<span class="token operator">=</span><span class="token string">'C:\Users\Administrator\Desktop\testdb01.mdf'</span><span class="token punctuation">,</span>      
size<span class="token operator">=</span><span class="token number">10</span>MB<span class="token punctuation">,</span>
maxsize<span class="token operator">=</span><span class="token number">100</span>MB<span class="token punctuation">,</span>
filegrowth<span class="token operator">=</span><span class="token number">5</span>MB                    
<span class="token punctuation">)</span>
</code></pre>
    <p>
     3、点击分析按钮或者是快捷键Ctrl+F5
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/67eaf5dcf7fe6a70d7005f7990cb27f7.png">
      <br/>
      <strong>
       <font color="red">
        注意：这里的路径中的文件夹需要手动去创建，执行SQL的时候是不会创建文件夹的。
       </font>
      </strong>
      <br/>
      4、点击执行按钮，即可创建数据库。
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/58281cde70c8e20c77b917138700b5b8.png"/>
      <br/>
      错误：
      <code>
       消息 5123，级别 16，状态 1，第 1 行 尝试打开或创建物理文件 'C:\Users\Administrator\Desktop\testdb\testdb01.mdf' 时，CREATE FILE 遇到操作系统错误 5(拒绝访问。)。 消息 1802，级别 16，状态 4，第 1 行 CREATE DATABASE 失败。无法创建列出的某些文件名。请查看相关错误。
      </code>
      <br/>
      原因是路径没有权限，可以重新设置路径，这里我修改上述SQL代码为正确的，可以直接复制使用。
      <br/>
      5、右击"数据库"-&gt;"刷新"在数据库列表即可显示新创建的数据库。
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/9722edf7268068003618d841bcbc9729.png"/>
     </img>
    </p>
    <h2>
     <a id="_75">
     </a>
     四、数据库的修改
    </h2>
    <h3>
     <a id="_76">
     </a>
     图形化界面
    </h3>
    <p>
     展开“数据库”，右键单击要修改的数据库，在单击“属性”，更改数据库属性。
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/ac68bd1ce95e55d0dd0ca6e986a415fa.png"/>
    </p>
    <h3>
     <a id="SQL_80">
     </a>
     SQL语句
    </h3>
    <p>
     1、点击“新建查询”打开SQL脚本的编辑界面。
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/094fb93487fcb779b211577105f5047e.png"/>
     <br/>
     2、在编辑界面输入以下代码：
    </p>
    <pre><code class="prism language-sql"><span class="token keyword">alter</span> <span class="token keyword">database</span> testdb01      <span class="token comment">-- 对testdb数据库进行属性的修改</span>
<span class="token keyword">modify</span> name<span class="token operator">=</span>testdb02<span class="token punctuation">;</span>        <span class="token comment">-- 编辑数据库的名称</span>

<span class="token keyword">alter</span> <span class="token keyword">database</span> testdb02      <span class="token comment">-- 上面已将将数据库名称改为testdb02 ,</span>
<span class="token keyword">MODIFY</span> <span class="token keyword">FILE</span><span class="token punctuation">(</span>                 <span class="token comment">-- 修改数据库文件的属性</span>
name<span class="token operator">=</span>testdb01<span class="token punctuation">,</span>               <span class="token comment">-- 这里的name不是修改后的文件名，而是修改前的文件名，作为一个查询的条件</span>
size<span class="token operator">=</span><span class="token number">20</span>MB<span class="token punctuation">,</span>
maxsize<span class="token operator">=</span><span class="token number">80</span>MB<span class="token punctuation">,</span>
filegrowth<span class="token operator">=</span><span class="token number">10</span>MB
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">exec</span> sp_helpdb testdb02<span class="token punctuation">;</span>     <span class="token comment">-- 查看数据库</span>
</code></pre>
    <p>
     3、点击分析按钮或者是快捷键Ctrl+F5
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/fe1376603e9ec2144471b9e550dfd6c1.png"/>
     <br/>
     4、点击执行按钮
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/2871a2bbc4da3afd9db359a22287a2ce.png"/>
    </p>
    <h2>
     <a id="_104">
     </a>
     五、数据库的删除
    </h2>
    <h3>
     <a id="_105">
     </a>
     图形化界面
    </h3>
    <p>
     展开“数据库”，右键单击要删除的数据库，再单击“删除”。
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/549173c0332f7812ed85e34e932bba4f.png"/>
    </p>
    <h3>
     <a id="SQL_109">
     </a>
     SQL语句
    </h3>
    <p>
     1、点击“新建查询”打开SQL脚本的编辑界面。
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/094fb93487fcb779b211577105f5047e.png"/>
     <br/>
     2、在编辑界面输入以下代码：
    </p>
    <pre><code class="prism language-sql"><span class="token keyword">drop</span> <span class="token keyword">database</span> testdb<span class="token punctuation">;</span>           
</code></pre>
    <p>
     3、点击分析按钮或者是快捷键Ctrl+F5
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/fe1376603e9ec2144471b9e550dfd6c1.png"/>
     <br/>
     4、点击执行按钮
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/2871a2bbc4da3afd9db359a22287a2ce.png"/>
    </p>
    <h2>
     <a id="_121">
     </a>
     六、数据库的备份
    </h2>
    <p>
     数据库的备份分为差异备份（differential backup）和完整备份（full backup）。差异备份指的是备份与上一次差异的部分，完整备份指的是全部备份。
    </p>
    <h3>
     <a id="_124">
     </a>
     图像化界面
    </h3>
    <p>
     展开“数据库”，右键单击数据库，点击“任务”，在单击“备份”，在“备份类型”列表框中，选择“完整”或者是“差异”。
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/eed711808f11e3192a1c2afd0fedf1d9.png"/>
    </p>
    <h2>
     <a id="_127">
     </a>
     七、数据库的还原
    </h2>
    <h3>
     <a id="_128">
     </a>
     图像化界面
    </h3>
    <p>
     展开“数据库”，右键单击数据库，点击“任务”，在单击“还原”，选择“数据库”。
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/cef96f8bda63b467e113facccbaf4d80.png"/>
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f34343037373532342f:61727469636c652f64657461696c732f313234393635323730" class_="artid" style="display:none">
 </p>
</div>


