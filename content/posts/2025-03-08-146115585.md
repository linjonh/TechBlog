---
layout: post
title: "Django小白级开发入门"
date: 2025-03-08 20:46:17 +0800
description: "Django是一个开放源代码的Web应用框架，由Python写成。采用了的框架模式，即模型M，视图V和模版T。Django已经成为web开发者的首选框架，是一个遵循 MVC 设计模式的框架。MVC是Model、View、Controller三个单词的简写，分别代表模型、视图、控制器。Django其实也是一个MTV 的设计模式。MTV是Model、Template、View三个单词的简写，分别代表模型、模版、视图。但是在Django中，控制器接受用户输入的部分由框架自行处理。"
keywords: "Django小白级开发入门"
categories: ['Python']
tags: ['后端', 'Python', 'Django']
artid: "146115585"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146115585
    alt: "Django小白级开发入门"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146115585
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146115585
cover: https://bing.ee123.net/img/rand?artid=146115585
image: https://bing.ee123.net/img/rand?artid=146115585
img: https://bing.ee123.net/img/rand?artid=146115585
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Django小白级开发入门
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <h2>
     1、Django概述
    </h2>
    <p>
     Django是一个开放源代码的Web应用框架，由Python写成。采用了
     <strong>
      MTV
     </strong>
     的框架模式，即模型M，视图V和模版T。
     <br/>
     Django 框架的核心组件有：
    </p>
    <ul>
     <li>
      用于创建模型的对象关系映射
     </li>
     <li>
      为最终用户设计较好的管理界面
     </li>
     <li>
      URL 设计
     </li>
     <li>
      设计者友好的模板语言
     </li>
     <li>
      缓存系统
     </li>
    </ul>
    <p>
     <img alt="" height="472" src="https://i-blog.csdnimg.cn/direct/c07818365b9940d5881d73614463e1ce.png" width="1056"/>
    </p>
    <p>
     Django已经成为web开发者的首选框架，是一个遵循 MVC 设计模式的框架。MVC是Model、View、Controller三个单词的简写，分别代表模型、视图、控制器。Django其实也是一个MTV 的设计模式。
     <br/>
     MTV是Model、Template、View三个单词的简写，分别代表模型、模版、视图  。但是在Django中，
     <span style="color:#1c7331">
      控制器接受用户输入的部分由框架自行处理
     </span>
     ，所以 Django 里更关注的是模型（Model）、模板（Template）和视图（Views），称为 MTV模式。
    </p>
    <table border="1" cellpadding="1" cellspacing="1" style="width:500px">
     <tbody>
      <tr>
       <td>
        <strong>
         层次
        </strong>
       </td>
       <td>
        <strong>
         职责
        </strong>
       </td>
      </tr>
      <tr>
       <td>
        模型（Model），即数据存取层
       </td>
       <td>
        处理与数据相关的所有事务：如何存取、如何验证有效性、包含哪些行为以及数据之间的关系等
       </td>
      </tr>
      <tr>
       <td>
        模板(Template)，即表现层
       </td>
       <td>
        处理与表现相关的决定：如何在页面或其他类型文档中进行显示。
       </td>
      </tr>
      <tr>
       <td>
        视图（View），即业务逻辑层
       </td>
       <td>
        存取模型及调取恰当模板的相关逻辑。模型与模板的桥梁。
       </td>
      </tr>
     </tbody>
    </table>
    <h2>
     2、Django项目环境搭建
    </h2>
    <p>
     主要步骤是：
    </p>
    <ul>
     <li>
      创建并激活虚拟环境
     </li>
     <li>
      安装Django模块
     </li>
     <li>
      创建Django项目
     </li>
     <li>
      创建app应用程序
     </li>
     <li>
      注册app
     </li>
     <li>
      编写Django视图
     </li>
     <li>
      编写Django路由
     </li>
     <li>
      启动Django项目
     </li>
    </ul>
    <h3>
     （1）创建并激活虚拟环境
    </h3>
    <pre><code>cd D:\djangotest #自己创建空文件夹存放项目
python -m venv djangoenv #创建虚拟环境</code></pre>
    <p>
     <img alt="" height="248" src="https://i-blog.csdnimg.cn/direct/e957639660114bdba87b85f3e07cb2e5.png" width="663"/>
    </p>
    <p>
     运行以下命令，激活虚拟环境
    </p>
    <pre><code>cd D:\djangotest
djangoenv\Scripts\activate #激活虚拟环境</code></pre>
    <h3>
     （2）安装Django模块
    </h3>
    <pre><code>#1激活虚拟环境
cd D:\djangotest
djangoenv\Scripts\activate
#2安装django模块
pip install Django #激活虚拟环境后安装Django模块</code></pre>
    <p>
     上述命令执行后，会把Django模块，安装到了djangoenv/Lib/site-packages 下，也就是说，此Django模块仅仅在虚拟环境中，而不是安装在Python全 局环境。目录如下图所示：
    </p>
    <p>
     <img alt="" height="219" src="https://i-blog.csdnimg.cn/direct/b573731ab3974693b195ccd59613fbb5.png" width="335"/>
    </p>
    <h3>
     （3）创建Django项目
    </h3>
    <p>
     安装了Django之后，我们就可以使用Django的管理工具------&gt;django-admin了
    </p>
    <p>
     我们创建一个名称为loginweb的Django项目，命令如下：
    </p>
    <pre><code>#1激活虚拟环境
cd D:\djangotest
djangoenv\Scripts\activate
#2创建一个loginweb的项目
django-admin startproject loginweb</code></pre>
    <p>
     此命令执行后，会在djenv的同级目录，创建一个名称loginweb的Django 项目。目录结构如下图所示：
    </p>
    <p>
     <img alt="" height="273" src="https://i-blog.csdnimg.cn/direct/635224515827495ea6c5b2d6ae98b660.png" width="398"/>
    </p>
    <p>
     用Pycharm打开项目，项目结构文件含义如下：
    </p>
    <ul>
     <li>
      外层的loginweb目录：是项目的容器，Django不关心它的名字，我 们可以将它重命名为任何我们喜欢的名字
     </li>
     <li>
      里面的loginweb目录：它是一个纯python包。我们可以称呼它为项目的名称，不能随意重命名
     </li>
     <li>
      manage.py ：它是Django的一个非常重要的工具，通过它可以调用 django shell和数据库等，如：创建app应用程序、创建数据库表、清 空数据、启动项目等操作
     </li>
     <li>
      settings.py ：Django 项目的配置文件。包含了项目的默认设置，包 括数据库信息，调试标志以及其他一些工作的变量
     </li>
     <li>
      urls.py ：Django 项目的URL路由声明，负责把URL模式映射到应用 程序
     </li>
     <li>
      wsgi.py：Web服务器网关接口（Python Web Server Gateway Interface的缩写），Python应用和Web服务器之间的一种接口，可以 看成是一种协议、规范。它是基于Http协议的，不支持WebSoket
     </li>
     <li>
      asgi.py：异步网关协议接口，能够处理多种通用的协议类型，包括 HTTP，HTTP2和WebSocket，可以看成ASGI是WSGI的扩展
     </li>
    </ul>
    <h3>
     （4）创建app应用程序
    </h3>
    <p>
     <span style="color:#fe2c24">
      一般一个项目包含多个app应用程序
     </span>
     （当然，通用的app也可以在多个项目中使用） 下面我们为loginweb项目，创建login
    </p>
    <pre><code>#1激活虚拟环境
cd D:\djangotest
djangoenv\Scripts\activate
#2切到django项目中
cd loginweb
#3创建一个叫login的应用
django-admin startapp login</code></pre>
    <p>
     <img alt="" height="162" src="https://i-blog.csdnimg.cn/direct/72d1b6c97b2148ab9e3ecb0f7bb64f60.png" width="667"/>
    </p>
    <p>
     上述命令执行后，目录结构如下图所示：
    </p>
    <p>
     <img alt="" height="260" src="https://i-blog.csdnimg.cn/direct/b50cf5c6d4754048a8073f74a06f730e.png" width="191"/>
    </p>
    <h3>
     （5）注册app
    </h3>
    <p>
     app应用程序创建以后，必须把app注册到Django，才能够被Django项目所管理。我们只需要把login应用的名称，配置到 loginweb/settings.py文件中即可。如下图所示：
    </p>
    <p>
     <img alt="" height="187" src="https://i-blog.csdnimg.cn/direct/5413c9e017b6490a93c9085d4e6ca232.png" width="286"/>
    </p>
    <h3>
     （6）编写Django视图
    </h3>
    <p>
     Django视图的作用：用于接受Web请求并且返回Web响应的简单Python 函数。该函数一般定义在各自应用的views.py文件中。在视图函数中，有 两个重要的对象：请求对象和响应对象。
     <br/>
     下面是一个最简单的视图函数:
    </p>
    <pre><code># 例：在login/views.py 中
from django.http import HttpResponse
# Create your views here.

def login(request):
  return HttpResponse("登录页面")</code></pre>
    <h3>
     （7）编写Django路由
    </h3>
    <p>
     Django的路由定义文件为：项目目录urls.py文件。我们所有的路由配置，都以列表的方式，定义在urls.py文件中，添加我们想要的路由。
    </p>
    <pre><code># 例：在loginweb/urls.py 中
from django.contrib import admin
from django.urls import path
from login import views
urlpatterns = [
   path("admin/", admin.site.urls),
   path("login/",views.login)
]</code></pre>
    <h3>
     （8）启动Django项目
    </h3>
    <p>
     在开发环境下，我们需要在本地启动Django项目，来开发与调试我们的代 码。启动Django项目命令如下：
    </p>
    <pre><code>python manage.py runserver [port]
#[port] 为应用访问端口，可以缺省不写，默认为8000。</code></pre>
    <p>
     此时，我们就可以用浏览器访问我们的项目了。结果如下图所示：
    </p>
    <p>
     <img alt="" height="243" src="https://i-blog.csdnimg.cn/direct/91f073914a5b4838b52144a6b27610c4.png" width="463"/>
    </p>
    <p>
     访问我们写好的路由：
    </p>
    <p>
     <img alt="" height="142" src="https://i-blog.csdnimg.cn/direct/d9364db925914e1690602e811fa0fce8.png" width="464"/>
    </p>
    <h2 style="background-color:transparent">
     3、创建登录页面
    </h2>
    <p>
     在login底下新写建一个templates目录，存放编写的html前端页面。
    </p>
    <p>
     <img alt="" height="207" src="https://i-blog.csdnimg.cn/direct/f454dfbdb4ee45de8305030ad4c98f72.png" width="305"/>
    </p>
    <p>
     loginweb -&gt; login -&gt; templates -&gt; login.html：
    </p>
    <pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
   &lt;meta charset="UTF-8"&gt;
   &lt;title&gt;登录页面&lt;/title&gt;
   &lt;style&gt;
       body{
       text-align:center;
      }
   &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;form action="/login/" method="post"&gt;
  {% csrf_token %}
   &lt;h1 align="center"&gt;登录页面&lt;/h1&gt;
   &lt;p class="divs"&gt;
       &lt;label for="username"&gt;用户名:&lt;/label&gt;
       &lt;input type="text" id="username" name="username" align="center"&gt;
   &lt;/p&gt;
   &lt;p class="divs"&gt;
       &amp;nbsp&amp;nbsp&amp;nbsp&lt;label for="password"&gt;密码:&lt;/label&gt;
       &lt;input type="password" id="password" name="password"&gt;
   &lt;/p&gt;
   &lt;input type="submit" value="登录"&gt;
   &lt;span style="color:red"&gt;{<!-- -->{ error }}&lt;/span&gt;
&lt;/form&gt;


&lt;/body&gt;
&lt;/html&gt;</code></pre>
    <p>
     loginweb -&gt; login -&gt; templates -&gt; index.html
    </p>
    <pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
   &lt;meta charset="UTF-8"&gt;
   &lt;title&gt;这里是主页&lt;/title&gt;
   &lt;style&gt;
       h1 { color:red }
   &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
   &lt;h1&gt;这里是主页&lt;/h1&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
    <p>
     loginweb -&gt; login -&gt; views.py
    </p>
    <pre><code class="language-python">from django.shortcuts import render,redirect
# Create your views here.

def login(request):
  if request.method == 'POST':
     username = request.POST.get('username')
     passowrd = request.POST.get('password')
     if username=='songqin' and passowrd =='123456':
        return redirect('/index')
     else:
        return render(request,'login.html',{"error":"用户名或密码错误"})

  return render(request,'login.html')

def index(request):
  return render(request,'index.html')</code></pre>
    <p>
     loginweb -&gt; loginweb -&gt; urls.py
    </p>
    <pre><code class="language-python">from django.contrib import admin
from django.urls import path
from login import views
urlpatterns = [
   path("admin/", admin.site.urls),
   path("login/",views.login),
   path("index/",views.index)
]</code></pre>
    <p>
     再次启动Django项目
    </p>
    <pre><code class="language-python">python manage.py runserver [port]
#[port] 为应用访问端口，可以缺省不写，默认为8000。</code></pre>
    <p>
     访问http://127.0.0.1:8000/login/项目
    </p>
    <p>
     <img alt="" height="214" src="https://i-blog.csdnimg.cn/direct/05656400bd5d4b42bef8d0e3bab9f269.png" width="566"/>
    </p>
    <p>
     输入不是用户名密码不是songqin/123456
    </p>
    <p>
     <img alt="" height="230" src="https://i-blog.csdnimg.cn/direct/77bb5466db954ddf868ab33c11aa211d.png" width="610"/>
    </p>
    <p>
     输入songqin/123456点击登录 跳转到主页面
    </p>
    <p>
     <img alt="" height="191" src="https://i-blog.csdnimg.cn/direct/6d347aa9c9cf4403902b5b642d595ef9.png" width="445"/>
    </p>
    <h2>
     4、数据库链接
    </h2>
    <h3>
     （1）配置mysql
    </h3>
    <p>
     loginweb -&gt; loginweb -&gt; settings.py
    </p>
    <p>
     默认的数据库配置如下：
    </p>
    <pre><code class="language-python">DATABASES = {
    "default": {
        "ENGINE": "django.db.backends.sqlite3",
        "NAME": BASE_DIR / "db.sqlite3",
    }
}
</code></pre>
    <p>
     修改后如下所示：
    </p>
    <pre><code class="language-python">DATABASES = {
    "default": {
        "ENGINE": "django.db.backends.mysql",
        "NAME": "数据库名",
        "USER": "用户",
        "PASSWORD": "密码",
        "HOST": "ip",
        "PORT": "3306"
    }
}
</code></pre>
    <p>
     保存后，系统报错，缺少mysql插件，需要安装
     <code>
      mysqlclient
     </code>
     ，
    </p>
    <p>
     <img alt="" height="352" src="https://i-blog.csdnimg.cn/direct/fadcde02158d4404a7af5114dc0ed73b.png" width="931"/>
    </p>
    <p>
     执行以下命令安装：
    </p>
    <pre><code class="language-python">pip install mysqlclient
</code></pre>
    <p>
     <code>
      python manage.py runserver
     </code>
     :然后成功运行。
    </p>
    <p>
     <img alt="" height="262" src="https://i-blog.csdnimg.cn/direct/6d97741c0b7c45e196a3adbd384906d7.png" width="889"/>
    </p>
    <p>
     按这个同样可以运行程序。
    </p>
    <h3>
     （2）自动创建数据库表
    </h3>
    <p>
     在loginweb -&gt; login -&gt; models.py中，添加用户类User_01。子类Meta中定义表的元数据，这里指定了表的名称为f_user_01。
    </p>
    <pre><code class="language-python">from django.db import models


# Create your models here.
class User_01(models.Model):
    u_id = models.AutoField(primary_key=True)
    username = models.CharField(max_length=64, null=True)
    name = models.CharField(max_length=64, null=True)
    password = models.CharField(max_length=64, null=True)
    sex = models.CharField(max_length=64, null=True)
    age = models.CharField(max_length=64, null=True)
    phone = models.CharField(max_length=64, null=True)
    email = models.CharField(max_length=64, null=True)
    unit = models.CharField(max_length=64, null=True)
    avatar = models.CharField(max_length=64, null=True)
    status = models.CharField(max_length=64, null=True)
    create_time = models.CharField(max_length=64, null=True)
    delete_time = models.CharField(max_length=64, null=True)
    update_time = models.CharField(max_length=64, null=True)

    class Meta:
        db_table = "f_user_01"
</code></pre>
    <p>
     执行命令：
    </p>
    <pre><code class="language-python"># 生成迁移数据
python manage.py makemigrations
# 生成数据库表
python manage.py migrate 
</code></pre>
    <p>
     执行完第一个命令，会在loginweb -&gt; login -&gt; migrations下生成初始化文件，仅仅对我们的类做了一个解读。
    </p>
    <p>
     <img alt="" height="129" src="https://i-blog.csdnimg.cn/direct/3ec2ff9afb1648e791fb4921f10f25d8.png" width="1038"/>
    </p>
    <p>
     <img alt="" height="140" src="https://i-blog.csdnimg.cn/direct/618100f0e80d4dbc85d64ad43b22ee06.png" width="212"/>
    </p>
    <p>
     执行完第二个命令，会在数据库中生成数据库表。
    </p>
    <p>
     <img alt="" height="301" src="https://i-blog.csdnimg.cn/direct/4d384ebbf2c84861a380bb9626fa24e7.png" width="491"/>
    </p>
    <p>
     数据库表中生成如下，只有f_user_01是我们要生成的表，上面其他的表都是Django系统默认生成的表，暂且不管。
    </p>
    <p>
     <img alt="" height="283" src="https://i-blog.csdnimg.cn/direct/2d459b7bee364705aba45b4e1f8e8df9.png" width="313"/>
    </p>
    <h3>
     （3）手工创建表进行映射
    </h3>
    <p>
     上面的方式是通过django自动创建models中定义的表。
    </p>
    <p>
     现在我们需要手工创建表，然后在models中进行映射。
    </p>
    <p>
     在数据库中创建表如下：
    </p>
    <p>
     <img alt="" height="241" src="https://i-blog.csdnimg.cn/direct/43046db21ae1413f9a4936c6d4628a1b.png" width="1039"/>
    </p>
    <p>
     然后在loginweb -&gt; login -&gt; models.py中，增加代码如下：
    </p>
    <pre><code class="language-python">class User(models.Model):
    id = models.AutoField(primary_key=True)
    name = models.CharField(max_length=30, null=True)
    age = models.IntegerField(null=True)
    email = models.CharField(max_length=50, null=True)

    class Meta:
        db_table = "user"</code></pre>
    <p>
     直接运行程序即可。
    </p>
    <h3>
     （4）小结
    </h3>
    <p>
     1、配置mysql，需要安装mysqlclient，编写models的实体类，通过迁移命令可以自动生成mysql数据库表结构。
    </p>
    <p>
     2、如果数据库表中已经创建好表，则只在model.py中创建对应实体类即可，不用执行迁移的两个命令。这里就和java对应上了，直接编写对应实体类和sql即可。
    </p>
    <p>
     3、如果数据库没有创建好表，可以在models设计好实体类，使用迁移命令即可自动生成mysql数据库表结构。
    </p>
    <h3>
     （5）添加数据
    </h3>
    <p>
     在loginweb -&gt; login -&gt; views.py中，添加代码如下：
    </p>
    <pre><code class="language-python">def addUser(request):
    models.User.objects.create(name='linfuchi', age=90, email='i miss you')

    result = {
        'code': 0,
        'msg': 'success',
        'data': ''
    }

    return HttpResponse(json.dumps(result, ensure_ascii=False), content_type='application/json')</code></pre>
    <p>
     在loginweb -&gt; loginweb -&gt; urls.py中，添加代码如下：
    </p>
    <p>
     <img alt="" height="202" src="https://i-blog.csdnimg.cn/direct/7492192adcc94814ae4158ad34e76ab6.png" width="313"/>
    </p>
    <p>
     测试：
    </p>
    <p>
     <img alt="" height="158" src="https://i-blog.csdnimg.cn/direct/87d88f7b6c174b8289ad3201a3b4871f.png" width="390"/>
    </p>
    <p>
     数据库表中的信息：
    </p>
    <p>
     <img alt="" height="185" src="https://i-blog.csdnimg.cn/direct/1c5af843dd7747f48ab0feb2653bbbfd.png" width="393"/>
    </p>
    <h3>
     （6）创建默认的表
    </h3>
    <p>
     在loginweb -&gt; login -&gt; models.py中，增加新的类：
    </p>
    <pre><code class="language-python">class Info(models.Model):
    title = models.CharField(max_length=100)
    author = models.CharField(max_length=100)</code></pre>
    <p>
     此时没有通过class Meta指定具体的表名信息。
    </p>
    <p>
     那么会自动创建表吗？答案是肯定的。
    </p>
    <p>
     <img alt="" height="273" src="https://i-blog.csdnimg.cn/direct/88dcba65cca14ac9965803f66eeee651.png" width="987"/>
    </p>
    <p>
     针对python manage.py migrate，提示没有要执行的。
    </p>
    <p>
     这是因为迁移记录已被标记为已应用。
    </p>
    <pre><code>SELECT * FROM django_migrations;</code></pre>
    <p>
     如果发现
     <code>
      login
     </code>
     应用的
     <code>
      0001_initial
     </code>
     迁移记录已经存在，说明该迁移已经被应用过了。
    </p>
    <p>
     如果确认
     <code>
      login
     </code>
     应用的
     <code>
      0001_initial
     </code>
     迁移记录不应该存在，你可以手动删除该记录，然后重新执行迁移。
    </p>
    <p>
     删除语句：
    </p>
    <pre><code class="language-python">DELETE FROM django_migrations WHERE app = 'login' AND name = '0001_initial';</code></pre>
    <p>
     然后重新执行迁移：
    </p>
    <pre><code class="language-python">python manage.py migrate</code></pre>
    <p>
     此时，查询数据库可以发现已经有一个新表了：
    </p>
    <p>
     <img alt="" height="288" src="https://i-blog.csdnimg.cn/direct/933d9ed6f5784762a282d8e970edd394.png" width="245"/>
    </p>
    <h2>
     5、创建自定义命令
    </h2>
    <p>
     在loginweb -&gt; login下创建目录 management，在其下再创建目录commands。
    </p>
    <p>
     这里就是存放命令的目录，类似于springboot等其他框架技术，遵循“约定大于配置”的原则。
    </p>
    <p>
     在其下再创建hello.py的文件，整体结构如下：
    </p>
    <p>
     <img alt="" height="175" src="https://i-blog.csdnimg.cn/direct/dedb04e05a264e1fa60a29c1422bc8cd.png" width="241"/>
    </p>
    <p>
     hello.py的代码如下：
    </p>
    <pre><code class="language-python">from django.core.management.base import BaseCommand

class Command(BaseCommand):
    help = 'Prints a simple greeting message'

    def handle(self, *args, **options):
        # 在这里编写命令的具体逻辑
        self.stdout.write(self.style.SUCCESS('Hello, Django!'))</code></pre>
    <p>
     执行命令：
    </p>
    <p>
     <img alt="" height="87" src="https://i-blog.csdnimg.cn/direct/2bc98b74a0dd4681b82f78f09cd7acfe.png" width="894"/>
    </p>
    <p>
     在上述代码中：
    </p>
    <p>
     help 属性是命令的简短描述，当你运行 python manage.py help hello 时会显示该描述。
    </p>
    <p>
     handle 方法是命令的核心逻辑，当你运行该命令时，handle 方法会被执行。self.stdout.write 用于输出信息，self.style.SUCCESS 会将输出信息以绿色高亮显示。
    </p>
    <h2>
     6、创建用户
    </h2>
    <p>
     Django自带的管理界面提供了便捷的用户创建功能。
    </p>
    <h3>
     （1）创建超级用户
    </h3>
    <p>
     在项目根目录下，打开命令行终端，执行以下命令：
    </p>
    <pre><code>python manage.py createsuperuser</code></pre>
    <p>
     按照提示输入用户名、邮箱和密码。
    </p>
    <p>
     <img alt="" height="171" src="https://i-blog.csdnimg.cn/direct/1e7f1c22094f47ce94c5ea68b8160116.png" width="964"/>
    </p>
    <h3>
     （2）创建普通用户
    </h3>
    <ul>
     <li>
      启动服务器：python manage.py runserver
     </li>
     <li>
      登录管理界面：打开浏览器，访问
      <code>
       http://127.0.0.1:8000/admin/
      </code>
      ，使用之前创建的超级用户账号和密码登录。
     </li>
     <li>
      创建新用户：登录成功后，在管理界面中找到 “用户” 选项，点击 “添加” 按钮，输入新用户的用户名、密码等信息，然后点击 “保存” 即可创建新用户。
     </li>
    </ul>
    <p>
     我们创建了账密为hugh/hugh。
    </p>
    <h2>
     7、Rest framework框架
    </h2>
    <h3>
     （1）获取token信息
    </h3>
    <p>
     在loginweb -&gt; loginweb -&gt; urls.py中配置token的请求信息。
    </p>
    <p>
     <img alt="" height="487" src="https://i-blog.csdnimg.cn/direct/32d726fdd90c4e18b244623f5fdc7819.png" width="951"/>
    </p>
    <p>
     具体代码如下：
    </p>
    <pre><code class="language-python">from django.contrib import admin
from django.urls import path
from login import views
from rest_framework_simplejwt.views import (
    TokenObtainPairView,
    TokenRefreshView,
)

urlpatterns = [
    path('api/token/', TokenObtainPairView.as_view(), name='token_obtain_pair'),
    path("admin/", admin.site.urls),
    path("login/", views.login),
    path("index/", views.index),
    path("addUser/", views.addUser)
]</code></pre>
    <p>
     然后在cmd中执行如下命令：
    </p>
    <pre><code class="language-python">curl -X POST -H "Content-Type: application/json" -d "{\"username\": \"hugh\", \"password\": \"hugh\"}" http://127.0.0.1:8000/api/token/</code></pre>
    <p>
     就可以获得token信息。
    </p>
    <p>
     <img alt="" height="177" src="https://i-blog.csdnimg.cn/direct/c6ef1363fc184f2c91fde5ecbf5e96dc.png" width="1471"/>
    </p>
    <h3 style="background-color:transparent">
     （2）创建Post请求
    </h3>
    <p>
     <strong>
      首先，修改loginweb -&gt; login -&gt; views.py文件
     </strong>
    </p>
    <p>
     添加如下代码：
    </p>
    <pre><code class="language-python">from rest_framework import viewsets, status
from rest_framework.decorators import action
from rest_framework.response import Response

class BookViewSet(viewsets.ModelViewSet):

    @action(detail=False, methods=['post'])
    def hello(self, request, pk=None):
        message = "Hello! You are interacting with the book!"
        return Response({'message': message}, status=status.HTTP_200_OK)</code></pre>
    <p>
     action的detail为False，表示URL不会包含对象的主键，它是针对整个资源集合的操作。
    </p>
    <p>
    </p>
    <p>
     <strong>
      然后，在loginweb -&gt; login下添加urls.py文件
     </strong>
    </p>
    <p>
     内容如下：
    </p>
    <pre><code class="language-python">from django.urls import path,include
from rest_framework.routers import DefaultRouter
from .views import BookViewSet

router = DefaultRouter()
router.register(r'books', BookViewSet, basename='books')

urlpatterns = [
    path('', include(router.urls))
]</code></pre>
    <p>
    </p>
    <p>
     <strong>
      接着，在loginweb -&gt; loginweb -&gt; urls.py中添加如下代码
     </strong>
    </p>
    <p>
     <img alt="" height="531" src="https://i-blog.csdnimg.cn/direct/5f8d397e73f6440cae85331671ba943d.png" width="889"/>
    </p>
    <p>
     此时，通过python manage.py runserver运行程序。
    </p>
    <p>
     然后在cmd执行curl命令如下：
    </p>
    <pre><code class="language-python">C:\Users\hugh&gt;curl -X POST -H "Content-Type: application/json"  http://127.0.0.1:8000/api/books/hello/
{"message":"Hello! You are interacting with the book!"}</code></pre>
    <h3 style="background-color:transparent">
     （3）与数据库表结合的Post请求
    </h3>
    <p>
     在上一个例子的基础上做调整。
    </p>
    <p>
     <strong>
      首先，在loginweb -&gt; login下新建py文件命名为serializers.py。
     </strong>
    </p>
    <p>
     代码如下：
    </p>
    <pre><code class="language-python">from rest_framework import serializers
from .models import User

class UserSerializer(serializers.ModelSerializer):
    class Meta:
        model = User
        fields = '__all__'</code></pre>
    <p>
     <strong>
      然后，优化loginweb -&gt; login -&gt; urls.py文件
     </strong>
    </p>
    <p>
     去掉basename的信息
    </p>
    <p>
     <img alt="" height="381" src="https://i-blog.csdnimg.cn/direct/bbd38aaf23e44326bf12243db7493aef.png" width="645"/>
    </p>
    <p>
     接着，修改loginweb -&gt; login -&gt; views.py文件。
    </p>
    <p>
     <img alt="" height="490" src="https://i-blog.csdnimg.cn/direct/1da6dc7e341448a29b3a53ef1d2512f3.png" width="1078"/>
    </p>
    <p>
     执行curl命令如下：
    </p>
    <pre><code class="language-python">C:\Users\hugh&gt;curl -X POST -H "Content-Type: application/json" -d "{\"username\": \"hugh\", \"password\": \"hugh\"}" http://127.0.0.1:8000/api/books/1/hello/
{"message":"Hello! You are interacting with the user-email: test1@sina.com user-name:hugh"}</code></pre>
    <p>
     其中的books/1/hello中的1就是User的id值。
    </p>
    <p>
     detail=True表示只查单条的值。
    </p>
    <p>
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f:2f626c6f672e6373646e2e6e65742f62656e62656e3034342f:61727469636c652f64657461696c732f313436313135353835" class_="artid" style="display:none">
 </p>
</div>


