---
layout: post
title: "初识JVM"
date: 2025-03-14 19:24:46 +0800
description: "以沙箱方式运行Java字节码的抽象计算机，核心特征：fill:#333;color:#333;color:#333;fill:none;JVM核心能力跨平台运行内存自动管理即时编译优化安全沙箱机制。"
keywords: "初识JVM"
categories: ['Java']
tags: ['字节码', 'Jvm', 'Java']
artid: "146265618"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146265618
    alt: "初识JVM"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146265618
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146265618
cover: https://bing.ee123.net/img/rand?artid=146265618
image: https://bing.ee123.net/img/rand?artid=146265618
img: https://bing.ee123.net/img/rand?artid=146265618
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     初识JVM
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h2>
     <a id="JVM_0">
     </a>
     初识JVM
    </h2>
    <h3>
     <a id="JVM_2">
     </a>
     JVM定义与核心功能
    </h3>
    <p>
     <code>
      Java Virtual Machine (JVM)
     </code>
     - 以沙箱方式运行Java字节码的抽象计算机，核心特征：
    </p>
    <div class="mermaid">
     <svg class="mermaid-svg" height="350" id="mermaid-svg-8BKPiBYEULUc0aQP" viewbox="0 0 294.375 350" width="294.375" xmlns="http://www.w3.org/2000/svg">
      <style>
       #mermaid-svg-8BKPiBYEULUc0aQP {font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}#mermaid-svg-8BKPiBYEULUc0aQP .error-icon{fill:#552222;}#mermaid-svg-8BKPiBYEULUc0aQP .error-text{fill:#552222;stroke:#552222;}#mermaid-svg-8BKPiBYEULUc0aQP .edge-thickness-normal{stroke-width:2px;}#mermaid-svg-8BKPiBYEULUc0aQP .edge-thickness-thick{stroke-width:3.5px;}#mermaid-svg-8BKPiBYEULUc0aQP .edge-pattern-solid{stroke-dasharray:0;}#mermaid-svg-8BKPiBYEULUc0aQP .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-svg-8BKPiBYEULUc0aQP .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-svg-8BKPiBYEULUc0aQP .marker{fill:#333333;stroke:#333333;}#mermaid-svg-8BKPiBYEULUc0aQP .marker.cross{stroke:#333333;}#mermaid-svg-8BKPiBYEULUc0aQP svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-svg-8BKPiBYEULUc0aQP .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#333;}#mermaid-svg-8BKPiBYEULUc0aQP .cluster-label text{fill:#333;}#mermaid-svg-8BKPiBYEULUc0aQP .cluster-label span{color:#333;}#mermaid-svg-8BKPiBYEULUc0aQP .label text,#mermaid-svg-8BKPiBYEULUc0aQP span{fill:#333;color:#333;}#mermaid-svg-8BKPiBYEULUc0aQP .node rect,#mermaid-svg-8BKPiBYEULUc0aQP .node circle,#mermaid-svg-8BKPiBYEULUc0aQP .node ellipse,#mermaid-svg-8BKPiBYEULUc0aQP .node polygon,#mermaid-svg-8BKPiBYEULUc0aQP .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaid-svg-8BKPiBYEULUc0aQP .node .label{text-align:center;}#mermaid-svg-8BKPiBYEULUc0aQP .node.clickable{cursor:pointer;}#mermaid-svg-8BKPiBYEULUc0aQP .arrowheadPath{fill:#333333;}#mermaid-svg-8BKPiBYEULUc0aQP .edgePath .path{stroke:#333333;stroke-width:2.0px;}#mermaid-svg-8BKPiBYEULUc0aQP .flowchart-link{stroke:#333333;fill:none;}#mermaid-svg-8BKPiBYEULUc0aQP .edgeLabel{background-color:#e8e8e8;text-align:center;}#mermaid-svg-8BKPiBYEULUc0aQP .edgeLabel rect{opacity:0.5;background-color:#e8e8e8;fill:#e8e8e8;}#mermaid-svg-8BKPiBYEULUc0aQP .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#mermaid-svg-8BKPiBYEULUc0aQP .cluster text{fill:#333;}#mermaid-svg-8BKPiBYEULUc0aQP .cluster span{color:#333;}#mermaid-svg-8BKPiBYEULUc0aQP div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#mermaid-svg-8BKPiBYEULUc0aQP :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}
      </style>
      <g>
       <g class="output">
        <g class="clusters">
        </g>
        <g class="edgePaths">
         <g class="edgePath LS-A LE-B" id="L-A-B" style="opacity: 1;">
          <path class="path" d="M77.15494791666667,152L88.52495659722223,131.83333333333334C99.89496527777779,111.66666666666667,122.6349826388889,71.33333333333333,139.50499131944443,51.166666666666664C156.375,31,167.375,31,172.875,31L178.375,31" marker-end="url(#arrowhead49)" style="fill:none">
          </path>
          <defs>
           <marker id="arrowhead49" markerheight="6" markerunits="strokeWidth" markerwidth="8" orient="auto" refx="9" refy="5" viewbox="0 0 10 10">
            <path class="arrowheadPath" d="M 0 0 L 10 5 L 0 10 z" style="stroke-width: 1; stroke-dasharray: 1, 0;">
            </path>
           </marker>
          </defs>
         </g>
         <g class="edgePath LS-A LE-C" id="L-A-C" style="opacity: 1;">
          <path class="path" d="M103.08984375,152L110.13736979166667,147.83333333333334C117.18489583333333,143.66666666666666,131.27994791666666,135.33333333333334,142.494140625,131.16666666666666C153.70833333333334,127,162.04166666666666,127,166.20833333333334,127L170.375,127" marker-end="url(#arrowhead50)" style="fill:none">
          </path>
          <defs>
           <marker id="arrowhead50" markerheight="6" markerunits="strokeWidth" markerwidth="8" orient="auto" refx="9" refy="5" viewbox="0 0 10 10">
            <path class="arrowheadPath" d="M 0 0 L 10 5 L 0 10 z" style="stroke-width: 1; stroke-dasharray: 1, 0;">
            </path>
           </marker>
          </defs>
         </g>
         <g class="edgePath LS-A LE-D" id="L-A-D" style="opacity: 1;">
          <path class="path" d="M103.08984375,198L110.13736979166667,202.16666666666666C117.18489583333333,206.33333333333334,131.27994791666666,214.66666666666666,142.494140625,218.83333333333334C153.70833333333334,223,162.04166666666666,223,166.20833333333334,223L170.375,223" marker-end="url(#arrowhead51)" style="fill:none">
          </path>
          <defs>
           <marker id="arrowhead51" markerheight="6" markerunits="strokeWidth" markerwidth="8" orient="auto" refx="9" refy="5" viewbox="0 0 10 10">
            <path class="arrowheadPath" d="M 0 0 L 10 5 L 0 10 z" style="stroke-width: 1; stroke-dasharray: 1, 0;">
            </path>
           </marker>
          </defs>
         </g>
         <g class="edgePath LS-A LE-E" id="L-A-E" style="opacity: 1;">
          <path class="path" d="M77.15494791666667,198L88.52495659722223,218.16666666666666C99.89496527777779,238.33333333333334,122.6349826388889,278.6666666666667,138.17165798611111,298.8333333333333C153.70833333333334,319,162.04166666666666,319,166.20833333333334,319L170.375,319" marker-end="url(#arrowhead52)" style="fill:none">
          </path>
          <defs>
           <marker id="arrowhead52" markerheight="6" markerunits="strokeWidth" markerwidth="8" orient="auto" refx="9" refy="5" viewbox="0 0 10 10">
            <path class="arrowheadPath" d="M 0 0 L 10 5 L 0 10 z" style="stroke-width: 1; stroke-dasharray: 1, 0;">
            </path>
           </marker>
          </defs>
         </g>
        </g>
        <g class="edgeLabels">
         <g class="edgeLabel" style="opacity: 1;" transform="">
          <g class="label" transform="translate(0,0)">
           <rect height="0" rx="0" ry="0" width="0">
           </rect>
           <foreignobject height="0" width="0">
            <div style="display: inline-block; white-space: nowrap;">
             <span class="edgeLabel L-LS-A' L-LE-B" id="L-L-A-B">
             </span>
            </div>
           </foreignobject>
          </g>
         </g>
         <g class="edgeLabel" style="opacity: 1;" transform="">
          <g class="label" transform="translate(0,0)">
           <rect height="0" rx="0" ry="0" width="0">
           </rect>
           <foreignobject height="0" width="0">
            <div style="display: inline-block; white-space: nowrap;">
             <span class="edgeLabel L-LS-A' L-LE-C" id="L-L-A-C">
             </span>
            </div>
           </foreignobject>
          </g>
         </g>
         <g class="edgeLabel" style="opacity: 1;" transform="">
          <g class="label" transform="translate(0,0)">
           <rect height="0" rx="0" ry="0" width="0">
           </rect>
           <foreignobject height="0" width="0">
            <div style="display: inline-block; white-space: nowrap;">
             <span class="edgeLabel L-LS-A' L-LE-D" id="L-L-A-D">
             </span>
            </div>
           </foreignobject>
          </g>
         </g>
         <g class="edgeLabel" style="opacity: 1;" transform="">
          <g class="label" transform="translate(0,0)">
           <rect height="0" rx="0" ry="0" width="0">
           </rect>
           <foreignobject height="0" width="0">
            <div style="display: inline-block; white-space: nowrap;">
             <span class="edgeLabel L-LS-A' L-LE-E" id="L-L-A-E">
             </span>
            </div>
           </foreignobject>
          </g>
         </g>
        </g>
        <g class="nodes">
         <g class="node default" id="flowchart-A-63" style="opacity: 1;" transform="translate(64.1875,175)">
          <rect class="label-container" height="46" rx="0" ry="0" width="112.375" x="-56.1875" y="-23">
          </rect>
          <g class="label" transform="translate(0,0)">
           <g transform="translate(-46.1875,-13)">
            <foreignobject height="26" width="92.375">
             <div style="display: inline-block; white-space: nowrap;">
              JVM核心能力
             </div>
            </foreignobject>
           </g>
          </g>
         </g>
         <g class="node default" id="flowchart-B-65" style="opacity: 1;" transform="translate(228.375,31)">
          <rect class="label-container" height="46" rx="0" ry="0" width="100" x="-50" y="-23">
          </rect>
          <g class="label" transform="translate(0,0)">
           <g transform="translate(-40,-13)">
            <foreignobject height="26" width="80">
             <div style="display: inline-block; white-space: nowrap;">
              跨平台运行
             </div>
            </foreignobject>
           </g>
          </g>
         </g>
         <g class="node default" id="flowchart-C-67" style="opacity: 1;" transform="translate(228.375,127)">
          <rect class="label-container" height="46" rx="0" ry="0" width="116" x="-58" y="-23">
          </rect>
          <g class="label" transform="translate(0,0)">
           <g transform="translate(-48,-13)">
            <foreignobject height="26" width="96">
             <div style="display: inline-block; white-space: nowrap;">
              内存自动管理
             </div>
            </foreignobject>
           </g>
          </g>
         </g>
         <g class="node default" id="flowchart-D-69" style="opacity: 1;" transform="translate(228.375,223)">
          <rect class="label-container" height="46" rx="0" ry="0" width="116" x="-58" y="-23">
          </rect>
          <g class="label" transform="translate(0,0)">
           <g transform="translate(-48,-13)">
            <foreignobject height="26" width="96">
             <div style="display: inline-block; white-space: nowrap;">
              即时编译优化
             </div>
            </foreignobject>
           </g>
          </g>
         </g>
         <g class="node default" id="flowchart-E-71" style="opacity: 1;" transform="translate(228.375,319)">
          <rect class="label-container" height="46" rx="0" ry="0" width="116" x="-58" y="-23">
          </rect>
          <g class="label" transform="translate(0,0)">
           <g transform="translate(-48,-13)">
            <foreignobject height="26" width="96">
             <div style="display: inline-block; white-space: nowrap;">
              安全沙箱机制
             </div>
            </foreignobject>
           </g>
          </g>
         </g>
        </g>
       </g>
      </g>
     </svg>
    </div>
    <h3>
     <a id="JVM_15">
     </a>
     JVM运行时模型剖析
    </h3>
    <pre><code class="prism language-java"><span class="token comment">// 典型JVM内存结构示例</span>
┌───────────────────────────┐
│          <span class="token constant">JVM</span> <span class="token class-name">Memory</span>       │
├─────────────┬─────────────┤
│ 线程共享区域 │ 线程私有区域 │
├─────────────┼─────────────┤
│ <span class="token class-name">Method</span> <span class="token class-name">Area</span> │  <span class="token constant">PC</span> <span class="token class-name">Register</span>│
│ <span class="token class-name">Heap</span>        │  <span class="token constant">JVM</span> <span class="token class-name">Stack</span>  │
│             │  <span class="token class-name">Native</span> <span class="token class-name">Meth</span>│
└─────────────┴─────────────┘
</code></pre>
    <h3>
     <a id="_30">
     </a>
     字节码文件深度解析
    </h3>
    <h4>
     <a id="_32">
     </a>
     文件结构全景视图
    </h4>
    <pre><code class="prism language-plaintext">.class
├── 魔数 CAFEBABE
├── 版本号（主/副）
├── 常量池（Constant Pool）
├── 访问标志
├── 类索引/父类索引/接口索引
├── 字段表
├── 方法表
└── 附加属性集
</code></pre>
    <h4>
     <a id="_45">
     </a>
     版本兼容性对照表
    </h4>
    <table>
     <thead>
      <tr>
       <th>
        主版本号
       </th>
       <th>
        JDK版本
       </th>
       <th>
        特性支持
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        45.3
       </td>
       <td>
        1.1
       </td>
       <td>
        基础特性
       </td>
      </tr>
      <tr>
       <td>
        49
       </td>
       <td>
        5
       </td>
       <td>
        自动装箱、泛型
       </td>
      </tr>
      <tr>
       <td>
        52
       </td>
       <td>
        8
       </td>
       <td>
        Lambda、默认方法
       </td>
      </tr>
      <tr>
       <td>
        55
       </td>
       <td>
        11
       </td>
       <td>
        局部变量类型推断
       </td>
      </tr>
     </tbody>
    </table>
    <h4>
     <a id="_53">
     </a>
     常量池类型详解
    </h4>
    <pre><code class="prism language-java"><span class="token class-name">Constant</span> <span class="token class-name">Pool</span> <span class="token class-name">Entry</span> <span class="token class-name">Types</span><span class="token operator">:</span>
<span class="token number">1.</span> <span class="token class-name">CONSTANT_Class</span>          <span class="token comment">// 类/接口符号引用</span>
<span class="token number">2.</span> <span class="token class-name">CONSTANT_Fieldref</span>       <span class="token comment">// 字段引用</span>
<span class="token number">3.</span> <span class="token class-name">CONSTANT_Methodref</span>      <span class="token comment">// 方法引用</span>
<span class="token number">4.</span> <span class="token class-name">CONSTANT_InterfaceMethodref</span>
<span class="token number">5.</span> <span class="token class-name">CONSTANT_String</span>         <span class="token comment">// 字符串字面量</span>
<span class="token number">6.</span> <span class="token class-name">CONSTANT_Integer</span>        <span class="token comment">// 整型常量</span>
<span class="token number">7.</span> <span class="token class-name">CONSTANT_Float</span>          <span class="token comment">// 浮点常量</span>
<span class="token number">8.</span> <span class="token class-name">CONSTANT_Long</span>           <span class="token comment">// 长整型</span>
<span class="token number">9.</span> <span class="token class-name">CONSTANT_Double</span>         <span class="token comment">// 双精度</span>
<span class="token number">10.</span> <span class="token class-name">CONSTANT_NameAndType</span>  <span class="token comment">// 名称与类型描述</span>
<span class="token number">11.</span> <span class="token class-name">CONSTANT_Utf8</span>         <span class="token comment">// UTF-8字符串</span>
<span class="token number">12.</span> <span class="token class-name">CONSTANT_MethodHandle</span>
<span class="token number">13.</span> <span class="token class-name">CONSTANT_MethodType</span>
<span class="token number">14.</span> <span class="token class-name">CONSTANT_InvokeDynamic</span>
</code></pre>
    <h4>
     <a id="_72">
     </a>
     字节码指令实战解析
    </h4>
    <pre><code class="prism language-java"><span class="token comment">// 示例代码</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">IncrementDemo</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        i <span class="token operator">=</span> i<span class="token operator">++</span><span class="token punctuation">;</span>  <span class="token comment">// 输出结果为0</span>
        <span class="token comment">// i = ++i; 输出结果为1</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <pre><code class="prism language-bytecode">// 反编译字节码重点指令分析：
 0: iconst_0       // 将0压入操作数栈 
 1: istore_1       // 保存到局部变量表slot1(i=0)
 2: iload_1        // 加载slot1的值(0)到栈顶 
 3: iinc     1, 1  // 对slot1执行+1操作(i=1)
 6: istore_1       // 将栈顶值0存回slot1(i=0)
</code></pre>
    <blockquote>
     <p>
      关键差异：i++（后自增）会先保存原始值到操作数栈，而++i（前自增）会先执行自增操作。
     </p>
    </blockquote>
    <h3>
     <a id="_95">
     </a>
     实用工具链推荐
    </h3>
    <table>
     <thead>
      <tr>
       <th>
        工具
       </th>
       <th>
        类型
       </th>
       <th>
        使用场景
       </th>
       <th>
        优势特性
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        javap -v
       </td>
       <td>
        命令行工具
       </td>
       <td>
        快速查看字节码
       </td>
       <td>
        JDK自带，无需额外安装
       </td>
      </tr>
      <tr>
       <td>
        jclasslib
       </td>
       <td>
        GUI工具
       </td>
       <td>
        交互式分析
       </td>
       <td>
        可视化展示，支持实时反编译
       </td>
      </tr>
      <tr>
       <td>
        Arthas
       </td>
       <td>
        诊断工具
       </td>
       <td>
        运行时分析
       </td>
       <td>
        动态追踪类加载过程
       </td>
      </tr>
      <tr>
       <td>
        JITWatch
       </td>
       <td>
        分析工具
       </td>
       <td>
        热点代码优化追踪
       </td>
       <td>
        可视化JIT编译过程
       </td>
      </tr>
      <tr>
       <td>
        ASM Bytecode Viewer
       </td>
       <td>
        IDE插件
       </td>
       <td>
        源码级字节码对照
       </td>
       <td>
        即时查看修改后的字节码
       </td>
      </tr>
     </tbody>
    </table>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f:672e6373646e2e6e65742f323330325f38303835333932352f:61727469636c652f64657461696c732f313436323635363138" class_="artid" style="display:none">
 </p>
</div>


