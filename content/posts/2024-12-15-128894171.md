---
layout: post
title: "解决JAVA无法验证证书将不执行该应用程序提示"
date: 2024-12-15 18:49:51 +0800
description: "文章讲述了作者在更新Java到8update361后，遇到AirView应用由于证书安全问题无法运行"
keywords: "无法验证证书将不执行该应用程序"
categories: ['其他技术文摘']
tags: ['开发语言', 'Jvm', 'Java']
artid: "128894171"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=128894171
    alt: "解决JAVA无法验证证书将不执行该应用程序提示"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=128894171
featuredImagePreview: https://bing.ee123.net/img/rand?artid=128894171
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     解决JAVA“无法验证证书。将不执行该应用程序。”提示
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="./../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="./../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p>
     笔者的一台电脑安装了Java 8 update 361。
    </p>
    <p>
     需要使用UBNT网桥上的AirView应用（JAVA），但运行时提示：
    </p>
    <blockquote>
     <p>
      应用程序出于安全原因被阻止
     </p>
     <p>
      无法验证证书。
     </p>
     <p>
      将不执行该应用程序。
     </p>
     <p>
      名称：AirView
     </p>
     <p>
      发行者：Ubiquiti Inc.
     </p>
     <p>
      位置：http://172.16.x.x:80
     </p>
    </blockquote>
    <p>
    </p>
    <p>
     笔者先前已经在控制面板——Java——安全——“例外站点”列表中加入了上述地址，在以前的旧版Java上是可以正常运行的。
    </p>
    <p>
     但自从Java更新到某个版本后（具体无从考证了），就出现了这个“无法验证证书”的问题。
    </p>
    <p>
    </p>
    <p>
     笔者又尝试在控制面板——Java——高级中，将几个证书撤销检查设置为“不检查”。但仍然没有效果，依旧报告相同的错误信息。
    </p>
    <p>
    </p>
    <p>
     既然是证书有问题，那就在弹出提示时，查看一下JAVA应用的证书。
    </p>
    <p>
     发现应用的证书是SHA256算法。但在证书路径中，有父（根）证书在使用SHA1算法。
    </p>
    <p>
     那么会不会是SHA1算法被JAVA所禁止了？
    </p>
    <p>
    </p>
    <p>
     答案就在C:\Program Files\Java\jre1.8.0_361\lib\security\java.security文件中。
    </p>
    <p>
     发现这么几行：
    </p>
    <blockquote>
     <p>
      jdk.certpath.disabledAlgorithms=MD2, MD5, SHA1 jdkCA &amp; usage TLSServer, \
      <br/>
      RSA keySize &lt; 1024, DSA keySize &lt; 1024, EC keySize &lt; 224, \
      <br/>
      include jdk.disabled.namedCurves, \
      <br/>
      SHA1 usage SignedJAR &amp; denyAfter 2019-01-01
     </p>
    </blockquote>
    <p>
    </p>
    <p>
     又上网查询了一下，官方讲得很清楚：
    </p>
    <blockquote>
     <p>
      JARs signed with SHA-1 algorithms are now restricted by default and treated as if they were unsigned.
     </p>
     <p>
     </p>
     <p>
      Any JAR signed with SHA-1 algorithms and timestamped prior to January 01, 2019 will
      <strong>
       NOT
      </strong>
      be restricted.
     </p>
     <p>
     </p>
     <p>
      Users can,
      <em>
       at their own risk
      </em>
      , remove these restrictions by modifying the
      <code>
       java.security
      </code>
      configuration file (or override it by using the
      <code>
       java.security.properties
      </code>
      system property) and removing "SHA1 usage SignedJAR &amp; denyAfter 2019-01-01" from the
      <code>
       jdk.certpath.disabledAlgorithms
      </code>
      security property and "SHA1 denyAfter 2019-01-01" from the
      <code>
       jdk.jar.disabledAlgorithms
      </code>
      security property.
     </p>
    </blockquote>
    <p>
     <a class="has-card" href="https://www.oracle.com/java/technologies/javase/11-0-17-relnotes.html" rel="nofollow" title="Java™ SE Development Kit 11, 11.0.17 Release Notes">
      <span class="link-card-box">
       <span class="link-title">
        Java™ SE Development Kit 11, 11.0.17 Release Notes
       </span>
       <span class="link-link">
        <img alt="" class="link-link-icon" src="https://i-blog.csdnimg.cn/blog_migrate/fd7b3b90db8dc44050120ee5a1f4af41.png">
         https://www.oracle.com/java/technologies/javase/11-0-17-relnotes.html
        </img>
       </span>
      </span>
     </a>
    </p>
    <p>
     也就是说，JRE从某个版本开始（大约是2021年的第三季度），默认阻止签名证书使用SHA1算法的应用。但也有例外，就是签名时间戳早于2019年1月1日的，不受此限制。
    </p>
    <p>
    </p>
    <p>
     因此，只需要在java.security文件中找到两行带有“denyAfter 2019-01-01”的代码，用#将其注释掉即可。
    </p>
    <p>
    </p>
    <p>
     保存文件，之后就可以运行先前的java应用了。
    </p>
   </div>
  </div>
 </article>
 <p alt="687474:70733a2f2f626c6f672e6373646e2e6e65742f726f6275722f:61727469636c652f64657461696c732f313238383934313731" class_="artid" style="display:none">
 </p>
</div>


