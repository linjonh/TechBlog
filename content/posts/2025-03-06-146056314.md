---
layout: post
title: "Spring整合SpringMVC"
date: 2025-03-06 00:32:13 +0800
description: "Spring整合SpringMVC"
keywords: "【Spring】整合【SpringMVC】"
categories: ['未分类']
tags: ['Spring', 'Java']
artid: "146056314"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146056314
    alt: "Spring整合SpringMVC"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146056314
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146056314
cover: https://bing.ee123.net/img/rand?artid=146056314
image: https://bing.ee123.net/img/rand?artid=146056314
img: https://bing.ee123.net/img/rand?artid=146056314
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     【Spring】整合【SpringMVC】
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <h3>
     导入依赖
    </h3>
    <pre><code class="language-XML">&lt;dependency&gt;
      &lt;groupId&gt;org.springframework&lt;/groupId&gt;
      &lt;artifactId&gt;spring-core&lt;/artifactId&gt;
      &lt;version&gt;${spring.version}&lt;/version&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
      &lt;groupId&gt;org.springframework&lt;/groupId&gt;
      &lt;artifactId&gt;spring-context&lt;/artifactId&gt;
      &lt;version&gt;${spring.version}&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.springframework&lt;/groupId&gt;
      &lt;artifactId&gt;spring-web&lt;/artifactId&gt;
      &lt;version&gt;${spring.version}&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.springframework&lt;/groupId&gt;
      &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;
      &lt;version&gt;${spring.version}&lt;/version&gt;
 &lt;/dependency&gt;
&lt;dependency&gt;
      &lt;groupId&gt;javax.servlet&lt;/groupId&gt;
      &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;
      &lt;version&gt;4.0.1&lt;/version&gt;
      &lt;scope&gt;provided&lt;/scope&gt;
&lt;/dependency&gt;
&lt;!--Jackson--&gt;
&lt;dependency&gt;
      &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;
      &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;
      &lt;version&gt;2.13.4&lt;/version&gt;
 &lt;/dependency&gt;</code></pre>
    <h3>
     配置SpringMVC
    </h3>
    <pre><code class="language-XML">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;web-app xmlns="https://jakarta.ee/xml/ns/jakartaee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="https://jakarta.ee/xml/ns/jakartaee
                      https://jakarta.ee/xml/ns/jakartaee/web-app_5_0.xsd"
         version="5.0"&gt;
  &lt;!--配置监听器，监听器的作用是监听Servlet容器启动时创建Spring容器--&gt;
  &lt;listener&gt;
    &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;
  &lt;/listener&gt;
  &lt;context-param&gt;
    &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;
    &lt;param-value&gt;classpath:spring.xml&lt;/param-value&gt;
  &lt;/context-param&gt;
  &lt;!--配置DispatcherServlet，该Servlet有两个作用：--&gt;
  &lt;!--1：对于项目的所有请求先到达该Servlet，然后由该Servlet统一分发或路由--&gt;
  &lt;!--2: 创建Web环境下Spring容器--&gt;
  &lt;servlet&gt;
    &lt;servlet-name&gt;dispatcher&lt;/servlet-name&gt;
    &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;
    &lt;init-param&gt;  
      &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;
      &lt;param-value&gt;classpath:spring-mvc.xml&lt;/param-value&gt;
    &lt;/init-param&gt;
  &lt;/servlet&gt;
  &lt;servlet-mapping&gt;
    &lt;servlet-name&gt;dispatcher&lt;/servlet-name&gt;
    &lt;url-pattern&gt;/&lt;/url-pattern&gt;
  &lt;/servlet-mapping&gt;
  &lt;!--【可选】配置字符编码过滤器--&gt;
  &lt;filter&gt;
    &lt;filter-name&gt;characterFilter&lt;/filter-name&gt;
    &lt;filter-class&gt;org.springframework.web.filter.CharacterEncodingFilter&lt;/filter-class&gt;
  &lt;/filter&gt;
  &lt;filter-mapping&gt;
    &lt;filter-name&gt;characterFilter&lt;/filter-name&gt;
    &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
  &lt;/filter-mapping&gt;
&lt;/web-app&gt;</code></pre>
    <p>
     【注意】配置DispatcherServlet时，如果不指定配置文件，SpringMVC会在WEB-INF目录下寻找以servlet-name中配置的名称加-servlet寻找配置文件，例如：servlet-name中配置了名称为dispatcher，SpringMVC会寻找名称为dispatcher-servlet.xml的配置文件，通常情况下，需要指定固定位置的固定配置文件，如上例中所示。
    </p>
    <h3>
     SpringMVC.XML
    </h3>
    <pre><code class="language-XML">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:mvc="http://www.springframework.org/schema/mvc"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/mvc https://www.springframework.org/schema/mvc/spring-mvc.xsd"&gt;
    &lt;context:component-scan base-package="cn.bytecollege.controller"/&gt;
    &lt;!--配置视图解析器，可以使用prefix指定页面的前缀，例如页面存放路径，使用Suffix执行后缀，通常指定页面的扩展名--&gt;
    &lt;bean name="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver"&gt;
        &lt;property name="prefix" value="/WEB-INF/"/&gt;
        &lt;property name="suffix" value=".jsp"/&gt;
    &lt;/bean&gt;
    &lt;!--配置消息转换，也就是说当使用@ResponBody注解时，需要此处的配置，并且需要导入Jackson依赖--&gt;
    &lt;mvc:annotation-driven&gt;
        &lt;mvc:message-converters&gt;
            &lt;bean class="org.springframework.http.converter.json.MappingJackson2HttpMessageConverter"&gt;
                &lt;property name="supportedMediaTypes"&gt;
                    &lt;list&gt;
                        &lt;value&gt;text/plain;charset=UTF-8&lt;/value&gt;
                        &lt;value&gt;text/html;charset=utf-8&lt;/value&gt;
                        &lt;value&gt;application/json&lt;/value&gt;
                    &lt;/list&gt;
                &lt;/property&gt;
            &lt;/bean&gt;
        &lt;/mvc:message-converters&gt;
    &lt;/mvc:annotation-driven&gt;
    &lt;!--
        mapping:静态资源的请求路径
        location:静态资源存放的本地路径
    --&gt;
    &lt;mvc:resources mapping="/static/**" location="/WEB-INF/static/"/&gt;
&lt;/beans&gt;</code></pre>
    <h3>
     SpringMVC常用注解
    </h3>
    <h4>
     @Controller
    </h4>
    <p>
     该注解标注在控制器上，表明该类可以接收请求，具体的请求由类中的方法处理。
    </p>
    <h4>
     @RequestMapping
    </h4>
    <pre><code class="language-java">package org.springframework.web.bind.annotation;
​
import java.lang.annotation.Documented;
import java.lang.annotation.ElementType;
import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;
import java.lang.annotation.Target;
import org.springframework.core.annotation.AliasFor;
​
@Target({ElementType.TYPE, ElementType.METHOD})
@Retention(RetentionPolicy.RUNTIME)
@Documented
@Mapping
public @interface RequestMapping {
    String name() default "";
    //该方法或者该类的请求路径
    @AliasFor("path")
    String[] value() default {};
    //等价于value
    @AliasFor("value")
    String[] path() default {};
    //设置接收的请求方式，如果不配置该属性，则可以接收所有类型的请求， 如果配置，则只能接收指定类型的请求
    RequestMethod[] method() default {};
    //必须携带固定的参数才可以处理请求例如：name=admin
    String[] params() default {};
    //响应头中必须包含固定参数才可以处理请求
    String[] headers() default {};
    //请求数据类型是指定类型的请求可以处理
    String[] consumes() default {};
    //
    String[] produces() default {};
}</code></pre>
    <p>
     通常，可以使用该注解的替代注解，常用的有：
    </p>
    <ul>
     <li>
      <p>
       @GetMapping
      </p>
     </li>
     <li>
      <p>
       @PostMapping
      </p>
     </li>
    </ul>
    <table>
     <thead>
      <tr>
       <th>
        属性
       </th>
       <th>
        类型
       </th>
       <th>
        是否必要
       </th>
       <th>
        说明
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        value
       </td>
       <td>
        String[]
       </td>
       <td>
        否
       </td>
       <td>
        用于将指定请求的地址映射到方法
       </td>
      </tr>
      <tr>
       <td>
        name
       </td>
       <td>
        String
       </td>
       <td>
        否
       </td>
       <td>
        给映射地址指定一个别名
       </td>
      </tr>
      <tr>
       <td>
        method
       </td>
       <td>
        RequestMethod[]
       </td>
       <td>
        否
       </td>
       <td>
        映射指定请求的方法，包括GET、POST、HEAD、OPTIONS、PUT、PATCH、DELETE、TRACE
       </td>
      </tr>
      <tr>
       <td>
        consumes
       </td>
       <td>
        String[]
       </td>
       <td>
        否
       </td>
       <td>
        指定处理请求的提交内容（Content-Type）,例如：application/json
       </td>
      </tr>
      <tr>
       <td>
        produces
       </td>
       <td>
        String[]
       </td>
       <td>
        否
       </td>
       <td>
        指定返回的内容类型，返回的内容类型必须是request请求头中所包含的类型
       </td>
      </tr>
      <tr>
       <td>
        params
       </td>
       <td>
        String[]
       </td>
       <td>
        否
       </td>
       <td>
        指定request中必须包含某些参数值时，才让该方法处理请求
       </td>
      </tr>
      <tr>
       <td>
        headers
       </td>
       <td>
        String[]
       </td>
       <td>
        否
       </td>
       <td>
        指定request中必须包含某些指定的header值，才能让该方法处理请求
       </td>
      </tr>
      <tr>
       <td>
        path
       </td>
       <td>
        String[]
       </td>
       <td>
        否
       </td>
       <td>
        用于将指定请求的地址映射到方法
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     @RequestMapping 不但支持标准的 URL，还支持 Ant 风格（?、*和**字符）的和带{xxx}占位符的URL。以下 URL 都是合法的。
    </p>
    <ul>
     <li>
      <p>
       /user/*/createUser∶ 匹配/user/aa/createUser、/user/bbb/createUser等 URL。
      </p>
     </li>
     <li>
      <p>
       /user/**/createUser∶匹配/user/createUser、/user/aaa/bbb/createUser 等URL。
      </p>
     </li>
     <li>
      <p>
       /user/createUser??∶匹配/user/createUseraa、/user/createUserbb等 URL。
      </p>
     </li>
     <li>
      <p>
       /user/{userld}∶匹配 user/123、user/456 等URL。
      </p>
     </li>
     <li>
      <p>
       /user/**/{userId}∶匹配 user/aa/bbb/123、user/aaa/456等 URL。
      </p>
     </li>
     <li>
      <p>
       company/{companyld}/user/{userId}/detail∶匹配 company/123/user/456/detail 等 URL。
      </p>
     </li>
    </ul>
    <h4>
     @RequestParam
    </h4>
    <p>
     该注解的作用是将请求参数和Controller方法参数进行绑定
    </p>
    <pre><code class="language-java">@Target(ElementType.PARAMETER)
@Retention(RetentionPolicy.RUNTIME)
@Documented
public @interface RequestParam {
​
   /**
    * 将前端请求参数的名称(即请求参数的name或者key)与方法参数绑定
    * Alias for {@link #name}.
    */
   @AliasFor("name")
   String value() default "";
   
   /**
    * The name of the request parameter to bind to.
    * @since 4.2
    */
   @AliasFor("value")
   String name() default "";
​
   /**
    * Whether the parameter is required.
    * &lt;p&gt;Defaults to {@code true}, leading to an exception being thrown
    * if the parameter is missing in the request. Switch this to
    * {@code false} if you prefer a {@code null} value if the parameter is
    * not present in the request.
    * &lt;p&gt;Alternatively, provide a {@link #defaultValue}, which implicitly
    * sets this flag to {@code false}.
    * 如果不传该参数则抛出异常
    */
   boolean required() default true;
​
   /**
    * The default value to use as a fallback when the request parameter is
    * not provided or has an empty value.
    * &lt;p&gt;Supplying a default value implicitly sets {@link #required} to
    * {@code false}.
    */
   String defaultValue() default ValueConstants.DEFAULT_NONE;
​
}</code></pre>
    <h4>
     @PathVariable
    </h4>
    <p>
     该注解的作用时将请求路径中的参数绑定到Controller方法参数
    </p>
    <pre><code class="language-java">@Target(ElementType.PARAMETER)
@Retention(RetentionPolicy.RUNTIME)
@Documented
public @interface PathVariable {
​
   /**
    * 请求路径中参数的名称
    * Alias for {@link #name}.
    */
   @AliasFor("name")
   String value() default "";
​
   /**
    * The name of the path variable to bind to.
    * @since 4.3.3
    * 作用同value
    */
   @AliasFor("value")
   String name() default "";
​
   /**
    * Whether the path variable is required.
    * &lt;p&gt;Defaults to {@code true}, leading to an exception being thrown if the path
    * variable is missing in the incoming request. Switch this to {@code false} if
    * you prefer a {@code null} or Java 8 {@code java.util.Optional} in this case.
    * e.g. on a {@code ModelAttribute} method which serves for different requests.
    * @since 4.3.3
    * 是否必须传递该参数，如果为null则抛出异常
    */
   boolean required() default true;
​
}</code></pre>
    <p>
    </p>
    <h4>
     @ResonseBody
    </h4>
    <p>
     将方法的返回值转成Json格式的字符串或者Json对象
    </p>
    <h4>
     @RequestBody
    </h4>
    <p>
     将前端发送的JSON格式的数据绑定到方法参数的对象中
    </p>
    <h4>
     @SessionAttribute
    </h4>
    <p>
     获取使用value或者name指定名称的在Session中保存的数据
    </p>
    <h4>
     @CookieValue
    </h4>
    <p>
     获取使用value或者name指定名称的在Cookie中保存的数据
    </p>
    <h2>
     Spring整合MyBatis
    </h2>
    <h3>
     导入依赖
    </h3>
    <pre><code class="language-XML">&lt;!-- https://mvnrepository.com/artifact/org.mybatis/mybatis-spring --&gt;
&lt;dependency&gt;
  &lt;groupId&gt;org.mybatis&lt;/groupId&gt;
  &lt;artifactId&gt;mybatis-spring&lt;/artifactId&gt;
  &lt;version&gt;2.0.7&lt;/version&gt;
&lt;/dependency&gt;
&lt;!-- https://mvnrepository.com/artifact/org.mybatis/mybatis --&gt;
&lt;dependency&gt;
  &lt;groupId&gt;org.mybatis&lt;/groupId&gt;
  &lt;artifactId&gt;mybatis&lt;/artifactId&gt;
  &lt;version&gt;3.5.9&lt;/version&gt;
&lt;/dependency&gt;
&lt;!-- https://mvnrepository.com/artifact/mysql/mysql-connector-java --&gt;
&lt;dependency&gt;
  &lt;groupId&gt;mysql&lt;/groupId&gt;
  &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;
  &lt;version&gt;8.0.28&lt;/version&gt;
&lt;/dependency&gt;
&lt;!-- https://mvnrepository.com/artifact/com.alibaba/druid --&gt;
&lt;dependency&gt;
  &lt;groupId&gt;com.alibaba&lt;/groupId&gt;
  &lt;artifactId&gt;druid&lt;/artifactId&gt;
  &lt;version&gt;1.2.11&lt;/version&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
      &lt;groupId&gt;org.springframework&lt;/groupId&gt;
      &lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt;
      &lt;version&gt;${spring.version}&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
    <h3>
     配置Mybatis
    </h3>
    <pre><code class="language-XML">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd"&gt;
    &lt;!--配置扫描包，实例化标注了注解的类--&gt;
    &lt;context:component-scan base-package="cn.bytecollege.service"/&gt;
    &lt;!--加载数据库配置文件--&gt;
    &lt;context:property-placeholder location="classpath:data.properties"/&gt;
    &lt;!--配置数据源--&gt;
    &lt;bean name="dataSource" class="com.alibaba.druid.pool.DruidDataSource" init-method="init" destroy-method="close"&gt;
        &lt;property name="url" value="${url}"/&gt;
        &lt;property name="username" value="${user}"/&gt;
        &lt;property name="password" value="${password}"/&gt;
​
​
        &lt;!-- 配置初始化大小、最小、最大 --&gt;
        &lt;property name="initialSize" value="5" /&gt;
        &lt;property name="minIdle" value="10" /&gt;
        &lt;property name="maxActive" value="20" /&gt;
​
        &lt;!-- 配置获取连接等待超时的时间 --&gt;
        &lt;property name="maxWait" value="6000" /&gt;
​
        &lt;!-- 配置间隔多久才进行一次检测，检测需要关闭的空闲连接，单位是毫秒 --&gt;
        &lt;property name="timeBetweenEvictionRunsMillis" value="2000" /&gt;
​
        &lt;!-- 配置一个连接在池中最小生存的时间，单位是毫秒 --&gt;
        &lt;property name="minEvictableIdleTimeMillis" value="600000" /&gt;
        &lt;property name="maxEvictableIdleTimeMillis" value="900000" /&gt;
​
        &lt;property name="validationQuery" value="select 1" /&gt;
        &lt;property name="testWhileIdle" value="true" /&gt;
        &lt;property name="testOnBorrow" value="false" /&gt;
        &lt;property name="testOnReturn" value="false" /&gt;
​
        &lt;property name="keepAlive" value="true" /&gt;
        &lt;property name="phyMaxUseCount" value="1000" /&gt;
​
        &lt;!-- 配置监控统计拦截的filters --&gt;
        &lt;property name="filters" value="stat" /&gt;
    &lt;/bean&gt;
    &lt;!--配置SqlSessionFactoryBean--&gt;
    &lt;bean class="org.mybatis.spring.SqlSessionFactoryBean"&gt;
        &lt;!--配置数据源--&gt;
        &lt;property name="dataSource" ref="dataSource"/&gt;
        &lt;!--配置Mybatis的配置文件--&gt;
        &lt;property name="configLocation" value="classpath:mybatis-config.xml"/&gt;
        &lt;!--配置Mapper映射器的位置--&gt;
        &lt;property name="mapperLocations" value="classpath:mapper/*.xml"/&gt;
    &lt;/bean&gt;
    &lt;!--配置Mapper接口的位置--&gt;
    &lt;bean class="org.mybatis.spring.mapper.MapperScannerConfigurer"&gt;
        &lt;property name="basePackage" value="cn.bytecollege.mapper"&gt;&lt;/property&gt;
    &lt;/bean&gt;
&lt;/beans&gt;</code></pre>
    <p>
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f34353830343338342f:61727469636c652f64657461696c732f313436303536333134" class_="artid" style="display:none">
 </p>
</div>


