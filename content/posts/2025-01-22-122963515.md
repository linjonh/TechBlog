---
arturl_encode: "68747470733a2f2f62:6c6f672e6373646e2e6e65742f71715f33323139353830352f:61727469636c652f64657461696c732f313232393633353135"
layout: post
title: "å°ç¨‹åºäº‘å¼€å‘-ä¸Šä¼ å›¾ç‰‡åˆ°äº‘å­˜å‚¨"
date: 2025-01-22 14:14:17 +08:00
description: "åœ¨å­¦ä¹ äº†å°ç¨‹åºäº‘å¼€å‘åï¼Œé‡åˆ°äº†å¼€å‘ä¸­å¸¸è§çš„å›¾ç‰‡ä¸Šä¼ ï¼Œä»Šå¤©ç®€å•çš„è®°å½•æ€»ç»“ä¸‹åœ¨äº‘å¼€å‘ä¸­å¦‚ä½•å®ç°å›¾ç‰‡ä¸Šä¼ åˆ°"
keywords: "å¾®ä¿¡å°ç¨‹åºä¸Šä¼ å›¾ç‰‡åˆ°äº‘å­˜å‚¨"
categories: ['å°ç¨‹åº']
tags: ['å¾®ä¿¡å°ç¨‹åº', 'å°ç¨‹åº']
artid: "122963515"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=122963515
    alt: "å°ç¨‹åºäº‘å¼€å‘-ä¸Šä¼ å›¾ç‰‡åˆ°äº‘å­˜å‚¨"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=122963515
featuredImagePreview: https://bing.ee123.net/img/rand?artid=122963515
---

# å°ç¨‹åºäº‘å¼€å‘ ä¸Šä¼ å›¾ç‰‡åˆ°äº‘å­˜å‚¨

åœ¨å­¦ä¹ äº†å°ç¨‹åºäº‘å¼€å‘åï¼Œé‡åˆ°äº†å¼€å‘ä¸­å¸¸è§çš„å›¾ç‰‡ä¸Šä¼ ï¼Œä»Šå¤©ç®€å•çš„è®°å½•æ€»ç»“ä¸‹åœ¨äº‘å¼€å‘ä¸­å¦‚ä½•å®ç°å›¾ç‰‡ä¸Šä¼ åˆ°äº‘å­˜å‚¨ä¸­ã€‚

åœ¨è¿™é‡Œç®€å•çš„åˆ†äº†ä¸¤ç§æƒ…å†µï¼Œä¸€ç§æ˜¯é€‰æ‹©å›¾ç‰‡åç›´æ¥ä¸Šä¼ åˆ°äº‘å­˜å‚¨ä¸­ï¼Œåƒæ›¿æ¢å¤´åƒä¹‹ç±»çš„å°±æ˜¯ç¬¦åˆè¿™ç§æƒ…å†µã€‚ç¬¬äºŒç§æ˜¯é€‰æ‹©å›¾ç‰‡åï¼Œç‚¹å‡»æäº¤æŒ‰é’®å†ä¸Šä¼ åˆ°äº‘å­˜å‚¨ä¸­ï¼Œå°±åƒæœ‹å‹åœˆå‘å¸ƒæˆ–è¡¨å•ä¸­æ·»åŠ å›¾ç‰‡çš„ä¸€æ · ç‚¹å‡»å‘å¸ƒæŒ‰é’®æ‰å¯ä»¥ä¸Šä¼ ã€‚

#### æ¥ä¸‹æ¥æˆ‘ä»¬å…ˆçœ‹ç¬¬ä¸€ç§æƒ…å†µï¼Œé€‰æ‹©å›¾ç‰‡ç›´æ¥ä¸Šä¼ åˆ°äº‘å­˜å‚¨ä¸­ï¼š

æ•ˆæœå¦‚ä¸‹ï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/80544da15613cb08eefe9e5387abd2f5.png)

ä»£ç ï¼š

```html
<view>
         
  <image src="{{images}}"></image>
           
</view>
<view bindtap="upload">ä¸Šä¼ </view>
```

```javascript
upload(){
    let that=this;
    wx.chooseImage({//å¼‚æ­¥æ–¹æ³•
      count: 9,//æœ€å¤šé€‰æ‹©å›¾ç‰‡æ•°é‡
      sizeType:['original', 'compressed'],//é€‰æ‹©çš„å›¾ç‰‡å°ºå¯¸ åŸå›¾ï¼Œå‹ç¼©å›¾
      sourceType:['album','camera'],//ç›¸å†Œé€‰å›¾ï¼Œç›¸æœºæ‹ç…§
      success(res){
        //tempFilePathså¯ä»¥ä½œä¸ºå›¾ç‰‡æ ‡ç­¾srcå±æ€§
        const tempFilePaths = res.tempFilePaths
         console.log("é€‰æ‹©æˆåŠŸ",res)

         for(let i=0; i < tempFilePaths.length; i++){//å¤šä¸ªå›¾ç‰‡çš„å¾ªç¯ä¸Šä¼ 
          wx.cloud.uploadFile({//ä¸Šä¼ è‡³å¾®ä¿¡äº‘å­˜å‚¨
            cloudPath:'myImage/' + new Date().getTime() + "_" +  Math.floor(Math.random()*1000) + ".jpg",//ä½¿ç”¨æ—¶é—´æˆ³åŠ éšæœºæ•°ä½œä¸ºä¸Šä¼ è‡³äº‘ç«¯çš„å›¾ç‰‡åç§°
            filePath:tempFilePaths[i],// æœ¬åœ°æ–‡ä»¶è·¯å¾„
            success: res => {
              // è¿”å›æ–‡ä»¶ ID
              console.log("ä¸Šä¼ æˆåŠŸ",res.fileID)
              that.setData({
                images:res.fileID//è·å–ä¸Šä¼ äº‘ç«¯çš„å›¾ç‰‡åœ¨é¡µé¢ä¸Šæ˜¾ç¤º
              })
              wx.showToast({
                title: 'ä¸Šä¼ æˆåŠŸ',
              })
            }
          })
        }

      }
    })
  },
```

ä¸Šä¼ åï¼Œç‚¹å‡»äº‘å­˜å‚¨é¢æ¿åˆ·æ–°å°±èƒ½çœ‹åˆ°æ–°ä¸Šä¼ çš„å›¾ç‰‡

![](https://i-blog.csdnimg.cn/blog_migrate/5da0926c83a83611bd5eb39a4d10687a.png)

#### 

#### æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹ä¸‹ç¬¬äºŒç§æƒ…å†µï¼Œå½“é€‰æ‹©å›¾ç‰‡åï¼Œç‚¹å‡»æäº¤æŒ‰é’®å†ä¸Šä¼ åˆ°äº‘å­˜å‚¨ä¸­ã€‚

æ•ˆæœå›¾å¦‚ä¸‹ï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/8a72e8224873896738471e10462c0843.png)

![](https://i-blog.csdnimg.cn/blog_migrate/d72e43af88d9b9ba2f4595c675ce5888.png)

ä»£ç å¦‚ä¸‹ï¼š

```javascript
<form action="" bindsubmit="addBtn">
<view>
      
   <view class="imgFlex">
     <block wx:for="{{images}}" wx:key="*this" >
        <view data-index="{{index}}" class="item_img">
          <image src="{{item}}"></image>
        </view>
      </block>
    </view>
    <view bindtap="upload">ä¸Šä¼ </view>
</view>
 <button type="primary" form-type="submit">æäº¤</button>
 <button type="primary" form-type="reset">é‡ç½®</button>
</form>
```

```javascript
//index.js
//import WxValidate from '../../utils/WxValidate';
const app = getApp()
const db = wx.cloud.database()//è°ƒç”¨é»˜è®¤äº‘ç¯å¢ƒçš„æ•°æ®åº“å¼•ç”¨
Page({
  data: {
    images:[],//é€‰æ‹©å›¾ç‰‡
    images_success: [],//ä¸Šä¼ äº‘å­˜å‚¨åçš„äº‘å­˜å‚¨åœ°å€æ•°ç»„
    images_success_size:0,//å›¾ç‰‡ä¸Šä¼ æˆåŠŸçš„æ•°é‡
  },
  onLoad(){
  
},
 
  upload(){
    let that=this;
    wx.chooseImage({//å¼‚æ­¥æ–¹æ³•
      count: 9,//æœ€å¤šé€‰æ‹©å›¾ç‰‡æ•°é‡
      sizeType:['original', 'compressed'],//é€‰æ‹©çš„å›¾ç‰‡å°ºå¯¸ åŸå›¾ï¼Œå‹ç¼©å›¾
      sourceType:['album','camera'],//ç›¸å†Œé€‰å›¾ï¼Œç›¸æœºæ‹ç…§
      success(res){
        //const tempFilePaths = res.tempFilePaths
        that.setData({
          images: res.tempFilePaths
         });
         console.log("é€‰æ‹©æˆåŠŸ",res)
      }
    })
  },
  
  uploadImage(index){
    let that=this
      wx.cloud.uploadFile({//ä¸Šä¼ è‡³å¾®ä¿¡äº‘å­˜å‚¨
        cloudPath:'myImage/' + new Date().getTime() + "_" +  Math.floor(Math.random()*1000) + ".jpg",//ä½¿ç”¨æ—¶é—´æˆ³åŠ éšæœºæ•°ç»™å›¾ç‰‡å‘½å
        filePath:that.data.images[index],// æœ¬åœ°æ–‡ä»¶è·¯å¾„
        success: res => {
          // è¿”å›æ–‡ä»¶ ID
          console.log("ä¸Šä¼ æˆåŠŸ",res.fileID)
          that.data.images_success[index] = res.fileID;
          that.data.images_success_size = that.data.images_success_size+1;

          if(that.data.images_success_size == that.data.images.length){
            console.log("ä¸Šä¼ æˆåŠŸï¼š", that.data.images_success)
          } else {
            that.uploadImage(index+1)
          }
        },
        fail: err =>{
          that.setData({
            images_success:[],
            images_success_size:0
          })
          wx.showToast({
            icon:'none',
            title: 'ä¸Šä¼ å¤±è´¥ï¼Œè¯·é‡æ–°ä¸Šä¼ ',
          })
        }
      })

  },
 
 //æäº¤è¡¨å•æ·»åŠ åˆ°æ•°æ®åº“
 addBtn: function(e){
  let that=this;
  if(that.data.images.length > 0){//1ã€åˆ¤æ–­æ˜¯å¦æœ‰å›¾ç‰‡
    that.setData({
      //3ã€ç»™ä¸Šä¼ å›¾ç‰‡åˆå§‹åŒ–ä¸€ä¸ªé•¿åº¦ï¼Œä¸Šä¼ æˆåŠŸçš„æ•°ç»„å’Œå·²æœ‰çš„æ•°ç»„ä¸€è‡´
      images_success:that.data.images
    })
    that.uploadImage(0)//2ã€æœ‰å›¾ç‰‡æ—¶å…ˆä¸Šä¼ ç¬¬ä¸€å¼ 
    }
   
    
 },
  
})

```

ä»¥ä¸Šå°±æ˜¯å…³äºå°ç¨‹åº å›¾ç‰‡ä¸Šä¼ åˆ°äº‘å­˜å‚¨ä¸­çš„ä»£ç ï¼Œä»£ç ä¸­éƒ½æœ‰å†™æ³¨é‡Šï¼Œè¿™é‡Œå°±ä¸å¤šåšè§£é‡Šäº†ï¼Œå®è·µç¬¬ä¸€ã€‚ç¬¬ä¸€æ¬¡å°è¯•å†™çš„ï¼Œæ¬¢è¿åŒå­¦ä»¬ç‚¹è¯„ğŸ˜œ