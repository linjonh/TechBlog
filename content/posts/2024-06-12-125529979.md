---
arturl_encode: "68747470733a2f2f626c6f:672e6373646e2e6e65742f6879735f5f68616e64736f6d652f:61727469636c652f64657461696c732f313235353239393739"
layout: post
title: "软件开发中的上游和下游"
date: 2024-06-12 19:42:32 +0800
description: "在最近一段时间，我开始在软件开发环境中接触到 “上游” 和 “下游” 这两个词，常常迷惑不解。每次我"
keywords: "软件开发上游下游怎么分"
categories: ['笔记']
tags: ['软件工程']
artid: "125529979"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=125529979
    alt: "软件开发中的上游和下游"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=125529979
featuredImagePreview: https://bing.ee123.net/img/rand?artid=125529979
---

# 软件开发中的上游和下游

听了腾讯犀牛鸟王佳对开源的讲解中，对其中的专业术语上游（upstream）和下游（downstream）不理解，看了这篇blog理解了特此转载记录。

看了以下blog后个人理解：自然界上水是高处往低处流，低处的水动能比高处的动能高，抽象成价值，那么价值（动能）相对高的就是下游，反之为上游。

> [What is Upstream and Downstream in Software Development](https://link.segmentfault.com/?enc=hczvRA%2FP3uLo5H1XiauVrg%3D%3D.WMwbZplf4Trf7WByZH2lX%2B2H67ou2rfhyvdkHhLfcG8LEhHrbGxu5bLAchJ9Opbl "What is Upstream and Downstream in Software Development")
> 的中文翻译版本。

在最近一段时间，我开始在软件开发环境中接触到 “上游” 和 “下游” 这两个词，常常迷惑不解。每次我都必须查一下它的含义，因此决定将它们写成blog来帮助理解。

### 生产过程中的上游和下游

---

让我们从一个简单的生产过程开始，尽管它与软件开发无关，但是我们可以在此基础上定义软件开发的上游和下游。（活动图，实心表示开始，中间一点的表示结束）

![](https://i-blog.csdnimg.cn/blog_migrate/3c379f6852feae7b1b5c3b9ff37952b2.png)

在上面的例子中，我们有三个步骤:

1. 收集零件
2. 组装零件
3. 绘制装配体

上面的生产过程与河流非常相似，因此很容易理解
**随着流程从一步到下一步，逐步向"下游"移动**

我们可以推断以下规则:

1. **依赖规则**
   : 每个当前的项目都依赖于上游的所有项目
2. **增值规则**
   : 在向下游移动的过程中，每一步都为产品增加更多价值

现在，让我们尝试将这些规则应用于不同的软件开发环境。

### 软件依赖中的上游和下游

---

大多数软件组件都依赖于其他组件。那么什么是上游依赖和下游依赖呢？

如图所示:

![](https://i-blog.csdnimg.cn/blog_migrate/5a8cba5f1b95967340bd84b4cdf38426.png)

组件 C 依赖于组件 B，而组件 B 又依赖于组件 A。

应用
**依赖规则**
，我们可以肯定地说组件 A 是组件 B 的上游，而组件 B 是组件 C 的上游（即使箭头指向另一个方向）。

在这里应用
**价值规则**
有点抽象，但我们可以说组件 C 拥有最大的价值，因为它“导入”了组件 B 和 A 的所有特征，并将自己的价值添加到这些特征中，使其成为下游组件。

### 上游和下游开源项目

---

另一个经常使用“上游”和“下游”这两个词的环境是开源开发。它实际上与上面讨论的组件依赖关系非常相似

考虑项目 A 和 B，其中 A 是原始项目，B 是 A 的分支：

![](https://i-blog.csdnimg.cn/blog_migrate/c4f4c6f411f9051e7b0073966c132328.png)

这是开源项目中相当常见的开发风格：我们创建项目的分支，修复错误或在该分支中添加功能，然后向原始项目提交补丁。

在这种情况下，
**依赖规则**
使项目 A 成为上游项目，因为它可以在没有项目 B 的情况下很好地生存，但如果没有项目 A（原始项目），项目 B（分叉）甚至不会存在。

**价值规则**
在这里也适用：项目 B 添加了新功能或错误修复，它为原始项目 A 增加了价值。

因此，每次我们向开源项目贡献补丁时，我们都可以说
**我们已经向上游发送了补丁**
。

### 微服务架构中的上下游

---

在由微服务（或者只是老式分布式服务）组成的系统中，也有关于上游和下游服务的讨论。

![](https://i-blog.csdnimg.cn/blog_migrate/e7cbbf8d2fead4c5e95f1223aef86288.png)

**依赖规则**
和
**价值规则**
也适用于这种情况

服务 B 是上游服务，因为服务 A 依赖于它。服务 A 是下游服务，因为它增加了服务 B 的价值。

请注意，
**在这种情况下上游和下游的定义中的“流”**
不是通过服务 A 进入系统的数据流，而是
**数据流系统一直到面向用户的服务**
。

服务离用户（或任何其他最终消费者）越近，它离下游越远。

### 结论

在使用“上游”和“下游”概念的任何上下文中，我们可以应用两个简单的规则来找出哪个项目是另一个项目的上游或下游。

**如果一个项目为另一个项目增加价值或以任何其他方式依赖它，它肯定是下游。**