---
layout: post
title: "HarmonyOS-2.0应用开发实战教程"
date: 2022-02-21 21:53:47 +0800
description: "学习B站全网首套鸿蒙HarmonyOS 2.0应用开发实战教程 的笔记_鸿蒙2应用开发"
keywords: "鸿蒙HarmonyOS,应用开发,Ability框架"
categories: ['鸿蒙应用']
tags: ['华为', 'Harmonyos']
artid: "123056631"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=123056631
    alt: "HarmonyOS-2.0应用开发实战教程"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=123056631
featuredImagePreview: https://bing.ee123.net/img/rand?artid=123056631
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     HarmonyOS 2.0应用开发实战教程
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-light" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <blockquote>
     <p>
      <strong>
       PS：学习B站全网首套鸿蒙HarmonyOS 2.0应用开发实战教程 的笔记
       <br/>
       地址：
       <a href="https://www.bilibili.com/video/BV1DM4y1G7MN" rel="nofollow">
        B站全网首套鸿蒙HarmonyOS 2.0应用开发实战教程
       </a>
      </strong>
     </p>
    </blockquote>
    <hr/>
    <p>
    </p>
    <div class="toc">
     <h4>
      《锋迷商城》HarmonyOS应⽤开发
     </h4>
     <ul>
      <li>
       <ul>
        <li>
         <a href="#_4" rel="nofollow">
          ⼀、移动应⽤开发的介绍
         </a>
        </li>
        <li>
         <a href="#HarmonyOS_15" rel="nofollow">
          ⼆、HarmonyOS介绍
         </a>
        </li>
        <li>
         <ul>
          <li>
           <a href="#21__19" rel="nofollow">
            2.1 系统的定义
           </a>
          </li>
          <li>
           <ul>
            <li>
             <a href="#211__21" rel="nofollow">
              2.1.1 系统的定位
             </a>
            </li>
            <li>
             <a href="#212__29" rel="nofollow">
              2.1.2 系统架构
             </a>
            </li>
           </ul>
          </li>
          <li>
           <a href="#22__40" rel="nofollow">
            2.2 鸿蒙发展史
           </a>
          </li>
          <li>
           <ul>
            <li>
             <a href="#221__42" rel="nofollow">
              2.2.1 “鸿蒙”
             </a>
            </li>
            <li>
             <a href="#222__46" rel="nofollow">
              2.2.2 发展史
             </a>
            </li>
           </ul>
          </li>
          <li>
           <a href="#23__55" rel="nofollow">
            2.3 鸿蒙与安卓的区别
           </a>
          </li>
          <li>
           <ul>
            <li>
             <a href="#231__57" rel="nofollow">
              2.3.1 内核
             </a>
            </li>
            <li>
             <a href="#232__62" rel="nofollow">
              2.3.2 运⾏效率
             </a>
            </li>
           </ul>
          </li>
          <li>
           <a href="#24____70" rel="nofollow">
            2.4 技术特性 与 系统安全
           </a>
          </li>
          <li>
           <ul>
            <li>
             <a href="#241__72" rel="nofollow">
              2.4.1 技术特性
             </a>
            </li>
            <li>
             <a href="#242__78" rel="nofollow">
              2.4.2 系统安全
             </a>
            </li>
           </ul>
          </li>
         </ul>
        </li>
        <li>
         <a href="#_84" rel="nofollow">
          三、第⼀个鸿蒙应⽤
         </a>
        </li>
        <li>
         <ul>
          <li>
           <a href="#31__86" rel="nofollow">
            3.1 开发准备
           </a>
          </li>
          <li>
           <ul>
            <li>
             <a href="#311_Java_88" rel="nofollow">
              3.1.1 开发环境搭建（Java）
             </a>
            </li>
            <li>
             <a href="#312__118" rel="nofollow">
              3.1.2 注册华为帐号
             </a>
            </li>
           </ul>
          </li>
          <li>
           <a href="#32__122" rel="nofollow">
            3.2 创建鸿蒙应⽤
           </a>
          </li>
          <li>
           <a href="#33__129" rel="nofollow">
            3.3 鸿蒙应⽤⽬录结构
           </a>
          </li>
          <li>
           <a href="#34__134" rel="nofollow">
            3.4 运⾏项⽬
           </a>
          </li>
          <li>
           <ul>
            <li>
             <a href="#341__136" rel="nofollow">
              3.4.1 启动鸿蒙模拟器
             </a>
            </li>
           </ul>
          </li>
          <li>
           <a href="#35__145" rel="nofollow">
            3.5 鸿蒙应⽤的启动流程
           </a>
          </li>
          <li>
           <ul>
            <li>
             <a href="#351_configjson_147" rel="nofollow">
              3.5.1 config.json
             </a>
            </li>
            <li>
             <a href="#352__170" rel="nofollow">
              3.5.2 应⽤启动流程
             </a>
            </li>
            <li>
             <a href="#353__195" rel="nofollow">
              3.5.3 你好，世界哪里来的
             </a>
            </li>
           </ul>
          </li>
         </ul>
        </li>
        <li>
         <a href="#Ability_200" rel="nofollow">
          四、Ability框架
         </a>
        </li>
        <li>
         <ul>
          <li>
           <a href="#41_Ability_202" rel="nofollow">
            4.1 Ability介绍
           </a>
          </li>
          <li>
           <a href="#42_PageAbility_226" rel="nofollow">
            4.2 PageAbility
           </a>
          </li>
          <li>
           <ul>
            <li>
             <a href="#421PageAbility_228" rel="nofollow">
              4.2.1PageAbility简介
             </a>
            </li>
            <li>
             <a href="#422_AbilitySlice_243" rel="nofollow">
              4.2.2 创建AbilitySlice
             </a>
            </li>
            <li>
             <a href="#423_PageAbility_297" rel="nofollow">
              4.2.3 PageAbility⽣命周期
             </a>
            </li>
            <li>
             <a href="#424_PageAbility_364" rel="nofollow">
              4.2.4 PageAbility⽣命周期
             </a>
            </li>
            <li>
             <ul>
              <li>
               <a href="#XML_383" rel="nofollow">
                **XML****⽅式渲染**
               </a>
              </li>
              <li>
               <a href="#Java_419" rel="nofollow">
                **Java⽅式渲染**
               </a>
              </li>
             </ul>
            </li>
           </ul>
          </li>
         </ul>
        </li>
       </ul>
      </li>
     </ul>
    </div>
    <p>
    </p>
    <h3>
     <a id="_4">
     </a>
     ⼀、移动应⽤开发的介绍
    </h3>
    <p>
     移动应⽤开发:
    </p>
    <ul>
     <li>
      Android
     </li>
     <li>
      IOS
     </li>
     <li>
      HarmonyOS （鸿蒙）
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/d1ab2f969aadf20fe607c4b4a9b6f4e3.png"/>
     </li>
    </ul>
    <h3>
     <a id="HarmonyOS_15">
     </a>
     ⼆、HarmonyOS介绍
    </h3>
    <p>
     <a href="https://developer.harmonyos.com/cn/documentation" rel="nofollow">
      文档概览-HarmonyOS应用开发官网
     </a>
    </p>
    <h4>
     <a id="21__19">
     </a>
     2.1 系统的定义
    </h4>
    <h5>
     <a id="211__21">
     </a>
     2.1.1 系统的定位
    </h5>
    <p>
     HarmonyOS有三⼤特征：
    </p>
    <ul>
     <li>
      搭载该操作系统的设备在系统层⾯融为⼀体、形成超级终端，让设备的硬件能⼒可以弹性 扩展，实现设备之间 硬件互助，资源共享。 对消费者⽽⾔，HarmonyOS能够将⽣活场景中的各类终端进⾏能⼒整合，实现不同终端 设备之间的快速连接、能⼒互助、资源共享，匹配合适的设备、提供流畅的全场景体验。
     </li>
     <li>
      ⾯向开发者，实现⼀次开发，多端部署。 对应⽤开发者⽽⾔，HarmonyOS采⽤了多种分布式技术，使应⽤开发与不同终端设备的 形态差异⽆关，从⽽让开发者能够聚焦上层业务逻辑，更加便捷、⾼效地开发应⽤。
     </li>
     <li>
      ⼀套操作系统可以满⾜不同能⼒的设备需求，实现统⼀OS，弹性部署。 对设备开发者⽽⾔，HarmonyOS采⽤了组件化的设计⽅案，可根据设备的资源能⼒和业 务特征灵活裁剪，满⾜不同形态终端设备对操作系统的要求。
     </li>
    </ul>
    <h5>
     <a id="212__29">
     </a>
     2.1.2 系统架构
    </h5>
    <p>
     <img alt="请添加图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/3c36aee85ac6023053bb056f491293ea.png"/>
    </p>
    <ul>
     <li>
      内核层：提供⼿机操作系统的基础能⼒。HarmonyOS采⽤多内核的系统设计，基于 Linux内核、LiteOS，使⽤了Linux的微内核（使⽤了Linux的最简功 能）
      <ul>
       <li>
        Linux内核： ⼿机操作系统的内核
       </li>
       <li>
        LiteOS内核：智能硬件的内核
       </li>
      </ul>
     </li>
     <li>
      系统服务层：HarmonyOS的核⼼能⼒集合，这些能⼒是有系统本身决定的，为我们应⽤ 开发提供了服务调⽤功能。系统服务层提供的能⼒是可以被我们开发的应⽤进⾏调⽤的。
     </li>
     <li>
      框架层：为HarmonyOS的应⽤开发提供了不同语⾔程序调⽤的接⼝
     </li>
    </ul>
    <h4>
     <a id="22__40">
     </a>
     2.2 鸿蒙发展史
    </h4>
    <h5>
     <a id="221__42">
     </a>
     2.2.1 “鸿蒙”
    </h5>
    <p>
     盘古开天辟地——⼀⽚混沌（鸿蒙时代） ⽴志要在⼿机系统的国产化道路上开天辟地
    </p>
    <h5>
     <a id="222__46">
     </a>
     2.2.2 发展史
    </h5>
    <ul>
     <li>
      2012年，华为开始规划智能操作系统“鸿蒙”
     </li>
     <li>
      2019年5⽉，华为申请“鸿蒙”商标
     </li>
     <li>
      2019年5⽉17⽇，发布鸿蒙系统
     </li>
     <li>
      2019年8⽉，鸿蒙正式版发布，实⾏开源
     </li>
     <li>
      2020年9⽉，鸿蒙2.0（beta）
     </li>
     <li>
      2021年6⽉2⽇晚上，华为线上发布HarmonyOS 2.0—⼿机
     </li>
    </ul>
    <h4>
     <a id="23__55">
     </a>
     2.3 鸿蒙与安卓的区别
    </h4>
    <h5>
     <a id="231__57">
     </a>
     2.3.1 内核
    </h5>
    <ul>
     <li>
      安卓：基于Linux的内核设计，对Linux的依赖很⼤（也就是说Android操作系统⼤多数功能都 是依赖Linux）
     </li>
     <li>
      鸿蒙：采⽤了多内核设计，Linux内核+LiteOS内核，操作系统最⼩限度的依赖Linux内核
     </li>
    </ul>
    <h5>
     <a id="232__62">
     </a>
     2.3.2 运⾏效率
    </h5>
    <ul>
     <li>
      <p>
       安卓：应⽤的运⾏是基于虚拟机的 （Java—JDK编译器—字节码—虚拟机—操作系统）
      </p>
     </li>
     <li>
      <p>
       鸿蒙：⽅⾈编译器 （Java----⽅⾈编译器—机器码—操作系统）
      </p>
     </li>
    </ul>
    <p>
     据说， 鸿蒙系统运⾏效率相较于安卓提升了50%+
    </p>
    <h4>
     <a id="24____70">
     </a>
     2.4 技术特性 与 系统安全
    </h4>
    <h5>
     <a id="241__72">
     </a>
     2.4.1 技术特性
    </h5>
    <ul>
     <li>
      硬件互助，资源共享
     </li>
     <li>
      ⼀次开发，多端部署
     </li>
     <li>
      统⼀OS，弹性部署
     </li>
    </ul>
    <h5>
     <a id="242__78">
     </a>
     2.4.2 系统安全
    </h5>
    <ul>
     <li>
      正确的⼈：⾼效安全的⽤户身份识别
     </li>
     <li>
      正确的设备：设备的识别
     </li>
     <li>
      正确的使⽤数据：数据的安全
     </li>
    </ul>
    <h3>
     <a id="_84">
     </a>
     三、第⼀个鸿蒙应⽤
    </h3>
    <h4>
     <a id="31__86">
     </a>
     3.1 开发准备
    </h4>
    <h5>
     <a id="311_Java_88">
     </a>
     3.1.1 开发环境搭建（Java）
    </h5>
    <ul>
     <li>
      安装JDK、配置环境变量
     </li>
     <li>
      下载安装DevEco Studio集成开发环境（基于Idea开发的专⻔⽤于鸿蒙应⽤开发的IDE）
     </li>
    </ul>
    <p>
     <strong>
      下载地址
     </strong>
    </p>
    <p>
     <a href="https://developer.harmonyos.com/cn/develop/deveco-studio#download" rel="nofollow">
      华为操作系统DevEco Studio和SDK下载与升级 | HarmonyOS开发者
     </a>
    </p>
    <p>
     安装
    </p>
    <ul>
     <li>
      运行安装包
     </li>
     <li>
      点击Next
     </li>
     <li>
      选择安装目录
     </li>
     <li>
      创建桌面快捷方式
     </li>
     <li>
      开始安装
     </li>
    </ul>
    <p>
     运行DevEco Studio
    </p>
    <pre><code>第一次启动开发环境会下载鸿蒙开发所需要的SDK
</code></pre>
    <ul>
     <li>
      双击桌⾯快捷⽅式，打开DevEco Studio
     </li>
     <li>
      开始使⽤
     </li>
     <li>
      选择SDK⽬录
     </li>
     <li>
      点击Next进⼊下⼀步
     </li>
     <li>
      选择Accept，点击Next开始下载SDK
     </li>
     <li>
      点击Finish完成下载，开始使⽤
     </li>
    </ul>
    <h5>
     <a id="312__118">
     </a>
     3.1.2 注册华为帐号
    </h5>
    <p>
     <a href="https://id1.cloud.huawei.com/CAS/portal/userRegister/regbyphone.html" rel="nofollow">
      注册_华为帐号 (huawei.com)
     </a>
    </p>
    <h4>
     <a id="32__122">
     </a>
     3.2 创建鸿蒙应⽤
    </h4>
    <p>
     <img alt="请添加图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/33f24fc4a00089d75a5942b812441cb6.png">
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/45d43ff0c24fdcb8ceae2b9c12242863.png">
       <br/>
       <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/79e92fce6cb8fa9a298a84f2d683f73f.png"/>
      </img>
     </img>
    </p>
    <h4>
     <a id="33__129">
     </a>
     3.3 鸿蒙应⽤⽬录结构
    </h4>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/e681ba81114c31dd44883225c1efd094.png"/>
    </p>
    <h4>
     <a id="34__134">
     </a>
     3.4 运⾏项⽬
    </h4>
    <h5>
     <a id="341__136">
     </a>
     3.4.1 启动鸿蒙模拟器
    </h5>
    <ul>
     <li>
      Tools—Device Manager
     </li>
     <li>
      在弹出的窗⼝装点击 Login 按钮，登录华为帐号
     </li>
     <li>
      启动⼀个模拟器
     </li>
    </ul>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/849783c32e87b2e21b14ae73bad6ac42.png"/>
    </p>
    <h4>
     <a id="35__145">
     </a>
     3.5 鸿蒙应⽤的启动流程
    </h4>
    <h5>
     <a id="351_configjson_147">
     </a>
     3.5.1 config.json
    </h5>
    <blockquote>
     <p>
      config.json 是鸿蒙应⽤的主配置⽂件
     </p>
    </blockquote>
    <ul>
     <li>
      <p>
       app 配置 ：定义当前应⽤的唯⼀标识
      </p>
      <ul>
       <li>
        bundleName应用的唯一标识（一般包名用公司名+应用名称）
       </li>
       <li>
        version 应⽤的版本
       </li>
      </ul>
     </li>
     <li>
      <p>
       module 配置： ⽤于声明当前应⽤的信息（包、主类、主界⾯、功能模块声明、适配设 备类型等等）
      </p>
      <ul>
       <li>
        <p>
         mainAbility声明当前应用启动时默认加载的Ability
        </p>
       </li>
       <li>
        <p>
         deviceType声明当前应用适配的设备类型
        </p>
       </li>
       <li>
        <p>
         abilities 声明当前应⽤中每个ability的配置信息
        </p>
        <ul>
         <li>
          创建一个ability那么在config.json中会自动生成对应的ability的配置信息。
         </li>
        </ul>
        <p>
         <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/77bea3b939bfd613c34a2f01cd83adae.png">
          <br/>
          <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/1cc5f07c4d1c044ecbd3656d8a9e20a1.png"/>
         </img>
        </p>
       </li>
      </ul>
     </li>
    </ul>
    <h5>
     <a id="352__170">
     </a>
     3.5.2 应⽤启动流程
    </h5>
    <ul>
     <li>
      <p>
       启动鸿蒙应⽤加载config.json⽂件，根据
       <code>
        mainAbility
       </code>
       配置加载启动应⽤的主界⾯
      </p>
      <pre><code class="prism language-json"><span class="token string-property property">"mainAbility"</span><span class="token operator">:</span> <span class="token string">"com.example.myapplication.demo01.MainAbility"</span>
</code></pre>
     </li>
     <li>
      <p>
       执⾏MainAbility的 onStart ⽅法
      </p>
      <p>
       MainAbility是⼀个显示界⾯的容器，在
       <code>
        onStart
       </code>
       ⽅法中通过调⽤ setMainRoute ⽅法来指 定当前界⾯容器中显示的视图界⾯
      </p>
      <pre><code class="prism language-json"><span class="token comment">// ability相当于一个容器(或者说是浏览器窗口)，</span>
<span class="token comment">// 在容器里面通过填充一个视图slice（html中的body）来展示。</span>
<span class="token comment">// MainAbilitySlice就是⼀个界⾯</span>
<span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">setMainRoute</span><span class="token punctuation">(</span>MainAbilitySlice<span class="token punctuation">.</span>class<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
     </li>
     <li>
      <p>
       执⾏MainAbilitySlice中的
       <code>
        onStart
       </code>
       完成界⾯的渲染
      </p>
      <p>
       slice是⼀个界⾯，界⾯中显示什么视图，就是通过onstart⽅法来加载渲染的
      </p>
      <p>
       <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/575e0186815159114c3b904409b8d88b.png"/>
       <br/>
       <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/b66326e07d1127e6db42db75975eec55.png"/>
      </p>
     </li>
    </ul>
    <h5>
     <a id="353__195">
     </a>
     3.5.3 你好，世界哪里来的
    </h5>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/8b16fe943a5eb8de7b737bb9ced28831.png"/>
    </p>
    <p>
     $string : 表示引用的一sing，表示要去string文件中寻找键值对，如图寻找key为：mainability_HelloWorld 的值。
    </p>
    <h3>
     <a id="Ability_200">
     </a>
     四、Ability框架
    </h3>
    <h4>
     <a id="41_Ability_202">
     </a>
     4.1 Ability介绍
    </h4>
    <p>
     Ability是应⽤所具备能⼒的抽象，也是应⽤程序的重要组成部分。⼀个应⽤可以具备多种能⼒
    </p>
    <p>
     （即可以包含多个Ability），HarmonyOS⽀持应⽤以Ability为单位进⾏部署。
    </p>
    <p>
     Ability可以分为
     <code>
      FA（Feature Ability）
     </code>
     和
     <code>
      PA （Particle Ability）
     </code>
     两种类型，每种类型为
    </p>
    <p>
     开发者提供了不同的模板，以便实现不同的业务功能。
    </p>
    <ul>
     <li>
      <p>
       FA⽀持Page Ability：
      </p>
      <p>
       Page模板是FA唯⼀⽀持的模板，⽤于提供与⽤户交互的能⼒。⼀个Page实例可以包含⼀组相关⻚⾯，每个⻚⾯⽤⼀个AbilitySlice实例表示。
      </p>
      <p>
       ​
       <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/0511d42f18394718d0339d025f618573.png"/>
      </p>
     </li>
     <li>
      <p>
       PA⽀持Service Ability和Data Ability：
      </p>
      <ul>
       <li>
        Service模板：⽤于提供后台运⾏任务的能⼒。
       </li>
       <li>
        Data模板：⽤于对外部提供统⼀的数据访问抽象。
       </li>
      </ul>
     </li>
    </ul>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/aa6c81238fd1e67f302a723a810a602e.png"/>
    </p>
    <h4>
     <a id="42_PageAbility_226">
     </a>
     4.2 PageAbility
    </h4>
    <h5>
     <a id="421PageAbility_228">
     </a>
     4.2.1PageAbility简介
    </h5>
    <blockquote>
     <p>
      ⼀个PageAbility相当于⼀个⻚⾯的容器(浏览器窗⼝)，⼀个AbilitySlice相当于显示在容器
     </p>
     <p>
      中的⼀个⻚⾯(HTML)
     </p>
    </blockquote>
    <p>
     Page模板（以下简称“Page”）是FA唯⼀⽀持的模板，⽤于提供与⽤户交互的能⼒。
     <br/>
     ⼀个Page可以由⼀个或多个AbilitySlice构成，AbilitySlice是指应⽤的单个⻚⾯及其控制逻辑的总和（相当于⼀个HTML⽂件）。在⼀个Abiliy种可以包含多个Slice
    </p>
    <pre><code>商品管理： 	ProductAbility（PageAbility）：
 goods-list.html	ProductListSlice
 goods-detail.html 	ProductDetailSlice
</code></pre>
    <h5>
     <a id="422_AbilitySlice_243">
     </a>
     4.2.2 创建AbilitySlice
    </h5>
    <ul>
     <li>
      <p>
       AbilitySlice创建slice包中
      </p>
     </li>
     <li>
      <p>
       创建步骤：
      </p>
      <ul>
       <li>
        <p>
         创建⼀个类继承 ohos.aafwk.ability.AbilitySlice 类
        </p>
        <pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MainAbilitySlice2</span> <span class="token keyword">extends</span> <span class="token class-name">AbilitySlice</span> <span class="token punctuation">{<!-- --></span>

<span class="token punctuation">}</span>
</code></pre>
       </li>
       <li>
        <p>
         在
         <code>
          resources/base/layout
         </code>
         ⽬录下创建布局⽂件
        </p>
        <pre><code class="prism language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>DirectionalLayout</span>
 <span class="token attr-name"><span class="token namespace">xmlns:</span>ohos</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.huawei.com/res/ohos<span class="token punctuation">"</span></span>
 <span class="token attr-name"><span class="token namespace">ohos:</span>height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
 <span class="token attr-name"><span class="token namespace">ohos:</span>width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
 <span class="token attr-name"><span class="token namespace">ohos:</span>orientation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vertical<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Text</span>
 <span class="token attr-name"><span class="token namespace">ohos:</span>height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_content<span class="token punctuation">"</span></span>
 <span class="token attr-name"><span class="token namespace">ohos:</span>width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_content<span class="token punctuation">"</span></span>
 <span class="token attr-name"><span class="token namespace">ohos:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>这是测试⽂本<span class="token punctuation">"</span></span>
 <span class="token attr-name"><span class="token namespace">ohos:</span>text_color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#ff0000<span class="token punctuation">"</span></span>
 <span class="token attr-name"><span class="token namespace">ohos:</span>text_size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>40vp<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Text</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>DirectionalLayout</span><span class="token punctuation">&gt;</span></span> 
</code></pre>
       </li>
       <li>
        <p>
         在创建的 AbilitySlice 类中重写 onStart ⽅法，调⽤setUIContent⽅法加载布局⽂件
        </p>
        <p>
         通过 ResourceTable 加载resouces⽬录下的资源
        </p>
        <pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MainAbilitySlice2</span> <span class="token keyword">extends</span> <span class="token class-name">AbilitySlice</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onStart</span><span class="token punctuation">(</span><span class="token class-name">Intent</span> intent<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onStart</span><span class="token punctuation">(</span>intent<span class="token punctuation">)</span><span class="token punctuation">;</span>
 		<span class="token comment">//定义slice视图组件（Java，XML）</span>
 		<span class="token comment">//setUIContent(int); 加载应⽤的 布局⽂件（xml） 作为当前slice的视图</span>
 		<span class="token function">setUIContent</span><span class="token punctuation">(</span><span class="token class-name">ResourceTable<span class="token punctuation">.</span>Layout_ability_main_slice2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
       </li>
      </ul>
     </li>
    </ul>
    <h5>
     <a id="423_PageAbility_297">
     </a>
     4.2.3 PageAbility⽣命周期
    </h5>
    <blockquote>
     <p>
      ⼀个Page中可以包含多个Slice，但是只能同时显示⼀个slice，如何设置PageAbility默认
     </p>
     <p>
      显示的slice？
     </p>
     <p>
      在⼀个Page Ability中提供了多个声明周期⽅法，这些⽅法在当前PageAbility加载的不同
     </p>
     <p>
      阶段会⾃定调⽤
     </p>
    </blockquote>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/7659ac44c0ecd41c04570a3cc6993770.png"/>
    </p>
    <blockquote>
     <p>
      说明
     </p>
     <p>
      INACTIVE状态是一种短暂存在的状态，可理解为“激活中”。
     </p>
    </blockquote>
    <pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MainAbility</span> <span class="token keyword">extends</span> <span class="token class-name">Ability</span> <span class="token punctuation">{<!-- --></span>
     <span class="token comment">/**
      * 当系统⾸次创建当前PageAbility实例时，⾃动调⽤onstart⽅法。也就是说对于⼀个Page⽽⾔，onStart⽅法只会执⾏⼀次
      */</span>
     <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onStart</span><span class="token punctuation">(</span><span class="token class-name">Intent</span> intent<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
     	<span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onStart</span><span class="token punctuation">(</span>intent<span class="token punctuation">)</span><span class="token punctuation">;</span>
     	<span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">setMainRoute</span><span class="token punctuation">(</span><span class="token class-name">MainAbilitySlice2</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     	<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"--------------onStart"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
    
     <span class="token comment">/**
      * 当前Page进⼊active状态进⼊到⼿机前台获取焦点时，会触发onActive⽅法的执⾏
      */</span>
     <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onActive</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
     	<span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onActive</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     	<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"--------------onActive"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	<span class="token punctuation">}</span>
    
     <span class="token comment">/**
      * 当前PageAbility失去焦点（⻚⾯切⼊到后台、切换到其他Page），触发onInactive⽅法的执⾏
      */</span>
     <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onInactive</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
     	<span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onInactive</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     	<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"--------------onInactive"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
    
     <span class="token comment">/**
      * 当前PageAbility切换到后台，不可⻅时，触发onBackground执⾏
      */</span>
     <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onBackground</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
     	<span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onBackground</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     	<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"--------------onBackground"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
     <span class="token comment">/**
      * 当PageAbility从后台不可⻅状态（⻚⾯在后台、但是没销毁）切换到前台可⻅状态时触发 onForeground执⾏
      */</span>
     <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onForeground</span><span class="token punctuation">(</span><span class="token class-name">Intent</span> intent<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
     	<span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onForeground</span><span class="token punctuation">(</span>intent<span class="token punctuation">)</span><span class="token punctuation">;</span>
     	<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"--------------onForeground"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
     <span class="token comment">/**
      * 当前Page销毁时，触发onStop的执⾏
      */</span>
     <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onStop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
     	<span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onStop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     	<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"--------------onStop"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <h5>
     <a id="424_PageAbility_364">
     </a>
     4.2.4 PageAbility⽣命周期
    </h5>
    <blockquote>
     <p>
      Slice相当于一个网页，Slice中显示的视图是通过组件来声明的，Slice中的组件加载支持两种方式：
     </p>
     <ul>
      <li>
       Java代码
      </li>
      <li>
       xml布局文件
      </li>
     </ul>
    </blockquote>
    <p>
     <code>
      onStart
     </code>
     方法：在Slice实例创建时执行，用于载入当前Slice的视图组件，在onStart方法中通过调用
     <code>
      setUIContext
     </code>
     来加载视图组件
    </p>
    <blockquote>
     <p>
      setUIContext方法提供了2个重载：
     </p>
     <p>
      setUIContext(int)：通过布局⽂件的ID，加载resources/base/layout⽬录下的布局⽂件
     </p>
     <p>
      完成⻚⾯的渲染
     </p>
     <p>
      setUIContext(ComponentContainer) :通过加载⼀个使⽤Java代码创建的组件完成⻚⾯
     </p>
     <p>
      的渲染
     </p>
    </blockquote>
    <h6>
     <a id="XML_383">
     </a>
     <strong>
      XML****⽅式渲染
     </strong>
    </h6>
    <ul>
     <li>
      <p>
       创建布局⽂件：ability_main_slice2.xml
      </p>
      <pre><code class="prism language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>DirectionalLayout</span>
    <span class="token attr-name"><span class="token namespace">xmlns:</span>ohos</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.huawei.com/res/ohos<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">ohos:</span>height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">ohos:</span>width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">ohos:</span>orientation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vertical<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Text</span>
        <span class="token attr-name"><span class="token namespace">ohos:</span>height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_content<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">ohos:</span>width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_content<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">ohos:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>这是测试文本<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">ohos:</span>text_color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#ff0000<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">ohos:</span>text_size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>40vp<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Text</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>DirectionalLayout</span><span class="token punctuation">&gt;</span></span>
</code></pre>
     </li>
     <li>
      <p>
       在Slice的onStart⽅法中加载布局⽂件：
      </p>
      <p>
       每创建一个布局文件（或者说每个资源都会创建一个ID）都会生成一个ID，所以布局文件调用的是setUIContext(int)方法
       <br/>
       <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/fdbefbe4fe1d7a095c148f78798313a0.png"/>
      </p>
      <pre><code class="prism language-java"><span class="token annotation punctuation">@Override</span>
<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onStart</span><span class="token punctuation">(</span><span class="token class-name">Intent</span> intent<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onStart</span><span class="token punctuation">(</span>intent<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 定义slice视图组件（java,xml）</span>
    <span class="token comment">// setUIContent(int); 加载应用的 布局文件（xml）作为当前slice的试图</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">setUIContent</span><span class="token punctuation">(</span><span class="token class-name">ResourceTable<span class="token punctuation">.</span>Layout_ability_main_slice2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
     </li>
    </ul>
    <h6>
     <a id="Java_419">
     </a>
     <strong>
      Java⽅式渲染
     </strong>
    </h6>
    <ul>
     <li>
      <p>
       使⽤Java代码创建组件，渲染到slice中
      </p>
      <pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MainAbilitySlice2</span> <span class="token keyword">extends</span> <span class="token class-name">AbilitySlice</span> <span class="token punctuation">{<!-- --></span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onStart</span><span class="token punctuation">(</span><span class="token class-name">Intent</span> intent<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onStart</span><span class="token punctuation">(</span>intent<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 定义slice视图组件（java,xml）</span>
        <span class="token comment">// setUIContent(int); 加载应用的 布局文件（xml）作为当前slice的试图</span>
<span class="token comment">//        super.setUIContent(ResourceTable.Layout_ability_main_slice2);</span>

        <span class="token comment">// ComponentContainer（组件容器）</span>
        <span class="token class-name">DirectionalLayout</span> directionalLayout <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DirectionalLayout</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        directionalLayout<span class="token punctuation">.</span><span class="token function">setOrientation</span><span class="token punctuation">(</span><span class="token class-name">Component</span><span class="token punctuation">.</span><span class="token constant">DRAG_VERTICAL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// Component（组件）</span>
        <span class="token class-name">Text</span> text <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        text<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">"Hello Boys"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        text<span class="token punctuation">.</span><span class="token function">setHeight</span><span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        text<span class="token punctuation">.</span><span class="token function">setTextSize</span><span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 将组件放到组件容器中</span>
        directionalLayout<span class="token punctuation">.</span><span class="token function">addComponent</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 将组件容器渲染到slice中</span>
        <span class="token function">setUIContent</span><span class="token punctuation">(</span>directionalLayout<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
     </li>
    </ul>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f34333337323835382f:61727469636c652f64657461696c732f313233303536363331" class_="artid" style="display:none">
 </p>
</div>


