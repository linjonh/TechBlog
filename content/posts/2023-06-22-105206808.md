---
layout: post
title: "C语言控制台小游戏打飞机基础功能版"
date: 2023-06-22 22:01:13 +0800
description: "开飞机打飞机初学C语言总觉得不能做些什么好玩的，这个小游戏只需  “一点点”  （千真万确）C语言知"
keywords: "飞机大战c语言程序设计"
categories: ['C']
tags: ['游戏开发', '游戏', 'C']
artid: "105206808"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=105206808
    alt: "C语言控制台小游戏打飞机基础功能版"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=105206808
featuredImagePreview: https://bing.ee123.net/img/rand?artid=105206808
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     C语言|控制台小游戏|打飞机（基础功能版）
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-light" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h3>
     <a id="_0">
     </a>
     开飞机打飞机
    </h3>
    <p>
     <strong>
      初学C语言总觉得不能做些什么好玩的，这个小游戏只需 “一点点” （千真万确）C语言知识就能完成！
      <br/>
      总计不到200行的非空白代码（没有强行压缩行数）
     </strong>
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/b210a403fdf65ca4ab1161af9749abc3.gif"/>
    </p>
    <p>
     操作说明：
    </p>
    <ol>
     <li>
      <code>
       W
      </code>
      、
      <code>
       S
      </code>
      、
      <code>
       A
      </code>
      、
      <code>
       D
      </code>
      控制 上 、下、左、右 方向，
      <code>
       空格
      </code>
      攻击
     </li>
     <li>
      每击中一架敌机增加1分，界面下方显示实时分数
     </li>
     <li>
      撞到敌机后显示
      <code>
       game over！
      </code>
      2.5秒（时间可更改）
     </li>
    </ol>
    <hr/>
    <ul>
     <li>
      子弹连发
     </li>
     <li>
      移动的同时发射子弹
     </li>
     <li>
      飞机撞上敌机结束游戏
     </li>
     <li>
      可通过更改相关变量的值来调节敌机飞行速度、敌机密度、敌机刷新速度等
     </li>
     <li>
      相比与上一个极度简陋版，功能基本完善
     </li>
    </ul>
    <hr/>
    <ul>
     <li>
      <strong>
       画面显示
      </strong>
      ：游戏画面信息存入二维数组：数组下标映射游戏中位置坐标，数组元素的值（0，1，2，3…）分别表示游戏场景中不同的对象（空白处，飞机，子弹，敌机…），遍历数组根据不同的值输出游戏画面。每次输出前将光标调至首行首列处，覆盖之前的输出画面，达到刷新游戏画面的效果。
     </li>
     <li>
      <strong>
       飞机移动
      </strong>
      ：监测游戏按键是否按下来修改相应数据。
     </li>
     <li>
      <strong>
       敌机移动
      </strong>
      ：对敌机竖直坐标进行自增运算，达到不断移动的效果。
     </li>
     <li>
      <strong>
       碰撞消失
      </strong>
      ：（飞机、敌机、子弹）每次移动先判断下个位置是否会相撞。
     </li>
    </ul>
    <hr/>
    <p>
     <strong>
      所需C语言知识真的不多，感兴趣的C程序员朋友来复刻吧！
     </strong>
    </p>
    <p>
     <strong>
      以下是详细注释的完整源代码：
     </strong>
    </p>
    <pre><code class="prism language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;conio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;time.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;windows.h&gt;</span></span>

<span class="token macro property">#<span class="token directive keyword">define</span>  high 25   </span><span class="token comment">//画布高</span>
<span class="token macro property">#<span class="token directive keyword">define</span> width 60   </span><span class="token comment">//画布宽</span>
<span class="token macro property">#<span class="token directive keyword">define</span>  border -1    </span><span class="token comment">//边界</span>
<span class="token macro property">#<span class="token directive keyword">define</span>   blank  0    </span><span class="token comment">//空白</span>
<span class="token macro property">#<span class="token directive keyword">define</span>   plane  1    </span><span class="token comment">//飞机</span>
<span class="token macro property">#<span class="token directive keyword">define</span>  bullet  2    </span><span class="token comment">//子弹</span>
<span class="token macro property">#<span class="token directive keyword">define</span>   enemy  3    </span><span class="token comment">//敌机</span>
<span class="token macro property">#<span class="token directive keyword">define</span> destroy  4    </span><span class="token comment">//摧毁标记</span>

<span class="token keyword">int</span> canvas<span class="token punctuation">[</span>high <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span>width <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token comment">//游戏场景的高和宽</span>
<span class="token keyword">int</span> pos_h<span class="token punctuation">,</span> pos_w<span class="token punctuation">;</span>   <span class="token comment">//飞机位置</span>
<span class="token keyword">int</span> enemynum<span class="token punctuation">;</span>    <span class="token comment">//敌机数量</span>
<span class="token keyword">int</span> interval<span class="token punctuation">;</span> <span class="token comment">//同个计次来模拟时间间隔</span>
<span class="token keyword">int</span> itv_move<span class="token punctuation">;</span> <span class="token comment">//敌机移动的时间间隔</span>
<span class="token keyword">int</span> itv_new<span class="token punctuation">;</span> <span class="token comment">//敌机刷新的时间间隔</span>
<span class="token keyword">int</span> score<span class="token punctuation">;</span>  <span class="token comment">//分数</span>
<span class="token keyword">int</span> IsOver<span class="token punctuation">;</span>  <span class="token comment">//判断游戏是否结束</span>

<span class="token keyword">void</span> <span class="token function">Startup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//游戏数值初始化</span>
<span class="token keyword">void</span> <span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//游戏界面输出</span>
<span class="token keyword">void</span> <span class="token function">UpdateInput</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">//因输入导致的游戏状态更新</span>
<span class="token keyword">void</span> <span class="token function">UpdateNormal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//与输入无关的游戏状态更新</span>
<span class="token keyword">void</span> <span class="token function">HideCursor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">//隐藏光标</span>
<span class="token keyword">void</span> <span class="token function">gotoxy</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">//回调光标		</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token function">Startup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//初始化</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span>IsOver<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>   <span class="token comment">//游戏循环</span>
		<span class="token function">UpdateInput</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">UpdateNormal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\t\tgame over!\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">Sleep</span><span class="token punctuation">(</span><span class="token number">2500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//暂停游戏结束界面（毫秒）</span>
	<span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"pause"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">Startup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>  <span class="token comment">//游戏数值初始化</span>
	IsOver <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
	score <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token comment">//初始化分数</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> high <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>      <span class="token comment">//初始化画布</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> width <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> i <span class="token operator">==</span> high <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">||</span>
				j <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> j <span class="token operator">==</span> width <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				canvas<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> border<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">else</span> canvas<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> blank<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	pos_h <span class="token operator">=</span> high <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>    <span class="token comment">//初始化飞机竖直坐标</span>
	pos_w <span class="token operator">=</span> width <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>     <span class="token comment">//初始化飞机水平坐标</span>
	canvas<span class="token punctuation">[</span>pos_h<span class="token punctuation">]</span><span class="token punctuation">[</span>pos_w<span class="token punctuation">]</span> <span class="token operator">=</span> plane<span class="token punctuation">;</span>  <span class="token comment">//初始化飞机位置</span>
	enemynum <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>       <span class="token comment">//敌机数量</span>
	<span class="token function">srand</span><span class="token punctuation">(</span><span class="token function">time</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	interval <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>      <span class="token comment">//初始化时间间隔计数</span>
	itv_move <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>      <span class="token comment">//初始化敌机移动时间间隔</span>
	itv_new <span class="token operator">=</span> <span class="token number">40</span><span class="token punctuation">;</span>     <span class="token comment">//初始化敌机刷新时间间隔</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>  <span class="token comment">//游戏界面输出</span>
	<span class="token function">HideCursor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//隐藏光标</span>
	<span class="token function">gotoxy</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//回调光标、刷新画面</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> high <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> width <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>canvas<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">==</span> plane<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token comment">//当前位置为飞机位置</span>
				<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"*"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>canvas<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">==</span> bullet<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>  <span class="token comment">//当前位置为子弹位置</span>
				<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"|"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>canvas<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">==</span> enemy<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>  <span class="token comment">//当前位置为敌机位置</span>
				<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"@"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>canvas<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">==</span> border<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>  <span class="token comment">//当前位置为边界</span>
				<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"#"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>canvas<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">==</span> blank<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>  <span class="token comment">//当前位置无物，且在边界内</span>
				<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>canvas<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">==</span> destroy<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>  <span class="token comment">//当前位置无物，且在边界内</span>
				<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"x"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n得分：%d"</span><span class="token punctuation">,</span> score<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">UpdateInput</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>  <span class="token comment">//因输入导致的游戏状态更新</span>
	<span class="token keyword">char</span> key_W <span class="token operator">=</span> <span class="token function">GetKeyState</span><span class="token punctuation">(</span><span class="token string">'W'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment">//监测 W 键是否按下</span>
		key_S <span class="token operator">=</span> <span class="token function">GetKeyState</span><span class="token punctuation">(</span><span class="token string">'S'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment">//监测 S 键是否按下</span>
		key_A <span class="token operator">=</span> <span class="token function">GetKeyState</span><span class="token punctuation">(</span><span class="token string">'A'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment">//监测 A 键是否按下</span>
		key_D <span class="token operator">=</span> <span class="token function">GetKeyState</span><span class="token punctuation">(</span><span class="token string">'D'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment">//监测 D 键是否按下</span>
		key_attack <span class="token operator">=</span> <span class="token function">GetKeyState</span><span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//监测 空格 键是否按下</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">kbhit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token comment">//当有键按下时  //vc++6.0以上版本为 _kbhit()</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>key_W <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>  <span class="token comment">//当按下 W 键，上移</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>pos_h <span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				canvas<span class="token punctuation">[</span>pos_h<span class="token punctuation">]</span><span class="token punctuation">[</span>pos_w<span class="token punctuation">]</span> <span class="token operator">=</span> blank<span class="token punctuation">;</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>canvas<span class="token punctuation">[</span>pos_h <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>pos_w<span class="token punctuation">]</span> <span class="token operator">==</span> enemy<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>  <span class="token comment">//下个位置是敌机，撞毁</span>
					canvas<span class="token punctuation">[</span>pos_h <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>pos_w<span class="token punctuation">]</span> <span class="token operator">=</span> destroy<span class="token punctuation">;</span>
					IsOver <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				<span class="token keyword">else</span> canvas<span class="token punctuation">[</span><span class="token operator">--</span>pos_h<span class="token punctuation">]</span><span class="token punctuation">[</span>pos_w<span class="token punctuation">]</span> <span class="token operator">=</span> plane<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>key_S <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>  <span class="token comment">//当按下 S 键，下移</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>pos_h <span class="token operator">&lt;</span> high<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				canvas<span class="token punctuation">[</span>pos_h<span class="token punctuation">]</span><span class="token punctuation">[</span>pos_w<span class="token punctuation">]</span> <span class="token operator">=</span> blank<span class="token punctuation">;</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>canvas<span class="token punctuation">[</span>pos_h <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>pos_w<span class="token punctuation">]</span> <span class="token operator">==</span> enemy<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>  <span class="token comment">//下个位置是敌机，撞毁</span>
					canvas<span class="token punctuation">[</span>pos_h <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>pos_w<span class="token punctuation">]</span> <span class="token operator">=</span> destroy<span class="token punctuation">;</span>
					IsOver <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				<span class="token keyword">else</span> canvas<span class="token punctuation">[</span><span class="token operator">++</span>pos_h<span class="token punctuation">]</span><span class="token punctuation">[</span>pos_w<span class="token punctuation">]</span> <span class="token operator">=</span> plane<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>key_A <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>  <span class="token comment">//当按下 A 键，左移</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>pos_w <span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				canvas<span class="token punctuation">[</span>pos_h<span class="token punctuation">]</span><span class="token punctuation">[</span>pos_w<span class="token punctuation">]</span> <span class="token operator">=</span> blank<span class="token punctuation">;</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>canvas<span class="token punctuation">[</span>pos_h<span class="token punctuation">]</span><span class="token punctuation">[</span>pos_w <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> enemy<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>  <span class="token comment">//下个位置是敌机，撞毁</span>
					canvas<span class="token punctuation">[</span>pos_h<span class="token punctuation">]</span><span class="token punctuation">[</span>pos_w <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> destroy<span class="token punctuation">;</span>
					IsOver <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				<span class="token keyword">else</span> canvas<span class="token punctuation">[</span>pos_h<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token operator">--</span>pos_w<span class="token punctuation">]</span> <span class="token operator">=</span> plane<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>key_D <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>  <span class="token comment">//当按下 D 键，右移</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>pos_w <span class="token operator">&lt;</span> width<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				canvas<span class="token punctuation">[</span>pos_h<span class="token punctuation">]</span><span class="token punctuation">[</span>pos_w<span class="token punctuation">]</span> <span class="token operator">=</span> blank<span class="token punctuation">;</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>canvas<span class="token punctuation">[</span>pos_h<span class="token punctuation">]</span><span class="token punctuation">[</span>pos_w <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> enemy<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>  <span class="token comment">//下个位置是敌机，撞毁</span>
					canvas<span class="token punctuation">[</span>pos_h<span class="token punctuation">]</span><span class="token punctuation">[</span>pos_w <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> destroy<span class="token punctuation">;</span>
					IsOver <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				<span class="token keyword">else</span> canvas<span class="token punctuation">[</span>pos_h<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token operator">++</span>pos_w<span class="token punctuation">]</span> <span class="token operator">=</span> plane<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>key_attack <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>   <span class="token comment">//当按下空格键，发射子弹</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>pos_h <span class="token operator">!=</span> <span class="token number">1</span><span class="token punctuation">)</span>canvas<span class="token punctuation">[</span>pos_h <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>pos_w<span class="token punctuation">]</span> <span class="token operator">=</span> bullet<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">UpdateNormal</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>  <span class="token comment">//与输入无关的游戏状态更新</span>
	<span class="token keyword">int</span> temp<span class="token punctuation">[</span>high <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span>width <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token comment">//用来判断原位置的临时数组</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> high<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> width<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			temp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> canvas<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> high<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>  <span class="token comment">//遍历临时数组，修改画布</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> width<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>temp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">==</span> enemy <span class="token operator">&amp;&amp;</span> interval <span class="token operator">%</span> itv_move <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token comment">//当前位置为敌机</span>
				canvas<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> blank<span class="token punctuation">;</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>temp<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">==</span> bullet<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>  <span class="token comment">//下面为子弹，敌机被击中</span>
					canvas<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> blank<span class="token punctuation">;</span>
					score<span class="token operator">++</span><span class="token punctuation">;</span>
					<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\a"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//击中音效</span>
				<span class="token punctuation">}</span>
				<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;</span> high<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
					canvas<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> enemy<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">==</span> pos_h <span class="token operator">&amp;&amp;</span> j <span class="token operator">==</span> pos_w<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>  <span class="token comment">//下面为飞机，玩家飞机被撞毁</span>
					canvas<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> destroy<span class="token punctuation">;</span>
					IsOver <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>temp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">==</span> bullet<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token comment">//当前位置为子弹</span>
				canvas<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> blank<span class="token punctuation">;</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>temp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">==</span> enemy<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>  <span class="token comment">//下个位置是敌机，敌机被击毁</span>
					canvas<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> blank<span class="token punctuation">;</span>
					score<span class="token operator">++</span><span class="token punctuation">;</span>
					<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\a"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
					canvas<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> bullet<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>interval <span class="token operator">%</span> itv_new <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>  <span class="token comment">//刚好到时间间隔</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> enemynum<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>   <span class="token comment">//新增敌机群</span>
			canvas<span class="token punctuation">[</span><span class="token function">rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token function">rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">%</span> width <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> enemy<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>interval <span class="token operator">&lt;=</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>  <span class="token comment">//时间间隔计次</span>
		interval<span class="token operator">++</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>    <span class="token comment">//时间间隔计次清零</span>
		interval <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">gotoxy</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token comment">//回调光标</span>
	COORD pos<span class="token punctuation">;</span>
	pos<span class="token punctuation">.</span>X <span class="token operator">=</span> x <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
	pos<span class="token punctuation">.</span>Y <span class="token operator">=</span> y <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token function">SetConsoleCursorPosition</span><span class="token punctuation">(</span><span class="token function">GetStdHandle</span><span class="token punctuation">(</span>STD_OUTPUT_HANDLE<span class="token punctuation">)</span><span class="token punctuation">,</span> pos<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">HideCursor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token comment">//隐藏光标函数</span>
	CONSOLE_CURSOR_INFO cursor<span class="token punctuation">;</span>
	cursor<span class="token punctuation">.</span>bVisible <span class="token operator">=</span> FALSE<span class="token punctuation">;</span>
	cursor<span class="token punctuation">.</span>dwSize <span class="token operator">=</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>cursor<span class="token punctuation">)</span><span class="token punctuation">;</span>
	HANDLE handle <span class="token operator">=</span> <span class="token function">GetStdHandle</span><span class="token punctuation">(</span>STD_OUTPUT_HANDLE<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">SetConsoleCursorInfo</span><span class="token punctuation">(</span>handle<span class="token punctuation">,</span> <span class="token operator">&amp;</span>cursor<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <hr/>
    <p>
     以上内容是在观看
     <a href="https://study.163.com/course/introduction/1004489035.htm" rel="nofollow">
      河海大学童晶老师的C语言游戏课程
     </a>
     的基础上总结改进完成的，细节解释还请移步童老师的课程，这里就不作拾人牙慧的赘述了。
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f34343432313239322f:61727469636c652f64657461696c732f313035323036383038" class_="artid" style="display:none">
 </p>
</div>


