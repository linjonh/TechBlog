---
arturl_encode: "68747470733a2f2f62:6c6f672e6373646e2e6e65742f71715f34323237383234302f:61727469636c652f64657461696c732f313436303931313934"
layout: post
title: "electron-vue3-vite-æ¸²æŸ“è¿›ç¨‹åˆ°ä¸»è¿›ç¨‹çš„å•å‘é€šä¿¡"
date: 2025-03-07 11:29:13 +08:00
description: "ç”¨ç¤ºä¾‹è®²è§£ä¸‹Electron-forge + vue3 + vite æ¸²æŸ“è¿›ç¨‹åˆ°ä¸»è¿›ç¨‹çš„å•å‘é€šä¿¡"
keywords: "electron + vue3 + vite æ¸²æŸ“è¿›ç¨‹åˆ°ä¸»è¿›ç¨‹çš„å•å‘é€šä¿¡"
categories: ['Forge']
tags: ['å‰ç«¯', 'Javascript', 'Electron']
artid: "146091194"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146091194
    alt: "electron-vue3-vite-æ¸²æŸ“è¿›ç¨‹åˆ°ä¸»è¿›ç¨‹çš„å•å‘é€šä¿¡"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146091194
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146091194
cover: https://bing.ee123.net/img/rand?artid=146091194
image: https://bing.ee123.net/img/rand?artid=146091194
img: https://bing.ee123.net/img/rand?artid=146091194
---

# electron + vue3 + vite æ¸²æŸ“è¿›ç¨‹åˆ°ä¸»è¿›ç¨‹çš„å•å‘é€šä¿¡

> ç”¨ç¤ºä¾‹è®²è§£ä¸‹æ¸²æŸ“è¿›ç¨‹åˆ°ä¸»è¿›ç¨‹çš„å•å‘é€šä¿¡
>   
> åˆå§‹ç‰ˆæœ¬é¡¹ç›®ç»“æ„å¯å‚è€ƒé¡¹ç›®ï¼šhttps://github.com/ylpxzx/electron-forge-project/tree/init\_project

![è¯·æ·»åŠ å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/667117930e794027a760f8e5c4866030.gif)

### æ¸²æŸ“è¿›ç¨‹åˆ°ä¸»è¿›ç¨‹ï¼ˆå•å‘ï¼‰

> ä»¥Electronå®˜æ–¹æ–‡æ¡£ç»™å‡ºçš„â€æ¸²æŸ“è¿›ç¨‹è§¦å‘åŠ¨ä½œä¿®æ”¹ä¸»è¿›ç¨‹çª—å£æ ‡é¢˜â€œä¸ºä¾‹
>   
> å®Œæ•´é¡¹ç›®ç¤ºä¾‹ï¼šhttps://github.com/ylpxzx/electron-forge-project/tree/render\_to\_main

ipcMain.on æ˜¯ Electron æ¡†æ¶ä¸­çš„ä¸€ä¸ªç›‘å¬æ–¹æ³•ï¼Œç”¨äºåœ¨ä¸»è¿›ç¨‹ä¸­ç›‘å¬ä»æ¸²æŸ“è¿›ç¨‹å‘é€çš„å¼‚æ­¥æ¶ˆæ¯ã€‚ipcMain æ˜¯ Electron æä¾›çš„ä¸€ä¸ªæ¨¡å—ï¼Œå…è®¸ä¸»è¿›ç¨‹å’Œæ¸²æŸ“è¿›ç¨‹ä¹‹é—´è¿›è¡Œé€šä¿¡ã€‚

#### é€šä¿¡é€»è¾‘

* src/main.js

  ```javascript
  import { app, BrowserWindow, ipcMain } from 'electron';
  import path from 'node:path';
  import started from 'electron-squirrel-startup';

  // Handle creating/removing shortcuts on Windows when installing/uninstalling.
  if (started) {
    app.quit();
  }

  const createWindow = () => {
    // Create the browser window.
    const mainWindow = new BrowserWindow({
      width: 800,
      height: 600,
      webPreferences: {
        preload: path.join(__dirname, 'preload.js'),
      },
    });
  	
  	// æ–°å¢ä»£ç éƒ¨åˆ† --- start
  	ipcMain.on('set-title', (event, title) => {
  		// ä» event å¯¹è±¡ä¸­è·å– sender å±æ€§ï¼Œå¹¶å°†å…¶èµ‹å€¼ç»™ webContents å˜é‡ã€‚event.sender é€šå¸¸æ˜¯è§¦å‘äº‹ä»¶çš„ webContents å¯¹è±¡ã€‚
  	  const webContents = event.sender
  	  // ä½¿ç”¨ BrowserWindow.fromWebContents æ–¹æ³•ï¼Œé€šè¿‡ webContents å¯¹è±¡è·å–å¯¹åº”çš„ BrowserWindow å®ä¾‹ï¼Œå¹¶å°†å…¶èµ‹å€¼ç»™ win å˜é‡ã€‚BrowserWindow æ˜¯ Electron ä¸­è¡¨ç¤ºæµè§ˆå™¨çª—å£çš„ç±»ã€‚
  	  const win = BrowserWindow.fromWebContents(webContents)
  	  // å°†çª—å£çš„æ ‡é¢˜è®¾ç½®ä¸º title å˜é‡çš„å€¼
  	  win.setTitle(title)
  	})
  	// æ–°å¢ä»£ç éƒ¨åˆ† --- end

    if (MAIN_WINDOW_VITE_DEV_SERVER_URL) {
      mainWindow.loadURL(MAIN_WINDOW_VITE_DEV_SERVER_URL);
    } else {
      mainWindow.loadFile(path.join(__dirname, `../renderer/${MAIN_WINDOW_VITE_NAME}/index.html`));
    }

    mainWindow.webContents.openDevTools();
  };

  app.whenReady().then(() => {
    createWindow();

    app.on('activate', () => {
      if (BrowserWindow.getAllWindows().length === 0) {
        createWindow();
      }
    });
  });

  app.on('window-all-closed', () => {
    if (process.platform !== 'darwin') {
      app.quit();
    }
  });

  ```

  åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œä¸»è¿›ç¨‹ç›‘å¬åä¸º
  `set-title`
  çš„æ¶ˆæ¯ï¼Œå½“æ¥æ”¶åˆ°è¯¥æ¶ˆæ¯æ—¶ï¼Œä¼šæ‰§è¡Œå›è°ƒå‡½æ•°ï¼Œå°†çª—å£æ ‡é¢˜è®¾ç½®ä¸º
  `title`
  å˜é‡å¯¹åº”çš„å€¼ã€‚
* src/preload.js

  `preload.js`
  ç”¨äºä¸Šä¸‹æ–‡éš”ç¦»ï¼›å°†ç¡®ä¿æ‚¨çš„
  `é¢„åŠ è½½è„šæœ¬`
  å’Œ
  `Electronçš„å†…éƒ¨é€»è¾‘`
  è¿è¡Œåœ¨æ‰€åŠ è½½çš„
  `webcontentç½‘é¡µ`
  ä¹‹å¤–çš„å¦ä¸€ä¸ªç‹¬ç«‹çš„ä¸Šä¸‹æ–‡ç¯å¢ƒé‡Œã€‚ æœ‰åŠ©äºé˜»æ­¢ç½‘ç«™è®¿é—®Electron çš„å†…éƒ¨ç»„ä»¶å’Œ é¢„åŠ è½½è„šæœ¬å¯è®¿é—®çš„é«˜ç­‰çº§æƒé™çš„APIã€‚ç®€è€Œè¨€ä¹‹å°±æ˜¯æä¾›ä¸€ä¸ªå…¥å£ç»™æ¸²æŸ“è¿›ç¨‹(å‰ç«¯é¡µé¢)ä½¿ç”¨ï¼Œé¿å…è¢«æ”»å‡»è€…éšæ„è°ƒç”¨electronå†…éƒ¨APIã€‚

  ```javascript
  const { contextBridge, ipcRenderer } = require('electron/renderer')
  contextBridge.exposeInMainWorld('electronAPI', {
    setTitle: (title) => ipcRenderer.send('set-title', title),
  })

  ```

#### é¡µé¢ç¤ºä¾‹

é€šä¿¡é€»è¾‘å®ç°åï¼Œæ¥ä¸‹æ¥å°±ç”¨ä¸€ä¸ªé¡µé¢æ¥éªŒè¯ç»“æœ

* src/vue-project/pages/renderToMain/OneWay.vue

  ```javascript
  <template>
    <div>
      <input v-model="inputVal" />
      <div>
        <button @click="onClick">render-process to set app title</button>
      </div>
    </div>
  </template>

  <script setup>
  import { ref } from 'vue'
  const inputVal = ref('')
  const onClick = () => {
  	// è°ƒç”¨electronå¯¹å¤–æä¾›çš„æ–¹æ³•ï¼Œå³preload.jså¯¹å¤–æš´éœ²çš„API
    electronAPI.setTitle(inputVal.value)
  }
  </script>

  ```
* src/vue-project/router/index.js

  ```javascript
  import { createWebHashHistory, createRouter } from 'vue-router'

  import HomeView from '@/vue-project/pages/home/index.vue'
  import RenderToMain from '@/vue-project/pages/renderToMain/OneWay.vue'

  const routes = [
    { path: '/', component: HomeView },
    // æ³¨å†Œç¤ºä¾‹é¡µé¢è·¯ç”±
    { path: '/renderToMain', component: RenderToMain },
  ]
  const router = createRouter({
    history: createWebHashHistory(),
    routes,
  })

  export default router;

  ```
* src/vue-project/App.vue

  ```javascript
  <template>
    <h1>ğŸ–¥ï¸ Hello World!</h1>
    <p>Welcome to your Electron application.</p>
    <p>
      <strong>Current route path:</strong> {{ $route.fullPath }}
    </p>
    <nav>
      <div>
        <RouterLink to="/">Go to Home</RouterLink>
      </div>
      <div>
        <RouterLink to="/renderToMain">Render-Process <span style="font-size: 10px;">--></span> Main-Process</RouterLink>
      </div>
    </nav>
    <div style="margin-top: 20px; border: 1px solid grey; padding: 20px; border-radius: 10px;">
      <router-view></router-view>
    </div>
  </template>

  <script setup>
  </script>

  ```

#### é¡¹ç›®ç»“æ„

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/6eac7412788b489dbf264751824643bc.png)