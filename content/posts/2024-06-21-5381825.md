---
layout: post
title: "自动化测试中Python与CC的混合使用"
date: 2024-06-21 14:51:03 +0800
description: "背景 项目的 自动化测试中已经使用了基于Python 脚本的框架，自动化过程中最关键的问题就是如何实"
keywords: "python 单元测试 c++代码"
categories: ['测试技术']
tags: ['语言', '脚本', '测试', '扩展', 'Python', 'Makefile']
artid: "5381825"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=5381825
    alt: "自动化测试中Python与CC的混合使用"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=5381825
featuredImagePreview: https://bing.ee123.net/img/rand?artid=5381825
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     自动化测试中Python与C/C++的混合使用
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <div class="Section0">
     <p class="p15" style="margin-bottom: 0pt; margin-top: 0pt; text-align: center;">
      <span style="font-size: 16pt; font-family: 'Times New Roman';">
      </span>
     </p>
     <p class="p15" style="margin-bottom: 0pt; margin-top: 0pt;">
      <span style="font-size: 14pt; background: none repeat scroll 0% 0% #ffff00; font-family: 'Times New Roman';">
       背景
      </span>
     </p>
     <p class="p0" style="text-indent: 21pt; margin-bottom: 0pt; margin-top: 0pt;">
      <span style="font-size: 10.5pt; font-family: '宋体';">
       项目的
      </span>
      <span style="font-size: 10.5pt; font-family: 'Calibri';">
       自动化测试中已经使用了基于
       <span style="font-family: Calibri;">
        Python
       </span>
       <span style="font-family: 宋体;">
        脚本的框架，自动化过程中最关键的问题就是如何实现桩模块。运用
       </span>
       <span style="font-family: Calibri;">
        Python
       </span>
       <span style="font-family: 宋体;">
        强大的功能，实现任何桩模块都是可能的，但是是否必须完全使用
       </span>
       <span style="font-family: Calibri;">
        Python
       </span>
       <span style="font-family: 宋体;">
        实现模块逻辑，成本是一个决定性因素。在桩模块逻辑简单的情况下，使用
       </span>
       <span style="font-family: Calibri;">
        Python
       </span>
       <span style="font-family: 宋体;">
        模拟模块逻辑不但使自动化测试的结构清晰，也具有更好的灵活性，但是如果桩模块逻辑复杂，实现起来可能要耗费很大的成本，也容易由于桩模块逻辑与实际不符导致测试结果不可信。在这种情况下，如果能够借用
       </span>
       <span style="font-family: Calibri;">
        RD
       </span>
       <span style="font-family: 宋体;">
        开发的某些代码段
       </span>
       <span style="font-family: Calibri;">
        /
       </span>
       <span style="font-family: 宋体;">
        库，将会对测试自动化带来很多效益。
       </span>
      </span>
     </p>
     <p class="p0" style="text-indent: 21pt; margin-bottom: 0pt; margin-top: 0pt;">
      <span style="font-size: 10.5pt; font-family: 'Calibri';">
       另外，在
       <span style="font-family: Calibri;">
        Python
       </span>
       <span style="font-family: 宋体;">
        中调用
       </span>
       <span style="font-family: Calibri;">
        C/C++
       </span>
       <span style="font-family: 宋体;">
        代码的方法也可能应用于
       </span>
       <span style="font-family: Calibri;">
        C/C++
       </span>
       <span style="font-family: 宋体;">
        库的测试中，这种测试方法的可行性还有待研究。
       </span>
      </span>
     </p>
     <p class="p0" style="text-indent: 21pt; margin-bottom: 0pt; margin-top: 0pt;">
      <span style="font-size: 10.5pt; font-family: 'Calibri';">
       以下总结出几种在
       <span style="font-family: Calibri;">
        Python
       </span>
       <span style="font-family: 宋体;">
        中调用
       </span>
       <span style="font-family: Calibri;">
        C/C++
       </span>
       <span style="font-family: 宋体;">
        代码的方法
       </span>
      </span>
     </p>
     <p class="p0" style="margin-bottom: 0pt; margin-top: 0pt;">
     </p>
     <p class="p15" style="margin-bottom: 0pt; margin-top: 0pt;">
      <span style="font-size: 14pt; background: none repeat scroll 0% 0% #ffff00; font-family: 'Arial';">
       使用
       <span style="font-family: Arial;">
        ctypes
       </span>
       <span style="font-family: 宋体;">
        模块调用
       </span>
       <span style="font-family: Arial;">
        C
       </span>
       <span style="font-family: 宋体;">
        动态库
       </span>
      </span>
     </p>
     <p class="p0" style="text-indent: 21pt; margin-bottom: 0pt; margin-top: 0pt;">
      <span style="font-size: 10.5pt; font-family: 'Calibri';">
       从
       <span style="font-family: Calibri;">
        Python2.5
       </span>
       <span style="font-family: 宋体;">
        开始，
       </span>
       <span style="font-family: Calibri;">
        Python
       </span>
       <span style="font-family: 宋体;">
        开始提供
       </span>
       <span style="font-family: Calibri;">
        ctypes
       </span>
       <span style="font-family: 宋体;">
        模块来提供对
       </span>
       <span style="font-family: Calibri;">
        C
       </span>
       <span style="font-family: 宋体;">
        语言编译的动态库文件的调用。注意，
       </span>
      </span>
      <span style="font-weight: bold; font-size: 10.5pt; font-family: 'Calibri';">
       这里特指
       <span style="font-family: Calibri;">
        C
       </span>
       <span style="font-family: 宋体;">
        的动态库
       </span>
      </span>
      <span style="font-size: 10.5pt; font-family: 'Calibri';">
       ，用
       <span style="font-family: Calibri;">
        C++
       </span>
       <span style="font-family: 宋体;">
        编译的动态库
       </span>
       <span style="font-family: Calibri;">
        ctypes
       </span>
       <span style="font-family: 宋体;">
        虽然能够加载，但调用时的函数名已经由于
       </span>
       <span style="font-family: Calibri;">
        C++
       </span>
       <span style="font-family: 宋体;">
        的重载特性被加以修改，难以调用。 使用
       </span>
       <span style="font-family: Calibri;">
        ctypes
       </span>
       <span style="font-family: 宋体;">
        调用
       </span>
       <span style="font-family: Calibri;">
        C
       </span>
       <span style="font-family: 宋体;">
        动态库的好处在于不用进行额外的开发，可以直接使用编译好的动态库。
       </span>
       <span style="font-family: Calibri;">
        ctypes
       </span>
       <span style="font-family: 宋体;">
        提供了完整的
       </span>
       <span style="font-family: Calibri;">
        C
       </span>
       <span style="font-family: 宋体;">
        类型封装，也支持自定义类型，大大减少在调用过程中的工作量。
       </span>
       <span style="font-family: Calibri;">
        ctypes
       </span>
       <span style="font-family: 宋体;">
        的使用很简单，只需熟悉
       </span>
       <span style="font-family: Calibri;">
        python
       </span>
       <span style="font-family: 宋体;">
        封装与
       </span>
       <span style="font-family: Calibri;">
        C
       </span>
       <span style="font-family: 宋体;">
        中的对应关系即可。以下用一个简单的例子来说明：
       </span>
      </span>
     </p>
     <p class="p0" style="margin-bottom: 12pt; margin-top: 0pt; text-align: left; line-height: 16.8pt; background: none repeat scroll 0% 0% #ffffcc;">
      <span style="color: #a52a2a; font-size: 12pt; font-family: '宋体';">
       from
      </span>
      <span style="color: #7a4707; font-size: 12pt; font-family: '宋体';">
       ctypes
      </span>
      <span style="color: #a52a2a; font-size: 12pt; font-family: '宋体';">
       import
      </span>
      <span style="color: #7a4707; font-size: 12pt; font-family: '宋体';">
       *
      </span>
      <span style="color: #008000; font-size: 12pt; font-family: '宋体';">
       #导入ctypes模块
      </span>
     </p>
     <p class="p0" style="margin-bottom: 12pt; margin-top: 12pt; text-align: left; line-height: 16.8pt; background: none repeat scroll 0% 0% #ffffcc;">
      <span style="color: #7a4707; font-size: 12pt; font-family: '宋体';">
       libc = cdll.LoadLibrary("libc.so.6")
      </span>
      <span style="color: #008000; font-size: 12pt; font-family: '宋体';">
       #加载libc动态库
      </span>
     </p>
     <p class="p0" style="margin-bottom: 12pt; margin-top: 12pt; text-align: left; line-height: 16.8pt; background: none repeat scroll 0% 0% #ffffcc;">
      <span style="color: #800000; font-size: 12pt; font-family: '宋体';">
       str
      </span>
      <span style="color: #7a4707; font-size: 12pt; font-family: '宋体';">
       = c_char_p('
      </span>
      <span style="color: #0000ff; font-size: 12pt; font-family: '宋体';">
       Hello World!
      </span>
      <span style="color: #7a4707; font-size: 12pt; font-family: '宋体';">
       ')
      </span>
      <span style="color: #008000; font-size: 12pt; font-family: '宋体';">
       #使用char *在ctypes中的对应封装c_char_p，相当于char* str=”Hello World!”
      </span>
     </p>
     <p class="p0" style="margin-bottom: 0pt; margin-top: 12pt; text-align: left; line-height: 16.8pt; background: none repeat scroll 0% 0% #ffffcc;">
      <span style="color: #7a4707; font-size: 12pt; font-family: '宋体';">
       libc.printf(“yell: %s/n”,
      </span>
      <span style="color: #800000; font-size: 12pt; font-family: '宋体';">
       str
      </span>
      <span style="color: #7a4707; font-size: 12pt; font-family: '宋体';">
       )
      </span>
      <span style="color: #008000; font-size: 12pt; font-family: '宋体';">
       #调用printf函数
      </span>
     </p>
     <p class="p0" style="text-indent: 21pt; margin-bottom: 0pt; margin-top: 0pt;">
      <span style="font-size: 10.5pt; font-family: 'Calibri';">
       ctypes
       <span style="font-family: 宋体;">
        的功能当然远不止这些，有兴趣的同学可以参考这里
       </span>
      </span>
      <a href="http://docs.python.org/library/ctypes.html" rel="nofollow">
       <span style="font-size: 10.5pt; font-family: 'Calibri';">
        http://docs.python.org/library/ctypes.html
       </span>
      </a>
     </p>
     <p class="p0" style="margin-bottom: 0pt; margin-top: 0pt;">
     </p>
     <p class="p15" style="margin-bottom: 0pt; margin-top: 0pt;">
      <span style="font-size: 14pt; background: none repeat scroll 0% 0% #ffff00; font-family: '宋体';">
       使用
       <span style="font-family: Arial;">
        Python
       </span>
       <span style="font-family: 宋体;">
        的扩展（
       </span>
       <span style="font-family: Arial;">
        Extending
       </span>
       <span style="font-family: 宋体;">
        ）机制
       </span>
      </span>
     </p>
     <p class="p0" style="text-indent: 21pt; margin-bottom: 0pt; margin-top: 0pt;">
      <span style="font-size: 10.5pt; font-family: '宋体';">
       ctypes
       <span style="font-family: 宋体;">
        很方便地可以调用
       </span>
       <span style="font-family: Calibri;">
        C
       </span>
       <span style="font-family: 宋体;">
        的动态库，但是对
       </span>
       <span style="font-family: Calibri;">
        C++
       </span>
       <span style="font-family: 宋体;">
        编译的动态库，调用起来很困难。这种情况利用
       </span>
       <span style="font-family: Calibri;">
        Python
       </span>
       <span style="font-family: 宋体;">
        的
       </span>
       <span style="font-family: Calibri;">
        Extending
       </span>
       <span style="font-family: 宋体;">
        机制就可以解决。
       </span>
       <span style="font-family: Calibri;">
        Python
       </span>
       <span style="font-family: 宋体;">
        提供了一套完整的框架来使用
       </span>
       <span style="font-family: Calibri;">
        C/C++
       </span>
       <span style="font-family: 宋体;">
        编写扩展库，可以很灵活的开发
       </span>
       <span style="font-family: Calibri;">
        C++
       </span>
       <span style="font-family: 宋体;">
        扩展模块。这种方法的缺点是工作量比较大，需要为每一个方法编写接口，这里不做详细介绍，可以参考：
       </span>
       <span style="font-family: Calibri;">
        http://docs.python.org/extending/extending.html#writing-extensions-in-c
       </span>
      </span>
     </p>
     <p class="p16" style="margin-left: 24.75pt; margin-bottom: 0pt; margin-top: 0pt;">
     </p>
     <p class="p16" style="margin-left: 24.75pt; margin-bottom: 0pt; margin-top: 0pt;">
      <span style="font-size: 10.5pt; font-family: '宋体';">
       那么有什么办法可以高效的调用
       <span style="font-family: Calibri;">
        C++
       </span>
       <span style="font-family: 宋体;">
        动态库呢，答案是
       </span>
       <span style="font-family: Calibri;">
        SWIG
       </span>
       <span style="font-family: 宋体;">
        。
       </span>
      </span>
     </p>
     <p class="p15" style="margin-bottom: 0pt; margin-top: 0pt;">
      <span style="font-size: 14pt; background: none repeat scroll 0% 0% #ffff00; font-family: '宋体';">
       使用
       <span style="font-family: Arial;">
        SWIG
       </span>
       <span style="font-family: 宋体;">
        生成扩展模块
       </span>
      </span>
     </p>
     <p class="p0" style="text-indent: 21pt; margin-bottom: 0pt; margin-top: 0pt;">
      <span style="font-size: 10.5pt; font-family: '宋体';">
       上面提到了
       <span style="font-family: Calibri;">
        Python
       </span>
       <span style="font-family: 宋体;">
        的扩展机制，缺点是工作量比较大，这里介绍一个工具
       </span>
       <span style="font-family: Calibri;">
        SWIG
       </span>
       <span style="font-family: 宋体;">
        。
       </span>
       <span style="font-family: Calibri;">
        SWIG
       </span>
       <span style="font-family: 宋体;">
        是一种简化脚本语言与
       </span>
       <span style="font-family: Calibri;">
        C/C++
       </span>
       <span style="font-family: 宋体;">
        接口的开发工具，通过包装和编译
       </span>
       <span style="font-family: Calibri;">
        C
       </span>
       <span style="font-family: 宋体;">
        语言程序来达到与脚本语言通讯目的的工具。它正是基于
       </span>
       <span style="font-family: Calibri;">
        Python
       </span>
       <span style="font-family: 宋体;">
        的扩展机制，自动生成接口文件，再编译成可以被
       </span>
       <span style="font-family: Calibri;">
        Python
       </span>
       <span style="font-family: 宋体;">
        调用的动态库扩展模块。
       </span>
      </span>
     </p>
     <p class="p0" style="margin-bottom: 0pt; margin-top: 0pt;">
     </p>
     <p class="p0" style="margin-bottom: 0pt; margin-top: 0pt;">
      <span style="font-size: 10.5pt; font-family: '宋体';">
       使用
       <span style="font-family: Calibri;">
        SWIG
       </span>
       <span style="font-family: 宋体;">
        生成扩展模块分为以下几步：
       </span>
      </span>
     </p>
     <p class="p0" style="text-indent: 21pt; margin-bottom: 0pt; margin-top: 0pt;">
      <span style="font-size: 10.5pt; font-family: '宋体';">
       将需要调用的代码编译成目标文件
       <span style="font-family: Calibri;">
        (.o)
       </span>
      </span>
     </p>
     <p class="p0" style="text-indent: 21pt; margin-bottom: 0pt; margin-top: 0pt;">
      <span style="font-size: 10.5pt; font-family: '宋体';">
       用
       <span style="font-family: Calibri;">
        SWIG
       </span>
       <span style="font-family: 宋体;">
        读取编写描述文件
       </span>
       <span style="font-family: Calibri;">
        (.i)
       </span>
       <span style="font-family: 宋体;">
        ，生成接口文件
       </span>
       <span style="font-family: Calibri;">
        (.cxx)
       </span>
       <span style="font-family: 宋体;">
        ；
       </span>
      </span>
     </p>
     <p class="p0" style="text-indent: 21pt; margin-bottom: 0pt; margin-top: 0pt;">
      <span style="font-size: 10.5pt; font-family: '宋体';">
       将接口文件编译为目标文件
       <span style="font-family: Calibri;">
        (.o)
       </span>
      </span>
     </p>
     <p class="p0" style="text-indent: 21pt; margin-bottom: 0pt; margin-top: 0pt;">
      <span style="font-size: 10.5pt; font-family: '宋体';">
       将接口文件的目标文件和原代码段的目标文件一起编译成动态库
      </span>
     </p>
     <p class="p0" style="margin-bottom: 0pt; margin-top: 0pt;">
     </p>
     <p class="p0" style="margin-bottom: 0pt; margin-top: 0pt;">
      <span style="font-size: 10.5pt; font-family: '宋体';">
       以下举例说明：
      </span>
     </p>
     <p class="p0" style="margin-bottom: 0pt; margin-top: 0pt;">
      <span style="font-size: 10.5pt; font-family: '宋体';">
       假设有如下文件
      </span>
     </p>
     <p class="p0" style="margin-bottom: 0pt; margin-top: 0pt;">
      <span style="font-size: 10.5pt; font-family: '宋体';">
       swig_ex.cpp
      </span>
      <span style="font-size: 10.5pt; font-family: '宋体';">
       需要转换成扩展库的原始代码，包含一个
       <span style="font-family: Calibri;">
        int fact(int)
       </span>
       <span style="font-family: 宋体;">
        函数
       </span>
      </span>
     </p>
     <p class="p0" style="margin-bottom: 0pt; margin-top: 0pt;">
      <span style="font-size: 10.5pt; font-family: '宋体';">
       swig_ex.h
      </span>
      <span style="font-size: 10.5pt; font-family: '宋体';">
       原始代码的头文件
      </span>
     </p>
     <p class="p0" style="margin-bottom: 0pt; margin-top: 0pt;">
      <span style="font-size: 10.5pt; font-family: '宋体';">
       swig_ex.i
      </span>
      <span style="font-size: 10.5pt; font-family: '宋体';">
       SWIG
       <span style="font-family: 宋体;">
        描述文件
       </span>
      </span>
     </p>
     <p class="p0" style="margin-bottom: 0pt; margin-top: 0pt;">
      <span style="font-size: 10.5pt; font-family: '宋体';">
       swig_ex.i
       <span style="font-family: 宋体;">
        是一个描述文件，有
       </span>
       <span style="font-family: Calibri;">
        SWIG
       </span>
       <span style="font-family: 宋体;">
        自己的语法，比较简单，内容如下：
       </span>
      </span>
     </p>
     <p class="p0" style="margin-bottom: 0pt; margin-top: 0pt;">
     </p>
     <p class="p0" style="margin-bottom: 12pt; margin-top: 12pt; text-align: left; line-height: 16.8pt; background: none repeat scroll 0% 0% #ffffcc;">
      <span style="color: #7a4707; font-size: 12pt; font-family: '宋体';">
       %module swig_ex
      </span>
     </p>
     <p class="p0" style="margin-bottom: 12pt; margin-top: 12pt; text-align: left; line-height: 16.8pt; background: none repeat scroll 0% 0% #ffffcc;">
      <span style="color: #7a4707; font-size: 12pt; font-family: '宋体';">
       %{
       <!-- -->
      </span>
     </p>
     <p class="p0" style="margin-bottom: 12pt; margin-top: 12pt; text-align: left; line-height: 16.8pt; background: none repeat scroll 0% 0% #ffffcc;">
      <span style="color: #7a4707; font-size: 12pt; font-family: '宋体';">
       #define SWIG_FILE_WITH_INIT
      </span>
     </p>
     <p class="p0" style="margin-bottom: 12pt; margin-top: 12pt; text-align: left; line-height: 16.8pt; background: none repeat scroll 0% 0% #ffffcc;">
      <span style="color: #7a4707; font-size: 12pt; font-family: '宋体';">
       #include "swig_ex.h"
      </span>
     </p>
     <p class="p0" style="margin-bottom: 12pt; margin-top: 12pt; text-align: left; line-height: 16.8pt; background: none repeat scroll 0% 0% #ffffcc;">
      <span style="color: #7a4707; font-size: 12pt; font-family: '宋体';">
       %}
      </span>
     </p>
     <p class="p0" style="margin-bottom: 12pt; margin-top: 12pt; text-align: left; line-height: 16.8pt; background: none repeat scroll 0% 0% #ffffcc;">
      <span style="color: #7a4707; font-size: 12pt; font-family: '宋体';">
       int fact(int n);
      </span>
     </p>
     <p class="p0" style="margin-bottom: 0pt; margin-top: 0pt;">
     </p>
     <p class="p0" style="margin-bottom: 0pt; margin-top: 0pt;">
      <span style="font-size: 10.5pt; font-family: '宋体';">
       再写一个
       <span style="font-family: Calibri;">
        Makefile
       </span>
       <span style="font-family: 宋体;">
        来把这些文件编译成动态库
       </span>
       <span style="font-family: Calibri;">
        :
       </span>
      </span>
     </p>
     <p class="p0" style="margin-bottom: 0pt; margin-top: 0pt;">
      <span style="font-size: 10.5pt; font-family: 'Calibri';">
       all: swig_ex.o swig_ex_wrap.o _swig_ex.so
      </span>
     </p>
     <p class="p0" style="margin-bottom: 0pt; margin-top: 0pt;">
      <span style="font-size: 10.5pt; font-family: '宋体';">
       swig_ex.o: swig_ex.cpp swig_ex.h #
       <span style="font-family: 宋体;">
        编译源文件
       </span>
      </span>
     </p>
     <p class="p0" style="margin-bottom: 0pt; margin-top: 0pt;">
      <span style="font-size: 10.5pt; font-family: 'Calibri';">
       g++ -fPIC -c swig_ex.cpp
      </span>
     </p>
     <p class="p0" style="margin-bottom: 0pt; margin-top: 0pt;">
      <span style="font-size: 10.5pt; font-family: '宋体';">
       swig_ex_wrap.o: swig_ex.i swig_ex.o #
       <span style="font-family: 宋体;">
        根据
       </span>
       <span style="font-family: Calibri;">
        SWIG
       </span>
       <span style="font-family: 宋体;">
        描述文件
       </span>
       <span style="font-family: Calibri;">
        (.i)
       </span>
       <span style="font-family: 宋体;">
        生成接口文件
       </span>
       <span style="font-family: Calibri;">
        (.cxx)
       </span>
       <span style="font-family: 宋体;">
        ，再编译之
       </span>
      </span>
     </p>
     <p class="p0" style="margin-bottom: 0pt; margin-top: 0pt;">
      <span style="font-size: 10.5pt; font-family: 'Calibri';">
       swig -c++ -python swig_ex.i
      </span>
     </p>
     <p class="p0" style="margin-bottom: 0pt; margin-top: 0pt;">
      <span style="font-size: 10.5pt; font-family: 'Calibri';">
       g++ -O2 -fPIC -c swig_ex_wrap.cxx -I/home/work/linyi/autoframe/tool/python/include/python2.6/
      </span>
     </p>
     <p class="p0" style="margin-bottom: 0pt; margin-top: 0pt;">
      <span style="font-size: 10.5pt; font-family: '宋体';">
       _swig_ex.so: swig_ex_wrap.o #
       <span style="font-family: 宋体;">
        将目标文件打包成动态库
       </span>
      </span>
     </p>
     <p class="p0" style="margin-bottom: 0pt; margin-top: 0pt;">
      <span style="font-size: 10.5pt; font-family: 'Calibri';">
       g++ -shared swig_ex.o swig_ex_wrap.o -o _swig_ex.so
      </span>
     </p>
     <p class="p0" style="margin-bottom: 0pt; margin-top: 0pt;">
      <span style="font-size: 10.5pt; font-family: 'Calibri';">
       .PHONY: clean
      </span>
     </p>
     <p class="p0" style="margin-bottom: 0pt; margin-top: 0pt;">
      <span style="font-size: 10.5pt; font-family: 'Calibri';">
       clean:
      </span>
     </p>
     <p class="p0" style="margin-bottom: 0pt; margin-top: 0pt;">
      <span style="font-size: 10.5pt; font-family: 'Calibri';">
       rm -rf swig_ex_wrap.* swig_ex.py _swig_ex.so
      </span>
     </p>
     <p class="p0" style="margin-bottom: 0pt; margin-top: 0pt;">
     </p>
     <p class="p0" style="margin-bottom: 0pt; margin-top: 0pt;">
      <span style="font-size: 10.5pt; font-family: '宋体';">
       编译好以后会有一个
       <span style="font-family: Calibri;">
        so
       </span>
       <span style="font-family: 宋体;">
        和
       </span>
       <span style="font-family: Calibri;">
        py
       </span>
       <span style="font-family: 宋体;">
        文件，写一个
       </span>
       <span style="font-family: Calibri;">
        setup.py
       </span>
       <span style="font-family: 宋体;">
        把他们安装到
       </span>
       <span style="font-family: Calibri;">
        python
       </span>
       <span style="font-family: 宋体;">
        目录就可以和其他模块一样被
       </span>
       <span style="font-family: Calibri;">
        python
       </span>
       <span style="font-family: 宋体;">
        调用了：
       </span>
      </span>
     </p>
     <p class="p0" style="margin-bottom: 0pt; margin-top: 0pt;">
      <span style="font-size: 10.5pt; font-family: 'Calibri';">
       Import swig_ex
      </span>
     </p>
     <p class="p0" style="margin-bottom: 0pt; margin-top: 0pt;">
      <span style="font-size: 10.5pt; font-family: 'Calibri';">
       swig_ex.fact(10)
      </span>
     </p>
     <p class="p0" style="margin-bottom: 0pt; margin-top: 0pt;">
     </p>
     <p class="p0" style="margin-bottom: 0pt; margin-top: 0pt;">
      <span style="font-size: 10.5pt; font-family: '宋体';">
       参考文档地址：
       <span style="font-family: Calibri;">
        http://www.swig.org/Doc1.3/SWIGDocumentation.html
       </span>
      </span>
     </p>
     <p class="p15" style="margin-bottom: 0pt; margin-top: 0pt;">
     </p>
     <p class="p15" style="margin-bottom: 0pt; margin-top: 0pt;">
      <span style="font-size: 14pt; background: none repeat scroll 0% 0% #ffff00; font-family: '宋体';">
       原始但有效的方法
      </span>
     </p>
     <p class="p0" style="text-indent: 21pt; margin-bottom: 0pt; margin-top: 0pt;">
      <span style="font-size: 10.5pt; font-family: '宋体';">
       除了上面这些方法，在
       <span style="font-family: Calibri;">
        Python
       </span>
       <span style="font-family: 宋体;">
        中借用
       </span>
       <span style="font-family: Calibri;">
        C/C++
       </span>
       <span style="font-family: 宋体;">
        代码最原始有效的方法就是将代码编译成可执行程序，从
       </span>
       <span style="font-family: Calibri;">
        Python
       </span>
       <span style="font-family: 宋体;">
        里用
       </span>
       <span style="font-family: Calibri;">
        Popen
       </span>
       <span style="font-family: 宋体;">
        方法来调用获取输出。这种方法简单有效，缺点是不够灵活，有比较大的局限性，不过在很多情况下也已经足够了。
       </span>
      </span>
     </p>
     <p class="p0" style="margin-bottom: 0pt; margin-top: 0pt;">
     </p>
     <p class="p0" style="margin-bottom: 12pt; margin-top: 12pt; text-align: left; line-height: 16.8pt; background: none repeat scroll 0% 0% #ffffcc;">
      <span style="color: #7a4707; font-size: 12pt; font-family: '宋体';">
       pipe = os.popen('./tool –a %s –b %s' % (“hello”, “world”))
      </span>
     </p>
     <p class="p0" style="margin-bottom: 12pt; margin-top: 12pt; text-align: left; line-height: 16.8pt; background: none repeat scroll 0% 0% #ffffcc;">
      <span style="color: #7a4707; font-size: 12pt; font-family: '宋体';">
       re = pipe.read()
      </span>
     </p>
     <p class="p0" style="margin-bottom: 0pt; margin-top: 0pt;">
     </p>
     <p class="p15" style="margin-bottom: 0pt; margin-top: 0pt;">
      <span style="font-size: 14pt; background: none repeat scroll 0% 0% #ffff00; font-family: '宋体';">
       其他方法
      </span>
     </p>
     <p class="p0" style="text-indent: 21pt; margin-bottom: 0pt; margin-top: 0pt;">
      <span style="font-size: 10.5pt; font-family: '宋体';">
       以上这些方法基本上已经能满足
       <span style="font-family: Calibri;">
        Python
       </span>
       <span style="font-family: 宋体;">
        调用
       </span>
       <span style="font-family: Calibri;">
        C/C++
       </span>
       <span style="font-family: 宋体;">
        的需求了，此外还有一些方法，例如使用
       </span>
       <span style="font-family: Calibri;">
        Boost.Python
       </span>
       <span style="font-family: 宋体;">
        ，使用
       </span>
       <span style="font-family: Calibri;">
        Pyrex
       </span>
       <span style="font-family: 宋体;">
        ，这些方法都能提供
       </span>
       <span style="font-family: Calibri;">
        Python
       </span>
       <span style="font-family: 宋体;">
        与
       </span>
       <span style="font-family: Calibri;">
        C/C++
       </span>
       <span style="font-family: 宋体;">
        的交互。
       </span>
      </span>
     </p>
     <p class="p0" style="margin-bottom: 0pt; margin-top: 0pt;">
     </p>
     <p class="p15" style="margin-bottom: 0pt; margin-top: 0pt;">
      <span style="font-size: 14pt; background: none repeat scroll 0% 0% #ffff00; font-family: '宋体';">
       总结
      </span>
     </p>
     <p class="p0" style="text-indent: 21pt; margin-bottom: 0pt; margin-top: 0pt;">
      <span style="font-size: 10.5pt; font-family: '宋体';">
       在
       <span style="font-family: Calibri;">
        Python
       </span>
       <span style="font-family: 宋体;">
        中引用
       </span>
       <span style="font-family: Calibri;">
        C/C++
       </span>
       <span style="font-family: 宋体;">
        模块的方法较多，根据需要从中选择恰当的方法可以减少很多工作量。
       </span>
      </span>
     </p>
     <p class="p0" style="text-indent: 21pt; margin-bottom: 0pt; margin-top: 0pt;">
      <span style="font-size: 10.5pt; font-family: '宋体';">
       在
       <span style="font-family: Calibri;">
        Python
       </span>
       <span style="font-family: 宋体;">
        中引用
       </span>
       <span style="font-family: Calibri;">
        C/C++
       </span>
       <span style="font-family: 宋体;">
        模块弥补了
       </span>
       <span style="font-family: Calibri;">
        Python
       </span>
       <span style="font-family: 宋体;">
        脚本测试框架的很多不足，在提高代码复用率的同时，模块的性能也大大提高。
       </span>
      </span>
     </p>
    </div>
   </div>
  </div>
 </article>
 <p alt="68747470733a:2f2f626c6f672e6373646e2e6e65742f6261696475666f7275:6d2f61727469636c652f64657461696c732f35333831383235" class_="artid" style="display:none">
 </p>
</div>


