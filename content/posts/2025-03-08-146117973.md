---
layout: post
title: "使用Simulink搭建无人机串级PI控制的步骤"
date: 2025-03-08 16:15:04 +0800
description: "上述代码只是一个简化的示例，实际的无人机串级PI控制Simulink模型会更加复杂，需要考虑更多的因素和细节。"
keywords: "使用Simulink搭建无人机串级PI控制的步骤"
categories: ['无人机']
tags: ['无人机']
artid: "146117973"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146117973
    alt: "使用Simulink搭建无人机串级PI控制的步骤"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146117973
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146117973
cover: https://bing.ee123.net/img/rand?artid=146117973
image: https://bing.ee123.net/img/rand?artid=146117973
img: https://bing.ee123.net/img/rand?artid=146117973
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     使用Simulink搭建无人机串级PI控制的步骤
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-light" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
     以下是使用Simulink搭建无人机串级PI控制的一般步骤：
    </p>
    <h4>
     <a id="_2">
     </a>
     建立无人机模型
    </h4>
    <ul>
     <li>
      <strong>
       姿态运动学模型
      </strong>
      ：在Simulink中建立无人机姿态运动学模型，通常用四元数或欧拉角来描述无人机的姿态。例如，通过积分运算和三角函数关系，根据角速度计算出姿态角的变化。
     </li>
     <li>
      <strong>
       姿态动力学模型
      </strong>
      ：根据牛顿-欧拉方程建立无人机姿态动力学模型，考虑无人机的转动惯量、空气动力矩等因素，将控制输入（如电机转速）转换为姿态角加速度。
     </li>
     <li>
      <strong>
       位置运动学与动力学模型
      </strong>
      ：建立位置运动学模型来描述无人机在三维空间中的位置变化，通过对速度积分得到位置。同时，建立位置动力学模型，考虑重力、空气阻力等因素，将姿态角和推力等转换为加速度，进而得到速度和位置的变化。
     </li>
    </ul>
    <h4>
     <a id="PI_7">
     </a>
     设计串级PI控制器
    </h4>
    <ul>
     <li>
      <strong>
       外环控制器
      </strong>
      <ul>
       <li>
        <strong>
         高度控制
        </strong>
        ：对于高度控制回路，外环PI控制器的输入是期望高度与实际高度的差值，输出是期望的垂直速度。比例系数
        <span class="katex--inline">
         <span class="katex">
          <span class="katex-mathml">
           K 
            
            
            
              p 
             
            
              h 
             
            
           
          
         
           K_{p_{h}}
          </span>
          <span class="katex-html">
           <span class="base">
            <span class="strut" style="height: 0.9694em; vertical-align: -0.2861em;">
            </span>
            <span class="mord">
             <span class="mord mathnormal" style="margin-right: 0.0715em;">
              K
             </span>
             <span class="msupsub">
              <span class="vlist-t vlist-t2">
               <span class="vlist-r">
                <span class="vlist" style="height: 0.1514em;">
                 <span class="" style="top: -2.55em; margin-left: -0.0715em; margin-right: 0.05em;">
                  <span class="pstrut" style="height: 2.7em;">
                  </span>
                  <span class="sizing reset-size6 size3 mtight">
                   <span class="mord mtight">
                    <span class="mord mtight">
                     <span class="mord mathnormal mtight">
                      p
                     </span>
                     <span class="msupsub">
                      <span class="vlist-t vlist-t2">
                       <span class="vlist-r">
                        <span class="vlist" style="height: 0.3448em;">
                         <span class="" style="top: -2.3488em; margin-left: 0em; margin-right: 0.0714em;">
                          <span class="pstrut" style="height: 2.5em;">
                          </span>
                          <span class="sizing reset-size3 size1 mtight">
                           <span class="mord mtight">
                            <span class="mord mathnormal mtight">
                             h
                            </span>
                           </span>
                          </span>
                         </span>
                        </span>
                        <span class="vlist-s">
                         ​
                        </span>
                       </span>
                       <span class="vlist-r">
                        <span class="vlist" style="height: 0.1512em;">
                         <span class="">
                         </span>
                        </span>
                       </span>
                      </span>
                     </span>
                    </span>
                   </span>
                  </span>
                 </span>
                </span>
                <span class="vlist-s">
                 ​
                </span>
               </span>
               <span class="vlist-r">
                <span class="vlist" style="height: 0.2861em;">
                 <span class="">
                 </span>
                </span>
               </span>
              </span>
             </span>
            </span>
           </span>
          </span>
         </span>
        </span>
        决定了高度误差对输出速度的影响程度，积分系数
        <span class="katex--inline">
         <span class="katex">
          <span class="katex-mathml">
           K 
            
            
            
              i 
             
            
              h 
             
            
           
          
         
           K_{i_{h}}
          </span>
          <span class="katex-html">
           <span class="base">
            <span class="strut" style="height: 0.9392em; vertical-align: -0.2559em;">
            </span>
            <span class="mord">
             <span class="mord mathnormal" style="margin-right: 0.0715em;">
              K
             </span>
             <span class="msupsub">
              <span class="vlist-t vlist-t2">
               <span class="vlist-r">
                <span class="vlist" style="height: 0.3117em;">
                 <span class="" style="top: -2.55em; margin-left: -0.0715em; margin-right: 0.05em;">
                  <span class="pstrut" style="height: 2.7em;">
                  </span>
                  <span class="sizing reset-size6 size3 mtight">
                   <span class="mord mtight">
                    <span class="mord mtight">
                     <span class="mord mathnormal mtight">
                      i
                     </span>
                     <span class="msupsub">
                      <span class="vlist-t vlist-t2">
                       <span class="vlist-r">
                        <span class="vlist" style="height: 0.3448em;">
                         <span class="" style="top: -2.3488em; margin-left: 0em; margin-right: 0.0714em;">
                          <span class="pstrut" style="height: 2.5em;">
                          </span>
                          <span class="sizing reset-size3 size1 mtight">
                           <span class="mord mtight">
                            <span class="mord mathnormal mtight">
                             h
                            </span>
                           </span>
                          </span>
                         </span>
                        </span>
                        <span class="vlist-s">
                         ​
                        </span>
                       </span>
                       <span class="vlist-r">
                        <span class="vlist" style="height: 0.1512em;">
                         <span class="">
                         </span>
                        </span>
                       </span>
                      </span>
                     </span>
                    </span>
                   </span>
                  </span>
                 </span>
                </span>
                <span class="vlist-s">
                 ​
                </span>
               </span>
               <span class="vlist-r">
                <span class="vlist" style="height: 0.2559em;">
                 <span class="">
                 </span>
                </span>
               </span>
              </span>
             </span>
            </span>
           </span>
          </span>
         </span>
        </span>
        用于消除稳态误差。
       </li>
       <li>
        <strong>
         水平位置控制
        </strong>
        ：在水平位置控制回路中，外环PI控制器根据期望位置与实际位置的偏差，输出期望的水平速度指令。比例系数和积分系数的调整要根据系统的响应特性和控制要求来确定。
       </li>
      </ul>
     </li>
     <li>
      <strong>
       内环控制器
      </strong>
      <ul>
       <li>
        <strong>
         姿态角控制
        </strong>
        ：内环PI控制器以期望姿态角和实际姿态角的差值为输入，输出控制电机的PWM信号或其他控制量。比例系数
        <span class="katex--inline">
         <span class="katex">
          <span class="katex-mathml">
           K 
            
            
            
              p 
             
            
              θ 
             
            
           
          
         
           K_{p_{\theta}}
          </span>
          <span class="katex-html">
           <span class="base">
            <span class="strut" style="height: 0.9694em; vertical-align: -0.2861em;">
            </span>
            <span class="mord">
             <span class="mord mathnormal" style="margin-right: 0.0715em;">
              K
             </span>
             <span class="msupsub">
              <span class="vlist-t vlist-t2">
               <span class="vlist-r">
                <span class="vlist" style="height: 0.1514em;">
                 <span class="" style="top: -2.55em; margin-left: -0.0715em; margin-right: 0.05em;">
                  <span class="pstrut" style="height: 2.7em;">
                  </span>
                  <span class="sizing reset-size6 size3 mtight">
                   <span class="mord mtight">
                    <span class="mord mtight">
                     <span class="mord mathnormal mtight">
                      p
                     </span>
                     <span class="msupsub">
                      <span class="vlist-t vlist-t2">
                       <span class="vlist-r">
                        <span class="vlist" style="height: 0.3448em;">
                         <span class="" style="top: -2.3488em; margin-left: 0em; margin-right: 0.0714em;">
                          <span class="pstrut" style="height: 2.5em;">
                          </span>
                          <span class="sizing reset-size3 size1 mtight">
                           <span class="mord mtight">
                            <span class="mord mathnormal mtight" style="margin-right: 0.0278em;">
                             θ
                            </span>
                           </span>
                          </span>
                         </span>
                        </span>
                        <span class="vlist-s">
                         ​
                        </span>
                       </span>
                       <span class="vlist-r">
                        <span class="vlist" style="height: 0.1512em;">
                         <span class="">
                         </span>
                        </span>
                       </span>
                      </span>
                     </span>
                    </span>
                   </span>
                  </span>
                 </span>
                </span>
                <span class="vlist-s">
                 ​
                </span>
               </span>
               <span class="vlist-r">
                <span class="vlist" style="height: 0.2861em;">
                 <span class="">
                 </span>
                </span>
               </span>
              </span>
             </span>
            </span>
           </span>
          </span>
         </span>
        </span>
        和积分系数
        <span class="katex--inline">
         <span class="katex">
          <span class="katex-mathml">
           K 
            
            
            
              i 
             
            
              θ 
             
            
           
          
         
           K_{i_{\theta}}
          </span>
          <span class="katex-html">
           <span class="base">
            <span class="strut" style="height: 0.9392em; vertical-align: -0.2559em;">
            </span>
            <span class="mord">
             <span class="mord mathnormal" style="margin-right: 0.0715em;">
              K
             </span>
             <span class="msupsub">
              <span class="vlist-t vlist-t2">
               <span class="vlist-r">
                <span class="vlist" style="height: 0.3117em;">
                 <span class="" style="top: -2.55em; margin-left: -0.0715em; margin-right: 0.05em;">
                  <span class="pstrut" style="height: 2.7em;">
                  </span>
                  <span class="sizing reset-size6 size3 mtight">
                   <span class="mord mtight">
                    <span class="mord mtight">
                     <span class="mord mathnormal mtight">
                      i
                     </span>
                     <span class="msupsub">
                      <span class="vlist-t vlist-t2">
                       <span class="vlist-r">
                        <span class="vlist" style="height: 0.3448em;">
                         <span class="" style="top: -2.3488em; margin-left: 0em; margin-right: 0.0714em;">
                          <span class="pstrut" style="height: 2.5em;">
                          </span>
                          <span class="sizing reset-size3 size1 mtight">
                           <span class="mord mtight">
                            <span class="mord mathnormal mtight" style="margin-right: 0.0278em;">
                             θ
                            </span>
                           </span>
                          </span>
                         </span>
                        </span>
                        <span class="vlist-s">
                         ​
                        </span>
                       </span>
                       <span class="vlist-r">
                        <span class="vlist" style="height: 0.1512em;">
                         <span class="">
                         </span>
                        </span>
                       </span>
                      </span>
                     </span>
                    </span>
                   </span>
                  </span>
                 </span>
                </span>
                <span class="vlist-s">
                 ​
                </span>
               </span>
               <span class="vlist-r">
                <span class="vlist" style="height: 0.2559em;">
                 <span class="">
                 </span>
                </span>
               </span>
              </span>
             </span>
            </span>
           </span>
          </span>
         </span>
        </span>
        的取值要考虑无人机的动态特性和响应速度。
       </li>
       <li>
        <strong>
         角速度控制
        </strong>
        ：有些情况下，可能还需要在姿态控制内环中加入角速度控制回路，以提高姿态控制的精度和快速性。
       </li>
      </ul>
     </li>
    </ul>
    <h4>
     <a id="Simulink_15">
     </a>
     在Simulink中搭建控制系统
    </h4>
    <ul>
     <li>
      <strong>
       连接模块
      </strong>
      ：将无人机模型的输出（如姿态角、位置等）与串级PI控制器的输入连接起来，将控制器的输出与无人机模型的控制输入连接起来，形成闭环控制系统。
     </li>
     <li>
      <strong>
       设置参数
      </strong>
      ：根据无人机的物理参数和控制要求，设置串级PI控制器的参数以及无人机模型中的各种参数。
     </li>
     <li>
      <strong>
       添加传感器模块
      </strong>
      ：添加模拟传感器模块来测量无人机的实际姿态、位置和速度等信息，将这些测量值反馈给控制器，用于实现闭环控制。
     </li>
     <li>
      <strong>
       仿真与调试
      </strong>
      ：设置仿真参数，运行仿真，观察无人机的响应曲线，如高度、位置、姿态角等随时间的变化情况。根据仿真结果，调整串级PI控制器的参数，直到系统达到满意的控制性能。
     </li>
    </ul>
    <p>
     以下是一个简单的无人机串级PI控制Simulink模型示例的部分代码（伪代码），用于说明其基本结构：
    </p>
    <pre><code class="prism language-matlab"><span class="token comment">% 定义无人机参数</span>
m <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">% 质量</span>
g <span class="token operator">=</span> <span class="token number">9.8</span><span class="token punctuation">;</span> <span class="token comment">% 重力加速度</span>
I <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0.2</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">% 转动惯量</span>

<span class="token comment">% 定义PI控制器参数</span>
Kp_h <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token comment">% 高度控制比例系数</span>
Ki_h <span class="token operator">=</span> <span class="token number">0.5</span><span class="token punctuation">;</span> <span class="token comment">% 高度控制积分系数</span>
Kp_theta <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span> <span class="token comment">% 姿态角控制比例系数</span>
Ki_theta <span class="token operator">=</span> <span class="token number">0.2</span><span class="token punctuation">;</span> <span class="token comment">% 姿态角控制积分系数</span>

<span class="token comment">% 搭建Simulink模型</span>
model <span class="token operator">=</span> <span class="token string">'drone_control_model'</span><span class="token punctuation">;</span>
<span class="token function">new_system</span><span class="token punctuation">(</span>model<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">% 建立无人机模型子系统</span>
drone_subsys <span class="token operator">=</span> <span class="token function">add_block</span><span class="token punctuation">(</span><span class="token string">'built-in/Subsystem'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>model <span class="token string">'/Drone Model'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">% 在子系统中建立姿态和位置模型，代码略</span>

<span class="token comment">% 建立高度控制PI控制器</span>
height_pi <span class="token operator">=</span> <span class="token function">add_block</span><span class="token punctuation">(</span><span class="token string">'simulink/PID Controller'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>model <span class="token string">'/Height PI'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">set_param</span><span class="token punctuation">(</span>height_pi<span class="token punctuation">,</span> <span class="token string">'Kp'</span><span class="token punctuation">,</span> <span class="token function">num2str</span><span class="token punctuation">(</span>Kp_h<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'Ki'</span><span class="token punctuation">,</span> <span class="token function">num2str</span><span class="token punctuation">(</span>Ki_h<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">% 建立姿态控制PI控制器</span>
theta_pi <span class="token operator">=</span> <span class="token function">add_block</span><span class="token punctuation">(</span><span class="token string">'simulink/PID Controller'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>model <span class="token string">'/Theta PI'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">set_param</span><span class="token punctuation">(</span>theta_pi<span class="token punctuation">,</span> <span class="token string">'Kp'</span><span class="token punctuation">,</span> <span class="token function">num2str</span><span class="token punctuation">(</span>Kp_theta<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'Ki'</span><span class="token punctuation">,</span> <span class="token function">num2str</span><span class="token punctuation">(</span>Ki_theta<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">% 连接模块</span>
<span class="token function">add_line</span><span class="token punctuation">(</span>model<span class="token punctuation">,</span> <span class="token string">'Desired Height/Out1'</span><span class="token punctuation">,</span> <span class="token string">'Height PI/In1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">add_line</span><span class="token punctuation">(</span>model<span class="token punctuation">,</span> <span class="token string">'Drone Model/Height'</span><span class="token punctuation">,</span> <span class="token string">'Height PI/In2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">add_line</span><span class="token punctuation">(</span>model<span class="token punctuation">,</span> <span class="token string">'Height PI/Out1'</span><span class="token punctuation">,</span> <span class="token string">'Theta PI/In1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">add_line</span><span class="token punctuation">(</span>model<span class="token punctuation">,</span> <span class="token string">'Drone Model/Theta'</span><span class="token punctuation">,</span> <span class="token string">'Theta PI/In2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">add_line</span><span class="token punctuation">(</span>model<span class="token punctuation">,</span> <span class="token string">'Theta PI/Out1'</span><span class="token punctuation">,</span> <span class="token string">'Drone Model/Control Input'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">% 设置仿真参数并运行仿真</span>
<span class="token function">simset</span><span class="token punctuation">(</span><span class="token string">'StopTime'</span><span class="token punctuation">,</span> <span class="token string">'10'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">sim</span><span class="token punctuation">(</span>model<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
    <p>
     上述代码只是一个简化的示例，实际的无人机串级PI控制Simulink模型会更加复杂，需要考虑更多的因素和细节。
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f:2f626c6f672e6373646e2e6e65742f6875616e67686d38382f:61727469636c652f64657461696c732f313436313137393733" class_="artid" style="display:none">
 </p>
</div>


