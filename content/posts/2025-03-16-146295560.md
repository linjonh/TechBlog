---
layout: post
title: "使用GoldenGate完成SQLserver到Oracle的数据实时同步"
date: 2025-03-16 15:03:12 +0800
description: "使用GoldenGate完成SQLserver到Oracle的数据实时同步"
keywords: "使用GoldenGate完成SQLserver到Oracle的数据实时同步"
categories: ['Windows', 'Server', '2008']
tags: ['数据库', 'Sqlserver', 'Oracle']
artid: "146295560"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146295560
    alt: "使用GoldenGate完成SQLserver到Oracle的数据实时同步"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146295560
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146295560
cover: https://bing.ee123.net/img/rand?artid=146295560
image: https://bing.ee123.net/img/rand?artid=146295560
img: https://bing.ee123.net/img/rand?artid=146295560
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     使用GoldenGate完成SQLserver到Oracle的数据实时同步
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h2>
     <a id="_4">
     </a>
     <strong>
      一、环境准备
     </strong>
    </h2>
    <table>
     <thead>
      <tr>
       <th>
        <em>
         <strong>
          *项目*
         </strong>
        </em>
       </th>
       <th>
        <em>
         <strong>
          *源环境*
         </strong>
        </em>
       </th>
       <th>
        <em>
         <strong>
          *目标环境*
         </strong>
        </em>
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        操作系统
       </td>
       <td>
        CentOS Linux release 7.6
       </td>
       <td>
        CentOS Linux release 7.6
       </td>
      </tr>
      <tr>
       <td>
        IP地址
       </td>
       <td>
        192.168.3.92
       </td>
       <td>
        192.168.3.168
       </td>
      </tr>
      <tr>
       <td>
        数据库及版本
       </td>
       <td>
        SQLserver 2016
       </td>
       <td>
        Oracle 11.2.0.4.0
       </td>
      </tr>
      <tr>
       <td>
        GoldenGate用户
       </td>
       <td>
        ogg
       </td>
       <td>
        ogg
       </td>
      </tr>
      <tr>
       <td>
        GoldenGate版本
       </td>
       <td>
        12.3.0.2.0
       </td>
       <td>
        12.3.0.2.0
       </td>
      </tr>
     </tbody>
    </table>
    <h2>
     <a id="OGG_16">
     </a>
     二、OGG架构
    </h2>
    <p>
     GoldenGate v11 能够在异构平台之间实现事务级的复制。它支持 Oracle Database、IBM DB2、Microsoft SQL Server、MySQL、Teradata 以及众多其他平台。（它还支持通过通用 ODBC 驱动程序进行访问）
    </p>
    <p>
     我们需要熟悉的最重要的组件是 Extract 和 Replicat 进程。Extract 进程运行在源系统上，负责捕获数据更改。Replicat 运行在目标计算机上，负责将更改应用于目标数据库。
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/6a594d5b4ae74a3fad7daaeb140b1e65.png"/>
    </p>
    <p>
     以上是 Extract 进程的两个常见配置。所谓的“初始加载”用于用源数据的精确副本填充目标数据库（即 Extract 从源数据库提取所有数据并且通常只运行一次）。然后就可以进行“更改同步”。在“更改同步”配置中，Extract 不间断地监视源数据库并即时捕获所有更改。
    </p>
    <h2>
     <a id="OGG_27">
     </a>
     三、OGG安装
    </h2>
    <p>
     在Oracle用户下新建gg目录，
    </p>
    <pre><code class="prism language-bash"><span class="token punctuation">[</span>oracle@szzf-----0024 oracle<span class="token punctuation">]</span>$ <span class="token function">mkdir</span> gg

<span class="token punctuation">[</span>oracle@szzf-----0024 gg<span class="token punctuation">]</span>$ <span class="token builtin class-name">export</span> <span class="token assign-left variable">GGATE</span><span class="token operator">=</span><span class="token variable">$ORACLE_BASE</span>/gg

<span class="token punctuation">[</span>oracle@szzf-----0024 gg<span class="token punctuation">]</span>$ <span class="token builtin class-name">export</span> <span class="token assign-left variable">LD_LIBRARY_PATH</span><span class="token operator">=</span><span class="token variable">$ORACLE_HOME</span>/lib:<span class="token variable">$ORACLE_BASE</span>/gg
</code></pre>
    <p>
     新建完成后设置环境变量：
    </p>
    <p>
     完成该操作后，需要设置 PATH 和 LD_LIBRARY_PATH 环境变量。
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/406c1820c0e945dc9b1e78d99eeec372.png"/>
    </p>
    <pre><code class="prism language-bash">查看环境变量参数：<span class="token punctuation">[</span>oracle@szzf-----0024 ~<span class="token punctuation">]</span>$ <span class="token function">cat</span> .bash_profile
</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/959c89af8e5b45139422031d306a95b6.png"/>
    </p>
    <p>
     上传安装包至服务器：
    </p>
    <pre><code class="prism language-bash"><span class="token punctuation">[</span>oracle@szzf-----0024 opt<span class="token punctuation">]</span>$ <span class="token function">tar</span> <span class="token parameter variable">-xvf</span> fbo_ggs_Linux_x64_ora11g_64bit.tar <span class="token parameter variable">-C</span> /u01/oracle/gg
</code></pre>
    <p>
     进入相应的目录：
    </p>
    <pre><code class="prism language-bash"><span class="token punctuation">[</span>oracle@szzf-----0024 gg<span class="token punctuation">]</span>$ ./ggsci
</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/b00449e5a9b04434ac6cd5a0fe96f04d.png"/>
    </p>
    <p>
     GGSCI (szzf-----0024.novalocal) 2&gt; create subdirs
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/dce57e48d5924a1ca0986ae678405754.png"/>
    </p>
    <p>
     配置manager端口号
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/7f7283ead9ee4e82b26dab7ddfc89738.png"/>
    </p>
    <p>
     启动mgr进程：
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/b4c7da5ce9c147c6aa06bb3686fdb8e6.png"/>
    </p>
    <p>
     查看进程是否正常：
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/88d04c236d0942a288603c7ca14f5161.png"/>
    </p>
    <p>
     源端replicat进程配置
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/b3df2e6bbc994bdb8aa5382fb6344e96.png"/>
    </p>
    <p>
     SPECIALRUN 参数定义一个初始加载进程（这是不使用检查点的一次性加载）。文件中的下一行指示 Replicat 进程在加载完成后终止。
    </p>
    <p>
     接下来提供了数据库用户和口令、提取文件以及表定义。最后一个参数 MAP 指示 Replicat 将表 dbo.* 重新映射到 GG.*。
    </p>
    <h2>
     <a id="_99">
     </a>
     四、初始提取和加载
    </h2>
    <p>
     源端：
    </p>
    <pre><code class="prism language-bash">C:<span class="token punctuation">\</span>Users<span class="token punctuation">\</span>Administrator<span class="token punctuation">\</span>Desktop<span class="token punctuation">\</span>V34342-0<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span>extract paramfile dirprm<span class="token punctuation">\</span>inext.prm reportfile dirrpt<span class="token punctuation">\</span>inext.rpt

 

***********************************************************************

**       Running with the following parameters          **

***********************************************************************

 

<span class="token number">2025</span>-02-26 09:46:55  INFO   OGG-03035  Operating system character <span class="token builtin class-name">set</span> identifie

d as GBK. Locale: zh_Hans_CN, <span class="token environment constant">LC_ALL</span>:.

 

<span class="token number">2025</span>-02-26 09:46:55  INFO   OGG-02696  NON-ANSI SQL parameter syntax is used fo

r parameter parsing.

 

<span class="token number">2025</span>-02-26 09:46:55  INFO   OGG-01017  Wildcard resolution <span class="token builtin class-name">set</span> to IMMEDIATE bec

ause SOURCEISTABLE is used.

 

<span class="token number">2025</span>-02-26 09:46:55  INFO   OGG-03036  Database character <span class="token builtin class-name">set</span> identified as win

dows-936. Locale: zh_Hans_CN.

 

<span class="token number">2025</span>-02-26 09:46:55  INFO   OGG-03037  Session character <span class="token builtin class-name">set</span> identified as GBK.

 

Wildcard TABLE resolved <span class="token punctuation">(</span>entry dbo.*<span class="token punctuation">)</span>:

 TABLE dbo.systranschemas<span class="token punctuation">;</span>

Using the following key columns <span class="token keyword">for</span> <span class="token builtin class-name">source</span> table dbo.systranschemas: startlsn.

 

Wildcard TABLE resolved <span class="token punctuation">(</span>entry dbo.*<span class="token punctuation">)</span>:

 TABLE dbo.t1<span class="token punctuation">;</span>

Using the following key columns <span class="token keyword">for</span> <span class="token builtin class-name">source</span> table dbo.t1: id.

 

 

<span class="token number">22025</span>-02-26 09:46:55  INFO   OGG-01815  Virtual Memory Facilities for: COM

  anon alloc: MapViewOfFile  anon free: UnmapViewOfFile

  <span class="token function">file</span> alloc: MapViewOfFile  <span class="token function">file</span> free: UnmapViewOfFile

  target directories:

  c:<span class="token punctuation">\</span>gg<span class="token punctuation">\</span>dirtmp.

 

CACHEMGR virtual memory values <span class="token punctuation">(</span>may have been adjusted<span class="token punctuation">)</span>

CACHESIZE:                 2G

CACHEPAGEOUTSIZE <span class="token punctuation">(</span>normal<span class="token punctuation">)</span>:         4M

PROCESS VM AVAIL FROM OS <span class="token punctuation">(</span>min<span class="token punctuation">)</span>:     <span class="token number">3</span>.94G

CACHESIZEMAX <span class="token punctuation">(</span>strict force to disk<span class="token punctuation">)</span>:  <span class="token number">3</span>.36G

 

<span class="token number">2025</span>-02-26 09:46:55  WARNING OGG-01842  CACHESIZE PER DYNAMIC DETERMINATION <span class="token punctuation">(</span>2G<span class="token punctuation">)</span>

 LESS THAN RECOMMENDED: 64G <span class="token punctuation">(</span>64bit system<span class="token punctuation">)</span>

vm found: <span class="token number">3</span>.94G

Check swap space. Recommended swap/extract: 128G <span class="token punctuation">(</span>64bit system<span class="token punctuation">)</span>.

 

Database Version:

Microsoft SQL Server

Version <span class="token number">10.00</span>.1600

ODBC Version 03.80.0000

 

Driver Information:

SQLSRV32.DLL

Version 06.01.7601

ODBC Version 03.52

 

<span class="token number">2025</span>-02-26 09:46:55  INFO   OGG-01478  Output <span class="token function">file</span> /u01/app/oracle/gg/dirdat/ex

 is using <span class="token function">format</span> RELEASE <span class="token number">11.2</span>.

 

<span class="token number">2025</span>-02-26 09:46:55  INFO   OGG-01226  Socket buffer size <span class="token builtin class-name">set</span> to <span class="token number">27985</span> <span class="token punctuation">(</span>flush s

ize <span class="token number">27985</span><span class="token punctuation">)</span>.

 

Processing table dbo.systranschemas

 

Processing table dbo.t1

 

***********************************************************************

<span class="token punctuation">\</span>*          ** Run Time Statistics **             *

***********************************************************************

 

 

Report at <span class="token number">2025</span>-02-26 09:48:55 <span class="token punctuation">(</span>activity since <span class="token number">2025</span>-02-26 09:48:55<span class="token punctuation">)</span>

 

Output to /u01/app/oracle/gg/dirdat/ex:

 

From Table dbo.t1:

​    <span class="token punctuation">\</span>#          inserts:      <span class="token number">4</span>

​    <span class="token punctuation">\</span>#          updates:     <span class="token number">0</span>

​    <span class="token punctuation">\</span>#          deletes:      <span class="token number">0</span>

​    <span class="token punctuation">\</span>#          discards:     <span class="token number">0</span>
</code></pre>
    <p>
     运行时统计信息显示已成功提取 4 行数据。
    </p>
    <p>
     目标端：
    </p>
    <pre><code class="prism language-bash"><span class="token punctuation">[</span>oracle@szzf-----0024 gg<span class="token punctuation">]</span>$ ./replicat paramfile dirprm/inload.prm

 

***********************************************************************

​         Oracle GoldenGate Delivery <span class="token keyword">for</span> Oracle

 Version <span class="token number">11.2</span>.1.0.3 <span class="token number">14400833</span> OGGCORE_11.2.1.0.3_PLATFORMS_120823.1258_FBO

  Linux, x64, 64bit <span class="token punctuation">(</span>optimized<span class="token punctuation">)</span>, Oracle 11g on <span class="token number">20</span>:37:31

 

Copyright <span class="token punctuation">(</span>C<span class="token punctuation">)</span>, Oracle and/or its affiliates. All rights reserved.

 

 

​          Starting at <span class="token number">2025</span>-02-26 09:49:42

***********************************************************************

 

Operating System Version:

Linux

Version <span class="token comment">#1 SMP Release 3.10.0-957.el7.x86_64</span>

Node: szzf-----0024.novalocal

Machine: x86_64

​             soft limit  hard limit

Address Space Size  <span class="token builtin class-name">:</span>   unlimited   unlimited

Heap Size       <span class="token builtin class-name">:</span>   unlimited   unlimited

File Size       <span class="token builtin class-name">:</span>   unlimited   unlimited

CPU Time       <span class="token builtin class-name">:</span>   unlimited   unlimited

 

Process id: <span class="token number">29131</span>

 

Description: 

 

***********************************************************************

**       Running with the following parameters          **

***********************************************************************

 

<span class="token number">2025</span>-02-26 09:49:42  INFO   OGG-03035  Operating system character <span class="token builtin class-name">set</span> identified as UTF-8. Locale: en_US, <span class="token environment constant">LC_ALL</span>:.

SPECIALRUN

END RUNTIME

USERID gg, PASSWORD **

 

<span class="token number">2025</span>-02-26 09:49:42  INFO   OGG-03501  WARNING: NLS_LANG environment variable is invalid or not set. Using operating system character <span class="token builtin class-name">set</span> value of AL32UTF8.

EXTFILE /u01/oracle/gg/dirdat/ex

SOURCEDEFS /u01/oracle/gg/dirdef/emp.def

 

Source Context <span class="token builtin class-name">:</span>

 SourceModule       <span class="token builtin class-name">:</span> <span class="token punctuation">[</span>er.init<span class="token punctuation">]</span>

 SourceID         <span class="token builtin class-name">:</span> <span class="token punctuation">[</span>/scratch/aime1/adestore/views/aime1_adc4150256/oggcore/OpenSys/src/app/er/init.cpp<span class="token punctuation">]</span>

 SourceFunction      <span class="token builtin class-name">:</span> <span class="token punctuation">[</span>get_infile_params<span class="token punctuation">]</span>

 SourceLine        <span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token number">1573</span><span class="token punctuation">]</span>

 ThreadBacktrace     <span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span> elements

​             <span class="token builtin class-name">:</span> <span class="token punctuation">[</span>/u01/oracle/gg/libgglog.so<span class="token punctuation">(</span>CMessageContext::AddThreadContext<span class="token punctuation">(</span><span class="token punctuation">)</span>+0x1e<span class="token punctuation">)</span> <span class="token punctuation">[</span>0x7fc852d3270e<span class="token punctuation">]</span><span class="token punctuation">]</span>

​             <span class="token builtin class-name">:</span> <span class="token punctuation">[</span>/u01/oracle/gg/libgglog.so<span class="token punctuation">(</span>CMessageFactory::CreateMessage<span class="token punctuation">(</span>CSourceContext*, unsigned int, <span class="token punctuation">..</span>.<span class="token punctuation">)</span>+0x2cc<span class="token punctuation">)</span> <span class="token punctuation">[</span>0x7fc852d2b6ac<span class="token punctuation">]</span><span class="token punctuation">]</span>

​             <span class="token builtin class-name">:</span> <span class="token punctuation">[</span>/u01/oracle/gg/libgglog.so<span class="token punctuation">(</span>_MSG_ERR_STARTUP_PARAMERROR_ERRORTEXT<span class="token punctuation">(</span>CSourceContext*, char const*, CMessageFactory::MessageDisposition<span class="token punctuation">)</span>+0x31<span class="token punctuation">)</span> <span class="token punctuation">[</span>0x7fc852d1eb8d<span class="token punctuation">]</span><span class="token punctuation">]</span>

​             <span class="token builtin class-name">:</span> <span class="token punctuation">[</span>./replicat<span class="token punctuation">(</span>get_infile_params<span class="token punctuation">(</span>time_elt_def*, time_elt_def*, char**<span class="token punctuation">)</span>+0x3c23<span class="token punctuation">)</span> <span class="token punctuation">[</span>0x528a43<span class="token punctuation">]</span><span class="token punctuation">]</span>

​             <span class="token builtin class-name">:</span> <span class="token punctuation">[</span>./replicat<span class="token punctuation">(</span>main+0x117<span class="token punctuation">)</span> <span class="token punctuation">[</span>0x54c5e7<span class="token punctuation">]</span><span class="token punctuation">]</span>

​             <span class="token builtin class-name">:</span> <span class="token punctuation">[</span>/lib64/libc.so.6<span class="token punctuation">(</span>__libc_start_main+0xf5<span class="token punctuation">)</span> <span class="token punctuation">[</span>0x7fc84d10c3d5<span class="token punctuation">]</span><span class="token punctuation">]</span>

​             <span class="token builtin class-name">:</span> <span class="token punctuation">[</span>./replicat<span class="token punctuation">(</span>__gxx_personality_v0+0x31a<span class="token punctuation">)</span> <span class="token punctuation">[</span>0x4c0c6a<span class="token punctuation">]</span><span class="token punctuation">]</span>
</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/633a54db6606440bb5c9a8cc70b9fdb2.png"/>
    </p>
    <p>
     查看情况：
    </p>
    <pre><code class="prism language-bash">SQL<span class="token operator">&gt;</span> <span class="token keyword">select</span> id, first_name from t1<span class="token punctuation">;</span>

 

ID FIRST_NAME
---------- --------------------------------------------------
   <span class="token number">1</span> Dave
   <span class="token number">2</span> Chris
   <span class="token number">3</span> David
   <span class="token number">4</span> Shawn
</code></pre>
    <p>
     EMP 表现在包含原先在 SQL Server 上插入的所有记录的副本。
    </p>
    <p>
     通过上面的配置source端和target的数据完全一致。
    </p>
    <h2>
     <a id="_415">
     </a>
     五、实时数据捕获配置
    </h2>
    <p>
     源端：
    </p>
    <p>
     Oracle Database 现在已有了 SQL Server 的 EMP 表的一个精确副本，可以创建实时捕获配置了。我们将 Extract 和 Replicat 进程配置成一直运行并不断传输/应用 EMP 表的更改。
    </p>
    <p>
     为了实现这一新配置，需要为提取和复制创建新的参数文件。不过首先必须在 SQL Server 上另外执行两个步骤：确认数据库已设置为完全恢复，然后执行 EMP 数据库的完整数据库备份。如果执行完整备份失败，将阻碍 Extract 进程捕获实时数据更改。
    </p>
    <p>
     通过右键单击 EMP 数据库，选择 属性 并检查 Recovery model 的值，可以轻松检查该数据库是否处于完全恢复模式。
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/b16f4c1231d542a5bec597d91681567d.png"/>
    </p>
    <p>
     执行完整备份也只需几次单击即可完成。右键单击 EMP 数据库，选择 任务，然后选择 备份。这将启动 Back Up Database 对话框。确认 Backup type 配置为 Full，然后单击 OK。
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/5a3d995f959243599a98eb056e675d69.png"/>
    </p>
    <p>
     备份已完成：
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/2c72eff36a37400b87d354471aa2812f.png"/>
    </p>
    <p>
     创建一个挖掘事务日志的新 extract 组，将其命名为 MSEXT。然后设置数据更改应写入的目标 (/u01/app/oracle/gg/dirdat/ms)。
    </p>
    <pre><code class="prism language-bash">GGSCI <span class="token punctuation">(</span>szzf-----0026<span class="token punctuation">)</span> <span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span> ADD EXTRACT MSEXT, TRANLOG, BEGIN NOW

EXTRACT added.

 

GGSCI <span class="token punctuation">(</span>szzf-----0026<span class="token punctuation">)</span> <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span> ADD RMTTRAIL /u01/oracle/gg/dirdat/ms, EXTRACT MSEXT

RMTTRAIL added.
</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/a55fc31ab1f648689a6a5c0f23ec6b44.png"/>
    </p>
    <p>
     添加一个新的配置文件：
    </p>
    <pre><code class="prism language-bash">GGSCI <span class="token punctuation">(</span>szzf-----0026<span class="token punctuation">)</span> <span class="token operator"><span class="token file-descriptor important">3</span>&gt;</span> EDIT PARAMS MSEXT

GGSCI <span class="token punctuation">(</span>szzf-----0026<span class="token punctuation">)</span> <span class="token operator"><span class="token file-descriptor important">4</span>&gt;</span> view PARAMS MSEXT

EXTRACT MSEXT

SOURCEDB db01 userid sa,password <span class="token number">123</span>

TRANLOGOPTIONS MANAGESECONDARYTRUNCATIONPOINT

RMTHOST <span class="token number">10.211</span>.3.168, MGRPORT <span class="token number">7809</span>

RMTTRAIL /u01/oracle/gg/dirdat/ms

TABLE dbo.*<span class="token punctuation">;</span>

 

GGSCI <span class="token punctuation">(</span>szzf-----0026<span class="token punctuation">)</span> <span class="token operator"><span class="token file-descriptor important">5</span>&gt;</span>
</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/db31158344b44f678a49e14288527bad.png"/>
    </p>
    <p>
     目标端：
    </p>
    <p>
     这里不同的是我们省略了 SOURCEISTABLE 参数并引入一个新参数：TRANLOGOPTIONS MANAGESECONDARYTRUNCATIONPOINT。此选项告诉 Extract 进程定期检查和删除 CDC 捕获作业，从而提高性能并减小捕获数据所占用的空间。
    </p>
    <p>
     源计算机上所需要的配置就是这些。我们转到目标计算机去配置复制。
    </p>
    <p>
     在 Linux 系统上，首先需要创建一个检查点表。检查点用于存储 Extract 和 Replicat 进程的当前读/写位置。它们可以防止数据丢失并确保进程可以进行故障恢复（例如，如果源和目标计算机之间的网络暂时中断）。通过在目标机上发出 ADD CHECKPOINT 命令创建一个表，用来保存检查点信息。
    </p>
    <pre><code class="prism language-bash">GGSCI <span class="token punctuation">(</span>szzf-----0024.novalocal<span class="token punctuation">)</span> <span class="token operator"><span class="token file-descriptor important">3</span>&gt;</span> DBLOGIN USERID gg, PASSWORD gg

Successfully logged into database.

 

GGSCI <span class="token punctuation">(</span>szzf-----0024.novalocal<span class="token punctuation">)</span> <span class="token operator"><span class="token file-descriptor important">4</span>&gt;</span> 

 

GGSCI <span class="token punctuation">(</span>szzf-----0024.novalocal<span class="token punctuation">)</span> <span class="token operator"><span class="token file-descriptor important">4</span>&gt;</span> ADD CHECKPOINTTABLE gg.chkpt

 

Successfully created checkpoint table gg.chkpt.

 

GGSCI <span class="token punctuation">(</span>szzf-----0024.novalocal<span class="token punctuation">)</span> <span class="token operator"><span class="token file-descriptor important">5</span>&gt;</span>
</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/8588f1100cb84864b47e5a580763d16e.png"/>
    </p>
    <pre><code class="prism language-bash">GGSCI <span class="token punctuation">(</span>szzf-----0024.novalocal<span class="token punctuation">)</span> <span class="token operator"><span class="token file-descriptor important">5</span>&gt;</span> ADD REPLICAT MSREP, EXTTRAIL /u01/oracle/gg/dirdat/ms, CHECKPOINTTABLE gg.chkpt

REPLICAT added.
</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/ca34d9832ea740989f4a58d38ab62d11.png"/>
    </p>
    <p>
     配置现已完成。下面我们来启动 Extract 和 Replicat 执行一些测试
    </p>
    <h2>
     <a id="_564">
     </a>
     <strong>
      六、启动并测试联机事务复制
     </strong>
    </h2>
    <p>
     源端：
    </p>
    <pre><code class="prism language-bash">GGSCI <span class="token punctuation">(</span>szzf-----0026<span class="token punctuation">)</span> <span class="token operator"><span class="token file-descriptor important">5</span>&gt;</span> START EXTRACT MSEXT

 

Sending START request to MANAGER <span class="token punctuation">(</span><span class="token string">'GGSMGR'</span><span class="token punctuation">)</span> <span class="token punctuation">..</span>.

EXTRACT MSEXT starting

GGSCI <span class="token punctuation">(</span>szzf-----0026<span class="token punctuation">)</span> <span class="token operator"><span class="token file-descriptor important">6</span>&gt;</span> info all

 

Program   Status    Group    Lag at Chkpt  Time Since Chkpt

 

MANAGER   RUNNING

EXTRACT   STOPPED   MSEXT    00:00:00    00:09:34

GGSCI <span class="token punctuation">(</span>szzf-----0026<span class="token punctuation">)</span> <span class="token operator"><span class="token file-descriptor important">7</span>&gt;</span>

 

GGSCI <span class="token punctuation">(</span>szzf-----0026<span class="token punctuation">)</span> <span class="token operator"><span class="token file-descriptor important">7</span>&gt;</span>
</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/5e938ead2dc445d19d9814473549ccb5.png"/>
    </p>
    <p>
     目标端：
    </p>
    <pre><code class="prism language-bash">GGSCI <span class="token punctuation">(</span>szzf-----0024.novalocal<span class="token punctuation">)</span> <span class="token operator"><span class="token file-descriptor important">8</span>&gt;</span> START REPLICAT MSREP

Sending START request to MANAGER <span class="token punctuation">..</span>.

REPLICAT MSREP starting

GGSCI <span class="token punctuation">(</span>szzf-----0024.novalocal<span class="token punctuation">)</span> <span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> info all

Program   Status    Group    Lag at Chkpt  Time Since Chkpt

MANAGER   RUNNING                      

REPLICAT   STOPPED   MSREP    00:00:00    00:03:48   

GGSCI <span class="token punctuation">(</span>szzf-----0024.novalocal<span class="token punctuation">)</span> <span class="token number">1</span><span class="token operator"><span class="token file-descriptor important">0</span>&gt;</span>
</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/53a86adffabc44a28019ee740753ab82.png"/>
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f71715f33363933363139322f:61727469636c652f64657461696c732f313436323935353630" class_="artid" style="display:none">
 </p>
</div>


