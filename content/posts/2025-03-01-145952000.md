---
layout: post
title: "基于Selenium的Python淘宝评论爬取教程"
date: 2025-03-01 19:30:20 +0800
description: "以下是一个基于 Selenium 的 Python 淘宝评论爬取教程，需要注意的是，爬取网站数据应当遵守网站的robots.txt规则和相关法律法规，淘宝有反爬机制，此教程仅用于学习交流。"
keywords: "基于Selenium的Python淘宝评论爬取教程"
categories: ['未分类']
tags: ['开发语言', 'Selenium', 'Python', 'Python', 'Python', 'Python']
artid: "145952000"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=145952000
    alt: "基于Selenium的Python淘宝评论爬取教程"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=145952000
featuredImagePreview: https://bing.ee123.net/img/rand?artid=145952000
cover: https://bing.ee123.net/img/rand?artid=145952000
image: https://bing.ee123.net/img/rand?artid=145952000
img: https://bing.ee123.net/img/rand?artid=145952000
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     基于Selenium的Python淘宝评论爬取教程
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
    </p>
    <p>
    </p>
    <hr/>
    <h2>
     <a id="_5">
     </a>
     前言
    </h2>
    <p>
     以下是一个基于 Selenium 的 Python 淘宝评论爬取教程，需要注意的是，爬取网站数据应当遵守网站的robots.txt规则和相关法律法规，淘宝有反爬机制，此教程仅用于学习交流。
    </p>
    <hr/>
    <h2>
     <a id="1__11">
     </a>
     1. 环境准备
    </h2>
    <h3>
     <a id="_Python_12">
     </a>
     安装 Python：
    </h3>
    <ul>
     <li>
      确保你的系统已经安装了 Python 3.x 版本。
     </li>
    </ul>
    <blockquote>
     <p>
      <a href="https://pan.quark.cn/s/c88059d33465" rel="nofollow">
       Python 3.12 下载地址：https://pan.quark.cn/s/c88059d33465
      </a>
     </p>
    </blockquote>
    <blockquote>
     <p>
      <a href="https://blog.csdn.net/xxjc2025/article/details/145763807">
       最新版本Python3.12安装教程：https://blog.csdn.net/xxjc2025/article/details/145763807
      </a>
     </p>
    </blockquote>
    <h3>
     <a id="_Selenium_19">
     </a>
     安装 Selenium：
    </h3>
    <ul>
     <li>
      在命令行中使用以下命令安装 Selenium 库。
     </li>
    </ul>
    <blockquote>
     <p>
      pip install selenium
     </p>
    </blockquote>
    <h3>
     <a id="_24">
     </a>
     下载浏览器驱动：
    </h3>
    <p>
     Selenium 需要对应的浏览器驱动来控制浏览器，这里以 Chrome 浏览器为例，你需要下载 ChromeDriver，下载后将其所在路径添加到系统环境变量中。
    </p>
    <h2>
     <a id="2__26">
     </a>
     2. 实现思路
    </h2>
    <ul>
     <li>
      登录淘宝账号。
     </li>
     <li>
      搜索商品并进入商品详情页。
     </li>
     <li>
      切换到商品评论页面。
     </li>
     <li>
      循环爬取评论信息。
     </li>
    </ul>
    <h2>
     <a id="3__31">
     </a>
     3. 代码实现
    </h2>
    <pre><code class="prism language-c">from selenium import webdriver
from selenium<span class="token punctuation">.</span>webdriver<span class="token punctuation">.</span>common<span class="token punctuation">.</span>by import By
from selenium<span class="token punctuation">.</span>webdriver<span class="token punctuation">.</span>common<span class="token punctuation">.</span>keys import Keys
from selenium<span class="token punctuation">.</span>webdriver<span class="token punctuation">.</span>support<span class="token punctuation">.</span>ui import WebDriverWait
from selenium<span class="token punctuation">.</span>webdriver<span class="token punctuation">.</span>support import expected_conditions as EC
import time

# 配置 Chrome 浏览器选项
options <span class="token operator">=</span> webdriver<span class="token punctuation">.</span><span class="token function">ChromeOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
# 可以根据需要设置无头模式等
<span class="token macro property"><span class="token directive-hash">#</span> <span class="token directive keyword">options</span><span class="token expression"><span class="token punctuation">.</span><span class="token function">add_argument</span><span class="token punctuation">(</span></span><span class="token char">'--headless'</span><span class="token expression"><span class="token punctuation">)</span></span></span>

# 创建 Chrome 浏览器实例
driver <span class="token operator">=</span> webdriver<span class="token punctuation">.</span><span class="token function">Chrome</span><span class="token punctuation">(</span>options<span class="token operator">=</span>options<span class="token punctuation">)</span>

# 打开淘宝登录页面
driver<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>'https<span class="token operator">:</span><span class="token comment">//login.taobao.com/member/login.jhtml')</span>

# 等待用户手动登录
<span class="token function">input</span><span class="token punctuation">(</span><span class="token string">"请手动完成登录，登录完成后按回车键继续..."</span><span class="token punctuation">)</span>

# 搜索商品
search_keyword <span class="token operator">=</span> <span class="token string">"手机"</span>
search_box <span class="token operator">=</span> driver<span class="token punctuation">.</span><span class="token function">find_element</span><span class="token punctuation">(</span>By<span class="token punctuation">.</span>ID<span class="token punctuation">,</span> <span class="token char">'q'</span><span class="token punctuation">)</span>
search_box<span class="token punctuation">.</span><span class="token function">send_keys</span><span class="token punctuation">(</span>search_keyword<span class="token punctuation">)</span>
search_box<span class="token punctuation">.</span><span class="token function">send_keys</span><span class="token punctuation">(</span>Keys<span class="token punctuation">.</span>RETURN<span class="token punctuation">)</span>

# 等待搜索结果页面加载
time<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>

# 选择第一个商品并进入详情页
first_product <span class="token operator">=</span> <span class="token function">WebDriverWait</span><span class="token punctuation">(</span>driver<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">until</span><span class="token punctuation">(</span>
    EC<span class="token punctuation">.</span><span class="token function">presence_of_element_located</span><span class="token punctuation">(</span><span class="token punctuation">(</span>By<span class="token punctuation">.</span>CSS_SELECTOR<span class="token punctuation">,</span> <span class="token char">'.J_ItemPicA'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
first_product<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

# 切换到新打开的窗口
driver<span class="token punctuation">.</span>switch_to<span class="token punctuation">.</span><span class="token function">window</span><span class="token punctuation">(</span>driver<span class="token punctuation">.</span>window_handles<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

# 等待商品详情页加载
time<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>

# 切换到评论页面
try<span class="token operator">:</span>
    comment_tab <span class="token operator">=</span> <span class="token function">WebDriverWait</span><span class="token punctuation">(</span>driver<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">until</span><span class="token punctuation">(</span>
        EC<span class="token punctuation">.</span><span class="token function">element_to_be_clickable</span><span class="token punctuation">(</span><span class="token punctuation">(</span>By<span class="token punctuation">.</span>LINK_TEXT<span class="token punctuation">,</span> <span class="token char">'评论'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
    comment_tab<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
except Exception as e<span class="token operator">:</span>
    <span class="token function">print</span><span class="token punctuation">(</span>f<span class="token string">"切换到评论页面失败: {e}"</span><span class="token punctuation">)</span>

# 循环爬取评论信息
page_num <span class="token operator">=</span> <span class="token number">1</span>
<span class="token keyword">while</span> True<span class="token operator">:</span>
    try<span class="token operator">:</span>
        # 等待评论加载
        <span class="token function">WebDriverWait</span><span class="token punctuation">(</span>driver<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">until</span><span class="token punctuation">(</span>
            EC<span class="token punctuation">.</span><span class="token function">presence_of_element_located</span><span class="token punctuation">(</span><span class="token punctuation">(</span>By<span class="token punctuation">.</span>CSS_SELECTOR<span class="token punctuation">,</span> <span class="token char">'.rate-grid .tm-rate-content'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span>

        # 获取当前页面的评论
        comments <span class="token operator">=</span> driver<span class="token punctuation">.</span><span class="token function">find_elements</span><span class="token punctuation">(</span>By<span class="token punctuation">.</span>CSS_SELECTOR<span class="token punctuation">,</span> <span class="token char">'.rate-grid .tm-rate-content'</span><span class="token punctuation">)</span>
        <span class="token keyword">for</span> comment in comments<span class="token operator">:</span>
            <span class="token function">print</span><span class="token punctuation">(</span>comment<span class="token punctuation">.</span>text<span class="token punctuation">)</span>

        # 尝试点击下一页按钮
        next_page_button <span class="token operator">=</span> <span class="token function">WebDriverWait</span><span class="token punctuation">(</span>driver<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">until</span><span class="token punctuation">(</span>
            EC<span class="token punctuation">.</span><span class="token function">element_to_be_clickable</span><span class="token punctuation">(</span><span class="token punctuation">(</span>By<span class="token punctuation">.</span>CSS_SELECTOR<span class="token punctuation">,</span> <span class="token char">'.pg-next'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token char">'pg-disabled'</span> in next_page_button<span class="token punctuation">.</span><span class="token function">get_attribute</span><span class="token punctuation">(</span><span class="token char">'class'</span><span class="token punctuation">)</span><span class="token operator">:</span>
            <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"已经是最后一页，爬取结束"</span><span class="token punctuation">)</span>
            <span class="token keyword">break</span>
        next_page_button<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        page_num <span class="token operator">+=</span> <span class="token number">1</span>
        time<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
    except Exception as e<span class="token operator">:</span>
        <span class="token function">print</span><span class="token punctuation">(</span>f<span class="token string">"爬取第 {page_num} 页评论时出错: {e}"</span><span class="token punctuation">)</span>
        <span class="token keyword">break</span>

# 关闭浏览器
driver<span class="token punctuation">.</span><span class="token function">quit</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

</code></pre>
    <h2>
     <a id="4__116">
     </a>
     4. 代码解释
    </h2>
    <ul>
     <li>
      登录部分：打开淘宝登录页面后，由于淘宝有较为严格的登录验证机制，这里采用手动登录的方式，等待用户完成登录操作后按回车键继续。
     </li>
     <li>
      搜索商品：通过定位搜索框，输入关键词并回车进行搜索。
     </li>
     <li>
      进入商品详情页：选择搜索结果中的第一个商品并点击进入详情页。
     </li>
     <li>
      切换到评论页面：在商品详情页中找到 “评论” 标签并点击切换到评论页面。
     </li>
     <li>
      爬取评论：循环获取当前页面的评论信息，并尝试点击下一页按钮，直到没有下一页为止。
     </li>
    </ul>
    <h2>
     <a id="5__122">
     </a>
     5. 注意事项
    </h2>
    <ul>
     <li>
      反爬机制：淘宝有反爬机制，频繁的请求可能会导致 IP 被封禁。可以设置合理的请求间隔时间，或者使用代理 IP 来避免被封禁。
     </li>
     <li>
      页面元素定位：淘宝页面结构可能会发生变化，需要根据实际情况调整元素定位方式。
     </li>
     <li>
      数据存储：可以将爬取到的评论信息存储到文件或数据库中，方便后续分析和使用。
     </li>
    </ul>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a:2f2f626c6f672e6373646e2e6e65742f78786a63323032352f:61727469636c652f64657461696c732f313435393532303030" class_="artid" style="display:none">
 </p>
</div>


