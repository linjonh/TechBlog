---
layout: post
title: "Ubuntu系统部署.NET-8网站项目"
date: 2025-03-10 13:38:47 +0800
description: "Ubuntu系统初次连接时默认的用户名为：ubuntu，使用此用户名与系统登录密码进行连接。"
keywords: "ubuntu"
categories: ['笔记', 'Linux', 'Core', '.NET']
tags: ['Ubuntu', 'Linux', '.Net']
artid: "146151580"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146151580
    alt: "Ubuntu系统部署.NET-8网站项目"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146151580
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146151580
cover: https://bing.ee123.net/img/rand?artid=146151580
image: https://bing.ee123.net/img/rand?artid=146151580
img: https://bing.ee123.net/img/rand?artid=146151580
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Ubuntu系统部署.NET 8网站项目
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h2>
     <a id="XShell_0">
     </a>
     一、使用XShell连接
    </h2>
    <p>
     Ubuntu系统初次连接时默认的用户名为：ubuntu，使用此用户名与系统登录密码进行连接。
     <br/>
     <img alt="XShell连接UBuntu系统" src="https://i-blog.csdnimg.cn/direct/8a40c859f6334a728e01dfcc745078c4.jpeg#pic_center">
      <br/>
      登录成功效果如下图：
     </img>
    </p>
    <p>
     <img alt="连接登录效果" src="https://i-blog.csdnimg.cn/direct/ee96bfc48e9f4eea80519c12f6c5afa5.jpeg#pic_center"/>
    </p>
    <h2>
     <a id="root_7">
     </a>
     二、root用户登录
    </h2>
    <p>
     linux下有超级用户（root）和普通用户，普通用户不能直接操作没有权限的目录。初始超级用户（root）是没有密码，也就是说root用户不能用，但ubuntu提供了一种以普通用户执行超级管理权限的命令：sudo
    </p>
    <h3>
     <a id="21root_10">
     </a>
     2.1、设置root用户密码
    </h3>
    <pre><code class="prism language-powershell">sudo passwd root
</code></pre>
    <p>
     输入以上命令，按下回车（Enter）之后，终端会提示你让你给root用户设置密码，设置新密码后继续确认新密码（密码是隐藏的，所以不会显示出来）。
    </p>
    <p>
     <img alt="设置root用户密码" src="https://i-blog.csdnimg.cn/direct/4378dbfee1a048e18f04a676cb05c607.jpeg#pic_center">
      <br/>
      看到“
      <strong>
       passwd: password updated successfully
      </strong>
      ”之后，则代表超级用户（root）的密码设置成功！
     </img>
    </p>
    <h3>
     <a id="22root_18">
     </a>
     2.2、以root用户登录
    </h3>
    <p>
     输入以下命令：
    </p>
    <pre><code class="prism language-powershell">su root
</code></pre>
    <p>
     输入root用户密码，当输入框前面的“$”符号变成“#”时，就可以使用root权限了。
    </p>
    <p>
     <img alt="以root用户登录" src="https://i-blog.csdnimg.cn/direct/929ba3b0278f41929e0406e61a12c811.jpeg#pic_center"/>
    </p>
    <h2>
     <a id="_28">
     </a>
     三、更换镜像源
    </h2>
    <p>
     使用清华大学的镜像源可以加快软件包的下载速度。
     <a href="https://mirrors.tuna.tsinghua.edu.cn/help/ubuntu/" rel="nofollow">
      Ubuntu 软件仓库 | 清华大学开源软件镜像站
     </a>
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/67372f8412df4736a8e40643553dcf1c.jpeg#pic_center">
      <br/>
      简介部分给出了各种版本的注意事项，包括软件源配置文件的路径以及旧版本的解决方案。如下图：
     </img>
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/a531083677ce447b87adfc34d4084258.jpeg#pic_center">
      <br/>
      选择相应版本后复制镜像源即可，如下图：
     </img>
    </p>
    <p>
     <img alt="选择相应版本后复制镜像源" src="https://i-blog.csdnimg.cn/direct/9b5bf75e6e9c4c4bac38aa66ad8dae08.jpeg#pic_center"/>
    </p>
    <p>
     例如：Ubuntu22.04的镜像源为：
    </p>
    <p>
     # 默认注释了源码镜像以提高 apt update 速度，如有需要可自行取消注释
    </p>
    <pre><code class="prism language-shell"><span class="token comment"># 默认注释了源码镜像以提高 apt update 速度，如有需要可自行取消注释</span>
deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy main restricted universe multiverse
<span class="token comment"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy main restricted universe multiverse</span>
deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-updates main restricted universe multiverse
<span class="token comment"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-updates main restricted universe multiverse</span>
deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-backports main restricted universe multiverse
<span class="token comment"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-backports main restricted universe multiverse</span>

<span class="token comment"># 以下安全更新软件源包含了官方源与镜像站配置，如有需要可自行修改注释切换</span>
deb http://security.ubuntu.com/ubuntu/ jammy-security main restricted universe multiverse
<span class="token comment"># deb-src http://security.ubuntu.com/ubuntu/ jammy-security main restricted universe multiverse</span>

<span class="token comment"># 预发布软件源，不建议启用</span>
<span class="token comment"># deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-proposed main restricted universe multiverse</span>
<span class="token comment"># # deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-proposed main restricted universe multiverse</span>
</code></pre>
    <p>
     例如：Ubuntu24.04 LTS的镜像源为：
    </p>
    <pre><code class="prism language-shell"><span class="token comment"># 默认注释了源码镜像以提高 apt update 速度，如有需要可自行取消注释</span>
deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ noble main restricted universe multiverse
<span class="token comment"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ noble main restricted universe multiverse</span>
deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ noble-updates main restricted universe multiverse
<span class="token comment"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ noble-updates main restricted universe multiverse</span>
deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ noble-backports main restricted universe multiverse
<span class="token comment"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ noble-backports main restricted universe multiverse</span>

<span class="token comment"># 以下安全更新软件源包含了官方源与镜像站配置，如有需要可自行修改注释切换</span>
deb http://security.ubuntu.com/ubuntu/ noble-security main restricted universe multiverse
<span class="token comment"># deb-src http://security.ubuntu.com/ubuntu/ noble-security main restricted universe multiverse</span>

<span class="token comment"># 预发布软件源，不建议启用</span>
<span class="token comment"># deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ noble-proposed main restricted universe multiverse</span>
<span class="token comment"># # deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ noble-proposed main restricted universe multiverse</span>
</code></pre>
    <h3>
     <a id="31_81">
     </a>
     3.1、备份现有源列表
    </h3>
    <p>
     出于尽可能少的修改系统配置的前提下，我们先将系统自带的源备份一下。此命令会在/etc/apt目录下将sources.list创建一份副本并重命名为sources.list.bak。
    </p>
    <pre><code class="prism language-powershell">sudo <span class="token function">cp</span> <span class="token operator">/</span>etc/apt/sources<span class="token punctuation">.</span>list <span class="token operator">/</span>etc/apt/sources<span class="token punctuation">.</span>list<span class="token punctuation">.</span>bak
</code></pre>
    <p>
     <img alt="备份现有源列表" src="https://i-blog.csdnimg.cn/direct/25d5ced065ca47739ef9318de5185d60.jpeg#pic_center"/>
    </p>
    <h3>
     <a id="32_90">
     </a>
     3.2、编辑源列表
    </h3>
    <p>
     使用以下命令打开镜像源文件：
    </p>
    <pre><code class="prism language-shell"><span class="token function">sudo</span> <span class="token function">vim</span> /etc/apt/sources.list
</code></pre>
    <p>
     在vim插入模式下，按下“i”，替换掉原镜像源文件sources.list中的内容：
     <br/>
     <img alt="编辑源列表" src="https://i-blog.csdnimg.cn/direct/7b80a1db3e0246468d243f3646c5df74.jpeg#pic_center">
      <br/>
      按下“ESC”键，再输入“:wq”强制保存并退出；
     </img>
    </p>
    <p>
     在Ubuntu能正常上网的前提下，使用以下命令更新软件列表：
    </p>
    <h3>
     <a id="33_104">
     </a>
     3.3、更新包索引
    </h3>
    <p>
     该命令会检查已安装的软件包是否有可用的更新，并更新本地的包索引仓库。
    </p>
    <p>
     注意：该命令并不会更新系统中任何已安装的软件包。（相当于告诉你有几个包可以更新，但不执行）
    </p>
    <pre><code class="prism language-powershell">sudo apt update
</code></pre>
    <p>
     命令执行效果如下：
    </p>
    <p>
     <img alt="更新包索引" src="https://i-blog.csdnimg.cn/direct/aa8f4782a5b54e9eb3daef70112f6113.jpeg#pic_center"/>
    </p>
    <p>
     3.4、升级已安装的软件包（可选项）
    </p>
    <p>
     该命令会将所有已安装的软件包更新到最新版本。（相当于执行更新）
    </p>
    <p>
     注意：如果系统中环境比较复杂，该命令可能会影响到系统的稳定性和兼容性，慎用！（新系统可以无脑使用）
    </p>
    <pre><code class="prism language-powershell">sudo apt upgrade
</code></pre>
    <p>
     经过以上流程，ubuntu使用的镜像源就是清华的镜像源了！
    </p>
    <h2>
     <a id="NETSDK_130">
     </a>
     四、安装.NET的SDK以及运行时
    </h2>
    <p>
     微软官方安装帮助文档：
     <a href="https://learn.microsoft.com/zh-cn/dotnet/core/install/linux-ubuntu-install?tabs=dotnet9&amp;pivots=os-linux-ubuntu-2204" rel="nofollow">
      在 Ubuntu 上安装 .NET SDK 或 .NET 运行时
     </a>
    </p>
    <h3>
     <a id="41SDK_134">
     </a>
     4.1、安装SDK命令
    </h3>
    <p>
     .NET SDK 使你可以通过 .NET 开发应用。 如果安装 .NET SDK，则无需安装相应的运行时。 若要安装 .NET SDK，请运行以下命令：
    </p>
    <pre><code class="prism language-powershell">sudo apt-get install <span class="token operator">-</span>y dotnet-sdk-8<span class="token punctuation">.</span>0
</code></pre>
    <h3>
     <a id="42_142">
     </a>
     4.2、安装运行时
    </h3>
    <p>
     通过 ASP.NET Core 运行时，可以运行使用 .NET 开发且未提供运行时的应用。 以下命令将安装 ASP.NET Core 运行时，这是与 .NET 最兼容的运行时。 在终端中，运行以下命令：
    </p>
    <pre><code class="prism language-powershell">sudo apt-get install <span class="token operator">-</span>y aspnetcore-runtime-8<span class="token punctuation">.</span>0
</code></pre>
    <p>
     <img alt="安装运行时" src="https://i-blog.csdnimg.cn/direct/d7dd87666af641b2975365fea4bba859.jpeg#pic_center"/>
    </p>
    <h3>
     <a id="43_152">
     </a>
     4.3、验证安装
    </h3>
    <p>
     安装完成后，可以通过以下命令来验证是否成功安装了.NET
    </p>
    <pre><code class="prism language-powershell">sudo dotnet <span class="token operator">--</span>info
</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/1a10d0c110514ecebb9cc8d1f355998b.jpeg#pic_center"/>
    </p>
    <h2>
     <a id="ufw_161">
     </a>
     五、ufw防火墙
    </h2>
    <p>
     <strong>
      UFW
     </strong>
     全称为Uncomplicated Firewall，是Ubuntu系统上配置iptables防火墙的工具。UFW提供一个非常友好的命令用于创建基于IPV4，IPV6的防火墙规则。
    </p>
    <h3>
     <a id="51ufw_165">
     </a>
     5.1、安装ufw
    </h3>
    <pre><code class="prism language-powershell">sudo apt-get install ufw
</code></pre>
    <p>
     <img alt="安装防火墙：ufw" src="https://i-blog.csdnimg.cn/direct/9d810a4792c84312b7ebd65712266b04.jpeg#pic_center"/>
    </p>
    <h3>
     <a id="52_171">
     </a>
     5.2、启动防火墙并设置开机启动
    </h3>
    <pre><code class="prism language-powershell">sudo ufw enable
</code></pre>
    <p>
     <img alt="启动防火墙并设置开机启动" src="https://i-blog.csdnimg.cn/direct/4e436a681be34250b3dcc37a2b053faa.jpeg#pic_center"/>
    </p>
    <h3>
     <a id="53_177">
     </a>
     5.3、查看防火墙状态
    </h3>
    <p>
     开启了为 active, 没开启为 inactive。
    </p>
    <pre><code class="prism language-powershell">sudo ufw status
</code></pre>
    <p>
     <img alt="查看防火墙状态" src="https://i-blog.csdnimg.cn/direct/6e4635166abf45e39f36aee564c4858e.jpeg#pic_center"/>
    </p>
    <h3>
     <a id="54SSH_185">
     </a>
     5.4、开启SSH端口
    </h3>
    <pre><code class="prism language-powershell">sudo ufw allow 22
</code></pre>
    <h3>
     <a id="55_191">
     </a>
     5.5、防火墙命令
    </h3>
    <pre><code class="prism language-powershell"><span class="token comment"># 开放 port_number 端口 tcp和udp</span>
sudo ufw allow port_number
 
<span class="token comment"># 删除 port_number 端口</span>
sudo ufw delete allow port_number

<span class="token comment"># 开启防火墙</span>
sudo ufw enable

 <span class="token comment"># 关闭防火墙</span>
sudo ufw disable

<span class="token comment"># 重启防火墙</span>
sudo ufw reload

<span class="token comment"># 查看防火墙状态</span>
sudo ufw status

<span class="token comment"># 重置所有的规则</span>
sudo ufw reset

<span class="token comment"># 开放规定协议的指定端口（开放8000端口的tcp协议，需重启防火墙生效）</span>
sudo ufw allow 8000/tcp

<span class="token comment"># 关闭规定协议的指定端口（关闭8000端口的tcp协议，需重启防火墙生效）</span>
sudo ufw delete allow 8000/tcp

<span class="token comment"># 批量开放规定协议的指定端口（开放1-65535端口的tcp协议，需重启防火墙生效）</span>
sudo ufw allow 1:65535/tcp

<span class="token comment"># 允许来自 192.168.1.1 的主机的访问</span>
sudo ufw allow <span class="token keyword">from</span> 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>1
 
<span class="token comment"># 禁止外部访问smtp服务</span>
sudo ufw deny smtp
 
<span class="token comment"># 删除上面建立的某条规则</span>
sudo ufw delete allow smtp
</code></pre>
    <h2>
     <a id="Nginx_234">
     </a>
     六、安装Nginx
    </h2>
    <p>
     <strong>
      Nginx
     </strong>
     (engine x) 是一个高性能的HTTP和反向代理web服务器，同时也提供了IMAP/POP3/SMTP服务。Nginx是由伊戈尔·赛索耶夫为俄罗斯访问量第二的Rambler.ru站点（俄文：Рамблер）开发的，第一个公开版本0.1.0发布于2004年10月4日。其将源代码以类BSD许可证的形式发布，因它的稳定性、丰富的功能集、简单的配置文件和低系统资源的消耗而闻名。2011年6月1日，nginx 1.0.4发布。
    </p>
    <p>
     <strong>
      Nginx
     </strong>
     是一款轻量级的Web 服务器/反向代理服务器及电子邮件（IMAP/POP3）代理服务器，在BSD-like 协议下发行。其特点是占有内存少，并发能力强，事实上nginx的并发能力在同类型的网页服务器中表现较好，中国大陆使用nginx网站用户有：百度、京东、新浪、网易、腾讯、淘宝等。
    </p>
    <p>
     <strong>
      Nginx
     </strong>
     是高性能的 HTTP 和反向代理的web服务器，处理高并发能力是十分强大的，能经受高负 载的考验,有报告表明能支持高达 50,000 个并发连接数。
    </p>
    <p>
     <strong>
      Nginx
     </strong>
     支持热部署，启动简单，可以做到7*24不间断运行。几个月都不需要重新启动。
    </p>
    <h3>
     <a id="61Nginx_244">
     </a>
     6.1、命令安装Nginx
    </h3>
    <pre><code class="prism language-powershell">sudo apt install nginx
</code></pre>
    <h3>
     <a id="62_250">
     </a>
     6.2、安装验证
    </h3>
    <p>
     检查 Nginx 是否已成功安装并正在运行
    </p>
    <pre><code class="prism language-powershell">sudo systemctl status nginx
</code></pre>
    <p>
     执行效果如下：
     <br/>
     <img alt="检查 Nginx 是否已成功安装并正在运行" src="https://i-blog.csdnimg.cn/direct/b67a20a40e7d401c8e289be140112d31.jpeg#pic_center"/>
    </p>
    <h3>
     <a id="63_HTTP__HTTPS__260">
     </a>
     6.3、配置防火墙允许 HTTP 和 HTTPS 流量通过
    </h3>
    <p>
     如果您的服务器启用了防火墙（如 UFW），则需要允许 HTTP 和 HTTPS 流量通过
    </p>
    <pre><code class="prism language-powershell">sudo ufw allow <span class="token string">'Nginx HTTP'</span>
sudo ufw allow <span class="token string">'Nginx HTTPS'</span>
</code></pre>
    <h3>
     <a id="64_268">
     </a>
     6.4、重启防火墙
    </h3>
    <pre><code class="prism language-powershell">sudo ufw reload
</code></pre>
    <h3>
     <a id="65Nginx_274">
     </a>
     6.5、Nginx命令
    </h3>
    <pre><code class="prism language-powershell"><span class="token comment"># 启动Nginx服务</span>
sudo systemctl <span class="token function">start</span> nginx

<span class="token comment"># 重启Nginx服务</span>
sudo systemctl restart nginx

<span class="token comment"># 设置开机自启动</span>
sudo systemctl enable nginx

<span class="token comment"># 检查Nginx状态</span>
sudo systemctl status nginx

<span class="token comment"># 重新加载Systemd守护进程</span>
sudo systemctl daemon-reload
</code></pre>
    <h2>
     <a id="PostgreSQL_293">
     </a>
     七、安装PostgreSQL
    </h2>
    <p>
     PostgreSQL是一个功能强大的 开源 的关系型数据库，底层基于C实现。
    </p>
    <p>
     PostgreSQL使用的开源协议是PostgreSQL许可证，也被称为PostgreSQL开放源码许可证。这是一种自由软件许可证，基于BSD许可证。该许可证允许用户自由地使用、修改和分发PostgreSQL数据库管理系统的源代码。它还允许用户将PostgreSQL用于商业目的，并且没有强制性的要求或限制。这使得PostgreSQL成为一个受欢迎的开源数据库解决方案。
    </p>
    <p>
     PostgreSQL的名字由两部分组成：Post和SQL。
    </p>
    <p>
     "Post"是指Postgres，这是PostgreSQL的前身。Postgres是由Michael Stonebraker和他的团队在加州大学伯克利分校开发的一个关系数据库管理系统。它是早期关系数据库系统的一个重要研究项目。
    </p>
    <p>
     "SQL"代表结构化查询语言（Structured Query Language），它是一种用于管理和操作关系数据库的标准语言。PostgreSQL是一个完全支持SQL的关系数据库管理系统。
    </p>
    <p>
     因此，将这两个部分合并在一起，就得到了PostgreSQL这个名字。
    </p>
    <h3>
     <a id="71_307">
     </a>
     7.1、检查是否已经安装
    </h3>
    <pre><code class="prism language-powershell">sudo service postgresql status
</code></pre>
    <p>
     执行命令效果如下：
     <br/>
     <img alt="检查是否已经安装postgresql" src="https://i-blog.csdnimg.cn/direct/bfe97ba5c57c4321b7b03ec56e418487.jpeg#pic_center"/>
    </p>
    <h3>
     <a id="72_315">
     </a>
     7.2、安装命令
    </h3>
    <pre><code class="prism language-powershell">sudo apt install postgresql postgresql-contrib
</code></pre>
    <p>
     执行命令效果如下：
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/6bc5593ac09a4079a7756f08b5078c11.jpeg#pic_center"/>
    </p>
    <h3>
     <a id="73_323">
     </a>
     7.3、确认安装成功
    </h3>
    <p>
     查看安装版本
    </p>
    <pre><code class="prism language-powershell">psql <span class="token operator">--</span>version
</code></pre>
    <p>
     <img alt="查看PostgreSQL安装版本" src="https://i-blog.csdnimg.cn/direct/688fa5cd45094f9d902dc37d106c4f1f.jpeg#pic_center"/>
    </p>
    <p>
     查看PostgreSQL服务运行状态
    </p>
    <pre><code class="prism language-powershell">sudo service postgresql status
</code></pre>
    <p>
     <img alt="查看PostgreSQL服务运行状态" src="https://i-blog.csdnimg.cn/direct/11a81f7215ba4bdd97c33a211d761a7c.jpeg#pic_center"/>
    </p>
    <h3>
     <a id="74_338">
     </a>
     7.4、验证安装
    </h3>
    <p>
     登录到 PostgreSQL 数据库，以验证安装是否成功。
    </p>
    <pre><code class="prism language-powershell">sudo <span class="token operator">-</span>u postgres psql
</code></pre>
    <p>
     执行效果如下：
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/e5ad851ac5834df28b7f40fd3f3be19c.jpeg#pic_center"/>
    </p>
    <h3>
     <a id="75postgres_349">
     </a>
     7.5、修改postgres用户的登录密码
    </h3>
    <p>
     安装之后，用户“postgres”默认没有登录密码，所以我们需要使用命令进行密码修改。
    </p>
    <pre><code class="prism language-powershell">alter user postgres with password <span class="token string">'a@12345678'</span><span class="token punctuation">;</span>
</code></pre>
    <p>
     <img alt="修改postgres用户的登录密码" src="https://i-blog.csdnimg.cn/direct/933455d3ee764beeb86abb81aa8fc105.jpeg#pic_center"/>
    </p>
    <h3>
     <a id="76IPPostgreSQL_357">
     </a>
     7.6、设置外部IP能够连接本机的PostgreSQL数据库
    </h3>
    <h4>
     <a id="761pg_hbaconf_358">
     </a>
     7.6.1、修改pg_hba.conf配置文件
    </h4>
    <p>
     执行命令，按“i”进入编辑模式：将pg_hba.conf配置文件中的，新增一行“host all all 0.0.0.0/0 trust”，设置完成之后，按“ESC”,在输入“:wq”进行强制保存并退出。（
     <mark>
      其中16为安装的版本号
     </mark>
     ）
    </p>
    <pre><code class="prism language-powershell">sudo vim <span class="token operator">/</span>etc/postgresql/16/main/pg_hba<span class="token punctuation">.</span>conf
</code></pre>
    <p>
     <img alt="修改pg_hba.conf配置文件" src="https://i-blog.csdnimg.cn/direct/680507a6b7ac4dbbbd65bc9ea8f7a9d6.jpeg#pic_center"/>
    </p>
    <h4>
     <a id="762postgresqlconf_365">
     </a>
     7.6.2、修改postgresql.conf配置文件
    </h4>
    <p>
     执行命令，按“i”进入编辑模式：将postgresql.conf配置文件中的listen_addresses属性设置为"*"，设置完成之后，按“ESC”,在输入“:wq”进行强制保存并退出。
    </p>
    <pre><code class="prism language-powershell">sudo vim <span class="token operator">/</span>etc/postgresql/16/main/postgresql<span class="token punctuation">.</span>conf
</code></pre>
    <p>
     <img alt="修改postgresql.conf配置文件" src="https://i-blog.csdnimg.cn/direct/935ec479e7cf42cc979466b68e5803dc.jpeg#pic_center"/>
    </p>
    <h4>
     <a id="762_371">
     </a>
     7.6.2、重启服务更新配置
    </h4>
    <p>
     重启服务更新配置
    </p>
    <pre><code class="prism language-powershell">sudo service postgresql restart
</code></pre>
    <h3>
     <a id="77_376">
     </a>
     7.7、设置防火墙
    </h3>
    <pre><code class="prism language-powershell"><span class="token comment"># 设置防火墙开启5432端口</span>
sudo ufw allow 5432
<span class="token comment"># 重启防火墙服务</span>
sudo ufw reload
</code></pre>
    <h3>
     <a id="78_383">
     </a>
     7.8、防火墙命令
    </h3>
    <pre><code class="prism language-powershell"><span class="token comment"># 检查服务状态</span>
sudo systemctl status postgresql

<span class="token comment"># 启动服务</span>
sudo systemctl <span class="token function">start</span> postgresql

<span class="token comment"># 停止服务</span>
sudo systemctl stop postgresql

<span class="token comment"># 重启服务</span>
sudo systemctl restart postgresql

<span class="token comment"># 设置开机自启动</span>
sudo systemctl enable postgresql

<span class="token comment"># 禁用开机自启动</span>
sudo systemctl disable postgresql
</code></pre>
    <h2>
     <a id="NET_8_Web_403">
     </a>
     八、部署.NET 8 Web网站项目
    </h2>
    <p>
     将自己的.NET Web网站项目进行发布，再使用XFTP上传至服务器下自己创建的目录下。
    </p>
    <h3>
     <a id="81Nginx_405">
     </a>
     8.1、修改Nginx的配置文件
    </h3>
    <pre><code class="prism language-powershell">sudo vim <span class="token operator">/</span>etc/nginx/nginx<span class="token punctuation">.</span>conf 
<span class="token comment"># 或 </span>
sudo nano <span class="token operator">/</span>etc/nginx/nginx<span class="token punctuation">.</span>conf
</code></pre>
    <pre><code class="prism language-powershell">server <span class="token punctuation">{<!-- --></span>
	listen     80<span class="token punctuation">;</span>
	server_name   公网IP/域名<span class="token punctuation">;</span>
	location <span class="token operator">/</span> <span class="token punctuation">{<!-- --></span>
        proxy_pass http:<span class="token operator">/</span><span class="token operator">/</span>localhost:5000<span class="token punctuation">;</span>
        proxy_http_version 1<span class="token punctuation">.</span>1<span class="token punctuation">;</span>
        proxy_set_header Upgrade <span class="token variable">$http_upgrade</span><span class="token punctuation">;</span>
        proxy_set_header Connection keep-alive<span class="token punctuation">;</span>
        proxy_set_header Host <span class="token variable">$host</span><span class="token punctuation">;</span>
        proxy_cache_bypass <span class="token variable">$http_upgrade</span><span class="token punctuation">;</span>
        root   <span class="token operator">/</span><span class="token keyword">data</span><span class="token operator">/</span>web/wwwroot<span class="token punctuation">;</span>    <span class="token comment">#自己的项目路径，.NET Core的Web项目需要定位到“wwwroot”文件</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     设置完成之后，按“ESC”,在输入“:wq”进行强制保存并退出。
    </p>
    <h3>
     <a id="82Nginx_427">
     </a>
     8.2、重启Nginx
    </h3>
    <pre><code class="prism language-powershell">sudo systemctl <span class="token function">start</span> nginx
</code></pre>
    <h3>
     <a id="83Nginx_431">
     </a>
     8.3、查看Nginx状态
    </h3>
    <pre><code class="prism language-powershell">sudo systemctl status nginx
</code></pre>
    <p>
     看到“active (running)”即可！
    </p>
    <p>
     <img alt="查看Web服务Nginx的状态" src="https://i-blog.csdnimg.cn/direct/5a8cbfde2bd348a498ad30e9ae583f63.jpeg#pic_center"/>
    </p>
    <h3>
     <a id="84NET_Core_Web_438">
     </a>
     8.4、创建.NET Core Web项目系统服务
    </h3>
    <p>
     mkdir：创建文件夹；touch：创建文件
     <br/>
     在“/etc/systemd/system/”目录下创建一个新的服务文件，例如 web.service：
    </p>
    <pre><code class="prism language-powershell">touch <span class="token operator">/</span>etc/systemd/system/web<span class="token punctuation">.</span>service
</code></pre>
    <h4>
     <a id="841_444">
     </a>
     8.4.1、修改服务文件内容
    </h4>
    <pre><code class="prism language-powershell">sudo vim <span class="token operator">/</span>etc/systemd/system/web<span class="token punctuation">.</span>service
</code></pre>
    <p>
     在输入命令之后，按“i”进行插入操作，在文件末尾，添加以下内容：
    </p>
    <pre><code class="prism language-powershell"><span class="token namespace">[Unit]</span>
Description=My very first ASP<span class="token punctuation">.</span>NET Core applications
After=network<span class="token punctuation">.</span>target

<span class="token namespace">[Service]</span>
WorkingDirectory=<span class="token operator">/</span><span class="token keyword">data</span><span class="token operator">/</span>web/
ExecStart=<span class="token operator">/</span>usr/bin/dotnet  <span class="token operator">/</span><span class="token keyword">data</span><span class="token operator">/</span>web/WEB<span class="token punctuation">.</span>dll <span class="token operator">--</span>urls <span class="token string">"http://*:5000"</span>
Restart=always
<span class="token comment"># Restart service after 10 seconds if the dotnet service crashes:</span>
RestartSec=10
KillSignal=SIGINT
SyslogIdentifier=myfirstapp-identifier
Environment=ASPNETCORE_ENVIRONMENT=Development
Environment=DOTNET_PRINT_TELEMETRY_MESSAGE=false

<span class="token namespace">[Install]</span>
WantedBy=multi-user<span class="token punctuation">.</span>target
</code></pre>
    <p>
     下面是此内容的一些关键方面：
    </p>
    <ul>
     <li>
      <strong>
       WorkingDirectory
      </strong>
      是发布应用程序的目录。
     </li>
     <li>
      <strong>
       ExecStart
      </strong>
      是启动应用程序的实际命令。
     </li>
     <li>
      <strong>
       Restart=always
      </strong>
      不言而喻。 如果由于某种原因（无论是手动还是崩溃）而停止，则始终会启动此过程。
     </li>
     <li>
      <strong>
       RestartSec=10
      </strong>
      也是不言而喻的。 进程停止后，它将在经过 10 秒后启动。
     </li>
     <li>
      <strong>
       SyslogIdentifier
      </strong>
      很重要。 它表示“系统日志标识符”。 有关守护程序的信息以此名称记录在系统日志中。 还可以使用此标识符来查找进程的 PID。
     </li>
     <li>
      <strong>
       User
      </strong>
      是管理服务的用户。 它应存在于系统中，并具有应用程序文件的相应所有权。
     </li>
     <li>
      <strong>
       Environment
      </strong>
      可以在服务文件中设置任意数量的环境变量。
     </li>
    </ul>
    <h4>
     <a id="842_478">
     </a>
     8.4.2、重载配置文件
    </h4>
    <p>
     执行以下命令重新加载 systemd 配置文件：
    </p>
    <pre><code class="prism language-powershell">sudo systemctl daemon-reload
</code></pre>
    <h4>
     <a id="843Web_483">
     </a>
     8.4.3、启动Web服务
    </h4>
    <pre><code class="prism language-powershell">sudo systemctl <span class="token function">start</span> web<span class="token punctuation">.</span>service
</code></pre>
    <h4>
     <a id="844Web_487">
     </a>
     8.4.4、查看Web服务
    </h4>
    <pre><code class="prism language-powershell">sudo systemctl status web<span class="token punctuation">.</span>service
</code></pre>
    <p>
     执行效果如下：
    </p>
    <p>
     <img alt="查看Web服务" src="https://i-blog.csdnimg.cn/direct/5b9365ae51df44e5878817a67b483bd6.jpeg#pic_center"/>
    </p>
    <h4>
     <a id="845Web_494">
     </a>
     8.4.5、设置Web服务开机自启动
    </h4>
    <pre><code class="prism language-powershell">sudo systemctl enable web<span class="token punctuation">.</span>service
</code></pre>
    <p>
     执行效果如下：
    </p>
    <p>
     <img alt="设置Web服务开机自启动" src="https://i-blog.csdnimg.cn/direct/ab089bc88c05445aba57c0ad78bce70e.jpeg#pic_center"/>
    </p>
    <h3>
     <a id="85_502">
     </a>
     8.5、命令
    </h3>
    <pre><code class="prism language-powershell"><span class="token comment">#1、开机自启 </span>
sudo systemctl enable web<span class="token punctuation">.</span>service

<span class="token comment">#2、启动服务 </span>
sudo systemctl <span class="token function">start</span> web<span class="token punctuation">.</span>service

<span class="token comment">#3、查看状态 </span>
sudo systemctl status web<span class="token punctuation">.</span>service

<span class="token comment">#4、关闭服务 </span>
sudo systemctl stop web<span class="token punctuation">.</span>service

<span class="token comment">#5、重启服务 </span>
sudo systemctl restart web<span class="token punctuation">.</span>service
</code></pre>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f34343134363239342f:61727469636c652f64657461696c732f313436313531353830" class_="artid" style="display:none">
 </p>
</div>


