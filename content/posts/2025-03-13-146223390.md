---
layout: post
title: "hadoop第3课hdfs-shell"
date: 2025-03-13 10:06:52 +0800
description: "hadoop关于hdfs shell命令"
keywords: "hadoop第3课（hdfs shell）"
categories: ['Hadoop']
tags: ['大数据', 'Hdfs', 'Hadoop']
artid: "146223390"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146223390
    alt: "hadoop第3课hdfs-shell"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146223390
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146223390
cover: https://bing.ee123.net/img/rand?artid=146223390
image: https://bing.ee123.net/img/rand?artid=146223390
img: https://bing.ee123.net/img/rand?artid=146223390
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     hadoop第3课（hdfs shell）
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <h2>
     一.基本操作命令
    </h2>
    <blockquote>
     <p>
      <strong>
       显示目录下的文件列表命令：-ls
      </strong>
     </p>
     <p>
      hadoop fs -ls /
     </p>
     <p>
     </p>
     <p>
      <strong>
       创建文件夹命令：-mkdir
      </strong>
     </p>
     <p>
      hadoop fs -mkdir  /test
     </p>
     <p>
     </p>
     <p>
      <strong>
       上传文件命令：-put或-copyFromLocal
      </strong>
     </p>
     <p>
      hadoop fs -put words.log  /test
     </p>
     <p>
     </p>
     <p>
      <strong>
       查看文件内容命令：-cat或-tail或-text
      </strong>
     </p>
     <p>
      hadoop fs -cat /test/words.log
     </p>
     <p>
      注意：对于压缩文件只能用 text 命令来查看文件内容，否则文件内容显示乱码。
     </p>
     <p>
     </p>
     <p>
      <strong>
       文件复制命令：-get或-copyToLocal
      </strong>
     </p>
     <p>
      hadoop fs -get /test/words.log /home/hadoop/app/hadoop/data
     </p>
     <p>
      注意：本地目录需要提前创建。
     </p>
     <p>
     </p>
     <p>
      <strong>
       删除文件命令：-rm
      </strong>
     </p>
     <p>
      hadoop fs -rm /test/words.log
     </p>
     <p>
     </p>
     <p>
      <strong>
       删除文件夹命令：-rm -r
      </strong>
     </p>
     <p>
      Hadoop fs -rm -r  /test
     </p>
    </blockquote>
    <h2>
     二.管理员操作命令
    </h2>
    <blockquote>
     <p>
      <strong>
       返回HDFS集群的状态信息
      </strong>
     </p>
     <p>
      hdfs dfsadmin -report
     </p>
     <p>
     </p>
     <p>
      <strong>
       保存HDFS集群相关节点信息
      </strong>
     </p>
     <p>
      hdfs dfsadmin -metasave metasave.tt
     </p>
     <p>
      备注：metasave.tt文件保存在{hadoop.log.dir}目录下，该目录默认是hadoop安装目录的logs目录。
     </p>
     <p>
     </p>
     <p>
      <strong>
       从namenode获取最新的fsimage文件
      </strong>
     </p>
     <p>
      hdfs dfsadmin -fetchImage ~
     </p>
     <p>
     </p>
     <p>
      <strong>
       打印集群网络拓扑
      </strong>
     </p>
     <p>
      hdfs dfsadmin -printTopology
     </p>
     <p>
      备注：因为当前Hadoop是伪分布集群，所以默认只有一个机架default-rack，机架下面只有一个节点hadoop1。
     </p>
     <p>
     </p>
     <p>
      <strong>
       刷新集群节点信息
      </strong>
     </p>
     <p>
      hdfs dfsadmin -refreshNodes
     </p>
    </blockquote>
    <h2>
     三.安全模式命令
    </h2>
    <blockquote>
     <p>
      介绍：
     </p>
     <p>
      安全模式(safemode)是Hadoop的一种保护机制，用于保证集群中数据块的安全性。当启动NameNode服务时就会启动safemode，在该模式下，NameNode会等待DataNode向它发送块报告。只有当NameNode接收到的块数量（datanodes  blocks）和实际的块数量（total blocks）接近一致时，即满足datanodes blocks/total blocks &gt;= 99.9% 这个阀值，NameNode就会退出安全模式。
     </p>
    </blockquote>
    <blockquote>
     <p>
      <strong>
       查看安全模式状态
      </strong>
     </p>
     <p>
      hdfs dfsadmin -safemode get
     </p>
     <p>
     </p>
     <p>
      <strong>
       进入安全模式
      </strong>
     </p>
     <p>
      hdfs dfsadmin -safemode enter
     </p>
     <p>
      备注：在NameNode安全模式下，不允许用户对HDFS中的文件或者文件夹进行增删改操作。
     </p>
     <p>
     </p>
     <p>
      <strong>
       退出安全模式
      </strong>
     </p>
     <p>
      hdfs dfsadmin -safemode leave
     </p>
    </blockquote>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f:672e6373646e2e6e65742f323430315f38333736393133342f:61727469636c652f64657461696c732f313436323233333930" class_="artid" style="display:none">
 </p>
</div>


