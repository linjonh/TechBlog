---
layout: post
title: "WIFI模块开发教程之W600基础篇4获取设备MAC地址"
date: 2025-01-11 10:31:50 +0800
description: "前言最近在进行基于腾讯云的MQTT测试实验时候，发现需要设备MAC地址，本篇讲述如何通过RT_Thr"
keywords: "wifi模块 mac地址相同"
categories: ['Wifi', 'W']
tags: ['无标签']
artid: "107874263"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=107874263
    alt: "WIFI模块开发教程之W600基础篇4获取设备MAC地址"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=107874263
featuredImagePreview: https://bing.ee123.net/img/rand?artid=107874263
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     WIFI模块开发教程之W600基础篇4：获取设备MAC地址
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h3>
     <a id="_0">
     </a>
     前言
    </h3>
    <p>
     最近在进行基于腾讯云的MQTT测试实验时候，发现需要设备MAC地址，本节讲述如何通过RT_Thread的接口获取设备MAC地址。
    </p>
    <h3>
     <a id="_4">
     </a>
     一、基础知识
    </h3>
    <h4>
     <a id="1MAC_5">
     </a>
     1.MAC地址简介：
    </h4>
    <p>
     MAC地址的长度为48位(6个字节)，通常表示为12个16进制数，如：00-16-EA-AE-3C-40就是一个MAC地址，其中前6位16进制数00-16-EA代表网络硬件制造商的编号，它由IEEE(电气与电子工程师协会)分配，而后6位16进制数AE-3C-40代表该制造商所制造的某个网络产品(如网卡)的系列号。只要不更改自己的MAC地址，MAC地址在世界是唯一的。形象地说，MAC地址就如同身份证上的身份证号码，具有唯一性。
    </p>
    <p>
     因此目前主流的云平台都要求设备连云的时候，将MAC地址作为唯一标识传输给云服务器，云端根绝MAC地址来识别不同的设备的运行情况。
    </p>
    <h4>
     <a id="2MACAPI_11">
     </a>
     2.获取MAC地址的API
    </h4>
    <pre><code class="prism language-c">rt_err_t <span class="token function">rt_wlan_get_mac</span><span class="token punctuation">(</span>rt_uint8_t mac<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    rt_err_t err <span class="token operator">=</span> RT_EOK<span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">_sta_is_null</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token operator">-</span>RT_EIO<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">MGNT_LOCK</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    err <span class="token operator">=</span> <span class="token function">rt_wlan_dev_get_mac</span><span class="token punctuation">(</span><span class="token function">STA_DEVICE</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> mac<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>err <span class="token operator">!=</span> RT_EOK<span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token function">RT_WLAN_LOG_E</span><span class="token punctuation">(</span><span class="token string">"get sta mac addr fail"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">MGNT_UNLOCK</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> err<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">RT_WLAN_LOG_D</span><span class="token punctuation">(</span><span class="token string">"%s is run mac: %02x:%02x:%02x:%02x:%02x:%02x"</span><span class="token punctuation">,</span>
                  __FUNCTION__<span class="token punctuation">,</span> mac<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> mac<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> mac<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> mac<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> mac<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> mac<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">MGNT_UNLOCK</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> err<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <h3>
     <a id="_37">
     </a>
     二、使用实例
    </h3>
    <h4>
     <a id="1_38">
     </a>
     1.工程构建
    </h4>
    <p>
     在bsp/w601/applications/1-base文件夹下创建3-get_mac文件夹，然后创建main.c，内容如下：
    </p>
    <pre><code class="prism language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;rtthread.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;rtdevice.h&gt;</span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    rt_err_t ret <span class="token operator">=</span> RT_EOK<span class="token punctuation">;</span>
    rt_uint8_t mac<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token function">rt_wlan_get_mac</span><span class="token punctuation">(</span>mac<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">rt_kprintf</span><span class="token punctuation">(</span><span class="token string">"mac is, %02x:%02x:%02x:%02x:%02x:%02x"</span><span class="token punctuation">,</span> mac<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> mac<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> mac<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> mac<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> mac<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> mac<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token keyword">return</span> ret<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <h3>
     <a id="_59">
     </a>
     三、下载运行
    </h3>
    <p>
     在ENV控制台，输入scons命令，在build/Bin目录下生成rtthread_1M.FLS，烧录运行后，串口调试工具显示信息如下：
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/a8f9d431f8150f2b1745686f7d8459fe.png">
      <br/>
      由此可知，该设备的MAC地址为：70:50:01:20:00:00
     </img>
    </p>
    <h3>
     <a id="_65">
     </a>
     四、结语
    </h3>
    <p>
     如您在使用过程中有任何问题，请加QQ群进一步交流。
    </p>
    <p>
     QQ交流群：906015840 (备注：物联网项目交流)
    </p>
    <p>
     公众号：物联网客栈，扫码关注，回复w600即可。
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/71d6d13f52181fa29b2d0b7f8b67eed0.png">
      <br/>
      一叶孤沙出品：一沙一世界，一叶一菩提
     </img>
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f34353030363037362f:61727469636c652f64657461696c732f313037383734323633" class_="artid" style="display:none">
 </p>
</div>


