---
layout: post
title: "无源蜂鸣器驱动开发实战指南-零基础入门STM32第三十一步"
date: 2025-02-26T17:08:45+0800
description: "蜂鸣器电路原理，IO接口设置，使用延时函数实现的单音蜂鸣程序。延时与单调的关系，复合提示音的编程。"
keywords: "无源蜂鸣器驱动电路"
categories: ['Stm']
tags: ['单片机']
artid: "145880800"
arturl: "https://blog.csdn.net/liwangsb2/article/details/145880800"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=145880800
    alt: "无源蜂鸣器驱动开发实战指南-零基础入门STM32第三十一步"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=145880800
featuredImagePreview: https://bing.ee123.net/img/rand?artid=145880800
cover: https://bing.ee123.net/img/rand?artid=145880800
image: https://bing.ee123.net/img/rand?artid=145880800
img: https://bing.ee123.net/img/rand?artid=145880800
---



# 无源蜂鸣器驱动开发实战指南 | 零基础入门STM32第三十一步



| 主题 | 内容 | 教学目的/扩展视频 |
| --- | --- | --- |
| 无源蜂鸣器 | 蜂鸣器电路原理，IO接口设置，使用延时函数实现的单音蜂鸣程序。延时与单调的关系，复合提示音的编程。 | 让学习者发现声与光在控制原理上的相通之处。 |

> 师从[**洋桃电子**](http://www.doyoung.net/)，杜洋老师

---

---


![](https://i-blog.csdnimg.cn/direct/a868e86233fe49ad895024a5e4584e27.png)

（图1：无源蜂鸣器驱动电路原理图）

### 一、蜂鸣器电路原理剖析

#### 1.1 无源蜂鸣器驱动特性

```c
/* 典型驱动电路参数 */
#define BUZZER_VCC      3.3V    // 工作电压
#define CURRENT_LIMIT   20mA    // 驱动电流限制
#define RESISTOR_R2     1KΩ     // 限流电阻（保护IO口）
#define RESISTOR_R3     5.1KΩ   // 下拉电阻（稳定电平）

```

* **发声原理**：通过IO口输出**PWM方波**使振膜振动
* **电路组成**：
  + PB5引脚输出驱动信号
  + R2限制驱动电流
  + R3确保断电后蜂鸣器完全关断

#### 1.2 元件选型要点

| 参数 | 推荐值 | 说明 |
| --- | --- | --- |
| 工作电压 | 3-5V | 需与单片机电压匹配 |
| 谐振频率 | 2-4KHz | 决定基础音调 |
| 驱动电流 | <30mA | 避免超过IO口承载能力 |

---

### 二、IO接口配置方法

#### 2.1 GPIO初始化设置

```c
#include "buzzer.h"
#include "delay.h"

void BUZZER_Init(void){ //蜂鸣器的接口初始化
	GPIO_InitTypeDef  GPIO_InitStructure; 	
    GPIO_InitStructure.GPIO_Pin = BUZZER; //选择端口号                        
    GPIO_InitStructure.GPIO_Mode = GPIO_Mode_Out_PP; //选择IO接口工作方式       
    GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz; //设置IO接口速度（2/10/50MHz）    
	GPIO_Init(BUZZERPORT, &GPIO_InitStructure);	
	
	GPIO_WriteBit(BUZZERPORT,BUZZER,(BitAction)(1)); //蜂鸣器接口输出高电平1		
}

```

**配置要点**：

* 推挽输出模式增强驱动能力
* 50MHz高速模式确保波形陡峭
* 初始高电平避免启动异响

---

### 三、单音频率生成原理

#### 3.1 延时与频率的数学关系

```c
/* 频率计算公式 */
f = 1 / (2 * t_delay)  // t_delay为单次高低电平延时

```

**示例**：

* 当delay_us(500)时：
  + 周期 = 500μs + 500μs = 1ms
  + 频率 = 1000Hz

#### 3.2 典型单音实现

```c
void BUZZER_BEEP(void){ //蜂鸣器响一声
	u16 i;
	for(i=0;i<200;i++){
		GPIO_WriteBit(BUZZERPORT,BUZZER,(BitAction)(0)); //蜂鸣器接口输出0
		delay_us(500); //延时		
		GPIO_WriteBit(BUZZERPORT,BUZZER,(BitAction)(1)); //蜂鸣器接口输出高电平1
		delay_us(500); //延时
		}
}	

```

*▲ [完整工程代码示例⏬蜂鸣器驱动程序](https://pan.baidu.com/s/1lpOJSbdyTgNEDFBFLgojYQ?pwd=xauu)*

---

### 四、复合提示音编程技巧

#### 4.1 多音阶旋律实现

```c
void BUZZER_BEEP(u16 a,u8 b){ //蜂鸣器响一声
	u16 i;
	for(i=0;i<b;i++){
		GPIO_WriteBit(BUZZERPORT,BUZZER,(BitAction)(0)); //蜂鸣器接口输出0
		delay_us(a/2); //延时		
		GPIO_WriteBit(BUZZERPORT,BUZZER,(BitAction)(1)); //蜂鸣器接口输出高电平1
		delay_us(a/2); //延时
	}	
}
// 音符频率定义
#define NOTE_C4  262  // 中音Do
#define NOTE_D4  294  // Re
#define NOTE_E4  330  // Mi

void PlayMelody(void){
    BUZZER_Beep(NOTE_C4, 200);  // 播放Do 200ms
    delay_ms(50);               // 间隔50ms
    BUZZER_Beep(NOTE_D4, 200);
    delay_ms(50);
    BUZZER_Beep(NOTE_E4, 400);
}

```

#### 4.2 报警提示音设计

```c

void AlarmBeep(void){
    u16 i;
	for(i=0; i<3; i++){
        BUZZER_BEEP(2000, 100);  // 高频短音
        delay_ms(100);
        BUZZER_BEEP(1000, 200);  // 低频长音
        delay_ms(200);
    }
}

```

---

### 五、开发注意事项

1. **寿命保护**：持续发声不超过30秒，避免线圈过热
2. **中断处理**：在延时函数中使用`DWT`计数器更精准
3. **多任务协调**：采用定时器中断实现非阻塞蜂鸣
4. **EMI控制**：并联104电容减少高频干扰
5. **功耗管理**：空闲时保持IO口高电平状态

> **调试技巧**：用示波器观察输出波形，确保占空比50%

---

### 六、相关资源

[1] [洋桃电子B站课程-STM32入门100步](http://www.doyoung.net/)  
 [2] [STM32F103xx官方数据手册](https://item.szlcsc.com/datasheet/STM32F103C8T6/9243.html?spm=sc.gb.xds.a&lcsc_vid=QVgNUFNfRVFcVVJfQ1VWVFEHQ1RYBgcDFFgIAVIHQVQxVlNSR1FYUFZUT1FaXjsOAxUeFF5JWBYZEEoVDQ0NFAdIFA4DSA%3D%3D)  
 [3] [STM32F103X8-B数据手册（中文）](https://pan.baidu.com/s/1Sst3ViMD2NsVCGrL7tS7Mw?pwd=w48k)  
 [4] [STM32F103固件函数库用户手册（中文）](https://pan.baidu.com/s/1YOrsuYdEYKuwpmFLE1vPUA?pwd=ix56)  
 [5] [蜂鸣器驱动程序](https://pan.baidu.com/s/1lpOJSbdyTgNEDFBFLgojYQ?pwd=xauu)

---

 💬 技术讨论（请在评论区留言~）

---

> **📌 下期预告**：下一期将探讨MIDI音乐播放程序，欢迎持续关注！  
>    
>  [点击查阅🔍往期【STM32专栏】文章](https://blog.csdn.net/liwangsb2/category_12899382.html)  
>    
> **版权声明**：本文采用[CC BY-NC-SA 4.0]协议，转载请注明来源  
>  **实测开发版**：洋桃1号开发版（基于STM32F103C8T6）  
>  **更新日志**：
>
> * v1.0 初始版本（2025-02-26）



