---
layout: post
title: "加油站小程序实战教程10用户登录授权"
date: 2025-03-10 10:29:58 +0800
description: "本篇我们配置了登录授权功能，主要讲解了页面效果的搭建，以及控制组件是否显示的方法。在搭建页面时，不同的页面效果需要组合不同的组件来实现，主要是灵活运用各种组件的设定。"
keywords: "加油站小程序实战教程10用户登录授权"
categories: ['未分类']
tags: ['小程序', '低代码']
artid: "146144498"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146144498
    alt: "加油站小程序实战教程10用户登录授权"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146144498
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146144498
cover: https://bing.ee123.net/img/rand?artid=146144498
image: https://bing.ee123.net/img/rand?artid=146144498
img: https://bing.ee123.net/img/rand?artid=146144498
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     加油站小程序实战教程10用户登录授权
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-tomorrow-night" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
    </p>
    <p>
    </p>
    <h2>
     <a id="_1">
     </a>
     引言
    </h2>
    <p>
     在《加油站小程序实战教程09显示站点信息》中，我们介绍了如何和地图联动显示站点信息的内容。显示完基本信息后，就进入到我们的主业务中，进行加油操作了。在用户加油之前需要用户先注册并登录小程序，本篇我们介绍一下用户登录功能。
    </p>
    <h2>
     <a id="1__4">
     </a>
     1 搭建布局
    </h2>
    <p>
     在验证用户是否登录的时候，我们提供两个视图，一个是登录前的视图，一个是登录后的视图。登录前我们用一个站点的图片以及按钮来表达，登录后就允许用户选择油号、油枪并提交订单。
    </p>
    <p>
     打开我们的首页，在页面组件下添加两个普通容器用来显示视图。
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/3c12847831cd4cf88ea5675c93d342f5.png">
      <br/>
      在第一个容器下我们添加一个图片和按钮组件，设置普通容器的样式，纵向排列，水平垂直居中
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/c56f9312d6374019a47ced9a8e3a5b42.png">
       <br/>
       给图片组件绑定地址，绑定为我们站点的LOGO
       <br/>
       <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/fac546f0a3fc4205899bd33b2829670e.png">
        <br/>
        设置宽和高为150
        <br/>
        <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/28539ea24246467ebc417133fd2c6ed7.png">
         <br/>
         修改按钮的内容为我要加油，设置外边距
         <br/>
         <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/72ed1f115d044c4fbd16d88b235e978d.png"/>
        </img>
       </img>
      </img>
     </img>
    </p>
    <h2>
     <a id="2__17">
     </a>
     2 创建变量
    </h2>
    <p>
     用户是否登录，我们需要创建一个全局变量，命名为userid，表示用户的数据标识
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/a8e4e80a653546d3aeb0973574fe6701.png">
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/25f1dd23a27e4789923aa5c03c6538b1.png"/>
     </img>
    </p>
    <h2>
     <a id="3__21">
     </a>
     3 设置条件展示
    </h2>
    <p>
     变量创建好了之后，我们就需要控制用户未登录视图什么时候显示。通常我们是通过设置组件的条件展示来控制组件在什么时候显示。选中普通容器，点击条件展示的fx
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/5a886026083848cfa283219a1bdf790f.png"/>
     <br/>
     编写表达式，表达式的意思是判断全局变量是否为空，如果为空，就表示未登录
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/f6fae91cb6fc4ac3b18cd6b78f2f287f.png"/>
    </p>
    <pre><code class="prism language-bash"><span class="token variable">$w</span>.IsEmpty<span class="token punctuation">(</span><span class="token variable">$w</span>.app.dataset.state.userid<span class="token punctuation">)</span>
</code></pre>
    <h2>
     <a id="4__30">
     </a>
     4 创建登录页面
    </h2>
    <p>
     在点击按钮的时候，需要跳转到登录页面，需要先创建该页面。点击创建页面的图标，创建登录页
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/fd2f5b2cd57e454f95b59d15b88db69e.png"/>
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/a2144368543b42d0b9ac55ac21559c3a.png"/>
     <br/>
     我们要的页面效果如下
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/acc96649864b4abd99be1a6f677fe850.png"/>
     <br/>
     其余的都好说，只是这里的单选按钮默认是有个下划线，不好看，我们需要覆盖一下样式
    </p>
    <pre><code class="prism language-bash">:root <span class="token punctuation">{<!-- --></span>
  width: 50px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
:scope .wd-form-item-wrap<span class="token punctuation">{<!-- --></span>
  border-bottom:none<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     覆盖样式的方法是点开底部的开发者调试工具，切换到elements，点击指针的图标
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/867b8bcbbc2945ea84b432fb864c44a3.png"/>
     <br/>
     依次进行尝试，最终起作用的样式类就是我们需要覆盖的内容
    </p>
    <h2>
     <a id="5__50">
     </a>
     5 配置跳转
    </h2>
    <p>
     回到我们的首页，给按钮配置点击事件，打开我们的登录页
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/91eef55e76ec4e0eb9f9efffee2d4b94.png"/>
    </p>
    <h2>
     <a id="_53">
     </a>
     总结
    </h2>
    <p>
     本篇我们配置了登录授权功能，主要讲解了页面效果的搭建，以及控制组件是否显示的方法。在搭建页面时，不同的页面效果需要组合不同的组件来实现，主要是灵活运用各种组件的设定。
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
  <div class="blog-extension-box" id="blogExtensionBox" style="width:400px;margin:auto;margin-top:12px">
  </div>
 </article>
 <p alt="68747470733a2f2f:626c6f672e6373646e2e6e65742f753031323837373231372f:61727469636c652f64657461696c732f313436313434343938" class_="artid" style="display:none">
 </p>
</div>


