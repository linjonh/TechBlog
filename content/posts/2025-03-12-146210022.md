---
layout: post
title: "å‰ç«¯å°é£Ÿå ‚-Day14-Vue-3-ä¼ é€é—¨ä¸æ‚¬å¿µ"
date: 2025-03-12 17:15:05 +0800
description: "ï¼ˆç•™è¨€å‘Šè¯‰æˆ‘ä½ æœ€æƒ³æ‹¥æœ‰çš„ Vue è¶…èƒ½åŠ›ï¼Œæœ¬é­”å¯¼å¸ˆä¸ºä½ å®šåˆ¶ä»£ç å’’è¯­ï¼ï¼šã€ŠVueUse é­”æ³•é“å…·åº“â€”â€”30ä¸ªæå‡æ•ˆç‡ã®ç¥å™¨ã€‹ ğŸ§°ã€‚"
keywords: "å‰ç«¯å°é£Ÿå ‚ | Day14 - Vue 3 ã®ä¼ é€é—¨ä¸æ‚¬å¿µ"
categories: ['æœªåˆ†ç±»']
tags: ['å‰ç«¯', 'Vue', 'Javascript']
artid: "146210022"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146210022
    alt: "å‰ç«¯å°é£Ÿå ‚-Day14-Vue-3-ä¼ é€é—¨ä¸æ‚¬å¿µ"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146210022
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146210022
cover: https://bing.ee123.net/img/rand?artid=146210022
image: https://bing.ee123.net/img/rand?artid=146210022
img: https://bing.ee123.net/img/rand?artid=146210022
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     å‰ç«¯å°é£Ÿå ‚ | Day14 - Vue 3 ã®ä¼ é€é—¨ä¸æ‚¬å¿µ
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h4>
     <a id="_Teleport__Suspense__4">
     </a>
     ğŸŒ€
     <strong>
      ä»Šæ—¥ç§˜æŠ€ï¼šTeleport ä¸ Suspense ã®æ—¶ç©ºé­”æ³•
     </strong>
    </h4>
    <h5>
     <a id="1_Teleport__6">
     </a>
     <strong>
      1. Teleport ä»»æ„é—¨
     </strong>
    </h5>
    <pre><code class="prism language-vue">&lt;template&gt;  
  &lt;!-- ğŸšª å°†ç»„ä»¶ä¼ é€åˆ° body æœ«å°¾ --&gt;  
  &lt;Teleport to="body"&gt;  
    &lt;div class="modal"&gt;  
      &lt;h2&gt;é‡è¦é€šçŸ¥ï¼ğŸ‰&lt;/h2&gt;  
      &lt;button @click="close"&gt;å…³é—­&lt;/button&gt;  
    &lt;/div&gt;  
  &lt;/Teleport&gt;  

  &lt;!-- ğŸª ä¼ é€åˆ°è‡ªå®šä¹‰å®¹å™¨ --&gt;  
  &lt;Teleport :to="isMobile ? '#mobile-menu' : '#desktop-menu'"&gt;  
    &lt;NavBar /&gt;  
  &lt;/Teleport&gt;  
&lt;/template&gt;  

&lt;script setup&gt;  
// åŠ¨æ€æ§åˆ¶ä¼ é€ä½ç½®  
const isMobile = useMediaQuery('(max-width: 768px)')  
&lt;/script&gt;  

&lt;style scoped&gt;  
.modal {  
  position: fixed;  
  z-index: 999;  
  /* æ ·å¼ä¸å†å—çˆ¶ç»„ä»¶å½±å“ï¼ */  
}  
&lt;/style&gt;  
</code></pre>
    <p>
     ğŸ””
     <strong>
      æ ¸å¿ƒåœºæ™¯
     </strong>
     ï¼š
    </p>
    <ul>
     <li>
      æ¨¡æ€æ¡†/é€šçŸ¥æ å…¨å±€å±•ç¤º
     </li>
     <li>
      è·¨å¸ƒå±€å±‚çº§ç»„ä»¶æ¸²æŸ“
     </li>
     <li>
      å“åº”å¼åŠ¨æ€åˆ‡æ¢æ¸²æŸ“ä½ç½®
     </li>
    </ul>
    <hr/>
    <h5>
     <a id="2_Suspense__43">
     </a>
     <strong>
      2. Suspense æ‚¬å¿µç»“ç•Œ
     </strong>
    </h5>
    <pre><code class="prism language-vue">&lt;template&gt;  
  &lt;!-- ğŸ›¡ï¸ å¼‚æ­¥ç»„ä»¶åŠ è½½ç»“ç•Œ --&gt;  
  &lt;Suspense&gt;  
    &lt;template #default&gt;  
      &lt;AsyncDashboard /&gt;  
    &lt;/template&gt;  
    &lt;template #fallback&gt;  
      &lt;div class="skeleton-loader"&gt;ğŸŒ€ åŠ è½½ä¸­...&lt;/div&gt;  
    &lt;/template&gt;  
  &lt;/Suspense&gt;  

  &lt;!-- ğŸ”¥ å¤šå¼‚æ­¥ä¾èµ–ç®¡ç† --&gt;  
  &lt;Suspense :timeout="3000"&gt;  
    &lt;template #default&gt;  
      &lt;ArticleContent :id="articleId" /&gt;  
      &lt;CommentList :id="articleId" /&gt;  
    &lt;/template&gt;  
  &lt;/Suspense&gt;  
&lt;/template&gt;  

&lt;script setup&gt;  
// å¼‚æ­¥ç»„ä»¶å®šä¹‰  
const AsyncDashboard = defineAsyncComponent(() =&gt;  
  import('./Dashboard.vue').then(comp =&gt; {  
    // æ¨¡æ‹Ÿç½‘ç»œå»¶è¿Ÿ  
    return new Promise(resolve =&gt;  
      setTimeout(() =&gt; resolve(comp), 1500)  
    )  
  })  
)  
&lt;/script&gt;  
</code></pre>
    <p>
     ğŸ””
     <strong>
      é«˜é˜¶æŠ€å·§
     </strong>
     ï¼š
    </p>
    <ul>
     <li>
      é…åˆ
      <code>
       defineAsyncComponent
      </code>
      å®ç°ä»£ç åˆ†å‰²
     </li>
     <li>
      é€šè¿‡
      <code>
       timeout
      </code>
      å±æ€§è®¾ç½®åŠ è½½è¶…æ—¶
     </li>
     <li>
      åµŒå¥—ä½¿ç”¨ç®¡ç†å¤æ‚å¼‚æ­¥ä¾èµ–é“¾
     </li>
    </ul>
    <hr/>
    <h4>
     <a id="_Suspense__84">
     </a>
     â„ï¸
     <strong>
      å†·çŸ¥è¯†ï¼šSuspense ã®å¿ƒè·³æ£€æµ‹
     </strong>
    </h4>
    <pre><code class="prism language-javascript"><span class="token comment">// ç›‘å¬å¼‚æ­¥çŠ¶æ€å˜åŒ–  </span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> onServerPrefetch <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>  

<span class="token comment">// æœåŠ¡ç«¯æ•°æ®é¢„å–  </span>
<span class="token function">onServerPrefetch</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>  
  <span class="token keyword">await</span> <span class="token function">fetchData</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  
<span class="token punctuation">}</span><span class="token punctuation">)</span>  

<span class="token comment">// å®¢æˆ·ç«¯å¿ƒè·³æ£€æµ‹  </span>
<span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span> isPending <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useSuspense</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  
<span class="token function">watch</span><span class="token punctuation">(</span>isPending<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">loading</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>  
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>loading <span class="token operator">?</span> <span class="token string">'ğŸŒ€ æ•°æ®åŠ è½½ä¸­...'</span> <span class="token operator">:</span> <span class="token string">'âœ¨ æ•°æ®å°±ç»ªï¼'</span><span class="token punctuation">)</span>  
<span class="token punctuation">}</span><span class="token punctuation">)</span>  
</code></pre>
    <hr/>
    <h4>
     <a id="__103">
     </a>
     ğŸŒŸ
     <strong>
      å®éªŒå®¤æ—¶ç©ºè£…ç½®
     </strong>
    </h4>
    <p>
     <strong>
      å®ç°æ™ºèƒ½é”™è¯¯è¾¹ç•Œ
     </strong>
    </p>
    <pre><code class="prism language-vue">&lt;template&gt;  
  &lt;Suspense @resolve="logSuccess" @fallback="logLoading" @pending="logPending"&gt;  
    &lt;ErrorBoundary&gt;  
      &lt;AsyncComponent /&gt;  
    &lt;/ErrorBoundary&gt;  
  &lt;/Suspense&gt;  
&lt;/template&gt;  

&lt;script setup&gt;  
const logSuccess = () =&gt; console.log('âœ… æ•°æ®åŠ è½½æˆåŠŸ')  
const logLoading = () =&gt; console.log('â³ è¿›å…¥åŠ è½½çŠ¶æ€')  
const logPending = () =&gt; console.log('ğŸ”„ ç­‰å¾…å¼‚æ­¥ä¾èµ–')  

// é”™è¯¯è¾¹ç•Œç»„ä»¶  
const ErrorBoundary = {  
  setup(_, { slots }) {  
    const error = ref(null)  
    const handleError = (err) =&gt; {  
      error.value = err  
      console.error('ğŸ”¥ ç»„ä»¶å´©æºƒ:', err)  
    }  
    return () =&gt; {  
      return error.value  
        ? h('div', 'ğŸ˜± ç´§æ€¥ä¿®å¤ç•Œé¢')  
        : slots.default?.()  
    }  
  }  
}  
&lt;/script&gt;  
</code></pre>
    <hr/>
    <p>
     <strong>
      æ˜æ—¥ç§˜å…¸
     </strong>
     ï¼šã€ŠVueUse é­”æ³•é“å…·åº“â€”â€”30ä¸ªæå‡æ•ˆç‡ã®ç¥å™¨ã€‹ ğŸ§°
     <br/>
     ï¼ˆç•™è¨€å‘Šè¯‰æˆ‘ä½ æœ€æƒ³æ‹¥æœ‰çš„ Vue è¶…èƒ½åŠ›ï¼Œæœ¬é­”å¯¼å¸ˆä¸ºä½ å®šåˆ¶ä»£ç å’’è¯­ï¼ğŸ”®ï¼‰
    </p>
    <hr/>
    <p>
     ğŸ›ï¸
     <strong>
      æœ¬æ—¥é¿å‘æŒ‡å—
     </strong>
     ï¼š
    </p>
    <ol>
     <li>
      <strong>
       Teleport çš„ CSS é™·é˜±
      </strong>
     </li>
    </ol>
    <pre><code class="prism language-css"><span class="token comment">/* âŒ çˆ¶ç»„ä»¶çš„æ ·å¼å¯èƒ½æ±¡æŸ“ä¼ é€å†…å®¹ */</span>  
<span class="token selector">.parent-class .modal</span> <span class="token punctuation">{<!-- --></span>  
  <span class="token comment">/* å¤±æ•ˆï¼å› ä¸º modal å·²è¢«ä¼ é€åˆ°å¤–å±‚ */</span>  
<span class="token punctuation">}</span>  

<span class="token comment">/* âœ… å§‹ç»ˆä½¿ç”¨ scoped æ ·å¼æˆ–å…¨å±€æ ·å¼ */</span>  
<span class="token selector">.modal</span> <span class="token punctuation">{<!-- --></span> <span class="token comment">/* å…¨å±€æ ·å¼ */</span> <span class="token punctuation">}</span>  
<span class="token selector">:deep(.modal)</span> <span class="token punctuation">{<!-- --></span> <span class="token comment">/* scoped ç©¿é€ */</span> <span class="token punctuation">}</span>  
</code></pre>
    <ol start="2">
     <li>
      <strong>
       Suspense çš„ SSR é™åˆ¶
      </strong>
     </li>
    </ol>
    <pre><code class="prism language-javascript"><span class="token comment">// âŒ æœåŠ¡ç«¯æ¸²æŸ“æ—¶æ— æ³•æ˜¾ç¤º fallback  </span>
<span class="token comment">// âœ… éœ€åœ¨æœåŠ¡ç«¯é¢„å…ˆåŠ è½½æ•°æ®  </span>
<span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">serverPrefetch</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>  
  <span class="token keyword">await</span> store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'fetchData'</span><span class="token punctuation">)</span>  
<span class="token punctuation">}</span>  
</code></pre>
    <ol start="3">
     <li>
      <strong>
       å¼‚æ­¥ç»„ä»¶ç¼“å­˜ç­–ç•¥
      </strong>
     </li>
    </ol>
    <pre><code class="prism language-javascript"><span class="token comment">// ğŸš€ é…ç½®åŠ è½½ç¼“å­˜  </span>
<span class="token keyword">const</span> AsyncComp <span class="token operator">=</span> <span class="token function">defineAsyncComponent</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>  
  <span class="token function-variable function">loader</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./HeavyComponent.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  
  <span class="token literal-property property">delay</span><span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token comment">// å»¶è¿Ÿæ˜¾ç¤º loading  </span>
  <span class="token literal-property property">timeout</span><span class="token operator">:</span> <span class="token number">3000</span><span class="token punctuation">,</span> <span class="token comment">// è¶…æ—¶æ—¶é—´  </span>
  <span class="token literal-property property">suspensible</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token comment">// ç¦ç”¨ Suspense æ§åˆ¶  </span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>  
</code></pre>
    <ol start="4">
     <li>
      <strong>
       å¤šå±‚ Teleport ä¼˜å…ˆçº§
      </strong>
     </li>
    </ol>
    <pre><code class="prism language-html"><span class="token comment">&lt;!-- åå†™çš„ Teleport ä¼šè¦†ç›–å…ˆå†™çš„ --&gt;</span>  
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Teleport</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#target<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>å†…å®¹A<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Teleport</span><span class="token punctuation">&gt;</span></span>  
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Teleport</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#target<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>å†…å®¹B<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Teleport</span><span class="token punctuation">&gt;</span></span>  
<span class="token comment">&lt;!-- æœ€ç»ˆæ˜¾ç¤ºå†…å®¹B --&gt;</span>  
</code></pre>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f:672e6373646e2e6e65742f6a6a6a6a6a6a6a6566666c69752f:61727469636c652f64657461696c732f313436323130303232" class_="artid" style="display:none">
 </p>
</div>


