---
arturl_encode: "68747470733a2f2f626c6f:672e6373646e2e6e65742f6a6a6a6a6a6a6a6566666c69752f:61727469636c652f64657461696c732f313436323130303232"
layout: post
title: "å‰ç«¯å°é£Ÿå ‚-Day14-Vue-3-ä¼ é€é—¨ä¸æ‚¬å¿µ"
date: 2025-03-12 17:15:05 +0800
description: "ï¼ˆç•™è¨€å‘Šè¯‰æˆ‘ä½ æœ€æƒ³æ‹¥æœ‰çš„ Vue è¶…èƒ½åŠ›ï¼Œæœ¬é­”å¯¼å¸ˆä¸ºä½ å®šåˆ¶ä»£ç å’’è¯­ï¼ï¼šã€ŠVueUse é­”æ³•é“å…·åº“â€”â€”30ä¸ªæå‡æ•ˆç‡ã®ç¥å™¨ã€‹ ğŸ§°ã€‚"
keywords: "å‰ç«¯å°é£Ÿå ‚ | Day14 - Vue 3 ã®ä¼ é€é—¨ä¸æ‚¬å¿µ"
categories: ['æœªåˆ†ç±»']
tags: ['å‰ç«¯', 'Vue', 'Javascript']
artid: "146210022"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146210022
    alt: "å‰ç«¯å°é£Ÿå ‚-Day14-Vue-3-ä¼ é€é—¨ä¸æ‚¬å¿µ"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146210022
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146210022
cover: https://bing.ee123.net/img/rand?artid=146210022
image: https://bing.ee123.net/img/rand?artid=146210022
img: https://bing.ee123.net/img/rand?artid=146210022
---

# å‰ç«¯å°é£Ÿå ‚ | Day14 - Vue 3 ã®ä¼ é€é—¨ä¸æ‚¬å¿µ

#### ğŸŒ€ **ä»Šæ—¥ç§˜æŠ€ï¼šTeleport ä¸ Suspense ã®æ—¶ç©ºé­”æ³•**

##### **1. Teleport ä»»æ„é—¨**

```vue
<template>  
  <!-- ğŸšª å°†ç»„ä»¶ä¼ é€åˆ° body æœ«å°¾ -->  
  <Teleport to="body">  
    <div class="modal">  
      <h2>é‡è¦é€šçŸ¥ï¼ğŸ‰</h2>  
      <button @click="close">å…³é—­</button>  
    </div>  
  </Teleport>  

  <!-- ğŸª ä¼ é€åˆ°è‡ªå®šä¹‰å®¹å™¨ -->  
  <Teleport :to="isMobile ? '#mobile-menu' : '#desktop-menu'">  
    <NavBar />  
  </Teleport>  
</template>  

<script setup>  
// åŠ¨æ€æ§åˆ¶ä¼ é€ä½ç½®  
const isMobile = useMediaQuery('(max-width: 768px)')  
</script>  

<style scoped>  
.modal {  
  position: fixed;  
  z-index: 999;  
  /* æ ·å¼ä¸å†å—çˆ¶ç»„ä»¶å½±å“ï¼ */  
}  
</style>  

```

ğŸ””
**æ ¸å¿ƒåœºæ™¯**
ï¼š

* æ¨¡æ€æ¡†/é€šçŸ¥æ å…¨å±€å±•ç¤º
* è·¨å¸ƒå±€å±‚çº§ç»„ä»¶æ¸²æŸ“
* å“åº”å¼åŠ¨æ€åˆ‡æ¢æ¸²æŸ“ä½ç½®

---

##### **2. Suspense æ‚¬å¿µç»“ç•Œ**

```vue
<template>  
  <!-- ğŸ›¡ï¸ å¼‚æ­¥ç»„ä»¶åŠ è½½ç»“ç•Œ -->  
  <Suspense>  
    <template #default>  
      <AsyncDashboard />  
    </template>  
    <template #fallback>  
      <div class="skeleton-loader">ğŸŒ€ åŠ è½½ä¸­...</div>  
    </template>  
  </Suspense>  

  <!-- ğŸ”¥ å¤šå¼‚æ­¥ä¾èµ–ç®¡ç† -->  
  <Suspense :timeout="3000">  
    <template #default>  
      <ArticleContent :id="articleId" />  
      <CommentList :id="articleId" />  
    </template>  
  </Suspense>  
</template>  

<script setup>  
// å¼‚æ­¥ç»„ä»¶å®šä¹‰  
const AsyncDashboard = defineAsyncComponent(() =>  
  import('./Dashboard.vue').then(comp => {  
    // æ¨¡æ‹Ÿç½‘ç»œå»¶è¿Ÿ  
    return new Promise(resolve =>  
      setTimeout(() => resolve(comp), 1500)  
    )  
  })  
)  
</script>  

```

ğŸ””
**é«˜é˜¶æŠ€å·§**
ï¼š

* é…åˆ
  `defineAsyncComponent`
  å®ç°ä»£ç åˆ†å‰²
* é€šè¿‡
  `timeout`
  å±æ€§è®¾ç½®åŠ è½½è¶…æ—¶
* åµŒå¥—ä½¿ç”¨ç®¡ç†å¤æ‚å¼‚æ­¥ä¾èµ–é“¾

---

#### â„ï¸ **å†·çŸ¥è¯†ï¼šSuspense ã®å¿ƒè·³æ£€æµ‹**

```javascript
// ç›‘å¬å¼‚æ­¥çŠ¶æ€å˜åŒ–  
import { onServerPrefetch } from 'vue'  

// æœåŠ¡ç«¯æ•°æ®é¢„å–  
onServerPrefetch(async () => {  
  await fetchData()  
})  

// å®¢æˆ·ç«¯å¿ƒè·³æ£€æµ‹  
const { isPending } = useSuspense()  
watch(isPending, (loading) => {  
  console.log(loading ? 'ğŸŒ€ æ•°æ®åŠ è½½ä¸­...' : 'âœ¨ æ•°æ®å°±ç»ªï¼')  
})  

```

---

#### ğŸŒŸ **å®éªŒå®¤æ—¶ç©ºè£…ç½®**

**å®ç°æ™ºèƒ½é”™è¯¯è¾¹ç•Œ**

```vue
<template>  
  <Suspense @resolve="logSuccess" @fallback="logLoading" @pending="logPending">  
    <ErrorBoundary>  
      <AsyncComponent />  
    </ErrorBoundary>  
  </Suspense>  
</template>  

<script setup>  
const logSuccess = () => console.log('âœ… æ•°æ®åŠ è½½æˆåŠŸ')  
const logLoading = () => console.log('â³ è¿›å…¥åŠ è½½çŠ¶æ€')  
const logPending = () => console.log('ğŸ”„ ç­‰å¾…å¼‚æ­¥ä¾èµ–')  

// é”™è¯¯è¾¹ç•Œç»„ä»¶  
const ErrorBoundary = {  
  setup(_, { slots }) {  
    const error = ref(null)  
    const handleError = (err) => {  
      error.value = err  
      console.error('ğŸ”¥ ç»„ä»¶å´©æºƒ:', err)  
    }  
    return () => {  
      return error.value  
        ? h('div', 'ğŸ˜± ç´§æ€¥ä¿®å¤ç•Œé¢')  
        : slots.default?.()  
    }  
  }  
}  
</script>  

```

---

**æ˜æ—¥ç§˜å…¸**
ï¼šã€ŠVueUse é­”æ³•é“å…·åº“â€”â€”30ä¸ªæå‡æ•ˆç‡ã®ç¥å™¨ã€‹ ğŸ§°
  
ï¼ˆç•™è¨€å‘Šè¯‰æˆ‘ä½ æœ€æƒ³æ‹¥æœ‰çš„ Vue è¶…èƒ½åŠ›ï¼Œæœ¬é­”å¯¼å¸ˆä¸ºä½ å®šåˆ¶ä»£ç å’’è¯­ï¼ğŸ”®ï¼‰

---

ğŸ›ï¸
**æœ¬æ—¥é¿å‘æŒ‡å—**
ï¼š

1. **Teleport çš„ CSS é™·é˜±**

```css
/* âŒ çˆ¶ç»„ä»¶çš„æ ·å¼å¯èƒ½æ±¡æŸ“ä¼ é€å†…å®¹ */  
.parent-class .modal {  
  /* å¤±æ•ˆï¼å› ä¸º modal å·²è¢«ä¼ é€åˆ°å¤–å±‚ */  
}  

/* âœ… å§‹ç»ˆä½¿ç”¨ scoped æ ·å¼æˆ–å…¨å±€æ ·å¼ */  
.modal { /* å…¨å±€æ ·å¼ */ }  
:deep(.modal) { /* scoped ç©¿é€ */ }  

```

2. **Suspense çš„ SSR é™åˆ¶**

```javascript
// âŒ æœåŠ¡ç«¯æ¸²æŸ“æ—¶æ— æ³•æ˜¾ç¤º fallback  
// âœ… éœ€åœ¨æœåŠ¡ç«¯é¢„å…ˆåŠ è½½æ•°æ®  
export async function serverPrefetch() {  
  await store.dispatch('fetchData')  
}  

```

3. **å¼‚æ­¥ç»„ä»¶ç¼“å­˜ç­–ç•¥**

```javascript
// ğŸš€ é…ç½®åŠ è½½ç¼“å­˜  
const AsyncComp = defineAsyncComponent({  
  loader: () => import('./HeavyComponent.vue'),  
  delay: 200, // å»¶è¿Ÿæ˜¾ç¤º loading  
  timeout: 3000, // è¶…æ—¶æ—¶é—´  
  suspensible: false // ç¦ç”¨ Suspense æ§åˆ¶  
})  

```

4. **å¤šå±‚ Teleport ä¼˜å…ˆçº§**

```html
<!-- åå†™çš„ Teleport ä¼šè¦†ç›–å…ˆå†™çš„ -->  
<Teleport to="#target">å†…å®¹A</Teleport>  
<Teleport to="#target">å†…å®¹B</Teleport>  
<!-- æœ€ç»ˆæ˜¾ç¤ºå†…å®¹B -->  

```