---
layout: post
title: "æœ¬åœ°éƒ¨ç½²-OpenManus-ä¿å§†çº§æ•™ç¨‹Windows-ç‰ˆ"
date: 2025-03-10 18:18:18 +0800
description: "æœ¬åœ°éƒ¨ç½² OpenManus ä¿å§†çº§æ•™ç¨‹ï¼ˆWindows ç‰ˆï¼‰"
keywords: "openmanuså®˜ç½‘"
categories: ['çŸ¥è¯†åˆ†äº«', 'Deepseek']
tags: ['äººå·¥æ™ºèƒ½', 'Windows']
artid: "146159734"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146159734
    alt: "æœ¬åœ°éƒ¨ç½²-OpenManus-ä¿å§†çº§æ•™ç¨‹Windows-ç‰ˆ"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146159734
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146159734
cover: https://bing.ee123.net/img/rand?artid=146159734
image: https://bing.ee123.net/img/rand?artid=146159734
img: https://bing.ee123.net/img/rand?artid=146159734
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     æœ¬åœ°éƒ¨ç½² OpenManus ä¿å§†çº§æ•™ç¨‹ï¼ˆWindows ç‰ˆï¼‰
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h3>
     <a id="_2">
     </a>
     ä¸€ã€ç¯å¢ƒæ­å»º
    </h3>
    <p>
     æˆ‘çš„ç”µè„‘æ˜¯Windows 10ç‰ˆæœ¬ï¼Œå…¶ä»–çš„æ²¡å°è¯•ï¼Œå¦‚æœå¤§å®¶ç³»ç»Ÿå’Œæˆ‘çš„ä¸ä¸€è‡´ï¼Œè¯·è‡ªè¡Œåˆ¤æ–­ï¼ŒåŸºæœ¬ä¸Šæ²¡ä»€ä¹ˆå¤§çš„å‡ºå…¥å•Šã€‚
     <br/>
     openManusçš„Gitåœ°å€ï¼š
     <a href="https://github.com/mannaandpoem/OpenManus">
      https://github.com/mannaandpoem/OpenManus
     </a>
     <br/>
     æ ¹æ®å®˜ç½‘çš„ä¸¤ç§å®‰è£…æ¨èæ–¹å¼å¦‚ä¸‹ï¼š
     <br/>
     <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://i-blog.csdnimg.cn/direct/fbf7c6073cab43a1b421180602f4e02e.png">
      <br/>
      è¿™é‡Œæˆ‘ä½¿ç”¨ç¬¬ä¸€åªæ–¹å¼ï¼Œè™½ç„¶æ¨èäº†ä½¿ç”¨UVï¼Œä½†æ˜¯æˆ‘ä½¿ç”¨è¿‡ï¼Œå°±ä¸ç”¨ç¬¬äºŒç§æ–¹å¼ã€‚
     </img>
    </p>
    <h3>
     <a id="Anaconda_9">
     </a>
     äºŒã€Anacondaä¸‹è½½
    </h3>
    <p>
     æˆ‘ç”µè„‘ä¸Šæ²¡æœ‰å®‰è£…ï¼šAnacondaï¼Œé‚£å°±ä¸€å¹¶å®‰è£…ä¸€ä¸‹å§
     <br/>
     è¿™é‡Œæ¨èä¸¤ç§ä¸‹è½½æ–¹å¼ä¸€æ˜¯å®˜ç½‘ä¸‹è½½ï¼ŒäºŒæ˜¯é•œåƒä¸‹è½½ï¼›å®˜ç½‘ä¸‹è½½å¤ªæ…¢å¯é€‰ç”¨é•œåƒä¸‹è½½ã€‚
    </p>
    <p>
     <a href="https://www.anaconda.com/products/distribution" rel="nofollow">
      å®˜ç½‘ä¸‹è½½
     </a>
     ï¼šhttps://www.anaconda.com/products/distribution
     <br/>
     <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://i-blog.csdnimg.cn/direct/b37eb70c70e44491938c83f5ec5ba06c.png">
      <br/>
      <a href="https://mirrors.bfsu.edu.cn/anaconda/archive/" rel="nofollow">
       é•œåƒä¸‹è½½
      </a>
      ï¼šhttps://mirrors.bfsu.edu.cn/anaconda/archive/
      <br/>
      <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://i-blog.csdnimg.cn/direct/e340a02658e64fd5b888582f7bc8e020.png">
       <br/>
       æˆ‘è¿™é‡Œé€‰æ‹©äº†Anaconda3-5.3.1-Windows-x86_64.exeè¿™ä¸ªé•œåƒç‰ˆæœ¬ï¼Œå¤§å®¶éšæ„å•Šã€‚
       <br/>
       å…·ä½“Anacondaå¦‚ä½•å®‰è£…çš„ï¼Œå¤§å®¶è‡ªè¡Œæœç´¢å•Šï¼Œè¿™é‡Œå°±ä¸èµ˜è¿°äº†ã€‚
      </img>
     </img>
    </p>
    <h3>
     <a id="_20">
     </a>
     ä¸‰ã€æ ¸å¿ƒç»„ä»¶å®‰è£…
    </h3>
    <p>
     ä¸ºäº†æ–¹ä¾¿ä¸çŸ¥é“å¦‚ä½•å®‰è£…çš„ï¼Œæˆ‘ä¹Ÿå·æ‡’ä¸€ä¸‹ï¼Œä¹Ÿæ˜¯ç›´æ¥ä½¿ç”¨deepseekå¸®æˆ‘æä¸€ä¸‹ï¼š
     <br/>
     <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://i-blog.csdnimg.cn/direct/39db583002cd45cc80c655a65bc165f4.png"/>
    </p>
    <pre><code class="prism language-yaml">https<span class="token punctuation">:</span>//github.com/mannaandpoem/OpenManus
æˆ‘åœ¨å­¦ä¹ å¦‚ä½•ä½¿ç”¨open<span class="token punctuation">-</span>manus<span class="token punctuation">,</span>ä½†æ˜¯ä¸‹é¢çš„å®‰è£…æ­¥éª¤ï¼Œæ˜¯åœ¨linuxä¸­è¿è¡Œçš„ï¼Œæˆ‘çš„ç”µè„‘æ˜¯window10 ï¼Œè¯·æŠŠä¸‹é¢çš„æ“ä½œæ­¥éª¤æ¢æˆwindows10ä¸­çš„æ­¥éª¤ï¼Œè®©æˆ‘ä¸€ç›®äº†ç„¶
ä½¿ç”¨ conda
åˆ›å»ºä¸€ä¸ªæ–°çš„ conda ç¯å¢ƒï¼š
conda create <span class="token punctuation">-</span>n open_manus python=3.12
conda activate open_manus
å…‹éš†å­˜å‚¨åº“ï¼š
git clone https<span class="token punctuation">:</span>//github.com/mannaandpoem/OpenManus.git
cd OpenManus
å®‰è£…ä¾èµ–é¡¹ï¼š
pip install <span class="token punctuation">-</span>r requirements.txt
</code></pre>
    <p>
     ä¸ºäº†æ–¹ä¾¿å¤§å®¶å¿«é€Ÿæ­å»ºï¼Œç›´æ¥è´´äº†æˆ‘çš„æç¤ºè¯ï¼Œè¿è¡Œç»“æœå¦‚ä¸‹ï¼š
    </p>
    <pre><code class="prism language-yaml">ä»¥ä¸‹æ˜¯ä¸º Windows 10 ç³»ç»Ÿé€‚é…çš„è¯¦ç»†æ­¥éª¤ï¼ˆä½¿ç”¨ Anacondaï¼‰ï¼š

1. å®‰è£…å‰ç½®å·¥å…·
<span class="token punctuation">-</span> ç¡®ä¿å·²å®‰è£… <span class="token punctuation">[</span>Git for Windows<span class="token punctuation">]</span>(https<span class="token punctuation">:</span>//git<span class="token punctuation">-</span>scm.com/download/win)
<span class="token punctuation">-</span> ç¡®ä¿å·²å®‰è£… <span class="token punctuation">[</span>Miniconda æˆ– Anaconda<span class="token punctuation">]</span>(https<span class="token punctuation">:</span>//docs.conda.io/en/latest/miniconda.html)

2. æ‰“å¼€ Anaconda Promptï¼ˆæ¨èï¼‰æˆ– PowerShell

3. åˆ›å»º conda ç¯å¢ƒ
```powershell
conda create <span class="token punctuation">-</span>n open_manus python=3.12 <span class="token punctuation">-</span>y
conda activate open_manus
</code></pre>
    <ol start="4">
     <li>
      å…‹éš†ä»“åº“
     </li>
    </ol>
    <pre><code class="prism language-powershell">git clone https:<span class="token operator">/</span><span class="token operator">/</span>github<span class="token punctuation">.</span>com/mannaandpoem/OpenManus<span class="token punctuation">.</span>git
cd OpenManus
</code></pre>
    <ol start="5">
     <li>
      å®‰è£…ä¾èµ–
     </li>
    </ol>
    <pre><code class="prism language-powershell">pip install <span class="token operator">-</span>r requirements<span class="token punctuation">.</span>txt
</code></pre>
    <p>
     å¸¸è§é—®é¢˜è§£å†³æ–¹æ¡ˆï¼š
    </p>
    <ol>
     <li>
      <p>
       å¦‚æœé‡åˆ°ç¯å¢ƒæ¿€æ´»é—®é¢˜ï¼š
      </p>
      <ul>
       <li>
        åœ¨ PowerShell ä¸­é¦–æ¬¡ä½¿ç”¨éœ€æ‰§è¡Œï¼š
        <code>
         conda init powershell
        </code>
       </li>
       <li>
        å…³é—­åé‡æ–°æ‰“å¼€ç»ˆç«¯
       </li>
      </ul>
     </li>
     <li>
      <p>
       å¦‚æœç¼ºå°‘ C++ ç¼–è¯‘å·¥å…·ï¼ˆå®‰è£…æŸäº›åŒ…æ—¶æŠ¥é”™ï¼‰ï¼š
       <br/>
       å®‰è£…
       <a href="https://visualstudio.microsoft.com/visual-cpp-build-tools/" rel="nofollow">
        Microsoft C++ Build Tools
       </a>
      </p>
     </li>
     <li>
      <p>
       å¦‚æœ Python 3.12 ä¸å¯ç”¨ï¼š
      </p>
      <pre><code class="prism language-powershell">conda create <span class="token operator">-</span>n open_manus python=3<span class="token punctuation">.</span>11
</code></pre>
     </li>
     <li>
      <p>
       æ›¿ä»£å…‹éš†æ–¹å¼ï¼ˆå¦‚æœ git ä¸å¯ç”¨ï¼‰ï¼š
       <br/>
       ç›´æ¥ä¸‹è½½ ZIPï¼šhttps://github.com/mannaandpoem/OpenManus/archive/refs/heads/main.zip
       <br/>
       è§£å‹åè¿›å…¥ç›®å½•æ‰§è¡Œåç»­æ­¥éª¤
      </p>
     </li>
    </ol>
    <p>
     è‡³æ­¤å·²ç»æœ¬åœ°å·²ç»å®‰è£…å®Œæ¯•äº†ã€‚
    </p>
    <h3>
     <a id="_84">
     </a>
     å››ã€æœåŠ¡é…ç½®ä¸è¿æ¥
    </h3>
    <p>
     <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://i-blog.csdnimg.cn/direct/401ca8105ea840baacfe5838d783be61.png">
      <br/>
      æ‰¾åˆ°Configæ–‡ä»¶å¤¹ï¼Œè¿›å»ï¼Œé‡æ–°å¤åˆ¶ä¸€ä»½config.tomlæ–‡ä»¶
      <br/>
      <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://i-blog.csdnimg.cn/direct/d1605f9ff83a43d3a0e4ff6375a7986b.png">
       <br/>
       è¿™é‡Œæ›¿æ¢configæ–‡ä»¶é…ç½®ï¼š
      </img>
     </img>
    </p>
    <pre><code class="prism language-yaml"><span class="token comment"># Global LLM configuration</span>
<span class="token punctuation">[</span>llm<span class="token punctuation">]</span>
model = "Qwen/QwQ<span class="token punctuation">-</span>32B" 
base_url = "https<span class="token punctuation">:</span>//api.siliconflow.cn/v1"
api_key = "è¿™é‡Œå†™ä½ è‡ªå·±çš„Key"
max_tokens = 16384
temperature = 0.6

<span class="token comment"># Optional configuration for specific LLM models</span>
<span class="token punctuation">[</span>llm.vision<span class="token punctuation">]</span>
model = "Qwen/Qwen2<span class="token punctuation">-</span>VL<span class="token punctuation">-</span>72B<span class="token punctuation">-</span>Instruct" 
base_url = "https<span class="token punctuation">:</span>//api.siliconflow.cn/v1"
api_key = "è¿™é‡Œå†™ä½ è‡ªå·±çš„Key"
</code></pre>
    <p>
     è¿™é‡Œæˆ‘ä½¿ç”¨çš„
     <a href="https://cloud.siliconflow.cn/i/pCa1dBVX" rel="nofollow">
      ç¡…åŸºæµåŠ¨Key
     </a>
     ï¼Œä»–ä»¬å®¶åˆšå¥½æœ‰æ´»åŠ¨ï¼Œæ³¨å†Œå°±é€ä½ 2000ä¸‡Tokens,æˆ‘ä»¬è¿™è¾¹æµ‹è¯•ç”¨ï¼Œå®Œå…¨å¤Ÿäº†ï¼Œè–…ç¾Šæ¯›åœ°å€æ˜¯ï¼š
     <a href="https://cloud.siliconflow.cn/i/pCa1dBVX" rel="nofollow">
      https://cloud.siliconflow.cn/i/pCa1dBVX
     </a>
     <br/>
     å¤§å®¶æœ‰å…¶ä»–çš„Keyï¼Œä¹Ÿæ˜¯å¯ä»¥ç”¨ï¼Œéšè‡ªå·±çš„æ„æ„¿ã€‚
    </p>
    <p>
     é…ç½®å®Œæ¯•ä¹‹åï¼Œæ¥ä¸‹æ¥å°±æ˜¯è¿è¡Œmain.py
     <br/>
     <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://i-blog.csdnimg.cn/direct/6708523593474e229a78cb3cd5819ab5.png">
      <br/>
      è‡³æ­¤ï¼Œæµç¨‹åŸºæœ¬å·²ç»å¼€å§‹è·‘èµ·æ¥äº†ã€‚
     </img>
    </p>
    <h3>
     <a id="_112">
     </a>
     äº”ã€å‰ç«¯é¡µé¢
    </h3>
    <p>
     ç”±äºæ˜¯æ§åˆ¶å°æˆ‘ä¸å–œæ¬¢ï¼Œç„¶åæˆ‘åˆç”¨deepseekå¸®æˆ‘åˆ¶ä½œäº†htmlé¡µé¢ï¼Œä¾¿äºæˆ‘é¡µé¢å¤„ç†ï¼š
     <br/>
     <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://i-blog.csdnimg.cn/direct/4eae44bf9a2242f9882d73441a587510.png">
      <br/>
      è¿™é‡Œå°±å†™äº†2ä¸ªæ–‡ä»¶
      <br/>
      <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://i-blog.csdnimg.cn/direct/171d43033b1b4033a4a69eee51e4921e.png">
       <br/>
       <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://i-blog.csdnimg.cn/direct/b7bdedcfbb9843ee906e92cc67c16f9e.png"/>
      </img>
     </img>
    </p>
    <p>
     ä¸»è¦ä¸¤ä¸ªæ–‡ä»¶ï¼šapp.pyå’Œtemplates/index.html
     <br/>
     ä¸¤ä¸ªæ–‡ä»¶çš„è¯¦ç»†ä»£ç å¦‚ä¸‹ï¼š
     <br/>
     app.py:
    </p>
    <pre><code class="prism language-python"><span class="token keyword">from</span> flask <span class="token keyword">import</span> Flask<span class="token punctuation">,</span> Response<span class="token punctuation">,</span> request<span class="token punctuation">,</span> jsonify<span class="token punctuation">,</span> render_template
<span class="token keyword">from</span> flask_cors <span class="token keyword">import</span> CORS
<span class="token keyword">import</span> subprocess
<span class="token keyword">import</span> sys
<span class="token keyword">import</span> os
<span class="token keyword">import</span> signal
<span class="token keyword">import</span> threading

app <span class="token operator">=</span> Flask<span class="token punctuation">(</span>__name__<span class="token punctuation">)</span>
CORS<span class="token punctuation">(</span>app<span class="token punctuation">,</span> resources<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token string">r"/*"</span><span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span><span class="token string">"origins"</span><span class="token punctuation">:</span> <span class="token string">"*"</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment"># è¿›ç¨‹ç®¡ç†</span>
process_lock <span class="token operator">=</span> threading<span class="token punctuation">.</span>Lock<span class="token punctuation">(</span><span class="token punctuation">)</span>
current_process <span class="token operator">=</span> <span class="token boolean">None</span>

<span class="token decorator annotation punctuation">@app<span class="token punctuation">.</span>route</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">index</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> render_template<span class="token punctuation">(</span><span class="token string">'index.html'</span><span class="token punctuation">)</span>

<span class="token decorator annotation punctuation">@app<span class="token punctuation">.</span>route</span><span class="token punctuation">(</span><span class="token string">'/stream'</span><span class="token punctuation">,</span> methods<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'GET'</span><span class="token punctuation">,</span> <span class="token string">'POST'</span><span class="token punctuation">,</span> <span class="token string">'OPTIONS'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">stream_execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">global</span> current_process
    
    <span class="token comment"># å¤„ç†é¢„æ£€è¯·æ±‚</span>
    <span class="token keyword">if</span> request<span class="token punctuation">.</span>method <span class="token operator">==</span> <span class="token string">'OPTIONS'</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> _build_preflight_response<span class="token punctuation">(</span><span class="token punctuation">)</span>
    
    <span class="token comment"># è·å–è¾“å…¥å†…å®¹</span>
    idea <span class="token operator">=</span> request<span class="token punctuation">.</span>json<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'idea'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token keyword">if</span> request<span class="token punctuation">.</span>method <span class="token operator">==</span> <span class="token string">'POST'</span> <span class="token keyword">else</span> request<span class="token punctuation">.</span>args<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'idea'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token keyword">not</span> idea<span class="token punctuation">:</span>
        <span class="token keyword">return</span> Response<span class="token punctuation">(</span><span class="token string">"data: é”™è¯¯ï¼šæœªæä¾›è¾“å…¥\n\n"</span><span class="token punctuation">,</span> mimetype<span class="token operator">=</span><span class="token string">'text/event-stream'</span><span class="token punctuation">)</span>
    
    <span class="token comment"># ç»ˆæ­¢å·²æœ‰è¿›ç¨‹</span>
    <span class="token keyword">with</span> process_lock<span class="token punctuation">:</span>
        <span class="token keyword">if</span> current_process <span class="token keyword">and</span> current_process<span class="token punctuation">.</span>poll<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">is</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
            current_process<span class="token punctuation">.</span>terminate<span class="token punctuation">(</span><span class="token punctuation">)</span>
        
        <span class="token comment"># å¯åŠ¨æ–°è¿›ç¨‹</span>
        current_process <span class="token operator">=</span> subprocess<span class="token punctuation">.</span>Popen<span class="token punctuation">(</span>
            <span class="token punctuation">[</span>sys<span class="token punctuation">.</span>executable<span class="token punctuation">,</span> <span class="token string">'-u'</span><span class="token punctuation">,</span> <span class="token string">'main.py'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            stdin<span class="token operator">=</span>subprocess<span class="token punctuation">.</span>PIPE<span class="token punctuation">,</span>
            stdout<span class="token operator">=</span>subprocess<span class="token punctuation">.</span>PIPE<span class="token punctuation">,</span>
            stderr<span class="token operator">=</span>subprocess<span class="token punctuation">.</span>STDOUT<span class="token punctuation">,</span>
            text<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>
            bufsize<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span>
            universal_newlines<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>
            creationflags<span class="token operator">=</span>subprocess<span class="token punctuation">.</span>CREATE_NEW_PROCESS_GROUP <span class="token keyword">if</span> os<span class="token punctuation">.</span>name <span class="token operator">==</span> <span class="token string">'nt'</span> <span class="token keyword">else</span> <span class="token number">0</span>
        <span class="token punctuation">)</span>
        
        <span class="token comment"># å‘é€è¾“å…¥</span>
        current_process<span class="token punctuation">.</span>stdin<span class="token punctuation">.</span>write<span class="token punctuation">(</span>idea <span class="token operator">+</span> <span class="token string">'\n'</span><span class="token punctuation">)</span>
        current_process<span class="token punctuation">.</span>stdin<span class="token punctuation">.</span>flush<span class="token punctuation">(</span><span class="token punctuation">)</span>
    
    <span class="token comment"># æµå¼å“åº”</span>
    <span class="token keyword">def</span> <span class="token function">generate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
            line <span class="token operator">=</span> current_process<span class="token punctuation">.</span>stdout<span class="token punctuation">.</span>readline<span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">if</span> <span class="token keyword">not</span> line<span class="token punctuation">:</span>
                <span class="token keyword">if</span> current_process<span class="token punctuation">.</span>poll<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">is</span> <span class="token keyword">not</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
                    <span class="token keyword">break</span>
                <span class="token keyword">continue</span>
            <span class="token keyword">yield</span> <span class="token string-interpolation"><span class="token string">f"data: </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>line<span class="token punctuation">}</span></span><span class="token string">\n\n"</span></span>
        <span class="token keyword">yield</span> <span class="token string">"event: end\ndata: \n\n"</span>
    
    <span class="token keyword">return</span> Response<span class="token punctuation">(</span>
        generate<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        mimetype<span class="token operator">=</span><span class="token string">'text/event-stream'</span><span class="token punctuation">,</span>
        headers<span class="token operator">=</span><span class="token punctuation">{<!-- --></span>
            <span class="token string">'Access-Control-Allow-Origin'</span><span class="token punctuation">:</span> <span class="token string">'*'</span><span class="token punctuation">,</span>
            <span class="token string">'Cache-Control'</span><span class="token punctuation">:</span> <span class="token string">'no-cache'</span><span class="token punctuation">,</span>
            <span class="token string">'X-Accel-Buffering'</span><span class="token punctuation">:</span> <span class="token string">'no'</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">_build_preflight_response</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    response <span class="token operator">=</span> jsonify<span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token string">'status'</span><span class="token punctuation">:</span> <span class="token string">'ok'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    response<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>add<span class="token punctuation">(</span><span class="token string">"Access-Control-Allow-Origin"</span><span class="token punctuation">,</span> <span class="token string">"*"</span><span class="token punctuation">)</span>
    response<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>add<span class="token punctuation">(</span><span class="token string">"Access-Control-Allow-Headers"</span><span class="token punctuation">,</span> <span class="token string">"*"</span><span class="token punctuation">)</span>
    response<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>add<span class="token punctuation">(</span><span class="token string">"Access-Control-Allow-Methods"</span><span class="token punctuation">,</span> <span class="token string">"*"</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> response

<span class="token decorator annotation punctuation">@app<span class="token punctuation">.</span>route</span><span class="token punctuation">(</span><span class="token string">'/stop'</span><span class="token punctuation">,</span> methods<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'POST'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">stop_execution</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">global</span> current_process
    <span class="token keyword">with</span> process_lock<span class="token punctuation">:</span>
        <span class="token keyword">if</span> current_process <span class="token keyword">and</span> current_process<span class="token punctuation">.</span>poll<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">is</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
            current_process<span class="token punctuation">.</span>terminate<span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> jsonify<span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token string">'status'</span><span class="token punctuation">:</span> <span class="token string">'stopped'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> jsonify<span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token string">'status'</span><span class="token punctuation">:</span> <span class="token string">'not running'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">404</span>

<span class="token decorator annotation punctuation">@app<span class="token punctuation">.</span>after_request</span>
<span class="token keyword">def</span> <span class="token function">add_cors_headers</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">:</span>
    response<span class="token punctuation">.</span>headers<span class="token punctuation">[</span><span class="token string">'Access-Control-Allow-Origin'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'*'</span>
    response<span class="token punctuation">.</span>headers<span class="token punctuation">[</span><span class="token string">'Access-Control-Allow-Headers'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'Content-Type'</span>
    response<span class="token punctuation">.</span>headers<span class="token punctuation">[</span><span class="token string">'Access-Control-Allow-Methods'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'GET, POST, PUT, DELETE, OPTIONS'</span>
    <span class="token keyword">return</span> response

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    app<span class="token punctuation">.</span>run<span class="token punctuation">(</span>port<span class="token operator">=</span><span class="token number">5000</span><span class="token punctuation">,</span> threaded<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
</code></pre>
    <p>
     index.htmlçš„é¡µé¢ä»£ç å¦‚ä¸‹ï¼š
    </p>
    <pre><code class="prism language-html"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>zh-CN<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1.0<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>OpenManus å®æ—¶æ§åˆ¶å°<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/5.3.0/css/bootstrap.min.css<span class="token punctuation">"</span></span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
        <span class="token selector">#output</span> <span class="token punctuation">{<!-- --></span>
            <span class="token property">background</span><span class="token punctuation">:</span> #1e1e1e<span class="token punctuation">;</span>
            <span class="token property">color</span><span class="token punctuation">:</span> #d4d4d4<span class="token punctuation">;</span>
            <span class="token property">padding</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
            <span class="token property">border-radius</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span>
            <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">'Consolas'</span><span class="token punctuation">,</span> monospace<span class="token punctuation">;</span>
            <span class="token property">height</span><span class="token punctuation">:</span> 60vh<span class="token punctuation">;</span>
            <span class="token property">overflow-y</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>
            <span class="token property">white-space</span><span class="token punctuation">:</span> pre-wrap<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token selector">.log-item</span> <span class="token punctuation">{<!-- --></span>
            <span class="token property">margin</span><span class="token punctuation">:</span> 5px 0<span class="token punctuation">;</span>
            <span class="token property">padding</span><span class="token punctuation">:</span> 3px 10px<span class="token punctuation">;</span>
            <span class="token property">border-left</span><span class="token punctuation">:</span> 3px solid #3c3c3c<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token selector">.loading</span> <span class="token punctuation">{<!-- --></span>
            <span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>
            <span class="token property">top</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
            <span class="token property">right</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
            <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container py-5<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text-primary mb-4<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>ğŸš€ OpenManus å®æ—¶æ§åˆ¶å°<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
        
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mb-4<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>textarea</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ideaInput<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-control bg-dark text-light<span class="token punctuation">"</span></span> 
                      <span class="token attr-name">rows</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4<span class="token punctuation">"</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>è¾“å…¥æ‚¨çš„åˆ›æ„ï¼ˆç¤ºä¾‹ï¼šåˆ†æç‰¹æ–¯æ‹‰æœ€è¿‘ä¸‰ä¸ªæœˆçš„è‚¡ä»·è¶‹åŠ¿å¹¶ç”Ÿæˆå¯è§†åŒ–æŠ¥å‘Šï¼‰<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>textarea</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>d-flex gap-2 mb-4<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>btn btn-success<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">startExecution</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">&gt;</span></span>å¼€å§‹æ‰§è¡Œ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>btn btn-danger<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">stopExecution</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">&gt;</span></span>ç»ˆæ­¢ä»»åŠ¡<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>card bg-dark<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>card-header text-light<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>å®æ—¶è¾“å‡º<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>output<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>card-body<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>loading<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>loading<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>spinner-border text-primary<span class="token punctuation">"</span></span> <span class="token attr-name">role</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>status<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>visually-hidden<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>åŠ è½½ä¸­...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
        <span class="token keyword">let</span> eventSource <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

        <span class="token keyword">function</span> <span class="token function">showLoading</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'loading'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">'block'</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">function</span> <span class="token function">hideLoading</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'loading'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">'none'</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">function</span> <span class="token function">clearOutput</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'output'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">function</span> <span class="token function">showError</span><span class="token punctuation">(</span><span class="token parameter">message</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">const</span> output <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'output'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            output<span class="token punctuation">.</span>innerHTML <span class="token operator">+=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;div class="text-danger"&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>message<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/div&gt;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">function</span> <span class="token function">ansiToHtml</span><span class="token punctuation">(</span><span class="token parameter">text</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> text
                <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\x1B\[32m</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">'&lt;span class="text-success"&gt;'</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\x1B\[31m</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">'&lt;span class="text-danger"&gt;'</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\x1B\[0m</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">'&lt;/span&gt;'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">function</span> <span class="token function">startExecution</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">const</span> idea <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'ideaInput'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>idea<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'è¯·è¾“å…¥æ‰§è¡Œå†…å®¹'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            
            <span class="token function">clearOutput</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">showLoading</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// å…ˆå‘é€POSTè¯·æ±‚</span>
            <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'http://localhost:5000/stream'</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span>
                <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">headers</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
                    <span class="token string-property property">'Content-Type'</span><span class="token operator">:</span> <span class="token string">'application/json'</span><span class="token punctuation">,</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token literal-property property">body</span><span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> <span class="token literal-property property">idea</span><span class="token operator">:</span> idea <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">response</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>response<span class="token punctuation">.</span>ok<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">HTTPé”™è¯¯ </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>response<span class="token punctuation">.</span>status<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token comment">// å»ºç«‹SSEè¿æ¥</span>
                eventSource <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EventSource</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">http://localhost:5000/stream?idea=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span><span class="token function">encodeURIComponent</span><span class="token punctuation">(</span>idea<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                
                eventSource<span class="token punctuation">.</span><span class="token function-variable function">onmessage</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
                    <span class="token keyword">const</span> formatted <span class="token operator">=</span> <span class="token function">ansiToHtml</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'output'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">+=</span> 
                        <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;div class="log-item"&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>formatted<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/div&gt;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
                    <span class="token comment">// è‡ªåŠ¨æ»šåŠ¨</span>
                    <span class="token keyword">const</span> output <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'output'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    output<span class="token punctuation">.</span>scrollTop <span class="token operator">=</span> output<span class="token punctuation">.</span>scrollHeight<span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">;</span>

                eventSource<span class="token punctuation">.</span><span class="token function-variable function">onerror</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
                    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'SSE Error:'</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token function">hideLoading</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    eventSource<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">;</span>

                eventSource<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'end'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
                    <span class="token function">hideLoading</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    eventSource<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">error</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
                <span class="token function">hideLoading</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">showError</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">è¯·æ±‚å¤±è´¥: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>error<span class="token punctuation">.</span>message<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">function</span> <span class="token function">stopExecution</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>eventSource<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                eventSource<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">hideLoading</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'http://localhost:5000/stop'</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span>
                <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'POST'</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">response</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>response<span class="token punctuation">.</span>ok<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'å·²ç»ˆæ­¢æ‰§è¡Œ'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// æ¸…ç†èµ„æº</span>
        window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'beforeunload'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>eventSource<span class="token punctuation">)</span> eventSource<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'/stop'</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'POST'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre>
    <p>
     å¯åŠ¨æœåŠ¡ï¼š
     <br/>
     <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://i-blog.csdnimg.cn/direct/e6b26f26eb8d4e5a8607f8da6414bd00.png"/>
     <br/>
     æ‰§è¡Œä¸Šé¢çš„å‘½ä»¤ï¼Œæ¿€æ´»open_manus3.12çš„pythonç‰ˆæœ¬ï¼Œç„¶å å¯åŠ¨æœåŠ¡ï¼Œpython app.py,å¯åŠ¨æœåŠ¡å®Œæ¯•ï¼Œæµè§ˆå™¨ç›´æ¥è®¿é—®ï¼šhttp://localhost:5000/
     <br/>
     <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://i-blog.csdnimg.cn/direct/2f0336aa04d544849741fdb742f082a1.png"/>
     <br/>
     openmanusä¼šæŒ‰ç…§æ­¥éª¤ç»™ä½ æ‰§è¡Œï¼Œè‡ªåŠ¨å¤„ç†ï¼Œè§£æ”¾åŒæ‰‹å§ã€‚
     <br/>
     <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://i-blog.csdnimg.cn/direct/9d33038d6e6d47a8aa6ce7ff1db6020b.png"/>
    </p>
    <p>
     è‡³æ­¤åŸºæœ¬ä¸Šå°±å®Œæˆäº†ã€‚
     <br/>
     æˆ‘æœ¬åœ°ä¹Ÿæ˜¯åˆšè·‘å‡ºæ¥ï¼Œå¤§å®¶é‡åˆ°ä»€ä¹ˆé—®é¢˜ï¼Œæ¬¢è¿å¯ä»¥äº’ç›¸å¥—è·¯ã€‚
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f67:2e6373646e2e6e65742f7869617469616e5f77696e3132332f:61727469636c652f64657461696c732f313436313539373334" class_="artid" style="display:none">
 </p>
</div>


