---
arturl_encode: "68747470733a2f2f62:6c6f672e6373646e2e6e65742f71715f33363037323536352f:61727469636c652f64657461696c732f313236313536323731"
layout: post
title: "大话通信阅读笔记整理"
date: 2025-02-25 11:04:19 +08:00
description: "本人从事的是卫星物联网行业，平时接触的更多的是卫星通信应用层方面。但是其实卫星通信和地面通信系统是有"
keywords: "大话通信"
categories: ['未分类']
tags: ['网络', '物联网', '学习']
artid: "126156271"
image:
  path: https://api.vvhan.com/api/bing?rand=sj&artid=126156271
  alt: "大话通信阅读笔记整理"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=126156271
featuredImagePreview: https://bing.ee123.net/img/rand?artid=126156271
---

# 《大话通信》阅读笔记整理

## 前言

本人从事的是卫星物联网行业，平时接触的更多的是卫星通信应用层方面。但是其实卫星通信和地面通信系统是有很多相似之处的，在我们去考虑物联网的行业上的应用时，需要先了解完整的通信体系是什么样的。当然，包括我自己在内容的大部分人都不是通信专业的，我们不用去深入底层了解所有的机制和原理，更多的是了解完整的体系，知道他们区别和价值，这样才能够了解最新的技术和行业方向。本文只是对书籍、文章的知识整理，如果你不想看那几百几千页的书籍，你可以看看这篇简单的文章，对此有一个大致的了解。但是我还是强烈建议，找几本不错的书籍好好看看。本人看的主要是大话书籍系列，这个系列的书籍我很喜欢。还有其他一些讲述物联网和5G,卫星网络的数据文章。本文中的原始材料以及图片等都是来自这些书籍和文章，文档正文不再一一说明。本文理解能力有限，如有不正确的地方还请指出。

## 1.数字通信系统

移动通信在最初的时候，可没有考虑数据业务，而是为了解决通话和短信，也就是早期的GSM系统，至于我们说的2G是在后面再加进去的。在看具体的移动通信系统之前，我们需要先看看从声音道电磁波的整个框架，之后，才开始进入到完整的通信系统。
  
在无线通信之前，大家都知道有线通信，但是有线通信是将声音转为电信号通过线缆进行传输的。电磁波出现之后，才有了无线通信。无线通信，需要处理的便是数字信号。不过需要注意的是，模拟通信并没有被完全替代，它是有它的优点的。不过对于我们普通的通信体系，数字通信之所以能够替代模拟通信，主要是由于远距离传输中的噪声处理。
  
如下图所示的数字通信系统框图：
  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/03c88d23d376484656cecaa80d75efad.png)
信源与输入变化器以及信源与输出变化器是声信号和电信号之间的相互转化，此时的电流信号依旧是模拟信号。
  
信源编码则是将电流模拟信号转为数字信号，其流程经过抽样，量化，编码，得到我们熟悉的比特流数据了。
  
信道编码是以提高信息传输的可靠性为目的的编码，通俗讲就是用来判断数据的对错。比如串口通信中的奇偶校验位。
  
调制是频谱的搬移，是将低频信号嫁接到高频信号上进行传输。
  
信道传输，就是涉及到复杂的通信系统了。
  
以上每一点展开讲也是很复杂的，我本人也不是通信专业，也不可能通过几本书就能全部明白，只是知道大概，但是对于我们应用来说已经够了。
  
这个流程图不仅仅适用于地面移动通信，同样适用于卫星通信，我们平时做的卫星数据收发几乎是一样的，主要区别还是在信道，也就是空中传播不一样。

## 2.通信频率的使用

在具体讲述各个通信系统前，需要先明白四个概念，空分，频分，时分，码分。这些概念的提出目的都是一样的，解决频率资源有限的问题。其中码分比较特殊，在讲WCDMA时再进行说明。卫星的资源其实是更加紧张的。电磁波的范围是很大的，但是适合移动通信组网的频段不多，主要是微波的300MHz~3GHz,
  
不要觉得这个范围很大，三大运营商每一家分配的到的也只有几十MHz的带宽范围。没办反，适合通信的电磁波范围很少，还需要考虑上下行以及干扰等问题，剩下的也就那么点了。1MHz带宽的频率范围价值都是超过10亿美金的，国外运营商是真的花这么多钱买的！国内则有国家分配。
  
有限的电磁波就带了很大的问题，我们这么多人通信，每个人通信假设需要25KHz的带宽，电信的带宽也就几十MHz,肯定是不够用的。空分，频分，时分以及码分就是为了处理这个问题的。

### 2.1 空分复用

空分复用，是指降低发射塔的发射功率，缩小覆盖半径。这样可以让同一个频段在不同的空间内得到重复利用，称之为空分复用。
  
举个例子，广电的无线电视，一个城市，只有一个发射塔。因为电视信号是单向的，只有下行，没有上行。并且电视台的数目是有限的，也就几十个，多了也看不过来。假设电视台拥有100Mhz ~ 150Mhz的频率范围，一个电视台需要25kHz的带宽，那么第一个电视台100
100.025MHz的范围，第二个电视台就是100.025
100.50，依次累加，肯定是足够看的。
  
但是手机通信不一样，手机通信时双向的，而且手机通信的用户非常多。假设一个城市还是只有一个发射台，还是100~150MHz的频率范围，那么也就是50MHz带宽，假设一个人通信需要25KHz,但是由于上下行，频率需要错开，所以一个人就要占用50KHz的带宽，一个发射塔，只能2000个人使用，在考虑到干扰等因素，可能也就只能1500个用于使用。中国电信的CDMA2000只分配了上下行15MHz的频宽，肯定是不够的的。
  
空分复用是降低每一个发射塔的功率，缩小一个发射塔的覆盖半径。但是增加发射塔的数量，这样每一个塔范围下都可以使用同一个频段，并且互不干扰，发射塔其实就是基站。到这里就需要额外说的是，基站发射的信号覆盖范围呈六边形，一个个的基站组成起来，就成了蜂窝网了。

### 2.2 频分

频分很好理解，就是就是把一段频谱切成N块，每块分给一个载波，让这个载波去承载用户。就像上面说的，中国电信有15MHz的频宽，肯定不是给一个用户使用，每个用户只能分配到200KHz的频宽。

### 2.3 时分

有了频分和空分，依旧是不够用户使用的。一个基站也只有15MHz/200KHz=75个用户，算上干扰，更少了。于是便有了时分的概念。频分是从频宽行进行分割，时分是从时间上进行分割。也就是说，200KHz的带宽，7个人轮着使用。夸张一点，一人使用1S，轮流占用。不过实际的时分不过这么长时间的，只有几毫秒，这么短的时间间隔，对于通信人是感觉不出来的。

## 3.GSM 全球移动通信系统

相比较于WCDMA、TD\_SCDMA、CDMA2000、LTE等，GSM相对而言好理解些，毕竟GSM不涉及码分的概念。
  
GMS 网络图如下所示：
  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/31df41bfd02a625ea20ccf635d35df51.png)
基站（BTS），每一个基站覆盖一片区域，其功能有三点，和手机进行通信，进行功率控制，基站之间的切换。
  
移动交换中心（MSC），负责基站之间的数据交互。
  
基站控制器（BSC），管理基站。
  
归属位置寄存器（HLR），里面存储了开卡信息，包含用户的姓名，电话号码，开户地以及动态信息，也就是现所在地。
  
拜访位置寄存器（VLR），存储了一个用户具体在哪一个BSC的下。
  
鉴权中心（AuC）,用于盈利和加密。
  
其中，MSC和VLR是合在一起的，HLR/Auc是合在一起的。
  
在GSM系统图中，只有手机和基站是无线传播的，其他设备都是线缆通信。需要注意的是，这个系统只能完成电话和短信，至于想上互联网，还得升级下才行。那么这个系统如何实现通信的呢。实现通信，又有四个核心问题，广播，寻呼，切换，鉴权与加密。这四个概念在WCDMA、TD-SCDMA、cdma2000以及LTE都是适用的。说的通俗点，就是制订一套通信流程和通信协议，实现电话和短信的需求。

### 3.1广播

从图上直观的就能看到，和手机直接产生通信的，是各个基站。那为什么要这么多基站呢。这就是上面提到的空分概念，频谱资源有限，一个基站不够大家使用。所以每个基站负责一小块区域，各个基站都是用相同的频率范围，但是互不干扰。GSM系统相邻的两个基站使用的其实是不同的频率，依次错开的，能更好的防止干扰，这个干扰指的是基站和基站之间的干扰。
  
手机打电话时，首先需要知道自己在哪个基站下，这样才好和所处的基站通信。而手机是如何实时知道自己所处的基站呢，这就是通过广播来实现的。基站会一直广播一些身份信息，手机也会一直接收这样的信息，从而早知道自己处于哪一个基站之下。
  
基站广播的内容有基站的标识，空中接口的结构参数（频率，位置区等参数）。虽然一个区域由一个基站负责，但这是理想状态，实际情况两个基站之间肯定有信号相交区的。这时候手机会根据广播信号找到信号最好的基站去通信。

### 3.2寻呼

广播是手机去寻找自己所处的基站，寻呼是基站去找手机。手机拨号后，告诉所处的基站找谁进行通信，可是基站这么多，用户也那么多，怎么去找对端手机呢。
  
GSM是将一个城市的无线网络划成若干个位置区，并分位置区广播自己的位置区消息。 手机通过侦听广播信息得知自己所在的位置区，如果发现自己的位置区发生了变化，则主动 联系无线网络，上报自己所在的位置。系统收到手机发来的位置变更消息后，就把它记载在 数据库里，这个数据库就是图中的位置寄存器。等通信系统收需要对该手机的请求时，就首先查找位置寄存器，确定手机当前所处的位置区，再将被叫的请求发送到该位置区的所有基 站，由这些基站对手机进行寻呼。
  
在图中，有一个归属位置寄存器，HLR，这个设备是在运营商的核心网中。运营商给每个用户开卡时，会分配一个电话号码和一个IMSI号。
  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/3da0fc67f3848876987f93740208ccbd.png)
静态信息是不变的，但是动态信息怎么获取呢。就是上面说的寻呼，当手机通过广播发现自己的位置改变了，就会主动上报给本地MSC，本地MSC会通知开户的MSC更改信息。
  
图中，还有一个拜访位置寄存器，这个设备是存储用户具体在哪一个BSC下的。
  
用户拨号时，首先根据号码去判断这个号码的是那个地方的，从而去寻找所属地的HLR，在从中获取HLR，这样就能知道当前对方所在地。
  
我们的手机号码也不是随便编的，我们的手机号码叫做移动台的国际ISDN号码。
  
MSISDN = CC + NDC + SN
  
CC代表国家码，比如中国的是86.
  
NDC代表国内目的地码，就是平时号码的前三位。中国移动134
139,150
152,157~159。我们经常用的天通号码是174。
  
SN用户号码，一共8位，这8位里面有四位是归属区，就是什么地方的。
  
还有IMSI，LAI，CGI码，这些是系统中使用的，我们一般不关注。

### 3.3切换

通过广播和寻呼，两个手机开始建立通信了，但是和固话不一样的是，手机在通信中可能是移动的，比如坐地铁，一个电话十分钟，地铁可能已经过了两个区了。那么此时基站不知道都换了多少个了。
  
如果每更换一个基站，都需要先断开原有的连接，再和新的基站连接，那么通信就是不连续的，这种叫做硬切换。
  
若手机和相邻的两个基站同时保持联系，当手机彻底进入某一个基站的覆盖区域后，才 断开与另一个基站的联系，切换期间没有中断通话，称之为软切换。
  
对于GSM来说，它只有一套信号滤波器，滤波器锁定在目前通信的工作频点。而GSM 的邻区工作频点都是不一样的，要完成切换，必须更改当前信号滤波器的频段，等调谐到要 切换的频率才能和新的基站建立通信，因此必然有个先断后连的硬切换过程。
  
切换是双向的，手机和基站都需要进行切换。但是一个基站只知道自己的状态，并不知道其他基站的状态，所以到底需不需要切换，是由管理基站的基站控制器决定的。
  
基站控制器还有一个功能就是功控。为什么这里控制功率不是基站和手机自己调整，而是由基站控制器控制呢，原因和上面时一样的。手机所处的位置很可能时多个基站的，需要基站控制器比较各个基站的信号和质量来进行功控。

### 3.4鉴权与加密

这个很好理解，运营商建立如此庞大的通信系统，肯定得要盈利。运营商会给每个用户一张SIM卡，对应一个手机号码。但是这里有个问题，如何不让别人盗用。你在通信过程中，运营商通过手机号来计算费用，但是手机号不是保密的，很容易被盗用，所以需要一套加密系统。
  
GMS得加密如下所示：
  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/53ced72b085bcdf41a22c62f16834ac6.png)
首先基站会给手机一个随机值，手机根据随机值，以及自己SIM卡内部保存得一个叫作Ki的值经过一种叫A3算法，就会得到一个SRES值，手机将IMSI和SRES值发送给基站，基站再传给Auc，Auc会进行相同的计算，如果结果一致，那么就会确认时合法用户。
  
如果把A3算法变成A8算法，就会将话音比特流进行加密，这样即使拦截电磁波获取数据，也解析不出来。

### 3.5 空中接口

讲了这些，只是知道各个设备单个的功能和通信流程，但是完整的通信如何在这些设备上进行的呢。那就有一个非常重要的元素，接口，也就是通信协议。这个通信协议需要承载如此庞大的通信系统，肯定比我们平时用的十几页纸的通信协议要复杂很多。
  
手机和基站之间的接口称为空中接口，Um接口。
  
基站和基站控制器之间的接口称为Abis接口。
  
基站控制器和移动交换中心MSC之间的接口称为A接口。
  
我们不用过多考虑Abis接口和A接口，因为这两个接口的设备都是线缆连接的 ，不存在资源紧张和干扰的问题，所以他们之间的通信协议要好处理的多。事实上，每一次通信系统的改革，都是空中接口的改革。
  
GSM是一个频分复用系统，每个频点200KHz。同时GSM也是一个时分复用系统，这是GSM的特点TDMA，时分多址技术。
  
那么GSM是如何实现时分的。
  
GSM在时间域上分为8个时隙，每个时隙承载1个用户。如下图所示：
  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/7f889547d012b992b40ee7d3bef5ec27.png)
一个TDMA帧4.615ms，再分成8个时隙，每个时隙0.577ms。那么肯定会有人怀疑这样打电话岂不是断断续续的，其实不会的，4ms的时间差人是感觉不出来。
  
不过GSM不是把8个时隙全部拿来承载业务的，而是留出一个用来管理系统，留出的是0号时隙。
  
我们之前说了基站需要一直广播，从而所属区域的手机才能知道自己的位置和基站信息。在通信时，首先手机需要获取广播信息，也就是0号时隙。0号时隙并不是每次都发送一样的数据，不同的时刻发送不同的数据，具有不同的作用。
  
基站是持续发出信息的，手机不知道什么时候接收信息，所以只能持续接收，但是这样接收到的数据肯能是从中间不知道什么地方开始的，那就是不完整的数据，无法解析，也不知道下一帧什么时候到。所以，在进行正式通信之前，首先要做的是同步。
  
0号时隙上首先会给出一个全0信号，这个信号用于手机的锁定载频，也就是GSM里的频率校正信道，FCCH。
  
确定频率之后，那就需要和这个频率上的信号进行同步。收听广播是不需要时间同步的，一直接收就行。而这个广播里面，包含了TDMA帧号，手机根据这个帧号计算时间，和基站同步。这个信号叫做SCH同步信道。
  
同步结束后，手机还得一直接收广播，依旧是0号时隙上承载。这个广播告诉手机基本信息，比如附近的载频，相邻的基站，发射功率等。这个信道就是BCCH信道。
  
FCCH信道，SCH信道，BCCH信道都是使用的0号时隙，他们是轮流使用的。不过他们出现的频率是不一样的，BCCH的出现频率更高，因为它承载的信息最多。到了这里，手机只是具有通信的基本条件，想要通信，还需要再做申请。即使GSM使用了空分，频分，时分，但是资源依旧是紧张的，不可能每人一个随时待命。所以手机在使用时，首先需要向基站申请资源，看看一个TDMA帧中其余7个时隙哪一个可以分配给自己使用。而这个申请的信道也是使用的0号时隙，上下行分别为随机接入信道RACH和允许接入信号AGCH。
  
到了这一步只需要找到对端的手机，通信就建立了。如何找到对端用户，我们上面说过了，使用寻呼。寻呼信道，PCH，依旧使用的0号时隙。这个信道便是去查找对端手机所在的MSC和当前位置区了。

总结下：
  
FCCH和SCH信道用以时间和频率的同步。
  
BCCH信道用来听广播消息。
  
RACH和AGCH信道用来申请和批准接入。
  
PCH信道用来寻呼。
  
只有RACH是手机发给基站的上行信道，其他都是下行。这些信道轮流占用0号时隙，只是频率不一样。GSM每一个大轮询51个帧，这51帧里面包含了这些信号以及一个空闲帧信道。这个空闲真帧也不是真的空闲的。
  
经过上面的信道处理后，两个手机便可以开始占用一个时间间隙进行通过了，我们称为业务信道，2~7时隙都是用作业务信道的。
  
还剩下一个1号时隙比较特殊，他只有一个信道，叫做SDCCH，独立专用控制信道。是用来处理鉴权和发送短信等信息量很小并且不用持续的工作的。
  
另外在业务TCH时隙中，也会穿插着一个信道，叫做SACCH，慢速随路控制信道。就是在电话过程中收发短信的。

到了这里，GSM的通信系统就全部结束了，我们发现原来的GSM的提出只是为了打电话和发短信，还没有互联网的概念。当互联网迅速发展后，GSM系统已经无法满足人们的需求。所以GSM系统需要进行一个升级，将话音系统升级为任何信息的交换。

升级肯定是有一个基础前提的，就是不能更改GSM的基础系统。如果动了基本的系统设备，设计硬件，那么这个升级的成本实在太大了。所以，GSM升级为GPRS、EDGE时，设计者并没有动摇GSM的基本系统框架。
  
GPRS网络是需要传递IP分组业务，连接到Internet，所以在GSM系统上，增加了PCU、SGSN、GCSN三种设备，如下图所示：

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/f42348798369e362b337df1b215c7675.png)
PCU，分组控制单元与BSC部署在一起，将分组数据从GSM话音数据里分离出来，并且传送给SGSN。
  
SGSN，GPRS服务支持节点，其实就是一种MSC，用来管理和路由选择的。
  
GGSN，网关GPRS支持节点，GGSN实际上是GPRS网络对外部数据网络的网关和路由器， 它提供 GPRS 和外部分组数据网的互连。 GGSN接收移动台发送的数据，选择到相应的外部 网络，或接收外部网络的数据，根据其地址选择GPRS网内的传输通道，传输给相应的 SGSN。 此外，GGSN还有地址分配和计费的功能。
  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/acd4874585a2b60943d564892427c180.png)
EDGE 网络结构和空中接口和GPRS一样，区别在于调制方式和编码方式。
  
GPRS 的最高速率是171.2kbit/s。
  
EDGE最高是473.6kbit/s。
  
不过这只是理想，实际你用的时候一般速率都没有。不够，这也满足你聊聊QQ浏览WAP网了。
  
还记得以前的洛基亚老板手机，上网的时候全是文字，图片基本是没有的，视频更别想了。其原因便是GPRS和EDGE的速率无法承载视频和多媒体数据的传输。互联网的迅猛发展也促使了通信系统的改革，从而引出高通公司的CDMA。

## 4 3G - WCDMA

2G的通信系统实现的是人们话音和短信的通信，在2G之后，互联网的迅猛发展，使得人们对手机的要求越来越高，从而iPhone和Android 为代表的的智能手机开始出现在市场。
  
3G有3大标准，分别为WCDMA、TD-SCDMA和cdma2000，三者都是相似的，分别使用在欧洲，中国和美国。3G在部署时，同样的考虑成本，所以他的硬件系统模型和GSM基本一致的，最主要的区别就在于空中接口。在讲述2G的空中接口时就说过，每一次通信系统的变革都是这个空中接口的变革。我们先讲述WCDMA，之后描述TD-SCDMA。

空中接口是基站和手机之间的空气中的电磁波的信息传输，而其他的设备都是电缆传输数据，不存在干扰等问题。所以我们首先来看WCDMA系统在空中接口上是如何改进的。
  
GSM的系统空中接口最大的限制就是带宽，为什么这么说。香农定理
  
C = B lb(1+S/N)
  
这个公式的C代表的传输速率，B代表带宽，S/N是信噪比。想要提高传输速率，要么提高B，要么提高S/N。S/N信噪比，这个没什么能做到，GSM系统做的也很不错了。所以只能增加带宽B了。
  
之前我们说过，电磁波的频率资源有限，能分配的资源不多。WCDMA一个载波的带宽是5MHz，用户们都是使用这一个的带宽，可是这样就会互相干扰。GSM使用的FDMA、TDMA系统，但是WCDMA是不可以降低带宽的，想要解决这个问题，就需要使用码分多址概念。
  
码分多址，CDMA相比较于频分、时分难理解些。
  
CDMA技术的基础是扩频技术。跳频是指的信息在一段时间内在一个频率上传输，然后跳到另一个频率进行传输。扩频则是则是在跳频的基础上发展而来，扩频是多个频道上同时发送信息。
  
CDMA首先运用扩频技术，将话音信号和比他速率高很多倍的扩频序列相乘，从而将原始的信号变为一个高速率的信号。而在这个过程中，每个用户使用不同的扩频序列，则可以有效的区分两个信号。但是，这些扩频序列不是随意的的，而是需要具备正交性。这个具备正交性的扩频序列就是扩频码，在WCDMA和TD-SCDMA中称为OVSF码，即正交可变扩频因子。在CDMA2000中，称为Walash码，他们的来源都是一样的。
  
在这里只需要记住使用这样的扩频码可以区分两个信号即可，因为这个扩频码利用了电磁波的正交特性，和物理知识相关，我们不去深层追究。
  
下面，我们列出一个OVSF码数，还记得矩阵的计算吗。
  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/cf90ce7e853abebfaf3771859d0c51d3.png)
扩频码就是这种长度可变的正交矩阵。这样的矩阵有很多，适用于通信的也已经有人找到了，看OVSF码树：
  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/341ee0970a2d42aae37c29e10756a368.png)
这个码树可以一直扩展下去。使用上面的矩阵计算发现，当使用一个扩频码时，只要这个扩频码的上一级或者下一级没有被占用，就可以使用。
  
到这里，只是讲述了扩频码的正交特性也就是用户在使用相同的带宽下能够相互之间不会干扰，这和扩频有什么关系呢。
  
前面GSM系统描述了话音通信是经过编码后再经过调制，之后进行电磁波的传输。这点和我们使用的卫星通信很像。
  
对于WCDMA而言，后面又加了一步，就是调制后得到的符号与OVSF码相乘，这样得到一个新的信号，称为码片。经过这样的一个计算，得到的新的码片的传输速率远远高于基带传输速率。比如一个话音信号编码之后，速率可能是 30kbit/ s。但是OVSF 码的速率达到了 3. 84Mchip/ s。不同的扩频码有不同的速率，这便是扩频。
  
那么扩频有什么好处呢，看香农定理，信道容量C不变（也即传输速率不变），则信号带宽B和信噪比 S/ N 是可以互换的。只要增加信号带宽，就可以在较低的信噪比情况下，以相同的信息速率来可靠地传输信息。甚至在信号远小于噪声，完全被噪声淹没的情况下，只要相应地增加信号带宽，仍然能保持可靠的通信。也就是说，扩频可以使用更高的带宽传输信息来换取信噪比上的好处。
  
到这里，已经解决了速率的问题了，所以WCDMA为每一个基站分配了一颗OVSF码树，不同的用户可以占用这颗码树上不同的扩频码，每一个手机上也有一个OVSF码树，手机的不同业务可以使用不同的扩频码。
  
但是这里依旧存在一个问题，对于下行而言，基站只有一个码树，所以和不同的手机通信使用不同的扩频码，没什么问题。但是对于上行，每一个手机都有个码树，手机之间肯定是不知道其他手机当前使用的扩频码，所以会存在同一个基站下不同的手机在上行使用同样的扩频码，这样就会产生干扰。即使使用不同的扩频码，解码也是需要一定的信噪比才能解得出来的，这种干扰称为远近效应。也就是距离基站近的会将距离基站远的信号覆盖了。
  
WCDMA对于这种情况的处理使用的是信噪比C/I进行处理，也就是听不清的让他增加功率，直到能够获取到信息为止。不过这样也只是能够接收到信号，可是现在信号用的是一样的扩频码，如何区分它们是不同的手机发出来的呢，这在通信中又增加了一个扰码。完整的信号处理完成为。扰码的作用就是可以区分上行方向不同的手机。而扰码是基站分派给下面的手机的，所以不存在不同的手机还是用一样的扰码问题。
  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/e1e78ff0bf181a84e010d8781fc85379.png)
在GSM系统里面因为他的特性无法进行软切换，这在WCDMA中便处理了这个问题。其实就是利用的C/I的基准。每个手机都有个基准C/I，手机会判断不同基站和自己通信的这个值，从而使用最好的那个。而这个过程中，手机是同时和多个基站保持连接的，只不过只有使用的那个处于激活的状态，也就是进行通信。其他的只是在监测信号质量，一旦合适就会激活替换原来的基站。在这个过程中，整个的通信并没有中断，因为它与各个基站本来就建立了连接，只不过激活后传输数据而已。

到这里，WCDMA空中接口的传输原理就结束了，总的来说就是使用扩频码和扰码进行通信，并且保证了速率。
  
那么接下来，就开始描述空中接口的工作流程。WCDMA的空中接口的工作流程也GSM差不多，这两者的区别只是频率的使用不一样，和通信流程没什么关系。WCDMA也是同步，广播，寻呼，接入网络这几步。
  
下图是WCDMA 的空中接口的结构：
  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/b2650c003a03dab0cea3a189865855bd.png)
空中接口的流程步骤：
  
1.同步
  
根据SIM卡里的信息去寻找上一次使用的频点。使用这个频点和基站开始同步。基站设置了一个主同步信道P-SCH，主同步信道上面发送主同步码。这个主同步码是固定的序列。和GSM不一样的是WCDMA还需要一个从同步信道S-SCH。
  
这是由于WCDMA的性质决定的。WCDMA同步的目的在于寻找帧的边界以及确定扰码的组号。
  
2.确定扰码
  
WCDMA 中公共导频信道CPICH 用来确定扰码。
  
CPICH信道中包含一个扩频码，我们使用同步之后确定的扰码组中的8个扰码一个个的试，试出全0的那个扰码就对了。当然，CPICH中的这个扩频码时固定的。
  
CPICH信道中还有一个全0序列，他的作用是辅助手机对小区进行信道估计，确定电平值，相位，功率的基准。
  
3.收听广播
  
广播信道，和GSM是一样的。WCDMA里面叫做P-CCPCH。用的也是一个固定256扩频码。手机收听完广播，知道了网络的状况，然后就会选择一个小区驻留下来。
  
处理之外，还有一个S-CCPCH信号，和广播信道一起的，这个信道是用来收听寻呼的。
  
4.发起接入申请
  
发起接入申请时一个上行的信道，叫做PRACH信道，这个信道是占用的手机的资源码。手机发起了申请，基站自然会给与应答。AICH信道捕获只是信道用来做应答。
  
到这一步，手机就已经接入网络可以开始进行业务了。
  
5.业务发起
  
业务分为数据业务和话音业务。如果是数据业务，则分配S-CCPCH信道。这个信道和接收广播是一个名字，没错，这个物理信道上会有两个数据信道。
  
话音业务则是专用的DPDCH信道。
  
另外，如果上网的流量较大，则会分配一个DPCH信道。

至此，一个完整的WCDMA空口的结构就说完了。当然，WCDMA 还有一项区别于GSM的是RLC层。也就是RNC和Node B之间的数据传输。这个里面更多的是数据的打包和任务的分配。这里不多说，这里面的数据传输是通过有线传输的，因为RNC和基站之间都是有线连接。RNC实现的更多是资源的调配。
  
WCDMA已不是一帆风顺的，在起初的时候也有着很多问题，尤其是承载数据业务的能力。在之后，HSDPA（高速下行分组接入）和HSUPA（高速上行分组接入）被推出，分别用来解决上下行的速率问题。
  
至此,WCDMA算是全部结束了。中国研究的TD-SCDMA的基础也是CDMA技术，也就是
  
码分多址，并且其框架也是和WCDMA一样的，但区别于WCDMA的是，
  
①　TD-SCDMA 的码树变化范围是不一样的，下行只有1和16两个扩频码，上行有1,2,4,8,16这几个扩频码。
  
②　空中接口的区别。TD-SCDMA在空中接口上还使用了时分的方式。
  
③　上行同步。
  
当然，TD-SCDMA 作为3G的三大标准之一，其特点肯定是不止这么几个的。不过核心还是在于空口。这里不再做过多的描述，有兴趣的可以去看书籍。

## 5. LTE

2G到3G再到LTE，其变革都是基于一定的研究理论的，但是在2000年之后，已经没有什么大的理论上的科技变革了，所以在LTE发展后，没有革命性的变更了。即使到我们现在使用的KA，KU，天通等卫星通信，其理论基础是一样的。这个时候想要做的更好，就是拼工业技术基础了，为什么国外的天线做的很小很薄，这点在后面讲述卫星通信时再说。可以说，这个方向的发展是肯定的，不管出于什么原因，通信系统迟早都会发展成今天的样子。
  
3GPP为了能和WiMAX抗衡，提出了很多需求，其中核心的几点：
  
1.显著提高峰值数据率，达到上行50MHz/s，下行100MHz/s
  
2.无线接入网的环回延时降低到10ms
  
3.可扩展带宽，支持1.4MHz,3MHz,5MHz,10MHz,15MHz,20MHz。
  
LTE 为了实现需求，也提出了新的技术改革：
  
1.LTE支持最大20MHz带宽
  
2.使用新的核心技术，OFDM技术
  
3.更改核心网
  
简单的看着三点，也能看出其LTE的变革真的是太大了。
  
首先看带宽，GSM和CDMA都已经对香农定理运用到极致了，再想增加速率，只能变大带宽。LTE 和 WiMAX一样，都是支持20MHz的带宽。
  
我们说过，每次的通信改革，其核心就是空口的改革。LTE依旧是这样的。这次LTE和之后的4G，都是选择使用OFDM技术。（高通的专利费过于昂贵，所以厂家都希望更改技术）
  
在核心网侧，LTE直接删除了一个重要的单元，无线网络控制器RNC。并且整个系统架构推出了新的演进型分组系统（EPS）。
  
下面，就看看LTE究竟是如何实现高速率的宽带的。
  
OFDM和MIMO技术，OFDM 和 MIMO 是LTE 最核心的技术，这两个技术在于提升上下行速率。
  
3GPP在指定需求时，就提出了使用新的多址技术，因为高通的专利费用太贵。于是LTE和WiMAX 都选择了OFDM，正交频分复用技术。OFDM一直运用在军方的无线通信上的，因为它的结构太过于复杂。我们不是研究数学理论的，这里就不去深究了。我们也只是简单描述下其流程，建议去看书籍有一个更深刻的了解。
  
在前面我们提过码片，在相等的带宽和相同的调制方式下，想要传输更多的数据，就需要更高的码片速率，即更短的码元周期。如果这是在CDMA中，没什么关系，因为CDMA的带宽最高是5MHz，速率不高。但是OFDM就不一样了，20MHz的带宽，经过一系列的编码后，最后码片速率非常高，码元周期也就非常短。看看LTE的目标，要实现峰值数据率，达到上行50Mbit/s，下行100Mbit/s。而之前的CDMA也只有几Mbit/s~十几Mbit/s的速率。 码元周期过短是有问题的，就是OFDM的麻烦-多径效应。波形在空中传播的时候，遇到障碍物会反射。所以手机天线在接受信号的时候，会接收到多个同样的信号，不过是不同路径传过来的，那么者之间肯定就有时间差。在带宽和调制方式不变化的情况下，越高速率就会带来越低的码元周期、越严重的码间串扰。
  
为了解决这个问题，工程师们使用了频分复用的方法。OFDM将串行的高速率业务通过串并转换（S/ P， Serial/ Parallel），变成N列低速的并行数据。这样一来码元速率就 下降了，码元周期就大大扩展了，从而可以有效对抗码间串扰。最后，把这N列并行数据调制到N个低带宽的子载波上去，就完成了OFDM 中“FDM”的过程。当然，这样的子载波也不是随意找，而是正弦函数及其倍数系列，具有正交性。当然，这个运用到数学知识，我们不做解释，只需知道这样的子载波，可以实现信号的区分和解调就可。
  
不过只是使用频分和正交的方式不足也解决问题，最起码的码间干扰只是降低，并不是完全消除。为了完全消除码间干扰的问题，OFDM在码元之间加入了保护间隔，保护间隔也不是简单的延时，还加入了循环前缀。至此，OFDM解决了码间串扰的问题。
  
总结下OFDM 的解决码间串扰的方法，通过串并转换将高速的串行信号变成低速的多路 并行信号。然后将这多路信号调制到多个正交的子载波上去，为了彻底消除码间干扰，OFDM 又在码元之间引进了空白的完全不发送任何信号的保护间隔，如此一来，同一个子载波之间码间串扰（ISI）的问题是解决了，但是不同子载波之间就会存在干扰（ICI）。为了解决这个问题，OFDM通过将后部分的波形前置，形成“循环前缀”的方法来消除这个干扰，其实也就相当于用循环前缀顶替了原来的保护间隔。
  
LTE还有一项关键技术MIMO，多输入多输出技术。如果只是使用OFDM并不能把速率提升到那么高。不过再增加带宽也不可能了，频谱资源就那么多，不是所有的频率都可以用来通信的。
  
LTE 于是使用了MIMO技术，这种方式利用的是天线。发送端和接收端N个天线，也就是N个通道，一个天线对应一个通道。
  
BLAST 的工作人员从理论上证明了利用同一个频段传输多个信号也是可能的，只要每个信号采取不同的发射天线进行发送，另外在接收端也要用多个天线以及独特的信号处理技术把这些互相干扰的信号分离出来。这样的话， 在给定的信道频段上的容量将随天线数量的增加而成比例增加。BLAST 是一种无线通信新技术，利用信道的散射来得到大的增益，利用信号的多径传播来提高系统的性能。并且实验下来，其速率是传统的天线传输方式的几十倍。
  
LTE的核心技术就是这两点，OFDM和MIMO，解决了上下行速率的目标。其次LTE又在频谱效率，用户延时，可变带宽等方面做出了设计和优化。
  
LTE 首先做出了一个大的决定，删除系统中的基站控制器。LTE的系统只剩下核心网和基站了（可以参考上述GSM的系统架构）。基站控制器的功能也就下移到了基站去了，由基站自行决策。基站也因此进行了升级成为了eNodeB。删除基站控制器的目的就是为了减少延时。
  
以往的蜂窝系统，无论是GSM还是WCDMA，都是包含电路交换和分组交换。但是到了LTE，就不再有电路交换了，LTE只支持分组业务，它是为了在用户终端和分组数据网络间建立IP连接。
  
至于核心网部分，如下图所示：
  
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/3d9ed7597af26cf87df24055c1b74e3a.png)
  
S-GW 是服务网关，负责数据的转发。
  
P-GW 网关功能是分配IP地址。
  
PCRF功能是确定Qos。运营商卖流量有不同的数据包套餐，不同的带宽速度，就
  
是通过PCRF的Qos的确定的。
  
MME 处理手机和核心网之间的信令交互。
  
HLR 用来存储开户信息，用户鉴权信息等。
  
至于LTE物理层的流程，和GSM,WCDMA差不多。还是同步，广播，数据和话音等工作。
  
LTE 和GSM以及WCDMA相比，可以说是革命性的改变。但是和4G技术相比，还是差了一段距离。4G的要求，无非就是更高的速率，更低的延时，更优的架构，更优的成本。
  
LTE 继续发展，就是4G的LTE-Advanced了。
  
通信的发展：GSM - WCDMA - HSPA - LTE - LTE-Advanced ，从起初的话音核心功能到数据分组功能，其要求逐渐变高。
  
LTE-Advanced ，要求下行能达到 1Gbit/s，上行峰值速率为 500MHz，相当于LTE的10倍。对于延时，从空闲状态到连接状态时延小于50ms，从睡眠状态到激活状态转换时延低10ms。LTE-Advanced ，需要支持新频段和大宽带。包含了450 ～ 470MHz、 698 ～ 862MHz、 790 ～862MHz、 2.3 ～ 4.2GHz、 4.4 ～ 4.99GHz。
  
LTE-Advanced 并没有在LTE的基础上做出什么大的修改，因为到了LTE-Advanced,科学理论技术已经没什么新的前沿的技术了，所以LTE-Advanced只是在LTE的整体基础上进行优化，并且可以兼容LTE。
  
LTE- Advanced 有一个很关键的技术运用，载波聚合。LTE支持的带宽是20MHz,到了LTE-Advanced , 可以支持100MHz带宽。但是频谱资源有限，没这么大连续的带宽。所以LTE-Advanced 就使用了载波聚合的技术，能够将连续和不连续的频谱资源进行整合，得到更高的带宽。
  
除此之外，为了提高小区边缘性能和系统吞吐量，改善高数据速率带来的干扰问题， LTE- Advanced 引入了一种叫做协同多点（ CoMP， Coordinated Multi- Point）传输的技术。这个技术使用了两种方式，一个是eNodeB之间铺设光纤进行协调传输，还有一个是使用分布式天线拉近天线和用户的距离。LTE- Advanced 还推出了中继这个概念，用来覆盖信号盲区。LTE- Advanced在维护上也做出了提升，一个如此庞大的网络系统，LTE-Advanced 实现了网关设置，采用自组织网络SON，降低了人力成本。
  
LTE-Advanced 就成了LTE，并没有在空口上做出更改，但是LTE-Advanced将系统架构以及核心网都做出了优化，每个细节都考虑进去。
  
另外在此说明的是，LTE和LTE-Advanced是只支持网络数据的，没有话音短信功能。LTE和LTE-Advanced设想的是话音短信全部通过网络进行传输。那我们现在的手机是怎么做的呢，因为我们的手机是可以打电话的发短信的。这就是各个终端厂商和运营商的事情了。方案也是很多中，每个手机用的也不一样。基础方案都是话音使用GSM或者WCDMA，数据使用LTE。不过最终目标肯定是放弃GSM和WCDMA，全部用LTE，话音业务用VoLTE。我们现在的手机在拨号时也有这一项选择。另外每个手机厂商做的也不一样，苹果同时接收LTE网络和CS域网络的信息，但是一旦只能同时使用其中一个，打电话了网络就会断开。每一个系统的射频以及基带都是有区别的。

至此，就叙述完2G，3G和4G了。还是再次建议多看一些书籍，能够了解的更加全面一些。