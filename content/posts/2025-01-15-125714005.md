---
layout: post
title: "云原生应用定义及部署"
date: 2025-01-15 16:39:28 +0800
description: "该层为云原生景观最顶层，主要作用是让程序定义和开发者专注于业务本身，使工程师能够快速构建自动的应用程"
keywords: "cncf"
categories: ['云原生']
tags: ['容器', '云原生', 'Kubernetes']
artid: "125714005"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=125714005
    alt: "云原生应用定义及部署"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=125714005
featuredImagePreview: https://bing.ee123.net/img/rand?artid=125714005
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     云原生—应用定义及部署
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="./../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="./../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <blockquote>
     <p>
      前面的文章介绍过：什么是云原生和云原生学习的一些基本方法，今天主要介绍云原生全景图以及云原生中应用定义及部署。
      <strong>
       <a href="http://mp.weixin.qq.com/s?__biz=MzI2ODk5MzU3MA==&amp;mid=2247484986&amp;idx=1&amp;sn=0cac08dfcbd55790a841f27b4e569533&amp;chksm=eae65377dd91da616b72369f9f4ff72bb285698abe1f2cf9336e6f1182e4da90c8ea0e1f0481&amp;scene=21#wechat_redirect" rel="nofollow" title="什么是云原生">
        什么是云原生
       </a>
      </strong>
     </p>
    </blockquote>
    <p id="main-toc">
     <strong>
      目录
     </strong>
    </p>
    <p id="1%E3%80%81CNCF%E8%83%8C%E6%99%AF-toc" style="margin-left:0px;">
     <a href="#1%E3%80%81CNCF%E8%83%8C%E6%99%AF" rel="nofollow">
      1、CNCF背景
     </a>
    </p>
    <p id="1.1%20CNCF%E7%9A%84%E7%94%B1%E6%9D%A5-toc" style="margin-left:40px;">
     <a href="#1.1%20CNCF%E7%9A%84%E7%94%B1%E6%9D%A5" rel="nofollow">
      1.1 CNCF的由来
     </a>
    </p>
    <p id="1.2%20CNCF%E4%BA%91%E5%8E%9F%E7%94%9F%E5%85%A8%E6%99%AF%E5%9B%BE-toc" style="margin-left:40px;">
     <a href="#1.2%20CNCF%E4%BA%91%E5%8E%9F%E7%94%9F%E5%85%A8%E6%99%AF%E5%9B%BE" rel="nofollow">
      1.2 CNCF云原生全景图
     </a>
    </p>
    <p id="2%E3%80%81%E4%BA%91%E5%8E%9F%E7%94%9F%E5%85%A8%E6%99%AF%E5%9B%BE%E6%9E%84%E6%88%90-toc" style="margin-left:0px;">
     <a href="#2%E3%80%81%E4%BA%91%E5%8E%9F%E7%94%9F%E5%85%A8%E6%99%AF%E5%9B%BE%E6%9E%84%E6%88%90" rel="nofollow">
      2、云原生全景图构成
     </a>
    </p>
    <p id="3%E3%80%81App%20Definition%20and%20Development%20%E5%BA%94%E7%94%A8%E5%AE%9A%E4%B9%89%E5%8F%8A%E9%83%A8%E7%BD%B2-toc" style="margin-left:0px;">
     <a href="#3%E3%80%81App%20Definition%20and%20Development%20%E5%BA%94%E7%94%A8%E5%AE%9A%E4%B9%89%E5%8F%8A%E9%83%A8%E7%BD%B2" rel="nofollow">
      3、App Definition and Development 应用定义及部署
     </a>
    </p>
    <p id="4%E3%80%81Database%C2%A0%E6%95%B0%E6%8D%AE%E5%BA%93-toc" style="margin-left:0px;">
     <a href="#4%E3%80%81Database%C2%A0%E6%95%B0%E6%8D%AE%E5%BA%93" rel="nofollow">
      4、Database 数据库
     </a>
    </p>
    <p id="5%E3%80%81Streaming%20%26%20Messaging%C2%A0%E6%B5%81%E4%B8%8E%E6%B6%88%E6%81%AF-toc" style="margin-left:0px;">
     <a href="#5%E3%80%81Streaming%20%26%20Messaging%C2%A0%E6%B5%81%E4%B8%8E%E6%B6%88%E6%81%AF" rel="nofollow">
      5、Streaming &amp; Messaging 流与消息
     </a>
    </p>
    <p id="6%E3%80%81Application%20Definition%20%26%20Image%20Build%C2%A0%C2%A0%E5%BA%94%E7%94%A8%E5%AE%9A%E4%B9%89%E5%92%8C%E9%95%9C%E5%83%8F%E6%9E%84%E5%BB%BA-toc" style="margin-left:0px;">
     <a href="#6%E3%80%81Application%20Definition%20%26%20Image%20Build%C2%A0%C2%A0%E5%BA%94%E7%94%A8%E5%AE%9A%E4%B9%89%E5%92%8C%E9%95%9C%E5%83%8F%E6%9E%84%E5%BB%BA" rel="nofollow">
      6、Application Definition &amp; Image Build  应用定义和镜像构建
     </a>
    </p>
    <p id="7%E3%80%81Continuous%20Integration%20%26%20Delivery%C2%A0%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90%20(CI)%20%E5%92%8C%E6%8C%81%E7%BB%AD%E4%BA%A4%E4%BB%98%20(CD)-toc" style="margin-left:0px;">
     <a href="#7%E3%80%81Continuous%20Integration%20%26%20Delivery%C2%A0%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90%20%28CI%29%20%E5%92%8C%E6%8C%81%E7%BB%AD%E4%BA%A4%E4%BB%98%20%28CD%29" rel="nofollow">
      7、Continuous Integration &amp; Delivery 持续集成 (CI) 和持续交付 (CD)
     </a>
    </p>
    <hr id="hr-toc"/>
    <p>
    </p>
    <p>
     关注公众号 + 输入[面试题] + 免费领取面试资料!
     <a href="https://mp.weixin.qq.com/s/uS8KxYKd5Kb3YG_RqTg1wQ" rel="nofollow" title="Java技术300+面试题">
      Java技术300+面试题
     </a>
    </p>
    <h2 id="1%E3%80%81CNCF%E8%83%8C%E6%99%AF">
     <strong>
      1、CNCF背景
     </strong>
    </h2>
    <p>
     CNCF(全称Cloud Native Computing Foundation), 云原生计算基金会。他是Linux旗下的非盈利组织，成立于2015年，主要致力于云原生应用的推广和普及。
    </p>
    <h3 id="1.1%20CNCF%E7%9A%84%E7%94%B1%E6%9D%A5">
     <strong>
      1.1 CNCF的由来
     </strong>
    </h3>
    <p>
     当年谷歌内部一直用于编排容器的Borg项目开源了，为了该项目更好的发展，谷歌与Linux基金会一起创办了CNCF。
    </p>
    <blockquote>
     <p>
      Borg是谷歌内部的大规模集群管理系统，在谷歌内部经历数十年的打磨，应该是与谷歌三驾马车（MR,GFS,BigTable）的同时代产物，据说，Borg之前号称是Google内部和PageRanking相提并论的同等重量级的东西。后来，谷歌把Borg用Go语言重写后，更名为Kubernetes并捐赠到CNCF。
     </p>
    </blockquote>
    <h3 id="1.2%20CNCF%E4%BA%91%E5%8E%9F%E7%94%9F%E5%85%A8%E6%99%AF%E5%9B%BE">
     <strong>
      1.2 CNCF云原生全景图
     </strong>
    </h3>
    <p>
     传送门：https://landscape.cncf.io/?fullscreen=yes
    </p>
    <p class="img-center">
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/f2c6ae06ef48bb309ee3ae80c8a9c6e8.png"/>
    </p>
    <p>
     云原生全景图是由云原生基金会提供。它的规模相当庞大, 囊括了众多的软硬件类别和如技术。云原生全景图主要由八大板块构成，后续可能在此基础上继续添加。
    </p>
    <p>
    </p>
    <h2 id="2%E3%80%81%E4%BA%91%E5%8E%9F%E7%94%9F%E5%85%A8%E6%99%AF%E5%9B%BE%E6%9E%84%E6%88%90">
     <strong>
      <strong>
       2、云原生全景图构成
      </strong>
     </strong>
    </h2>
    <p>
    </p>
    <p class="img-center">
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/5753d23a4eeadbd7b7e0a40f2d11dc93.png"/>
    </p>
    <p>
    </p>
    <p>
     接下来，从全景图顶层开始，至上而下逐一分析每一个层级以及每一层个模块的功能以及引入云原生的意义。
    </p>
    <p>
     说明：由于内容较多，将内容总共划分为9小结进行讲解。（8小节概念、1小节实践）。
    </p>
    <p>
    </p>
    <h2 id="3%E3%80%81App%20Definition%20and%20Development%20%E5%BA%94%E7%94%A8%E5%AE%9A%E4%B9%89%E5%8F%8A%E9%83%A8%E7%BD%B2">
     <strong>
      3、App Definition and Development 应用定义及部署
     </strong>
    </h2>
    <p>
    </p>
    <p class="img-center">
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/fbea8793de3ddb52b5296c87f42c8cc7.png"/>
    </p>
    <p>
     该层为云原生景观最顶层，主要作用是让程序定义和开发者专注于业务本身，使工程师能够快速构建自动的应用程序。
    </p>
    <p>
     这一层是容器平台上运行的具体应用和工具，可以理解为容器平台的应用商店。根据应用以及使用场景不同，可以大致分为以下4种类型：
    </p>
    <p>
     1）数据库，主要用于数据存储和检索。常见工具如 MySQL、Orcale、mongoDB、TiDB等。
    </p>
    <p>
     2）流处理和消息队列，主要用于服务间通信交互。常见工具如Spark、Storm、Flink、RocketMQ、Kafka、RabbitMQ等。
    </p>
    <p>
     3）应用和镜像制作，主要用于将应用封装成标准镜像，使应用能在标准的容器平台上运行。常见工具如 Helm、Docker Composer、Packer等。
    </p>
    <p>
     4）持续集成(CI)和持续交付(CD)，在敏捷迭代的基础上，快速交付满足客户可运行产品。常见工具如 Jenkins、Bamboo。
    </p>
    <p>
     结构图如下，
    </p>
    <p class="img-center">
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/6c583328d30697d6fbec23093c217392.png"/>
    </p>
    <p>
    </p>
    <h2 id="4%E3%80%81Database%C2%A0%E6%95%B0%E6%8D%AE%E5%BA%93">
     <strong>
      <strong>
       4、Database
      </strong>
     </strong>
     <strong>
      <strong>
       数据库
      </strong>
     </strong>
    </h2>
    <p class="img-center">
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/6dbd7a3263da18ab1039fa07af46b210.png"/>
    </p>
    <p>
    </p>
    <p>
     我们知道，数据库主要为应用程序存储和检索数据提供了一个通用接口。开发人员可以使用这些标准接口和查询语言对数据进行存储、查询和检索。
    </p>
    <p>
     该存储层目前支持两种类型的数据结构:
    </p>
    <p>
     1) 结构化查询语言 (SQL) 数据库
    </p>
    <p>
     2) 非SQL 数据库。
    </p>
    <p>
     具体使用哪种数据结构，应该由需求和约束来驱动。
    </p>
    <p>
     <strong>
      引入云原生的意义
     </strong>
    </p>
    <p>
     意义所在：根据工作负载优化一些节点来提高数据库性能。
    </p>
    <p>
     随着 Kubernetes 的兴起及其支持有状态应用程序的能力，我们已经看到新一代数据库利用了容器化，各大厂目前都有结合开源工具扩展出来的基于云原生的弹性数据库。
    </p>
    <p>
     这些新的云原生数据库，旨在将 Kubernetes 的可扩展性和可用性优势带入数据库，可根据工作负载优化一些节点来提高数据库性能。
    </p>
    <h2 id="5%E3%80%81Streaming%20%26%20Messaging%C2%A0%E6%B5%81%E4%B8%8E%E6%B6%88%E6%81%AF">
     <strong>
      5、Streaming &amp; Messaging 流与消息
     </strong>
    </h2>
    <p class="img-center">
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/9d5dc156d3a67200078c74dc26ded01a.png"/>
    </p>
    <p>
     流和消息，主要用于在不同系统之间传输消息，以此来实现服务之间互相通信。
    </p>
    <p>
     通过这种方式可以很好的实现系统之间高度解耦并互不影响。这种消息机制，通常存在两类消息角色：
    </p>
    <p>
     1）消息发布者，也就是通常我们所说的生成者，主要作用是输出消息。
    </p>
    <p>
     2）消息订阅者，者也就是通常所说的消费者，主要用于接收发布者锁传递过来的消息数据。
    </p>
    <p>
     具体使用哪种消息角色，需要结合应用功能的业务场景。
    </p>
    <p>
     <strong>
      引入云原生的意义
     </strong>
    </p>
    <p>
     意义有两点：
    </p>
    <p>
     1）提供成熟的云原生消息系统
    </p>
    <p>
     2）标准化消息格式
    </p>
    <p>
     其实消息传递和流这一类工具，早在云原生概念出现之前就已经存在了。
    </p>
    <p>
     传统系统架构中，为了集中管理关键业务事件类型的组件， 于是组织并构建了服务总线的概念。
    </p>
    <p>
     而在云原生环境中所说的消息传递和流，通常指的是指由云提供的消息队列（RabbitMQ、Kafka）等工具。这些组件的共同点是所借助云原生优势充分发固有能力。
    </p>
    <p>
     我们知道，云原生环境中的应用程序交互是经过编排和精心设计的。
    </p>
    <p>
     因此，消息传递和流系统为精心设计的应用系统提供了一个信息交流的中心。而消息总线提供了一个集中统一管理的位置，所有应用程序都可以通过发布消息来告诉其他人他们在做什么，或者通过订阅消息来查看正在发生的事情。
    </p>
    <p>
     在现有消息系统中，NATS 和 Cloudevents 已成为CNCF 孵化项目。其中，NATS 提供了成熟的消息传递系统，而Cloudevents 致力于标准化系统之间的消息格式。
    </p>
    <h2 id="6%E3%80%81Application%20Definition%20%26%20Image%20Build%C2%A0%C2%A0%E5%BA%94%E7%94%A8%E5%AE%9A%E4%B9%89%E5%92%8C%E9%95%9C%E5%83%8F%E6%9E%84%E5%BB%BA">
     <strong>
      <strong>
       6、Application Definition &amp; Image Build
      </strong>
     </strong>
     <strong>
      <strong>
       应用定义和镜像构建
      </strong>
     </strong>
    </h2>
    <p>
    </p>
    <p class="img-center">
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/65b8d482571413ee718340cbe6344ff9.png"/>
    </p>
    <p>
     应用程序定义和映像构建是一个广泛的概念，具体可以分为两个部分：
    </p>
    <p>
     1）以开发人员为中心的工具，可帮助其将应用程序代码快速构建到容器或 Kubernetes中。
    </p>
    <p>
     2）以标准化方式部署应用程序并集运营为一体的统一管理工具。
    </p>
    <p>
     不论你是想加速或简化你现有的开发环境，提供一套标准化的方式来部署第三方应用程序，还是希望简化编写新的 Kubernetes 扩展的过程，这两个类别都可以作为许多项目和优化 Kubernetes 开发人员和操作人员的参考依据。
    </p>
    <p>
     <strong>
      引入云原生的意义
     </strong>
    </p>
    <p>
     意义所在：
    </p>
    <p>
     1）极大地简化应用程序的构建和部署方式 。
    </p>
    <p>
     2）借鉴现有工具来满足不同需求。
    </p>
    <p>
     我们知道，Kubernetes和普通的容器化环境一样，都具有非常灵活和强大的特点。
    </p>
    <p>
     然而，这种灵活性也带来了一定的复杂性，主要表现为多种配置选项以及对各种场景的多种需求会不尽相同。
    </p>
    <p>
     开发人员在容器化代码时，有时可能需要创建多套镜像。比如，运营商需要的是一种标准化的方式将应用程序部署到容器环境中，平台团队需要提供工具来简化内部和第三方应用程序的镜像创建和应用程序部署。
    </p>
    <p>
     如果在开发云原生应用程序遇到需要大量不同的工具来简化应用程序的构建和部署。那么你可以请寻找此类别中的工具作为参考和借鉴。
    </p>
    <h2 id="7%E3%80%81Continuous%20Integration%20%26%20Delivery%C2%A0%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90%20(CI)%20%E5%92%8C%E6%8C%81%E7%BB%AD%E4%BA%A4%E4%BB%98%20(CD)">
     <strong>
      <strong>
       <strong>
        7、Continuous Integration &amp; Delivery
       </strong>
      </strong>
     </strong>
     <strong>
      <strong>
       <strong>
        持续集成 (CI) 和持续交付 (CD)
       </strong>
      </strong>
     </strong>
    </h2>
    <p class="img-center">
     <img alt="" src="https://i-blog.csdnimg.cn/blog_migrate/c404588771b7ac1dfe4a7a47684909ee.png"/>
    </p>
    <p>
    </p>
    <p>
     我们知道，持续集成 (CI) 和持续交付 (CD) 工具可通过嵌入式来实现快速高效的开发。
    </p>
    <p>
     其中，CI 通过立即构建和测试代码来自动化代码更改，确保它产生可部署的工件。而CD是对持续集成的延伸，经过开发环境、测试环境、准生产环境里的持续验证，满足了客户需求和质量目标，成为可交付给客户的产品。
    </p>
    <p>
     <strong>
      引入云原生的意义
     </strong>
    </p>
    <p>
     <strong>
      大致有两点：
     </strong>
    </p>
    <p>
     <strong>
      1）更早的发现
     </strong>
     <strong>
      错误并且更容易排除故障。
     </strong>
    </p>
    <p>
     <strong>
      2）快速交付用户可使用的产品，节约开发成本，早日投入市场，从而提升企业竞争力。
     </strong>
    </p>
    <p>
     通过定期集成代码，可以及早发现错误并且更容易排除故障。毕竟，在几行代码中发现错误要比在几百行代码中发现错误容易得多。
    </p>
    <p>
     另外，Kubernetes 还提供有关应用程序运行状况的信息，使云原生 CI/CD 工具能够更轻松地确定给定更改是否成功或应该回滚。
    </p>
    <p>
     虽然 Kubernetes 等工具为运行和管理应用程序提供了极大的灵活性，但它们也为 CI/CD 工具带来了新的挑战和机遇。
    </p>
    <p>
     云原生 CI/CD 系统能够利用 Kubernetes 本身来构建、运行和管理 CI/CD 流程，通常称为管道。
    </p>
    <blockquote>
     <p>
      管道举例：假设开发人员更改了应用程序的某些代码。这时CI 系统会看到代码更改，然后构建并测试该应用程序的新版本。而CD 系统采则用该新版本并将其部署到开发、测试、准生产和最终生产环境中，它会在流程的每个步骤之后测试已部署的应用程序时执行此操作。所有这些系统共同代表了该应用程序的 CI/CD 管道。
     </p>
    </blockquote>
    <p>
     CI 工具可确保开发人员引入的任何代码更改或更新都自动且持续地构建、验证并与其他更改集成。每次开发人员添加更新时，都会触发自动化测试，以确保只有好的代码才能进入系统。
    </p>
    <p>
     那么CD相当于扩展了CI流程，包括将 CI 过程的结果推送到准生产环境和生产环境中。
    </p>
    <p>
     <strong>
      总结：本节内容介绍
     </strong>
     <strong>
      了云原生全景图以及
     </strong>
     <strong>
      它的庞大规模。我们从中也看到了其囊括了如此众多的类别和技术，要完成如此规模的工程，其复杂性也可想而知。那在架构设计和应用部署中，固然也会区别于我们传统的本地化方式。如何充分发挥云原生能力是需要我们不断深入思考的内容
     </strong>
     。
    </p>
    <p>
     下一节：云原生的编排及管理。
    </p>
    <p>
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f77616e67796f6e67666569353030302f:61727469636c652f64657461696c732f313235373134303035" class_="artid" style="display:none">
 </p>
</div>


