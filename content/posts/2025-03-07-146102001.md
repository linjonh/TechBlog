---
layout: post
title: "IO多路复用epoll数据库sqlite"
date: 2025-03-07 18:39:45 +0800
description: "* Epoll events */  //事件类型。create table 表名(列名1 数据类型， 列名2  数据类型， ....)；4. 只能工作在水平触发模式（低速模式），不能工作在边沿触发模式（高速模式）4. 可以工作在水平触发模式（低速模式），也可以工作在边沿触发模式（高速模式）insert into 表名 values(值1， 值2， 值3, ...);1. poll使用链表管理文件描述符，对监测的文件描述符没有上限限制。2. 文件描述符集合在应用层创建，需要实现应用层和内核层的反复拷贝。"
keywords: "IO多路复用（epoll）/数据库（sqlite）"
categories: ['未分类']
tags: ['数据库']
artid: "146102001"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146102001
    alt: "IO多路复用epoll数据库sqlite"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146102001
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146102001
cover: https://bing.ee123.net/img/rand?artid=146102001
image: https://bing.ee123.net/img/rand?artid=146102001
img: https://bing.ee123.net/img/rand?artid=146102001
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     IO多路复用（epoll）/数据库（sqlite）
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p>
     1.poll:
    </p>
    <p>
     1. poll使用链表管理文件描述符，对监测的文件描述符没有上限限制。
     <br/>
     2. 文件描述符集合在应用层创建，需要实现应用层和内核层的反复拷贝
     <br/>
     3. 需要应用层对集合表进行遍历，寻找到达的事件
     <br/>
     4. 只能工作在水平触发模式（低速模式），不能工作在边沿触发模式（高速模式）
     <br/>
     2.epoll:
    </p>
    <p>
     1. epoll使用树形结构（红黑树）管理文件描述符，提高查找效率
     <br/>
     2. 文件描述符集合创建在内核。避免了应用层和内核层的数据拷贝
     <br/>
     3. 向应用层返回到达的IO事件的结合，不需要遍历查找
     <br/>
     4. 可以工作在水平触发模式（低速模式），也可以工作在边沿触发模式（高速模式）
    </p>
    <p>
     epoll的操作流程：
    </p>
    <p>
     1. 创建文件描述符集合 ： epoll_create();
     <br/>
     2. 将关注的文件描述符加入到集合:epoll_ctl()
     <br/>
     3. 等待IO事件到达 : epoll_wait();
     <br/>
     4. 根据不同的IO事件处理不同的任务
    </p>
    <p>
     函数接口：
    </p>
    <p>
     1. int epoll_create(int size);
     <br/>
     功能：创建并打开一个epoll的文件描述符结合
     <br/>
     参数：
     <br/>
     size：最多允许监测的文件描述符个数
     <br/>
     返回值：
     <br/>
     成功：返回代表集合的文件描述符
     <br/>
     失败：-1
    </p>
    <p>
     2. int epoll_ctl(int epfd, int op, int fd, struct epoll_event *event);
     <br/>
     功能：对文件描述符集合进行操作
     <br/>
     参数：
     <br/>
     epfd：文件描述符集合
     <br/>
     op：
     <br/>
     EPOLL_CTL_ADD：向集合中添加
     <br/>
     EPOLL_CTL_MOD：修改集合
     <br/>
     EPOLL_CTL_DEL：从集合中删除
     <br/>
     fd：要操作的文件描述符
     <br/>
     event：事件的结构体
     <br/>
     成功：0
     <br/>
     失败：-1
    </p>
    <p>
     typedef union epoll_data {
     <!-- -->
     <br/>
     void        *ptr;
     <br/>
     int          fd;
     <br/>
     uint32_t     u32;
     <br/>
     uint64_t     u64;
     <br/>
     } epoll_data_t;
    </p>
    <p>
     struct epoll_event {
     <!-- -->
     <br/>
     uint32_t     events;      /* Epoll events */  //事件类型
     <br/>
     epoll_data_t data;        /* User data variable */
     <br/>
     };
    </p>
    <p>
     events：
     <br/>
     EPOLLIN: 对文件描述符的读事件
     <br/>
     EPOLLOUT：对文件描述符的写事件
     <br/>
     data：
     <br/>
     fd：操作的事件所对应的文件描述符
    </p>
    <p>
     3.  int epoll_wait(int epfd, struct epoll_event *events,
     <br/>
     int maxevents, int timeout);
     <br/>
     功能：开始监测IO事件，并返回监测到的结果
     <br/>
     参数：
     <br/>
     epfd：监测的文件描述符集合
     <br/>
     events：保存epoll_wait监测到的到达事件的结果
     <br/>
     maxevents：最多监测的事件个数
     <br/>
     timeout：超时时间
     <br/>
     -1：不设置超时
     <br/>
     返回值：
     <br/>
     成功：返回到达的IO事件的个数
     <br/>
     失败：-1
     <br/>
     0：超时时间到达但没有IO事件
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
     数据库： 数据保存在外存上；程序运行结束时，掉电数据不丢失；是一个专业的管理数据工具
    </p>
    <p>
     sqlite3:(小型的数据库)
    </p>
    <p>
     1.sqlite常用的命令：
    </p>
    <p>
     .help                    查询手册
     <br/>
     .tables                 查看数据库中的表
     <br/>
     .headers on/off    打开/关闭表头
     <br/>
     .mode column     设置左对齐
     <br/>
     .quit                     退出数据库
    </p>
    <p>
     2.sqlite支持的SQL（结构化序列语言）语言
    </p>
    <p>
     数据类型：
     <br/>
     INTEGER ： 整形
     <br/>
     REAL：浮点型
     <br/>
     TEXT：文本字符串类型
     <br/>
     NULL ：空
    </p>
    <p>
     1. 创建一张表
     <br/>
     create table 表名(列名1 数据类型， 列名2  数据类型， ....)；
    </p>
    <p>
     2. 插入表格
     <br/>
     insert into 表名 values(值1， 值2， 值3, ...);
    </p>
    <p>
     3. 查询数据库中的表
     <br/>
     <br/>
     查询表中的所有数据：
     <br/>
     select * from 表名；
     <br/>
     <br/>
     查找指定列：
     <br/>
     select 列名1，列名2  from 表名；
    </p>
    <p>
     条件查找：
     <br/>
     select * from 表名 where 列名 关系运算符 值；
     <br/>
     关系运算符：
     <br/>
     =
     <br/>
     &gt;
     <br/>
     &lt;
     <br/>
     !=
     <br/>
     &gt;=
     <br/>
     &lt;=
     <br/>
     or  (||)
     <br/>
     and (&amp;&amp;)
     <br/>
     <br/>
     模糊查找：
     <br/>
     select * from 表名 where 列名 like "%梅"；
     <br/>
     <br/>
     % ： 可以匹配多个字符
     <br/>
     _  :   只能匹配一个字符
     <br/>
     <br/>
     有序查找：
     <br/>
     升序查找：
     <br/>
     select * from 表名 order by 列名 ASC；
     <br/>
     <br/>
     降序查找：
     <br/>
     select * from 表名 order by 列名 DESC；
    </p>
    <p>
     4. 删除数据
     <br/>
     delete from 表名 where 条件；
     <br/>
     <br/>
     5. 修改数据
     <br/>
     update 表名 set 列名=新值，列名=新值 where 条件；
     <br/>
     <br/>
     6.  删除表
     <br/>
     drop table 表名
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
     <br/>
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f:672e6373646e2e6e65742f323330315f37373036373736322f:61727469636c652f64657461696c732f313436313032303031" class_="artid" style="display:none">
 </p>
</div>


