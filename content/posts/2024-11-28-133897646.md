---
layout: post
title: "数据库数据迁移常见方式"
date: 2024-11-28 09:19:46 +0800
description: "本文介绍了数据库数据迁移的三种常见方法：通过SQL批量导入、数据迁移工具以及使用华为云DRS服务。D"
keywords: "数据库数据迁移常见方式"
categories: ['未分类']
tags: ['数据库', 'Oracle']
artid: "133897646"
image:
  path: https://api.vvhan.com/api/bing?rand=sj&artid=133897646
  alt: "数据库数据迁移常见方式"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=133897646
featuredImagePreview: https://bing.ee123.net/img/rand?artid=133897646
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     数据库数据迁移常见方式
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-tomorrow-night" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
    </p>
    <div class="toc">
     <h4>
      数据库数据迁移常见方式
     </h4>
     <ul>
      <li>
       <a href="#_2" rel="nofollow">
        数据库数据迁移常见方式
       </a>
      </li>
      <li>
       <ul>
        <li>
         <a href="#1sql_4" rel="nofollow">
          1、通过sql
         </a>
        </li>
        <li>
         <a href="#2_10" rel="nofollow">
          2、通过数据迁移工具
         </a>
        </li>
        <li>
         <a href="#3_14" rel="nofollow">
          3、云服务进行数据迁移
         </a>
        </li>
        <li>
         <ul>
          <li>
           <a href="#DRS_16" rel="nofollow">
            什么是DRS服务
           </a>
          </li>
          <li>
           <a href="#DRS_19" rel="nofollow">
            如何使用DRS服务
           </a>
          </li>
          <li>
           <a href="#DRS_35" rel="nofollow">
            DRS云服务可以干什么
           </a>
          </li>
         </ul>
        </li>
       </ul>
      </li>
     </ul>
    </div>
    <p>
    </p>
    <h2>
     <a id="_2">
     </a>
     数据库数据迁移常见方式
    </h2>
    <h3>
     <a id="1sql_4">
     </a>
     1、通过sql
    </h3>
    <p>
     批量导入sql
    </p>
    <pre><code class="prism language-java">insert into tableName select <span class="token operator">*</span> 
</code></pre>
    <h3>
     <a id="2_10">
     </a>
     2、通过数据迁移工具
    </h3>
    <p>
     在数据库里面可以看到有navicat里面有数据转移工具可以使用。
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/dd62d24009fdfd4228f68a1bbc27b261.png"/>
    </p>
    <h3>
     <a id="3_14">
     </a>
     3、云服务进行数据迁移
    </h3>
    <p>
     随着云服务越来越普及，好多工作可以在云服务上进行，十分的方便，我最近进行数据规划，容灾，迁移都在使用一款云服务，华为云的DRS 服务----数据转移。
    </p>
    <h4>
     <a id="DRS_16">
     </a>
     什么是DRS服务
    </h4>
    <p>
     DRS服务是数据迁移服务，可以把不同库的数据进行转移，譬如把A库的表迁移到B库里面。也可以把A库进行迁移，整体的迁移到另一个库里面。
    </p>
    <h4>
     <a id="DRS_19">
     </a>
     如何使用DRS服务
    </h4>
    <p>
     官网链接 ：
     <a href="https://www.huaweicloud.com/product/drs.html" rel="nofollow">
      https://www.huaweicloud.com/product/drs.html
     </a>
    </p>
    <p>
     <strong>
      1、选择一个站点
     </strong>
    </p>
    <p>
     这个可以选一个你们目标数据库所在的站点。
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/5915e7130874f1a9642c1334ef0039af.png">
      <br/>
      <strong>
       2、创建DRS任务。
      </strong>
      <br/>
      选择需要转移的库就可以进行数据转移了。
      <br/>
      <strong>
       重点是：
      </strong>
      <br/>
      <strong>
       1，全量加增量转移数据
       <br/>
       2，全量转移
      </strong>
     </img>
    </p>
    <p>
     选择完了之后只需要选择对应的库就可以了。
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/7ec8542c4b30be74b02870138bc46078.png"/>
    </p>
    <h4>
     <a id="DRS_35">
     </a>
     DRS云服务可以干什么
    </h4>
    <p>
     1、进行数据库转移
     <br/>
     当业务上需要多个库和一的时候，使用DRS任务把不同的数据库转移到同一个库里面，然后把微服务部署到新的数据库里面，微服务部署完成后，数据库数据完整，可以达到不间断部署。
    </p>
    <p>
     2、进行表转移
     <br/>
     当公司大的时候，譬如我现在所在的公司，几千个部门合作，如果接入外部域数据，那么需要的就是这个工具，实时的同步外部数据，延迟几乎没有。
    </p>
    <p>
     <strong>
      3、进行数据库表的监测
     </strong>
     <br/>
     假设数据库里面有很多表，表里面数据很多，那么会用到redis缓存来提升查询速度，一般是业务来查询，第一次查到数据，返回并且存到redis里面，当数据发生改变时，去删除或者更新数据。
    </p>
    <p>
     那么如果监控这个数据发送改变的情况，传统意义上mysql数据变更捕获有很多方式，比如使用开源工具canal,debezium,maxwell等等，连接mysql数据源，实现获取binlog日志。
    </p>
    <p>
     我们还可以使用DRS任务，还需要
     <strong>
      kafka
     </strong>
    </p>
    <p>
     首先建立一个kafka，创建一个topic用来接收数据，然后
     <font color="red">
      创建DRS出云任务，对接mysql数据库，DRS出云任务选择全量加增量方式，选择要监控的表，当有数据变化的时候，使用DRS任务就可以把变化的数据发送到kafka里面。
     </font>
     这样kafka里面有记录的事件。
    </p>
    <p>
     然后我们代码订阅kafka的事件，就可以做到删除或者更新缓存的操作，相对比以前，只需要加上两个云服务，可以监控很多张表，省去了很多代码，并且更加解耦，稳定。（DRS本质上也是监控的MySQL的binlog日志的）
    </p>
    <p>
     <strong>
      4、用于容灾搭建
     </strong>
     <br/>
     一般来说我们数据库搭建为一主一从一只读的集群。主库管读写，从库，只读库管查询，作为容灾，会定期的把主库的数据同步到容灾环境去，那么如何可以实时的同步过去呢，当主库宕机，容灾库可以直接切换过去就是最好的容灾方案。
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/05f85b52db6fc62894292070ba3c2a61.png"/>
    </p>
    <p>
     巧了DRS就有这个容灾方案，选择里面的容灾，就可以建立容灾同步，而且如果容灾库一开始么有数据，第一次建立容灾会把所有数据全部同步过去，如果数据库宕机就使用这个就可以切换过去，但是要提前做容灾处理。
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/ff507bdaf05f8cf6ed4229f04fde64c8.png"/>
    </p>
    <p>
     <strong>
      这个云服务你就用去吧，特别好用，一用一个不吱声
     </strong>
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f34353930363833302f:61727469636c652f64657461696c732f313333383937363436" class_="artid" style="display:none">
 </p>
</div>
