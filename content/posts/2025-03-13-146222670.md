---
layout: post
title: "工具survex一个解释机器学习生存模型的R包"
date: 2025-03-13 09:38:47 +0800
description: "【工具】survex一个解释机器学习生存模型的R包"
keywords: "【工具】survex一个解释机器学习生存模型的R包"
categories: ['学习笔记']
tags: ['机器学习', '数据挖掘', '数据可视化', '数据分析', '人工智能', 'R']
artid: "146222670"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146222670
    alt: "工具survex一个解释机器学习生存模型的R包"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146222670
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146222670
cover: https://bing.ee123.net/img/rand?artid=146222670
image: https://bing.ee123.net/img/rand?artid=146222670
img: https://bing.ee123.net/img/rand?artid=146222670
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     【工具】survex一个解释机器学习生存模型的R包
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-light" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/61155d289c524a87b67f8317691c7211.png"/>
    </p>
    <p>
    </p>
    <p>
    </p>
    <h3>
     <a id="_3">
     </a>
     介绍
    </h3>
    <p>
     由于其灵活性和优越的性能，机器学习模型经常补充并优于传统的统计生存模型。然而，由于缺乏用户友好的工具来解释其内部操作和预测原理，它们的广泛采用受到阻碍。为了解决这个问题，我们引入了survex R包，它提供了一个内聚框架，通过应用可解释的人工智能技术来解释任何生存模型。所提出的软件的功能包括理解和诊断生存模型，这可以导致它们的改进。通过揭示决策过程的洞察力，例如变量效应和重要性，survex能够评估模型的可靠性和检测偏差。因此，可以在诸如生物医学研究和保健应用等敏感领域促进透明度和责任。
    </p>
    <blockquote>
     <p>
      Due to their flexibility and superior performance, machine learning models frequently complement and outperform traditional statistical survival models. However, their widespread adoption is hindered by a lack of user-friendly tools to explain their internal operations and prediction rationales. To tackle this issue, we introduce the survex R package, which provides a cohesive framework for explaining any survival model by applying explainable artificial intelligence techniques. The capabilities of the proposed software encompass understanding and diagnosing survival models, which can lead to their improvement. By revealing insights into the decision-making process, such as variable effects and importances, survex enables the assessment of model reliability and the detection of biases. Thus, transparency and responsibility may be promoted in sensitive areas, such as biomedical research and healthcare applications.
     </p>
    </blockquote>
    <h3>
     <a id="_10">
     </a>
     代码
    </h3>
    <ul>
     <li>
      https://modeloriented.github.io/survex/articles/global-survshap.html
     </li>
    </ul>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/10b1b34746734b4399e65be9bad12de3.png"/>
    </p>
    <h3>
     <a id="_17">
     </a>
     案例
    </h3>
    <pre><code class="prism language-r">library<span class="token punctuation">(</span>survex<span class="token punctuation">)</span>
library<span class="token punctuation">(</span>survival<span class="token punctuation">)</span>
library<span class="token punctuation">(</span>ranger<span class="token punctuation">)</span>

vet <span class="token operator">&lt;-</span> survival<span class="token operator">::</span>veteran

cph <span class="token operator">&lt;-</span> coxph<span class="token punctuation">(</span>Surv<span class="token punctuation">(</span>time<span class="token punctuation">,</span> status<span class="token punctuation">)</span> <span class="token operator">~</span> .<span class="token punctuation">,</span> data <span class="token operator">=</span> vet<span class="token punctuation">,</span> x <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">,</span> model <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">)</span>
exp <span class="token operator">&lt;-</span> explain<span class="token punctuation">(</span>cph<span class="token punctuation">,</span> data <span class="token operator">=</span> vet<span class="token punctuation">[</span><span class="token punctuation">,</span> <span class="token operator">-</span>c<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span> y <span class="token operator">=</span> Surv<span class="token punctuation">(</span>vet<span class="token operator">$</span>time<span class="token punctuation">,</span> vet<span class="token operator">$</span>status<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">#&gt; Preparation of a new explainer is initiated </span>
<span class="token comment">#&gt;   -&gt; model label       :  coxph (  default  ) </span>
<span class="token comment">#&gt;   -&gt; data              :  137  rows  6  cols </span>
<span class="token comment">#&gt;   -&gt; target variable   :  137  values ( 128 events and 9 censored ) </span>
<span class="token comment">#&gt;   -&gt; times             :  50 unique time points , min = 1.5 , median survival time = 80 , max = 999 </span>
<span class="token comment">#&gt;   -&gt; times             :  (  generated from y as uniformly distributed survival quantiles based on Kaplan-Meier estimator  ) </span>
<span class="token comment">#&gt;   -&gt; predict function  :  predict.coxph with type = 'risk' will be used (  default  ) </span>
<span class="token comment">#&gt;   -&gt; predict survival function  :  predictSurvProb.coxph will be used (  default  ) </span>
<span class="token comment">#&gt;   -&gt; predict cumulative hazard function  :  -log(predict_survival_function) will be used (  default  ) </span>
<span class="token comment">#&gt;   -&gt; model_info        :  package survival , ver. 3.7.0 , task survival (  default  ) </span>
<span class="token comment">#&gt;   A new explainer has been created!</span>


shap <span class="token operator">&lt;-</span> model_survshap<span class="token punctuation">(</span>exp<span class="token punctuation">,</span> veteran<span class="token punctuation">[</span>c<span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">17</span><span class="token operator">:</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">110</span><span class="token operator">:</span><span class="token number">113</span><span class="token punctuation">,</span> <span class="token number">126</span><span class="token operator">:</span><span class="token number">129</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">-</span>c<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

plot<span class="token punctuation">(</span>shap<span class="token punctuation">)</span>
</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/a601ee8f6cf7419f8a60550b57e85c57.png"/>
    </p>
    <h3>
     <a id="_48">
     </a>
     参考
    </h3>
    <ul>
     <li>
      survex: an R package for explaining machine learning survival models
     </li>
    </ul>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f:2f626c6f672e6373646e2e6e65742f4832303233303731372f:61727469636c652f64657461696c732f313436323232363730" class_="artid" style="display:none">
 </p>
</div>


