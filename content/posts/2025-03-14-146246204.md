---
layout: post
title: "在-CentOS-上安装-Oracle-数据库"
date: 2025-03-14 01:17:13 +0800
description: "如果需要更高的安全性，可以配置 Oracle Net 使用 SSL/TLS 加密通信。具体步骤请参考 Oracle 官方文档。至此，Oracle 数据库已在 CentOS 上成功安装并配置完成。你可以通过 SQL*Plus 或其他工具连接到数据库。默认情况下，Oracle 监听器使用 1521 端口。确保防火墙允许该端口的流量。确保数据库服务名正确。确保客户端和服务器的时间同步，否则可能会导致连接问题。确保监听器正在运行，并且能够看到数据库实例的信息。如果使用动态服务注册，确保数据库参数。"
keywords: "在 CentOS 上安装 Oracle 数据库"
categories: ['数据库']
tags: ['数据库', '安全', '分布式', '关系型', 'Oracle', 'Centos']
artid: "146246204"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146246204
    alt: "在-CentOS-上安装-Oracle-数据库"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146246204
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146246204
cover: https://bing.ee123.net/img/rand?artid=146246204
image: https://bing.ee123.net/img/rand?artid=146246204
img: https://bing.ee123.net/img/rand?artid=146246204
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     在 CentOS 上安装 Oracle 数据库
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/direct/4e93981cc4654d97bca98c711c92adb6.png">
      <br/>
     </img>
    </p>
    <p>
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/49469c5884eb4a4f87495aa638e754e6.png"/>
    </p>
    <h3>
     <a id="1__5">
     </a>
     <strong>
      1. 系统准备
     </strong>
    </h3>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/5e860b27f8064d21851601ef2f623ada.png"/>
    </p>
    <h4>
     <a id="11__8">
     </a>
     <strong>
      1.1 检查系统要求
     </strong>
    </h4>
    <ul>
     <li>
      <strong>
       操作系统
      </strong>
      ：CentOS 7 或 CentOS 8（推荐 CentOS 7）。
     </li>
     <li>
      <strong>
       内存
      </strong>
      ：至少 2 GB RAM（建议 4 GB 或更高）。
     </li>
     <li>
      <strong>
       磁盘空间
      </strong>
      ：至少 10 GB 用于安装，建议 20 GB 或更多。
     </li>
     <li>
      <strong>
       Swap 空间
      </strong>
      ：
      <ul>
       <li>
        如果内存为 1-2 GB，Swap 应为内存的 1.5 倍。
       </li>
       <li>
        如果内存为 2-16 GB，Swap 应与内存大小相同。
       </li>
       <li>
        如果内存超过 16 GB，Swap 可以为 16 GB。
       </li>
      </ul>
     </li>
    </ul>
    <h4>
     <a id="12__17">
     </a>
     <strong>
      1.2 更新系统
     </strong>
    </h4>
    <p>
     确保系统是最新的：
    </p>
    <pre><code class="prism language-bash"><span class="token function">sudo</span> yum update <span class="token parameter variable">-y</span>
</code></pre>
    <h4>
     <a id="13__23">
     </a>
     <strong>
      1.3 安装必要的依赖包
     </strong>
    </h4>
    <p>
     安装 Oracle 数据库所需的依赖包：
    </p>
    <pre><code class="prism language-bash"><span class="token function">sudo</span> yum <span class="token function">install</span> <span class="token parameter variable">-y</span> binutils compat-libcap1 compat-libstdc++-33 gcc gcc-c++ glibc glibc-devel ksh libaio libaio-devel libgcc libstdc++ libstdc++-devel libXi libXtst <span class="token function">make</span> sysstat unixODBC unixODBC-devel
</code></pre>
    <h4>
     <a id="14__Oracle__29">
     </a>
     <strong>
      1.4 创建 Oracle 用户和组
     </strong>
    </h4>
    <p>
     Oracle 数据库需要专用的用户和组：
    </p>
    <pre><code class="prism language-bash"><span class="token function">sudo</span> <span class="token function">groupadd</span> oinstall
<span class="token function">sudo</span> <span class="token function">groupadd</span> dba
<span class="token function">sudo</span> <span class="token function">useradd</span> <span class="token parameter variable">-g</span> oinstall <span class="token parameter variable">-G</span> dba oracle
<span class="token function">sudo</span> <span class="token function">passwd</span> oracle
</code></pre>
    <h4>
     <a id="15__38">
     </a>
     <strong>
      1.5 配置内核参数
     </strong>
    </h4>
    <p>
     编辑
     <code>
      /etc/sysctl.conf
     </code>
     文件，添加以下内容：
    </p>
    <pre><code class="prism language-bash">fs.aio-max-nr <span class="token operator">=</span> <span class="token number">1048576</span>
fs.file-max <span class="token operator">=</span> <span class="token number">6815744</span>
kernel.shmall <span class="token operator">=</span> <span class="token number">2097152</span>
kernel.shmmax <span class="token operator">=</span> <span class="token number">4294967295</span>
kernel.shmmni <span class="token operator">=</span> <span class="token number">4096</span>
kernel.sem <span class="token operator">=</span> <span class="token number">250</span> <span class="token number">32000</span> <span class="token number">100</span> <span class="token number">128</span>
net.ipv4.ip_local_port_range <span class="token operator">=</span> <span class="token number">9000</span> <span class="token number">65500</span>
net.core.rmem_default <span class="token operator">=</span> <span class="token number">262144</span>
net.core.rmem_max <span class="token operator">=</span> <span class="token number">4194304</span>
net.core.wmem_default <span class="token operator">=</span> <span class="token number">262144</span>
net.core.wmem_max <span class="token operator">=</span> <span class="token number">1048576</span>
</code></pre>
    <p>
     应用更改：
    </p>
    <pre><code class="prism language-bash"><span class="token function">sudo</span> <span class="token function">sysctl</span> <span class="token parameter variable">-p</span>
</code></pre>
    <h4>
     <a id="16__58">
     </a>
     <strong>
      1.6 配置用户限制
     </strong>
    </h4>
    <p>
     编辑
     <code>
      /etc/security/limits.conf
     </code>
     文件，添加以下内容：
    </p>
    <pre><code class="prism language-bash">oracle soft nproc <span class="token number">2047</span>
oracle hard nproc <span class="token number">16384</span>
oracle soft nofile <span class="token number">1024</span>
oracle hard nofile <span class="token number">65536</span>
oracle soft stack <span class="token number">10240</span>
</code></pre>
    <h4>
     <a id="17__PAM__68">
     </a>
     <strong>
      1.7 配置 PAM 模块
     </strong>
    </h4>
    <p>
     编辑
     <code>
      /etc/pam.d/login
     </code>
     文件，添加以下内容：
    </p>
    <pre><code class="prism language-bash">session required pam_limits.so
</code></pre>
    <h4>
     <a id="18__Oracle__74">
     </a>
     <strong>
      1.8 创建 Oracle 安装目录
     </strong>
    </h4>
    <p>
     创建 Oracle 安装目录并设置权限：
    </p>
    <pre><code class="prism language-bash"><span class="token function">sudo</span> <span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /u01/app/oracle
<span class="token function">sudo</span> <span class="token function">chown</span> <span class="token parameter variable">-R</span> oracle:oinstall /u01
<span class="token function">sudo</span> <span class="token function">chmod</span> <span class="token parameter variable">-R</span> <span class="token number">775</span> /u01
</code></pre>
    <hr/>
    <h3>
     <a id="2__Oracle__84">
     </a>
     <strong>
      2. 下载 Oracle 数据库安装包
     </strong>
    </h3>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/02b210e45f9c461a9ccb69c263245146.png"/>
    </p>
    <h4>
     <a id="21__Oracle__87">
     </a>
     <strong>
      2.1 访问 Oracle 官方网站
     </strong>
    </h4>
    <ul>
     <li>
      访问
      <a href="https://www.oracle.com/database/technologies/oracle-database-software-downloads.html" rel="nofollow">
       Oracle 官方网站
      </a>
      。
     </li>
     <li>
      下载适用于 Linux x86_64 的 Oracle 数据库安装包（如 Oracle 19c）。
     </li>
    </ul>
    <h4>
     <a id="22__91">
     </a>
     <strong>
      2.2 上传安装包到服务器
     </strong>
    </h4>
    <p>
     将下载的安装包上传到 CentOS 服务器的
     <code>
      /u01/app/oracle
     </code>
     目录。
    </p>
    <h4>
     <a id="23__94">
     </a>
     <strong>
      2.3 解压安装包
     </strong>
    </h4>
    <p>
     解压安装包：
    </p>
    <pre><code class="prism language-bash"><span class="token builtin class-name">cd</span> /u01/app/oracle
<span class="token function">unzip</span> LINUX.X64_193000_db_home.zip
</code></pre>
    <hr/>
    <h3>
     <a id="3__Oracle__103">
     </a>
     <strong>
      3. 配置 Oracle 环境变量
     </strong>
    </h3>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/bbc9d90fac394fd9b8224d9e7f60249c.png"/>
    </p>
    <h4>
     <a id="31__bash_profile_106">
     </a>
     <strong>
      3.1 编辑
      <code>
       .bash_profile
      </code>
     </strong>
    </h4>
    <p>
     以
     <code>
      oracle
     </code>
     用户登录，编辑
     <code>
      .bash_profile
     </code>
     文件：
    </p>
    <pre><code class="prism language-bash"><span class="token function">vi</span> ~/.bash_profile
</code></pre>
    <p>
     添加以下内容：
    </p>
    <pre><code class="prism language-bash"><span class="token builtin class-name">export</span> <span class="token assign-left variable">ORACLE_BASE</span><span class="token operator">=</span>/u01/app/oracle
<span class="token builtin class-name">export</span> <span class="token assign-left variable">ORACLE_HOME</span><span class="token operator">=</span><span class="token variable">$ORACLE_BASE</span>/product/19.0.0/dbhome_1
<span class="token builtin class-name">export</span> <span class="token assign-left variable">ORACLE_SID</span><span class="token operator">=</span>orcl
<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token variable">$ORACLE_HOME</span>/bin:<span class="token environment constant">$PATH</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">LD_LIBRARY_PATH</span><span class="token operator">=</span><span class="token variable">$ORACLE_HOME</span>/lib:/usr/lib
</code></pre>
    <h4>
     <a id="32__120">
     </a>
     <strong>
      3.2 应用环境变量
     </strong>
    </h4>
    <p>
     使环境变量生效：
    </p>
    <pre><code class="prism language-bash"><span class="token builtin class-name">source</span> ~/.bash_profile
</code></pre>
    <hr/>
    <h3>
     <a id="4__Oracle__128">
     </a>
     <strong>
      4. 安装 Oracle 数据库
     </strong>
    </h3>
    <h4>
     <a id="41__130">
     </a>
     <strong>
      4.1 启动安装程序
     </strong>
    </h4>
    <p>
     以
     <code>
      oracle
     </code>
     用户运行安装程序：
    </p>
    <pre><code class="prism language-bash"><span class="token builtin class-name">cd</span> <span class="token variable">$ORACLE_HOME</span>
./runInstaller
</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/d84e6e6d5bcf4b868795a7c56af8b7d2.png"/>
    </p>
    <h4>
     <a id="42__138">
     </a>
     <strong>
      4.2 安装步骤
     </strong>
    </h4>
    <ol>
     <li>
      <strong>
       选择安装选项
      </strong>
      ：
      <ul>
       <li>
        选择“创建和配置数据库”。
       </li>
      </ul>
     </li>
     <li>
      <strong>
       选择系统类
      </strong>
      ：
      <ul>
       <li>
        选择“服务器类”。
       </li>
      </ul>
     </li>
     <li>
      <strong>
       选择安装类型
      </strong>
      ：
      <ul>
       <li>
        选择“高级安装”。
       </li>
      </ul>
     </li>
     <li>
      <strong>
       选择产品语言
      </strong>
      ：
      <ul>
       <li>
        选择所需的语言（如英文）。
       </li>
      </ul>
     </li>
     <li>
      <strong>
       选择数据库版本
      </strong>
      ：
      <ul>
       <li>
        选择“企业版”。
       </li>
      </ul>
     </li>
     <li>
      <strong>
       指定安装位置
      </strong>
      ：
      <ul>
       <li>
        确认
        <code>
         ORACLE_BASE
        </code>
        和
        <code>
         ORACLE_HOME
        </code>
        路径。
       </li>
      </ul>
     </li>
     <li>
      <strong>
       创建产品清单
      </strong>
      ：
      <ul>
       <li>
        使用默认路径
        <code>
         /u01/app/oraInventory
        </code>
        。
       </li>
      </ul>
     </li>
     <li>
      <strong>
       配置类型
      </strong>
      ：
      <ul>
       <li>
        选择“单实例数据库安装”。
       </li>
      </ul>
     </li>
     <li>
      <strong>
       选择数据库配置
      </strong>
      ：
      <ul>
       <li>
        选择“通用数据库”。
       </li>
      </ul>
     </li>
     <li>
      <strong>
       指定数据库标识符
      </strong>
      ：
      <ul>
       <li>
        输入全局数据库名称（如
        <code>
         orcl
        </code>
        ）和 SID（如
        <code>
         orcl
        </code>
        ）。
       </li>
      </ul>
     </li>
     <li>
      <strong>
       配置选项
      </strong>
      ：
      <ul>
       <li>
        使用默认配置。
       </li>
      </ul>
     </li>
     <li>
      <strong>
       管理选项
      </strong>
      ：
      <ul>
       <li>
        选择“不使用 EM Express”。
       </li>
      </ul>
     </li>
     <li>
      <strong>
       数据库凭据
      </strong>
      ：
      <ul>
       <li>
        选择“使用不同的管理口令”，并设置密码。
       </li>
      </ul>
     </li>
     <li>
      <strong>
       存储选项
      </strong>
      ：
      <ul>
       <li>
        选择“文件系统”。
       </li>
      </ul>
     </li>
     <li>
      <strong>
       数据库文件位置
      </strong>
      ：
      <ul>
       <li>
        使用默认路径。
       </li>
      </ul>
     </li>
     <li>
      <strong>
       恢复选项
      </strong>
      ：
      <ul>
       <li>
        选择“不启用自动备份”。
       </li>
      </ul>
     </li>
     <li>
      <strong>
       Schema 密码
      </strong>
      ：
      <ul>
       <li>
        选择“对所有账户使用相同的口令”。
       </li>
      </ul>
     </li>
     <li>
      <strong>
       先决条件检查
      </strong>
      ：
      <ul>
       <li>
        确保所有检查通过。
       </li>
      </ul>
     </li>
     <li>
      <strong>
       摘要
      </strong>
      ：
      <ul>
       <li>
        确认安装信息，点击“安装”。
       </li>
      </ul>
     </li>
    </ol>
    <h4>
     <a id="43__178">
     </a>
     <strong>
      4.3 运行配置脚本
     </strong>
    </h4>
    <p>
     安装完成后，按照提示以
     <code>
      root
     </code>
     用户运行以下脚本：
    </p>
    <pre><code class="prism language-bash"><span class="token function">sudo</span> /u01/app/oraInventory/orainstRoot.sh
<span class="token function">sudo</span> /u01/app/oracle/product/19.0.0/dbhome_1/root.sh
</code></pre>
    <hr/>
    <h3>
     <a id="5__187">
     </a>
     <strong>
      5. 验证安装
     </strong>
    </h3>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/a6eef979fc2b495b8be8815c12c12c91.png"/>
    </p>
    <h4>
     <a id="51__190">
     </a>
     <strong>
      5.1 启动数据库
     </strong>
    </h4>
    <p>
     以
     <code>
      oracle
     </code>
     用户启动数据库：
    </p>
    <pre><code class="prism language-bash">sqlplus / as sysdba
SQL<span class="token operator">&gt;</span> startup
</code></pre>
    <h4>
     <a id="52__197">
     </a>
     <strong>
      5.2 检查数据库状态
     </strong>
    </h4>
    <pre><code class="prism language-bash">SQL<span class="token operator">&gt;</span> <span class="token keyword">select</span> status from <span class="token function">v</span><span class="token variable">$instance</span><span class="token punctuation">;</span>
</code></pre>
    <p>
     如果显示
     <code>
      OPEN
     </code>
     ，则表示数据库已成功启动。
    </p>
    <h4>
     <a id="53__203">
     </a>
     <strong>
      5.3 创建测试表
     </strong>
    </h4>
    <pre><code class="prism language-bash">SQL<span class="token operator">&gt;</span> create table <span class="token builtin class-name">test</span> <span class="token punctuation">(</span>id number, name varchar2<span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">))</span><span class="token punctuation">;</span>
SQL<span class="token operator">&gt;</span> insert into <span class="token builtin class-name">test</span> values <span class="token punctuation">(</span><span class="token number">1</span>, <span class="token string">'Oracle Test'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
SQL<span class="token operator">&gt;</span> commit<span class="token punctuation">;</span>
SQL<span class="token operator">&gt;</span> <span class="token keyword">select</span> * from <span class="token builtin class-name">test</span><span class="token punctuation">;</span>
</code></pre>
    <hr/>
    <h3>
     <a id="6__213">
     </a>
     <strong>
      6. 配置监听器
     </strong>
    </h3>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/54c3245fbc35474b847f2d96327507dd.png"/>
    </p>
    <h4>
     <a id="61__216">
     </a>
     <strong>
      6.1 启动监听器
     </strong>
    </h4>
    <p>
     编辑
     <code>
      $ORACLE_HOME/network/admin/listener.ora
     </code>
     文件，配置监听器：
    </p>
    <pre><code class="prism language-bash">LISTENER <span class="token operator">=</span>
  <span class="token punctuation">(</span>DESCRIPTION_LIST <span class="token operator">=</span>
    <span class="token punctuation">(</span>DESCRIPTION <span class="token operator">=</span>
      <span class="token punctuation">(</span>ADDRESS <span class="token operator">=</span> <span class="token punctuation">(</span>PROTOCOL <span class="token operator">=</span> TCP<span class="token punctuation">)</span><span class="token punctuation">(</span>HOST <span class="token operator">=</span> localhost<span class="token punctuation">)</span><span class="token punctuation">(</span>PORT <span class="token operator">=</span> <span class="token number">1521</span><span class="token punctuation">))</span>
  <span class="token punctuation">)</span>
</code></pre>
    <p>
     启动监听器：
    </p>
    <pre><code class="prism language-bash">lsnrctl start
</code></pre>
    <h4>
     <a id="62__230">
     </a>
     <strong>
      6.2 检查监听器状态
     </strong>
    </h4>
    <pre><code class="prism language-bash">lsnrctl status
</code></pre>
    <hr/>
    <h3>
     <a id="7__237">
     </a>
     <strong>
      7. 配置防火墙
     </strong>
    </h3>
    <p>
     如果启用了防火墙，需要开放 Oracle 端口（如 1521）：
    </p>
    <pre><code class="prism language-bash"><span class="token function">sudo</span> firewall-cmd <span class="token parameter variable">--zone</span><span class="token operator">=</span>public --add-port<span class="token operator">=</span><span class="token number">1521</span>/tcp <span class="token parameter variable">--permanent</span>
<span class="token function">sudo</span> firewall-cmd <span class="token parameter variable">--reload</span>
</code></pre>
    <hr/>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/2936f3dc7056421f9103fc2d1c046237.png"/>
    </p>
    <h3>
     <a id="8__247">
     </a>
     <strong>
      8. 配置开机自启动
     </strong>
    </h3>
    <h4>
     <a id="81__249">
     </a>
     <strong>
      8.1 创建启动脚本
     </strong>
    </h4>
    <p>
     编辑
     <code>
      /etc/oratab
     </code>
     文件，将
     <code>
      N
     </code>
     改为
     <code>
      Y
     </code>
     ：
    </p>
    <pre><code class="prism language-bash">orcl:/u01/app/oracle/product/19.0.0/dbhome_1:Y
</code></pre>
    <h4>
     <a id="82__255">
     </a>
     <strong>
      8.2 创建服务文件
     </strong>
    </h4>
    <p>
     创建
     <code>
      /etc/systemd/system/oracle.service
     </code>
     文件，添加以下内容：
    </p>
    <pre><code class="prism language-bash"><span class="token punctuation">[</span>Unit<span class="token punctuation">]</span>
<span class="token assign-left variable">Description</span><span class="token operator">=</span>Oracle Database Service
<span class="token assign-left variable">After</span><span class="token operator">=</span>network.target

<span class="token punctuation">[</span>Service<span class="token punctuation">]</span>
<span class="token assign-left variable">Type</span><span class="token operator">=</span>forking
<span class="token assign-left variable">User</span><span class="token operator">=</span>oracle
<span class="token assign-left variable">Environment</span><span class="token operator">=</span><span class="token string">"ORACLE_HOME=/u01/app/oracle/product/19.0.0/dbhome_1"</span>
<span class="token assign-left variable">ExecStart</span><span class="token operator">=</span><span class="token variable">$ORACLE_HOME</span>/bin/dbstart <span class="token variable">$ORACLE_HOME</span>
<span class="token assign-left variable">ExecStop</span><span class="token operator">=</span><span class="token variable">$ORACLE_HOME</span>/bin/dbshut <span class="token variable">$ORACLE_HOME</span>
<span class="token assign-left variable">Restart</span><span class="token operator">=</span>on-abort

<span class="token punctuation">[</span>Install<span class="token punctuation">]</span>
<span class="token assign-left variable">WantedBy</span><span class="token operator">=</span>multi-user.target
</code></pre>
    <h4>
     <a id="83__274">
     </a>
     <strong>
      8.3 启用服务
     </strong>
    </h4>
    <pre><code class="prism language-bash"><span class="token function">sudo</span> systemctl daemon-reload
<span class="token function">sudo</span> systemctl <span class="token builtin class-name">enable</span> oracle
<span class="token function">sudo</span> systemctl start oracle
</code></pre>
    <hr/>
    <h3>
     <a id="9__283">
     </a>
     <strong>
      9. 完成
     </strong>
    </h3>
    <p>
     至此，Oracle 数据库已在 CentOS 上成功安装并配置完成。你可以通过 SQL*Plus 或其他工具连接到数据库。
    </p>
    <hr/>
    <h4>
     <a id="_288">
     </a>
     <strong>
      注意事项
     </strong>
    </h4>
    <ul>
     <li>
      如果安装过程中遇到问题，请检查日志文件（位于
      <code>
       $ORACLE_HOME/cfgtoollogs
      </code>
      ）。
     </li>
     <li>
      确保系统时间和时区设置正确。
     </li>
     <li>
      如果需要远程访问，请配置
      <code>
       tnsnames.ora
      </code>
      和
      <code>
       sqlnet.ora
      </code>
      文件。
     </li>
    </ul>
    <hr/>
    <p>
     在 Oracle 数据库中配置远程访问需要完成以下几个步骤：
    </p>
    <ol>
     <li>
      <strong>
       配置监听器
      </strong>
      ：确保监听器能够接受远程连接。
     </li>
     <li>
      <strong>
       配置网络服务名
      </strong>
      ：在客户端和服务器端配置
      <code>
       tnsnames.ora
      </code>
      文件。
     </li>
     <li>
      <strong>
       配置防火墙
      </strong>
      ：开放 Oracle 数据库的监听端口（默认是 1521）。
     </li>
     <li>
      <strong>
       配置 Oracle Net 服务
      </strong>
      ：确保
      <code>
       sqlnet.ora
      </code>
      文件配置正确。
     </li>
     <li>
      <strong>
       测试远程连接
      </strong>
      ：使用 SQL*Plus 或其他工具测试远程连接。
     </li>
    </ol>
    <p>
     以下是详细的配置步骤：
    </p>
    <hr/>
    <h3>
     <a id="1__307">
     </a>
     <strong>
      1. 配置监听器
     </strong>
    </h3>
    <h4>
     <a id="11__listenerora__309">
     </a>
     <strong>
      1.1 编辑
      <code>
       listener.ora
      </code>
      文件
     </strong>
    </h4>
    <p>
     监听器配置文件
     <code>
      listener.ora
     </code>
     位于
     <code>
      $ORACLE_HOME/network/admin
     </code>
     目录下。编辑该文件，确保监听器配置如下：
    </p>
    <pre><code class="prism language-bash">LISTENER <span class="token operator">=</span>
  <span class="token punctuation">(</span>DESCRIPTION_LIST <span class="token operator">=</span>
    <span class="token punctuation">(</span>DESCRIPTION <span class="token operator">=</span>
      <span class="token punctuation">(</span>ADDRESS <span class="token operator">=</span> <span class="token punctuation">(</span>PROTOCOL <span class="token operator">=</span> TCP<span class="token punctuation">)</span><span class="token punctuation">(</span>HOST <span class="token operator">=</span> <span class="token operator">&lt;</span>服务器IP或主机名<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">(</span>PORT <span class="token operator">=</span> <span class="token number">1521</span><span class="token punctuation">))</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">)</span>

SID_LIST_LISTENER <span class="token operator">=</span>
  <span class="token punctuation">(</span>SID_LIST <span class="token operator">=</span>
    <span class="token punctuation">(</span>SID_DESC <span class="token operator">=</span>
      <span class="token punctuation">(</span>GLOBAL_DBNAME <span class="token operator">=</span> orcl<span class="token punctuation">)</span>  <span class="token comment"># 全局数据库名</span>
      <span class="token punctuation">(</span>ORACLE_HOME <span class="token operator">=</span> /u01/app/oracle/product/19.0.0/dbhome_1<span class="token punctuation">)</span>
      <span class="token punctuation">(</span>SID_NAME <span class="token operator">=</span> orcl<span class="token punctuation">)</span>      <span class="token comment"># 数据库 SID</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">)</span>
</code></pre>
    <ul>
     <li>
      将
      <code>
       &lt;服务器IP或主机名&gt;
      </code>
      替换为服务器的实际 IP 地址或主机名。
     </li>
     <li>
      确保
      <code>
       GLOBAL_DBNAME
      </code>
      和
      <code>
       SID_NAME
      </code>
      与数据库的实际名称一致。
     </li>
    </ul>
    <h4>
     <a id="12__333">
     </a>
     <strong>
      1.2 启动或重启监听器
     </strong>
    </h4>
    <p>
     如果监听器未启动，使用以下命令启动：
    </p>
    <pre><code class="prism language-bash">lsnrctl start
</code></pre>
    <p>
     如果监听器已启动，重启监听器以应用更改：
    </p>
    <pre><code class="prism language-bash">lsnrctl reload
</code></pre>
    <h4>
     <a id="13__343">
     </a>
     <strong>
      1.3 检查监听器状态
     </strong>
    </h4>
    <pre><code class="prism language-bash">lsnrctl status
</code></pre>
    <p>
     确保监听器正在运行，并且能够看到数据库实例的信息。
    </p>
    <hr/>
    <h3>
     <a id="2__351">
     </a>
     <strong>
      2. 配置网络服务名
     </strong>
    </h3>
    <h4>
     <a id="21__tnsnamesora_353">
     </a>
     <strong>
      2.1 在服务器端配置
      <code>
       tnsnames.ora
      </code>
     </strong>
    </h4>
    <p>
     编辑
     <code>
      $ORACLE_HOME/network/admin/tnsnames.ora
     </code>
     文件，添加以下内容：
    </p>
    <pre><code class="prism language-bash">ORCL <span class="token operator">=</span>
  <span class="token punctuation">(</span>DESCRIPTION <span class="token operator">=</span>
    <span class="token punctuation">(</span>ADDRESS <span class="token operator">=</span> <span class="token punctuation">(</span>PROTOCOL <span class="token operator">=</span> TCP<span class="token punctuation">)</span><span class="token punctuation">(</span>HOST <span class="token operator">=</span> <span class="token operator">&lt;</span>服务器IP或主机名<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">(</span>PORT <span class="token operator">=</span> <span class="token number">1521</span><span class="token punctuation">))</span>
    <span class="token punctuation">(</span>CONNECT_DATA <span class="token operator">=</span>
      <span class="token punctuation">(</span>SERVER <span class="token operator">=</span> DEDICATED<span class="token punctuation">)</span>
      <span class="token punctuation">(</span>SERVICE_NAME <span class="token operator">=</span> orcl<span class="token punctuation">)</span>  <span class="token comment"># 全局数据库名</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">)</span>
</code></pre>
    <ul>
     <li>
      将
      <code>
       &lt;服务器IP或主机名&gt;
      </code>
      替换为服务器的实际 IP 地址或主机名。
     </li>
     <li>
      确保
      <code>
       SERVICE_NAME
      </code>
      与数据库的实际名称一致。
     </li>
    </ul>
    <h4>
     <a id="22__tnsnamesora_370">
     </a>
     <strong>
      2.2 在客户端配置
      <code>
       tnsnames.ora
      </code>
     </strong>
    </h4>
    <p>
     在客户端的
     <code>
      tnsnames.ora
     </code>
     文件中添加与服务器端相同的配置。文件通常位于以下路径：
    </p>
    <ul>
     <li>
      Windows：
      <code>
       %ORACLE_HOME%\network\admin\tnsnames.ora
      </code>
     </li>
     <li>
      Linux：
      <code>
       $ORACLE_HOME/network/admin/tnsnames.ora
      </code>
     </li>
    </ul>
    <p>
     例如：
    </p>
    <pre><code class="prism language-bash">ORCL <span class="token operator">=</span>
  <span class="token punctuation">(</span>DESCRIPTION <span class="token operator">=</span>
    <span class="token punctuation">(</span>ADDRESS <span class="token operator">=</span> <span class="token punctuation">(</span>PROTOCOL <span class="token operator">=</span> TCP<span class="token punctuation">)</span><span class="token punctuation">(</span>HOST <span class="token operator">=</span> <span class="token operator">&lt;</span>服务器IP或主机名<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">(</span>PORT <span class="token operator">=</span> <span class="token number">1521</span><span class="token punctuation">))</span>
    <span class="token punctuation">(</span>CONNECT_DATA <span class="token operator">=</span>
      <span class="token punctuation">(</span>SERVER <span class="token operator">=</span> DEDICATED<span class="token punctuation">)</span>
      <span class="token punctuation">(</span>SERVICE_NAME <span class="token operator">=</span> orcl<span class="token punctuation">)</span>  <span class="token comment"># 全局数据库名</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">)</span>
</code></pre>
    <hr/>
    <h3>
     <a id="3__389">
     </a>
     <strong>
      3. 配置防火墙
     </strong>
    </h3>
    <h4>
     <a id="31__Oracle__391">
     </a>
     <strong>
      3.1 开放 Oracle 监听端口
     </strong>
    </h4>
    <p>
     默认情况下，Oracle 监听器使用 1521 端口。确保防火墙允许该端口的流量。
    </p>
    <h5>
     <a id="_CentOS_78__394">
     </a>
     <strong>
      在 CentOS 7/8 上开放端口
     </strong>
    </h5>
    <pre><code class="prism language-bash"><span class="token function">sudo</span> firewall-cmd <span class="token parameter variable">--zone</span><span class="token operator">=</span>public --add-port<span class="token operator">=</span><span class="token number">1521</span>/tcp <span class="token parameter variable">--permanent</span>
<span class="token function">sudo</span> firewall-cmd <span class="token parameter variable">--reload</span>
</code></pre>
    <h5>
     <a id="_400">
     </a>
     <strong>
      检查端口是否开放
     </strong>
    </h5>
    <pre><code class="prism language-bash"><span class="token function">sudo</span> firewall-cmd <span class="token parameter variable">--zone</span><span class="token operator">=</span>public --query-port<span class="token operator">=</span><span class="token number">1521</span>/tcp
</code></pre>
    <hr/>
    <h3>
     <a id="4__Oracle_Net__407">
     </a>
     <strong>
      4. 配置 Oracle Net 服务
     </strong>
    </h3>
    <h4>
     <a id="41__sqlnetora__409">
     </a>
     <strong>
      4.1 编辑
      <code>
       sqlnet.ora
      </code>
      文件
     </strong>
    </h4>
    <p>
     编辑
     <code>
      $ORACLE_HOME/network/admin/sqlnet.ora
     </code>
     文件，确保以下配置：
    </p>
    <pre><code class="prism language-bash"><span class="token assign-left variable">NAMES.DIRECTORY_PATH</span><span class="token operator">=</span> <span class="token punctuation">(</span>TNSNAMES, EZCONNECT<span class="token punctuation">)</span>
<span class="token assign-left variable">SQLNET.AUTHENTICATION_SERVICES</span><span class="token operator">=</span> <span class="token punctuation">(</span>NTS<span class="token punctuation">)</span>
</code></pre>
    <ul>
     <li>
      <code>
       NAMES.DIRECTORY_PATH
      </code>
      指定了名称解析的顺序。
     </li>
     <li>
      <code>
       SQLNET.AUTHENTICATION_SERVICES
      </code>
      指定了认证方式。
     </li>
    </ul>
    <hr/>
    <h3>
     <a id="5__422">
     </a>
     <strong>
      5. 测试远程连接
     </strong>
    </h3>
    <h4>
     <a id="51__SQLPlus__424">
     </a>
     <strong>
      5.1 使用 SQL*Plus 测试连接
     </strong>
    </h4>
    <p>
     在客户端使用 SQL*Plus 测试远程连接：
    </p>
    <pre><code class="prism language-bash">sqlplus username/password@ORCL
</code></pre>
    <p>
     例如：
    </p>
    <pre><code class="prism language-bash">sqlplus system/oracle@ORCL
</code></pre>
    <ul>
     <li>
      将
      <code>
       username
      </code>
      和
      <code>
       password
      </code>
      替换为实际的数据库用户名和密码。
     </li>
     <li>
      将
      <code>
       ORCL
      </code>
      替换为
      <code>
       tnsnames.ora
      </code>
      中配置的网络服务名。
     </li>
    </ul>
    <h4>
     <a id="52__TNSPING__437">
     </a>
     <strong>
      5.2 使用 TNSPING 测试连接
     </strong>
    </h4>
    <p>
     在客户端使用
     <code>
      tnsping
     </code>
     测试网络服务名配置：
    </p>
    <pre><code class="prism language-bash">tnsping ORCL
</code></pre>
    <p>
     如果配置正确，会显示类似以下内容：
    </p>
    <pre><code>Used TNSNAMES adapter to resolve the alias
Attempting to contact (DESCRIPTION = (ADDRESS = (PROTOCOL = TCP)(HOST = &lt;服务器IP或主机名&gt;)(PORT = 1521)) (CONNECT_DATA = (SERVER = DEDICATED) (SERVICE_NAME = orcl)))
OK (10 msec)
</code></pre>
    <hr/>
    <h3>
     <a id="6__451">
     </a>
     <strong>
      6. 其他注意事项
     </strong>
    </h3>
    <h4>
     <a id="61__453">
     </a>
     <strong>
      6.1 检查数据库监听地址
     </strong>
    </h4>
    <p>
     确保数据库监听地址正确。可以通过以下 SQL 查询检查：
    </p>
    <pre><code class="prism language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> v$listener_network<span class="token punctuation">;</span>
</code></pre>
    <h4>
     <a id="62__459">
     </a>
     <strong>
      6.2 检查数据库服务名
     </strong>
    </h4>
    <p>
     确保数据库服务名正确。可以通过以下 SQL 查询检查：
    </p>
    <pre><code class="prism language-sql"><span class="token keyword">SELECT</span> name<span class="token punctuation">,</span> <span class="token keyword">value</span> <span class="token keyword">FROM</span> v$parameter <span class="token keyword">WHERE</span> name <span class="token operator">=</span> <span class="token string">'service_names'</span><span class="token punctuation">;</span>
</code></pre>
    <h4>
     <a id="63__465">
     </a>
     <strong>
      6.3 检查客户端和服务器的时间同步
     </strong>
    </h4>
    <p>
     确保客户端和服务器的时间同步，否则可能会导致连接问题。
    </p>
    <h4>
     <a id="64__468">
     </a>
     <strong>
      6.4 检查日志文件
     </strong>
    </h4>
    <p>
     如果连接失败，检查以下日志文件以获取更多信息：
    </p>
    <ul>
     <li>
      服务器端监听器日志：
      <code>
       $ORACLE_HOME/network/log/listener.log
      </code>
     </li>
     <li>
      客户端连接日志：
      <code>
       $ORACLE_HOME/network/log/sqlnet.log
      </code>
     </li>
    </ul>
    <hr/>
    <h3>
     <a id="7__475">
     </a>
     <strong>
      7. 高级配置（可选）
     </strong>
    </h3>
    <h4>
     <a id="71__477">
     </a>
     <strong>
      7.1 配置动态服务注册
     </strong>
    </h4>
    <p>
     如果使用动态服务注册，确保数据库参数
     <code>
      local_listener
     </code>
     和
     <code>
      remote_listener
     </code>
     配置正确：
    </p>
    <pre><code class="prism language-sql"><span class="token keyword">ALTER</span> SYSTEM <span class="token keyword">SET</span> LOCAL_LISTENER<span class="token operator">=</span><span class="token string">'(ADDRESS=(PROTOCOL=TCP)(HOST=&lt;服务器IP或主机名&gt;)(PORT=1521))'</span><span class="token punctuation">;</span>
<span class="token keyword">ALTER</span> SYSTEM <span class="token keyword">SET</span> REMOTE_LISTENER<span class="token operator">=</span><span class="token string">'&lt;远程监听器地址&gt;'</span><span class="token punctuation">;</span>
</code></pre>
    <h4>
     <a id="72__SSLTLS__484">
     </a>
     <strong>
      7.2 配置 SSL/TLS 加密
     </strong>
    </h4>
    <p>
     如果需要更高的安全性，可以配置 Oracle Net 使用 SSL/TLS 加密通信。具体步骤请参考 Oracle 官方文档。
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
  <div class="blog-extension-box" id="blogExtensionBox" style="width:400px;margin:auto;margin-top:12px">
  </div>
 </article>
 <p alt="687474:70733a2f2f626c6f672e6373646e2e6e65742f73697870702f:61727469636c652f64657461696c732f313436323436323034" class_="artid" style="display:none">
 </p>
</div>


