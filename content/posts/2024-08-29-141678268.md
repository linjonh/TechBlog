---
arturl_encode: "68747470733a2f2f62:6c6f672e6373646e2e6e65742f6d305f36343133393833362f:61727469636c652f64657461696c732f313431363738323638"
layout: post
title: "DNS原理及服务器部署"
date: 2024-08-29 16:22:49 +08:00
description: "（Domain Name System）即域名系统：除了正向解析"
keywords: "不同dns服务器通过什么连接"
categories: ['网安测试']
tags: ['运维', '服务器']
artid: "141678268"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=141678268
    alt: "DNS原理及服务器部署"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=141678268
featuredImagePreview: https://bing.ee123.net/img/rand?artid=141678268
---

# DNS原理及服务器部署

## 一.DNS

（Domain Name System）即域名系统

### **一、域名解析**

1. **将域名转换为 IP 地址**
   ：当你在浏览器中输入一个域名（如
   [www.example.com](https://www.example.com/ "www.example.com")
   ）时，DNS 服务器会将这个域名解析为相应的 IP 地址（如 192.168.1.1）。计算机之间的通信是通过 IP 地址进行的，而域名对于人类来说更容易记忆。这样，你就不需要记住每个网站的 IP 地址，只需记住其域名即可访问相应的网站。

* 例如，你想访问百度，只需在浏览器地址栏输入 “
  [www.baidu.com](https://www.baidu.com/ "www.baidu.com")
  ”，DNS 会迅速将其转换为百度服务器的 IP 地址，让你的浏览器能够与百度服务器建立连接。

**2.反向域名解析**
：除了正向解析（从域名到 IP 地址），DNS 还可以进行反向解析，即将 IP 地址转换为域名。这在一些网络管理和安全场景中非常有用，例如确定发送网络数据包的主机的域名。

### **二、负载均衡**

1. **分配流量**
   ：对于大型网站或服务，通常会有多台服务器来处理用户请求。DNS 可以通过将域名解析到不同的 IP 地址，实现对用户请求的负载均衡。例如，一个在线购物网站可能有多个服务器分布在不同的地理位置，DNS 可以根据用户的地理位置、网络状况等因素，将用户的请求分配到最合适的服务器上。

* 比如，当用户在北京访问该购物网站时，DNS 可能会将其请求解析到距离北京较近的服务器的 IP 地址，以提高访问速度和响应时间。

**2.提高可用性**
：如果某台服务器出现故障，DNS 可以将请求引导到其他正常运行的服务器上从而提高服务的可用性。这样，即使个别服务器出现问题，用户仍然可以通过域名访问到网站或服务。

### **三、缓存功能**

1. **加快解析速度**
   ：DNS 服务器会缓存已经解析过的域名和 IP 地址的对应关系。当再次收到对相同域名的解析请求时，DNS 服务器可以直接从缓存中返回结果，而不需要再次进行查询，从而加快解析速度。

* 例如，你第一次访问某个网站时，DNS 服务器可能需要花费一定时间进行解析，但之后如果你再次访问该网站，由于 DNS 缓存的存在，解析速度会大大提高。

2.
**减少网络流量**
：缓存还可以减少网络中的 DNS 查询流量，降低网络负载。因为许多用户可            能会访问相同的热门网站，而这些网站的域名解析结果可以在 DNS 服务器的缓存中重复使            用。

### **四、辅助网络管理和安全**

1. **区域管理**
   ：在企业网络或特定的网络区域中，DNS 可以用于划分不同的区域，实现对网络资源的管理和控制。例如，可以通过 DNS 配置不同的域名后缀来区分内部网络和外部网络的资源。
2. **安全防护**
   ：一些 DNS 服务器还可以提供安全功能，如过滤恶意域名、防止 DNS 欺骗等。DNS 欺骗是一种网络攻击手段，攻击者通过伪造 DNS 响应，将用户引导到恶意网站。通过使用安全的 DNS 服务器，可以降低遭受此类攻击的风险。

## 二.域名

**如 www.baidu.com 是一个域名，从严格意义上讲， baidu.com 才被称为域名(全球唯一)，而"www"是主机名。"主机名.域名"称为完全限定域名(FQDN)。一个域名下可以有多个主机，域名全球唯一，那么"主机名.域名"肯定也是全球唯一的。**

![](https://i-blog.csdnimg.cn/direct/606f839e10e0426c9be0be1aa23aaa65.png)

![](https://i-blog.csdnimg.cn/direct/41bc7cd952204f979184dadd75949905.png)

## 三.URL

URL，即统一资源定位符（Uniform Resource Locator），是互联网上用于定位和访问资源的地址。

URL 的作用包括：识别 internet 中的信息资源，并将 internet 提供的服务统一编址；通过 URL 可以到达任何一个地方寻找需要的东西，如文件、数据库、图像、新闻等；是互联网上资源的统一标识符，起到了非常重要的作用。

一个标准的 URL 通常具有以下格式：

1. 协议：指定用于定位资源的传输协议，常见的有 http、https、ftp、telnet 等。
2. 主机名或 IP 地址：表示存放资源的服务器的域名系统（DNS）主机名或 IP 地址。
3. 端口号：用于表示在传输层上交换信息的进程端口号。大多数情况下，HTTP 协议的默认端口号为 80，HTTPS 的默认端口号为 443。
4. 路径：指定请求资源的 URI（统一资源定位符），通常包括服务器上存放该资源的目录路径。
5. 参数：用于指定特殊参数的可选项，可以有多个参数，用 “&” 符号隔开，每个参数的键值之间用‘=’隔开。
6. 查询：可选部分，用于给动态网页（如使用 PHP/JSP 等制作的网页）传递参数，可以有多个参数，用 “&” 符号隔开，每个参数的键值之间用‘=’隔开。
7. 锚点：可选部分，用于指定网页中的某个位置，通常用于页面导航。

例如：“
[https://www.example.com:443/path/to/resource?param1=value1&param2=value2#anchor](https://www.example.com/path/to/resource?param1=value1&param2=value2#anchor "https://www.example.com:443/path/to/resource?param1=value1&param2=value2#anchor")
”，其中 “https” 是协议

“
[www.example.com](https://www.example.com/ "www.example.com")
” 是主机名

“443” 是端口号（可省略）

“/path/to/resource” 是路径

“?param1=value1&param2=value2” 是查询参数

“#anchor” 是锚点

## 四.DNS监听端口

```
 TCP53
 UDP53
```

## 五.DNS解析

### 一.过程

![](https://i-blog.csdnimg.cn/direct/320876939c66463c891029083381ced6.png)

```bash
//在首次解析之后，本地DNS服务器会记录解析ip，所以后续访问会很流畅

//特殊的DNS解析
//本地第一道DNS解析

//hosts文件，文件位置C:\Windows\System32\drivers\etc\hosts
// /etc/hosts
```

### 二.分类

按照查询内容分类：
  
1）正向解析：已知域名，解析IP地址
  
2）反向解析：已知IP地址，解析域名

### 三.DNS服务器搭建过程

1）要求网卡IP是静态IP地址。
  
2）安装DNS服务器插件（也就是安装并开启TCP及UDP53端口）
  
3）创建区域文件（负责一个域名后缀的解析，如baidu.com为域名后缀，一台DNS服务

器内可存放多个区域文 件）
  
4）新建A记录

### 四.DNS服务器处理域名请求的顺序

1）DNS高速缓存（必须学会如何查看及清空）
  
2）DNS区域配置文件
  
3）DNS转发器
  
4）根提示

### 五.清除DNS缓存

```bash
//客户端清除
//ipconfig /flushdns
//服务器清除
//windows服务器：dns工具--查看--高级，调出缓存来，然后右键清除缓存
```

### 六.域名解析记录类型：

A记录： 正向解析记录
  
CNAME记录：别名
  
PTR记录：反向解析记录
  
MX：邮件交换记录
  
NS：域名服务器解析
  
查询方法:

```bash
nslookup
set type=mx
qq.com
```

### 七.反向DNS

nslookup手工解析时，会进行一个反向解析

### 八.DNS服务器分类

主要名称服务器

辅助名称服务器

根名称服务器

高速缓存名称服务器

### 九.客户机域名请求解析顺序

--1.DNS缓存

----2.本地hosts文件

--------3.找本地DNS服务器

### 十.服务器对域名请求的处理顺序

---1.DNS高速缓存

-----2.本地区域解析文件

----------3.转发器

------------------4.根