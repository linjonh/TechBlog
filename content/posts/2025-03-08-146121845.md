---
layout: post
title: "Java链接redis"
date: 2025-03-08 20:11:24 +0800
description: "代码这东西，光看不动手都是耍流氓！赶紧打开IDE，把Redis玩出花来。遇到问题别慌，记住雷总那句话：\"**试错的成本并不高，而错过的成本非常高！**\"（突然正经）对了，用SpringBoot的童鞋可以直接上，配置自动注入美滋滋。但底层原理还是这些，万变不离其宗！🎉彩蛋：当年我用Redis存了10个G的缓存结果没设过期时间...这事我能笑（哭）三年！朋友们引以为戒啊！"
keywords: "Java链接redis"
categories: ['业务系统应用技术']
tags: ['开发语言', 'Redis', 'Java']
artid: "146121845"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146121845
    alt: "Java链接redis"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146121845
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146121845
cover: https://bing.ee123.net/img/rand?artid=146121845
image: https://bing.ee123.net/img/rand?artid=146121845
img: https://bing.ee123.net/img/rand?artid=146121845
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Java链接redis
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <h4>
     一、准备工作就像谈恋爱
    </h4>
    <p>
     首先咱们得来点仪式感是不是？打开你的Maven（Gradle玩家别打我），把这两个宝贝依赖给我焊死在pom.xml里：
    </p>
    <p>
     &lt;!-- 经典永不过时的Jedis --&gt;
    </p>
    <p>
     &lt;dependency&gt;
    </p>
    <p>
     &lt;groupId&gt;redis.clients&lt;/groupId&gt;
    </p>
    <p>
     &lt;artifactId&gt;jedis&lt;/artifactId&gt;
    </p>
    <p>
     &lt;version&gt;4.4.3&lt;/version&gt;
    </p>
    <p>
     &lt;/dependency&gt;
    </p>
    <p>
    </p>
    <p>
     &lt;!-- 新贵Lettuce，异步猛如虎 --&gt;
    </p>
    <p>
     &lt;dependency&gt;
    </p>
    <p>
     &lt;groupId&gt;io.lettuce&lt;/groupId&gt;
    </p>
    <p>
     &lt;artifactId&gt;lettuce-core&lt;/artifactId&gt;
    </p>
    <p>
     &lt;version&gt;6.3.0.RELEASE&lt;/version&gt;
    </p>
    <p>
     &lt;/dependency&gt;
    </p>
    <p>
     选Jedis还是Lettuce？这就好比选机械键盘的青轴红轴，Jedis直来直去像东北老铁，Lettuce异步操作像上海精英。我全都要.jpg
    </p>
    <hr/>
    <p>
    </p>
    <h3>
     🚀二、连接实战比奶茶简单
    </h3>
    <p>
    </p>
    <h4>
     方案A：直男式连接（Jedis极简版）
    </h4>
    <pre><code class="language-java">public class Redis直男 {
    public static void main(String[] args) {
        // 这三个参数就像wifi密码，错一个都别想连
        Jedis jedis = new Jedis("localhost", 6379);
        jedis.auth("你的密码"); // 没密码？心真大！
        
        jedis.set("雷总语录", "站在风口上，猪都能飞起来");
        System.out.println(jedis.get("雷总语录")); // 打印出来都是情怀
        
        jedis.close(); // 用完不关？等着内存泄漏吧！
    }
}</code></pre>
    <p>
    </p>
    <h4>
     方案B：优雅永不过时（Lettuce高定版）
    </h4>
    <pre></pre>
    <pre><code class="language-java">public class Redis绅士 {
    public static void main(String[] args) {
        RedisURI uri = RedisURI.Builder
            .redis("localhost")
            .withPort(6379)
            .withAuthentication("default", "你的密码")
            .build();
            
        RedisClient client = RedisClient.create(uri);
        StatefulRedisConnection&lt;String, String&gt; connection = client.connect();
        
        RedisCommands&lt;String, String&gt; commands = connection.sync();
        commands.set("互联网思维", "专注、极致、口碑、快");
        System.out.println(commands.get("互联网思维"));
        
        connection.close(); // 优雅关闭才是王道
        client.shutdown();
    }
}</code></pre>
    <p>
    </p>
    <p>
    </p>
    <h3>
     💊三、连接池是程序员的续命丹
    </h3>
    <p>
    </p>
    <p>
     知道为什么你头发越来越少吗？每次new连接就像拆一次性筷子！上连接池才是正解：
    </p>
    <pre><code class="language-java">JedisPoolConfig poolConfig = new JedisPoolConfig();
poolConfig.setMaxTotal(20); // 最大连接数，别让你的Redis像早高峰地铁
poolConfig.setMaxIdle(10);  // 最大摸鱼连接数

try (JedisPool pool = new JedisPool(poolConfig, "localhost", 6379, 2000, "密码")) {
    Jedis jedis = pool.getResource();
    // 一顿操作猛如虎...
} // 自动回收连接，妈妈再也不用担心我忘关连接了</code></pre>
    <p>
    </p>
    <hr/>
    <p>
    </p>
    <h3>
     🚨四、避坑指南（血泪史）
    </h3>
    <p>
    </p>
    <ol>
     <li>
      <p>
       <strong>
        Timeout异常三连击
       </strong>
      </p>
      <ol>
       <li>
        <p>
         检查防火墙姿势
        </p>
       </li>
       <li>
        <p>
         确认6379端口开了没
        </p>
       </li>
       <li>
        <p>
         网络延迟超过
         <code>
          connectionTimeout
         </code>
         值？
        </p>
       </li>
      </ol>
     </li>
    </ol>
    <p>
    </p>
    <ol>
     <li>
      <p>
       <strong>
        AUTH错误终极奥义
       </strong>
      </p>
      <pre></pre>
      <p>
       <code>
        // 密码里有特殊符号？上双引号护体！ jedis.auth("\"your@pass!\"");
       </code>
      </p>
      <ol>
      </ol>
     </li>
    </ol>
    <p>
    </p>
    <ol>
     <li>
      <p>
       <strong>
        内存
       </strong>
       <strong>
        爆炸现场教学
       </strong>
       Redis配置必须加
       <code>
        maxmemory 256mb
       </code>
       （别让Redis变成貔貅）
      </p>
     </li>
    </ol>
    <p>
    </p>
    <ol>
     <li>
      <p>
       <strong>
        连接泄漏灵魂拷问
       </strong>
       推荐使用
       <code>
        try-with-resources
       </code>
       ，比健忘症特效药管用
      </p>
     </li>
    </ol>
    <p>
    </p>
    <hr/>
    <p>
    </p>
    <h3>
     ⚡五、性能三连（敲黑板！）
    </h3>
    <p>
    </p>
    <ul>
     <li>
      <p>
       <strong>
        Pipeline技术
       </strong>
       ：比双十一快递还快的批量操作
      </p>
      <pre></pre>
     </li>
    </ul>
    <pre><code class="language-java">Pipeline pipeline = jedis.pipelined();
for(int i=0; i&lt;10000; i++){
    pipeline.set("key"+i, "value"+i);
}
pipeline.sync();</code></pre>
    <p>
    </p>
    <ul>
     <li>
      <p>
       <strong>
        集群模式生存指南
       </strong>
      </p>
      <ul>
       <li>
        <p>
         单机模式：RedisTemplate
        </p>
       </li>
       <li>
        <p>
         集群模式：JedisCluster
        </p>
       </li>
      </ul>
     </li>
    </ul>
    <p>
    </p>
    <hr/>
    <p>
    </p>
    <h3>
     💡最后说点掏心窝子的
    </h3>
    <p>
    </p>
    <p>
     代码这东西，光看不动手都是耍流氓！赶紧打开IDE，把Redis玩出花来。遇到问题别慌，记住雷总那句话："**试错的成本并不高，而错过的成本非常高！**"
    </p>
    <p>
    </p>
    <p>
     （突然正经）对了，用SpringBoot的童鞋可以直接上
     <code>
      Spring Data Redis
     </code>
     ，配置自动注入美滋滋。但底层原理还是这些，万变不离其宗！
    </p>
    <p>
    </p>
    <hr/>
    <p>
    </p>
    <p>
     <strong>
      🎉彩蛋
     </strong>
     ：当年我用Redis存了10个G的缓存结果没设过期时间...这事我能笑（哭）三年！朋友们引以为戒啊！
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f:626c6f672e6373646e2e6e65742f77616e673534333230332f:61727469636c652f64657461696c732f313436313231383435" class_="artid" style="display:none">
 </p>
</div>


