---
layout: post
title: "如何用正则表达式爬取古诗文网中的数据python爬虫"
date: 2025-03-15 19:28:48 +0800
description: "在爬虫中，正则表达式主要用于从网页源码中提取所需信息。"
keywords: "如何用正则表达式爬取古诗文网中的数据（python爬虫）"
categories: ['Python']
tags: ['爬虫', 'Python', 'Pycharm']
artid: "146283331"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146283331
    alt: "如何用正则表达式爬取古诗文网中的数据python爬虫"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146283331
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146283331
cover: https://bing.ee123.net/img/rand?artid=146283331
image: https://bing.ee123.net/img/rand?artid=146283331
img: https://bing.ee123.net/img/rand?artid=146283331
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     如何用正则表达式爬取古诗文网中的数据（python爬虫）
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <h2>
     一、了解正则表达式的基本内容：
    </h2>
    <p>
     <img alt="" height="379" src="https://i-blog.csdnimg.cn/direct/fb4a217e40a04ad8add1a6eeb2f96715.png" width="553"/>
    </p>
    <h4>
     什么是正则表达式
    </h4>
    <p>
     正则表达式（Regular Expression，简称 regex）是一种用于
     <span style="color:#fe2c24">
      匹配字符串
     </span>
     的模式。它通过特定的语法规则，可以高效地搜索、替换和提取文本中的特定内容。正则表达式广泛应用于文本处理、数据验证、日志分析等领域。
    </p>
    <h4>
     正则表达式在爬虫中的应用
    </h4>
    <p>
     在爬虫中，正则表达式主要用于从
     <span style="color:#fe2c24">
      网页源码中提取所需信息
     </span>
     。以下是其主要应用场景：
    </p>
    <ol>
     <li>
      <p>
       <strong>
        数据提取
       </strong>
       ：
      </p>
      <ul>
       <li>
        <p>
         从HTML中提取特定标签的内容，如链接、标题、图片地址等。
        </p>
       </li>
       <li>
        <p>
         示例：提取所有链接：
         <code>
          &lt;a\s+(?:[^&gt;]*?\s+)?href="([^"]*)"
         </code>
        </p>
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        数据清洗
       </strong>
       ：
      </p>
      <ul>
       <li>
        <p>
         去除多余的空格、换行符或HTML标签。
        </p>
       </li>
       <li>
        <p>
         示例：去除HTML标签：
         <code>
          &lt;[^&gt;]+&gt;
         </code>
        </p>
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        数据验证
       </strong>
       ：
      </p>
      <ul>
       <li>
        <p>
         验证提取的数据是否符合预期格式，如邮箱、日期等。
        </p>
       </li>
       <li>
        <p>
         示例：验证邮箱：
         <code>
          ^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$
         </code>
        </p>
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        URL匹配
       </strong>
       ：
      </p>
      <ul>
       <li>
        <p>
         匹配特定模式的URL，用于过滤或分类。
        </p>
       </li>
       <li>
        <p>
         示例：匹配图片URL：
         <code>
          https?://[^\s]+?\.(jpg|png|gif)
         </code>
        </p>
       </li>
      </ul>
     </li>
    </ol>
    <h4>
     正则表达式的核心知识点
    </h4>
    <ol>
     <li>
      <p>
       <strong>
        基本语法
       </strong>
       ：
      </p>
      <ul>
       <li>
        <p>
         <strong>
          字符匹配
         </strong>
         ：普通字符匹配自身，如
         <code>
          a
         </code>
         匹配字符 "a"。
        </p>
       </li>
       <li>
        <p>
         <strong>
          元字符
         </strong>
         ：具有特殊含义的字符，如
         <code>
          .
         </code>
         匹配任意字符，
         <code>
          *
         </code>
         匹配前一个字符的零次或多次。
        </p>
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        字符类
       </strong>
       ：
      </p>
      <ul>
       <li>
        <p>
         <code>
          [abc]
         </code>
         匹配 "a"、"b" 或 "c"。
        </p>
       </li>
       <li>
        <p>
         <code>
          [^abc]
         </code>
         匹配除 "a"、"b"、"c" 之外的字符。
        </p>
       </li>
       <li>
        <p>
         <code>
          \d
         </code>
         匹配数字，
         <code>
          \w
         </code>
         匹配字母、数字或下划线，
         <code>
          \s
         </code>
         匹配空白字符。
        </p>
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        量词
       </strong>
       ：
      </p>
      <ul>
       <li>
        <p>
         <code>
          *
         </code>
         ：零次或多次。
        </p>
       </li>
       <li>
        <p>
         <code>
          +
         </code>
         ：一次或多次。
        </p>
       </li>
       <li>
        <p>
         <code>
          ?
         </code>
         ：零次或一次。
        </p>
       </li>
       <li>
        <p>
         <code>
          {n}
         </code>
         ：恰好 n 次。
        </p>
       </li>
       <li>
        <p>
         <code>
          {n,}
         </code>
         ：至少 n 次。
        </p>
       </li>
       <li>
        <p>
         <code>
          {n,m}
         </code>
         ：n 到 m 次。
        </p>
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        分组和捕获
       </strong>
       ：
      </p>
      <ul>
       <li>
        <p>
         <code>
          (abc)
         </code>
         匹配 "abc" 并捕获。
        </p>
       </li>
       <li>
        <p>
         <code>
          (?:abc)
         </code>
         匹配 "abc" 但不捕获。
        </p>
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        锚点
       </strong>
       ：
      </p>
      <ul>
       <li>
        <p>
         <code>
          ^
         </code>
         匹配字符串开头。
        </p>
       </li>
       <li>
        <p>
         <code>
          $
         </code>
         匹配字符串结尾。
        </p>
       </li>
       <li>
        <p>
         <code>
          \b
         </code>
         匹配单词边界。
        </p>
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        贪婪与懒惰匹配
       </strong>
       ：
      </p>
      <ul>
       <li>
        <p>
         默认是贪婪匹配，尽可能匹配更多字符。
        </p>
       </li>
       <li>
        <p>
         在量词后加
         <code>
          ?
         </code>
         可进行懒惰匹配，尽可能匹配更少字符。
        </p>
       </li>
       <li>
        <p>
         示例：
         <code>
          a.*?b
         </code>
         匹配 "a" 和 "b" 之间的最短内容。
        </p>
       </li>
      </ul>
     </li>
    </ol>
    <h4>
     总结
    </h4>
    <p>
     正则表达式是爬虫中强大的工具，能够高效提取和清洗数据。掌握其基本语法和常用技巧，能显著提升爬虫的开发效率和数据处理能力。
    </p>
    <p>
     <img alt="" height="264" src="https://i-blog.csdnimg.cn/direct/a4117681600c457f933d5984f6a36ad6.png" width="553"/>
    </p>
    <p>
     <img alt="" height="421" src="https://i-blog.csdnimg.cn/direct/1ec7972f2dc045fdbc9446838b5fb4ed.png" width="554"/>
    </p>
    <p>
     <img alt="" height="419" src="https://i-blog.csdnimg.cn/direct/bd650a2facd14861978896fb51a83de1.png" width="554"/>
    </p>
    <p>
     <img alt="" height="373" src="https://i-blog.csdnimg.cn/direct/385dada51907400a800a9fe6bfaed3e5.png" width="554"/>
    </p>
    <p>
     <img alt="" height="295" src="https://i-blog.csdnimg.cn/direct/4982b3c402be4f21a5215c925b86b751.png" width="554"/>
    </p>
    <h3>
     同时代码中还涉及到了re库的使用：
    </h3>
    <p>
     <code>
      re
     </code>
     是 Python 标准库中用于处理正则表达式的模块，提供了丰富的函数和方法来操作字符串。通过
     <code>
      re
     </code>
     库，你可以轻松实现字符串的匹配、查找、替换和分割等操作。
    </p>
    <p>
     <code>
      re
     </code>
     库是 Python 中处理正则表达式的强大工具，提供了多种函数和方法来操作字符串。掌握
     <code>
      re
     </code>
     库的使用，可以显著提升文本处理的效率和灵活性，尤其在爬虫开发中，
     <code>
      re
     </code>
     库是不可或缺的工具。
    </p>
    <h4>
     <code>
      re
     </code>
     库的核心功能
    </h4>
    <ol>
     <li>
      <h5>
       <strong>
        编译正则表达式
       </strong>
       ：
      </h5>
      <ul>
       <li>
        <p>
         <code>
          re.compile(pattern, flags=0)
         </code>
         ：将正则表达式编译成一个正则对象，便于重复使用。
        </p>
       </li>
       <li>
        <p>
         示例：
        </p>
        <pre><code class="language-python">pattern = re.compile(r'\d+')</code></pre>
        <p>
        </p>
       </li>
      </ul>
     </li>
     <li>
      <h5>
       <strong>
        匹配字符串
       </strong>
       ：
      </h5>
      <ul>
       <li>
        <p>
         <code>
          re.match(pattern, string, flags=0)
         </code>
         ：从字符串开头匹配正则表达式，返回匹配对象或
         <code>
          None
         </code>
         。
        </p>
       </li>
       <li>
        <p>
         示例：
        </p>
        <pre><code class="language-python">match = re.match(r'\d+', '123abc')
if match:
    print(match.group())  # 输出: 123</code></pre>
        <p>
        </p>
       </li>
      </ul>
     </li>
     <li>
      <h5>
       <strong>
        搜索字符串
       </strong>
       ：
      </h5>
      <ul>
       <li>
        <p>
         <code>
          re.search(pattern, string, flags=0)
         </code>
         ：在字符串中搜索第一个匹配项，返回匹配对象或
         <code>
          None
         </code>
         。
        </p>
       </li>
       <li>
        <p>
         示例：
        </p>
        <pre><code class="language-python">search = re.search(r'\d+', 'abc123def')
if search:
    print(search.group())  # 输出: 123</code></pre>
        <p>
        </p>
       </li>
      </ul>
     </li>
     <li>
      <h5>
       <strong>
        查找所有匹配项
       </strong>
       ：
      </h5>
      <ul>
       <li>
        <p>
         <code>
          re.findall(pattern, string, flags=0)
         </code>
         ：返回所有匹配项的列表。
        </p>
       </li>
       <li>
        <p>
         示例：
        </p>
        <pre><code class="language-python">findall = re.findall(r'\d+', 'a1b2c3')
print(findall)  # 输出: ['1', '2', '3']</code></pre>
        <p>
        </p>
       </li>
      </ul>
     </li>
     <li>
      <h5>
       <strong>
        查找所有匹配项（返回迭代器）
       </strong>
       ：
      </h5>
      <ul>
       <li>
        <p>
         <code>
          re.finditer(pattern, string, flags=0)
         </code>
         ：返回所有匹配项的迭代器，每个元素是一个匹配对象。
        </p>
       </li>
       <li>
        <p>
         示例：
        </p>
        <pre><code class="language-python">finditer = re.finditer(r'\d+', 'a1b2c3')
for match in finditer:
    print(match.group())  # 输出: 1, 2, 3</code></pre>
        <p>
        </p>
       </li>
      </ul>
     </li>
     <li>
      <h5>
       <strong>
        替换字符串
       </strong>
       ：
      </h5>
      <ul>
       <li>
        <p>
         <code>
          re.sub(pattern, repl, string, count=0, flags=0)
         </code>
         ：替换字符串中所有匹配项，返回替换后的字符串。
        </p>
       </li>
       <li>
        <p>
         示例：
        </p>
        <pre><code class="language-python">sub = re.sub(r'\d+', 'X', 'a1b2c3')
print(sub)  # 输出: aXbXcX</code></pre>
        <p>
        </p>
       </li>
      </ul>
     </li>
     <li>
      <h5>
       <strong>
        分割字符串
       </strong>
       ：
      </h5>
      <ul>
       <li>
        <p>
         <code>
          re.split(pattern, string, maxsplit=0, flags=0)
         </code>
         ：根据正则表达式分割字符串，返回列表。
        </p>
       </li>
       <li>
        <p>
         示例：
        </p>
        <pre><code class="language-python">split = re.split(r'\d+', 'a1b2c3')
print(split)  # 输出: ['a', 'b', 'c', '']
</code></pre>
        <p>
        </p>
       </li>
      </ul>
     </li>
    </ol>
    <h4>
     <code>
      re
     </code>
     库的常用方法详解
    </h4>
    <ol>
     <li>
      <p>
       <strong>
        匹配对象的方法
       </strong>
       ：
      </p>
      <ul>
       <li>
        <p>
         <code>
          group()
         </code>
         ：返回匹配的字符串。
        </p>
       </li>
       <li>
        <p>
         <code>
          start()
         </code>
         ：返回匹配的起始位置。
        </p>
       </li>
       <li>
        <p>
         <code>
          end()
         </code>
         ：返回匹配的结束位置。
        </p>
       </li>
       <li>
        <p>
         <code>
          span()
         </code>
         ：返回匹配的 (起始, 结束) 位置元组。
        </p>
       </li>
      </ul>
     </li>
     <li>
      <p>
       <strong>
        编译标志
       </strong>
       ：
      </p>
      <ul>
       <li>
        <p>
         <code>
          re.IGNORECASE
         </code>
         或
         <code>
          re.I
         </code>
         ：忽略大小写。
        </p>
       </li>
       <li>
        <p>
         <code>
          re.MULTILINE
         </code>
         或
         <code>
          re.M
         </code>
         ：多行模式，
         <code>
          ^
         </code>
         和
         <code>
          $
         </code>
         匹配每行的开头和结尾。
        </p>
       </li>
       <li>
        <p>
         <code>
          re.DOTALL
         </code>
         或
         <code>
          re.S
         </code>
         ：
         <code>
          .
         </code>
         匹配包括换行符在内的所有字符。
        </p>
       </li>
       <li>
        <p>
         <code>
          re.VERBOSE
         </code>
         或
         <code>
          re.X
         </code>
         ：允许在正则表达式中添加注释和空白符。
        </p>
       </li>
      </ul>
     </li>
    </ol>
    <h2>
     二、具体的爬虫代码解释（以古诗文网为例）
    </h2>
    <h2>
     <a href="https://www.gushiwen.cn/" rel="nofollow" title="古诗文网-古诗文经典传承">
      古诗文网-古诗文经典传承
     </a>
    </h2>
    <p>
     url=
     <a class="has-card" href="https://www.gushiwen.cn/shiwens/default.aspx?cstr=%e5%94%90%e4%bb%a3" rel="nofollow" title="唐代诗文_古诗文网">
      <span class="link-card-box" contenteditable="false">
       <span class="link-title">
        唐代诗文_古诗文网
       </span>
       <span class="link-link">
        <img class="link-link-icon" src="https://csdnimg.cn/release/blog_editor_html/release2.3.8/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P1C7">
         https://www.gushiwen.cn/shiwens/default.aspx?cstr=%e5%94%90%e4%bb%a3
        </img>
       </span>
      </span>
     </a>
     （以唐代的诗文题目为例，可扩充）
    </p>
    <p>
     <img alt="" height="880" src="https://i-blog.csdnimg.cn/direct/574a2a7306404ba6a43f84d09f8f3b8d.png" width="983"/>
    </p>
    <h3>
     右键检查 ：
    </h3>
    <p>
     <img alt="" height="997" src="https://i-blog.csdnimg.cn/direct/14e2803a913143f78379c9d84f6eacd9.png" width="1906"/>
    </p>
    <p>
    </p>
    <h3>
     具体的代码解释 ：
    </h3>
    <h4>
     1.
     <strong>
      <code>
       requests
      </code>
      库的使用
     </strong>
    </h4>
    <ul>
     <li>
      <p>
       <strong>
        功能
       </strong>
       ：
       <code>
        requests
       </code>
       是一个用于发送 HTTP 请求的 Python 库，常用于爬虫中获取网页内容。
      </p>
     </li>
     <li>
      <p>
       <strong>
        知识点
       </strong>
       ：
      </p>
      <ul>
       <li>
        <p>
         <code>
          requests.get(url, headers=headers)
         </code>
         ：发送 GET 请求，获取网页内容。
        </p>
       </li>
       <li>
        <p>
         <code>
          resp.encoding = 'utf-8'
         </code>
         ：设置响应的编码格式，确保正确解析中文内容。
        </p>
       </li>
       <li>
        <p>
         <code>
          resp.text
         </code>
         ：获取响应的文本内容（HTML 源码）。
        </p>
       </li>
       <li>
        <p>
         <code>
          headers
         </code>
         ：请求头，用于模拟浏览器访问，避免被网站反爬虫机制拦截。
        </p>
        <ul>
         <li>
          <p>
           <code>
            User-Agent
           </code>
           ：标识客户端类型（如浏览器），示例中使用的是 Chrome 浏览器的标识。
          </p>
         </li>
        </ul>
       </li>
      </ul>
     </li>
    </ul>
    <hr/>
    <h4>
     2.
     <strong>
      正则表达式（
      <code>
       re
      </code>
      库）
     </strong>
    </h4>
    <ul>
     <li>
      <p>
       <strong>
        功能
       </strong>
       ：用于从 HTML 文本中提取目标数据（如古诗标题）。
      </p>
     </li>
     <li>
      <p>
       <strong>
        知识点
       </strong>
       ：
      </p>
      <ul>
       <li>
        <p>
         <code>
          re.findall(pattern, string, flags)
         </code>
         ：从字符串中查找所有匹配正则表达式的部分，返回一个列表。
        </p>
       </li>
       <li>
        <p>
         正则表达式模式：
        </p>
        <ul>
         <li>
          <p>
           <code>
            r'&lt;div\sclass="cont"&gt;.*?&lt;b&gt;(.*?)&lt;/b&gt;'
           </code>
           ：
          </p>
          <ul>
           <li>
            <p>
             <code>
              &lt;div\sclass="cont"&gt;
             </code>
             ：匹配
             <code>
              &lt;div class="cont"&gt;
             </code>
             标签。
            </p>
           </li>
           <li>
            <p>
             <code>
              .*?
             </code>
             ：非贪婪匹配任意字符（尽可能少匹配）。
            </p>
           </li>
           <li>
            <p>
             <code>
              &lt;b&gt;(.*?)&lt;/b&gt;
             </code>
             ：匹配
             <code>
              &lt;b&gt;
             </code>
             标签中的内容，
             <code>
              (.*?)
             </code>
             是捕获组，提取标题内容。
            </p>
           </li>
          </ul>
         </li>
        </ul>
       </li>
       <li>
        <p>
         <code>
          re.DOTALL
         </code>
         标志：使
         <code>
          .
         </code>
         匹配包括换行符在内的所有字符。
        </p>
       </li>
      </ul>
     </li>
    </ul>
    <hr/>
    <h4>
     3.
     <strong>
      Python 函数
     </strong>
    </h4>
    <ul>
     <li>
      <p>
       <strong>
        功能
       </strong>
       ：将代码模块化，提高可读性和复用性。
      </p>
     </li>
     <li>
      <p>
       <strong>
        知识点
       </strong>
       ：
      </p>
      <ul>
       <li>
        <p>
         <code>
          def parse_page(url)
         </code>
         ：定义一个函数，用于解析网页内容。
        </p>
       </li>
       <li>
        <p>
         <code>
          def spider()
         </code>
         ：定义一个函数，作为爬虫的入口。
        </p>
       </li>
       <li>
        <p>
         <code>
          if __name__ == '__main__':
         </code>
         ：确保脚本在直接运行时执行
         <code>
          spider()
         </code>
         函数，而在被导入时不执行。
        </p>
       </li>
      </ul>
     </li>
    </ul>
    <hr/>
    <h4>
     4.
     <strong>
      URL 和请求头
     </strong>
    </h4>
    <ul>
     <li>
      <p>
       <strong>
        知识点
       </strong>
       ：
      </p>
      <ul>
       <li>
        <p>
         <strong>
          URL
         </strong>
         ：
        </p>
        <ul>
         <li>
          <p>
           <code>
            https://www.gushiwen.cn/shiwens/default.aspx?cstr=%e5%94%90%e4%bb%a3
           </code>
           ：目标网页地址。
          </p>
         </li>
         <li>
          <p>
           <code>
            cstr=%e5%94%90%e4%bb%a3
           </code>
           ：URL 编码，表示查询参数（这里是“唐代”）。
          </p>
         </li>
        </ul>
       </li>
       <li>
        <p>
         <strong>
          请求头
         </strong>
         ：
        </p>
        <ul>
         <li>
          <p>
           <code>
            headers
           </code>
           ：用于模拟浏览器访问，避免被反爬虫机制拦截。
          </p>
         </li>
         <li>
          <p>
           <code>
            User-Agent
           </code>
           ：标识客户端类型，示例中使用的是 Chrome 浏览器的标识。
          </p>
         </li>
        </ul>
       </li>
      </ul>
     </li>
    </ul>
    <hr/>
    <h4>
     5.
     <strong>
      编码问题
     </strong>
    </h4>
    <ul>
     <li>
      <p>
       <strong>
        知识点
       </strong>
       ：
      </p>
      <ul>
       <li>
        <p>
         <code>
          resp.encoding = 'utf-8'
         </code>
         ：设置响应的编码格式为 UTF-8，确保正确解析中文内容。
        </p>
       </li>
       <li>
        <p>
         如果未设置编码，可能会导致乱码问题。
        </p>
       </li>
      </ul>
     </li>
    </ul>
    <hr/>
    <h4>
     6.
     <strong>
      代码执行流程
     </strong>
    </h4>
    <ul>
     <li>
      <p>
       <strong>
        知识点
       </strong>
       ：
      </p>
      <ol>
       <li>
        <p>
         调用
         <code>
          spider()
         </code>
         函数。
        </p>
       </li>
       <li>
        <p>
         <code>
          spider()
         </code>
         函数调用
         <code>
          parse_page(url)
         </code>
         ，传入目标 URL。
        </p>
       </li>
       <li>
        <p>
         <code>
          parse_page(url)
         </code>
         发送 HTTP 请求，获取网页内容。
        </p>
       </li>
       <li>
        <p>
         使用正则表达式从 HTML 中提取古诗标题。
        </p>
       </li>
       <li>
        <p>
         打印提取的标题列表。
        </p>
       </li>
      </ol>
     </li>
    </ul>
    <p>
    </p>
    <h5>
     具体代码展示：
    </h5>
    <pre><code class="language-python">import requests
import re

url = "https://www.gushiwen.cn/shiwens/default.aspx?cstr=%e5%94%90%e4%bb%a3"
header = {
    "user-agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"
}

def parse_page(url):
    resp = requests.get(url, headers=header)
    resp.encoding = 'utf-8'  # 确保编码正确
    html = resp.text
    # 调整正则表达式以匹配实际的HTML结构
    titles = re.findall(r'&lt;div\sclass="cont"&gt;.*?&lt;b&gt;(.*?)&lt;/b&gt;', html, re.DOTALL)
    print(titles)

def spider():
    url = "https://www.gushiwen.cn/shiwens/default.aspx?cstr=%e5%94%90%e4%bb%a3"  # 古诗文网
    parse_page(url)

if __name__ == '__main__':
    spider()</code></pre>
    <h5>
     运行结果：
    </h5>
    <p>
     <img alt="" height="217" src="https://i-blog.csdnimg.cn/direct/0df89bfc1f9343acb38eba72fb5cda4f.png" width="1326"/>
    </p>
    <p>
    </p>
    <h2>
     三、改进建议：根据以上代码格式不光可以爬取古诗文题目也可以爬取内容作者等
    </h2>
    <p>
     <img alt="" height="893" src="https://i-blog.csdnimg.cn/direct/2004a63beefa42ceaaa887c94a951a2d.png" width="1803"/>
    </p>
    <p>
     <img alt="" height="548" src="https://i-blog.csdnimg.cn/direct/8fd794164a4244f8a9f87dc2863d9355.png" width="954"/>
    </p>
    <h4>
     所以后面的代码有改动：
    </h4>
    <pre><code class="language-python">import requests
import re

# 目标URL
url = "https://www.gushiwen.cn/shiwens/default.aspx?cstr=%e5%94%90%e4%bb%a3"

# 请求头，模拟浏览器访问
header = {
    "user-agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"
}

def parse_page(url):
    # 发送HTTP请求，获取网页内容
    resp = requests.get(url, headers=header)
    resp.encoding = 'utf-8'  # 设置编码
    html = resp.text

    # 正则表达式提取古诗的标题、作者和内容
    poem_pattern = re.compile(
        r'&lt;div class="cont"&gt;.*?&lt;b&gt;(.*?)&lt;/b&gt;.*?'  # 标题
        r'&lt;p class="source"&gt;.*?&lt;a.*?&gt;(.*?)&lt;/a&gt;.*?&lt;a.*?&gt;(.*?)&lt;/a&gt;.*?'  # 作者
        r'&lt;div class="contson".*?&gt;(.*?)&lt;/div&gt;',  # 内容
        re.DOTALL
    )

    # 查找所有匹配的古诗
    poems = poem_pattern.findall(html)

    # 遍历提取结果
    for poem in poems:
        title = poem[0].strip()  # 标题
        author = f"{poem[1].strip()} {poem[2].strip()}"  # 作者
        content = re.sub(r'&lt;.*?&gt;', '', poem[3]).strip()  # 去除内容中的HTML标签

        # 打印结果
        print(f"标题: {title}")
        print(f"作者: {author}")
        print(f"内容: {content}")
        print("-" * 50)  # 分隔线

def spider():
    # 目标URL
    url = "https://www.gushiwen.cn/shiwens/default.aspx?cstr=%e5%94%90%e4%bb%a3"
    parse_page(url)

if __name__ == '__main__':
    spider()</code></pre>
    <p>
     <img alt="" height="730" src="https://i-blog.csdnimg.cn/direct/65e43462f59543d8aba55e1c6dbaa0a9.png" width="1098"/>
    </p>
    <h4 style="background-color:transparent">
     部分正则表达式的来源：
    </h4>
    <pre><code class="language-python">poem_pattern = re.compile(
    r'&lt;div class="cont"&gt;.*?&lt;b&gt;(.*?)&lt;/b&gt;.*?'  # 标题
    r'&lt;p class="source"&gt;.*?&lt;a.*?&gt;(.*?)&lt;/a&gt;.*?&lt;a.*?&gt;(.*?)&lt;/a&gt;.*?'  # 作者
    r'&lt;div class="contson"&gt;.*?&gt;(.*?)&lt;/div&gt;',  # 内容
    re.DOTALL
)</code></pre>
    <p>
     <img alt="" height="461" src="https://i-blog.csdnimg.cn/direct/c780411c2b6c46d2b1c9b9bdcbf6bc6d.png" width="1068"/>
    </p>
    <p>
     <img alt="" height="456" src="https://i-blog.csdnimg.cn/direct/7140288e722348be8c1a73e3dfe555ee.png" width="996"/>
    </p>
    <p>
     <img alt="" height="507" src="https://i-blog.csdnimg.cn/direct/ad20b9fb0698492bbcb43916662987a1.png" width="1033"/>
    </p>
    <p>
     <img alt="" height="633" src="https://i-blog.csdnimg.cn/direct/6ba7701398f949edbdf73dc83f379456.png" width="1042"/>
    </p>
    <p>
     运行结果：
    </p>
    <p>
     <img alt="" height="659" src="https://i-blog.csdnimg.cn/direct/c2e9541b0da04b019d48c6e6462ffc07.png" width="1766"/>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f:672e6373646e2e6e65742f323330315f38303934353131332f:61727469636c652f64657461696c732f313436323833333331" class_="artid" style="display:none">
 </p>
</div>


