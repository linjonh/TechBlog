---
layout: post
title: "一文了解,从RS485传感器到物联网关到云平台过程"
date: 2025-02-16 19:39:40 +0800
description: "用Modbusslave模拟各种传感器，钡铼工业网关BL110通过ModbusRTU"
keywords: "传感器数据传到云平台的全过程包括"
categories: ['未分类']
tags: ['边缘计算', '网络', '物联网', '嵌入式硬件', 'Iot']
artid: "125966048"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=125966048
    alt: "一文了解,从RS485传感器到物联网关到云平台过程"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=125966048
featuredImagePreview: https://bing.ee123.net/img/rand?artid=125966048
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     一文了解，从RS485传感器到物联网关到云平台过程
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <h2 style="margin-left:0pt;text-align:left;">
     <span style="color:#000000;">
      <strong>
       <strong>
        <span style="color:#000000;">
         <strong>
          一、概述
         </strong>
        </span>
       </strong>
      </strong>
     </span>
    </h2>
    <p style="margin-left:0pt;text-align:left;">
     <span style="color:#000000;">
      工业现场有需要设备支持RS485通信，可以采集各种PLC、流量计、温湿度、液位等。应用特别广泛，这里尽量以更简单的方式，让大家了解整个数据采集过程，更详细可以阅读相关说明书。
     </span>
    </p>
    <p style="margin-left:0pt;text-align:left;">
     <span style="color:#000000;">
      钡铼技术：专注工业物联网关，可以采集世面上绝大数据标准仪表、PLC、楼宇设备等，其这里选型是其BL110多功能协议物联网关。
     </span>
    </p>
    <p style="margin-left:0pt;text-align:left;">
     <span style="color:#000000;">
      ThingsPanel：开源物联网平台，免费、快速部署
     </span>
    </p>
    <h3 style="margin-left:0pt;text-align:left;">
     <span style="color:#000000;">
      <strong>
       <strong>
        <span style="color:#000000;">
         <strong>
          二、实现功能
         </strong>
        </span>
       </strong>
      </strong>
     </span>
    </h3>
    <h4 style="margin-left:0pt;text-align:left;">
     <span style="color:#000000;">
      <strong>
       <strong>
        <span style="color:#000000;">
         <strong>
          A、采集
         </strong>
        </span>
       </strong>
      </strong>
     </span>
    </h4>
    <p style="margin-left:0pt;text-align:left;">
     <span style="color:#000000;">
      数值类型：温度、湿度
     </span>
    </p>
    <p style="margin-left:0pt;text-align:left;">
     <span style="color:#000000;">
      开关量类型：停电报警器状态、烟感状态
     </span>
    </p>
    <h4 style="margin-left:0pt;text-align:left;">
     <span style="color:#000000;">
      <strong>
       <strong>
        <span style="color:#000000;">
         <strong>
          B、控制
         </strong>
        </span>
       </strong>
      </strong>
     </span>
    </h4>
    <p style="margin-left:0pt;text-align:left;">
     <span style="color:#000000;">
      开关类型：水泵开关、风机启停
     </span>
    </p>
    <p style="margin-left:0pt;text-align:left;">
     <span style="color:#000000;">
      控制数值类型：变频器频率、大棚卷帘开合度
     </span>
    </p>
    <h3 style="margin-left:0pt;text-align:left;">
     <span style="color:#000000;">
      <strong>
       <strong>
        <span style="color:#000000;">
         <strong>
          三、方案概述
         </strong>
        </span>
       </strong>
      </strong>
     </span>
    </h3>
    <p style="margin-left:0pt;text-align:left;">
     <span style="color:#000000;">
      用Modbus slave模拟各种传感器，钡铼工业网关BL110通过Modbus RTU采集、控制各种仪表/设备，并通过4G、以太网方式上网，MQTT协议对接开源物联网云平台ThingsPanel。如下图：
     </span>
    </p>
    <p style="margin-left:0pt;text-align:left;">
     <img alt="" height="275" src="https://i-blog.csdnimg.cn/blog_migrate/11e96cc937699f2003d8d2786badf5d8.png" width="614"/>
    </p>
    <p>
    </p>
    <p style="margin-left:0pt;text-align:left;">
    </p>
    <h4 style="margin-left:0pt;text-align:left;">
     <span style="color:#000000;">
      <strong>
       <strong>
        <span style="color:#000000;">
         <strong>
          传感器数据点参数
         </strong>
        </span>
       </strong>
      </strong>
     </span>
    </h4>
    <table border="1" cellspacing="0" style="margin-left:9.4pt;">
     <tbody>
      <tr>
       <td style="width:51.8pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="u0ef1ecb7">
          </a>
          序号
         </span>
        </p>
       </td>
       <td style="width:77.2pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="uad358b93">
          </a>
          变量名称
         </span>
        </p>
       </td>
       <td style="width:48.5pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="u571b76fa">
          </a>
          设备地址
         </span>
        </p>
       </td>
       <td style="width:173.25pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="u8bb14c38">
          </a>
          功能码
         </span>
        </p>
       </td>
       <td style="width:61.05pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="u66bfb261">
          </a>
          寄存器地址
         </span>
        </p>
       </td>
       <td style="width:79.85pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="ub7688cf9">
          </a>
          数据类型
         </span>
        </p>
       </td>
       <td style="width:190.05pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="u92606065">
          </a>
          变量标签
         </span>
         <span style="color:#000000;">
          (MQTT标识符名称，自定义)
         </span>
        </p>
       </td>
      </tr>
      <tr>
       <td style="width:51.8pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="u5992cba7">
           1
          </a>
         </span>
        </p>
       </td>
       <td style="width:77.2pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="u311225c2">
          </a>
          温度
         </span>
        </p>
       </td>
       <td style="width:48.5pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="ub901569b">
          </a>
          1
         </span>
        </p>
       </td>
       <td style="width:173.25pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="u1b3057f6">
          </a>
          04 Input Registers(3x)
         </span>
        </p>
       </td>
       <td style="width:61.05pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="ue094533c">
          </a>
          0
         </span>
        </p>
       </td>
       <td style="width:79.85pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="u52d9a5d5">
          </a>
          uint16
         </span>
        </p>
       </td>
       <td style="width:190.05pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="u9c8a2e50">
          </a>
          temperature
         </span>
        </p>
       </td>
      </tr>
      <tr>
       <td style="width:51.8pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="u760c5de1">
           2
          </a>
         </span>
        </p>
       </td>
       <td style="width:77.2pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="uad657996">
          </a>
          湿度
         </span>
        </p>
       </td>
       <td style="width:48.5pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="u80c5c329">
          </a>
          1
         </span>
        </p>
       </td>
       <td style="width:173.25pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="u62507355">
          </a>
          04 Input Registers(3x)
         </span>
        </p>
       </td>
       <td style="width:61.05pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="ud897797a">
          </a>
          1
         </span>
        </p>
       </td>
       <td style="width:79.85pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="u7b6d95fb">
          </a>
          uint16
         </span>
        </p>
       </td>
       <td style="width:190.05pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="u8b936cbd">
          </a>
          humidity
         </span>
        </p>
       </td>
      </tr>
      <tr>
       <td style="width:51.8pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="ud7d45932">
           3
          </a>
         </span>
        </p>
       </td>
       <td style="width:77.2pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="u049e8b2a">
          </a>
          停电报警
         </span>
        </p>
       </td>
       <td style="width:48.5pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="ua7e5b5e6">
          </a>
          1
         </span>
        </p>
       </td>
       <td style="width:173.25pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="ub0a22f5c">
          </a>
          02 Input Status(1x)
         </span>
        </p>
       </td>
       <td style="width:61.05pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="u981ea609">
          </a>
          0
         </span>
        </p>
       </td>
       <td style="width:79.85pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="ub1d93108">
          </a>
          bool
         </span>
        </p>
       </td>
       <td style="width:190.05pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="u8efd7739">
          </a>
          powerfailure
         </span>
        </p>
       </td>
      </tr>
      <tr>
       <td style="width:51.8pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="u6130cb9e">
           4
          </a>
         </span>
        </p>
       </td>
       <td style="width:77.2pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="u57379128">
          </a>
          烟感报警
         </span>
        </p>
       </td>
       <td style="width:48.5pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="uc60ff4f4">
          </a>
          1
         </span>
        </p>
       </td>
       <td style="width:173.25pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="ue29767b0">
          </a>
          02 Input Status(1x)
         </span>
        </p>
       </td>
       <td style="width:61.05pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="u680c6a14">
          </a>
          1
         </span>
        </p>
       </td>
       <td style="width:79.85pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="u0b123481">
          </a>
          bool
         </span>
        </p>
       </td>
       <td style="width:190.05pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="ua7f0d373">
          </a>
          smoke
         </span>
        </p>
       </td>
      </tr>
      <tr>
       <td style="width:51.8pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="u632822b5">
           5
          </a>
         </span>
        </p>
       </td>
       <td style="width:77.2pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="u5cecbaff">
          </a>
          水泵开关
         </span>
        </p>
       </td>
       <td style="width:48.5pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="u376787c1">
          </a>
          1
         </span>
        </p>
       </td>
       <td style="width:173.25pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="u09f628e3">
          </a>
          01 Coil Status(0x)
         </span>
        </p>
       </td>
       <td style="width:61.05pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="u3bbd5af0">
          </a>
          0
         </span>
        </p>
       </td>
       <td style="width:79.85pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="u0cfd3b07">
          </a>
          bool
         </span>
        </p>
       </td>
       <td style="width:190.05pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="ub5d2522b">
          </a>
          waterpump
         </span>
        </p>
       </td>
      </tr>
      <tr>
       <td style="width:51.8pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="u4d7e037c">
           6
          </a>
         </span>
        </p>
       </td>
       <td style="width:77.2pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="u1ed2becc">
          </a>
          风机启停
         </span>
        </p>
       </td>
       <td style="width:48.5pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="u4e907b42">
          </a>
          1
         </span>
        </p>
       </td>
       <td style="width:173.25pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="uae0b5b83">
          </a>
          01 Coil Status(0x)
         </span>
        </p>
       </td>
       <td style="width:61.05pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="u4b5561d4">
          </a>
          1
         </span>
        </p>
       </td>
       <td style="width:79.85pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="u36f40825">
          </a>
          bool
         </span>
        </p>
       </td>
       <td style="width:190.05pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="u7f331cea">
          </a>
          fan
         </span>
        </p>
       </td>
      </tr>
      <tr>
       <td style="width:51.8pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="u8aa23d48">
           7
          </a>
         </span>
        </p>
       </td>
       <td style="width:77.2pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="u5ecad580">
          </a>
          变频器频率
         </span>
        </p>
       </td>
       <td style="width:48.5pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="ubdb7fbfa">
          </a>
          1
         </span>
        </p>
       </td>
       <td style="width:173.25pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="u1ad40aaa">
          </a>
          03 Holding Register(4x)
         </span>
        </p>
       </td>
       <td style="width:61.05pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="udaabcaea">
          </a>
          0
         </span>
        </p>
       </td>
       <td style="width:79.85pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="u46bbf917">
          </a>
          uint16
         </span>
        </p>
       </td>
       <td style="width:190.05pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="u2195546f">
          </a>
          frequency
         </span>
        </p>
       </td>
      </tr>
      <tr>
       <td style="width:51.8pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="ub538d32a">
           8
          </a>
         </span>
        </p>
       </td>
       <td style="width:77.2pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="udac7836a">
          </a>
          大棚卷帘
         </span>
        </p>
       </td>
       <td style="width:48.5pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="ua77b097d">
          </a>
          1
         </span>
        </p>
       </td>
       <td style="width:173.25pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="ucdd4765a">
          </a>
          03 Holding Register(4x)
         </span>
        </p>
       </td>
       <td style="width:61.05pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="ud4f78b4f">
          </a>
          1
         </span>
        </p>
       </td>
       <td style="width:79.85pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="ucf3f83f1">
          </a>
          uint16
         </span>
        </p>
       </td>
       <td style="width:190.05pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="uf61ec799">
          </a>
          rollershutter
         </span>
        </p>
       </td>
      </tr>
     </tbody>
    </table>
    <h3 style="margin-left:0pt;text-align:left;">
     <span style="color:#000000;">
      <strong>
       <strong>
        <span style="color:#000000;">
         <strong>
          四、设置Modbus slave（模拟传感器）
         </strong>
        </span>
       </strong>
      </strong>
     </span>
    </h3>
    <p style="margin-left:0pt;text-align:left;">
     <span style="color:#000000;">
      电脑安装Modbus slave，并根据前面“传感器数据点参数”，设置Modbus slave，模拟各种类型传感器。如下图：
     </span>
    </p>
    <p style="margin-left:0pt;text-align:left;">
     <span style="color:#000000;">
      Connection：选择"SerialPort"
     </span>
    </p>
    <p style="margin-left:0pt;text-align:left;">
     <span style="color:#000000;">
      Serial Settings：根据实际选择
     </span>
    </p>
    <p style="margin-left:0pt;text-align:left;">
     <span style="color:#000000;">
      Mode：选择“RTU”（这里采集的RS485设备，是标准Modbus RTU协议）
     </span>
    </p>
    <p style="margin-left:0pt;text-align:left;">
     <strong>
      <span style="color:#000000;">
       串口参数
      </span>
     </strong>
    </p>
    <p style="margin-left:0pt;text-align:left;">
     <span style="color:#000000;">
      注意：Modbus slave（模拟传感器）串口参数 需要和工业智能网关BL110串口参数一致
     </span>
    </p>
    <p style="margin-left:0pt;text-align:left;">
     <span style="color:#000000;">
      这里设置如下：
     </span>
    </p>
    <table border="1" cellspacing="0" style="margin-left:9.4pt;">
     <tbody>
      <tr>
       <td style="width:340.85pt;">
        <p style="margin-left:0pt;text-align:left;">
         <strong>
          <span style="color:#000000;">
           <a name="uc89ead6b">
           </a>
           项目
          </span>
         </strong>
        </p>
       </td>
       <td style="width:340.85pt;">
        <p style="margin-left:0pt;text-align:left;">
         <strong>
          <span style="color:#000000;">
           <a name="ubb1a5041">
           </a>
           参数
          </span>
         </strong>
        </p>
       </td>
      </tr>
      <tr>
       <td style="width:340.85pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="ub03bd608">
           波特率
          </a>
         </span>
        </p>
       </td>
       <td style="width:340.85pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="ua0f868a1">
          </a>
          9600
         </span>
        </p>
       </td>
      </tr>
      <tr>
       <td style="width:340.85pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="u550020e1">
           数据位
          </a>
         </span>
        </p>
       </td>
       <td style="width:340.85pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="u2bef2a63">
          </a>
          8
         </span>
        </p>
       </td>
      </tr>
      <tr>
       <td style="width:340.85pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="u82329911">
           停止位
          </a>
         </span>
        </p>
       </td>
       <td style="width:340.85pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="u38e9608d">
          </a>
          1
         </span>
        </p>
       </td>
      </tr>
      <tr>
       <td style="width:340.85pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="u4289d1e1">
           校验码
          </a>
         </span>
        </p>
       </td>
       <td style="width:340.85pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="u86bb0213">
          </a>
          None
         </span>
        </p>
       </td>
      </tr>
     </tbody>
    </table>
    <p style="margin-left:0pt;text-align:left;">
    </p>
    <p style="margin-left:0pt;text-align:left;">
    </p>
    <h3 style="margin-left:0pt;text-align:left;">
     <img alt="" height="283" src="https://i-blog.csdnimg.cn/blog_migrate/50d206424fd4fb10ea401fcea1624efa.png" width="614"/>
    </h3>
    <p>
     <img alt="" height="284" src="https://i-blog.csdnimg.cn/blog_migrate/c4b57794a7c8ef3e79ab27bcfcf221fb.png" width="614">
     </img>
    </p>
    <p>
    </p>
    <h3 style="margin-left:0pt;text-align:left;">
     <span style="color:#000000;">
      <strong>
       <strong>
        <span style="color:#000000;">
         <strong>
          五、工业网关BL110配置参数
         </strong>
        </span>
       </strong>
      </strong>
     </span>
    </h3>
    <h4 style="margin-left:0pt;text-align:left;">
     <span style="color:#000000;">
      <strong>
       <strong>
        <span style="color:#000000;">
         <strong>
          1、接线
         </strong>
        </span>
       </strong>
      </strong>
     </span>
    </h4>
    <p style="margin-left:0pt;text-align:left;">
     <span style="color:#000000;">
      ①接电源（支持宽电压：9-36v）
     </span>
    </p>
    <p style="margin-left:0pt;text-align:left;">
     <span style="color:#000000;">
      ②WAN口网线接入局域网（可自动分配ip，其他网络环境参考说明书）
     </span>
    </p>
    <p style="margin-left:0pt;text-align:left;">
     <span style="color:#000000;">
      ③RS485接COM2，A接A，B接B
     </span>
    </p>
    <p style="margin-left:0pt;text-align:left;">
     <img alt="" height="632" src="https://i-blog.csdnimg.cn/blog_migrate/38ca30ace0fc6102ba3eb2ccdd085979.png" width="470"/>
    </p>
    <p>
    </p>
    <p style="margin-left:0pt;text-align:left;">
    </p>
    <h4 style="margin-left:0pt;text-align:left;">
     <span style="color:#000000;">
      <strong>
       <strong>
        <span style="color:#000000;">
         <strong>
          2、登录配置软件
         </strong>
        </span>
       </strong>
      </strong>
     </span>
    </h4>
    <p style="margin-left:0pt;text-align:left;">
     <span style="color:#000000;">
      打开配置软件→点击“设备搜索”→双击“IP地址”→输入密码，默认123456
     </span>
    </p>
    <p style="margin-left:0pt;text-align:left;">
     <span style="color:#000000;">
      注意：设备开机约30s左右可搜索到ip
     </span>
    </p>
    <p style="margin-left:0pt;text-align:left;">
     <img alt="" height="351" src="https://i-blog.csdnimg.cn/blog_migrate/36c5d028200507861d70efd70d96084b.png" width="614"/>
    </p>
    <p>
     <img alt="" height="351" src="https://i-blog.csdnimg.cn/blog_migrate/47363d004be0c8b10cc8b0360d227279.png" width="614"/>
    </p>
    <p style="margin-left:0pt;text-align:left;">
    </p>
    <p style="margin-left:0pt;text-align:left;">
    </p>
    <h4 style="margin-left:0pt;text-align:left;">
     <span style="color:#000000;">
      <strong>
       <strong>
        <span style="color:#000000;">
         <strong>
          3、设置串口参数
         </strong>
        </span>
       </strong>
      </strong>
     </span>
    </h4>
    <p style="margin-left:0pt;text-align:left;">
     <span style="color:#000000;">
      双击COM2，设置串口参数
     </span>
    </p>
    <p style="margin-left:0pt;text-align:left;">
     <span style="color:#000000;">
      注意：这里串口参数和前面设置Modbus slave（模拟传感器）参数一致
     </span>
    </p>
    <p style="margin-left:0pt;text-align:left;">
     <span style="color:#000000;">
      模式选择：采集
     </span>
    </p>
    <p style="margin-left:0pt;text-align:left;">
     <span style="color:#000000;">
      设备品牌：Modbus设备型号：Modbus_RTU
     </span>
    </p>
    <p style="margin-left:0pt;text-align:left;">
     <strong>
      <span style="color:#000000;">
       串口参数
      </span>
     </strong>
    </p>
    <table border="1" cellspacing="0" style="margin-left:9.4pt;">
     <tbody>
      <tr>
       <td style="width:340.85pt;">
        <p style="margin-left:0pt;text-align:left;">
         <strong>
          <span style="color:#000000;">
           <a name="u4a8f7946">
           </a>
           项目
          </span>
         </strong>
        </p>
       </td>
       <td style="width:340.85pt;">
        <p style="margin-left:0pt;text-align:left;">
         <strong>
          <span style="color:#000000;">
           <a name="u70eedfa4">
           </a>
           参数
          </span>
         </strong>
        </p>
       </td>
      </tr>
      <tr>
       <td style="width:340.85pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="udd185fe9">
           波特率
          </a>
         </span>
        </p>
       </td>
       <td style="width:340.85pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="uc62a5ce9">
          </a>
          9600
         </span>
        </p>
       </td>
      </tr>
      <tr>
       <td style="width:340.85pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="u040ec76a">
           数据位
          </a>
         </span>
        </p>
       </td>
       <td style="width:340.85pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="u3dd8a939">
          </a>
          8
         </span>
        </p>
       </td>
      </tr>
      <tr>
       <td style="width:340.85pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="u0d61ce5f">
           停止位
          </a>
         </span>
        </p>
       </td>
       <td style="width:340.85pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="uae42de42">
          </a>
          1
         </span>
        </p>
       </td>
      </tr>
      <tr>
       <td style="width:340.85pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="u59d20c2e">
           校验码
          </a>
         </span>
        </p>
       </td>
       <td style="width:340.85pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="u3aa00ca9">
          </a>
          None
         </span>
        </p>
       </td>
      </tr>
     </tbody>
    </table>
    <p style="margin-left:0pt;text-align:left;">
    </p>
    <h4 style="margin-left:0pt;text-align:left;">
     <img alt="" height="351" src="https://i-blog.csdnimg.cn/blog_migrate/26baad81fca9b927b0bb670ae94974f1.png" width="614"/>
    </h4>
    <p>
    </p>
    <h4 style="margin-left:0pt;text-align:left;">
     <span style="color:#000000;">
      <strong>
       <strong>
        <span style="color:#000000;">
         <strong>
          4、设置传感器地址
         </strong>
        </span>
       </strong>
      </strong>
     </span>
    </h4>
    <table border="1" cellspacing="0" style="margin-left:9.4pt;">
     <tbody>
      <tr>
       <td style="width:135.85pt;">
        <p style="margin-left:0pt;text-align:left;">
         <strong>
          <span style="color:#000000;">
           <a name="u019b3bff">
           </a>
           项目
          </span>
         </strong>
        </p>
       </td>
       <td>
        <p style="margin-left:0pt;text-align:left;">
         <strong>
          <span style="color:#000000;">
           <a name="u8a94c7af">
           </a>
           内容
          </span>
         </strong>
        </p>
       </td>
      </tr>
      <tr>
       <td style="width:135.85pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="u889f6e55">
           设备名称
          </a>
         </span>
        </p>
       </td>
       <td>
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="u7d1c60d9">
          </a>
          自定义
         </span>
        </p>
       </td>
      </tr>
      <tr>
       <td style="width:135.85pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="u54eec8e8">
           从站ID
          </a>
         </span>
        </p>
       </td>
       <td>
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="u8a061892">
          </a>
          即Modbus中数据点的“设备地址”，这里是：1
         </span>
        </p>
       </td>
      </tr>
      <tr>
       <td style="width:135.85pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="u1822681d">
           其他
          </a>
         </span>
        </p>
       </td>
       <td>
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="u6d589dff">
          </a>
          根据实际情况填写
         </span>
        </p>
       </td>
      </tr>
     </tbody>
    </table>
    <p style="margin-left:0pt;text-align:left;">
    </p>
    <h4 style="margin-left:0pt;text-align:left;">
     <img alt="" height="351" src="https://i-blog.csdnimg.cn/blog_migrate/27edef65f2d51d2c2bce18e6cf7eaef4.png" width="614"/>
    </h4>
    <p>
    </p>
    <h4 style="margin-left:0pt;text-align:left;">
     <span style="color:#000000;">
      <strong>
       <strong>
        <span style="color:#000000;">
         <strong>
          5、添加设备数据点参数
         </strong>
        </span>
       </strong>
      </strong>
     </span>
    </h4>
    <table border="1" cellspacing="0" style="margin-left:9.4pt;">
     <tbody>
      <tr>
       <td style="width:46.85pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="u2805bd5e">
          </a>
          序号
         </span>
        </p>
       </td>
       <td style="width:68.15pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="uf70e79d9">
          </a>
          变量名称
         </span>
        </p>
       </td>
       <td style="width:43.95pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="ue62b3a84">
          </a>
          设备地址
         </span>
        </p>
       </td>
       <td style="width:163.05pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="ubcaf7e36">
          </a>
          功能码
         </span>
        </p>
       </td>
       <td style="width:54.95pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="uef85d1e7">
          </a>
          寄存器地址
         </span>
        </p>
       </td>
       <td style="width:75.5pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="u070ad093">
          </a>
          数据类型
         </span>
        </p>
       </td>
       <td style="width:229.25pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="uf25da6d1">
          </a>
          变量标签(MQTT标识符名称，自定义)
         </span>
        </p>
       </td>
      </tr>
      <tr>
       <td style="width:46.85pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="u14b3c974">
           1
          </a>
         </span>
        </p>
       </td>
       <td style="width:68.15pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="ue8c1e325">
          </a>
          温度
         </span>
        </p>
       </td>
       <td style="width:43.95pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="u1fb2e703">
          </a>
          1
         </span>
        </p>
       </td>
       <td style="width:163.05pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="uee045c8c">
          </a>
          04 Input Registers(3x)
         </span>
        </p>
       </td>
       <td style="width:54.95pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="ua6c85054">
          </a>
          0
         </span>
        </p>
       </td>
       <td style="width:75.5pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="u43f35118">
          </a>
          uint16
         </span>
        </p>
       </td>
       <td style="width:229.25pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="u7ac367f8">
          </a>
          temperature
         </span>
        </p>
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     <span style="color:#000000;">
      <strong>
       <strong>
        <span style="color:#000000;">
         <strong>
          添加“温度”数据点为例：
         </strong>
        </span>
       </strong>
      </strong>
     </span>
    </p>
    <table border="1" cellspacing="0" style="margin-left:9.4pt;">
     <tbody>
      <tr>
       <td style="width:198.05pt;">
        <p style="margin-left:0pt;text-align:left;">
         <strong>
          <span style="color:#000000;">
           <a name="ucf28ed1c">
           </a>
           项目
          </span>
         </strong>
        </p>
       </td>
       <td style="width:483.65pt;">
        <p style="margin-left:0pt;text-align:left;">
         <strong>
          <span style="color:#000000;">
           <a name="udb1b96a6">
           </a>
           内容
          </span>
         </strong>
        </p>
       </td>
      </tr>
      <tr>
       <td style="width:198.05pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="ue0859f91">
           变量名称
          </a>
         </span>
        </p>
       </td>
       <td style="width:483.65pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="ue8b1f8ee">
          </a>
          有自动生成，也可自定义。这里演示设置“温度”
         </span>
        </p>
       </td>
      </tr>
      <tr>
       <td style="width:198.05pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="u1ac36026">
           变量标签
          </a>
         </span>
        </p>
       </td>
       <td style="width:483.65pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="uddcec32e">
          </a>
          MQTT标识符名称，有自动生成，也可自定义。这里演示设置“temperature”
         </span>
        </p>
       </td>
      </tr>
      <tr>
       <td style="width:198.05pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="ue7b33f65">
           地址类型
          </a>
         </span>
        </p>
       </td>
       <td style="width:483.65pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="u67847cd8">
          </a>
          Modbus数据点对应功能码。温度功能码是“04 Input Registers(3x)”
         </span>
        </p>
       </td>
      </tr>
      <tr>
       <td style="width:198.05pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="ud284b801">
           数据类型
          </a>
         </span>
        </p>
       </td>
       <td style="width:483.65pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="u47787a72">
          </a>
          根据实际选择。温度是“uint16”
         </span>
        </p>
       </td>
      </tr>
      <tr>
       <td style="width:198.05pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="u38a67e40">
           读写类型
          </a>
         </span>
        </p>
       </td>
       <td style="width:483.65pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="ue876a9f2">
          </a>
          根据实际选择。温度是“只读”
         </span>
        </p>
       </td>
      </tr>
      <tr>
       <td style="width:198.05pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="uacd63f55">
           地址
          </a>
         </span>
        </p>
       </td>
       <td style="width:483.65pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="u520fc270">
          </a>
          即寄存器地址。根据“传感器数据点参数”规定，温度寄存器地址是：0
         </span>
        </p>
       </td>
      </tr>
      <tr>
       <td style="width:198.05pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="u0d484795">
           添加数量
          </a>
         </span>
        </p>
       </td>
       <td style="width:483.65pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="u5b09370f">
          </a>
          这里是1，其他类型根据实际情况选择
         </span>
        </p>
       </td>
      </tr>
     </tbody>
    </table>
    <p style="margin-left:0pt;text-align:left;">
    </p>
    <p>
     <img alt="" height="351" src="https://i-blog.csdnimg.cn/blog_migrate/d64121d4ff490a6105fe77de06fba251.png" width="614"/>
    </p>
    <p>
    </p>
    <p>
     <span style="color:#000000;">
      <strong>
       <strong>
        <span style="color:#000000;">
         <strong>
          添加其他数据，并保存
         </strong>
        </span>
       </strong>
      </strong>
     </span>
    </p>
    <p style="margin-left:0pt;text-align:left;">
     <span style="color:#000000;">
      其他数据点以此类推，然后点“写入配置”，然后重新进入
     </span>
    </p>
    <p style="margin-left:0pt;text-align:left;">
    </p>
    <p style="margin-left:0pt;text-align:left;">
     <img alt="" height="351" src="https://i-blog.csdnimg.cn/blog_migrate/1de71db2a8c71a2990ca76ec25cee5a3.png" width="614"/>
    </p>
    <p>
    </p>
    <p style="margin-left:0pt;text-align:left;">
     <span style="color:#000000;">
      保存后，设备会自动重启，重新登录配置软件
     </span>
    </p>
    <p style="margin-left:0pt;text-align:left;">
     <span style="color:#000000;">
      注意：设备开机约30s左右可搜索到ip
     </span>
    </p>
    <p style="margin-left:0pt;text-align:left;">
     <img alt="" height="351" src="https://i-blog.csdnimg.cn/blog_migrate/5afed3f0d34e534777570592fa95a3c1.png" width="614"/>
    </p>
    <p>
    </p>
    <h4 style="margin-left:0pt;text-align:left;">
    </h4>
    <h4 style="margin-left:0pt;text-align:left;">
     <span style="color:#000000;">
      <strong>
       <strong>
        <span style="color:#000000;">
         <strong>
          6、查看网关和传感器通信
         </strong>
        </span>
       </strong>
      </strong>
     </span>
    </h4>
    <p style="margin-left:0pt;text-align:left;">
     <span style="color:#000000;">
      点击型号，查看基本信息。如下图查看右侧“COM2”，钡铼网关是和Modbus slave（模拟传感器）通信上，“绿色”代表通讯上。
     </span>
    </p>
    <p style="margin-left:0pt;text-align:left;">
     <img alt="" height="351" src="https://i-blog.csdnimg.cn/blog_migrate/339227aa48e7b7c05fcf74ea940a1e05.png" width="614"/>
    </p>
    <p>
    </p>
    <p style="margin-left:0pt;text-align:left;">
    </p>
    <h4 style="margin-left:0pt;text-align:left;">
     <span style="color:#000000;">
      <strong>
       <strong>
        <span style="color:#000000;">
         <strong>
          7、工业网关查看传感器数据
         </strong>
        </span>
       </strong>
      </strong>
     </span>
    </h4>
    <p style="margin-left:0pt;text-align:left;">
     <span style="color:#000000;">
      点击“监视”，即可查看到，工业网关BL110采集到传感器当前数值。如下图，已经采集到了。跟Modbus slave的一致。
     </span>
    </p>
    <p style="margin-left:0pt;text-align:left;">
     <span style="color:#000000;">
      如果没有采集到数据，请检查一下相关参数是否设置有误和当前网络环境是否正常。
     </span>
    </p>
    <p style="margin-left:0pt;text-align:left;">
     <img alt="" height="284" src="https://i-blog.csdnimg.cn/blog_migrate/034853ca1b0a3f1dd6f93c49839a5e40.png" width="614"/>
    </p>
    <p>
     <img alt="" height="351" src="https://i-blog.csdnimg.cn/blog_migrate/f99094127c7cc6ec9cadb661bb90a08c.png" width="614"/>
    </p>
    <p>
     <img alt="" height="351" src="https://i-blog.csdnimg.cn/blog_migrate/fda2395b75310d5f3568de743f3f0815.png" width="614"/>
    </p>
    <p>
     <span style="color:#000000;">
      <strong>
       <strong>
        <span style="color:#000000;">
         <strong>
          8、对接开源物联网云平台ThingsPanel
         </strong>
        </span>
       </strong>
      </strong>
     </span>
    </p>
    <p>
     <span style="color:#000000;">
      对接ThingsPanel平台是通过MQTT协议，设置如下：
     </span>
    </p>
    <table border="1" cellspacing="0" style="margin-left:9.4pt;">
     <tbody>
      <tr>
       <td style="width:87.7pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="ue0feb8f0">
          </a>
          项目
         </span>
        </p>
       </td>
       <td>
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="uae002d7d">
          </a>
          内容
         </span>
        </p>
       </td>
      </tr>
      <tr>
       <td style="width:87.7pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="ub7a29d6a">
           IP/域名
          </a>
         </span>
        </p>
       </td>
       <td>
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="u88b477ed">
          </a>
          根据实际填写。这里演示填：39.98.176.26
         </span>
        </p>
       </td>
      </tr>
      <tr>
       <td style="width:87.7pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="uaf32b5fd">
           端口
          </a>
         </span>
        </p>
       </td>
       <td>
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="ua318b2f8">
          </a>
          根据实际填写。这里演示填：1000
         </span>
        </p>
       </td>
      </tr>
      <tr>
       <td style="width:87.7pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="uaaa735b1">
           Client ID
          </a>
         </span>
        </p>
       </td>
       <td>
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="u1b9cb2e4">
          </a>
          根据实际填写。
         </span>
        </p>
       </td>
      </tr>
      <tr>
       <td style="width:87.7pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="ud28cb5ac">
           用户名
          </a>
         </span>
        </p>
       </td>
       <td>
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="u0124d3f7">
          </a>
          根据实际填写。
         </span>
        </p>
       </td>
      </tr>
      <tr>
       <td style="width:87.7pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="u64176428">
           密码
          </a>
         </span>
        </p>
       </td>
       <td>
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="u8f807c18">
          </a>
          根据实际填写。
         </span>
        </p>
       </td>
      </tr>
      <tr>
       <td style="width:87.7pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="u3269a101">
           数据模板
          </a>
         </span>
        </p>
       </td>
       <td>
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="u0410d00f">
          </a>
          选择”KingPigeon“
         </span>
        </p>
       </td>
      </tr>
      <tr>
       <td style="width:87.7pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="udde1ba35">
           订阅主题
          </a>
         </span>
        </p>
       </td>
       <td>
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="uf9dfec79">
          </a>
          ①“云平台ThingsPanel”控制传感器（开关类型：水泵开关、风机启停；数值类型：变频器频率、大棚卷帘开合度）；
         </span>
        </p>
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="u152268af">
          </a>
          ②那么物联网关BL110则填写订阅主题为：“bl110/001down”，用于接收“云平台ThingsPanel”控制指令。类似你关注某明星微博，他发布消息，就会给您推送。
         </span>
        </p>
       </td>
      </tr>
      <tr>
       <td style="width:87.7pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="ucd5a1ecd">
           发布主题
          </a>
         </span>
        </p>
       </td>
       <td>
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="ud1aac6d7">
          </a>
          ①“云平台ThingsPanel”需要接收钡铼工业网关BL110采集到传感器的数据，设置订阅主题“bl110/001”；
         </span>
        </p>
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="uffc4999e">
          </a>
          ②那么工业网关BL110则填写发布主题为：“bl110/001”
         </span>
        </p>
       </td>
      </tr>
      <tr>
       <td style="width:87.7pt;">
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="u0c3735fc">
           上传周期
          </a>
         </span>
        </p>
       </td>
       <td>
        <p style="margin-left:0pt;text-align:left;">
         <span style="color:#000000;">
          <a name="ufe49f766">
          </a>
          根据实际填写。最快1s。
         </span>
        </p>
       </td>
      </tr>
     </tbody>
    </table>
    <p style="margin-left:0pt;text-align:left;">
    </p>
    <p style="margin-left:0pt;text-align:left;">
     <img alt="" height="351" src="https://i-blog.csdnimg.cn/blog_migrate/6baba56bcb182073b0b70361f4031f27.png" width="614"/>
    </p>
    <p>
    </p>
    <p style="margin-left:0pt;text-align:left;">
     <span style="color:#000000;">
      前面“写入配置”后，点击型号，可以看到“MQTT Client”和“COM2”在线状态都变成了绿色，即BL110网关对接云平台和传感器都是通信上了。
     </span>
    </p>
    <p style="margin-left:0pt;text-align:left;">
     <img alt="" height="351" src="https://i-blog.csdnimg.cn/blog_migrate/da0d2c8e6e40b8e1526761ee114791bb.png" width="614"/>
    </p>
    <p>
    </p>
    <p style="margin-left:0pt;text-align:left;">
    </p>
    <h4 style="margin-left:0pt;text-align:left;">
     <span style="color:#000000;">
      <strong>
       <strong>
        <span style="color:#000000;">
         <strong>
          9、BL110智能网关订阅、发布信息格式---KingPigeon模板
         </strong>
        </span>
       </strong>
      </strong>
     </span>
    </h4>
    <p>
     <span style="color:#000000;">
      <strong>
       <strong>
        <span style="color:#000000;">
         <strong>
          发布
         </strong>
        </span>
       </strong>
      </strong>
     </span>
    </p>
    <pre><code class="language-javascript">{
  "sensorDatas": [
    {
      "flag": "GPS",
      "lat": "0.000000",
      "lng": "0.000000"
    },
    {
      "flag": "signal_strength",
      "value": 0
    },
    {
      "flag": "temperature",
      "value": 30
    },
    {
      "flag": "humidity",
      "value": 68
    },
    {
      "flag": "powerfailure",
      "switcher": 1
    },
    {
      "flag": "smoke",
      "switcher": 0
    },
    {
      "flag": "waterpump",
      "switcher": 1
    },
    {
      "flag": "fan",
      "switcher": 0
    },
    {
      "flag": "frequency",
      "value": 33
    },
    {
      "flag": "rollershutter",
      "value": 55
    }
  ],
  "gateway_indentify": "BeiLai",
  "time": "1658216760",
  "addTime": "2022-07-19 07:46:00",
  "seq": "0.4405.0.0"
}</code></pre>
    <p style="margin-left:0pt;text-align:left;">
    </p>
    <p>
     <span style="color:#000000;">
      <strong>
       <strong>
        <span style="color:#000000;">
         <strong>
          订阅
         </strong>
        </span>
       </strong>
      </strong>
     </span>
    </p>
    <p style="margin-left:0pt;text-align:left;">
     <strong>
      <span style="color:#000000;">
       A、开关类型。用“switcher”，值
      </span>
     </strong>
    </p>
    <p style="margin-left:0pt;text-align:left;">
     <span style="color:#000000;">
      1表示开，true
     </span>
    </p>
    <p style="margin-left:0pt;text-align:left;">
     <span style="color:#000000;">
      0表示关。false
     </span>
    </p>
    <pre><code class="language-javascript">{
  "sensorDatas": [
    {
      "switcher": 0,
      "flag": "waterpump"
    }
  ],
  "down": "down"
}</code></pre>
    <p style="margin-left:0pt;text-align:left;">
     <strong>
      <span style="color:#000000;">
       B数值类型类型。用“
      </span>
     </strong>
     <span style="color:#000000;">
      value
     </span>
     <strong>
      <span style="color:#000000;">
       ”，值
      </span>
     </strong>
    </p>
    <p style="margin-left:0pt;text-align:left;">
     <span style="color:#000000;">
      注意：这个数值，需要加双引号
     </span>
    </p>
    <pre><code class="language-javascript">{
  "sensorDatas": [
    {
      "value": "998",
      "flag": "frequency"
    }
  ],
  "down": "down"
}</code></pre>
    <h3 style="margin-left:0pt;text-align:left;">
     <span style="color:#000000;">
      <strong>
       <strong>
        <span style="color:#000000;">
         <strong>
          六、用EMQX的客户端订阅、发布消息
         </strong>
        </span>
       </strong>
      </strong>
     </span>
    </h3>
    <h4 style="margin-left:0pt;text-align:left;">
     <span style="color:#000000;">
      <strong>
       <strong>
        <span style="color:#000000;">
         <strong>
          1、设置对接开源云平台ThingsPanel的MQTT参数
         </strong>
        </span>
       </strong>
      </strong>
     </span>
    </h4>
    <p style="margin-left:0pt;text-align:left;">
     <span style="color:#000000;">
      前面已经设置：工业智能网关BL110设置对接的开源云平台ThingsPanel（ip、端口、订阅主题、发布主题）
     </span>
    </p>
    <p style="margin-left:0pt;text-align:left;">
     <img alt="" height="351" src="https://i-blog.csdnimg.cn/blog_migrate/76616cc13dc55dde859b416675102ea4.png" width="614"/>
    </p>
    <p style="margin-left:0pt;text-align:left;">
    </p>
    <p style="margin-left:0pt;text-align:left;">
     <span style="color:#000000;">
      则EMQX的客户端也设置如下：
     </span>
    </p>
    <p style="margin-left:0pt;text-align:left;">
     <img alt="" height="340" src="https://i-blog.csdnimg.cn/blog_migrate/6497b480f37d107483b83a87bbd69096.png" width="614"/>
    </p>
    <p>
    </p>
    <p style="margin-left:0pt;text-align:left;">
    </p>
    <h4 style="margin-left:0pt;text-align:left;">
     <span style="color:#000000;">
      <strong>
       <strong>
        <span style="color:#000000;">
         <strong>
          2、订阅主题：
         </strong>
        </span>
       </strong>
      </strong>
     </span>
    </h4>
    <p style="margin-left:0pt;text-align:left;">
     <span style="color:#000000;">
      订阅物联网关BL110采集到传感器的数据
     </span>
    </p>
    <p style="margin-left:0pt;text-align:left;">
     <img alt="" height="340" src="https://i-blog.csdnimg.cn/blog_migrate/e43719b758f050a6bf9965da048082c0.png" width="614"/>
    </p>
    <p style="margin-left:0pt;text-align:left;">
    </p>
    <h4 style="margin-left:0pt;text-align:left;">
     <span style="color:#000000;">
      <strong>
       <strong>
        <span style="color:#000000;">
         <strong>
          3、发布主题：
         </strong>
        </span>
       </strong>
      </strong>
     </span>
    </h4>
    <p style="margin-left:0pt;text-align:left;">
     <span style="color:#000000;">
      控制水泵开
     </span>
    </p>
    <p style="margin-left:0pt;text-align:left;">
     <img alt="" height="338" src="https://i-blog.csdnimg.cn/blog_migrate/087729fc2e70c1da234f05ff27143e3b.png" width="614"/>
    </p>
    <p>
    </p>
    <p style="margin-left:0pt;text-align:left;">
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f34393531323835352f:61727469636c652f64657461696c732f313235393636303438" class_="artid" style="display:none">
 </p>
</div>


