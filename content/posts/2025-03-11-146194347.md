---
arturl_encode: "68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f34333933323838362f:61727469636c652f64657461696c732f313436313934333437"
layout: post
title: "React-ç»„ä»¶çš„æ–°æ—§ç”Ÿå‘½å‘¨æœŸ"
date: 2025-03-11 17:43:34 +08:00
description: "â¤React-ç»„ä»¶çš„æ–°æ—§ç”Ÿå‘½å‘¨æœŸ1ã€ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸæ¦‚è¿°.????ç”Ÿå‘½å‘¨æœŸå«ä¹‰ï¼šä»ç»„ä»¶å‡ºç”Ÿåˆ°æ›´æ–°ã€æ”¹å˜ã€é”€æ¯(åˆ›å»º\\æ›´æ–°\\é”€æ¯)çš„æ•´ä¸ªé˜¶æ®µã€‚????ç”Ÿå‘½å‘¨æœŸçš„é’©å­å‡½æ•°å«ä¹‰ï¼šç»„ä»¶çš„æ¯ä¸ªé˜¶æ®µéƒ½ä¼´éšç€ä¸€äº›æ–¹æ³•ï¼Œå°±æ˜¯ç”Ÿå‘½å‘¨æœŸçš„é’©å­å‡½æ•°,æˆ‘ä»¬å°±æ˜¯é€šè¿‡æ§åˆ¶è¿™äº›ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä»è€Œæ§åˆ¶ç»„ä»¶ã€‚????ç”Ÿå‘½å‘¨æœŸæ„ä¹‰ï¼šç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸæœ‰åŠ©äºç†è§£ç»„ä»¶çš„è¿è¡Œ..."
keywords: "â¤React-ç»„ä»¶çš„æ–°æ—§ç”Ÿå‘½å‘¨æœŸ"
categories: ['æœªåˆ†ç±»']
tags: ['å‰ç«¯æ¡†æ¶', 'å‰ç«¯', 'React', 'Javascript', 'Ecmascript']
artid: "146194347"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146194347
    alt: "React-ç»„ä»¶çš„æ–°æ—§ç”Ÿå‘½å‘¨æœŸ"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146194347
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146194347
cover: https://bing.ee123.net/img/rand?artid=146194347
image: https://bing.ee123.net/img/rand?artid=146194347
img: https://bing.ee123.net/img/rand?artid=146194347
---

# â¤React-ç»„ä»¶çš„æ–°æ—§ç”Ÿå‘½å‘¨æœŸ

### â¤React-ç»„ä»¶çš„æ–°æ—§ç”Ÿå‘½å‘¨æœŸ

#### 1ã€ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸæ¦‚è¿°.

##### ğŸ‘‰ `ç”Ÿå‘½å‘¨æœŸ` å«ä¹‰ï¼š

ä»ç»„ä»¶å‡ºç”Ÿåˆ°æ›´æ–°ã€æ”¹å˜ã€é”€æ¯(åˆ›å»º\æ›´æ–°\é”€æ¯)çš„æ•´ä¸ªé˜¶æ®µã€‚

##### ğŸ‘‰ `ç”Ÿå‘½å‘¨æœŸçš„é’©å­å‡½æ•°` å«ä¹‰ï¼š

ç»„ä»¶çš„æ¯ä¸ªé˜¶æ®µéƒ½ä¼´éšç€ä¸€äº›æ–¹æ³•ï¼Œå°±æ˜¯ç”Ÿå‘½å‘¨æœŸçš„é’©å­å‡½æ•°,æˆ‘ä»¬å°±æ˜¯é€šè¿‡æ§åˆ¶è¿™äº›ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä»è€Œæ§åˆ¶ç»„ä»¶ã€‚

##### ğŸ‘‰ `ç”Ÿå‘½å‘¨æœŸ` æ„ä¹‰ï¼š

ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸæœ‰åŠ©äºç†è§£ç»„ä»¶çš„è¿è¡Œæ–¹å¼ã€å®Œæˆæ›´å¤æ‚çš„ç»„ä»¶åŠŸèƒ½ã€åˆ†æç»„ä»¶é”™è¯¯åŸå› 

##### ğŸ‘‰ `TIPS`

åªæœ‰ç±»ç»„ä»¶æ‰æœ‰ç”Ÿå‘½å‘¨æœŸ

#### 2ã€ ç»„ä»¶ç”Ÿå‘½å‘¨æœŸçš„ä¸‰ä¸ªé˜¶æ®µ

1.æ¯ä¸ªé˜¶æ®µçš„æ‰§è¡Œæ—¶æœº

2ã€æ¯ä¸ªé˜¶æ®µé’©å­å‡½æ•°çš„æ‰§è¡Œé¡ºåº

3ã€æ¯ä¸ªé˜¶æ®µé’©å­å‡½æ•°çš„ä½œç”¨

##### ğŸ‘‰ä¸»è¦é˜¶æ®µ

ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸä¸»è¦åˆ†ä¸ºä¸‰ä¸ªä¸»è¦é˜¶æ®µï¼š

`æŒ‚è½½(Mounting)ã€`

`æ›´æ–°(Updating)ã€`

`å¸è½½(Unmounting)`

> ç”Ÿå‘½å‘¨æœŸå›¾
> ![â¤React-ç»„ä»¶çš„æ–°æ—§ç”Ÿå‘½å‘¨æœŸ_é’©å­å‡½æ•°](https://i-blog.csdnimg.cn/img_convert/61f238aed2e80dfae401cc09ebf1dcc4.png)

##### ğŸ‘‰ åˆ›å»ºæ—¶

1. åˆ›å»ºæ—¶(æŒ‚è½½é˜¶æ®µ)

ç™»å½•åå¤åˆ¶

```js
æ‰§è¡Œæ—¶æœºï¼šç»„ä»¶åˆ›å»ºæ—¶(é¡µé¢åŠ è½½æ—¶)
```



æ‰§è¡Œé¡ºåºï¼š
![â¤React-ç»„ä»¶çš„æ–°æ—§ç”Ÿå‘½å‘¨æœŸ_åˆå§‹åŒ–_02](https://i-blog.csdnimg.cn/img_convert/10dc0dc9d4d7e1b66adca79d9db34a88.png)

##### ğŸ‘‰é’©å­å‡½æ•°

| é’©å­å‡½æ•° | è§¦å‘æ—¶æœº | ä½œç”¨ |
| --- | --- | --- |
| **constructor** | åˆ›å»ºç»„ä»¶æ—¶ï¼Œæœ€å…ˆæ‰§è¡Œ | 1. åˆå§‹åŒ– state   2. ä¸ºäº‹ä»¶å¤„ç†ç¨‹åºç»‘å®š this |
| **render** | æ¯æ¬¡ç»„ä»¶æ¸²æŸ“éƒ½ä¼šè§¦å‘ | 1. æ¸²æŸ“ UI(æ³¨æ„ï¼šä¸èƒ½è°ƒç”¨ `setState()` ) |
| **componentDidMount** | ç»„ä»¶æŒ‚è½½(å®Œæˆ DOM æ¸²æŸ“)å | 1. å‘é€ç½‘ç»œè¯·æ±‚   2. DOM æ“ä½œ |

##### ğŸ‘‰ä½¿ç”¨ç¤ºä¾‹

ç™»å½•åå¤åˆ¶

```js
class MyComponent extends React.Component {
  constructor(props) {
    super(props);
    // åˆå§‹åŒ– state
    this.state = {
      count: 0
    };
    // å¤„ç† this æŒ‡å‘é—®é¢˜
    console.warn('ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°ï¼šconstructor');
  }

  // 1. è¿›è¡Œ DOM æ“ä½œ
  // 2. å‘é€ ajax è¯·æ±‚ï¼Œè·å–è¿œç¨‹æ•°æ®
  componentDidMount() {
    console.warn('ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°ï¼šcomponentDidMount');
    // è¿™é‡Œå¯ä»¥è¿›è¡Œ AJAX è¯·æ±‚ç­‰æ“ä½œ
    // const title = document.getElementById('title');
    // console.log(title);
  }

  render() {
    // é”™è¯¯æ¼”ç¤ºï¼ï¼ï¼ä¸è¦åœ¨ render ä¸­è°ƒç”¨ setState
    // this.setState({ count: 1 });  // **é”™è¯¯**ï¼šä¸è¦åœ¨ render ä¸­è°ƒç”¨ setStateï¼

    console.warn('ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°ï¼šrender');

    return (
      <div>
        Count: {this.state.count}
        <button onClick={() => this.setState({ count: this.state.count + 1 })}>
          Increment
        </button>
      </div>
    );
  }
}

export default MyComponent;

```








































##### ğŸ‘‰æ›´æ–°æ—¶

###### æ›´æ–°çš„ä¸‰ç§æƒ…å†µ

ç™»å½•åå¤åˆ¶

```js
- **æ‰§è¡Œæ—¶æœº**ï¼š
  1. `setState()`
  2. `forceUpdate()`
  3. ç»„ä»¶æ¥æ”¶åˆ°æ–°çš„ `props`

```






* **è¯´æ˜**
  ï¼šä»¥ä¸Šä¸‰è€…ä»»æ„ä¸€ç§å˜åŒ–ï¼Œç»„ä»¶å°±ä¼šé‡æ–°æ¸²æŸ“ã€‚

###### **æ‰§è¡Œé¡ºåº**

| é’©å­å‡½æ•° | è§¦å‘æ—¶æœº | ä½œç”¨ |
| --- | --- | --- |
| **render()** | æ¯æ¬¡ç»„ä»¶æ¸²æŸ“éƒ½ä¼šè§¦å‘ | æ¸²æŸ“ UI(ä¸æŒ‚è½½é˜¶æ®µæ˜¯åŒä¸€ä¸ª `render` ) |
| **componentDidUpdate()** | ç»„ä»¶æ›´æ–°(å®Œæˆ DOM æ¸²æŸ“)å | 1. å‘é€ç½‘ç»œè¯·æ±‚   2. DOM æ“ä½œ   æ³¨æ„ï¼šå¦‚æœè¦ `setState()` ï¼Œå¿…é¡»æ”¾åœ¨ä¸€ä¸ª `if` æ¡ä»¶ä¸­ |

###### ğŸ‘‰ä½¿ç”¨ç¤ºä¾‹

ç™»å½•åå¤åˆ¶

```js
class Counter extends React.Component {
  render() {
    console.warn('--å­ç»„ä»¶--ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°ï¼šrender');
    return (
      ç»Ÿè®¡è±†è±†è¢«æ‰“çš„æ¬¡æ•°: {this.props.count}
    );
  }

  componentDidUpdate(prevProps) {
    console.warn('--å­ç»„ä»¶--ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°ï¼šcomponentDidUpdate');

    // æ­£ç¡®åšæ³•ï¼šåœ¨æ¡ä»¶ä¸­è°ƒç”¨ setState
    if (prevProps.count !== this.props.count) {
      // å¯ä»¥åœ¨è¿™é‡Œè°ƒç”¨ setStateï¼Œä½†éœ€è¦ç¡®ä¿ä¸ä¼šå¯¼è‡´æ— é™å¾ªç¯
      // this.setState({});
    }

    // é”™è¯¯æ¼”ç¤ºï¼ï¼ï¼
    // ç›´æ¥è°ƒç”¨ setState ä¼šå¯¼è‡´é€’å½’æ›´æ–°
    // this.setState({});

    // è·å– DOM
    const title = document.getElementById('title');
    console.log(title.innerHTML);
  }
}


```





























ç™»å½•åå¤åˆ¶

```js
componentDidUpdate(prevProps) {
  console.warn('--å­ç»„ä»¶--ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°ï¼šcomponentDidUpdate');

  // æ¯”è¾ƒæ›´æ–°å‰åçš„ props æ˜¯å¦ç›¸åŒï¼Œå†³å®šæ˜¯å¦é‡æ–°æ¸²æŸ“ç»„ä»¶
  console.log('ä¸Šä¸€æ¬¡çš„props:', prevProps, ', å½“å‰çš„props:', this.props);

  // å¦‚æœ count å‘ç”Ÿå˜åŒ–ï¼Œæ›´æ–°çŠ¶æ€
  if (prevProps.count !== this.props.count) {
    this.setState({ count: 0 });  // å‡è®¾ä½ æƒ³å°† count çŠ¶æ€é‡ç½®ä¸º 0
  }
}

```













###### ç»„ä»¶çš„å‡½æ•°å‘¨æœŸ

render ç”Ÿå‘½å‘¨æœŸæ¸²æŸ“ componenetDidUpdate() ç”Ÿå‘½å‘¨æœŸæ›´æ–°

**æ³¨æ„éƒ¨åˆ†ï¼š**

seState åº”è¯¥æ”¾åœ¨åˆ¤æ–­if é‡Œé¢ajaxçš„è¯·æ±‚éƒ¨åˆ†åº”è¯¥æ”¾åœ¨è¿™é‡Œ

ç™»å½•åå¤åˆ¶

```js
class Counter extends React.Component {
  render() {
    console.warn('--å­ç»„ä»¶--ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°ï¼šrender');
    return ç»Ÿè®¡è±†è±†è¢«æ‰“çš„æ¬¡æ•°: {this.props.count};
  }

  componentDidUpdate() {
    console.warn('--å­ç»„ä»¶--ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°ï¼šcomponentDidUpdate');
    
    // è·å– DOM å…ƒç´ 
    const title = document.getElementById('title');
    console.log(title.innerHTML); // æ‰“å° h1 å…ƒç´ çš„å†…å®¹
  }
}

export default Counter;

```


















##### ğŸ‘‰ç»„ä»¶å¸è½½æ—¶(å¸è½½é˜¶æ®µ)

`æ‰§è¡Œæ—¶é—´ï¼šç»„ä»¶ä»é¡µé¢ä¹‹ä¸­æ¶ˆå¤±æ—¶`

| é’©å­å‡½æ•° | è§¦å‘æ—¶æœº | ä½œç”¨ |
| --- | --- | --- |
| **componentWillUnmount** | ç»„ä»¶å¸è½½(ä»é¡µé¢ä¸­æ¶ˆå¤±) | æ‰§è¡Œæ¸…ç†å·¥ä½œ(æ¯”å¦‚ï¼šæ¸…ç†å®šæ—¶å™¨ç­‰) |

* componentDidMount(){}ç»„ä»¶çš„æŒ‚è½½é˜¶æ®µ
* componentWillUnmount(){}ç»„ä»¶çš„å¸è½½é˜¶æ®µ

`ç»„ä»¶çš„æŒ‚è½½é˜¶æ®µæ‰§è¡Œçš„ä¸€äº›æ–¹æ³•å¯ä»¥åœ¨ç»„ä»¶çš„å¸è½½é˜¶æ®µé™¤å»`

ç™»å½•åå¤åˆ¶

```js
class Counter extends React.Component {
  componentDidMount() {
    // å¼€å¯å®šæ—¶å™¨
    this.timerId = setInterval(() => {
      console.log('å®šæ—¶å™¨æ­£åœ¨æ‰§è¡Œ~');
    }, 500);
  }

  render() {
    return ç»Ÿè®¡è±†è±†è¢«æ‰“çš„æ¬¡æ•°: {this.props.count};
  }

  componentWillUnmount() {
    console.warn('ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°: componentWillUnmount');
    // æ¸…ç†å®šæ—¶å™¨
    clearInterval(this.timerId);
  }
}

```




















#### 3ã€æ—§ç‰ˆæœ¬-ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°(react 15 å¯ç›´æ¥è·³è¿‡)

![â¤React-ç»„ä»¶çš„æ–°æ—§ç”Ÿå‘½å‘¨æœŸ_åˆå§‹åŒ–_03](https://i-blog.csdnimg.cn/img_convert/80764f9be2021cb828481e8e61575bf8.png)

æˆ‘ä»¬å¯ä»¥æ¥çœ‹çœ‹React15 çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°

(1)
`constructor()`
: ES6 ç±»ä¸­çš„æ„é€ å‡½æ•°ï¼Œåˆå§‹åŒ–ä½¿ç”¨(æ¯”å¦‚åˆå§‹åŒ–ç»„ä»¶çŠ¶æ€(state)ç»‘å®šäº‹ä»¶å¤„ç†å™¨ï¼›),ç»„ä»¶å®ä¾‹åŒ–æ—¶è°ƒç”¨

(2)
`componentWillReceiveProps()`
: ä¸€èˆ¬ä½¿ç”¨éƒ½æ˜¯ä¼ å€¼
`componentWillReceiveProps(nextProps)`

* **å·²åºŸå¼ƒ**
  ï¼šè¿™ä¸ªç”Ÿå‘½å‘¨æœŸå‡½æ•°å°±æ˜¯åœ¨ç»„ä»¶å³å°†æ¥æ”¶æ–°çš„å±æ€§æ—¶è¢«è°ƒç”¨(æ—§ç‰ˆæœ¬Reactä¸­å°±æ˜¯æ›´æ–°ç”¨)ã€‚å¯ä»¥åœ¨è¿™é‡Œæ¯”è¾ƒæ–°æ—§å±æ€§ï¼Œç„¶åæ›´æ–°ç»„ä»¶çš„çŠ¶æ€;

(3)
`shouldComponentUpdate(nextProps, nextState)`
: ç»„ä»¶æ¥æ”¶åˆ°æ–°çš„å±æ€§æˆ–è€…çŠ¶æ€æ—¶ï¼Œåœ¨æ›´æ–°ç»„ä»¶ä¹‹å‰è°ƒç”¨
`shouldComponentUpdate()`
å‡½æ•°ã€‚

æ ¹æ®æ–°çš„å±æ€§å’ŒçŠ¶æ€åˆ¤æ–­æ˜¯å¦éœ€è¦é‡æ–°æ¸²æŸ“ç»„ä»¶(æ€§èƒ½ä¼˜åŒ–å¸¸ç”¨)

(4)
`componentWillMount()`
:

* **å·²åºŸå¼ƒ**
  ï¼šæ–°ç‰ˆæœ¬ä¸å†æ¨èä½¿ç”¨ã€‚ åœ¨ç»„ä»¶å³å°†è¢«æŒ‚è½½åˆ° DOM ä¸­æ—¶è¢«è°ƒç”¨,å¾ˆå¤šæ—¶å€™æˆ‘ä»¬å¯ä»¥ä½¿ç”¨
  `constructor()`
  æˆ–è€…
  `componentDidMount()`
  æ¥æ›¿ä»£ã€‚

(5)
`componentWillUpdate(nextProps, nextState)`
:
**å·²åºŸå¼ƒ**
ï¼šæ–°ç‰ˆæœ¬ä¸å†æ¨è,åœ¨ç»„ä»¶å³å°†è¢«æ›´æ–°ä¹‹å‰è¢«è°ƒç”¨ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ç»„ä»¶å³å°†æ›´æ–°ä¹‹å‰æ§åˆ¶ç»„ä»¶ã€‚

(6)
`componentDidUpdate()`
: ç»„ä»¶ç¬¬ä¸€æ¬¡è¢«æ¸²æŸ“åˆ° DOM ä¸­ä¹‹åè¢«è°ƒç”¨ã€‚æˆ‘ä»¬å¯ä»¥è¿›è¡Œä¸€äº›åˆå§‹åŒ–çš„æ“ä½œï¼Œè·å–è¿œç¨‹æ•°æ®ã€è®¢é˜…äº‹ä»¶ç­‰

(7)
`render()`
:
`render()`
`æœ€é‡è¦`
çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¹‹ä¸€,è¿”å›è™šæ‹Ÿ DOM å…ƒç´ ï¼Œæ¸²æŸ“ç»„ä»¶å¤–è§‚å’Œç»“æ„.

(8)
`componentWillUnmount()`
: åœ¨ç»„ä»¶å³å°†è¢«é”€æ¯å’Œä» DOM ä¸­ç§»é™¤ä¹‹å‰è¢«è°ƒç”¨,å°±ç±»ä¼¼ç ¸é—¨åœ¨vueé”€æ¯ä¹‹å‰ä¸€æ ·ï¼Œå¯ä»¥å–æ¶ˆè®¢é˜…ã€æ¸…é™¤å®šæ—¶å™¨ã€‚

#### 4ã€ `é‡è¦` - æ–°ç‰ˆæœ¬-ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°(react 16 )

##### (1) constructor

åœ¨ç±»ç»„ä»¶åˆ›å»ºå®ä¾‹æ—¶è°ƒç”¨ï¼Œåˆå§‹åŒ–çš„æ—¶å€™æ‰§è¡Œä¸€æ¬¡ï¼Œå¯ä»¥åœ¨ç»„ä»¶è¿›è¡Œåˆå§‹åŒ–æ—¶å€™æ§åˆ¶ç»„ä»¶ã€‚

ä¸å®šä¹‰
`constructor`
ï¼ŒReact ä¼šè‡ªåŠ¨ä¸ºç»„ä»¶åˆ›å»ºä¸€ä¸ªé»˜è®¤çš„
`constructor`

æˆ‘ä»¬æ¥å†™ä¸€ä¸ªç®€å•çš„
`ç±»ç»„ä»¶`
çœ‹çœ‹

ç™»å½•åå¤åˆ¶

```js
import React from 'react';
// ç”Ÿå‘½å‘¨æœŸ
class Demo extends React.Component {
    constructor(props: any) {
        super(props); //superä½œç”¨ ï¼š ä¼ é€’props,æ‰èƒ½åœ¨æ¥ä¸‹æ¥çš„ä¸Šä¸‹æ–‡ä¸­ï¼Œè·å–åˆ°props
        console.log('constructor-ç”Ÿå‘½å‘¨æœŸ');
    }
    render() {
        return (
            <div className="App" id='link'>constructor</div>
        );
    }
}
export default Demo;

```
















ç™»å½•åå¤åˆ¶

```js
constructor-ç”Ÿå‘½å‘¨æœŸ

```



ä½œç”¨

ç™»å½•åå¤åˆ¶

```js
-   åˆå§‹åŒ– state ï¼Œè·å–è·¯ç”±ä¸­çš„å‚æ•°ï¼Œç»„ä»¶ä¼ å€¼èµ‹å€¼ç»™ stateç­‰ ã€‚
-   ç»‘å®šç±»ç»„ä»¶äº‹ä»¶ï¼Œç»‘å®š this ã€èŠ‚æµï¼Œé˜²æŠ–ã€‚
-   å¯¹ç±»ç»„ä»¶è¿›è¡Œç”Ÿå‘½å‘¨æœŸçš„åŠ«æŒï¼Œæ¸²æŸ“åŠ«æŒç­‰ã€‚

```





ç™»å½•åå¤åˆ¶

```js
import React from 'react';

// 01  åˆå§‹åŒ–çŠ¶æ€
class Demo extends React.Component {
    constructor(props: any) {
        super(props);
        console.log(props,'props');
        console.log('constructor-ç”Ÿå‘½å‘¨æœŸ');
        //åˆå§‹åŒ–çŠ¶æ€
        this.state={ 
            name:'alien',
            count: 0,
        }
}
export default Demo;


// 02 **ç»‘å®šäº‹ä»¶å¤„ç†å™¨**
class MyComponent extends React.Component {
  constructor(props) {
    super(props);
    this.handleClick = this.handleClick.bind(this);
  }
  
 handleClick(name: string) {
        console.log(name,'name');
        return () => {
            console.log('handleClick');
        }
 }
}


03 **åˆå§‹åŒ–å¼•ç”¨**
constructor(props) { 
    super(props); 
    this.myRef = React.createRef(); 
}

```








































##### (2) getDerivedStateFromProps (react 16 æ–°å¢)

ç™»å½•åå¤åˆ¶

```js
getDerivedStateFromProps(nextProps,prevState)
// nextProps çˆ¶ç»„ä»¶æ–°ä¼ é€’çš„ props ;
// prevState ç»„ä»¶åœ¨æ­¤æ¬¡æ›´æ–°å‰çš„ state

```






ç»„ä»¶æ›´æ–°æ‰§è¡ŒåŒ…æ‹¬(propså˜åŒ–ï¼ŒsetStateã€forceUpdate)

`æ³¨æ„ç‚¹`

getDerivedStateFromProps è¢«å®šä¹‰ä¸º static æ–¹æ³• â€”â€” static æ–¹æ³•å†…éƒ¨æ‹¿ä¸åˆ°ç»„ä»¶å®ä¾‹çš„ this

ä»»ä½•æ“ä½œ this.fetch()ä¹‹ç±»çš„éƒ½ä¸å¯ä»¥åœ¨é‡Œå–é¢ä½¿ç”¨

åœ¨ç»„ä»¶çš„æ“ä½œä¹‹ä¸­å¤§è‡´å½’ä¸ºä¸¤ç±»

* **åŸºäº props æ›´æ–°çŠ¶æ€**

ç™»å½•åå¤åˆ¶

```js
class MyComponent extends React.Component {
  constructor(props) {
    super(props);
    this.state = {
      value: ''
    };
  }
  
  static getDerivedStateFromProps(nextProps, prevState) {
    // å¦‚æœæ¥æ”¶åˆ°æ–°çš„å€¼ï¼Œæ›´æ–°çŠ¶æ€
    if (nextProps.value !== prevState.value) {
      return {
        value: nextProps.value
      };
    }
    return null; // ä¸æ›´æ–°çŠ¶æ€
  }
  // ...
}

```





















* **æ§åˆ¶å†…éƒ¨çŠ¶æ€**

ç™»å½•åå¤åˆ¶

```js
class MyComponent extends React.Component {
  constructor(props) {
    super(props);
    this.state = {
      isFocused: false
    };
  }
  
  static getDerivedStateFromProps(nextProps, prevState) {
    if (nextProps.autoFocus && !prevState.isFocused) {
      return {
        isFocused: true
      };
    }
    return null;
  }
  // ...
}

```




















##### (3 )render

æ¸²æŸ“æ—¶æ“ä½œå…ƒç´ 

##### (4)componentDidMount

ç™»å½•åå¤åˆ¶

```js
componentDidMount(){}
ç»„ä»¶æŒ‚è½½åˆ° DOM åç«‹å³è¢«è°ƒç”¨ï¼Œè·Ÿä¸Šé¢ä½œç”¨ä¸€æ ·ï¼Œè¿›è¡Œæ•°æ®è·å–ã€è®¢é˜…äº‹ä»¶ç­‰åˆå§‹åŒ–å·¥ä½œ

```




##### (5)shouldComponentUpdate

å°±æ˜¯åˆ¤æ–­æ˜¯å¦éœ€è¦é‡æ–°æ¸²æŸ“ç»„ä»¶ï¼Œä¸»è¦ä¾èµ–ä¼ å…¥çš„props æˆ– state æ¥å†³å®šæ˜¯å¦æ›´æ–°ç»„ä»¶

ç™»å½•åå¤åˆ¶

```js
shouldComponentUpdate(newProps,newState,nextContext){}
// å‚æ•°å«ä¹‰ (æ–°çš„ æ—§çš„ æ›´æ–°çš„)

```




##### (6)getSnapshotBeforeUpdate

ç»„ä»¶æ›´æ–° DOM ä¹‹å‰è¢«è°ƒç”¨(å¦‚æ»šåŠ¨ä½ç½®çš„ä½¿ç”¨)

ç™»å½•åå¤åˆ¶

```js
getSnapshotBeforeUpdate(prevProps, prevState) { 
// è¿”å›æ»šåŠ¨ä½ç½® return this.myRef.current.scrollHeight; 

// prevPropsæ›´æ–°å‰çš„props   preStateæ›´æ–°å‰çš„stateï¼›
}
// å‚æ•°å«ä¹‰ (æ–°çš„ æ—§çš„ æ›´æ–°çš„)

```








æ³¨æ„ç‚¹ï¼š

* `getSnapshotBeforeUpdate`
  å¿…é¡»ä¸
  `componentDidUpdate`
  ä¸€èµ·ä½¿ç”¨ï¼Œå› ä¸ºå®ƒçš„è¿”å›å€¼ä¼šä½œä¸ºç¬¬ä¸‰ä¸ªå‚æ•°ä¼ é€’ç»™
  `componentDidUpdate`
  ã€‚
* æˆ‘ä»¬åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ä¸ä½¿ç”¨,å®ƒä¸»è¦ç”¨äºå¤„ç†ä¸€äº›å¤„ç†å¤æ‚çš„ UI åŠ¨ç”»æˆ–éœ€è¦æ‰‹åŠ¨ä¿å­˜å’Œæ¢å¤æŸäº› DOM çŠ¶æ€çš„æƒ…å†µã€‚

##### (7)componentDidUpdate

ç»„ä»¶æ›´æ–°(re-render)å®Œæˆä¹‹åè¢«è°ƒç”¨

ç™»å½•åå¤åˆ¶

```js
componentDidUpdate(prevProps, prevState, snapshot){}
// æ›´æ–°ä¹‹å‰çš„ props æ›´æ–°ä¹‹å‰çš„ prevState  æ›´æ–°ä¹‹å‰çš„ DOM ä¿¡æ¯   
// æ“ä½œå¯èƒ½ä¼šè§¦å‘é¢å¤–çš„ç»„ä»¶æ›´æ–°ï¼Œå› æ­¤éœ€è¦è°¨æ…å¤„ç†ï¼Œä»¥é¿å…é™·å…¥æ— é™å¾ªç¯

```





##### (8) componentWillUnmount

ç»„ä»¶é”€æ¯é˜¶æ®µå”¯ä¸€æ‰§è¡Œçš„ç”Ÿå‘½å‘¨æœŸ

componentDidMount è®¾ç½®å®šæ—¶å™¨ï¼ŒcomponentWillUnmountæ¸…æ¥šå®šæ—¶å™¨

ç™»å½•åå¤åˆ¶

```js
import React from 'react';

// ç”Ÿå‘½å‘¨æœŸ
class Demo extends React.Component {
    constructor(props) {
        super(props);
        console.log(props,'props');
        console.log('constructor-ç”Ÿå‘½å‘¨æœŸ');
        //åˆå§‹åŒ–çŠ¶æ€
        this.state={ 
            count: 0,
        }
    }
    componentDidMount(){
        console.log('componentDidMount');
        this.interval = setInterval(() => {
            this.setState({ count: this.state.count + 1 });
          }, 1000);
    }
    componentWillUnmount() {
        console.log('componentWillUnmount');
         clearInterval(this.interval);
    }
    
    render() {
        return (
            <>
                <p>Timer: {this.state.count}</p>
            </>
            
        );
    }
}
export default Demo;

```






































è¾“å‡ºç»“æœï¼š

ç™»å½•åå¤åˆ¶

```js
48 alien

```



åˆ·æ–°ä»¥åç»„ä»¶é‡æ–°é”€æ¯åˆ›å»ºå®šæ—¶å™¨

#### 6ã€(å‡½æ•°å¼ç»„ä»¶)Reactå£°æ˜å‘¨æœŸå‡½æ•°

éœ€è¦æ³¨æ„çš„æ˜¯ï¼š

Reactå‡½æ•°å¼ç»„ä»¶ä¸­ï¼Œæ²¡æœ‰åƒç±»ç»„ä»¶é‚£æ ·æ˜ç¡®çš„å£°æ˜å‘¨æœŸå‡½æ•°ï¼Œå¯ä»¥é€šè¿‡ React Hookså®ç°ç±»ä¼¼çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°

å¸¸ç”¨çš„ React Hooks åŠå…¶å¯¹åº”çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°

ç™»å½•åå¤åˆ¶

```js
1.  `useState`: ç”¨äºå£°æ˜çŠ¶æ€å˜é‡ï¼Œç±»ä¼¼äºç±»ç»„ä»¶ä¸­çš„ `state`
1.  `useEffect`: åœ¨ç»„ä»¶æ¸²æŸ“åæ‰§è¡Œå‰¯ä½œç”¨æ“ä½œï¼Œç±»ä¼¼äºç±»ç»„ä»¶ä¸­çš„ `componentDidMount`, `componentDidUpdate`, `componentWillUnmount`
1.  `useContext`: ç”¨äºè®¿é—® React çš„ä¸Šä¸‹æ–‡ï¼Œç±»ä¼¼äºç±»ç»„ä»¶ä¸­çš„ `static contextType` æˆ– `Context.Consumer`
1.  `useReducer`: ç”¨äºåº”å¯¹å¤æ‚çš„çŠ¶æ€ç®¡ç†é€»è¾‘ï¼Œç±»ä¼¼äºç±»ç»„ä»¶ä¸­çš„ `setState`
1.  `useRef`: åˆ›å»ºä¸€ä¸ªå¯å˜çš„ ref å¯¹è±¡ï¼Œç±»ä¼¼äºç±»ç»„ä»¶ä¸­çš„ `createRef`

```







Hooks éƒ½å¯ä»¥å¸®åŠ©æˆ‘ä»¬åœ¨å‡½æ•°å¼ç»„ä»¶ä¸­å®ç°ç±»ä¼¼äºç±»ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°çš„åŠŸèƒ½