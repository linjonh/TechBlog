---
layout: post
title: "python爬虫酷狗音乐爬取练习"
date: 2025-03-08 19:02:33 +0800
description: "本次爬取的音乐仅有1分钟试听，完整音乐需要下载客户端。"
keywords: "酷狗爬虫"
categories: ['Python']
tags: ['笔记', '爬虫', '学习', 'Python']
artid: "146120511"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146120511
    alt: "python爬虫酷狗音乐爬取练习"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146120511
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146120511
cover: https://bing.ee123.net/img/rand?artid=146120511
image: https://bing.ee123.net/img/rand?artid=146120511
img: https://bing.ee123.net/img/rand?artid=146120511
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     【python爬虫】酷狗音乐爬取练习
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-light" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <blockquote>
     <p>
      <font color="red">
       <strong>
        注意：本次爬取的音乐仅有1分钟试听，仅作学习爬虫的原理，完整音乐需要自行下载客户端。
       </strong>
      </font>
     </p>
    </blockquote>
    <h2>
     <a id="__4">
     </a>
     一、 初步分析
    </h2>
    <p>
     登陆酷狗音乐后随机选取一首歌，在请求里发现一段mp3文件，复制网址，确实是我们需要的url。
    </p>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/img_convert/15ae184dfb743706e8562f3d4290a5ba.png"/>
    </p>
    <p>
     复制音频的名字，搜索找到发起请求的网址，发现是在songinfo里
    </p>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/img_convert/940fa1fefb6fd55db500f261224c7ce7.png"/>
    </p>
    <p>
     查看参数和请求头，刷新一次，查看是否有哪些参数是变化的。可以发现图中两次请求的这些参数都不同，接下来就寻找这些参数的生成方式，参数
     <code>
      clienttime
     </code>
     为时间戳，那么就只需要找到
     <code>
      signature
     </code>
     的生成方式就可以了：
    </p>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/img_convert/f5c4b68cd9bc8af814aa6818d74cf30a.png"/>
    </p>
    <h2>
     <a id="signature_17">
     </a>
     二、分析参数signature
    </h2>
    <h3>
     <a id="1__18">
     </a>
     1. 分析过程
    </h3>
    <p>
     搜索参数
     <code>
      signature
     </code>
     ，并在可能生成的位置打上断点，然后刷新网页
    </p>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/img_convert/b9b418c158631690d3b5fb2917d6e41e.png"/>
    </p>
    <p>
     网页断在了此处，可以看见参数
     <code>
      signature
     </code>
     跟函数
     <code>
      d
     </code>
     与数组
     <code>
      s
     </code>
     有关。
    </p>
    <blockquote>
     <p>
      补充：如果s的长度不为13，需要放行一下，点击这个按钮
      <img alt="" src="https://i-blog.csdnimg.cn/img_convert/14f49fec2f9a6dbd03531dd447f7086e.png"/>
     </p>
    </blockquote>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/img_convert/02d8c19ec75badeac5d125e292b87f08.png"/>
    </p>
    <p>
     查看函数
     <code>
      d
     </code>
     的定义
    </p>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/img_convert/5d442fd93fab1135c0c63b971f9d5aab.png"/>
    </p>
    <p>
     发现函数内部没有
     <code>
      wordsToBytes
     </code>
     函数和函数
     <code>
      i
     </code>
     的相关定义，那么打下断点，查看具体函数的位置
    </p>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/img_convert/7112fb615bb262bfc23656dd3dfd0b8e.png"/>
    </p>
    <p>
     获得
     <code>
      wordsToBytes
     </code>
     函数的具体定义
    </p>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/img_convert/7712982bf6b6c4c0eeee33e2ab3505f7.png"/>
    </p>
    <p>
     获得
     <code>
      i
     </code>
     函数的具体定义
    </p>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/img_convert/03a7ddbbb192bf52e3db2aa8e860cba9.png"/>
    </p>
    <p>
     <code>
      i
     </code>
     函数里没有
     <code>
      r.stringToBytes(t)
     </code>
     的相关定义，继续打下断点
    </p>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/img_convert/1dd5d49186ced672d1211f282df4c257.png"/>
    </p>
    <p>
     找到
     <code>
      r.stringToBytes(t)
     </code>
     的相关定义
    </p>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/img_convert/afddec2f1164d464501290c93c09d43f.png"/>
    </p>
    <p>
     接着查看
     <code>
      s
     </code>
     的内容：在console里查看
     <code>
      s
     </code>
     的内容，发现
     <code>
      s
     </code>
     的值跟之前请求的参数类似。而且下标为0和下标为12的值跟
     <code>
      u
     </code>
     的值相同
    </p>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/img_convert/72f5a5abb2a1c07eebbec4098e14ad52.png"/>
    </p>
    <p>
     往上查找
     <code>
      u
     </code>
     的定义，发现
     <code>
      u
     </code>
     的值是固定的
    </p>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/img_convert/6736d2fc6c2f7c74205073e07948b46a.png"/>
    </p>
    <h3>
     <a id="2__62">
     </a>
     2. 代码实现
    </h3>
    <p>
     那么就开始实现生成signature的代码（
     <strong>
      以下为JavaScript代码
     </strong>
     ）
    </p>
    <pre><code class="prism language-javascript"><span class="token keyword">function</span> <span class="token function">bytesToWords</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> n <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> r <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> e <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> r <span class="token operator">&lt;</span> t<span class="token punctuation">.</span>length<span class="token punctuation">;</span> r<span class="token operator">++</span><span class="token punctuation">,</span>
        e <span class="token operator">+=</span> <span class="token number">8</span><span class="token punctuation">)</span>
        n<span class="token punctuation">[</span>e <span class="token operator">&gt;&gt;&gt;</span> <span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">|=</span> t<span class="token punctuation">[</span>r<span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> <span class="token number">24</span> <span class="token operator">-</span> e <span class="token operator">%</span> <span class="token number">32</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> n
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">rotl</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> n</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> t <span class="token operator">&lt;&lt;</span> n <span class="token operator">|</span> t <span class="token operator">&gt;&gt;&gt;</span> <span class="token number">32</span> <span class="token operator">-</span> n
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">endian</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>t<span class="token punctuation">.</span>constructor <span class="token operator">==</span> Number<span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token number">16711935</span> <span class="token operator">&amp;</span> <span class="token function">rotl</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token number">4278255360</span> <span class="token operator">&amp;</span> <span class="token function">rotl</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span> <span class="token number">24</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> n <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> n <span class="token operator">&lt;</span> t<span class="token punctuation">.</span>length<span class="token punctuation">;</span> n<span class="token operator">++</span><span class="token punctuation">)</span>
        t<span class="token punctuation">[</span>n<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">endian</span><span class="token punctuation">(</span>t<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> t
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">i</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> c</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">var</span> l <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">utf8</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
            <span class="token function-variable function">stringToBytes</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">return</span> l<span class="token punctuation">.</span>bin<span class="token punctuation">.</span><span class="token function">stringToBytes</span><span class="token punctuation">(</span><span class="token function">unescape</span><span class="token punctuation">(</span><span class="token function">encodeURIComponent</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token function-variable function">bytesToString</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">return</span> <span class="token function">decodeURIComponent</span><span class="token punctuation">(</span><span class="token function">escape</span><span class="token punctuation">(</span>l<span class="token punctuation">.</span>bin<span class="token punctuation">.</span><span class="token function">bytesToString</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">bin</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
            <span class="token function-variable function">stringToBytes</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> n <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> r <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> r <span class="token operator">&lt;</span> t<span class="token punctuation">.</span>length<span class="token punctuation">;</span> r<span class="token operator">++</span><span class="token punctuation">)</span>
                    n<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">255</span> <span class="token operator">&amp;</span> t<span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> n
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token function-variable function">bytesToString</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> n <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> r <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> r <span class="token operator">&lt;</span> t<span class="token punctuation">.</span>length<span class="token punctuation">;</span> r<span class="token operator">++</span><span class="token punctuation">)</span>
                    n<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>String<span class="token punctuation">.</span><span class="token function">fromCharCode</span><span class="token punctuation">(</span>t<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> n<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    i<span class="token punctuation">.</span><span class="token function-variable function">_ff</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> n<span class="token punctuation">,</span> r<span class="token punctuation">,</span> e<span class="token punctuation">,</span> o<span class="token punctuation">,</span> i<span class="token punctuation">,</span> c</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">var</span> s <span class="token operator">=</span> t <span class="token operator">+</span> <span class="token punctuation">(</span>n <span class="token operator">&amp;</span> r <span class="token operator">|</span> <span class="token operator">~</span>n <span class="token operator">&amp;</span> e<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span>o <span class="token operator">&gt;&gt;&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">+</span> c<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>s <span class="token operator">&lt;&lt;</span> i <span class="token operator">|</span> s <span class="token operator">&gt;&gt;&gt;</span> <span class="token number">32</span> <span class="token operator">-</span> i<span class="token punctuation">)</span> <span class="token operator">+</span> n
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
        i<span class="token punctuation">.</span><span class="token function-variable function">_gg</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> n<span class="token punctuation">,</span> r<span class="token punctuation">,</span> e<span class="token punctuation">,</span> o<span class="token punctuation">,</span> i<span class="token punctuation">,</span> c</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">var</span> s <span class="token operator">=</span> t <span class="token operator">+</span> <span class="token punctuation">(</span>n <span class="token operator">&amp;</span> e <span class="token operator">|</span> r <span class="token operator">&amp;</span> <span class="token operator">~</span>e<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span>o <span class="token operator">&gt;&gt;&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">+</span> c<span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token punctuation">(</span>s <span class="token operator">&lt;&lt;</span> i <span class="token operator">|</span> s <span class="token operator">&gt;&gt;&gt;</span> <span class="token number">32</span> <span class="token operator">-</span> i<span class="token punctuation">)</span> <span class="token operator">+</span> n
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        i<span class="token punctuation">.</span><span class="token function-variable function">_hh</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> n<span class="token punctuation">,</span> r<span class="token punctuation">,</span> e<span class="token punctuation">,</span> o<span class="token punctuation">,</span> i<span class="token punctuation">,</span> c</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">var</span> s <span class="token operator">=</span> t <span class="token operator">+</span> <span class="token punctuation">(</span>n <span class="token operator">^</span> r <span class="token operator">^</span> e<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span>o <span class="token operator">&gt;&gt;&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">+</span> c<span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token punctuation">(</span>s <span class="token operator">&lt;&lt;</span> i <span class="token operator">|</span> s <span class="token operator">&gt;&gt;&gt;</span> <span class="token number">32</span> <span class="token operator">-</span> i<span class="token punctuation">)</span> <span class="token operator">+</span> n
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        i<span class="token punctuation">.</span><span class="token function-variable function">_ii</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> n<span class="token punctuation">,</span> r<span class="token punctuation">,</span> e<span class="token punctuation">,</span> o<span class="token punctuation">,</span> i<span class="token punctuation">,</span> c</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">var</span> s <span class="token operator">=</span> t <span class="token operator">+</span> <span class="token punctuation">(</span>r <span class="token operator">^</span> <span class="token punctuation">(</span>n <span class="token operator">|</span> <span class="token operator">~</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span>o <span class="token operator">&gt;&gt;&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">+</span> c<span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token punctuation">(</span>s <span class="token operator">&lt;&lt;</span> i <span class="token operator">|</span> s <span class="token operator">&gt;&gt;&gt;</span> <span class="token number">32</span> <span class="token operator">-</span> i<span class="token punctuation">)</span> <span class="token operator">+</span> n
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    t<span class="token punctuation">.</span>constructor <span class="token operator">==</span> String <span class="token operator">?</span> t <span class="token operator">=</span> c <span class="token operator">&amp;&amp;</span> <span class="token string">"binary"</span> <span class="token operator">===</span> c<span class="token punctuation">.</span>encoding <span class="token operator">?</span> o<span class="token punctuation">.</span><span class="token function">stringToBytes</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span> <span class="token operator">:</span> l<span class="token punctuation">.</span>utf8<span class="token punctuation">.</span><span class="token function">stringToBytes</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">e</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span> <span class="token operator">?</span> t <span class="token operator">=</span> <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">:</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">(</span>t <span class="token operator">=</span> t<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> s <span class="token operator">=</span> <span class="token function">bytesToWords</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">,</span> a <span class="token operator">=</span> <span class="token number">8</span> <span class="token operator">*</span> t<span class="token punctuation">.</span>length<span class="token punctuation">,</span> l <span class="token operator">=</span> <span class="token number">1732584193</span><span class="token punctuation">,</span> u <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">271733879</span><span class="token punctuation">,</span> f <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1732584194</span><span class="token punctuation">,</span> d <span class="token operator">=</span> <span class="token number">271733878</span><span class="token punctuation">,</span> g <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> g <span class="token operator">&lt;</span> s<span class="token punctuation">.</span>length<span class="token punctuation">;</span> g<span class="token operator">++</span><span class="token punctuation">)</span>
        s<span class="token punctuation">[</span>g<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">16711935</span> <span class="token operator">&amp;</span> <span class="token punctuation">(</span>s<span class="token punctuation">[</span>g<span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> <span class="token number">8</span> <span class="token operator">|</span> s<span class="token punctuation">[</span>g<span class="token punctuation">]</span> <span class="token operator">&gt;&gt;&gt;</span> <span class="token number">24</span><span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token number">4278255360</span> <span class="token operator">&amp;</span> <span class="token punctuation">(</span>s<span class="token punctuation">[</span>g<span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> <span class="token number">24</span> <span class="token operator">|</span> s<span class="token punctuation">[</span>g<span class="token punctuation">]</span> <span class="token operator">&gt;&gt;&gt;</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    s<span class="token punctuation">[</span>a <span class="token operator">&gt;&gt;&gt;</span> <span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">|=</span> <span class="token number">128</span> <span class="token operator">&lt;&lt;</span> a <span class="token operator">%</span> <span class="token number">32</span><span class="token punctuation">,</span>
        s<span class="token punctuation">[</span><span class="token number">14</span> <span class="token operator">+</span> <span class="token punctuation">(</span>a <span class="token operator">+</span> <span class="token number">64</span> <span class="token operator">&gt;&gt;&gt;</span> <span class="token number">9</span> <span class="token operator">&lt;&lt;</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> b <span class="token operator">=</span> i<span class="token punctuation">.</span>_ff<span class="token punctuation">,</span> p <span class="token operator">=</span> i<span class="token punctuation">.</span>_gg<span class="token punctuation">,</span> h <span class="token operator">=</span> i<span class="token punctuation">.</span>_hh<span class="token punctuation">,</span> m <span class="token operator">=</span> i<span class="token punctuation">.</span>_ii<span class="token punctuation">,</span> g <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> g <span class="token operator">&lt;</span> s<span class="token punctuation">.</span>length<span class="token punctuation">;</span> g <span class="token operator">+=</span> <span class="token number">16</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">var</span> y <span class="token operator">=</span> l
            <span class="token punctuation">,</span> j <span class="token operator">=</span> u
            <span class="token punctuation">,</span> <span class="token constant">S</span> <span class="token operator">=</span> f
            <span class="token punctuation">,</span> v <span class="token operator">=</span> d<span class="token punctuation">;</span>
        u <span class="token operator">=</span> <span class="token function">m</span><span class="token punctuation">(</span>u <span class="token operator">=</span> <span class="token function">m</span><span class="token punctuation">(</span>u <span class="token operator">=</span> <span class="token function">m</span><span class="token punctuation">(</span>u <span class="token operator">=</span> <span class="token function">m</span><span class="token punctuation">(</span>u <span class="token operator">=</span> <span class="token function">h</span><span class="token punctuation">(</span>u <span class="token operator">=</span> <span class="token function">h</span><span class="token punctuation">(</span>u <span class="token operator">=</span> <span class="token function">h</span><span class="token punctuation">(</span>u <span class="token operator">=</span> <span class="token function">h</span><span class="token punctuation">(</span>u <span class="token operator">=</span> <span class="token function">p</span><span class="token punctuation">(</span>u <span class="token operator">=</span> <span class="token function">p</span><span class="token punctuation">(</span>u <span class="token operator">=</span> <span class="token function">p</span><span class="token punctuation">(</span>u <span class="token operator">=</span> <span class="token function">p</span><span class="token punctuation">(</span>u <span class="token operator">=</span> <span class="token function">b</span><span class="token punctuation">(</span>u <span class="token operator">=</span> <span class="token function">b</span><span class="token punctuation">(</span>u <span class="token operator">=</span> <span class="token function">b</span><span class="token punctuation">(</span>u <span class="token operator">=</span> <span class="token function">b</span><span class="token punctuation">(</span>u<span class="token punctuation">,</span> f <span class="token operator">=</span> <span class="token function">b</span><span class="token punctuation">(</span>f<span class="token punctuation">,</span> d <span class="token operator">=</span> <span class="token function">b</span><span class="token punctuation">(</span>d<span class="token punctuation">,</span> l <span class="token operator">=</span> <span class="token function">b</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span> u<span class="token punctuation">,</span> f<span class="token punctuation">,</span> d<span class="token punctuation">,</span> s<span class="token punctuation">[</span>g <span class="token operator">+</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">680876936</span><span class="token punctuation">)</span><span class="token punctuation">,</span> u<span class="token punctuation">,</span> f<span class="token punctuation">,</span> s<span class="token punctuation">[</span>g <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">389564586</span><span class="token punctuation">)</span><span class="token punctuation">,</span> l<span class="token punctuation">,</span> u<span class="token punctuation">,</span> s<span class="token punctuation">[</span>g <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">17</span><span class="token punctuation">,</span> <span class="token number">606105819</span><span class="token punctuation">)</span><span class="token punctuation">,</span> d<span class="token punctuation">,</span> l<span class="token punctuation">,</span> s<span class="token punctuation">[</span>g <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1044525330</span><span class="token punctuation">)</span><span class="token punctuation">,</span> f <span class="token operator">=</span> <span class="token function">b</span><span class="token punctuation">(</span>f<span class="token punctuation">,</span> d <span class="token operator">=</span> <span class="token function">b</span><span class="token punctuation">(</span>d<span class="token punctuation">,</span> l <span class="token operator">=</span> <span class="token function">b</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span> u<span class="token punctuation">,</span> f<span class="token punctuation">,</span> d<span class="token punctuation">,</span> s<span class="token punctuation">[</span>g <span class="token operator">+</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">176418897</span><span class="token punctuation">)</span><span class="token punctuation">,</span> u<span class="token punctuation">,</span> f<span class="token punctuation">,</span> s<span class="token punctuation">[</span>g <span class="token operator">+</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">1200080426</span><span class="token punctuation">)</span><span class="token punctuation">,</span> l<span class="token punctuation">,</span> u<span class="token punctuation">,</span> s<span class="token punctuation">[</span>g <span class="token operator">+</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">17</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1473231341</span><span class="token punctuation">)</span><span class="token punctuation">,</span> d<span class="token punctuation">,</span> l<span class="token punctuation">,</span> s<span class="token punctuation">[</span>g <span class="token operator">+</span> <span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">45705983</span><span class="token punctuation">)</span><span class="token punctuation">,</span> f <span class="token operator">=</span> <span class="token function">b</span><span class="token punctuation">(</span>f<span class="token punctuation">,</span> d <span class="token operator">=</span> <span class="token function">b</span><span class="token punctuation">(</span>d<span class="token punctuation">,</span> l <span class="token operator">=</span> <span class="token function">b</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span> u<span class="token punctuation">,</span> f<span class="token punctuation">,</span> d<span class="token punctuation">,</span> s<span class="token punctuation">[</span>g <span class="token operator">+</span> <span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">1770035416</span><span class="token punctuation">)</span><span class="token punctuation">,</span> u<span class="token punctuation">,</span> f<span class="token punctuation">,</span> s<span class="token punctuation">[</span>g <span class="token operator">+</span> <span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1958414417</span><span class="token punctuation">)</span><span class="token punctuation">,</span> l<span class="token punctuation">,</span> u<span class="token punctuation">,</span> s<span class="token punctuation">[</span>g <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">17</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">42063</span><span class="token punctuation">)</span><span class="token punctuation">,</span> d<span class="token punctuation">,</span> l<span class="token punctuation">,</span> s<span class="token punctuation">[</span>g <span class="token operator">+</span> <span class="token number">11</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1990404162</span><span class="token punctuation">)</span><span class="token punctuation">,</span> f <span class="token operator">=</span> <span class="token function">b</span><span class="token punctuation">(</span>f<span class="token punctuation">,</span> d <span class="token operator">=</span> <span class="token function">b</span><span class="token punctuation">(</span>d<span class="token punctuation">,</span> l <span class="token operator">=</span> <span class="token function">b</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span> u<span class="token punctuation">,</span> f<span class="token punctuation">,</span> d<span class="token punctuation">,</span> s<span class="token punctuation">[</span>g <span class="token operator">+</span> <span class="token number">12</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">1804603682</span><span class="token punctuation">)</span><span class="token punctuation">,</span> u<span class="token punctuation">,</span> f<span class="token punctuation">,</span> s<span class="token punctuation">[</span>g <span class="token operator">+</span> <span class="token number">13</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">40341101</span><span class="token punctuation">)</span><span class="token punctuation">,</span> l<span class="token punctuation">,</span> u<span class="token punctuation">,</span> s<span class="token punctuation">[</span>g <span class="token operator">+</span> <span class="token number">14</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">17</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1502002290</span><span class="token punctuation">)</span><span class="token punctuation">,</span> d<span class="token punctuation">,</span> l<span class="token punctuation">,</span> s<span class="token punctuation">[</span>g <span class="token operator">+</span> <span class="token number">15</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">,</span> <span class="token number">1236535329</span><span class="token punctuation">)</span><span class="token punctuation">,</span> f <span class="token operator">=</span> <span class="token function">p</span><span class="token punctuation">(</span>f<span class="token punctuation">,</span> d <span class="token operator">=</span> <span class="token function">p</span><span class="token punctuation">(</span>d<span class="token punctuation">,</span> l <span class="token operator">=</span> <span class="token function">p</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span> u<span class="token punctuation">,</span> f<span class="token punctuation">,</span> d<span class="token punctuation">,</span> s<span class="token punctuation">[</span>g <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">165796510</span><span class="token punctuation">)</span><span class="token punctuation">,</span> u<span class="token punctuation">,</span> f<span class="token punctuation">,</span> s<span class="token punctuation">[</span>g <span class="token operator">+</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1069501632</span><span class="token punctuation">)</span><span class="token punctuation">,</span> l<span class="token punctuation">,</span> u<span class="token punctuation">,</span> s<span class="token punctuation">[</span>g <span class="token operator">+</span> <span class="token number">11</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">,</span> <span class="token number">643717713</span><span class="token punctuation">)</span><span class="token punctuation">,</span> d<span class="token punctuation">,</span> l<span class="token punctuation">,</span> s<span class="token punctuation">[</span>g <span class="token operator">+</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">373897302</span><span class="token punctuation">)</span><span class="token punctuation">,</span> f <span class="token operator">=</span> <span class="token function">p</span><span class="token punctuation">(</span>f<span class="token punctuation">,</span> d <span class="token operator">=</span> <span class="token function">p</span><span class="token punctuation">(</span>d<span class="token punctuation">,</span> l <span class="token operator">=</span> <span class="token function">p</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span> u<span class="token punctuation">,</span> f<span class="token punctuation">,</span> d<span class="token punctuation">,</span> s<span class="token punctuation">[</span>g <span class="token operator">+</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">701558691</span><span class="token punctuation">)</span><span class="token punctuation">,</span> u<span class="token punctuation">,</span> f<span class="token punctuation">,</span> s<span class="token punctuation">[</span>g <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">38016083</span><span class="token punctuation">)</span><span class="token punctuation">,</span> l<span class="token punctuation">,</span> u<span class="token punctuation">,</span> s<span class="token punctuation">[</span>g <span class="token operator">+</span> <span class="token number">15</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">660478335</span><span class="token punctuation">)</span><span class="token punctuation">,</span> d<span class="token punctuation">,</span> l<span class="token punctuation">,</span> s<span class="token punctuation">[</span>g <span class="token operator">+</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">405537848</span><span class="token punctuation">)</span><span class="token punctuation">,</span> f <span class="token operator">=</span> <span class="token function">p</span><span class="token punctuation">(</span>f<span class="token punctuation">,</span> d <span class="token operator">=</span> <span class="token function">p</span><span class="token punctuation">(</span>d<span class="token punctuation">,</span> l <span class="token operator">=</span> <span class="token function">p</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span> u<span class="token punctuation">,</span> f<span class="token punctuation">,</span> d<span class="token punctuation">,</span> s<span class="token punctuation">[</span>g <span class="token operator">+</span> <span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">568446438</span><span class="token punctuation">)</span><span class="token punctuation">,</span> u<span class="token punctuation">,</span> f<span class="token punctuation">,</span> s<span class="token punctuation">[</span>g <span class="token operator">+</span> <span class="token number">14</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1019803690</span><span class="token punctuation">)</span><span class="token punctuation">,</span> l<span class="token punctuation">,</span> u<span class="token punctuation">,</span> s<span class="token punctuation">[</span>g <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">187363961</span><span class="token punctuation">)</span><span class="token punctuation">,</span> d<span class="token punctuation">,</span> l<span class="token punctuation">,</span> s<span class="token punctuation">[</span>g <span class="token operator">+</span> <span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">1163531501</span><span class="token punctuation">)</span><span class="token punctuation">,</span> f <span class="token operator">=</span> <span class="token function">p</span><span class="token punctuation">(</span>f<span class="token punctuation">,</span> d <span class="token operator">=</span> <span class="token function">p</span><span class="token punctuation">(</span>d<span class="token punctuation">,</span> l <span class="token operator">=</span> <span class="token function">p</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span> u<span class="token punctuation">,</span> f<span class="token punctuation">,</span> d<span class="token punctuation">,</span> s<span class="token punctuation">[</span>g <span class="token operator">+</span> <span class="token number">13</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1444681467</span><span class="token punctuation">)</span><span class="token punctuation">,</span> u<span class="token punctuation">,</span> f<span class="token punctuation">,</span> s<span class="token punctuation">[</span>g <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">51403784</span><span class="token punctuation">)</span><span class="token punctuation">,</span> l<span class="token punctuation">,</span> u<span class="token punctuation">,</span> s<span class="token punctuation">[</span>g <span class="token operator">+</span> <span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">,</span> <span class="token number">1735328473</span><span class="token punctuation">)</span><span class="token punctuation">,</span> d<span class="token punctuation">,</span> l<span class="token punctuation">,</span> s<span class="token punctuation">[</span>g <span class="token operator">+</span> <span class="token number">12</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1926607734</span><span class="token punctuation">)</span><span class="token punctuation">,</span> f <span class="token operator">=</span> <span class="token function">h</span><span class="token punctuation">(</span>f<span class="token punctuation">,</span> d <span class="token operator">=</span> <span class="token function">h</span><span class="token punctuation">(</span>d<span class="token punctuation">,</span> l <span class="token operator">=</span> <span class="token function">h</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span> u<span class="token punctuation">,</span> f<span class="token punctuation">,</span> d<span class="token punctuation">,</span> s<span class="token punctuation">[</span>g <span class="token operator">+</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">378558</span><span class="token punctuation">)</span><span class="token punctuation">,</span> u<span class="token punctuation">,</span> f<span class="token punctuation">,</span> s<span class="token punctuation">[</span>g <span class="token operator">+</span> <span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">2022574463</span><span class="token punctuation">)</span><span class="token punctuation">,</span> l<span class="token punctuation">,</span> u<span class="token punctuation">,</span> s<span class="token punctuation">[</span>g <span class="token operator">+</span> <span class="token number">11</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">1839030562</span><span class="token punctuation">)</span><span class="token punctuation">,</span> d<span class="token punctuation">,</span> l<span class="token punctuation">,</span> s<span class="token punctuation">[</span>g <span class="token operator">+</span> <span class="token number">14</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">35309556</span><span class="token punctuation">)</span><span class="token punctuation">,</span> f <span class="token operator">=</span> <span class="token function">h</span><span class="token punctuation">(</span>f<span class="token punctuation">,</span> d <span class="token operator">=</span> <span class="token function">h</span><span class="token punctuation">(</span>d<span class="token punctuation">,</span> l <span class="token operator">=</span> <span class="token function">h</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span> u<span class="token punctuation">,</span> f<span class="token punctuation">,</span> d<span class="token punctuation">,</span> s<span class="token punctuation">[</span>g <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1530992060</span><span class="token punctuation">)</span><span class="token punctuation">,</span> u<span class="token punctuation">,</span> f<span class="token punctuation">,</span> s<span class="token punctuation">[</span>g <span class="token operator">+</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">1272893353</span><span class="token punctuation">)</span><span class="token punctuation">,</span> l<span class="token punctuation">,</span> u<span class="token punctuation">,</span> s<span class="token punctuation">[</span>g <span class="token operator">+</span> <span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">155497632</span><span class="token punctuation">)</span><span class="token punctuation">,</span> d<span class="token punctuation">,</span> l<span class="token punctuation">,</span> s<span class="token punctuation">[</span>g <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1094730640</span><span class="token punctuation">)</span><span class="token punctuation">,</span> f <span class="token operator">=</span> <span class="token function">h</span><span class="token punctuation">(</span>f<span class="token punctuation">,</span> d <span class="token operator">=</span> <span class="token function">h</span><span class="token punctuation">(</span>d<span class="token punctuation">,</span> l <span class="token operator">=</span> <span class="token function">h</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span> u<span class="token punctuation">,</span> f<span class="token punctuation">,</span> d<span class="token punctuation">,</span> s<span class="token punctuation">[</span>g <span class="token operator">+</span> <span class="token number">13</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">681279174</span><span class="token punctuation">)</span><span class="token punctuation">,</span> u<span class="token punctuation">,</span> f<span class="token punctuation">,</span> s<span class="token punctuation">[</span>g <span class="token operator">+</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">358537222</span><span class="token punctuation">)</span><span class="token punctuation">,</span> l<span class="token punctuation">,</span> u<span class="token punctuation">,</span> s<span class="token punctuation">[</span>g <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">722521979</span><span class="token punctuation">)</span><span class="token punctuation">,</span> d<span class="token punctuation">,</span> l<span class="token punctuation">,</span> s<span class="token punctuation">[</span>g <span class="token operator">+</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">,</span> <span class="token number">76029189</span><span class="token punctuation">)</span><span class="token punctuation">,</span> f <span class="token operator">=</span> <span class="token function">h</span><span class="token punctuation">(</span>f<span class="token punctuation">,</span> d <span class="token operator">=</span> <span class="token function">h</span><span class="token punctuation">(</span>d<span class="token punctuation">,</span> l <span class="token operator">=</span> <span class="token function">h</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span> u<span class="token punctuation">,</span> f<span class="token punctuation">,</span> d<span class="token punctuation">,</span> s<span class="token punctuation">[</span>g <span class="token operator">+</span> <span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">640364487</span><span class="token punctuation">)</span><span class="token punctuation">,</span> u<span class="token punctuation">,</span> f<span class="token punctuation">,</span> s<span class="token punctuation">[</span>g <span class="token operator">+</span> <span class="token number">12</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">421815835</span><span class="token punctuation">)</span><span class="token punctuation">,</span> l<span class="token punctuation">,</span> u<span class="token punctuation">,</span> s<span class="token punctuation">[</span>g <span class="token operator">+</span> <span class="token number">15</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">530742520</span><span class="token punctuation">)</span><span class="token punctuation">,</span> d<span class="token punctuation">,</span> l<span class="token punctuation">,</span> s<span class="token punctuation">[</span>g <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">995338651</span><span class="token punctuation">)</span><span class="token punctuation">,</span> f <span class="token operator">=</span> <span class="token function">m</span><span class="token punctuation">(</span>f<span class="token punctuation">,</span> d <span class="token operator">=</span> <span class="token function">m</span><span class="token punctuation">(</span>d<span class="token punctuation">,</span> l <span class="token operator">=</span> <span class="token function">m</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span> u<span class="token punctuation">,</span> f<span class="token punctuation">,</span> d<span class="token punctuation">,</span> s<span class="token punctuation">[</span>g <span class="token operator">+</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">198630844</span><span class="token punctuation">)</span><span class="token punctuation">,</span> u<span class="token punctuation">,</span> f<span class="token punctuation">,</span> s<span class="token punctuation">[</span>g <span class="token operator">+</span> <span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">1126891415</span><span class="token punctuation">)</span><span class="token punctuation">,</span> l<span class="token punctuation">,</span> u<span class="token punctuation">,</span> s<span class="token punctuation">[</span>g <span class="token operator">+</span> <span class="token number">14</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1416354905</span><span class="token punctuation">)</span><span class="token punctuation">,</span> d<span class="token punctuation">,</span> l<span class="token punctuation">,</span> s<span class="token punctuation">[</span>g <span class="token operator">+</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">21</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">57434055</span><span class="token punctuation">)</span><span class="token punctuation">,</span> f <span class="token operator">=</span> <span class="token function">m</span><span class="token punctuation">(</span>f<span class="token punctuation">,</span> d <span class="token operator">=</span> <span class="token function">m</span><span class="token punctuation">(</span>d<span class="token punctuation">,</span> l <span class="token operator">=</span> <span class="token function">m</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span> u<span class="token punctuation">,</span> f<span class="token punctuation">,</span> d<span class="token punctuation">,</span> s<span class="token punctuation">[</span>g <span class="token operator">+</span> <span class="token number">12</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">1700485571</span><span class="token punctuation">)</span><span class="token punctuation">,</span> u<span class="token punctuation">,</span> f<span class="token punctuation">,</span> s<span class="token punctuation">[</span>g <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1894986606</span><span class="token punctuation">)</span><span class="token punctuation">,</span> l<span class="token punctuation">,</span> u<span class="token punctuation">,</span> s<span class="token punctuation">[</span>g <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1051523</span><span class="token punctuation">)</span><span class="token punctuation">,</span> d<span class="token punctuation">,</span> l<span class="token punctuation">,</span> s<span class="token punctuation">[</span>g <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">21</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">2054922799</span><span class="token punctuation">)</span><span class="token punctuation">,</span> f <span class="token operator">=</span> <span class="token function">m</span><span class="token punctuation">(</span>f<span class="token punctuation">,</span> d <span class="token operator">=</span> <span class="token function">m</span><span class="token punctuation">(</span>d<span class="token punctuation">,</span> l <span class="token operator">=</span> <span class="token function">m</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span> u<span class="token punctuation">,</span> f<span class="token punctuation">,</span> d<span class="token punctuation">,</span> s<span class="token punctuation">[</span>g <span class="token operator">+</span> <span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">1873313359</span><span class="token punctuation">)</span><span class="token punctuation">,</span> u<span class="token punctuation">,</span> f<span class="token punctuation">,</span> s<span class="token punctuation">[</span>g <span class="token operator">+</span> <span class="token number">15</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">30611744</span><span class="token punctuation">)</span><span class="token punctuation">,</span> l<span class="token punctuation">,</span> u<span class="token punctuation">,</span> s<span class="token punctuation">[</span>g <span class="token operator">+</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1560198380</span><span class="token punctuation">)</span><span class="token punctuation">,</span> d<span class="token punctuation">,</span> l<span class="token punctuation">,</span> s<span class="token punctuation">[</span>g <span class="token operator">+</span> <span class="token number">13</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">21</span><span class="token punctuation">,</span> <span class="token number">1309151649</span><span class="token punctuation">)</span><span class="token punctuation">,</span> f <span class="token operator">=</span> <span class="token function">m</span><span class="token punctuation">(</span>f<span class="token punctuation">,</span> d <span class="token operator">=</span> <span class="token function">m</span><span class="token punctuation">(</span>d<span class="token punctuation">,</span> l <span class="token operator">=</span> <span class="token function">m</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span> u<span class="token punctuation">,</span> f<span class="token punctuation">,</span> d<span class="token punctuation">,</span> s<span class="token punctuation">[</span>g <span class="token operator">+</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">145523070</span><span class="token punctuation">)</span><span class="token punctuation">,</span> u<span class="token punctuation">,</span> f<span class="token punctuation">,</span> s<span class="token punctuation">[</span>g <span class="token operator">+</span> <span class="token number">11</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1120210379</span><span class="token punctuation">)</span><span class="token punctuation">,</span> l<span class="token punctuation">,</span> u<span class="token punctuation">,</span> s<span class="token punctuation">[</span>g <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">718787259</span><span class="token punctuation">)</span><span class="token punctuation">,</span> d<span class="token punctuation">,</span> l<span class="token punctuation">,</span> s<span class="token punctuation">[</span>g <span class="token operator">+</span> <span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">21</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">343485551</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            l <span class="token operator">=</span> l <span class="token operator">+</span> y <span class="token operator">&gt;&gt;&gt;</span> <span class="token number">0</span><span class="token punctuation">,</span>
            u <span class="token operator">=</span> u <span class="token operator">+</span> j <span class="token operator">&gt;&gt;&gt;</span> <span class="token number">0</span><span class="token punctuation">,</span>
            f <span class="token operator">=</span> f <span class="token operator">+</span> <span class="token constant">S</span> <span class="token operator">&gt;&gt;&gt;</span> <span class="token number">0</span><span class="token punctuation">,</span>
            d <span class="token operator">=</span> d <span class="token operator">+</span> v <span class="token operator">&gt;&gt;&gt;</span> <span class="token number">0</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token function">endian</span><span class="token punctuation">(</span><span class="token punctuation">[</span>l<span class="token punctuation">,</span> u<span class="token punctuation">,</span> f<span class="token punctuation">,</span> d<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">wordsToBytes</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> n <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> r <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> r <span class="token operator">&lt;</span> <span class="token number">32</span> <span class="token operator">*</span> t<span class="token punctuation">.</span>length<span class="token punctuation">;</span> r <span class="token operator">+=</span> <span class="token number">8</span><span class="token punctuation">)</span>
        n<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>t<span class="token punctuation">[</span>r <span class="token operator">&gt;&gt;&gt;</span> <span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">&gt;&gt;&gt;</span> <span class="token number">24</span> <span class="token operator">-</span> r <span class="token operator">%</span> <span class="token number">32</span> <span class="token operator">&amp;</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> n
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">bytesToHex</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> n <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> r <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> r <span class="token operator">&lt;</span> t<span class="token punctuation">.</span>length<span class="token punctuation">;</span> r<span class="token operator">++</span><span class="token punctuation">)</span>
        n<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">(</span>t<span class="token punctuation">[</span>r<span class="token punctuation">]</span> <span class="token operator">&gt;&gt;&gt;</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            n<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">15</span> <span class="token operator">&amp;</span> t<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> n<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">d</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> r</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token number">0</span> <span class="token operator">===</span> t <span class="token operator">||</span> <span class="token keyword">null</span> <span class="token operator">===</span> t<span class="token punctuation">)</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">"Illegal argument "</span> <span class="token operator">+</span> t<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> e <span class="token operator">=</span> <span class="token function">wordsToBytes</span><span class="token punctuation">(</span><span class="token function">i</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span> r<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> r <span class="token operator">&amp;&amp;</span> r<span class="token punctuation">.</span>asBytes <span class="token operator">?</span> e <span class="token operator">:</span> r <span class="token operator">&amp;&amp;</span> r<span class="token punctuation">.</span>asString <span class="token operator">?</span> o<span class="token punctuation">.</span><span class="token function">bytesToString</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">bytesToHex</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">getsianature</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">var</span> s <span class="token operator">=</span> <span class="token punctuation">[</span>
        <span class="token string">"NVPh5oo715z5DIWAeQlhMDsWXXQV4hwt"</span><span class="token punctuation">,</span>
        <span class="token string">"appid=1014"</span><span class="token punctuation">,</span>
        <span class="token string">"clienttime=1741411989613"</span><span class="token punctuation">,</span>
        <span class="token string">"clientver=20000"</span><span class="token punctuation">,</span>
        <span class="token string">"dfid=3Mm61k0WDxvm033Epz2worRG"</span><span class="token punctuation">,</span>
        <span class="token string">"encode_album_audio_id=j410q60"</span><span class="token punctuation">,</span>
        <span class="token string">"mid=70789bebe63fb74c52e4a911853f5450"</span><span class="token punctuation">,</span>
        <span class="token string">"platid=4"</span><span class="token punctuation">,</span>
        <span class="token string">"srcappid=2919"</span><span class="token punctuation">,</span>
        <span class="token string">"token=cbfe2e174e4b97fd6aca35682cdba3d2b431c4ed95e2dbd1779e37a7975b672c"</span><span class="token punctuation">,</span>
        <span class="token string">"userid=2307902397"</span><span class="token punctuation">,</span>
        <span class="token string">"uuid=70789bebe63fb74c52e4a911853f5450"</span><span class="token punctuation">,</span>
        <span class="token string">"NVPh5oo715z5DIWAeQlhMDsWXXQV4hwt"</span>
    <span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">d</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">getsianature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
    <p>
     经过一系列调试，可以发现生成的结果与浏览器生成的值一样，那么生成signature的代码就没问题了。
    </p>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/img_convert/844d3ec89dd4a68d3dd84e59da39aa27.png"/>
    </p>
    <p>
     将一些会变的值改为变量，可以看到参数
     <code>
      s
     </code>
     的值里只有
     <code>
      clienttime
     </code>
     的值是会变的，因此修改上述代码中
     <code>
      getsianature
     </code>
     函数，将参数
     <code>
      s
     </code>
     的值放在python代码中，
     <code>
      getsianature
     </code>
     函数改完如下图所示：
    </p>
    <pre><code class="prism language-javascript"><span class="token keyword">function</span> <span class="token function">getsianature</span><span class="token punctuation">(</span><span class="token parameter">s</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token function">d</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
    <h2>
     <a id="_197">
     </a>
     三、获取多首歌
    </h2>
    <h3>
     <a id="1__198">
     </a>
     1. 分析过程
    </h3>
    <p>
     点击不同的歌，可以发现每首歌的参数
     <code>
      encode_album_audio_id
     </code>
     都不同，因此需要获取
     <code>
      encode_album_audio_id
     </code>
    </p>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/img_convert/06f7106dce6fdf5cb13fd53be422ece2.png"/>
    </p>
    <p>
     搜索歌名，找到歌曲的id
    </p>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/img_convert/524dcef08f11566cd6f85411a8753d7e.png"/>
    </p>
    <p>
     接着查看请求参数，同样有一个
     <code>
      signature
     </code>
     参数，刷新多次网页发现
     <code>
      signature
     </code>
     参数会变化，那么重复之前分析
     <code>
      signature
     </code>
     的步骤
    </p>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/img_convert/e0939435cedd67ed053adc1efbe1fd4c.png"/>
    </p>
    <p>
     打下断点，查看中断的位置，参数
     <code>
      s
     </code>
     有所变化
    </p>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/img_convert/0b59125f0153ef1a6707391c9939ae9c.png"/>
    </p>
    <p>
     打印
     <code>
      s
     </code>
     ，查看
     <code>
      s
     </code>
     的内容，除此之外没有变化，那么就沿用先前的代码
    </p>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/img_convert/9e6ee92daf5c1cdc6090c968e2da24be.png"/>
    </p>
    <h3>
     <a id="2__219">
     </a>
     2. 代码实现
    </h3>
    <p>
     完整代码如下，注意这里调用了JavaScript代码，需要安装PyExecJS模块：
     <code>
      pip install PyExecJS -i https://pypi.tuna.tsinghua.edu.cn/simple。
     </code>
    </p>
    <p>
     本代码中JavaScript文件名为
     <code>
      kugou.js
     </code>
     ，JavaScript代码在参数
     <code>
      signature
     </code>
     的分析中有写到，以下为python代码：
    </p>
    <pre><code class="prism language-python"><span class="token keyword">import</span> json
<span class="token keyword">import</span> re
<span class="token keyword">import</span> time
<span class="token keyword">import</span> requests
<span class="token keyword">import</span> execjs


<span class="token keyword">class</span> <span class="token class-name">kugou_music</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>headers <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
            <span class="token string">'User-Agent'</span><span class="token punctuation">:</span> <span class="token string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36'</span><span class="token punctuation">,</span>
            <span class="token string">'Referer'</span><span class="token punctuation">:</span> <span class="token string">'https://www.kugou.com/'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span>

    <span class="token keyword">def</span> <span class="token function">get_signature</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> s<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">"kugou.js"</span><span class="token punctuation">,</span> <span class="token string">"r"</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">"utf-8"</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
            js <span class="token operator">=</span> f<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span>
        ctx <span class="token operator">=</span> execjs<span class="token punctuation">.</span><span class="token builtin">compile</span><span class="token punctuation">(</span>js<span class="token punctuation">)</span>
        signature <span class="token operator">=</span> ctx<span class="token punctuation">.</span>call<span class="token punctuation">(</span><span class="token string">"getsianature"</span><span class="token punctuation">,</span> s<span class="token punctuation">)</span>
        <span class="token keyword">return</span> signature

    <span class="token keyword">def</span> <span class="token function">get_one_song_url</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> audio_id<span class="token punctuation">)</span><span class="token punctuation">:</span>
        timestamp <span class="token operator">=</span> <span class="token builtin">str</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        s <span class="token operator">=</span> <span class="token punctuation">[</span>
            <span class="token string">"NVPh5oo715z5DIWAeQlhMDsWXXQV4hwt"</span><span class="token punctuation">,</span>
            <span class="token string">"appid=1014"</span><span class="token punctuation">,</span>
            <span class="token string-interpolation"><span class="token string">f"clienttime=</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>timestamp<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">,</span>
            <span class="token string">"clientver=20000"</span><span class="token punctuation">,</span>
            <span class="token string">"dfid=3Mm61k0WDxvm033Epz2worRG"</span><span class="token punctuation">,</span>
            <span class="token string-interpolation"><span class="token string">f"encode_album_audio_id=</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>audio_id<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">,</span>
            <span class="token string">"mid=70789bebe63fb74c52e4a911853f5450"</span><span class="token punctuation">,</span>
            <span class="token string">"platid=4"</span><span class="token punctuation">,</span>
            <span class="token string">"srcappid=2919"</span><span class="token punctuation">,</span>
            <span class="token string">"token=cbfe2e174e4b97fd6aca35682cdba3d2b431c4ed95e2dbd1779e37a7975b672c"</span><span class="token punctuation">,</span>
            <span class="token string">"userid=2307902397"</span><span class="token punctuation">,</span>
            <span class="token string">"uuid=70789bebe63fb74c52e4a911853f5450"</span><span class="token punctuation">,</span>
            <span class="token string">"NVPh5oo715z5DIWAeQlhMDsWXXQV4hwt"</span>
        <span class="token punctuation">]</span>
        signature <span class="token operator">=</span> self<span class="token punctuation">.</span>get_signature<span class="token punctuation">(</span>s<span class="token punctuation">)</span>
        params <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
            <span class="token string">'srcappid'</span><span class="token punctuation">:</span> <span class="token string">'2919'</span><span class="token punctuation">,</span>
            <span class="token string">'clientver'</span><span class="token punctuation">:</span> <span class="token string">'20000'</span><span class="token punctuation">,</span>
            <span class="token string">'clienttime'</span><span class="token punctuation">:</span> timestamp<span class="token punctuation">,</span>
            <span class="token string">'mid'</span><span class="token punctuation">:</span> <span class="token string">'70789bebe63fb74c52e4a911853f5450'</span><span class="token punctuation">,</span>
            <span class="token string">'uuid'</span><span class="token punctuation">:</span> <span class="token string">'70789bebe63fb74c52e4a911853f5450'</span><span class="token punctuation">,</span>
            <span class="token string">'dfid'</span><span class="token punctuation">:</span> <span class="token string">'3Mm61k0WDxvm033Epz2worRG'</span><span class="token punctuation">,</span>
            <span class="token string">'appid'</span><span class="token punctuation">:</span> <span class="token string">'1014'</span><span class="token punctuation">,</span>
            <span class="token string">'platid'</span><span class="token punctuation">:</span> <span class="token string">'4'</span><span class="token punctuation">,</span>
            <span class="token string">'encode_album_audio_id'</span><span class="token punctuation">:</span> audio_id<span class="token punctuation">,</span>
            <span class="token string">'token'</span><span class="token punctuation">:</span> <span class="token string">'cbfe2e174e4b97fd6aca35682cdba3d2b431c4ed95e2dbd1779e37a7975b672c'</span><span class="token punctuation">,</span>
            <span class="token string">'userid'</span><span class="token punctuation">:</span> <span class="token string">'2307902397'</span><span class="token punctuation">,</span>
            <span class="token string">'signature'</span><span class="token punctuation">:</span> signature
        <span class="token punctuation">}</span>
        one_song_url <span class="token operator">=</span> <span class="token string">'https://wwwapi.kugou.com/play/songinfo'</span>
        response <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>one_song_url<span class="token punctuation">,</span> headers<span class="token operator">=</span>self<span class="token punctuation">.</span>headers<span class="token punctuation">,</span> params<span class="token operator">=</span>params<span class="token punctuation">)</span>

        song_url <span class="token operator">=</span> response<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'data'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'play_url'</span><span class="token punctuation">]</span>
        <span class="token keyword">return</span> song_url

    <span class="token keyword">def</span> <span class="token function">get_signal_music</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> audio_id<span class="token punctuation">,</span> audio_name<span class="token punctuation">)</span><span class="token punctuation">:</span>
        song_url <span class="token operator">=</span> self<span class="token punctuation">.</span>get_one_song_url<span class="token punctuation">(</span>audio_id<span class="token punctuation">)</span>
        response <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>song_url<span class="token punctuation">,</span> headers<span class="token operator">=</span>self<span class="token punctuation">.</span>headers<span class="token punctuation">)</span>
        <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>audio_name<span class="token punctuation">}</span></span><span class="token string">.mp3'</span></span><span class="token punctuation">,</span> <span class="token string">'wb'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
            f<span class="token punctuation">.</span>write<span class="token punctuation">(</span>response<span class="token punctuation">.</span>content<span class="token punctuation">)</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>audio_name<span class="token punctuation">}</span></span><span class="token string">.mp3下载完成'</span></span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">get_song_id</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>keyword<span class="token punctuation">)</span><span class="token punctuation">:</span>
        timestamp <span class="token operator">=</span> <span class="token builtin">str</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        s <span class="token operator">=</span> <span class="token punctuation">[</span>
            <span class="token string">"NVPh5oo715z5DIWAeQlhMDsWXXQV4hwt"</span><span class="token punctuation">,</span>
            <span class="token string">"appid=1014"</span><span class="token punctuation">,</span>
            <span class="token string">"bitrate=0"</span><span class="token punctuation">,</span>
            <span class="token string">"callback=callback123"</span><span class="token punctuation">,</span>
            <span class="token string-interpolation"><span class="token string">f"clienttime=</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>timestamp<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">,</span>
            <span class="token string">"clientver=1000"</span><span class="token punctuation">,</span>
            <span class="token string">"dfid=3Mm61k0WDxvm033Epz2worRG"</span><span class="token punctuation">,</span>
            <span class="token string">"filter=10"</span><span class="token punctuation">,</span>
            <span class="token string">"inputtype=0"</span><span class="token punctuation">,</span>
            <span class="token string">"iscorrection=1"</span><span class="token punctuation">,</span>
            <span class="token string">"isfuzzy=0"</span><span class="token punctuation">,</span>
            <span class="token string-interpolation"><span class="token string">f"keyword=</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>keyword<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">,</span>
            <span class="token string">"mid=70789bebe63fb74c52e4a911853f5450"</span><span class="token punctuation">,</span>
            <span class="token string">"page=1"</span><span class="token punctuation">,</span>
            <span class="token string">"pagesize=30"</span><span class="token punctuation">,</span>
            <span class="token string">"platform=WebFilter"</span><span class="token punctuation">,</span>
            <span class="token string">"privilege_filter=0"</span><span class="token punctuation">,</span>
            <span class="token string">"srcappid=2919"</span><span class="token punctuation">,</span>
            <span class="token string">"token=cbfe2e174e4b97fd6aca35682cdba3d2b431c4ed95e2dbd1779e37a7975b672c"</span><span class="token punctuation">,</span>
            <span class="token string">"userid=2307902397"</span><span class="token punctuation">,</span>
            <span class="token string">"uuid=70789bebe63fb74c52e4a911853f5450"</span><span class="token punctuation">,</span>
            <span class="token string">"NVPh5oo715z5DIWAeQlhMDsWXXQV4hwt"</span>
        <span class="token punctuation">]</span>
        signature <span class="token operator">=</span> self<span class="token punctuation">.</span>get_signature<span class="token punctuation">(</span>s<span class="token punctuation">)</span>
        params <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
            <span class="token string">'callback'</span><span class="token punctuation">:</span> <span class="token string">'callback123'</span><span class="token punctuation">,</span>
            <span class="token string">'srcappid'</span><span class="token punctuation">:</span> <span class="token string">'2919'</span><span class="token punctuation">,</span>
            <span class="token string">'clientver'</span><span class="token punctuation">:</span> <span class="token string">'1000'</span><span class="token punctuation">,</span>
            <span class="token string">'clienttime'</span><span class="token punctuation">:</span> timestamp<span class="token punctuation">,</span>
            <span class="token string">'mid'</span><span class="token punctuation">:</span> <span class="token string">'70789bebe63fb74c52e4a911853f5450'</span><span class="token punctuation">,</span>
            <span class="token string">'uuid'</span><span class="token punctuation">:</span> <span class="token string">'70789bebe63fb74c52e4a911853f5450'</span><span class="token punctuation">,</span>
            <span class="token string">'dfid'</span><span class="token punctuation">:</span> <span class="token string">'3Mm61k0WDxvm033Epz2worRG'</span><span class="token punctuation">,</span>
            <span class="token string">'keyword'</span><span class="token punctuation">:</span> keyword<span class="token punctuation">,</span>
            <span class="token string">'page'</span><span class="token punctuation">:</span> <span class="token string">'1'</span><span class="token punctuation">,</span>
            <span class="token string">'pagesize'</span><span class="token punctuation">:</span> <span class="token string">'30'</span><span class="token punctuation">,</span>
            <span class="token string">'bitrate'</span><span class="token punctuation">:</span> <span class="token string">'0'</span><span class="token punctuation">,</span>
            <span class="token string">'isfuzzy'</span><span class="token punctuation">:</span> <span class="token string">'0'</span><span class="token punctuation">,</span>
            <span class="token string">'inputtype'</span><span class="token punctuation">:</span> <span class="token string">'0'</span><span class="token punctuation">,</span>
            <span class="token string">'platform'</span><span class="token punctuation">:</span> <span class="token string">'WebFilter'</span><span class="token punctuation">,</span>
            <span class="token string">'userid'</span><span class="token punctuation">:</span> <span class="token string">'2307902397'</span><span class="token punctuation">,</span>
            <span class="token string">'iscorrection'</span><span class="token punctuation">:</span> <span class="token string">'1'</span><span class="token punctuation">,</span>
            <span class="token string">'privilege_filter'</span><span class="token punctuation">:</span> <span class="token string">'0'</span><span class="token punctuation">,</span>
            <span class="token string">'filter'</span><span class="token punctuation">:</span> <span class="token string">'10'</span><span class="token punctuation">,</span>
            <span class="token string">'token'</span><span class="token punctuation">:</span> <span class="token string">'cbfe2e174e4b97fd6aca35682cdba3d2b431c4ed95e2dbd1779e37a7975b672c'</span><span class="token punctuation">,</span>
            <span class="token string">'appid'</span><span class="token punctuation">:</span> <span class="token string">'1014'</span><span class="token punctuation">,</span>
            <span class="token string">'signature'</span><span class="token punctuation">:</span> signature
        <span class="token punctuation">}</span>
        song_id_url <span class="token operator">=</span> <span class="token string">'https://complexsearchretry.kugou.com/v2/search/song'</span>
        response <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>song_id_url<span class="token punctuation">,</span> headers<span class="token operator">=</span>self<span class="token punctuation">.</span>headers<span class="token punctuation">,</span> params<span class="token operator">=</span>params<span class="token punctuation">,</span> verify<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
        temp <span class="token operator">=</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token string">r'callback123(.*)'</span><span class="token punctuation">,</span> response<span class="token punctuation">.</span>text<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>
        temp <span class="token operator">=</span> json<span class="token punctuation">.</span>loads<span class="token punctuation">(</span>temp<span class="token punctuation">)</span>
        song <span class="token operator">=</span> temp<span class="token punctuation">[</span><span class="token string">'data'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'lists'</span><span class="token punctuation">]</span>
        <span class="token keyword">return</span> song

    <span class="token keyword">def</span> <span class="token function">get_all_song</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>keyword<span class="token punctuation">)</span><span class="token punctuation">:</span>
        song <span class="token operator">=</span> self<span class="token punctuation">.</span>get_song_id<span class="token punctuation">(</span>keyword<span class="token punctuation">)</span>
        <span class="token keyword">for</span> i <span class="token keyword">in</span> song<span class="token punctuation">:</span>
            song_id <span class="token operator">=</span> i<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'EMixSongID'</span><span class="token punctuation">)</span>
            song_name <span class="token operator">=</span> i<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'FileName'</span><span class="token punctuation">)</span>
            <span class="token comment"># print(song_name, song_id)</span>
            <span class="token keyword">try</span><span class="token punctuation">:</span>
                self<span class="token punctuation">.</span>get_signal_music<span class="token punctuation">(</span>song_id<span class="token punctuation">,</span> song_name<span class="token punctuation">)</span>
            <span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>
                <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>song_name<span class="token punctuation">}</span></span><span class="token string">下载失败:'</span></span><span class="token punctuation">,</span> e<span class="token punctuation">)</span>


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    kugou <span class="token operator">=</span> kugou_music<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment"># kugou.get_signal_music('j410q60')</span>
    keyword<span class="token operator">=</span><span class="token string">'周杰伦'</span>
    kugou<span class="token punctuation">.</span>get_all_song<span class="token punctuation">(</span>keyword<span class="token punctuation">)</span>

</code></pre>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f37343739383734322f:61727469636c652f64657461696c732f313436313230353131" class_="artid" style="display:none">
 </p>
</div>


