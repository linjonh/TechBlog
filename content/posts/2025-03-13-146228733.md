---
layout: post
title: "Gitlab服务器重置密码"
date: 2025-03-13 13:35:37 +0800
description: "公司的Gitlab服务器用的时间不短了，需要更新，但root账号长久未登录，文档中记录的密码登不上，只能重置密码了。输入exit退出Rails控制台，再输入exit退出容器。访问GitLab主页，使用新密码登录root账户。这个gitlab是docker方式部署。二、启动GitLab Rails控制台。一、进入GitLab容器。返回true表示保存成功。执行以下命令进入容器。三、重置root密码。输入以下命令修改密码。"
keywords: "Gitlab服务器重置密码"
categories: ['未分类']
tags: ['运维', '服务器', 'Gitlab']
artid: "146228733"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146228733
    alt: "Gitlab服务器重置密码"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146228733
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146228733
cover: https://bing.ee123.net/img/rand?artid=146228733
image: https://bing.ee123.net/img/rand?artid=146228733
img: https://bing.ee123.net/img/rand?artid=146228733
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Gitlab服务器重置密码
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p style="margin-left:0; margin-right:0; text-align:justify">
     公司的Gitlab服务器用的时间不短了，需要更新，但root账号长久未登录，文档中记录的密码登不上，只能重置密码了。
    </p>
    <p style="margin-left:0; margin-right:0; text-align:justify">
     这个gitlab是docker方式部署
    </p>
    <p style="margin-left:0; margin-right:0; text-align:justify">
     一、进入GitLab容器
    </p>
    <p style="margin-left:0; margin-right:0; text-align:justify">
     执行以下命令进入容器
    </p>
    <p style="margin-left:0; margin-right:0; text-align:justify">
     docker exec -it gitlab  /bin/bash
    </p>
    <p style="margin-left:0; margin-right:0; text-align:justify">
     二、启动GitLab Rails控制台
    </p>
    <p style="margin-left:0; margin-right:0; text-align:justify">
     在容器内执行命令进入生产环境的Rails控制台：
    </p>
    <p style="margin-left:0; margin-right:0; text-align:justify">
     gitlab-rails console -e production
    </p>
    <p style="margin-left:0; margin-right:0; text-align:justify">
     三、重置root密码
    </p>
    <p style="margin-left:0; margin-right:0; text-align:justify">
     查找root用户
    </p>
    <p style="margin-left:0; margin-right:0; text-align:justify">
     输入以下命令定位用户：
    </p>
    <p style="margin-left:0; margin-right:0; text-align:justify">
     user = User.find_by(username: 'root')
    </p>
    <p style="margin-left:0; margin-right:0; text-align:justify">
     设置新密码
    </p>
    <p style="margin-left:0; margin-right:0; text-align:justify">
     输入以下命令修改密码
    </p>
    <p style="margin-left:0; margin-right:0; text-align:justify">
     user.password = 'new_password'
    </p>
    <p style="margin-left:0; margin-right:0; text-align:justify">
     user.password_confirmation = 'new_password'
    </p>
    <p style="margin-left:0; margin-right:0; text-align:justify">
     保存更改
    </p>
    <p style="margin-left:0; margin-right:0; text-align:justify">
     执行保存操作：
    </p>
    <p style="margin-left:0; margin-right:0; text-align:justify">
     user.save!
    </p>
    <p style="margin-left:0; margin-right:0; text-align:justify">
     返回true表示保存成功
    </p>
    <p style="margin-left:0; margin-right:0; text-align:justify">
    </p>
    <p style="margin-left:0; margin-right:0; text-align:justify">
     四、退出并验证
    </p>
    <p style="margin-left:0; margin-right:0; text-align:justify">
     输入exit退出Rails控制台，再输入exit退出容器。
    </p>
    <p style="margin-left:0; margin-right:0; text-align:justify">
     访问GitLab主页，使用新密码登录root账户。
    </p>
    <p style="margin-left:0; margin-right:0; text-align:justify">
     登录成功。
    </p>
    <p style="margin-left:0; margin-right:0; text-align:justify">
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a:2f2f626c6f672e6373646e2e6e65742f6c696f6e5f7a6a672f:61727469636c652f64657461696c732f313436323238373333" class_="artid" style="display:none">
 </p>
</div>


