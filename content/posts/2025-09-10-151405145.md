---
layout: post
title: "aiç”Ÿæˆæ–‡ç« ,æµå¼ä¼ è¾“uniapp,å¾®ä¿¡å°ç¨‹åº"
date: 2025-09-10T20:30:00+0800
description: "uniappç”Ÿæˆæ–‡ç« åŠŸèƒ½ï¼ŒåŒ…å«aiç”Ÿæˆé€»è¾‘ï¼Œå†…å®¹ç”Ÿæˆå®æ—¶æ‰“å­—æœºåŠŸèƒ½ï¼Œaiæ•°æ®å¤„ç†ç­‰"
keywords: "aiç”Ÿæˆæ–‡ç« ï¼Œæµå¼ä¼ è¾“ï¼ˆuniappï¼Œå¾®ä¿¡å°ç¨‹åºï¼‰"
categories: ['æœªåˆ†ç±»']
tags: ['æµå¼ä¼ è¾“', 'å¾®ä¿¡å°ç¨‹åº', 'App', 'Ai']
artid: "151405145"
arturl: "https://blog.csdn.net/weixin_57844432/article/details/151405145"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=151405145
    alt: "aiç”Ÿæˆæ–‡ç« ,æµå¼ä¼ è¾“uniapp,å¾®ä¿¡å°ç¨‹åº"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=151405145
featuredImagePreview: https://bing.ee123.net/img/rand?artid=151405145
cover: https://bing.ee123.net/img/rand?artid=151405145
image: https://bing.ee123.net/img/rand?artid=151405145
img: https://bing.ee123.net/img/rand?artid=151405145
---



# aiç”Ÿæˆæ–‡ç« ï¼Œæµå¼ä¼ è¾“ï¼ˆuniappï¼Œå¾®ä¿¡å°ç¨‹åºï¼‰

![](https://i-operation.csdnimg.cn/images/cf31225e169b4512917b2e77694eb0a2.png)AIæ–‡ç« ç”Ÿæˆä¸æµå¼ä¼ è¾“å®ç°

### 1.ç¯å¢ƒ

Â  Â  Â  Â Â nutui-uniapp+vue3+ts+unocss

### 2.åŠŸèƒ½æºç 

Â  Â  Â  Â  åŒ…å«aiç”Ÿæˆé€»è¾‘ï¼Œå†…å®¹ç”Ÿæˆå®æ—¶æ‰“å­—æœºåŠŸèƒ½ï¼Œaiæ•°æ®å¤„ç†ç­‰

```
<script setup lang="ts">
import {
  queryAIParams,
} from '@/api/pagesA'
import {  submitFn } from '@/api/ai'

import Navbar from '@/components/navBar/index.vue'
import { useAuthStore } from '@/store'
import { imgQuality40 } from '@/utils/imageUrl'
import { isFastClick } from '@/utils/shared'
import { loadingProp, warningProp, successProp } from '@/utils/tostProps'
import { useToast } from 'nutui-uniapp/composables'
import {
  transformToInlineStyleFragment,
  parseHealthContentByAngleBrackets,
  extractMainTitle,
  parseContent,
} from '@/utils/html'

import TextDecoder from '@/utils/TextDecoder'

const authStore = useAuthStore()
const toast = useToast()

// çŠ¶æ€ç®¡ç†
const textContent = ref(
  ''
  // `è®¤è¯†æ…¢æ€§ç–¾ç—…ï¼šç®¡ç†ã€é¢„é˜²ä¸ç”Ÿæ´»æ–¹å¼ æ—¥å¸¸ç”Ÿæ´»ä¸­ï¼Œè®¸å¤šäººéƒ½ä¼šå¬åˆ°èº«è¾¹æœ‰äººæåˆ°é«˜è¡€å‹ã€ç³–å°¿ç—…æˆ–è€…æ…¢æ€§ç–¼ç—›è¿™æ ·çš„é—®é¢˜ã€‚ç®¡ç†ã€é¢„é˜²ä¸ç”Ÿæ´»æ–¹å¼ æ—¥å¸¸ç”Ÿæ´»ä¸­ï¼Œè®¸å¤šäººéƒ½ä¼šå¬åˆ°èº«è¾¹æœ‰äººæåˆ°é«˜è¡€å‹ã€ç³–å°¿ç—…æˆ–è€…æ…¢æ€§ç–¼ç—›è¿™æ ·çš„é—®é¢˜ã€‚ç®¡ç†ã€é¢„é˜²ä¸ç”Ÿæ´»æ–¹å¼ æ—¥å¸¸ç”Ÿæ´»ä¸­ï¼Œè®¸å¤šäººéƒ½ä¼šå¬åˆ°èº«è¾¹æœ‰äººæåˆ°é«˜è¡€å‹ã€ç³–å°¿ç—…æˆ–è€…æ…¢æ€§ç–¼ç—›è¿™æ ·çš„é—®é¢˜ã€‚æœ‰äº›äººæˆ–è®¸å®¶ä¸­ä¹Ÿæœ‰é•¿è¾ˆéœ€è¦æ¯å¤©æŒ‰åŒ»å˜±åƒè¯ã€æ§åˆ¶é¥®é£Ÿï¼Œä¹Ÿæœ‰äººç–‘æƒ‘ï¼šæ…¢æ€§ç—…åˆ°åº•æ˜¯æ€ä¹ˆå‘ç”Ÿçš„ï¼Ÿè‡ªå·±æœ‰æ²¡æœ‰é£é™©ï¼Ÿå…¶å®ï¼Œæ…¢æ€§ç–¾ç—…ç¦»æˆ‘ä»¬å¹¶ä¸é¥è¿œï¼Œä½†ä¹Ÿæ²¡å¿…è¦è°ˆè™è‰²å˜ã€‚æŠŠæ¡ä¸€äº›åŸºæœ¬çŸ¥è¯†ï¼Œè°ƒæ•´ç”Ÿæ´»ä¹ æƒ¯ï¼Œå¤§å¤šæ•°æ…¢æ€§ç—…å…¶å®éƒ½èƒ½ç®¡å¾—ä½ï¼Œä¸å¿…ä¸ºæœªçŸ¥çš„å°æ‹…å¿ƒè€Œç„¦è™‘ã€‚ 01 ç®€å•èŠä¸€èŠï¼šæ…¢æ€§ç–¾ç—…åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ æ…¢æ€§ç–¾ç—…ï¼Œè¿™ä¸ªè¯å…¶å®å¹¶ä¸å¤æ‚ã€‚ç®€å•æ¥è¯´ï¼Œå°±æ˜¯é‚£äº›æ‹–å¾—æ¯”è¾ƒä¹…ã€ç—…ç¨‹é•¿ã€è¿›å±•æ…¢çš„å¥åº·é—®é¢˜ï¼Œæ¯”å¦‚é«˜è¡€å‹ã€ç³–å°¿ç—…ã€æ…¢é˜»è‚ºï¼Œç”šè‡³æœ‰çš„äººå¸¸å¹´è…°è…¿ç—›ã€å…³èŠ‚ä¸èˆ’æœï¼Œä¹Ÿç®—åœ¨å†…ã€‚è¿™ç±»æ¯›ç—…ä¸åƒæ„Ÿå†’å‘çƒ§é‚£æ ·æ¥å¾—å¿«å»å¾—ä¹Ÿå¿«ï¼Œåè€Œåƒä¸ª"é‚»å±…"ï¼Œä½ æŠŠå®ƒç®¡å¥½äº†ï¼Œä¹Ÿèƒ½å¹³å®‰æ— äº‹ã€‚æ¯ä¸ªäººéƒ½æœ‰å¯èƒ½åœ¨æŸä¸€æ—¶æ®µé‡åˆ°æ…¢æ€§ç—…çš„å›°æ‰°ï¼Œä½†å¤§å¯ä¸å¿…è¢«å“åˆ°ï¼Œä¸€æ–¹é¢è¿™äº›ç–¾ç—…çš„æ—©æœŸå¾å…†å¾€ä¸æ˜æ˜¾ï¼Œå¦ä¸€æ–¹é¢é€šè¿‡ç§‘å­¦ç®¡ç†ï¼Œç”Ÿæ´»è´¨é‡ä¸€æ ·å¯ä»¥å¾ˆå¥½ã€‚ æ ¹æ®ä¸–ç•Œå«ç”Ÿç»„ç»‡çš„æ•°æ®ï¼Œå…¨çƒçº¦70%çš„æ­»äº¡å’Œæ…¢æ€§ç–¾ç—…æœ‰å…³ï¼ˆWHO, Noncommunicable diseases, 2021ï¼‰ã€‚åœ¨ä¸­å›½ï¼Œæ…¢æ€§ç—…å’Œç›¸å…³å¹¶å‘ç—‡æ›´æ˜¯å½±å“äº†ä¸Šäº¿äººã€‚ä½†ä¸ç”¨å¤ªæ‹…å¿ƒï¼Œè¿™æ„å‘³ç€ï¼šå¦‚æœæˆ‘ä»¬èƒ½æ—©ç†è§£ï¼Œæ—¥å¸¸å¤šæ³¨æ„ï¼Œå¾ˆå¤šæ…¢æ€§ç—…å…¶å®å¯ä»¥å¾ˆå¥½åœ°è¢«æ§åˆ¶ä½ã€‚ 02 å¸¸è§ä¿¡å·ï¼šèº«ä½“åœ¨æé†’ä½ äº›ä»€ä¹ˆï¼Ÿ æ€»æ˜¯è§‰å¾—ç´¯ï¼š ä¸æ˜¯å·¥ä½œå¤ªæ‹¼ï¼Œä¼‘æ¯å¤Ÿäº†è¿˜æ˜¯æ— ç²¾æ‰“é‡‡ï¼Ÿæ…¢æ€§ç–¾ç—…å¸¸ä»¥æŒç»­ç–²åŠ³å¼€åœºï¼Œç‰¹åˆ«æ˜¯ç³–å°¿ç—…ã€é«˜è¡€å‹æ‚£è€…ï¼Œå®¹æ˜“è§‰å¾—ä¹åŠ›ã€‚ ç–¼ç—›æŒç»­è€Œä¸æ˜åŸå› ï¼š æ¯”å¦‚è†ç›–ã€è…°èƒŒã€è‚©é¢ˆç­‰å…³èŠ‚ç–¼ç—›ï¼Œæ—¶é—´ä¸€é•¿ï¼Œæ€»è§‰å¾—è¿™å°±æ˜¯â€œè€åŒ–â€ï¼Œå…¶å®å¾ˆå¯èƒ½æ˜¯æ…¢æ€§ç‚ç—‡åœ¨ä½œç¥Ÿã€‚ ä½“é‡å˜åŒ–å¥‡æ€ªï¼š æ²¡æœ‰åˆ»æ„å‡è‚¥ï¼Œä½†ä½“é‡æ…¢å‡å°‘ï¼Œæˆ–åå¤æ— æ˜æ˜¾ç†ç”±åœ°å¢åŠ ï¼Œè¿™ä¹Ÿæ˜¯ä¿¡å·ä¹‹ä¸€ã€‚ æƒ…ç»ªæ³¢åŠ¨ä¸ç¡çœ å˜å·®ï¼š ç¡ä¸å®‰ç¨³ã€å®¹æ˜“ç„¦è™‘ï¼Œå¸¸è¢«å¿½è§†ã€‚æ…¢æ€§ç—…å®¹æ˜“è®©äººä½“åŠ›å’Œæƒ…ç»ªä¸€èµ·å—å½±å“ã€‚ ç‰¹æ®Šç—…ä¾‹ä¸€ä¾‹ï¼š æ¯”å¦‚æœ‰ä½ç”·å£«ï¼Œå› ä¸ºæ„å¤–å¯¼è‡´å¤´éƒ¨å—ä¼¤ååå¤å¤´æ™•ã€æ¶å¿ƒå‘•åã€è§†åŠ›å¼‚å¸¸ï¼Œç»æ£€æŸ¥åˆæ­¥è¯Šæ–­ä¸ºå¤´éƒ¨å¤–ä¼¤ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œæ…¢æ€§èº¯ä½“ä¸é€‚ä¿¡å·å’Œæ€¥æ€§ç—‡çŠ¶ä¸åŒï¼Œéœ€è¦åŠæ—¶æ£€æŸ¥ï¼ˆç—…ä¾‹å‚è€ƒè§ä¸‹æ–‡ï¼‰ã€‚ è¿™äº›ä¿¡å·åƒæ˜¯èº«ä½“çš„å°é—¹é’Ÿï¼ŒåŠæ—¶æ³¨æ„æœ‰åŠ©äºæ—©å¹²é¢„ã€‚ä¸è¿‡ï¼Œå…‰å‡­è¿™äº›ç—‡çŠ¶è¿˜éš¾ä»¥åˆ¤æ–­æ˜¯å“ªç§æ…¢æ€§ç—…ï¼Œæœ€å¥½èƒ½è·Ÿä¸“ä¸šåŒ»ç”Ÿæ²Ÿé€šä¸€ä¸‹ã€‚ âš™ï¸ 03 æ…¢æ€§ç—…ä¸ºä»€ä¹ˆä¼šæ‰¾ä¸Šé—¨ï¼Ÿ è¯´èµ·æ¥ï¼Œæ…¢æ€§ç–¾ç—…å‡ºç°ï¼Œå¹¶ä¸æ˜¯å“ªä¸€å¤©çªç„¶å†’å‡ºæ¥çš„â€œå¤§éº»çƒ¦â€ï¼Œè€Œæ˜¯å¤šç§å°å› ç´ ç§¯ç´¯çš„ç»“æœã€‚å…·ä½“æ¥è¯´ï¼Œæœ‰ä»¥ä¸‹å‡ ç±»ä¸»è¦åŸå› ï¼š é—ä¼ å› ç´ ï¼šæŸäº›æ…¢æ€§ç–¾ç—…ï¼ˆå¦‚é«˜è¡€å‹ã€ç³–å°¿ç—…ï¼‰é—ä¼ å€¾å‘æ˜æ˜¾ã€‚å¦‚æœå®¶é‡Œé•¿è¾ˆæœ‰ç±»ä¼¼ç—…å²ï¼Œä¸ªäººé£é™©ä¼šæ›´é«˜ã€‚ å¹´é¾„ç›¸å…³å˜åŒ–ï¼šå¹´é¾„çš„å¢é•¿ï¼Œæ„å‘³ç€èº«ä½“å„ä¸ªç³»ç»Ÿéƒ½åœ¨ç¼“æ…¢å˜åŒ–ï¼Œæ¯”å¦‚ä»£è°¢å˜æ…¢ã€è¡€ç®¡å¼¹æ€§ä¸‹é™ï¼Œæ…¢ç—…éšå¹´é¾„è§å¤šä¸æ€ªã€‚ ç”Ÿæ´»ä¹ æƒ¯ï¼šé¥®é£Ÿç»“æ„å•ä¸€ã€è¿åŠ¨å¤ªå°‘ã€é•¿æœŸå‹åŠ›å¤§ã€ç†¬å¤œï¼Œè¿™äº›çœ‹ä¼¼â€œä¹ ä»¥ä¸ºå¸¸â€çš„ä¹ æƒ¯ï¼Œå…¶å®å°±åƒæ…¢ç£¨æŸçš„é›¶ä»¶ã€‚æ¯”å¦‚ç ”ç©¶å‘ç°ï¼Œé•¿æœŸç¼ºä¹è§„å¾‹é”»ç‚¼å¢åŠ å¿ƒè„‘è¡€ç®¡ç—…é£é™©ï¼ˆBooth et al., Waging war on modern chronic diseases, JAMA, 2012ï¼‰ã€‚ ç¯å¢ƒå› ç´ ï¼šé•¿æœŸæ¥è§¦ç©ºæ°”æ±¡æŸ“ã€æŸäº›èŒä¸šæš´éœ²ï¼Œä¹Ÿä¼šæå‡æ‚£æ…¢æ€§è‚ºç—…ç­‰é£é™©ã€‚ä»ä¸­å¯ä»¥çœ‹å‡ºï¼Œè‡´ç—…æœºç†å¾€æ˜¯ç»¼åˆçš„ï¼Œä¸æ˜¯å•ä¸€åŸå› èƒ½è§£é‡Šå…¨éƒ¨ã€‚ä¸è¿‡ï¼Œç”Ÿæ´»ä¹ æƒ¯è°ƒæ•´ä¾ç„¶æ˜¯ç›¸å¯¹å¥½æ§åˆ¶çš„ä¸€ç¯ã€‚ä»ä¸­å¯ä»¥çœ‹å‡ºï¼Œè‡´ç—…æœºç†å¾€æ˜¯ç»¼åˆçš„ï¼Œä¸æ˜¯å•ä¸€åŸå› èƒ½è§£é‡Šå…¨éƒ¨ã€‚ä¸è¿‡ï¼Œç”Ÿæ´»ä¹ æƒ¯è°ƒæ•´ä¾ç„¶æ˜¯ç›¸å¯¹å¥½æ§åˆ¶çš„ä¸€ç¯ã€‚ä»ä¸­å¯ä»¥çœ‹å‡ºï¼Œè‡´ç—…æœºç†å¾€æ˜¯ç»¼åˆçš„ï¼Œä¸æ˜¯å•ä¸€åŸå› èƒ½è§£é‡Šå…¨éƒ¨ã€‚ä¸è¿‡ï¼Œç”Ÿæ´»ä¹ æƒ¯è°ƒæ•´ä¾ç„¶æ˜¯ç›¸å¯¹å¥½æ§åˆ¶çš„ä¸€ç¯ã€‚ä»ä¸­å¯ä»¥çœ‹å‡ºï¼Œè‡´ç—…æœºç†å¾€æ˜¯ç»¼åˆçš„ï¼Œä¸æ˜¯å•ä¸€åŸå› èƒ½è§£é‡Šå…¨éƒ¨ã€‚ä¸è¿‡ï¼Œç”Ÿæ´»ä¹ æƒ¯è°ƒæ•´ä¾ç„¶æ˜¯ç›¸å¯¹å¥½æ§åˆ¶çš„ä¸€ç¯ã€‚ ä»ä¸­å¯ä»¥çœ‹å‡ºï¼Œè‡´ç—…æœºç†å¾€æ˜¯ç»¼åˆçš„ï¼Œä¸æ˜¯å•ä¸€åŸå› èƒ½è§£é‡Šå…¨éƒ¨ã€‚ä¸è¿‡ï¼Œç”Ÿæ´»ä¹ æƒ¯è°ƒæ•´ä¾ç„¶æ˜¯ç›¸å¯¹å¥½æ§åˆ¶çš„ä¸€ç¯ã€‚`
)
const generatedText = ref('')
// å†…å®¹ç¤ºä¾‹æ ¼å¼ï¼š
//   `<div class="material-guidance-wrapper">
//   <h1 id="material_title" class="material-custom-title">
//     è®¤è¯†æ…¢æ€§ç–¾ç—…ï¼šç®¡ç†ã€é¢„é˜²ä¸ç”Ÿæ´»æ–¹å¼
//     <span class="material-book-emoji">ğŸ“š</span>
//   </h1>

//   <!-- å¼€å¤´éƒ¨åˆ† -->
//   <div class="material-intro-block">
//     æ—¥å¸¸ç”Ÿæ´»ä¸­ï¼Œè®¸å¤šäººéƒ½ä¼šå¬åˆ°èº«è¾¹æœ‰äººæåˆ°é«˜è¡€å‹ã€ç³–å°¿ç—…æˆ–è€…æ…¢æ€§ç–¼ç—›è¿™æ ·çš„é—®é¢˜ã€‚æœ‰äº›äººæˆ–è®¸å®¶ä¸­ä¹Ÿæœ‰é•¿è¾ˆéœ€è¦æ¯å¤©æŒ‰åŒ»å˜±åƒè¯ã€æ§åˆ¶é¥®é£Ÿï¼Œä¹Ÿæœ‰äººç–‘æƒ‘ï¼šæ…¢æ€§ç—…åˆ°åº•æ˜¯æ€ä¹ˆå‘ç”Ÿçš„ï¼Ÿè‡ªå·±æœ‰æ²¡æœ‰é£é™©ï¼Ÿå…¶å®ï¼Œæ…¢æ€§ç–¾ç—…ç¦»æˆ‘ä»¬å¹¶ä¸é¥è¿œï¼Œä½†ä¹Ÿæ²¡å¿…è¦è°ˆè™è‰²å˜ã€‚æŠŠæ¡ä¸€äº›åŸºæœ¬çŸ¥è¯†ï¼Œè°ƒæ•´ç”Ÿæ´»ä¹ æƒ¯ï¼Œå¤§å¤šæ•°æ…¢æ€§ç—…å…¶å®éƒ½èƒ½ç®¡å¾—ä½ï¼Œä¸å¿…ä¸ºæœªçŸ¥çš„å°æ‹…å¿ƒè€Œç„¦è™‘ã€‚
//   </div>

//   <!-- 01 ä»€ä¹ˆæ˜¯æ…¢æ€§ç–¾ç—… -->
//   <section class="material-section" style="background: linear-gradient(90deg, #f4f7fa 0%, #e6f2ff 100%);">
//     <h2 class="material-section-title material-icon-with-bg">
//       <span class="material-section-emoji">ğŸŒ±</span>
//       01 ç®€å•èŠä¸€èŠï¼šæ…¢æ€§ç–¾ç—…åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ
//     </h2>
//     <div class="material-section-content">
//       <p>
//         æ…¢æ€§ç–¾ç—…ï¼Œè¿™ä¸ªè¯å…¶å®å¹¶ä¸å¤æ‚ã€‚ç®€å•æ¥è¯´ï¼Œå°±æ˜¯é‚£äº›æ‹–å¾—æ¯”è¾ƒä¹…ã€ç—…ç¨‹é•¿ã€è¿›å±•æ…¢çš„å¥åº·é—®é¢˜ï¼Œæ¯”å¦‚é«˜è¡€å‹ã€ç³–å°¿ç—…ã€æ…¢é˜»è‚ºï¼Œç”šè‡³æœ‰çš„äººå¸¸å¹´è…°è…¿ç—›ã€å…³èŠ‚ä¸èˆ’æœï¼Œä¹Ÿç®—åœ¨å†…ã€‚è¿™ç±»æ¯›ç—…ä¸åƒæ„Ÿå†’å‘çƒ§é‚£æ ·æ¥å¾—å¿«å»å¾—ä¹Ÿå¿«ï¼Œåè€Œåƒä¸ª"é‚»å±…"ï¼Œä½ æŠŠå®ƒç®¡å¥½äº†ï¼Œä¹Ÿèƒ½å¹³å®‰æ— äº‹ã€‚æ¯ä¸ªäººéƒ½æœ‰å¯èƒ½åœ¨æŸä¸€æ—¶æ®µé‡åˆ°æ…¢æ€§ç—…çš„å›°æ‰°ï¼Œä½†å¤§å¯ä¸å¿…è¢«å“åˆ°ï¼Œä¸€æ–¹é¢è¿™äº›ç–¾ç—…çš„æ—©æœŸå¾å…†å¾€ä¸æ˜æ˜¾ï¼Œå¦ä¸€æ–¹é¢é€šè¿‡ç§‘å­¦ç®¡ç†ï¼Œç”Ÿæ´»è´¨é‡ä¸€æ ·å¯ä»¥å¾ˆå¥½ã€‚
//       </p>
//       <p>
//         æ ¹æ®ä¸–ç•Œå«ç”Ÿç»„ç»‡çš„æ•°æ®ï¼Œå…¨çƒçº¦70%çš„æ­»äº¡å’Œæ…¢æ€§ç–¾ç—…æœ‰å…³ï¼ˆWHO, Noncommunicable diseases, 2021ï¼‰ã€‚åœ¨ä¸­å›½ï¼Œæ…¢æ€§ç—…å’Œç›¸å…³å¹¶å‘ç—‡æ›´æ˜¯å½±å“äº†ä¸Šäº¿äººã€‚ä½†ä¸ç”¨å¤ªæ‹…å¿ƒï¼Œè¿™æ„å‘³ç€ï¼šå¦‚æœæˆ‘ä»¬èƒ½æ—©ç†è§£ï¼Œæ—¥å¸¸å¤šæ³¨æ„ï¼Œå¾ˆå¤šæ…¢æ€§ç—…å…¶å®å¯ä»¥å¾ˆå¥½åœ°è¢«æ§åˆ¶ä½ã€‚
//       </p>
//     </div>
//   </section>

//   <!-- 02 æ…¢æ€§ç–¾ç—…çš„å¸¸è§ç—‡çŠ¶æ˜¯ä»€ä¹ˆï¼Ÿ -->
//   <section class="material-section" style="background: linear-gradient(90deg, #e8f6ef 0%, #daf8e3 100%);">
//     <h2 class="material-section-title material-icon-with-bg">
//       <span class="material-section-emoji">ğŸ”</span>
//       02 å¸¸è§ä¿¡å·ï¼šèº«ä½“åœ¨æé†’ä½ äº›ä»€ä¹ˆï¼Ÿ
//     </h2>
//     <div class="material-section-content">
//       <ul class="material-ul-points">
//         <li>
//           <strong>æ€»æ˜¯è§‰å¾—ç´¯ï¼š</strong>
//           ä¸æ˜¯å·¥ä½œå¤ªæ‹¼ï¼Œä¼‘æ¯å¤Ÿäº†è¿˜æ˜¯æ— ç²¾æ‰“é‡‡ï¼Ÿæ…¢æ€§ç–¾ç—…å¸¸ä»¥æŒç»­ç–²åŠ³å¼€åœºï¼Œç‰¹åˆ«æ˜¯ç³–å°¿ç—…ã€é«˜è¡€å‹æ‚£è€…ï¼Œå®¹æ˜“è§‰å¾—ä¹åŠ›ã€‚
//         </li>
//         <li>
//           <strong>ç–¼ç—›æŒç»­è€Œä¸æ˜åŸå› ï¼š</strong>
//           æ¯”å¦‚è†ç›–ã€è…°èƒŒã€è‚©é¢ˆç­‰å…³èŠ‚ç–¼ç—›ï¼Œæ—¶é—´ä¸€é•¿ï¼Œæ€»è§‰å¾—è¿™å°±æ˜¯â€œè€åŒ–â€ï¼Œå…¶å®å¾ˆå¯èƒ½æ˜¯æ…¢æ€§ç‚ç—‡åœ¨ä½œç¥Ÿã€‚
//         </li>
//         <li>
//           <strong>ä½“é‡å˜åŒ–å¥‡æ€ªï¼š</strong>
//           æ²¡æœ‰åˆ»æ„å‡è‚¥ï¼Œä½†ä½“é‡æ…¢å‡å°‘ï¼Œæˆ–åå¤æ— æ˜æ˜¾ç†ç”±åœ°å¢åŠ ï¼Œè¿™ä¹Ÿæ˜¯ä¿¡å·ä¹‹ä¸€ã€‚
//         </li>
//         <li>
//           <strong>æƒ…ç»ªæ³¢åŠ¨ä¸ç¡çœ å˜å·®ï¼š</strong>
//           ç¡ä¸å®‰ç¨³ã€å®¹æ˜“ç„¦è™‘ï¼Œå¸¸è¢«å¿½è§†ã€‚æ…¢æ€§ç—…å®¹æ˜“è®©äººä½“åŠ›å’Œæƒ…ç»ªä¸€èµ·å—å½±å“ã€‚
//         </li>
//         <li>
//           <strong>ç‰¹æ®Šç—…ä¾‹ä¸€ä¾‹ï¼š</strong>
//           æ¯”å¦‚æœ‰ä½ç”·å£«ï¼Œå› ä¸ºæ„å¤–å¯¼è‡´å¤´éƒ¨å—ä¼¤ååå¤å¤´æ™•ã€æ¶å¿ƒå‘•åã€è§†åŠ›å¼‚å¸¸ï¼Œç»æ£€æŸ¥åˆæ­¥è¯Šæ–­ä¸ºå¤´éƒ¨å¤–ä¼¤ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œæ…¢æ€§èº¯ä½“ä¸é€‚ä¿¡å·å’Œæ€¥æ€§ç—‡çŠ¶ä¸åŒï¼Œéœ€è¦åŠæ—¶æ£€æŸ¥ï¼ˆç—…ä¾‹å‚è€ƒè§ä¸‹æ–‡ï¼‰ã€‚
//         </li>
//       </ul>
//       <p>
//         è¿™äº›ä¿¡å·åƒæ˜¯èº«ä½“çš„å°é—¹é’Ÿï¼ŒåŠæ—¶æ³¨æ„æœ‰åŠ©äºæ—©å¹²é¢„ã€‚ä¸è¿‡ï¼Œå…‰å‡­è¿™äº›ç—‡çŠ¶è¿˜éš¾ä»¥åˆ¤æ–­æ˜¯å“ªç§æ…¢æ€§ç—…ï¼Œæœ€å¥½èƒ½è·Ÿä¸“ä¸šåŒ»ç”Ÿæ²Ÿé€šä¸€ä¸‹ã€‚
//       </p>
//     </div>
//   </section>

//   <!-- 03 æ…¢æ€§ç–¾ç—…çš„ä¸»è¦è‡´ç—…æœºç†æ˜¯ä»€ä¹ˆï¼Ÿ -->
//   <section class="material-section" style="background: linear-gradient(90deg, #faf6e8 0%, #f9ebda 100%);">
//     <h2 class="material-section-title material-icon-with-bg">
//       <span class="material-section-emoji">âš™ï¸</span>
//       03 æ…¢æ€§ç—…ä¸ºä»€ä¹ˆä¼šæ‰¾ä¸Šé—¨ï¼Ÿ
//     </h2>
//     <div class="material-section-content">
//       <p>
//         è¯´èµ·æ¥ï¼Œæ…¢æ€§ç–¾ç—…å‡ºç°ï¼Œå¹¶ä¸æ˜¯å“ªä¸€å¤©çªç„¶å†’å‡ºæ¥çš„â€œå¤§éº»çƒ¦â€ï¼Œè€Œæ˜¯å¤šç§å°å› ç´ ç§¯ç´¯çš„ç»“æœã€‚å…·ä½“æ¥è¯´ï¼Œæœ‰ä»¥ä¸‹å‡ ç±»ä¸»è¦åŸå› ï¼š
//       </p>
//       <ul class="material-ul-points">
//         <li>
//           <strong>é—ä¼ å› ç´ ï¼š</strong>æŸäº›æ…¢æ€§ç–¾ç—…ï¼ˆå¦‚é«˜è¡€å‹ã€ç³–å°¿ç—…ï¼‰é—ä¼ å€¾å‘æ˜æ˜¾ã€‚å¦‚æœå®¶é‡Œé•¿è¾ˆæœ‰ç±»ä¼¼ç—…å²ï¼Œä¸ªäººé£é™©ä¼šæ›´é«˜ã€‚
//         </li>
//         <li>
//           <strong>å¹´é¾„ç›¸å…³å˜åŒ–ï¼š</strong>å¹´é¾„çš„å¢é•¿ï¼Œæ„å‘³ç€èº«ä½“å„ä¸ªç³»ç»Ÿéƒ½åœ¨ç¼“æ…¢å˜åŒ–ï¼Œæ¯”å¦‚ä»£è°¢å˜æ…¢ã€è¡€ç®¡å¼¹æ€§ä¸‹é™ï¼Œæ…¢ç—…éšå¹´é¾„è§å¤šä¸æ€ªã€‚
//         </li>
//         <li>
//           <strong>ç”Ÿæ´»ä¹ æƒ¯ï¼š</strong>é¥®é£Ÿç»“æ„å•ä¸€ã€è¿åŠ¨å¤ªå°‘ã€é•¿æœŸå‹åŠ›å¤§ã€ç†¬å¤œï¼Œè¿™äº›çœ‹ä¼¼â€œä¹ ä»¥ä¸ºå¸¸â€çš„ä¹ æƒ¯ï¼Œå…¶å®å°±åƒæ…¢ç£¨æŸçš„é›¶ä»¶ã€‚æ¯”å¦‚ç ”ç©¶å‘ç°ï¼Œé•¿æœŸç¼ºä¹è§„å¾‹é”»ç‚¼å¢åŠ å¿ƒè„‘è¡€ç®¡ç—…é£é™©ï¼ˆBooth et al., Waging war on modern chronic diseases, JAMA, 2012ï¼‰ã€‚
//         </li>
//         <li>
//           <strong>ç¯å¢ƒå› ç´ ï¼š</strong>é•¿æœŸæ¥è§¦ç©ºæ°”æ±¡æŸ“ã€æŸäº›èŒä¸šæš´éœ²ï¼Œä¹Ÿä¼šæå‡æ‚£æ…¢æ€§è‚ºç—…ç­‰é£é™©ã€‚
//         </li>
//       </ul>
//       <p>
//         ä»ä¸­å¯ä»¥çœ‹å‡ºï¼Œè‡´ç—…æœºç†å¾€æ˜¯ç»¼åˆçš„ï¼Œä¸æ˜¯å•ä¸€åŸå› èƒ½è§£é‡Šå…¨éƒ¨ã€‚ä¸è¿‡ï¼Œç”Ÿæ´»ä¹ æƒ¯è°ƒæ•´ä¾ç„¶æ˜¯ç›¸å¯¹å¥½æ§åˆ¶çš„ä¸€ç¯ã€‚<br/>
//         <span class="material-cite-block">
//           <em>å‚è€ƒæ–‡çŒ®ï¼š</em> Booth, F. W., Roberts, C. K., & Laye, M. J. (2012). Lack of exercise is a major cause of chronic diseases. The Journal of Physiology, 590(3), 703-731.
//         </span>
//       </p>
//     </div>
//   </section>

//   <!-- 04 å¦‚ä½•è¿›è¡Œæ…¢æ€§ç–¾ç—…çš„è¯Šæ–­ï¼Ÿ -->
//   <section class="material-section" style="background: linear-gradient(90deg, #f9f7fc 0%, #e9e3fa 100%);">
//     <h2 class="material-section-title material-icon-with-bg">
//       <span class="material-section-emoji">ğŸ§ª</span>
//       04 æ…¢æ€§ç—…æ€ä¹ˆæŸ¥å‡ºæ¥ï¼Ÿâ€”â€”è¯Šæ–­æµç¨‹ä¸€è§ˆ
//     </h2>
//     <div class="material-section-content">
//       <ol class="material-ol-points">
//         <li>
//           <strong>åŒ»ç”Ÿé—®è¯Šï¼š</strong>
//           å…ˆå’ŒåŒ»ç”Ÿè¯¦ç»†èŠï¼šä¸èˆ’æœå¤šä¹…äº†ï¼Ÿæœ‰æ²¡æœ‰ç±»ä¼¼å®¶æ—å²ï¼Ÿç”Ÿæ´»ä¹ æƒ¯æ€ä¹ˆæ ·ï¼Ÿ
//         </li>
//         <li>
//           <strong>ä½“æ ¼æ£€æŸ¥ï¼š</strong>
//           åŒ»ç”Ÿä¼šåšä¸€äº›åŸºç¡€æ£€æŸ¥ï¼Œæ¯”å¦‚é‡è¡€å‹ã€å¬å¿ƒè‚ºï¼Œæœ‰æ—¶ä¼šæ‘¸è‚šå­ã€çœ‹çœ‹å…³èŠ‚æ´»åŠ¨åº¦ã€‚
//         </li>
//         <li>
//           <strong>å®éªŒå®¤æ£€æŸ¥ï¼š</strong>
//           å¸¸è§çš„æœ‰è¡€å¸¸è§„ã€ç”ŸåŒ–å…¨å¥—ï¼ˆå¦‚è¡€ç³–ã€è¡€è„‚ã€è‚è‚¾åŠŸèƒ½ç­‰ï¼‰ã€‚å¯¹æœ‰ç–‘ä¼¼ç³–å°¿ç—…ã€é«˜è¡€å‹ã€è‚ç—…ç­‰æ‚£è€…å°¤å…¶é‡è¦ã€‚
//         </li>
//         <li>
//           <strong>å½±åƒå­¦æ£€æŸ¥ï¼š</strong>
//           å…·ä½“åŒ…æ‹¬Xå…‰ã€CTã€è¶…å£°ç­‰ã€‚ä»¥æ¡ˆä¾‹ä¸ºä¾‹ï¼Œæœ‰ç”·æ€§æ‚£è€…å¤´éƒ¨å¤–ä¼¤ååå¤å¤´æ™•ï¼Œç»é¢…è„‘å¹³æ‰«ã€DRé¼»éª¨ä¾§ä½ç­‰å½±åƒå­¦æ‰‹æ®µç¡®è®¤ç—…å› ï¼Œè¿™äº›å·¥å…·åŒæ ·é€‚ç”¨äºåˆ¤æ–­æ…¢æ€§æ¯è‚‰ã€å…³èŠ‚é€€å˜ç­‰ç–¾ç—…ã€‚
//         </li>
//         <li>
//           <strong>ä¸“ç§‘è¯Šæ–­ï¼š</strong>
//           å¿…è¦æ—¶ï¼ŒåŒ»ç”Ÿè¿˜ä¼šå®‰æ’ä¸“é¡¹æ£€æŸ¥ï¼Œå¦‚å¿ƒç”µå›¾ã€å¿ƒè„å½©è¶…ç­‰ï¼Œåˆ¤æ–­å™¨å®˜åŠŸèƒ½ã€‚
//         </li>
//       </ol>
//       <p>
//         æ£€æŸ¥æµç¨‹å…¶å®å¹¶ä¸å¤æ‚ï¼Œå¾ˆå¤šæ…¢æ€§ç–¾ç—…éƒ½æ˜¯é€šè¿‡è¿™äº›ç¯èŠ‚é€æ­¥æ’æŸ¥ã€æœ€åé”å®šçš„ã€‚é‡åˆ°ä¸æ˜åŸå› çš„ä¸é€‚ï¼Œæ‹–æ‹‰æ›´å®¹æ˜“è€½è¯¯æ²»ç–—ã€‚<br/>
//         <span class="material-cite-block">
//           <em>èµ„æ–™å‚è€ƒï¼š</em> Mayo Clinic, â€œHead injury: First aidâ€, 2022.
//         </span>
//       </p>
//     </div>
//   </section>

//   <!-- 05 æ…¢æ€§ç–¾ç—…çš„æ²»ç–—æ–¹æ³•å’Œé¢„æœŸæ•ˆæœæœ‰å“ªäº›ï¼Ÿ -->
//   <section class="material-section" style="background: linear-gradient(90deg, #e4f3fd 0%, #c6e2f7 100%);">
//     <h2 class="material-section-title material-icon-with-bg">
//       <span class="material-section-emoji">ğŸ’¡</span>
//       05 ç®¡ç†æ…¢æ€§ç—…ï¼šæœ‰å“ªäº›é è°±çš„åŠæ³•ï¼Ÿ
//     </h2>
//     <div class="material-section-content">
//       <p>
//         æ—¢ç„¶æ…¢æ€§ç–¾ç—…"éš¾ç¼ "ï¼Œé‚£æ²»ç–—å’Œç®¡ç†æœ‰å“ªäº›å¸¸è§æ–¹æ³•ï¼Ÿå…¶å®ï¼Œä¸»è¦æœ‰ä»¥ä¸‹ä¸‰ç±»ï¼š
//       </p>
//       <ul class="material-ul-points">
//         <li>
//           <strong>è¯ç‰©å¹²é¢„ï¼š</strong>å¦‚é™å‹è¯ã€é™ç³–è¯ã€æŠ—ç‚è¯ï¼Œæ ¹æ®å…·ä½“ç—…ç§ç»„åˆä½¿ç”¨ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¯ç‰©è°ƒæ•´éœ€åœ¨åŒ»ç”ŸæŒ‡å¯¼ä¸‹è¿›è¡Œï¼Œåˆ‡å‹¿æ“…è‡ªåŠ å‡ã€‚
//         </li>
//         <li>
//           <strong>ç”Ÿæ´»æ–¹å¼è°ƒæ•´ï¼š</strong>è§„å¾‹ä½œæ¯ã€åŠ³é€¸ç»“åˆã€é€‚å½“è¿åŠ¨ï¼Œå¯æ ¹æ®ä¸ªäººæƒ…å†µé€‰æ‹©æ•£æ­¥ã€æ¸¸æ³³ã€æ…¢è·‘ç­‰ã€‚æ¯”å¦‚è§„å¾‹è¿åŠ¨æœ‰åŠ©äºæ”¹å–„èƒ°å²›ç´ æ•æ„Ÿæ€§ï¼Œè¾…åŠ©æ§åˆ¶ç³–å°¿ç—…ï¼ˆColberg et al., Exercise and Type 2 Diabetes, Diabetes Care, 2016ï¼‰ã€‚
//         </li>
//         <li>
//           <strong>å¿ƒç†æ”¯æŒä¸å¥åº·æ•™è‚²ï¼š</strong>é¢å¯¹æ…¢ç—…ï¼Œæƒ…ç»ªæ³¢åŠ¨æ­£å¸¸ï¼Œç„¦è™‘æ—¶å®¶äººå’ŒåŒ»ç”Ÿå¤šä¸€äº›æ²Ÿé€šï¼Œä¹Ÿå¯ä»¥å‚ä¸ç—…å‹æ”¯æŒå°ç»„ï¼Œè·å¾—æ›´å¤šåŠ›é‡å’Œç»éªŒåˆ†äº«ã€‚
//         </li>
//       </ul>
//       <p>
//         æ²»ç–—æ•ˆæœå› äººè€Œå¼‚ï¼Œä½†å¤šæ•°æ…¢æ€§ç—…é€šè¿‡ä¸Šè¿°æ–¹æ³•èƒ½è·å¾—å¾ˆå¤§æ”¹å–„ã€‚æ¯”å¦‚é«˜è¡€å‹æ‚£è€…æœ‰è§„å¾‹ç›‘æµ‹å’Œå…¨ç¨‹ç®¡ç†ï¼Œæ‚£å¿ƒè„‘è¡€ç®¡æ„å¤–çš„æ¦‚ç‡ä¼šå¤§å‡å°‘ã€‚
//       </p>
//       <p class="material-cite-block">
//         <em>å‚è€ƒæ–‡çŒ®ï¼š</em> Colberg, S. R., et al. (2016). Exercise and Type 2 Diabetes. Diabetes Care, 39(11), 2065-2079.
//       </p>
//     </div>
//   </section>

//   <!-- 06 æ—¥å¸¸ç®¡ç†ä¸é¢„é˜²æ…¢æ€§ç–¾ç—…çš„æ–¹æ³•æœ‰å“ªäº›ï¼Ÿ -->
//   <section class="material-section" style="background: linear-gradient(90deg, #fffbe6 0%, #fff2cc 100%);">
//     <h2 class="material-section-title material-icon-with-bg">
//       <span class="material-section-emoji">ğŸ¥—</span>
//       06 ç”Ÿæ´»å°è´´å£«ï¼šå¥åº·ç®¡ç†æ€ä¹ˆåšæ›´é è°±ï¼Ÿ
//     </h2>
//     <div class="material-section-content">
//       <ul class="material-ul-points">
//         <li>
//           <strong>æ¯æ—¥åŠ¨ä¸€åŠ¨ï¼š</strong>
//           æ•£æ­¥ã€å¿«èµ°ã€éª‘è‡ªè¡Œè½¦ã€æ‰“å¤ªæéƒ½å¯ä»¥ï¼Œè¿åŠ¨æœ‰åŠ©äºå¿ƒè¡€ç®¡å’Œä»£è°¢å¥åº·ï¼Œæœ€å¥½çš„åŠæ³•æ˜¯æ¯å¤©ç´¯è®¡30åˆ†é’Ÿä»¥ä¸Šã€‚
//         </li>
//         <li>
//           <strong>é¥®é£Ÿæœ‰è®²ç©¶ï¼š</strong>
//           å¤šåƒè”¬èœæ°´æœï¼ˆä¿ƒè¿›è‚ é“å¥åº·ï¼‰ï¼Œé€‚å½“æ‘„å…¥å…¨è°·ç±»ï¼ˆæœ‰åŠ©ç¨³å®šè¡€ç³–ï¼‰ï¼Œä¼˜è´¨è›‹ç™½ï¼ˆæ¯”å¦‚è±†åˆ¶å“ã€ç˜¦è‚‰ã€é±¼ç±»ï¼‰æœ‰åŠ©äºä¿æŒèº«ä½“æœºèƒ½ã€‚
//         </li>
//         <li>
//           <strong>å®šæ—¶ä½“æ£€ï¼š</strong>
//           å»ºè®®40å²å¼€å§‹ï¼Œæ¯1-2å¹´åšä¸€æ¬¡åŸºç¡€å¥åº·ä½“æ£€ï¼Œå…³æ³¨è¡€å‹ã€è¡€ç³–ã€è¡€è„‚ç­‰æŒ‡æ ‡ã€‚
//         </li>
//         <li>
//           <strong>è°ƒèŠ‚æƒ…ç»ªï¼š</strong>
//           ä¿æŒä¹è§‚ï¼Œé‡åˆ°å‹åŠ›æ—¶ï¼Œå¯ä»¥å’Œæœ‹å‹èŠã€å¬éŸ³ä¹æˆ–ç»ƒæ·±å‘¼å¸ã€‚é•¿æœŸå‹åŠ›è¿‡å¤§ä¼šå½±å“å…ç–«åŠ›å’Œæ…¢ç—…ç®¡ç†ã€‚
//         </li>
//         <li>
//           <strong>å……è¶³ç¡çœ ï¼š</strong>
//           æ¯å¤©7-8å°æ—¶è¾ƒä¸ºç†æƒ³ï¼Œç¡çœ è´¨é‡å¥½æœ‰åŠ©äºä¿®å¤æœºä½“ï¼Œé™ä½å¤šç§æ…¢ç—…é£é™©ã€‚
//         </li>
//         <li>
//           <strong>å‡ºç°å¼‚å¸¸åŠæ—¶å°±è¯Šï¼š</strong>
//           æœ‰ä¸æ˜åŸå› ä½“é‡å˜åŒ–ã€æŒç»­ä¹åŠ›ã€é£Ÿæ¬²å‡é€€ã€ç–¼ç—›ç­‰æ–°ç—‡çŠ¶æ—¶ï¼Œæœ€å¥½èƒ½é¢„çº¦ä¸“ä¸šåŒ»ç”Ÿï¼Œé¿å…â€œå°é—®é¢˜æ‹–æˆå¤§éº»çƒ¦â€ã€‚
//         </li>
//       </ul>
//       <p>
//         å°ç»“ä¸€ä¸‹ï¼Œå¥åº·ç”Ÿæ´»å¹¶ä¸å¤æ‚ï¼Œå…»æˆè¿™äº›å¥½ä¹ æƒ¯ï¼Œæ…¢æ€§ç—…é£é™©è‡ªç„¶ä¼šå‡å°‘ï¼Œä¸ä»…æ˜¯é•¿å¯¿ï¼Œæ›´é‡è¦çš„æ˜¯ç”Ÿæ´»è´¨é‡å¥½ï¼Œèƒ½äº«å—å–œæ¬¢çš„äº‹ã€‚
//       </p>
//     </div>
//   </section>

//   <!-- ç»“æŸè¯­ -->
//   <div class="material-end-block">
//     <span class="material-heart-emoji">ğŸ’š</span>
//     æ…¢æ€§ç–¾ç—…è™½ç„¶å¸¸è§ï¼Œä¹Ÿä¸å¿…å› æ­¤ç„¦è™‘ã€‚æ ¸å¿ƒåœ¨äºå¤šå…³æ³¨ä¸€ç‚¹èº«ä½“å˜åŒ–ï¼Œå…»æˆè‰¯å¥½çš„ä½œæ¯å’Œé¥®é£Ÿä¹ æƒ¯ã€‚æœ‰äº†åŸºç¡€çŸ¥è¯†å’Œæ–¹æ³•åšæ”¯æ’‘ï¼Œç”Ÿæ´»ä¹Ÿä¼šå¤šä¸€ä»½è¸å®å’Œåº•æ°”ã€‚å¿«æŠŠè¿™ä»½æŒ‡å—æ¨èç»™èº«è¾¹çš„æœ‹å‹å’Œå®¶äººï¼Œè®©å¥åº·å¤šä¸€ä»½ä¸»åŠ¨æƒï¼
//   </div>

//   <!-- æ–‡çŒ®å¼•ç”¨ -->
//   <div class="material-reference-block">
//     <h3 class="material-ref-title">å‚è€ƒæ–‡çŒ®</h3>
//     <ol class="material-ref-list">
//       <li>
//         World Health Organization (2021). Noncommunicable diseases. Retrieved from <a href="https://www.who.int/news-room/fact-sheets/detail/noncommunicable-diseases" target="_blank">https://www.who.int/news-room/fact-sheets/detail/noncommunicable-diseases</a>
//       </li>
//       <li>
//         Booth, F. W., Roberts, C. K., & Laye, M. J. (2012). Lack of exercise is a major cause of chronic diseases. The Journal of Physiology, 590(3), 703-731. <a href="https://pubmed.ncbi.nlm.nih.gov/22289907/" target="_blank">PubMed</a>
//       </li>
//       <li>
//         Colberg, S. R., et al. (2016). Exercise and Type 2 Diabetes. Diabetes Care, 39(11), 2065-2079. <a href="https://pubmed.ncbi.nlm.nih.gov/27926890/" target="_blank">PubMed</a>
//       </li>
//       <li>
//         Mayo Clinic Staff. (2022). Head injury: First aid. Mayo Clinic. <a href="https://www.mayoclinic.org/first-aid/first-aid-head-trauma/basics/art-20056626" target="_blank">Link</a>
//       </li>
//     </ol>
//   </div>
// </div>

// <style>
// .material-guidance-wrapper {
//   max-width: 790px;
//   margin: 18px auto 30px auto;
//   font-family: 'PingFang SC', 'Microsoft YaHei', Arial, Helvetica, sans-serif;
//   color: #232729;
//   background-color: #fb;
//   border-radius: 17px;
//   overflow: hidden;
//   box-shadow: 0 4px 36px 0 rgba(186,199,214,0.13);
//   padding-bottom: 40px;
// }

// .material-custom-title {
//   font-size: 2.2em;
//   text-align: center;
//   padding-top: 35px;
//   color: #205180;
//   letter-spacing: 2px;
//   margin-bottom: 18px;
//   background: linear-gradient(90deg, #f8fafc 60%, #e7f2ff 100%);
//   border-bottom: 2px solid #aad3fa;
//   border-radius: 0 0 13px 13px;
//   box-shadow: 0 2px 12px 0 rgba(140,170,220,0.07);
// }

// .material-book-emoji {
//   font-size: 1.1em;
//   margin-left: 0.2em;
//   vertical-align: middle;
// }

// .material-intro-block {
//   padding: 27px 34px 7px 36px;
//   font-size: 1.18em;
//   background: linear-gradient(90deg, #f8fbff 0%, #fefefe 100%);
//   border-left: 5px solid #b6d3ee;
//   margin-bottom: 3px;
//   line-height: 1.7;
//   border-radius: 0 20px 20px 0;
// }

// .material-section {
//   margin: 26px 34px 25px 34px;
//   padding: 34px 36px 6px 36px;
//   border-radius: 19px;
//   box-shadow: 0 2px 18px 0 rgba(215,225,239,.07);
//   transition: box-shadow 0.3s;
// }

// .material-section-title {
//   font-size: 1.51em;
//   color: #316399;
//   margin-bottom: 14px;
//   display: flex;
//   align-items: center;
//   font-weight: 600;
//   letter-spacing: .5px;
// }

// .material-section-emoji {
//   font-size: 1.32em;
//   margin-right: 0.45em;
//   background: rgba(210, 230, 245, 0.52);
//   padding: 2.5px 8px;
//   border-radius: 8px;
// }

// .material-section-content {
//   font-size: 1.12em;
//   line-height: 1.82;
//   color: #212c35;
//   margin-top: -10px;
// }

// .material-ul-points {
//   margin-left: 0;
//   margin-bottom: 12px;
//   padding-left: 21px;
//   list-style-type: disc;
// }

// .material-ul-points li {
//   margin-bottom: 13px;
//   padding-left: 1px;
// }

// .material-ol-points {
//   margin-left: 0;
//   margin-bottom: 18px;
//   padding-left: 23px;
//   list-style-type: decimal;
// }

// .material-ol-points li {
//   margin-bottom: 12px;
// }

// .material-cite-block {
//   display: block;
//   color: #7297d1;
//   font-size: .96em;
//   font-style: italic;
//   margin-top: 9px;
// }

// .material-end-block {
//   margin: 38px 36px 9px 36px;
//   padding: 24px 24px 21px 24px;
//   border-radius: 16px;
//   background: linear-gradient(90deg,#eefdff 40%,#f7f6f2 100%);
//   font-size: 1.13em;
//   color: #297a49;
//   box-shadow: 0 1px 8px 0 rgba(170,220,180,0.17);
//   text-align: center;
// }

// .material-heart-emoji {
//   font-size: 1.17em;
//   margin-right: 0.2em;
// }

// .material-reference-block {
//   padding: 28px 36px 15px 36px;
//   margin: 32px 34px 0 34px;
//   border-radius: 13px;
//   background: linear-gradient(90deg,#e8f4ff 10%,#fbf9ff 90%);
//   color: #295799;
// }

// .material-ref-title {
//   margin: 0;
//   font-size: 1.12em;
//   font-weight: 700;
//   color: #3970b5;
//   margin-bottom: 14px;
//   letter-spacing: 0.7px;
// }

// .material-ref-list {
//   margin: 0;
//   padding-left: 18px;
//   font-size: 0.97em;
//   line-height: 1.8;
// }

// .material-ref-list a {
//   color: #2173a7;
//   text-decoration: none;
//   border-bottom: 1px dotted #2173a7;
//   margin-left: 2px;
// }

// .material-ref-list a:hover {
//   text-decoration: underline;
// }
// </style>
// `

const contentTitle = ref('')

const newGeneratedText = ref(``) // å¤„ç†ä¸ºè¡Œå†…æ ·å¼çš„æ•°æ®

// const TDK = ref<any>(null);
const TDK = ref<any>({})
//   {
//   title: "è®¤è¯†æ…¢æ€§ç–¾ç—…ï¼šç®¡ç†ã€é¢„é˜²ä¸ç”Ÿæ´»æ–¹å¼",
//   description:
//     "äº†è§£æ…¢æ€§ç–¾ç—…çš„æˆå› ã€ç—‡çŠ¶åŠæœ‰æ•ˆç®¡ç†æ–¹æ³•ã€‚æŒæ¡è¿™äº›çŸ¥è¯†èƒ½å¸®åŠ©ä½ æˆ–å®¶äººé¢„é˜²é«˜è¡€å‹ã€ç³–å°¿ç—…ç­‰å¸¸è§æ…¢æ€§ç—…ï¼Œæå‡ç”Ÿæ´»è´¨é‡ã€‚",
//   keywords: "æ…¢æ€§ç–¾ç—…, é«˜è¡€å‹, ç³–å°¿ç—…, ç®¡ç†æ–¹æ³•, ç”Ÿæ´»æ–¹å¼",
//   cover:
//     "https://ystcdn.venuertc.com/venue/AI/25f122b2-6f4d-4bb6-a646-7c34ec415e7f.jpg",
//   seo_analysis: {
//     core_keywords: ["æ…¢æ€§ç–¾ç—…", "é«˜è¡€å‹", "ç³–å°¿ç—…"],
//     long_tail_keywords: [
//       "æ…¢æ€§ç–¾ç—…ç—‡çŠ¶",
//       "å¦‚ä½•ç®¡ç†ç³–å°¿ç—…",
//       "é«˜è¡€å‹çš„æ²»ç–—æ–¹æ³•",
//       "æ…¢æ€§ç—…é¢„é˜²æªæ–½",
//     ],
//     target_audience: "å…³æ³¨å¥åº·çš„æˆå¹´äººï¼Œç‰¹åˆ«æ˜¯ä¸­è€å¹´ç¾¤ä½“åŠå…¶å®¶å±ã€‚",
//     search_intent:
//       "ç”¨æˆ·å¸Œæœ›è·å–æœ‰å…³æ…¢æ€§ç—…çš„é¢„é˜²å’Œç®¡ç†ä¿¡æ¯ï¼Œä»¥åŠç›¸å…³ç—‡çŠ¶çš„è®¤çŸ¥ã€‚",
//   },
// }

const scrollTarget = ref('scroll-to-bottom')
const scrollTop = ref(0)
const showOverlayFlag = ref(false) // ç”Ÿæˆä¸­
const showTipPropFlag = ref(false) // æç¤ºå¼¹çª—
const tipType = ref(1) // æç¤ºç±»å‹  1æ–‡æœ¬å­—æ•°æç¤º  2å½•åˆ¶å‰æç¤º
const scrollViewHeight = ref(0)
const isGenerating = ref(false)
const controller = ref<any>(null)
const isStreamEnded = ref(false)

// æ‰“å­—æœºé€»è¾‘
const pendingText = ref('')
const isTyping = ref(false)
let typingTimer: any = null

const lastScrollTime = ref(0)
const lastChunk = ref('')
const lastContentLength = ref(0)

// è§£æå‚æ•°
const pageType = ref(1) //  1ç”Ÿæˆæ–‡ç«  2ç”Ÿæˆè„šæœ¬(è§†é¢‘) 3å¾…å½•åˆ¶
const operationType = ref('add') //  addæ·»åŠ æ–° editä¿®æ”¹ lookæŸ¥çœ‹
const aiParams = ref<any>({}) // aiå‚æ•°
const promptId = ref(0) // æŒ‡ä»¤id
const sprId = ref(0) // sprId

onLoad(async () => {
  // è·å–é»˜è®¤æ»šåŠ¨åŒºåŸŸé«˜åº¦
  updateScrollViewHeight()
  // è·å– AI é…ç½®
  await fetchPromptId()
  // è‡ªåŠ¨ç”Ÿæˆæ–‡ç« 
  startStreamRequest()
})

// è·å– AI é…ç½®
async function fetchPromptId() {
  try {
    const res: any = await queryAIParams({
      sprId: sprId.value,
      promptId: Number(promptId.value),
    }).queryFn()
    if (res.code === 401) return
    if (res.code !== 200) return toast.warning(res.msg || 'AIé…ç½®è·å–å¤±è´¥', warningProp)
    else if (res.data) return (aiParams.value = { ...res.data })
  } catch (err) {
    toast.warning('ç½‘ç»œé”™è¯¯', warningProp)
  }
}

// ========== æ›´æ–°æ»šåŠ¨åŒºåŸŸé«˜åº¦ ==========
function updateScrollViewHeight() {
  calcScrollViewHeight()
}

// âœ… è®¡ç®— scroll-view é«˜åº¦
function calcScrollViewHeight() {
  const query = uni.createSelectorQuery()
  // console.log("query-----", query);

  // ç›´æ¥é€šè¿‡ class æˆ– id æŸ¥è¯¢
  query.select('.nav-bar').boundingClientRect()
  query.select('.bto-box').boundingClientRect()
  query.selectViewport().boundingClientRect() // è·å–çª—å£å¤§å°

  query.exec((res) => {
    if (!res || res?.length < 3) return

    // console.log("res-----", res);

    const viewport = res[2] // selectViewport
    const header = res[0]
    const footer = res[1]

    const windowHeight = viewport.height
    const headerHeight = header ? header.height : 0
    const footerHeight = footer ? footer.height : ((158 * 2) / 750) * uni.upx2px(750) // å…œåº• 158rpx è½¬ px

    // è®¡ç®— scroll-view é«˜åº¦ï¼ˆå•ä½ pxï¼‰
    const heightInPx = windowHeight - headerHeight - footerHeight

    // è½¬å› rpx æ˜¾ç¤ºï¼ˆå¯é€‰ï¼‰ï¼Œæˆ–ç›´æ¥ç”¨ px
    scrollViewHeight.value = heightInPx // scroll-view æ”¯æŒ px

    // console.log("scrollViewHeight.value----", scrollViewHeight.value);
  })
}

// ========== é‡æ„çš„ SSE æµå¤„ç†é€»è¾‘ ==========
function createDifyStream(payload: any, cb: any) {
  let buffer = ''
  let streamEnded = false

  // const decoder = new TextDecoder("utf-8");

  // key ç”Ÿæˆå†…å®¹è°ƒç”¨æ¥å£çš„å‚æ•°ï¼Œè‡ªè¡Œå–èˆ
  const key = 'app-key'

  const req: any = uni.request({
    url: 'api', // æ¥å£åœ°å€
    method: 'POST',
    timeout: 300000, // è®¾ç½®ä¸º 5 åˆ†é’Ÿï¼ˆé»˜è®¤ 60 ç§’ï¼Œæœ€å¤§å¯è®¾ 300000 = 5 åˆ†é’Ÿï¼‰
    enableChunked: true,
    header: {
      Authorization: `Bearer ${key}`,
      'Content-Type': 'application/json',
      Accept: 'text/event-stream',
    },
    data: payload,
    success: () => {
      processBuffer()
      // å…œåº•ï¼šå¦‚æœè¿˜æ²¡ç»“æŸï¼Œå¼ºåˆ¶è§¦å‘ onFinish
      if (!streamEnded) {
        streamEnded = true
        cb.onFinish?.()
      }
    },
    fail: (err) => {
      cb.onError?.(new Error(err.errMsg))
      if (err.errMsg.includes('timeout')) {
        wx.showToast({
          title: 'ç½‘ç»œè¾ƒæ…¢ï¼Œè¯·ç¨åé‡è¯•',
          icon: 'none',
        })
      }
    },
  })

  if (req?.onChunkReceived) {
    req.onChunkReceived((res: any) => {
      const arrayBuffer = new Uint8Array(res.data)
      const chunk = new TextDecoder().decode(arrayBuffer)

      buffer += chunk
      processBuffer()
    })
  }

  function processBuffer() {
    const lines = buffer.split('\n')
    buffer = lines.pop() || '' // ä¿ç•™æœªå®Œæˆè¡Œ

    for (const line of lines) {
      // console.log("SSE Line:", line); // è°ƒè¯•

      if (!line.startsWith('data:')) continue

      const dataStr = line.slice(5).trim()

      // [DONE] è¡¨ç¤ºæµç»“æŸ
      if (dataStr === '[DONE]') {
        if (!streamEnded) {
          streamEnded = true
          // console.log("Received [DONE] -> onFinish triggered");
          cb.onFinish?.()
        }
        continue
      }

      if (!dataStr) continue

      try {
        const json = JSON.parse(dataStr)
        // console.log("Parsed JSON:", json);

        // å¤šç§ç»“æŸä¿¡å·å…¼å®¹
        if (
          json.is_finished === true ||
          json.event === 'message_end' ||
          json.status === 'completed' ||
          json.final_answer !== undefined
        ) {
          if (!streamEnded) {
            streamEnded = true

            // å»¶è¿Ÿ1ç§’åå¤„ç†
            setTimeout(() => {
              // ç»“æŸå‰å¤„ç†æ•°æ®
              // çº¯æ–‡æœ¬
              const str = parseHealthContentByAngleBrackets(generatedText.value)
              textContent.value = str
              // console.log("ğŸ¬ çº¯æ–‡æœ¬------", textContent.value);

              // html+TDK
              const data = parseContent(generatedText.value)
              generatedText.value = data.html
              TDK.value = data.tdk
              // console.log("ğŸ¬ html+TDK------", TDK.value);

              // è½¬ä¸ºè¡Œå†…
              const div = transformToInlineStyleFragment(generatedText.value)
              newGeneratedText.value = div
              // console.log("ğŸ¬ è½¬ä¸ºè¡Œå†…------", newGeneratedText.value);

              // æ ‡é¢˜æå–
              if (!TDK.value?.title) {
                contentTitle.value = extractMainTitle(generatedText.value) || ''
                // console.log("ğŸ¬ æ ‡é¢˜æå–------", newGeneratedText.value);
              }

              // å…³é—­ æ¸…é™¤
              cb.onFinish?.()
            }, 1000)
          }
        }

        // æå–æ–‡æœ¬å†…å®¹ï¼ˆå…¼å®¹ä¸åŒå­—æ®µï¼‰
        const text = json.answer || json.text || json.content
        if (text && !streamEnded) {
          cb.onPartialAnswer?.(text)
        }
      } catch (err) {
        console.error('Parse error:', err, 'Data:', dataStr)
      }
    }
  }

  return {
    abort() {
      req?.abort?.()
    },
    isEnded() {
      return streamEnded
    },
  }
}

// ========== ä¼˜åŒ–çš„æ»šåŠ¨åˆ°åº•éƒ¨é€»è¾‘ ==========
function scrollIfNeeded() {
  const now = Date.now()
  if (now - lastScrollTime.value < 50) return
  lastScrollTime.value = now
  nextTick(() => {
    const query = uni.createSelectorQuery()
    query.select('.scroll-content').boundingClientRect()
    query.exec((res) => {
      // console.log("scroll-content--res-----", res[0].height);
      scrollTop.value = res[0].height
    })
  })
}

// ========== å¼€å§‹è¾“å…¥ ==========
function startTyping() {
  if (isTyping.value) return
  if (!pendingText.value) return

  isTyping.value = true
  typingTimer = setInterval(() => {
    if (!pendingText.value) {
      stopTyping()
      return
    }
    // æ¯æ¬¡å– 10~20 å­—ç¬¦ï¼Œå‡å°‘ DOM æ›´æ–°æ¬¡æ•°
    const chunk = pendingText.value.slice(0, 20)
    generatedText.value += chunk
    pendingText.value = pendingText.value.slice(20)
    scrollIfNeeded()
  }, 30)
}

// ========== åœæ­¢è¾“å…¥ ==========
function stopTyping() {
  // console.log("stopTyping-------");
  if (typingTimer) clearInterval(typingTimer)
  typingTimer = null
  if (pendingText.value) {
    generatedText.value += pendingText.value
    pendingText.value = ''
  }
  isTyping.value = false
  scrollIfNeeded()
  // console.log("stopTyping----end---");
}

// ========== å¼€å§‹è¯·æ±‚ ==========
async function startStreamRequest() {
  if (isGenerating.value) return
  isGenerating.value = true
  showOverlayFlag.value = true
  newGeneratedText.value = ''
  generatedText.value = ''
  pendingText.value = ''
  stopTyping()
  lastChunk.value = ''
  lastContentLength.value = 0
  textContent.value = ''

  // æ„å»ºè¯·æ±‚è´Ÿè½½
  const payload = {
    inputs: {
      doctor: aiParams.value.userName || '',
      workunit: aiParams.value.hospital || '',
      dept: aiParams.value.department,
      role: aiParams.value.roleType,
      MedicalFieldDescription: aiParams.value.medicalFieldDescription,
      contentType: aiParams.value.contentType,
      isCover: aiParams.value.isCover ? 1 : 0,
      isSearch: aiParams.value.isSearch ? 1 : 0,
    },
    promptId: promptId.value.toString(),
    // message: "å†…å®¹ç”Ÿæˆ",
    // query: JSON.stringify(da || aiParams.value.sprContent),
    query: JSON.stringify(aiParams.value.sprContent),
    response_mode: 'streaming',
    stream: true,
    user: `miAPP-${authStore.userInfo.userId}-${authStore.userInfo.userName}`,
  }

  controller.value = createDifyStream(payload, {
    onPartialAnswer: (frag: string) => {
      // console.log("onPartialAnswer-------");
      if (!frag || frag === lastChunk.value) return
      lastChunk.value = frag

      const cleanFrag = frag.replace(/[\x00-\x08\v\f\x0E-\x1F\x7F-\x9F]/g, '')
      if (!cleanFrag) return

      pendingText.value += cleanFrag
      const newLen = generatedText.value.length + pendingText.value.length
      if (newLen <= lastContentLength.value) return
      lastContentLength.value = newLen

      if (!isTyping.value) startTyping()
    },
    onFinish: () => {
      // console.log("onFinish-------");

      stopTyping()
      isGenerating.value = false
      isStreamEnded.value = true
      showOverlayFlag.value = false
    },
    onError: (err: Error) => {
      // console.log("onError-------");

      // console.error(err);
      stopTyping()
      isGenerating.value = false
      showOverlayFlag.value = false
    },
  })
}

// ========== æäº¤ ==========
async function submit() {
  if (isFastClick(500)) return console.warn('âš ï¸ é˜²æ­¢å¿«é€Ÿç‚¹å‡»ï¼Œè·³è¿‡æäº¤')
  toast.loading('åŠ è½½ä¸­', loadingProp)

  // æ–‡ç« æµç¨‹éœ€è¦é™åˆ¶å­—æ•°è¶…è¿‡1500 è§†é¢‘æ ¹æ®ç”Ÿæˆå†…å®¹æ¥
  if (pageType.value === 1 && textContent.value.length < 1500) {
    toast.hide()
    tipType.value = 1
    return (showTipPropFlag.value = true)
  }

  const data: any = {
    name: TDK.value.title || contentTitle.value,
    content: generatedText.value,
    sourceId: sprId.value,
    promptId: Number(promptId.value),
  }
  if (TDK.value) {
    data.name = TDK.value.title
    data.title = TDK.value.title
    data.seoTitle = TDK.value.title
    data.seoKeywords = TDK.value.keywords
    data.seoDescription = TDK.value.description
    data.imageUrl = TDK.value.cover
    data.seoAnalysis = TDK.value.seo_analysis
  }
  // console.log("ğŸ“ æäº¤æ•°æ®:", JSON.stringify(data, null, 2));

  // è°ƒç”¨å°±æäº¤æ¥å£å¤„ç†
  await submitFn(data).queryFn()
}

// ========== ç»„ä»¶é”€æ¯ ==========
onBeforeUnmount(() => {
  console.log('ğŸ§¹ ç»„ä»¶é”€æ¯å¼€å§‹')

  if (controller.value) {
    console.log('ğŸ›‘ ä¸­æ­¢ SSE æµè¯·æ±‚')
    controller.value.abort()
    controller.value = null
  }

  stopTyping() // ç¡®ä¿æ¸…ç†æ‰“å­—æœº
  console.log('ğŸ§¹ æ‰“å­—æœºæ¸…ç†å®Œæˆ')
  console.log('âœ… AIç”Ÿæˆç»„ä»¶å·²é”€æ¯')
})
</script>

<template>
  <div class="page h-screen flex flex-col justify-between bg-white">
    <Navbar title="aiç”Ÿæˆ" fixed :placeholder="true" backgroundColor="#FFFFFF" />

    <div class="flex-1 overflow-hidden bg-[#FEFEFE]">
      <scroll-view
        :scroll-top="scrollTop"
        :scroll-y="true"
        :scroll-into-view="scrollTarget"
        :scroll-with-animation="true"
        :show-scrollbar="false"
        :enhanced="true"
        :style="{ height: `${scrollViewHeight}px` }"
        class="border border-[#eee] rounded-[16rpx] bg-[#FCFCFC] p-[30rpx]"
      >
        <div class="scroll-content">
          <div v-if="newGeneratedText" v-html="newGeneratedText"></div>
          <div v-else-if="generatedText" v-html="generatedText"></div>
          <div v-else class="text-[32rpx] text-[#888888]">AI æ­£åœ¨æ€è€ƒä¸­...</div>

          <div
            v-if="textContent.length"
            class="w-full min-h-[50rpx] text-[#85BFFB] text-[28rpx] mt-[20rpx]"
          >
            å…±è®¡<span>{{ textContent.length }}</span
            >å­—
          </div>

          <div class="w-full h-[100rpx]"></div>
        </div>
      </scroll-view>
    </div>

    <div class="h-[158rpx] w-full">
      <div
        class="fixed bottom-0 z-10 h-[158rpx] w-full flex items-center justify-between bg-white px-[38rpx]"
      >
        <div class="flex flex-1 items-center justify-around">
          <div class="flex items-center" @click="startStreamRequest">
            <img
              :src="`https://ystcdn.venuertc.com/venue/app/static/2025-08-22/a054f4cb-e841-4989-af50-e3c14704eb91.png${imgQuality40}`"
              class="h-[36rpx] w-[36rpx]"
            />
            <span class="ml-[8rpx] text-[32rpx] text-[#38393C] font-500">é‡å†™</span>
          </div>
          <!-- <div class="flex items-center" @click="editGenerateContent">
            <img
              :src="`https://ystcdn.venuertc.com/venue/app/static/2025-08-13/85e1b66b-4f0b-421a-9478-b4bc2e60d1a2.png${imgQuality40}`"
              class="w-[36rpx] h-[36rpx]"
            />
            <span class="text-[#38393C] text-[32rpx] font-500 ml-[8rpx]"
              >ç¼–è¾‘</span
            >
          </div> -->
        </div>
        <div
          v-if="times"
          class="h-[96rpx] w-[392rpx] rounded-full bg-[#FFFFFF] text-center text-[#1089FF] font-600 leading-[96rpx] border-solid border-[2rpx] border-[#1089FF]"
        >
          é˜…è¯»ä¸­{{ displayTime }}
        </div>
        <div
          v-else
          class="h-[96rpx] w-[392rpx] rounded-full bg-[#1089FF] text-center text-white font-600 leading-[96rpx]"
          @click="submit"
        >
          <span v-if="pageType === 1">ä¿å­˜æäº¤</span>
          <span
            v-else-if="
              pageType === 1 && ['editArticle', 'editTask', 'reassignTask'].includes(operationType)
            "
            >ä¿å­˜æäº¤</span
          >

          <span v-else-if="pageType === 2">ä¿å­˜æäº¤</span>
          <span
            v-else-if="
              pageType === 2 && ['editVideo', 'editTask', 'reassignTask'].includes(operationType)
            "
            >é‡æ–°å½•åˆ¶</span
          >
        </div>
      </div>
    </div>

    <nut-overlay v-model:visible="showOverlayFlag" :z-index="2000" :close-on-click-overlay="false">
      <div class="h-full w-full flex items-center justify-center">
        <div class="flex flex-col items-center text-white">
          <img
            :src="`https://ystcdn.venuertc.com/venue/app/static/2025-08-14/35f2b461-940f-4f33-a97c-0d0d372512b3.gif${imgQuality40}`"
            class="h-[206rpx] w-[206rpx]"
          />
          <div>ç”Ÿæˆä¸­ï¼Œè¯·è€å¿ƒç­‰å¾…â€¦</div>
          <div class="mt-[46rpx] w-[514rpx] text-center">
            æ¸©é¦¨æç¤ºï¼šåŒ»å­¦çŸ¥è¯†å…·æœ‰ä¸“ä¸šæ€§ï¼Œå½“å‰ç§‘æ™®å†…å®¹ç”±äººå·¥æ™ºèƒ½è¾…åŠ©ç”Ÿæˆï¼Œéœ€ç»åŒ»ç–—ä»ä¸šè€…äºŒæ¬¡æ ¸éªŒï¼Œå»ºè®®ç»“åˆä¸“ä¸šè¯Šç–—æ„è§ç»¼åˆå‚è€ƒã€‚
          </div>
        </div>
      </div>
    </nut-overlay>
  </div>
</template>

<style lang="scss" scoped>
/* è§£å†³å°ç¨‹åºå’Œappæ»šåŠ¨æ¡çš„é—®é¢˜ */

/* #ifdef MP-WEIXIN || APP-PLUS */
::-webkit-scrollbar {
  display: none;
  width: 0 !important;
  height: 0 !important;
  color: transparent;
  appearance: none;
  background: transparent;
}

/* #endif */

/* è§£å†³H5 çš„é—®é¢˜ */

/* #ifdef H5 */
uni-scroll-view .uni-scroll-view::-webkit-scrollbar {
  display: none;
  width: 0 !important;
  height: 0 !important;
  color: transparent;
  appearance: none;
  background: transparent;
}

/* #endif */

/* ä¿®å¤å†…å®¹é«˜åº¦ä¸è¶³æ—¶åº•éƒ¨ç©ºç™½é—®é¢˜ */
.scroll-view {
  display: flex;
  flex-direction: column;
  min-height: 100%;

  & > div {
    flex: 1 0 auto;
  }

  /* ç¡®ä¿å†…å®¹åŒºåŸŸå¯ä¼¸ç¼© */
  .content-container {
    flex: 1;
    min-height: 100%;
  }
}
</style>

```

### 3.ç›¸å…³æ•°æ®å¤„ç†å‡½æ•°

```
/**
 * å°†åŒ…å« <style> çš„ HTML å­—ç¬¦ä¸²è½¬æ¢ä¸ºè¡Œå†…æ ·å¼
 * ä¸¥æ ¼ä¿ç•™åŸæœ‰æ ‡ç­¾ç»“æ„ï¼Œä¸å¢ä¸åˆ ä»»ä½•å±æ€§ï¼Œä»…åˆå¹¶ style
 */
export function transformToInlineStyleFragment(htmlContent: string): string {
  if (!htmlContent || typeof htmlContent !== "string") return "";

  // 1. æå–å¹¶è§£æ <style> ä¸­çš„ CSS è§„åˆ™
  const styleMap: Record<string, Record<string, string>> = {};
  const styleRegex = /<style[^>]*>([\s\S]*?)<\/style>/gi;

  let styleMatch;
  while ((styleMatch = styleRegex.exec(htmlContent)) !== null) {
    const cssText = styleMatch[1];
    const cleanCss = cssText.replace(/\/\*[\s\S]*?\*\//g, ""); // ç§»é™¤æ³¨é‡Š
    const ruleRegex = /([^{]+)\{([^}]*)\}/g;
    let rule;
    while ((rule = ruleRegex.exec(cleanCss)) !== null) {
      const selectorStr = rule[1].trim();
      const declaration = rule[2].trim();
      const selectors = selectorStr.split(",").map((s) => s.trim());
      const styleObj: Record<string, string> = {};
      declaration
        .split(";")
        .map((p) => p.trim())
        .filter((p) => p)
        .forEach((prop) => {
          const [k, v] = prop
            .split(":")
            .map((s) => s?.trim())
            .filter(Boolean) as [string, string];
          if (k && v) {
            styleObj[k] = v;
          }
        });
      selectors.forEach((sel) => {
        if (sel && sel !== "") {
          styleMap[sel] = { ...styleMap[sel], ...styleObj };
        }
      });
    }
  }

  // 2. ç§»é™¤æ‰€æœ‰ <style> æ ‡ç­¾
  let tempHtml = htmlContent.replace(styleRegex, "");

  // 3. åŒ¹é…æ¯ä¸€ä¸ª HTML æ ‡ç­¾ï¼ˆæ”¯æŒè‡ªé—­åˆã€å±æ€§é¡ºåºä¿ç•™ï¼‰
  const tagRegex = /<([a-zA-Z][a-zA-Z0-9:]*)([^>]*)>/g;

  tempHtml = tempHtml.replace(
    tagRegex,
    (fullMatch, tagName: string, attrs = "") => {
      const attrsTrimmed = attrs.trim();

      // è§£æ id, class, style
      const idMatch = /id\s*=\s*"([^"]*)"/.exec(attrs);
      const classMatch = /class\s*=\s*"([^"]*)"/.exec(attrs);
      const styleMatch = /style\s*=\s*"([^"]*)"/.exec(attrs);

      const id = idMatch ? `#${idMatch[1]}` : null;
      const classes = classMatch
        ? classMatch[1]
            .split(/\s+/)
            .filter(Boolean)
            .map((c) => `.${c}`)
        : [];
      const existingStyleText = styleMatch ? styleMatch[1] : "";

      // æ„å»ºæœ€ç»ˆ style å¯¹è±¡ï¼ŒæŒ‰ä¼˜å…ˆçº§åˆå¹¶
      const finalStyle: Record<string, string> = {};

      // 1. é€šé…ç¬¦ *
      if (styleMap["*"]) Object.assign(finalStyle, styleMap["*"]);

      // 2. æ ‡ç­¾é€‰æ‹©å™¨
      const lowerTagName = tagName.toLowerCase();
      if (styleMap[lowerTagName])
        Object.assign(finalStyle, styleMap[lowerTagName]);

      // 3. ç±»é€‰æ‹©å™¨ï¼ˆæŒ‰é¡ºåºï¼‰
      classes.forEach((cls) => {
        if (styleMap[cls]) Object.assign(finalStyle, styleMap[cls]);
      });

      // 4. ID é€‰æ‹©å™¨ï¼ˆæœ€é«˜ä¼˜å…ˆçº§ä¹‹ä¸€ï¼‰
      if (id && styleMap[id]) Object.assign(finalStyle, styleMap[id]);

      // 5. åŸæœ‰è¡Œå†…æ ·å¼ï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼Œè¦†ç›–å‰é¢æ‰€æœ‰ï¼‰
      if (existingStyleText) {
        existingStyleText.split(";").forEach((pair) => {
          const [k, v] = pair
            .split(":")
            .map((s) => s.trim())
            .filter(Boolean) as [string, string];
          if (k && v) {
            finalStyle[k] = v;
          }
        });
      }

      // ç”Ÿæˆæ–°çš„ style å­—ç¬¦ä¸²ï¼ˆä¿ç•™åŸå§‹æ ¼å¼é£æ ¼ï¼šk: vï¼‰
      const newStyleStr = Object.entries(finalStyle)
        .map(([k, v]) => `${k}: ${v}`)
        .join("; ")
        .replace(/\s*;\s*/g, "; "); // æ ‡å‡†åŒ–ç©ºæ ¼

      // é‡æ–°æ„å»ºå±æ€§å­—ç¬¦ä¸²ï¼ˆä¿ç•™åŸå§‹å±æ€§é¡ºåºï¼‰
      let newAttrs = attrsTrimmed;

      if (newStyleStr) {
        if (styleMatch) {
          // æ›¿æ¢åŸæœ‰ style å±æ€§ï¼ˆç²¾ç¡®åŒ¹é…ï¼‰
          const styleAttrRegex = /style\s*=\s*"([^"]*)"/;
          newAttrs = newAttrs.replace(styleAttrRegex, `style="${newStyleStr}"`);
        } else {
          // æ·»åŠ  style å±æ€§ï¼ˆæ”¾åœ¨æœ€åï¼‰
          newAttrs = newAttrs + ` style="${newStyleStr}"`;
        }
      }

      // è¿”å›å®Œæ•´æ ‡ç­¾
      return `<${tagName} ${newAttrs.trim()}>`;
    }
  );

  return tempHtml;
}

/**
 * çº¯æ–‡æœ¬æå–ï¼ˆæ”¯æŒå¯é€‰çš„â€œå¼€å§‹è¾“å‡ºæ­£æ–‡â€æ ‡è®°ï¼‰
 * - è‹¥å­˜åœ¨â€œå¼€å§‹è¾“å‡ºæ­£æ–‡â€ï¼Œåˆ™ä»æ­¤å¤„å¼€å§‹
 * - è‡ªåŠ¨å»é™¤ <style> æ ‡ç­¾åŠå…¶åå†…å®¹ã€å‚è€ƒæ–‡çŒ®åŠä¹‹åå†…å®¹
 * - æ¸…ç† HTML æ ‡ç­¾ã€çº¯ emoji è¡Œã€å¤šä½™ç©ºç™½
 */
export function parseHealthContentByAngleBrackets(rawText: string): string {
  if (!rawText || typeof rawText !== "string") {
    return "";
  }

  let text = rawText;

  // 1. ç»Ÿä¸€å¹¶æ¸…ç†æ¢è¡Œç¬¦å’Œç‰¹æ®Šç¬¦å·
  text = text
    .replace(/\r\n/g, "\n")
    .replace(/\r/g, "\n")
    .replace(/â†µ/g, "\n")
    .replace(/\n+/g, "\n");

  // 2. å¯é€‰ï¼šä»â€œå¼€å§‹è¾“å‡ºæ­£æ–‡â€ä¹‹åå¼€å§‹ï¼ˆè‹¥å­˜åœ¨ï¼‰
  const startMarker = "å¼€å§‹è¾“å‡ºæ­£æ–‡";
  const startIndex = text.indexOf(startMarker);
  if (startIndex !== -1) {
    text = text.slice(startIndex + startMarker.length);
  } else {
    console.warn(
      "æœªæ‰¾åˆ° 'å¼€å§‹è¾“å‡ºæ­£æ–‡' æ ‡è®°ï¼Œå°†å¤„ç†å…¨æ–‡",
      rawText.substring(0, 100) + "..."
    );
  }

  // 3. æˆªæ–­ï¼šé‡åˆ° <style æˆ– </style> å°±åœæ­¢ï¼ˆä¸åŒºåˆ†å¤§å°å†™ï¼‰
  const styleRegex = /<\s*(?:\/\s*)?style\b/i;
  const styleMatch = styleRegex.exec(text);
  if (styleMatch) {
    text = text.slice(0, styleMatch.index);
  }

  // 4. å»é™¤â€œå‚è€ƒæ–‡çŒ®â€åŠä¹‹åçš„å†…å®¹
  const refIndex = text.indexOf("å‚è€ƒæ–‡çŒ®");
  if (refIndex !== -1) {
    text = text.slice(0, refIndex);
  }

  // 5. å»é™¤æ‰€æœ‰ HTML æ ‡ç­¾ï¼š<xxx>ã€</xxx>ã€<xxx/> ç­‰
  let plainText = text.replace(/<[^>]+>/g, "");

  // 6. å»é™¤ä»…åŒ…å« emoji çš„è¡Œ
  plainText = plainText
    .split("\n")
    .map((line) => line.trim())
    .filter((line) => {
      if (!line) return false;
      const noSpaces = line.replace(/\s/g, "");
      if (!noSpaces) return false;
      // åˆ¤æ–­æ˜¯å¦å…¨ä¸º emojiï¼ˆå«ç»„åˆç¬¦ï¼‰
      const isOnlyEmoji = /^[\p{Extended_Pictographic}\u{200D}]+$/u.test(
        noSpaces
      );
      return !isOnlyEmoji;
    })
    .join(" "); // åˆå¹¶ä¸ºå•è¡Œï¼Œç”¨ç©ºæ ¼è¿æ¥

  // 7. æ¸…ç†å¤šä½™ç©ºç™½
  const result = plainText.replace(/\s+/g, " ").trim();

  return result;
}

/**
 * ä» HTML å†…å®¹ä¸­æ™ºèƒ½æå–æœ€å¯èƒ½çš„ä¸»æ ‡é¢˜æ–‡æœ¬ï¼ˆå®‰å…¨ç‰ˆï¼Œé˜²å¡æ­»ï¼‰
 *
 * @param {string} html - HTML å­—ç¬¦ä¸²
 * @returns {string|null} æå–å‡ºçš„æ ‡é¢˜æ–‡æœ¬ï¼Œæœªæ‰¾åˆ°åˆ™è¿”å› null
 */
export function extractMainTitle(html: string): string | null {
  if (typeof html !== "string" || !html.trim()) {
    console.warn("Invalid HTML content");
    return null;
  }

  // âœ… å®‰å…¨é™åˆ¶ï¼šæˆªæ–­è¿‡é•¿ HTMLï¼ˆé˜²æ”»å‡»æˆ–æ€§èƒ½é—®é¢˜ï¼‰
  const MAX_LENGTH = 50_000;
  const truncatedHtml = html.length > MAX_LENGTH ? html.slice(0, MAX_LENGTH) : html;

  // âœ… ä½¿ç”¨éè´ªå©ªä½†å®‰å…¨çš„æ­£åˆ™ï¼Œé™åˆ¶åŒ¹é…èŒƒå›´
  const tagPattern = /<(h1|h2|h3|h4|title|div|p|span)[^>]*?(?:class\s*=\s*["'][^"']*?(?:title|headline|heading|header|top)[^"']*?["'])?[^>]*>([^<]{1,200}?)<\/\1>/gi;

  const candidates = [];
  let match;
  let index = 0;

  // âœ… é˜²æ­¢æ— é™å¾ªç¯ï¼šé™åˆ¶æœ€å¤§åŒ¹é…æ¬¡æ•°
  const MAX_MATCHES = 50;
  while ((match = tagPattern.exec(truncatedHtml)) !== null && index++ < MAX_MATCHES) {
    const [, tag, text] = match;
    const classAttr = /class\s*=\s*["'][^"']*?(?:title|headline|heading|header|top)[^"']*?["']/i.test(match[0]);

    candidates.push({
      tag,
      text: text.trim(),
      hasTitleClass: classAttr,
      index: match.index,
    });
  }

  if (candidates.length === 0) {
    // å›é€€ï¼šå–å‰ 200 å­—çš„çº¯æ–‡æœ¬ï¼ˆå»æ ‡ç­¾ï¼‰
    return extractPlainTextFallback(truncatedHtml);
  }

  // è¯„åˆ†æ’åº
  const scored = candidates.map((item, i) => {
    let score = 0;

    if (item.tag === 'h1') score += 40;
    else if (item.tag === 'h2') score += 30;
    else if (['h3', 'h4'].includes(item.tag)) score += 10;

    if (item.hasTitleClass) score += 20;

    const len = item.text.length;
    if (len >= 5 && len <= 100) score += 10;
    else if (len === 0) score -= 50;

    // è¶Šé å‰è¶Šå¥½
    score += Math.max(0, 20 - i * 2);

    return { ...item, score };
  });

  scored.sort((a, b) => b.score - a.score);
  const best = scored[0];

  return best.score > 0 ? cleanText(best.text) : null;
}

/**
 * çº¯æ–‡æœ¬å›é€€ç­–ç•¥ï¼šå»é™¤ HTML æ ‡ç­¾ï¼Œå–å¼€å¤´æœ‰æ„ä¹‰æ–‡æœ¬
 */
function extractPlainTextFallback(html: string): string | null {
  // å»é™¤æ ‡ç­¾ï¼ˆå®‰å…¨æ–¹å¼ï¼‰
  const plain = html.replace(/<[^>]+>/g, ' ').replace(/\s+/g, ' ').trim();
  if (!plain) return null;

  // å–å‰å‡ å¥
  const firstSentence = plain.split(/[,ï¼Œã€‚.;]/)[0];
  if (firstSentence.length >= 5 && firstSentence.length <= 100) {
    return cleanText(firstSentence);
  }

  return cleanText(plain.substring(0, 50));
}

/**
 * æ¸…ç†æ–‡æœ¬ï¼šå»ç©ºæ ¼ã€è½¬ä¹‰å­—ç¬¦ç­‰
 */
function cleanText(text: string): string {
  return text
    .replace(/&nbsp;/g, ' ')
    .replace(/</g, '<')
    .replace(/>/g, '>')
    .replace(/&amp;/g, '&')
    .trim();
}

/**
 * è§£æ HTML å¹¶æå–ç–‘ä¼¼æ ‡é¢˜çš„å€™é€‰å…ƒç´ 
 */
function findTitleCandidates(html: string) {
  const candidates = [];
  const tagMatchRegex =
    /<([a-zA-Z]+)([^>]*)>([^<]*<[^>]+>[^<]*)*[^<]*<\/\1>|<([a-zA-Z]+)([^>]*)\s*\/>/g;
  const selfClosingTags = new Set(["br", "hr", "img", "input", "meta", "link"]);

  let match;
  while ((match = tagMatchRegex.exec(html)) !== null) {
    const full = match[0];
    const tag = match[1] || match[4]; // åŒ¹é…å¼€å§‹æ ‡ç­¾å
    const attrs = match[2] || match[5] || "";
    const innerHTML = match[3] || "";

    // è·³è¿‡è‡ªé—­åˆæ ‡ç­¾
    if (selfClosingTags.has(tag.toLowerCase())) continue;

    // æå– class å±æ€§
    const classMatch = attrs.match(/class\s*=\s*["']([^"']*)["']/i);
    const className = classMatch ? classMatch[1] : "";

    const text = extractTextContent(innerHTML).trim();

    // åªä¿ç•™å¯èƒ½ä¸ºæ ‡é¢˜çš„æ ‡ç­¾æˆ–å«å…³é”®è¯ class
    const isHeadingTag = /^h[1-6]$/i.test(tag);
    const hasTitleClass = /\b(title|headline|heading|header)\b/i.test(
      className
    );

    if (isHeadingTag || hasTitleClass) {
      candidates.push({
        tag: tag.toLowerCase(),
        class: className,
        text,
        html: full,
      });
    }
  }

  return candidates;
}

/**
 * ä» HTML ç‰‡æ®µä¸­æå–çº¯æ–‡æœ¬ï¼ˆå»æ ‡ç­¾ï¼‰
 */
function extractTextContent(html: string): string {
  return html.replace(/<[^>]+>/g, "").trim();
}



/**
 * å›é€€æ–¹æ¡ˆï¼šæå– HTML ä¸­å‰å‡ ä¸ªæœ‰æ„ä¹‰çš„æ–‡æœ¬å—ï¼ˆç”¨äºæ— æ˜ç¡®æ ‡é¢˜æ—¶ï¼‰
 */
function extractTopTextualContent(html: string): string | null {
  // ç§»é™¤ script/style
  const plain = html
    .replace(/<script[^>]*>[\s\S]*?<\/script>/gi, "")
    .replace(/<style[^>]*>[\s\S]*?<\/style>/gi, "");

  // åŒ¹é…å—çº§æ ‡ç­¾ä¸­çš„æ–‡æœ¬
  const blockTags = ["p", "div", "h1", "h2", "h3", "section", "article", "li"];
  const parts: any = [];

  blockTags.forEach((tag) => {
    const regex = new RegExp(`<${tag}[^>]*>([^<]+)<\\/${tag}>`, "gi");
    let m;
    while ((m = regex.exec(plain)) !== null) {
      const text = cleanText(m[1]);
      if (text.length > 5 && text.length < 150) {
        parts.push({ text, index: m.index });
      }
    }
  });

  // æŒ‰å‡ºç°ä½ç½®æ’åºï¼Œå–æœ€å‰é¢çš„
  parts.sort((a: any, b: any) => a.index - b.index);
  return parts.length > 0 ? parts[0].text : null;
}


/**
 * è§£ææ•°æ® ä¿ç•™aiæ–‡ç« /è„šæœ¬çš„æ ‡ç­¾+æ ·å¼å†…å®¹
 */
export function parseContent(content: any) {
  // 1. ç»Ÿä¸€æ¢è¡Œç¬¦ï¼šå°† â†µ \r\n æ›¿æ¢ä¸º \n
  const normalized = content.replace(/â†µ/g, "\n").replace(/\r\n/g, "\n");

  // 2. å®šä½ "TDKä¿¡æ¯å¼€å§‹è¾“å‡º" æ ‡è®°
  const tdkMarker = "TDKä¿¡æ¯å¼€å§‹è¾“å‡º";
  const tdkIndex = normalized.indexOf(tdkMarker);

  if (tdkIndex === -1) {
    console.log("æœªåŒ¹é…åˆ°'TDKä¿¡æ¯å¼€å§‹è¾“å‡º'------");
    return {
      tdk: null,
      html: content,
    };
  }

  // 3. æå– TDK ä¹‹åçš„å†…å®¹ï¼Œç”¨äºè§£æ JSON
  const afterTdk = normalized.slice(tdkIndex + tdkMarker.length).trim();

  // 4. æ‰¾åˆ°ç¬¬ä¸€ä¸ª '{' å¼€å§‹æå– JSON
  const jsonStartIdx = afterTdk.indexOf("{");
  if (jsonStartIdx === -1) {
    console.log("æœªæ‰¾åˆ° JSON èµ·å§‹ç¬¦ {------");
    return {
      tdk: null,
      html: content,
    };
  }

  let jsonString = "";
  let braceCount = 0;
  const chars = afterTdk.substring(jsonStartIdx);

  for (let i = 0; i < chars.length; i++) {
    const char = chars[i];
    jsonString += char;
    if (char === "{") braceCount++;
    if (char === "}") braceCount--;
    if (braceCount === 0) break; // å®Œæ•´é—­åˆ
  }

  if (braceCount !== 0) {
    console.log("JSON æ‹¬å·æœªé—­åˆ-----");
    return {
      tdk: null,
      html: content,
    };
  }

  // æ¸…ç†å¹¶è§£æ JSON
  const cleanedJson = jsonString
    .replace(/\n/g, " ")
    .replace(/\s+/g, " ")
    .replace(/,\s*\}/g, "}")
    .replace(/,\s*\]/g, "]")
    .trim();

  let tdkData;
  try {
    tdkData = JSON.parse(cleanedJson);
  } catch (e: any) {
    console.error("JSON è§£æå¤±è´¥:", e.message);
    console.error("å¾…è§£æå­—ç¬¦ä¸²:", cleanedJson);

    console.log(`JSON æ ¼å¼é”™è¯¯ï¼š${e.message}----`);
    return {
      tdk: null,
      html: content,
    };
  }

  // 5. æå– TDK ä¹‹å‰çš„å†…å®¹
  const beforeTdk = normalized.slice(0, tdkIndex);

  // 6. æ‰¾åˆ°ç¬¬ä¸€ä¸ª '<' çš„ä½ç½®ï¼Œåªä¿ç•™ä»è¿™é‡Œå¼€å§‹çš„ HTMLï¼ˆåŒ…å« style æ ‡ç­¾ï¼‰
  const firstLessThan = beforeTdk.indexOf("<");
  if (firstLessThan === -1) {
    console.log("æœªæ‰¾åˆ° HTML èµ·å§‹æ ‡ç­¾ <-----");
    return {
      tdk: null,
      html: content,
    };
  }

  const htmlWithStyle = beforeTdk.slice(firstLessThan).trim(); // åŒ…å«å®Œæ•´çš„ HTML å’Œ <style>...</style>

  // 7. è¿”å›ç»“æœï¼štdk + åˆå¹¶åçš„å®Œæ•´ HTMLï¼ˆå« style æ ‡ç­¾ï¼‰
  return {
    tdk: tdkData,
    html: htmlWithStyle, // âœ… åŒ…å« <style> å’Œ </style> çš„å®Œæ•´ HTML
  };
}

```



