---
layout: post
title: "xml属性注解笔记"
date: 2025-03-14 09:31:18 +0800
description: "‌：就像你去银行办业务，每个窗口都有一个编号（比如“3号窗口”），你告诉工作人员“我要去3号窗口”，他们就知道该找谁。‌：就像同一款 App，iOS 和 Android 的安装包不同，MyBatis 会根据当前数据库加载对应的 SQL。‌：以前用来描述参数怎么和 SQL 对应，但现在大家都直接用“#{属性名}”写在 SQL 里，更方便。‌：你点外卖时说“要一杯奶茶”，即使不说“大杯”，店员默认也会给你大杯（如果系统有默认值）。‌：你网购一箱苹果，快递单上写的是“苹果”（单个类型），而不是“一箱苹果”。"
keywords: "xml属性注解笔记"
categories: ['未分类']
tags: ['笔记', 'Xml']
artid: "146249048"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146249048
    alt: "xml属性注解笔记"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146249048
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146249048
cover: https://bing.ee123.net/img/rand?artid=146249048
image: https://bing.ee123.net/img/rand?artid=146249048
img: https://bing.ee123.net/img/rand?artid=146249048
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     xml属性注解笔记
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <h2>
     Select
    </h2>
    <h4>
     ‌
     <strong>
      1. id
     </strong>
     ‌
    </h4>
    <p>
     ‌
     <strong>
      作用
     </strong>
     ‌：这条 SQL 的“身份证号”，在同一个房间里（命名空间内）必须唯一。
     <br/>
     ‌
     <strong>
      例子
     </strong>
     ‌：就像你去银行办业务，每个窗口都有一个编号（比如“3号窗口”），你告诉工作人员“我要去3号窗口”，他们就知道该找谁。
    </p>
    <hr/>
    <h4>
     ‌
     <strong>
      2. parameterType
     </strong>
     ‌
    </h4>
    <p>
     ‌
     <strong>
      作用
     </strong>
     ‌：告诉 MyBatis 这条 SQL 要用的参数是什么类型（比如一个
     <code>
      User
     </code>
     对象）。
     <br/>
     ‌
     <strong>
      例子
     </strong>
     ‌：你点奶茶时说“我要一杯大杯的”，店员就知道用大杯装。但如果你不说，店员也能从你的手势猜出来（MyBatis 会自己猜类型）。
    </p>
    <hr/>
    <h4>
     ‌
     <strong>
      3. parameterMap（已废弃）
     </strong>
     ‌
    </h4>
    <p>
     ‌
     <strong>
      作用
     </strong>
     ‌：以前用来描述参数怎么和 SQL 对应，但现在大家都直接用“#{属性名}”写在 SQL 里，更方便。
     <br/>
     ‌
     <strong>
      例子
     </strong>
     ‌：就像以前写信要贴邮票，现在直接用微信扫码支付，没人再用邮票了。
    </p>
    <hr/>
    <h4>
     ‌
     <strong>
      4. resultType
     </strong>
     ‌
    </h4>
    <p>
     ‌
     <strong>
      作用
     </strong>
     ‌：告诉 MyBatis 这条 SQL 返回的数据要转成什么类型（比如
     <code>
      User
     </code>
     对象）。
     <br/>
     ‌
     <strong>
      细节
     </strong>
     ‌：如果返回的是一个列表（比如
     <code>
      List&lt;User&gt;
     </code>
     ），这里填的是
     <code>
      User
     </code>
     ，不是
     <code>
      List
     </code>
     。
     <br/>
     ‌
     <strong>
      例子
     </strong>
     ‌：你网购一箱苹果，快递单上写的是“苹果”（单个类型），而不是“一箱苹果”。
    </p>
    <hr/>
    <h4>
     ‌
     <strong>
      5. resultMap
     </strong>
     ‌
    </h4>
    <p>
     ‌
     <strong>
      作用
     </strong>
     ‌：如果结果很复杂（比如数据要拆成多个对象），用这个指向一个提前写好的“映射说明书”。
     <br/>
     ‌
     <strong>
      例子
     </strong>
     ‌：就像组装乐高时，说明书会告诉你哪块积木放哪里，而不是让你自己瞎猜。
    </p>
    <hr/>
    <h4>
     ‌
     <strong>
      6. flushCache
     </strong>
     ‌
    </h4>
    <p>
     ‌
     <strong>
      作用
     </strong>
     ‌：设为
     <code>
      true
     </code>
     时，执行这条 SQL 后会清空缓存（下次查询重新查数据库）。
     <br/>
     ‌
     <strong>
      默认
     </strong>
     ‌：
     <code>
      false
     </code>
     （不清空）。
     <br/>
     ‌
     <strong>
      场景
     </strong>
     ‌：适合增删改操作，比如你删了商品，下次查询不想看到缓存里的旧数据。
    </p>
    <hr/>
    <h4>
     ‌
     <strong>
      7. useCache
     </strong>
     ‌
    </h4>
    <p>
     ‌
     <strong>
      作用
     </strong>
     ‌：设为
     <code>
      true
     </code>
     时，这条 SQL 的结果会被缓存（下次同样查询直接拿缓存）。
     <br/>
     ‌
     <strong>
      默认
     </strong>
     ‌：对查询语句（select）是
     <code>
      true
     </code>
     ，其他语句（如 insert）无效。
     <br/>
     ‌
     <strong>
      场景
     </strong>
     ‌：比如你查天气，一天内同样的查询直接用缓存，不用每次都问气象局。
    </p>
    <hr/>
    <h4>
     ‌
     <strong>
      8. timeout
     </strong>
     ‌
    </h4>
    <p>
     ‌
     <strong>
      作用
     </strong>
     ‌：设置数据库执行的超时时间（比如 10 秒没结果就报错）。
     <br/>
     ‌
     <strong>
      默认
     </strong>
     ‌：数据库自己决定。
     <br/>
     ‌
     <strong>
      例子
     </strong>
     ‌：就像你打电话客服，等了 5 分钟还没人接，你直接挂断。
    </p>
    <hr/>
    <h4>
     ‌
     <strong>
      9. fetchSize
     </strong>
     ‌
    </h4>
    <p>
     ‌
     <strong>
      作用
     </strong>
     ‌：建议数据库一次批量返回多少条数据（比如一次拿 100 条）。
     <br/>
     ‌
     <strong>
      例子
     </strong>
     ‌：快递小哥送快递，一次搬一箱（100 件）比一件件拿更快。
    </p>
    <hr/>
    <h4>
     ‌
     <strong>
      10. statementType
     </strong>
     ‌
    </h4>
    <p>
     ‌
     <strong>
      作用
     </strong>
     ‌：选择执行 SQL 的工具，默认用预编译（防 SQL 注入）。
     <br/>
     ‌
     <strong>
      选项
     </strong>
     ‌：
    </p>
    <ul>
     <li>
      <code>
       STATEMENT
      </code>
      ：直接执行（像手写纸条）。
     </li>
     <li>
      <code>
       PREPARED
      </code>
      （默认）：预编译（像用模板盖章）。
     </li>
     <li>
      <code>
       CALLABLE
      </code>
      ：调用存储过程（像打电话让后台处理）。
     </li>
    </ul>
    <hr/>
    <h4>
     ‌
     <strong>
      11. resultSetType
     </strong>
     ‌
    </h4>
    <p>
     ‌
     <strong>
      作用
     </strong>
     ‌：控制结果集的遍历方式（比如只能向前翻，或自由滚动）。
     <br/>
     ‌
     <strong>
      默认
     </strong>
     ‌：数据库驱动决定。
     <br/>
     ‌
     <strong>
      例子
     </strong>
     ‌：看书时，有的书只能一页页翻，有的可以随便翻到任意页。
    </p>
    <hr/>
    <h4>
     ‌
     <strong>
      12. databaseId
     </strong>
     ‌
    </h4>
    <p>
     ‌
     <strong>
      作用
     </strong>
     ‌：根据数据库类型（比如 MySQL 或 Oracle）选择执行不同的 SQL。
     <br/>
     ‌
     <strong>
      例子
     </strong>
     ‌：同样一道菜，四川人吃辣，广东人吃清淡，厨子会根据顾客口味调整。
    </p>
    <hr/>
    <h4>
     ‌
     <strong>
      13. resultOrdered
     </strong>
     ‌
    </h4>
    <p>
     ‌
     <strong>
      作用
     </strong>
     ‌：处理大量嵌套数据时，避免内存爆炸。设为
     <code>
      true
     </code>
     会优化内存。
     <br/>
     ‌
     <strong>
      默认
     </strong>
     ‌：
     <code>
      false
     </code>
     。
     <br/>
     ‌
     <strong>
      场景
     </strong>
     ‌：像整理行李箱，如果衣服一件套一件，不整理的话会塞不下。
    </p>
    <hr/>
    <h4>
     ‌
     <strong>
      14. resultSets
     </strong>
     ‌
    </h4>
    <p>
     ‌
     <strong>
      作用
     </strong>
     ‌：用于存储过程返回多个结果集时，给每个结果集起名字。
     <br/>
     ‌
     <strong>
      例子
     </strong>
     ‌：像吃套餐，服务员端上来“主菜、配菜、汤”，你可以分别指定名字。
    </p>
    <h2>
     insert, update 和 delete
    </h2>
    <h4>
     ‌
     <strong>
      1. id
     </strong>
     ‌
    </h4>
    <p>
     ‌
     <strong>
      作用
     </strong>
     ‌：这条 SQL 的“唯一名字”，在同一个 XML 文件里不能重复。
     <br/>
     ‌
     <strong>
      例子
     </strong>
     ‌：就像微信好友列表里每个人的昵称必须唯一，否则你@人的时候会分不清谁是谁。
    </p>
    <hr/>
    <h4>
     ‌
     <strong>
      2. parameterType
     </strong>
     ‌
    </h4>
    <p>
     ‌
     <strong>
      作用
     </strong>
     ‌：告诉 MyBatis 参数是什么类型（比如
     <code>
      User
     </code>
     类）。
     <br/>
     ‌
     <strong>
      细节
     </strong>
     ‌：可省略，MyBatis 能自己猜类型。
     <br/>
     ‌
     <strong>
      例子
     </strong>
     ‌：你点外卖时说“要一杯奶茶”，即使不说“大杯”，店员默认也会给你大杯（如果系统有默认值）。
    </p>
    <hr/>
    <h4>
     ‌
     <strong>
      3. parameterMap（已废弃）
     </strong>
     ‌
    </h4>
    <p>
     ‌
     <strong>
      作用
     </strong>
     ‌：以前用来描述参数和 SQL 的映射关系，现在直接用
     <code>
      #{属性名}
     </code>
     更简单。
     <br/>
     ‌
     <strong>
      现状
     </strong>
     ‌：别用它，像过时的翻盖手机，现在都用智能手机（行内参数映射）。
    </p>
    <hr/>
    <h4>
     ‌
     <strong>
      4. flushCache
     </strong>
     ‌
    </h4>
    <p>
     ‌
     <strong>
      作用
     </strong>
     ‌：设为
     <code>
      true
     </code>
     时，执行这条 SQL 后会清空缓存（默认 insert/update/delete 会清空）。
     <br/>
     ‌
     <strong>
      默认值
     </strong>
     ‌：对增删改操作是
     <code>
      true
     </code>
     （比如你删了数据，下次查肯定要重新读数据库）。
     <br/>
     ‌
     <strong>
      场景
     </strong>
     ‌：你修改了密码，肯定不希望别人用旧密码的缓存登录。
    </p>
    <hr/>
    <h4>
     ‌
     <strong>
      5. timeout
     </strong>
     ‌
    </h4>
    <p>
     ‌
     <strong>
      作用
     </strong>
     ‌：设置 SQL 执行的超时时间（比如 10 秒没结果就报错）。
     <br/>
     ‌
     <strong>
      默认
     </strong>
     ‌：数据库驱动自己决定。
     <br/>
     ‌
     <strong>
      例子
     </strong>
     ‌：等电梯超过 2 分钟还没来，你可能直接走楼梯（超时报错）。
    </p>
    <hr/>
    <h4>
     ‌
     <strong>
      6. statementType
     </strong>
     ‌
    </h4>
    <p>
     ‌
     <strong>
      作用
     </strong>
     ‌：选择执行 SQL 的工具类型。
     <br/>
     ‌
     <strong>
      选项
     </strong>
     ‌：
    </p>
    <ul>
     <li>
      <code>
       STATEMENT
      </code>
      ：直接执行（像手写纸条传给数据库，容易被 SQL 注入攻击）。
     </li>
     <li>
      <code>
       PREPARED
      </code>
      （默认）：预编译（像用模板盖章，安全高效）。
     </li>
     <li>
      <code>
       CALLABLE
      </code>
      ：调用存储过程（像打电话让数据库后台处理）。
      <br/>
      ‌
      <strong>
       例子
      </strong>
      ‌：发邮件时，用模板（
      <code>
       PREPARED
      </code>
      ）比每次手写（
      <code>
       STATEMENT
      </code>
      ）更省事。
     </li>
    </ul>
    <hr/>
    <h4>
     ‌
     <strong>
      7. useGeneratedKeys
     </strong>
     ‌
    </h4>
    <p>
     ‌
     <strong>
      作用
     </strong>
     ‌：（仅 insert/update 用）告诉 MyBatis 去拿数据库自动生成的主键（比如 MySQL 的自增 ID）。
     <br/>
     ‌
     <strong>
      默认
     </strong>
     ‌：
     <code>
      false
     </code>
     （不拿）。
     <br/>
     ‌
     <strong>
      场景
     </strong>
     ‌：你存钱到银行，柜台给你一张存单号（自增 ID），
     <code>
      useGeneratedKeys
     </code>
     就是让你能拿到这个号码。
    </p>
    <hr/>
    <h4>
     ‌
     <strong>
      8. keyProperty
     </strong>
     ‌
    </h4>
    <p>
     ‌
     <strong>
      作用
     </strong>
     ‌：（配合
     <code>
      useGeneratedKeys
     </code>
     ）把生成的主键值塞到参数的哪个属性里。
     <br/>
     ‌
     <strong>
      例子
     </strong>
     ‌：你存钱后拿到存单号，银行系统会自动把这个号码填到你的账户记录里（比如
     <code>
      user.id
     </code>
     ）。
    </p>
    <hr/>
    <h4>
     ‌
     <strong>
      9. keyColumn
     </strong>
     ‌
    </h4>
    <p>
     ‌
     <strong>
      作用
     </strong>
     ‌：数据库表中生成主键的列名（如果主键列不是第一列，某些数据库需要指定）。
     <br/>
     ‌
     <strong>
      场景
     </strong>
     ‌：比如 PostgreSQL 的主键列可能在第二列，这时候必须告诉 MyBatis 列名。
     <br/>
     ‌
     <strong>
      例子
     </strong>
     ‌：快递单号可能在快递单的第二行，你得明确告诉快递员“看第二行的编号”。
    </p>
    <hr/>
    <h4>
     ‌
     <strong>
      10. databaseId
     </strong>
     ‌
    </h4>
    <p>
     ‌
     <strong>
      作用
     </strong>
     ‌：根据数据库类型（MySQL、Oracle 等）选择执行不同的 SQL。
     <br/>
     ‌
     <strong>
      例子
     </strong>
     ‌：就像同一款 App，iOS 和 Android 的安装包不同，MyBatis 会根据当前数据库加载对应的 SQL。
    </p>
    <hr/>
    <h4>
     ‌
     <strong>
      总结
     </strong>
     ‌
    </h4>
    <ul>
     <li>
      <p>
       ‌
       <strong>
        写操作（insert/update/delete）重点关注
       </strong>
       ‌：
      </p>
      <ul>
       <li>
        <code>
         flushCache
        </code>
        （默认清缓存）
       </li>
       <li>
        <code>
         useGeneratedKeys
        </code>
        +
        <code>
         keyProperty
        </code>
        （拿自增 ID）
       </li>
       <li>
        <code>
         keyColumn
        </code>
        （适配非常规主键列）
       </li>
      </ul>
     </li>
     <li>
      <p>
       ‌
       <strong>
        防踩坑提示
       </strong>
       ‌：
      </p>
      <ul>
       <li>
        别用
        <code>
         parameterMap
        </code>
        （已废弃）。
       </li>
       <li>
        如果主键不是自增的，不要开
        <code>
         useGeneratedKeys
        </code>
        。
       </li>
       <li>
        超时时间（
        <code>
         timeout
        </code>
        ）设太短可能导致正常请求报错。
       </li>
      </ul>
     </li>
    </ul>
    <p>
    </p>
    <h2>
     selectKey 元素的属性
    </h2>
    <h4>
     ‌
     <strong>
      1. keyProperty
     </strong>
     ‌
    </h4>
    <p>
     ‌
     <strong>
      作用
     </strong>
     ‌：告诉 MyBatis：“把生成的主键值，存到我对象的哪个属性里”。
     <br/>
     ‌
     <strong>
      场景
     </strong>
     ‌：
    </p>
    <ul>
     <li>
      单主键：比如插入用户后，数据库自动生成的
      <code>
       id
      </code>
      ，要存到对象的
      <code>
       user.id
      </code>
      属性。
     </li>
     <li>
      多主键：如果主键是复合的（比如订单号+地区码），用逗号分隔多个属性名，比如
      <code>
       keyProperty="orderId, areaCode"
      </code>
      。
      <br/>
      ‌
      <strong>
       例子
      </strong>
      ‌：你去银行开户，柜台生成一个账号，系统会自动把这个账号填到你的存折上（
      <code>
       keyProperty
      </code>
      就是告诉系统“存到存折的账号栏里”）。
     </li>
    </ul>
    <hr/>
    <h4>
     ‌
     <strong>
      2. keyColumn
     </strong>
     ‌
    </h4>
    <p>
     ‌
     <strong>
      作用
     </strong>
     ‌：告诉 MyBatis：“数据库里生成主键的列名是什么”。
     <br/>
     ‌
     <strong>
      场景
     </strong>
     ‌：
    </p>
    <ul>
     <li>
      当主键列名和对象属性名不一致时（比如数据库列叫
      <code>
       user_id
      </code>
      ，对象属性叫
      <code>
       id
      </code>
      ）。
     </li>
     <li>
      如果数据库返回多个生成列（比如同时生成订单号和流水号），用逗号分隔，比如
      <code>
       keyColumn="order_no, serial_no"
      </code>
      。
      <br/>
      ‌
      <strong>
       例子
      </strong>
      ‌：快递单上有一栏叫“运单号”（数据库列），但你的订单对象里叫
      <code>
       trackingNumber
      </code>
      （对象属性），
      <code>
       keyColumn
      </code>
      就是告诉系统“去快递单的运单号栏找”。
     </li>
    </ul>
    <hr/>
    <h4>
     ‌
     <strong>
      3. resultType
     </strong>
     ‌
    </h4>
    <p>
     ‌
     <strong>
      作用
     </strong>
     ‌：声明
     <code>
      selectKey
     </code>
     中 SQL 返回的主键类型。
     <br/>
     ‌
     <strong>
      细节
     </strong>
     ‌：
    </p>
    <ul>
     <li>
      简单类型：比如
      <code>
       Integer
      </code>
      （自增ID）、
      <code>
       String
      </code>
      （UUID）。
     </li>
     <li>
      多主键：返回
      <code>
       Map
      </code>
      或
      <code>
       Object
      </code>
      （比如同时返回订单号和地区码）。
      <br/>
      ‌
      <strong>
       例子
      </strong>
      ‌：你取快递报手机号，快递员查到的取件码可能是数字（
      <code>
       Integer
      </code>
      ）或字母+数字组合（
      <code>
       String
      </code>
      ），
      <code>
       resultType
      </code>
      就是告诉系统“取件码的类型是什么”。
     </li>
    </ul>
    <hr/>
    <h4>
     ‌
     <strong>
      4. order
     </strong>
     ‌
    </h4>
    <p>
     ‌
     <strong>
      作用
     </strong>
     ‌：决定“取主键”和“插入数据”谁先谁后。
     <br/>
     ‌
     <strong>
      选项
     </strong>
     ‌：
    </p>
    <ul>
     <li>
      <code>
       BEFORE
      </code>
      ：先拿主键，再插入数据（适用于数据库需要提前生成主键，比如 Oracle 的序列）。
     </li>
     <li>
      <code>
       AFTER
      </code>
      ：先插入数据，再拿主键（适用于数据库插入后生成主键，比如 MySQL 自增ID）。
      <br/>
      ‌
      <strong>
       例子
      </strong>
      ‌：
     </li>
     <li>
      ‌
      <strong>
       BEFORE
      </strong>
      ‌：像电影院选座，先选好座位号（主键），再出票。
     </li>
     <li>
      ‌
      <strong>
       AFTER
      </strong>
      ‌：像餐馆排队，先点菜（插入数据），等叫号（主键）后再入座。
     </li>
    </ul>
    <hr/>
    <h4>
     ‌
     <strong>
      5. statementType
     </strong>
     ‌
    </h4>
    <p>
     ‌
     <strong>
      作用
     </strong>
     ‌：和之前一样，决定执行 SQL 的工具类型（普通语句、预编译、存储过程）。
     <br/>
     ‌
     <strong>
      细节
     </strong>
     ‌：
    </p>
    <ul>
     <li>
      <code>
       selectKey
      </code>
      里默认用
      <code>
       PREPARED
      </code>
      （预编译防注入）。
     </li>
     <li>
      除非特殊需求（比如调用存储过程生成主键），否则不用改。
      <br/>
      ‌
      <strong>
       例子
      </strong>
      ‌：写重要文件时，用模板（
      <code>
       PREPARED
      </code>
      ）比手写（
      <code>
       STATEMENT
      </code>
      ）更安全可靠。
     </li>
    </ul>
    <h2>
     MyBatis 映射相关的属性
    </h2>
    <h4>
     ‌
     <strong>
      1. column
     </strong>
     ‌
    </h4>
    <p>
     ‌
     <strong>
      作用
     </strong>
     ‌：数据库表的列名或别名，告诉 MyBatis 从哪一列取数据。
     <br/>
     ‌
     <strong>
      场景
     </strong>
     ‌：
    </p>
    <ul>
     <li>
      当数据库列名和对象属性名不一致时（比如数据库列叫
      <code>
       user_name
      </code>
      ，对象属性叫
      <code>
       name
      </code>
      ）。
      <br/>
      ‌
      <strong>
       例子
      </strong>
      ‌：快递单上的“收件人电话”列（column），对应你填写的“手机号”（对象属性）。
     </li>
    </ul>
    <hr/>
    <h4>
     ‌
     <strong>
      2. javaType
     </strong>
     ‌
    </h4>
    <p>
     ‌
     <strong>
      作用
     </strong>
     ‌：指定 Java 对象的类型（比如
     <code>
      String
     </code>
     、
     <code>
      Integer
     </code>
     或自定义类）。
     <br/>
     ‌
     <strong>
      细节
     </strong>
     ‌：
    </p>
    <ul>
     <li>
      MyBatis 通常能自动推断类型（比如从
      <code>
       User
      </code>
      对象的
      <code>
       name
      </code>
      属性推断为
      <code>
       String
      </code>
      ）。
     </li>
     <li>
      但如果你用
      <code>
       HashMap
      </code>
      接收数据，必须明确指定
      <code>
       javaType
      </code>
      ，否则可能类型混乱。
      <br/>
      ‌
      <strong>
       例子
      </strong>
      ‌：你网购时，快递员默认知道包裹是“电子产品”（自动推断类型），但如果是特殊物品（比如液体），你得明确告知（手动指定类型）。
     </li>
    </ul>
    <hr/>
    <h4>
     ‌
     <strong>
      3. jdbcType
     </strong>
     ‌
    </h4>
    <p>
     ‌
     <strong>
      作用
     </strong>
     ‌：指定数据库字段的 JDBC 类型（比如
     <code>
      VARCHAR
     </code>
     、
     <code>
      INTEGER
     </code>
     ）。
     <br/>
     ‌
     <strong>
      场景
     </strong>
     ‌：
    </p>
    <ul>
     <li>
      ‌
      <strong>
       必须指定
      </strong>
      ‌当字段允许为空（
      <code>
       NULL
      </code>
      ）且参数为
      <code>
       null
      </code>
      时，避免 JDBC 类型推导错误。
      <br/>
      ‌
      <strong>
       例子
      </strong>
      ‌：你寄快递时，如果“保价金额”是可选的，填单子时必须注明“保价类型”（比如数字或货币），否则快递公司可能不知道如何处理空值。
     </li>
    </ul>
    <hr/>
    <h4>
     ‌
     <strong>
      4. typeHandler
     </strong>
     ‌
    </h4>
    <p>
     ‌
     <strong>
      作用
     </strong>
     ‌：自定义类型转换器，处理数据库类型和 Java 类型之间的转换。
     <br/>
     ‌
     <strong>
      场景
     </strong>
     ‌：
    </p>
    <ul>
     <li>
      默认转换不满足需求时（比如将数据库的
      <code>
       0/1
      </code>
      转成
      <code>
       boolean
      </code>
      ）。
      <br/>
      ‌
      <strong>
       例子
      </strong>
      ‌：数据库用字符串
      <code>
       "Y"/"N"
      </code>
      表示是否会员，而 Java 用
      <code>
       boolean
      </code>
      ，这时可以写一个转换器自动处理。
     </li>
    </ul>
    <hr/>
    <h4>
     ‌
     <strong>
      5. select
     </strong>
     ‌
    </h4>
    <p>
     ‌
     <strong>
      作用
     </strong>
     ‌：通过另一个查询（
     <code>
      select
     </code>
     语句）加载复杂属性（比如关联对象）。
     <br/>
     ‌
     <strong>
      场景
     </strong>
     ‌：
    </p>
    <ul>
     <li>
      用于“延迟加载”关联数据（比如查用户时，关联查询他的订单列表）。
      <br/>
      ‌
      <strong>
       风险
      </strong>
      ‌：可能引发“N+1 查询问题”（查 1 个用户，触发 N 次订单查询）。
      <br/>
      ‌
      <strong>
       例子
      </strong>
      ‌：查学生信息时，用到班级信息，可以单独写一个
      <code>
       select
      </code>
      查询班级表。
     </li>
    </ul>
    <hr/>
    <h4>
     ‌
     <strong>
      6. resultMap
     </strong>
     ‌
    </h4>
    <p>
     ‌
     <strong>
      作用
     </strong>
     ‌：引用一个复杂的结果映射，处理多表联查或嵌套对象。
     <br/>
     ‌
     <strong>
      场景
     </strong>
     ‌：
    </p>
    <ul>
     <li>
      替代多次
      <code>
       select
      </code>
      查询，一次性通过联查 SQL 加载所有数据。
      <br/>
      ‌
      <strong>
       例子
      </strong>
      ‌：查询订单时，联查用户和商品表，把结果一次性映射到
      <code>
       Order
      </code>
      对象的
      <code>
       user
      </code>
      和
      <code>
       product
      </code>
      属性中。
     </li>
    </ul>
    <hr/>
    <h4>
     ‌
     <strong>
      7. name
     </strong>
     ‌
    </h4>
    <p>
     ‌
     <strong>
      作用
     </strong>
     ‌：指定构造方法参数的名称（3.4.3+ 版本支持），解决构造函数参数顺序问题。
     <br/>
     ‌
     <strong>
      场景
     </strong>
     ‌：
    </p>
    <ul>
     <li>
      当类有多个构造方法参数，且顺序不固定时，按名字匹配而非顺序。
      <br/>
      ‌
      <strong>
       例子
      </strong>
      ‌：你组装家具时，说明书说“先装螺丝A，再装螺丝B”，但如果你有标签（
      <code>
       name
      </code>
      ），可以直接按标签名称装，不用管顺序。
     </li>
    </ul>
    <hr/>
    <h4>
     ‌
     <strong>
      避坑指南
     </strong>
     ‌
    </h4>
    <ol>
     <li>
      <p>
       ‌
       <strong>
        column 别名
       </strong>
       ‌：
       <br/>
       SQL 中如果用了别名（比如
       <code>
        SELECT user_name AS name
       </code>
       ），这里
       <code>
        column
       </code>
       要写别名
       <code>
        name
       </code>
       。
      </p>
     </li>
     <li>
      <p>
       ‌
       <strong>
        jdbcType 必填场景
       </strong>
       ‌：
       <br/>
       当参数可能为
       <code>
        null
       </code>
       时，比如：
      </p>
      <pre>#{age, jdbcType=INTEGER}  &lt;!-- 如果 age 可能为 null --&gt;
</pre>
     </li>
     <li>
      <p>
       ‌
       <strong>
        慎用 select
       </strong>
       ‌：
       <br/>
       虽然方便，但多级
       <code>
        select
       </code>
       会导致性能问题（N+1 查询），优先用
       <code>
        resultMap
       </code>
       联查解决。
      </p>
     </li>
     <li>
      <p>
       ‌
       <strong>
        typeHandler 配置
       </strong>
       ‌：
       <br/>
       自定义处理器需要注册到 MyBatis，比如：
      </p>
      <p>
       <code>
        &lt;!-- 全局注册 --&gt;
        <br/>
        &lt;typeHandlers&gt;
        <br/>
        &lt;typeHandler handler="com.example.MyBooleanTypeHandler"/&gt;
        <br/>
        &lt;/typeHandlers&gt;
       </code>
      </p>
     </li>
    </ol>
    <hr/>
    <h4>
     ‌
     <strong>
      总结
     </strong>
     ‌
    </h4>
    <ul>
     <li>
      ‌
      <strong>
       简单映射
      </strong>
      ‌：用
      <code>
       column
      </code>
      +
      <code>
       property
      </code>
      （属性名）即可。
     </li>
     <li>
      ‌
      <strong>
       复杂类型
      </strong>
      ‌：用
      <code>
       javaType
      </code>
      +
      <code>
       typeHandler
      </code>
      或
      <code>
       resultMap
      </code>
      。
     </li>
     <li>
      ‌
      <strong>
       关联查询
      </strong>
      ‌：
      <ul>
       <li>
        简单情况用
        <code>
         select
        </code>
        （但要注意性能）。
       </li>
       <li>
        复杂情况用
        <code>
         resultMap
        </code>
        联查。
       </li>
      </ul>
     </li>
     <li>
      ‌
      <strong>
       构造方法
      </strong>
      ‌：用
      <code>
       name
      </code>
      解决参数顺序问题。
     </li>
    </ul>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f6d305f36393039313631382f:61727469636c652f64657461696c732f313436323439303438" class_="artid" style="display:none">
 </p>
</div>


