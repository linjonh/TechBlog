---
arturl_encode: "68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f34343235393231322f:61727469636c652f64657461696c732f313436313735313933"
layout: post
title: "MYSQLå­—ç¬¦é›†ç¼–ç å·®å¼‚å¯¼è‡´çš„å¼‚å¸¸"
date: 2025-03-11 12:04:15 +08:00
description: "åœ¨ MySQL ä¸­ï¼Œå­—ç¬¦é›†ç¼–ç ä¸åŒ¹é…å¯èƒ½ä¼šå¯¼è‡´å¤šç§å¼‚å¸¸ï¼Œå¦‚ æ’å…¥å¤±è´¥ã€æŸ¥è¯¢ä¹±ç ã€æ•°æ®æˆªæ–­ã€æ— æ³•æ¯”è¾ƒå­—ç¬¦ä¸² ç­‰"
keywords: "MYSQLã€å­—ç¬¦é›†ç¼–ç å·®å¼‚å¯¼è‡´çš„å¼‚å¸¸ã€‘"
categories: ['æœªåˆ†ç±»']
tags: ['æ•°æ®åº“', 'Mysql']
artid: "146175193"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146175193
    alt: "MYSQLå­—ç¬¦é›†ç¼–ç å·®å¼‚å¯¼è‡´çš„å¼‚å¸¸"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146175193
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146175193
cover: https://bing.ee123.net/img/rand?artid=146175193
image: https://bing.ee123.net/img/rand?artid=146175193
img: https://bing.ee123.net/img/rand?artid=146175193
---

# MYSQLã€å­—ç¬¦é›†ç¼–ç å·®å¼‚å¯¼è‡´çš„å¼‚å¸¸ã€‘

## 1. æ’å…¥æ•°æ®æ—¶æŠ¥é”™

### é—®é¢˜ 1ï¼šIncorrect string valueï¼ˆå­—ç¬¦ä¸²å€¼é”™è¯¯ï¼‰

#### é”™è¯¯ç¤ºä¾‹ï¼š

```sql
INSERT INTO my_table (name) VALUES ('ğŸ˜€');

```

#### å¯èƒ½çš„é”™è¯¯æ¶ˆæ¯ï¼š

```sql
ERROR 1366 (HY000): Incorrect string value: '\xF0\x9F\x98\x80' for column 'name' at row 1

```

#### åŸå› ï¼š

è¡¨çš„å­—ç¬¦é›†æ˜¯ utf8ï¼Œä½† utf8 æœ€å¤šæ”¯æŒ 3 å­—èŠ‚ï¼Œè€Œ emoji éœ€è¦ 4 å­—èŠ‚ã€‚

#### è§£å†³æ–¹æ¡ˆï¼š

```sql
ALTER TABLE my_table CONVERT TO CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci;

```

utf8mb4 æ˜¯ utf8 çš„è¶…é›†ï¼Œæ”¯æŒ 4 å­—èŠ‚å­—ç¬¦ï¼ˆå¦‚ emojiï¼‰ã€‚
  
utf8mb4\_general\_ci æ˜¯ä¸åŒºåˆ†å¤§å°å†™çš„æ’åºè§„åˆ™ã€‚

## 2. æŸ¥è¯¢ä¹±ç 

### é—®é¢˜ 2ï¼šæŸ¥è¯¢æ—¶è¿”å›ä¹±ç 

#### ç¤ºä¾‹ï¼š

```sql
SELECT name FROM my_table;

```

#### å¯èƒ½çš„ç»“æœï¼š

```sql
ÃƒÂ¥Ã‚Â¥Ã‚Â½ÃƒÂ¤Ã‚Â¸Ã‚â€“ÃƒÂ§Ã‚â€¢Ã‚Å’

```

#### åŸå› ï¼š

å®¢æˆ·ç«¯å’Œ MySQL æœåŠ¡å™¨çš„å­—ç¬¦é›†ä¸åŒ¹é…ã€‚

#### æ’æŸ¥æ­¥éª¤ï¼š

```sql
SHOW VARIABLES LIKE 'character_set_%';

```

å¦‚æœ character\_set\_client, character\_set\_connection, character\_set\_results ä¸æ˜¯ utf8mb4ï¼Œå¯èƒ½å¯¼è‡´ä¹±ç ã€‚

#### è§£å†³æ–¹æ¡ˆï¼š

```sql
SET NAMES utf8mb4;

```

æˆ–è€…åœ¨ Java è¿æ¥ MySQL æ—¶ï¼Œç¡®ä¿ JDBC URL è®¾ç½®æ­£ç¡®ï¼š

```java
String url = "jdbc:mysql://localhost:3306/mydb?useUnicode=true&characterEncoding=utf8mb4";

```

## 3. æ•°æ®æˆªæ–­

### é—®é¢˜ 3ï¼šå­—ç¬¦ä¸²è¢«æˆªæ–­

#### é”™è¯¯ç¤ºä¾‹ï¼š

```java
CREATE TABLE my_table (
    name VARCHAR(10) CHARACTER SET utf8mb4
);

INSERT INTO my_table (name) VALUES ('ğ„ğ„ğ„ğ„ğ„');  -- 5 ä¸ª 4 å­—èŠ‚å­—ç¬¦

```

#### é”™è¯¯æ¶ˆæ¯ï¼š

```java
Data truncated for column 'name' at row 1

```

#### åŸå› ï¼š

VARCHAR(10) æŒ‡å®šé•¿åº¦ ä»¥å­—ç¬¦è®¡ï¼Œä½† utf8mb4 å¯èƒ½å  4 å­—èŠ‚/å­—ç¬¦ï¼Œè¶…å‡ºå­˜å‚¨é™åˆ¶ã€‚

#### è§£å†³æ–¹æ¡ˆï¼š

å¢åŠ å­˜å‚¨é•¿åº¦ï¼š

```java
ALTER TABLE my_table MODIFY name VARCHAR(40) CHARACTER SET utf8mb4;

```

ä½¿ç”¨ TEXT ç±»å‹å­˜å‚¨é•¿å­—ç¬¦ä¸²ï¼š

```java
ALTER TABLE my_table MODIFY name TEXT CHARACTER SET utf8mb4;

```

## 4. æ¯”è¾ƒå­—ç¬¦ä¸²å¼‚å¸¸

### é—®é¢˜ 4ï¼šæ’åºè§„åˆ™å¯¼è‡´æ¯”è¾ƒå¤±è´¥

#### ç¤ºä¾‹ï¼š

```java
SELECT 'a' = 'A';

```

#### å¯èƒ½çš„ç»“æœï¼ˆä¸åŒæ’åºè§„åˆ™å½±å“æ¯”è¾ƒè¡Œä¸ºï¼‰ï¼š

æ’åºè§„åˆ™ ç»“æœ
  
utf8mb4\_general\_ci TRUE
  
utf8mb4\_bin FALSE

#### åŸå› ï¼š

utf8mb4\_general\_ci æ˜¯ ä¸åŒºåˆ†å¤§å°å†™ çš„ã€‚
  
utf8mb4\_bin æ˜¯ åŒºåˆ†å¤§å°å†™ çš„ã€‚

#### è§£å†³æ–¹æ¡ˆï¼š

å¦‚æœéœ€è¦ä¸¥æ ¼åŒºåˆ†å¤§å°å†™ï¼š

```java
ALTER TABLE my_table CONVERT TO CHARACTER SET utf8mb4 COLLATE utf8mb4_bin;

```

## 5. Java è¿æ¥ MySQL æ—¶å­—ç¬¦é›†ä¸åŒ¹é…

### é—®é¢˜ 5ï¼šJDBC è¿æ¥ MySQL æ—¶æ’å…¥æ•°æ®ä¹±ç 

#### é”™è¯¯ç¤ºä¾‹ï¼ˆJava ä»£ç ï¼‰ï¼š

```java
String url = "jdbc:mysql://localhost:3306/mydb";
Connection conn = DriverManager.getConnection(url, "root", "password");

PreparedStatement pstmt = conn.prepareStatement("INSERT INTO my_table (name) VALUES (?)");
pstmt.setString(1, "ä½ å¥½");
pstmt.executeUpdate();

```

#### å¯èƒ½çš„é”™è¯¯ï¼š

æ’å…¥åï¼ŒæŸ¥è¯¢æ•°æ®åº“å‘ç° ä½ å¥½ å˜æˆ ??? æˆ–ä¹±ç ã€‚

#### åŸå› ï¼š

JDBC é»˜è®¤ç¼–ç  å¯èƒ½ä¸æ˜¯ utf8mb4ï¼Œå¯¼è‡´æ•°æ®å­˜å‚¨æ—¶ä¸¢å¤±ä¿¡æ¯ã€‚

#### è§£å†³æ–¹æ¡ˆï¼š

åœ¨ JDBC URL ä¸­æ·»åŠ  useUnicode=true&characterEncoding=utf8mb4ï¼š

```java
String url = "jdbc:mysql://localhost:3306/mydb?useUnicode=true&characterEncoding=utf8mb4";

```

## æ€»ç»“

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/092702d3aeed469c8ea968bbeb2a5227.png)