---
arturl_encode: "68747470733a2f2f62:6c6f672e6373646e2e6e65742f6d305f35353733343033302f:61727469636c652f64657461696c732f313237393039393131"
layout: post
title: "å°ç¨‹åº-äº‘å¼€å‘æ–°æ‰‹å…¥é—¨å¿…çœ‹"
date: 2024-12-05 09:01:33 +0800
description: "ä¸€.äº‘å¼€å‘çš„æ¦‚å¿µäºŒ.äº‘æ•°æ®åº“çš„åˆ›å»ºä¸‰.äº‘å‡½æ•°çš„å®šä¹‰å››.åœ¨é¡µé¢ä¸­è°ƒç”¨äº‘å‡½æ•°äº”.åœ¨äº‘å‡½æ•°ä¸­å¦‚ä½•æ“ä½œæ•°æ®åº“"
keywords: "å°ç¨‹åºäº‘å¼€å‘"
categories: ['å‰ç«¯']
tags: ['å°ç¨‹åº', 'å‰ç«¯']
artid: "127909911"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=127909911
    alt: "å°ç¨‹åº-äº‘å¼€å‘æ–°æ‰‹å…¥é—¨å¿…çœ‹"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=127909911
featuredImagePreview: https://bing.ee123.net/img/rand?artid=127909911
---

# å°ç¨‹åº--äº‘å¼€å‘ï¼ˆæ–°æ‰‹å…¥é—¨å¿…çœ‹ï¼‰

> æœ¬ç¯‡æ–‡ç« ä¸»è¦æ˜¯åˆ†äº«ç»™è¦å­¦ä¹ äº‘å¼€å‘çš„å°ä¼™ä¼´ä»¬ã€‚âœ…

> `äº‘å¼€å‘`
> ï¼ˆCloudBaseï¼‰æ˜¯äº‘ç«¯ä¸€ä½“åŒ–çš„åç«¯äº‘æœåŠ¡ ï¼Œé‡‡ç”¨ serverless æ¶æ„ï¼Œå…å»äº†ç§»åŠ¨åº”ç”¨æ„å»ºä¸­ç¹ççš„æœåŠ¡å™¨æ­å»ºå’Œè¿ç»´ã€‚åŒæ—¶äº‘å¼€å‘æä¾›çš„é™æ€æ‰˜ç®¡ã€å‘½ä»¤è¡Œå·¥å…·ï¼ˆCLIï¼‰ã€Flutter SDK ç­‰èƒ½åŠ›é™ä½äº†åº”ç”¨å¼€å‘çš„é—¨æ§›ã€‚ä½¿ç”¨äº‘å¼€å‘å¯ä»¥æ„å»ºå®Œæ•´çš„å°ç¨‹åº/å°æ¸¸æˆã€H5ã€Webã€ç§»åŠ¨ App ç­‰åº”ç”¨ã€‚
>   
> æœ‰äº†å°ç¨‹åºäº‘å¼€å‘ï¼Œå¯ä»¥è®©è®©å‰ç«¯ç¨‹åºå‘˜æ‹¥æœ‰åç«¯çš„èƒ½åŠ›ã€‚å½“å‰ç«¯å†™å¥½äº‘å‡½æ•°->ä¸Šä¼ åˆ°äº‘æœåŠ¡å™¨->å®ç°è‡ªå®šä¹‰äº‘éƒ¨ç½²ï¼Œå‰ç«¯é€šè¿‡è°ƒç”¨äº‘å‡½æ•° ï¼Œé—´æ¥é€šè¿‡äº‘å‡½æ•°å¯¹æ•°æ®åº“è¿›è¡Œæ“ä½œï¼Œä½¿å¾—å‰ç«¯å‘å…¨æ ˆå‘å±•æä¾›äº†ä¾¿æ·ã€‚

#### æ–‡ç« ç›®å½•

* [ä¸€.äº‘å¼€å‘çš„æ¦‚å¿µ](#_8)
* [äºŒ.äº‘æ•°æ®åº“çš„åˆ›å»º](#_23)
* [ä¸‰.äº‘å‡½æ•°çš„å®šä¹‰](#_32)
* [å››.åœ¨é¡µé¢ä¸­è°ƒç”¨äº‘å‡½æ•°](#_35)
* [äº”.åœ¨äº‘å‡½æ•°ä¸­å¦‚ä½•æ“ä½œæ•°æ®åº“](#_37)
* [å…­.äº‘å¼€å‘æ³¨æ„ç‚¹(é¿å…è¸©å‘âŒï¼‰](#_53)
* [ä¸ƒ. ä¸Šä¼ äº‘æ–‡ä»¶](#__74)
* [å…«. ä¸‹è½½æ–‡ä»¶](#__87)
* [ä¹ .æ’åº](#__100)
* [å.æœç´¢æŸ¥è¯¢Collection.where()](#Collectionwhere_111)
* [åä¸€.åˆ†é¡µCollection.skip](#Collectionskip_127)

## ä¸€.äº‘å¼€å‘çš„æ¦‚å¿µ

1. äº‘å¼€å‘ä¸»è¦ç”±ä¸‰éƒ¨åˆ†ç»„æˆ
     
   `äº‘å‡½æ•°ï¼ˆnodejsï¼‰`
   `äº‘æ•°æ®åº“(mogodb)`
   `äº‘å­˜å‚¨`
     
   1.1 äº‘å‡½æ•°

> äº‘å‡½æ•°æ˜¯ä¸€æ®µè¿è¡Œåœ¨äº‘ç«¯çš„ä»£ç ï¼Œæ— éœ€ç®¡ç†æœåŠ¡å™¨ï¼Œåœ¨å¼€å‘å·¥å…·å†…ç¼–å†™ã€ä¸€é”®ä¸Šä¼ éƒ¨ç½²å³å¯è¿è¡Œåç«¯ä»£ç ã€‚

1.2äº‘æ•°æ®åº“

> æ•°æ®åº“ä¸­çš„æ¯æ¡è®°å½•éƒ½æ˜¯ä¸€ä¸ª JSON æ ¼å¼çš„å¯¹è±¡ã€‚ä¸€ä¸ªæ•°æ®åº“å¯ä»¥æœ‰å¤šä¸ªé›†åˆï¼ˆç›¸å½“äºå…³ç³»å‹æ•°æ®ä¸­çš„è¡¨ï¼‰ï¼Œé›†åˆå¯çœ‹åšä¸€ä¸ª JSON æ•°ç»„ï¼Œæ•°ç»„ä¸­çš„æ¯ä¸ªå¯¹è±¡å°±æ˜¯ä¸€æ¡è®°å½•ï¼Œè®°å½•çš„æ ¼å¼æ˜¯ JSON å¯¹è±¡ã€‚

1.3 äº‘å­˜å‚¨

> äº‘å¼€å‘æä¾›äº†ä¸€å—å­˜å‚¨ç©ºé—´ï¼Œæä¾›äº†ä¸Šä¼ æ–‡ä»¶åˆ°äº‘ç«¯ã€å¸¦æƒé™ç®¡ç†çš„äº‘ç«¯ä¸‹è½½èƒ½åŠ›ï¼Œå¼€å‘è€…å¯ä»¥åœ¨å°ç¨‹åºç«¯å’Œäº‘å‡½æ•°ç«¯é€šè¿‡ API ä½¿ç”¨äº‘å­˜å‚¨åŠŸèƒ½ã€‚

## äºŒ.äº‘æ•°æ®åº“çš„åˆ›å»º

1. åˆ›å»ºäº‘å¼€å‘çš„é¡¹ç›®ï¼ˆæˆ‘ä»¬å¯ä»¥é€‰æ‹©ä½¿ç”¨ä¸€ä¸ªæœˆå…è´¹ç‰ˆæœ¬ï¼‰
     
   ![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/460d0ee697c1792438b9443163152bb9.png)
2. æ‰“å¼€å³ä¾§äº‘å¼€å‘ï¼Œé€‰æ‹©æ•°æ®åº“ï¼Œåˆ›å»ºé›†åˆï¼Œå†æ·»åŠ æ•°æ®è®°å½•
     
   ![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/25aba6b863ec51501124f6885f8e00b2.png)
3. æ·»åŠ è®°å½•æ—¶ï¼Œæ•°æ®åº“çš„è®°å½•æ˜¯ä¸é™å­—æ®µçš„ï¼ˆæœ¬è´¨æ˜¯jsonæ ¼å¼ï¼Œä¸é™å®šå…·ä½“çš„åˆ—ï¼‰
     
   ![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/32e4082d7aae6a8027ff3a9d70ce7e3d.png)

## ä¸‰.äº‘å‡½æ•°çš„å®šä¹‰

å³é”®åˆ›å»ºäº‘å‡½æ•°
  
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/af7bcfec8ce40e8fa7aacd6b9a285085.png)

## å››.åœ¨é¡µé¢ä¸­è°ƒç”¨äº‘å‡½æ•°

`wx.cloud.callFunction({name,data})`

## äº”.åœ¨äº‘å‡½æ•°ä¸­å¦‚ä½•æ“ä½œæ•°æ®åº“

1ï¸âƒ£åˆå§‹åŒ–

```javascript
var db = cloud.database()ï¼›

```

2ï¸âƒ£è·å–

```javascript
	var data = await db.collection("feedback").get()

```

3ï¸âƒ£æ·»åŠ 

```javascript
var  data = await db.collection("feedback").add(data:{æ·»åŠ æ•°æ®})

```

## å…­.äº‘å¼€å‘æ³¨æ„ç‚¹(é¿å…è¸©å‘âŒï¼‰

1. é‡åˆ°Error: errCode: -401003 api parameter type error | errMsg: parameter.path should be string instead of undefined;æ€ä¹ˆè§£å†³å‘¢
     
   ![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/fc4d5c2d5d0df7c9c259c2f8870f930e.png)

ï¼ˆ1ï¼‰åœ¨app.jså®šä¹‰äº‘idï¼Œä¼ å…¥env
  
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/787ec1aac38a812a5ffe704d2b9e3c1b.png)

(2)ä¹Ÿå¯ä»¥åœ¨äº‘å‡½æ•°index.js å®šä¹‰id
  
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/9d30260037607da0cc728aad96c69992.png)
  
2. å¦‚ä½•æ‰¾åˆ°äº‘idå‘¢
  
æ‰¾åˆ°äº‘å¼€å‘->æ‰¾åˆ°æ¦‚è§ˆ->å¤åˆ¶ç¯å¢ƒid
  
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/c4c19e40a69715ea2cd0e87e96ff778b.png)
  
3. ä¸Šä¼ äº‘å‡½æ•°å¤±è´¥æ€ä¹ˆåŠ( ğŸš©ğŸš©ğŸš©ï¼‰
  
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/8a1a2452812c0546d213e41924b6c9c4.png)

4. å½“æ–°å»ºPageä¹‹åä¸€å®šè¦è®°å¾—ä¸Šä¼ å¹¶éƒ¨ç½²äº‘å®‰è£…ä¾èµ–
     
   ![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/bec43ce930ee28d208c0bf9fcb4bda70.png)
5. å½“å¯¹æ–‡ä»¶è¿›è¡Œä¿®æ”¹ä¹‹åï¼Œä¹Ÿä¸€å®šä¸è¦å¿˜äº†å¢é‡ä¸Šä¼ 
     
   ![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/a72cc2480e32786e4296c73f8bc7ec40.png)

## ä¸ƒ. ä¸Šä¼ äº‘æ–‡ä»¶

> åœ¨å°ç¨‹åºç«¯å¯è°ƒç”¨ wx.cloud.uploadFile æ–¹æ³•è¿›è¡Œä¸Šä¼ ï¼ˆä¸Šä¼ æˆåŠŸåä¼šè·å¾—æ–‡ä»¶å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œå³æ–‡ä»¶ IDï¼Œåç»­æ“ä½œéƒ½åŸºäºæ–‡ä»¶ ID è€Œä¸æ˜¯ URLï¼‰

```javascript
wx.cloud.uploadFile({
  cloudPath: 'example.png', // ä¸Šä¼ è‡³äº‘ç«¯çš„è·¯å¾„
  filePath: '', // å°ç¨‹åºä¸´æ—¶æ–‡ä»¶è·¯å¾„
  success: res => {
    // è¿”å›æ–‡ä»¶ ID
    console.log(res.fileID)
  },
  fail: console.error
})

```

## å…«. ä¸‹è½½æ–‡ä»¶

> å¯ä»¥æ ¹æ®æ–‡ä»¶ ID ä¸‹è½½æ–‡ä»¶ï¼Œç”¨æˆ·ä»…å¯ä¸‹è½½å…¶æœ‰è®¿é—®æƒé™çš„æ–‡ä»¶

```javascript
wx.cloud.downloadFile({
  fileID: '', // æ–‡ä»¶ ID
  success: res => {
    // è¿”å›ä¸´æ—¶æ–‡ä»¶è·¯å¾„
    console.log(res.tempFilePath)
  },
  fail: console.error
})

```

## ä¹ .æ’åº

Aggregate.sort()æ ¹æ®æŒ‡å®šçš„å­—æ®µï¼Œå¯¹è¾“å…¥çš„æ–‡æ¡£è¿›è¡Œæ’åº

> sort({
>   
> <å­—æ®µå1>: <æ’åºè§„åˆ™>,
>   
> <å­—æ®µå2>: <æ’åºè§„åˆ™>,
>   
> })

<æ’åºè§„åˆ™>å¯ä»¥æ˜¯ä»¥ä¸‹å–å€¼ï¼š
  

1 ä»£è¡¨å‡åºæ’åˆ—
ï¼ˆä»å°åˆ°å¤§ï¼‰ï¼›
  

-1 ä»£è¡¨é™åºæ’åˆ—
ï¼ˆä»å¤§åˆ°å°ï¼‰

## å.æœç´¢æŸ¥è¯¢Collection.where()

> æŒ‡å®šæŸ¥è¯¢æ¡ä»¶ï¼Œè¿”å›å¸¦æ–°æŸ¥è¯¢æ¡ä»¶çš„æ–°çš„é›†åˆå¼•ç”¨

å‚æ•°

```javascript
db.collection('todos').where({
  _openid: 'user-open-id',
  done: false
})
.get({
  success: function(res) {
    // res.data æ˜¯åŒ…å«ä»¥ä¸Šå®šä¹‰çš„ä¸¤æ¡è®°å½•çš„æ•°ç»„
    console.log(res.data)
  }
})

```

## åä¸€.åˆ†é¡µCollection.skip

Collection.skipæŒ‡å®šæŸ¥è¯¢è¿”å›ç»“æœæ—¶ä»æŒ‡å®šåºåˆ—åçš„ç»“æœå¼€å§‹è¿”å›ï¼Œå¸¸ç”¨äºåˆ†é¡µ

```javascript
db.collection('todos').skip(10)
  .get()
  .then(console.log)
  .catch(console.error)

```

> ä»¥ä¸Šå°±æ˜¯äº‘å¼€å‘çš„å…¨éƒ¨å†…å®¹å•¦ï¼Œå¦‚æœå¯¹ä½ æœ‰ç”¨ä¸è¦å¿˜äº†ä¸€é”®ä¸‰è¿å“¦ğŸ˜˜

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/7733d7b0647d4a01de59cbfa0805baa1.jpeg)