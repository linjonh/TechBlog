---
layout: post
title: "Linux中的权限"
date: 2025-03-15 16:35:22 +0800
description: "权限理解！！！"
keywords: "Linux中的权限"
categories: ['Linux']
tags: ['运维', '服务器', '开发语言', 'Linux']
artid: "146217200"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146217200
    alt: "Linux中的权限"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146217200
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146217200
cover: https://bing.ee123.net/img/rand?artid=146217200
image: https://bing.ee123.net/img/rand?artid=146217200
img: https://bing.ee123.net/img/rand?artid=146217200
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Linux中的权限
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <hr id="hr-toc" name="tableOfContents"/>
    <p>
    </p>
    <h2 id="shell%E7%9A%84%E7%90%86%E8%A7%A3" name="shell%E7%9A%84%E7%90%86%E8%A7%A3" style="background-color:transparent">
     shell的理解
    </h2>
    <p>
     Linux严格来说是一个操作系统，我们称之为 “核心（kernel）”，但我们⼀般用户，不能直接使用kernel。⽽是通过kernel的“外壳”程序，也就是所谓的shell，来与kernel沟通。
    </p>
    <p>
     从技术⻆度，Shell的最简单定义：命令⾏解释器（commandInterpreter）。
    </p>
    <p>
     主要包含：
    </p>
    <ul>
     <li>
      将使⽤者的命令翻译给核⼼（kernel）处理。
     </li>
     <li>
      同时，将核⼼的处理结果翻译给使⽤者。
     </li>
    </ul>
    <p>
     <strong>
      对⽐windowsGUI：我们操作windows不是直接操作windows内核，⽽是通过图形接⼝，点击，从 ⽽完成我们的操作（⽐如进⼊D盘的操作，我们通常是双击D盘盘符.或者运⾏起来⼀个应⽤程序）。
     </strong>
    </p>
    <p>
     <strong>
      shell 对于Linux：主要是对我们的指令进⾏解析，解析指令给Linux内核。反馈结果在通过内核运⾏出结果，通过shell解析给⽤⼾。
     </strong>
    </p>
    <p>
     图理解：
    </p>
    <p style="text-align:center">
     <img alt="" src="https://i-blog.csdnimg.cn/direct/f29c534e5f2445baa22f9db004535573.png"/>
    </p>
    <p>
     <strong>
      注意：
     </strong>
    </p>
    <p>
     在shell中，有一个命令行解释器文件（/bin/bash），它的内部是一个死循环，不断得给内核解释我们输入的命令。
    </p>
    <p>
     怎么理解bash和shell的关系呢？
    </p>
    <p>
     <strong>
      外壳程序shell往往以进程的形式呈现的，而这个进程不能挂掉，一旦挂掉，其他命令就解释不了了，就需要重新登陆，所以往往会创建子进程来解释命令，就算子进程挂掉了，也问题不大！
     </strong>
    </p>
    <p style="text-align:center">
     <img alt="" src="https://i-blog.csdnimg.cn/direct/10b0ac9467c44a07be0f17d9d253463e.png"/>
    </p>
    <p>
     这个问题到此为止，我们讲到进程再继续深究！
    </p>
    <h2 id="%E7%94%A8%E6%88%B7%E6%A6%82%E5%BF%B5" name="%E7%94%A8%E6%88%B7%E6%A6%82%E5%BF%B5">
     用户概念
    </h2>
    <p>
     在linux中，有两种用户
     <strong>
      ：超级用户（root），普通用户
     </strong>
     。
    </p>
    <p>
     <strong>
      这个和windows差不多，windows有管理者（admin）和普通用户。
     </strong>
    </p>
    <p>
     <strong>
      超级用户权限高，不受管控；普通用户权限底，受管控；
     </strong>
    </p>
    <ul>
     <li>
      超级用户：可以再linux系统下做任何事情，不受限制。
     </li>
     <li>
      普通用户：在linux下做有限的事情。
     </li>
     <li>
      超级用户的命令提示符是“#”，普通用户的命令提示符是“$”。
     </li>
    </ul>
    <p style="text-align:center">
     <img alt="" src="https://i-blog.csdnimg.cn/direct/27cee76bb78445928a2b5263c7303ab8.png"/>
    </p>
    <h2 id="su%E6%8C%87%E4%BB%A4" name="su%E6%8C%87%E4%BB%A4">
     su指令
    </h2>
    <p>
     我们可以使用这个命令，使得用户之间可以互相转换！
    </p>
    <p>
     <strong>
      操作：
     </strong>
    </p>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/direct/b632abbed1b5454f849b05aa482faaeb.png"/>
    </p>
    <h2 id="sudo%20%E5%91%BD%E4%BB%A4" name="sudo%20%E5%91%BD%E4%BB%A4" style="background-color:transparent">
     sudo 命令
    </h2>
    <p>
     <strong>
      语法：sudo   指令
     </strong>
    </p>
    <p>
     <strong>
      功能：获得短暂提权的权利
     </strong>
    </p>
    <p>
     例子：
    </p>
    <p>
     比如你需要安装一个软件，需要root权限。
    </p>
    <p style="text-align:center">
     <img alt="" src="https://i-blog.csdnimg.cn/direct/26a170647ef742fa814d1bd312437c00.png"/>
    </p>
    <p>
     只有在sudo指令的白名单里的用户，才能使用sudo命令！
    </p>
    <p>
     解决办法：
    </p>
    <p>
     我们只需要将自己需要使用的普通用户配置到sudo白名单里就行！
    </p>
    <p>
     <strong>
      文件目录：/etc/sudoers
     </strong>
    </p>
    <p>
     <strong>
      注意：配置时，需要超级用户才能配置成功！
     </strong>
    </p>
    <p style="text-align:center">
     <img alt="" src="https://i-blog.csdnimg.cn/direct/4111a198a5bb41ff98068800057f2e9c.png"/>
    </p>
    <p>
     这样我们就可以使用sudo 命令！
    </p>
    <h2 id="%E7%90%86%E8%A7%A3%E6%9D%83%E9%99%90" name="%E7%90%86%E8%A7%A3%E6%9D%83%E9%99%90">
     理解权限
    </h2>
    <p>
     我们不难理解，
     <strong>
      权限的本质就是什么事情能干，什么事不能干！
     </strong>
    </p>
    <p>
     <span style="color:#fe2c24">
      那为什么要有权限？
     </span>
    </p>
    <p>
     因为需要控制用户的行为！不能让用户为所欲为，否则不小把系统文件删除了，系统还怎么运作。
    </p>
    <p>
     我们来看一个例子：
    </p>
    <p style="text-align:center">
     <img alt="" src="https://i-blog.csdnimg.cn/direct/c390fd076676425e8ba45c05ea92586f.png"/>
    </p>
    <p>
     <strong>
      解释：
     </strong>
    </p>
    <p>
     这个文件运行不了，是因为它没有可执行的权限，它只是一个文本文件！
    </p>
    <p>
     那我们平常敲的指令，能执行是因为它们就是一个可执行文件！有可执行的权限！
    </p>
    <p>
     所以说：
     <strong>
      权限==用户的权限+文件的权限
     </strong>
     。
    </p>
    <p>
     <strong>
      而Linux对于文件的问题，无非就是这三种：读，写，可执行。
     </strong>
    </p>
    <p>
     我们现在也就围绕这三个来更深入理解在文件方面的权限。
    </p>
    <h3 id="%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86" name="%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86" style="background-color:transparent">
     权限管理
    </h3>
    <p>
     <strong>
      ⽂件访问者的分类（用户）
     </strong>
    </p>
    <ul>
     <li>
      ⽂件和⽂件⽬录的所有者：u---User
     </li>
     <li>
      ⽂件和⽂件⽬录的所有者所在的组的⽤⼾：g---Group
     </li>
     <li>
      其它⽤⼾：o---Others
     </li>
    </ul>
    <p>
     <strong>
      ⽂件类型和访问权限（事物属性）
     </strong>
    </p>
    <p>
     <strong>
      ⽂件类型：
     </strong>
    </p>
    <ul>
     <li>
      d：⽂件夹
     </li>
     <li>
      -：普通⽂件
     </li>
     <li>
      l：软链接（类似Windows的快捷⽅式）
     </li>
     <li>
      b：块设备⽂件（例如硬盘、光驱等）
     </li>
     <li>
      p：管道⽂件
     </li>
     <li>
      c：字符设备⽂件（例如屏幕等串⼝设备）
     </li>
     <li>
      s：套接⼝⽂件
     </li>
    </ul>
    <p>
     <strong>
      基本权限：
     </strong>
    </p>
    <ul>
     <li>
      读（r/4）：Read对⽂件⽽⾔，具有读取⽂件内容的权限；对⽬录来说，具有浏览该⽬录信息 的权限。
     </li>
     <li>
      写（w/2）：Write对⽂件⽽⾔，具有修改⽂件内容的权限；对⽬录来说具有删除移动⽬录内 ⽂件的权限。
     </li>
     <li>
      执⾏（x/1）：execute对⽂件⽽⾔，具有执⾏⽂件的权限；对⽬录来说，具有进⼊⽬录的权限。
     </li>
    </ul>
    <h3 id="%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%90%86%E8%A7%A3" name="%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%90%86%E8%A7%A3" style="background-color:transparent">
     <strong>
      命令行理解
     </strong>
    </h3>
    <p>
     看图理解：
    </p>
    <p style="text-align:center">
     <img alt="" src="https://i-blog.csdnimg.cn/direct/cd3212fd068f41199e203e298418ac47.png"/>
    </p>
    <h2 id="%C2%A0%E7%BC%BA%E7%9C%81%E6%9D%83%E9%99%90" name="%C2%A0%E7%BC%BA%E7%9C%81%E6%9D%83%E9%99%90" style="background-color:transparent">
     缺省权限
    </h2>
    <p>
     我们可以用三个八进制数代表读，写，可执行权限：
    </p>
    <p style="text-align:center">
     <img alt="" src="https://i-blog.csdnimg.cn/direct/8ed7d6409f58426fb3528c08761887b5.png"/>
    </p>
    <p style="background-color:transparent">
     <strong>
      对于普通文件来讲：起始权限 666，默认不带可执行。
     </strong>
    </p>
    <p style="background-color:transparent">
     <strong>
      对于目录来讲起始权限 777，默认都带。
     </strong>
    </p>
    <p style="background-color:transparent; text-align:center">
     <img alt="" src="https://i-blog.csdnimg.cn/direct/8418bf285ffc438ea42b884abdd7883c.png"/>
    </p>
    <p style="background-color:transparent">
     我们来看一下这个。
    </p>
    <h3 id="umask" name="umask" style="background-color:transparent">
     umask
    </h3>
    <p style="background-color:transparent">
     系统有一个权限掩码的概念：
     <strong>
      最终权限=起始权限&amp;（~umask）
     </strong>
    </p>
    <p style="background-color:transparent">
     <span style="color:#fe2c24">
      但凡是出现在umask权限里面，都不应该出现在最终权限里！
     </span>
    </p>
    <p style="background-color:transparent">
     解释：
    </p>
    <p style="background-color:transparent; text-align:center">
     <img alt="" src="https://i-blog.csdnimg.cn/direct/66d2ed20b11449e481a6281a830ed766.png"/>
    </p>
    <p style="background-color:transparent">
     可以修改：
    </p>
    <p style="background-color:transparent; text-align:center">
     <img alt="" src="https://i-blog.csdnimg.cn/direct/9742a20d6ee441a0907c9038782ec440.png"/>
    </p>
    <p style="background-color:transparent">
     为什么要有umask?
    </p>
    <ul>
     <li style="background-color: transparent;">
      默认权限，由OS自主决定，无法在创建前修改，而umask系统可以配置，是一种灵活满足需求的表现。
     </li>
     <li style="background-color: transparent;">
      特殊情况下，配置umask，可控制文件的默认权限，让我们的代码都是可控的。
     </li>
    </ul>
    <h2 id="%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90" name="%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90" style="background-color:transparent">
     文件权限
    </h2>
    <h3 id="chown%E6%8C%87%E4%BB%A4" name="chown%E6%8C%87%E4%BB%A4" style="background-color:transparent">
     chown指令
    </h3>
    <p>
     <strong>
      语法：chown [参数]  ⽤⼾名  ⽂件名
     </strong>
    </p>
    <p>
     <strong>
      功能：修改⽂件的拥有者
     </strong>
    </p>
    <p>
     <strong>
      常⽤选项：-R递归修改⽂件或⽬录的所属组
     </strong>
    </p>
    <p>
     <span style="color:#fe2c24">
      注意：只有超级用户才能修改文件的拥有者，哪怕是自己创建的文件都不行！
     </span>
    </p>
    <p>
     <strong>
      例子：
     </strong>
    </p>
    <p style="text-align:center">
     <img alt="" src="https://i-blog.csdnimg.cn/direct/e4a386fdec4749e4b4ec9474f3fbe56c.png"/>
    </p>
    <p style="text-align:center">
     <img alt="" src="https://i-blog.csdnimg.cn/direct/1a8b3c882a4b404a91f61e7fdf2e9748.png"/>
    </p>
    <p style="text-align:center">
     <img alt="" src="https://i-blog.csdnimg.cn/direct/4ba0dc176c6a42968eb0892670ce061f.png"/>
    </p>
    <p>
     <strong>
      目录修改：
     </strong>
    </p>
    <p style="text-align:center">
     <img alt="" src="https://i-blog.csdnimg.cn/direct/3efad9deabee4a05a19a07a19ae64d86.png"/>
    </p>
    <h3 id="chgrp%E6%8C%87%E4%BB%A4" name="chgrp%E6%8C%87%E4%BB%A4" style="background-color:transparent">
     chgrp指令
    </h3>
    <p>
     <strong>
      语法：chgrp[参数]   ⽤⼾组名  ⽂件名
     </strong>
    </p>
    <p>
     <strong>
      功能：修改⽂件或⽬录的所属组
     </strong>
    </p>
    <p>
     <strong>
      常⽤选项：-R递归修改⽂件或⽬录的所属组
     </strong>
    </p>
    <p>
     <span style="color:#fe2c24">
      注意：普通用户可以将文件的所属组更改为自己所属的任何组。但不能修改到别的组，root才能！
     </span>
    </p>
    <p>
     例子：
    </p>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/direct/3f364cbd87fa4f73ab861e41023f7e68.png"/>
    </p>
    <h3 id="chmod%E6%8C%87%E4%BB%A4" name="chmod%E6%8C%87%E4%BB%A4">
     chmod指令
    </h3>
    <p>
     <strong>
      语法：chmod  [参数]   权限   ⽂件名
     </strong>
    </p>
    <p>
     <strong>
      功能：设置⽂件的访问权限
     </strong>
    </p>
    <p>
     常⽤选项：
    </p>
    <ul>
     <li>
      -R：递归修改⽬录⽂件的权限
     </li>
    </ul>
    <p>
     <strong>
      说明：只有⽂件的拥有者和root才可以改变⽂件的权限
     </strong>
    </p>
    <p>
     <strong>
      chmod命令权限值的格式：
     </strong>
    </p>
    <ul>
     <li>
      +:向权限范围增加权限代号所表⽰的权限
     </li>
     <li>
      -:向权限范围取消权限代号所表⽰的权限
     </li>
     <li>
      =:向权限范围赋予权限代号所表⽰的权限
     </li>
    </ul>
    <p>
     <strong>
      用户符号：
     </strong>
    </p>
    <ul>
     <li>
      u：拥有者
     </li>
     <li>
      g：所属组
     </li>
     <li>
      o：其它⽤⼾
     </li>
     <li>
      a：所有⽤⼾
     </li>
    </ul>
    <p>
     <strong>
      例子：
     </strong>
    </p>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/direct/a3ed036b94a148a59a4979feab09a101.png"/>
    </p>
    <p style="text-align:center">
     <img alt="" src="https://i-blog.csdnimg.cn/direct/c13d0f988f26400a9fbca25633c241b9.png"/>
    </p>
    <p>
     <strong>
      也可以利用缺省权限来修改文件的权限：
     </strong>
    </p>
    <p style="text-align:center">
     <img alt="" src="https://i-blog.csdnimg.cn/direct/3e688c32748f4107be2d7a8b86fcf0c8.png"/>
    </p>
    <h3 id="%E4%B8%89%E4%B8%AA%E6%8C%87%E4%BB%A4%E6%80%BB%E7%BB%93" name="%E4%B8%89%E4%B8%AA%E6%8C%87%E4%BB%A4%E6%80%BB%E7%BB%93" style="background-color:transparent">
     三个指令总结
    </h3>
    <p>
     <span style="color:#fe2c24">
      1. 普通用户不能将自己的文件给别人（不能修改拥有者），
      <strong>
       也就是不能将自己的文件随便给别人
      </strong>
      ！
     </span>
    </p>
    <p>
     <span style="color:#fe2c24">
      2.普通用户不能将自己的文件的所属组添加给别人，但是可以添加给自己！
      <strong>
       也就是说不能将自己文件随便共享给别人
      </strong>
      ！
     </span>
    </p>
    <p>
     <span style="color:#fe2c24">
      3文件拥有者才能修改自己的文件（root也能），所属组都不行！
     </span>
    </p>
    <p>
     <span style="color:#fe2c24">
      4.root可以干任何事情，上面三点都可以干！
     </span>
    </p>
    <p>
     <strong>
      注意：
     </strong>
    </p>
    <p>
     确定权限信息时，系统会确定用户是谁？是拥有者，所属组，还是other。
    </p>
    <p>
     <strong>
      在centos下，系统只会确定一次，顺序是拥有者，所属组，other。
     </strong>
    </p>
    <p>
     例子：
    </p>
    <p style="text-align:center">
     <img alt="" src="https://i-blog.csdnimg.cn/direct/27d0c522d510491cb8cdf95fefa7e3c2.png"/>
    </p>
    <h3 id="%E7%90%86%E8%A7%A3%E6%96%87%E4%BB%B6%E5%8F%AF%E6%89%A7%E8%A1%8C%E6%9D%83%E9%99%90" name="%E7%90%86%E8%A7%A3%E6%96%87%E4%BB%B6%E5%8F%AF%E6%89%A7%E8%A1%8C%E6%9D%83%E9%99%90" style="background-color:transparent">
     理解文件可执行权限
    </h3>
    <p style="text-align:center">
     <img alt="" src="https://i-blog.csdnimg.cn/direct/0c3a385968e949cfaa2e15aafd79e108.png"/>
    </p>
    <h2 id="%E7%9B%AE%E5%BD%95%E6%9D%83%E9%99%90" name="%E7%9B%AE%E5%BD%95%E6%9D%83%E9%99%90" style="background-color:transparent">
     目录权限
    </h2>
    <ul>
     <li>
      r :具有浏览该⽬录信息的权限
     </li>
     <li>
      w:具有删除,移动,新建⽬录内⽂件的权限
     </li>
     <li>
      x:具有进⼊⽬录的权 限
     </li>
    </ul>
    <p>
     看例子：
    </p>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/direct/dd4b62e777384cd68888a4feac6b9523.png"/>
    </p>
    <p>
     那如果两多个需要进行文件之间的协作呢？我们谈一谈！
    </p>
    <h2 id="%E5%A4%9A%E7%94%A8%E6%88%B7%E6%96%87%E4%BB%B6%E5%8D%8F%E4%BD%9C" name="%E5%A4%9A%E7%94%A8%E6%88%B7%E6%96%87%E4%BB%B6%E5%8D%8F%E4%BD%9C" style="background-color:transparent">
     多用户文件协作
    </h2>
    <p>
     我们先来理解Linux中，用户是怎么隔离的！
    </p>
    <p>
     <strong>
      任何用户都无法进入其他用户的家目录！root除外！这就已经隔离了！
     </strong>
    </p>
    <p style="text-align:center">
     <img alt="" src="https://i-blog.csdnimg.cn/direct/92b0b28dad1d4c3f9066f5c1a5b3c789.png"/>
    </p>
    <p>
     <strong>
      所以我们需要怎么进行多用户文件协作呢？
     </strong>
    </p>
    <p>
     我们要的功能是：
     <span style="color:#fe2c24">
      所有人都能在这个目录下新建，删除等操作，但是不能删除！
     </span>
    </p>
    <p>
     <span style="color:#fe2c24">
      我们在系统层建立一个目录（不能放在私人用户目录下），我们再加上 t 权限 ：粘滞位。
     </span>
    </p>
    <p>
     <strong>
      粘滞位作用：
     </strong>
    </p>
    <p>
     当⼀个⽬录被设置为"粘滞位"(⽤chmod+t),则该⽬录下的⽂件只能由：
    </p>
    <ul>
     <li>
      超级管理员删除
     </li>
     <li>
      该⽬录的所有者删除
     </li>
     <li>
      该⽂件的所有者删除
     </li>
    </ul>
    <p style="text-align:center">
     <img alt="" src="https://i-blog.csdnimg.cn/direct/8ee5938d21664c06bab5880a1d4bc3be.png"/>
    </p>
    <p>
     而系统里面专门有一个目录来应对这情况：
     <strong>
      /tmp目录
     </strong>
    </p>
    <p style="text-align:center">
     <img alt="" src="https://i-blog.csdnimg.cn/direct/2fe9a12063c34823b824d09309d9a18b.png"/>
    </p>
    <p>
     好了，我们下期见！
    </p>
   </div>
  </div>
 </article>
 <p alt="687474:70733a2f2f626c6f672e6373646e2e6e65742f51697761772f:61727469636c652f64657461696c732f313436323137323030" class_="artid" style="display:none">
 </p>
</div>


