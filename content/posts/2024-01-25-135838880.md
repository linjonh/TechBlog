---
arturl_encode: "68747470733a2f2f62:6c6f672e6373646e2e6e65742f71715f34313638353632372f:61727469636c652f64657461696c732f313335383338383830"
layout: post
title: "streamlit-åœ¨streamlitè¿æ¥æ•°æ®åº“-å¹¶ä¸”-å¢åˆ æ”¹æŸ¥"
date: 2024-01-25 10:51:54 +0800
description: "æœ¬æ–‡ä»‹ç»äº†å¦‚ä½•åœ¨Streamlitå°åº”ç”¨ä¸­ä½¿ç”¨streamlit.connection()æ–¹æ³•è¿æ¥M"
keywords: "steamlit"
categories: ['æœªåˆ†ç±»']
tags: ['Python']
artid: "135838880"
image:
  path: https://api.vvhan.com/api/bing?rand=sj&artid=135838880
  alt: "streamlit-åœ¨streamlitè¿æ¥æ•°æ®åº“-å¹¶ä¸”-å¢åˆ æ”¹æŸ¥"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=135838880
featuredImagePreview: https://bing.ee123.net/img/rand?artid=135838880
---

# (streamlit) åœ¨streamlitè¿æ¥æ•°æ®åº“ å¹¶ä¸” å¢åˆ æ”¹æŸ¥

## â˜† é—®é¢˜æè¿°

æœ€è¿‘å¼€å‘äº†ä¸€ç‚¹streamlitçš„å°åº”ç”¨ï¼Œæƒ³è¦è¿æ¥åˆ°æ•°æ®åº“ï¼Œsteamlitæä¾›äº†st.connctionæ–¹æ³•ï¼Œå­¦ä¹ ä¸€ä¸‹æ€ä¹ˆè¿æ¥

## â˜… è§£å†³æ–¹æ¡ˆ

[streamlitå®˜æ–¹æè¿°](https://docs.streamlit.io/library/api-reference/connections)
  
å®˜æ–¹æä¾›äº†å‡ ç§æ–¹æ³•

### è¿æ¥æ–¹æ³•

#### æ–¹æ³•ä¸€ ä½¿ç”¨é…ç½®æ–‡ä»¶è¿æ¥

1. é¦–å…ˆéœ€è¦åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹åˆ›å»º.streamlitæ–‡ä»¶å¤¹ï¼Œç„¶åæ·»åŠ secrets.tomlæ–‡ä»¶
     
   ![åˆ›å»ºsecrets.tomlæ–‡ä»¶](https://i-blog.csdnimg.cn/blog_migrate/9bc5b95c64b946090754c9749f9472e9.png)
2. åœ¨secrets.tomlæ–‡ä»¶ä¸­å†™å…¥æ•°æ®åº“é…ç½®
     
   ![é…ç½®æ–‡ä»¶](https://i-blog.csdnimg.cn/blog_migrate/1ee87b2fe4e7678f0c7dad4b93b3e557.png)
3. ä½¿ç”¨å¦‚ä¸‹ä»£ç å°±å¯ä»¥è¿æ¥äº†
     
   ![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/d928ef6f80120e8a6571a3200a4b7319.png)

### å¢åˆ æ”¹æŸ¥

#### å¢åŠ 

##### ç®€å•çš„å¢åŠ 

è¿™é‡Œparam\_dictæ˜¯int
  
![å¢](https://i-blog.csdnimg.cn/blog_migrate/65c81c4562ce957a0846c2a18679f6bb.png)

##### å¸¦å˜é‡çš„å¢åŠ 1

è¿™é‡Œparam\_dict æ˜¯varchar
  
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/ad4f49eeadd634ebd96b7b272fe6011c.png)

##### å¸¦å˜é‡çš„å¢åŠ 2

ä¸Šé¢é‚£ç§æ–¹å¼åªèƒ½é€‚åˆæ¯”è¾ƒç®€å•çš„æ•°æ®ï¼Œå¦‚æœæ•°æ®æ¯”è¾ƒå¤æ‚ï¼Œå¦‚åŒ…å«å¾ˆå¤šå¼•å·å’Œç¬¦åˆçš„å­—å…¸ï¼Œä¸‹é¢è¿™ç§æ–¹å¼ä¼šæ›´åŠ é€‚åˆ

```python
import json
from datetime import datetime
from sqlalchemy import text

now_time = datetime.now().strftime('%Y-%m-%d %H:%M:%S') # Get current timestamp

sql = '''
INSERT INTO manual_selection_record (create_time, data_file_name, data_hash, param_dict)
VALUES (:now_time, :file_name, :data_hash, :param_dict)
'''

with st.spinner('æ­£åœ¨è¿æ¥æ•°æ®åº“...'):
try:
conn = st.connection('mysql', type='sql')
conn.connect()
conn_to_database = True
st.write("ğŸŒ æ•°æ®åº“è¿æ¥æˆåŠŸ,æ•°æ®å†™å…¥æ•°æ®åº“")
except:
st.write("ğŸ’¥ æ•°æ®åº“è¿æ¥å¤±è´¥,æ•°æ®å†™å…¥æœ¬åœ°æ—¥å¿—")

if conn_to_database:
with conn.session as s:
s.execute(text(sql), {
'now_time': now_time,
'file_name': file_name, # Assuming file_name is defined somewhere in your code
'data_hash': data_hash, # Assuming data_hash is defined somewhere in your code
'param_dict': json.dumps(model_param, ensure_ascii=False)
})
s.commit()


```

---

#### æŸ¥è¯¢å­—æ®µ

![æŸ¥](https://i-blog.csdnimg.cn/blog_migrate/77823251cb2b1ab6dbaf7ca96cc062e4.png)
  
![æŸ¥è¯¢ç»“æœ](https://i-blog.csdnimg.cn/blog_migrate/6018a64a918844722567668352a6d87b.png)