---
arturl_encode: "68747470733a2f2f62:6c6f672e6373646e2e6e65742f61613836373733343339382f:61727469636c652f64657461696c732f313436323532313635"
layout: post
title: "cå­¦ä¹ ç³»åˆ—-002.å†™æ–‡ä»¶"
date: 2025-03-14 11:00:55 +0800
description: "c++  å†™æ–‡ä»¶"
keywords: "c++å­¦ä¹ ç³»åˆ—----002.å†™æ–‡ä»¶"
categories: ['C']
tags: ['å¼€å‘è¯­è¨€', 'å­¦ä¹ ', 'C']
artid: "146252165"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146252165
    alt: "cå­¦ä¹ ç³»åˆ—-002.å†™æ–‡ä»¶"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146252165
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146252165
cover: https://bing.ee123.net/img/rand?artid=146252165
image: https://bing.ee123.net/img/rand?artid=146252165
img: https://bing.ee123.net/img/rand?artid=146252165
---

# c++å­¦ä¹ ç³»åˆ—----002.å†™æ–‡ä»¶

## c++ å†™æ–‡ä»¶

  
C++ å†™æ–‡ä»¶çš„å‡ ç§æ–¹å¼ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç§ï¼š

| æ–¹å¼ | é€‚ç”¨åœºæ™¯ | ç¤ºä¾‹ |
| --- | --- | --- |
| `std::ofstream` | æ–‡æœ¬å†™å…¥ | `file << "text"` |
| `std::ofstream (std::ios::app)` | è¿½åŠ æ–‡æœ¬ | `file << "text"` |
| `std::ofstream (std::ios::binary)` | äºŒè¿›åˆ¶å†™å…¥ | `file.write(data, size)` |
| `std::fstream` | è¯»å†™æ¨¡å¼ | `file << "text"` |
| `fprintf()` (Cæ–¹å¼) | Cé£æ ¼å†™å…¥ | `fprintf(file, "text")` |
| `write()` (ä½çº§I/O) | é«˜æ•ˆæ–‡ä»¶æ“ä½œ | `write(fd, data, size)` |

---

### 1ï¸âƒ£ ä½¿ç”¨ `ofstream` å†™å…¥æ–‡æœ¬æ–‡ä»¶

æœ€å¸¸è§çš„æ–¹æ³•ï¼Œé€‚ç”¨äºå†™å…¥çº¯æ–‡æœ¬æ•°æ®ã€‚

```cpp
#include <iostream>
#include <fstream>

int main() {
    std::ofstream file("output.txt");  // æ‰“å¼€æ–‡ä»¶è¿›è¡Œå†™å…¥ï¼ˆé»˜è®¤ä¼šè¦†ç›–åŸæ–‡ä»¶ï¼‰
    if (!file) {
        std::cerr << "æ— æ³•æ‰“å¼€æ–‡ä»¶!" << std::endl;
        return 1;
    }

    file << "Hello, World!" << std::endl;  // å†™å…¥æ–‡æœ¬
    file.close();  // å…³é—­æ–‡ä»¶

    return 0;
}

```

**ğŸ”¹ è¯´æ˜**

* `std::ofstream file("output.txt");`
  æ‰“å¼€æ–‡ä»¶ï¼Œ
  **é»˜è®¤è¦†ç›–**
  åŸæ–‡ä»¶å†…å®¹ã€‚
* `file << "Hello, World!" << std::endl;`
  ä»¥
  **æµå¼**
  æ–¹å¼å†™å…¥æ•°æ®ã€‚

---

### 2ï¸âƒ£ è¿½åŠ æ¨¡å¼å†™å…¥

åœ¨æ–‡ä»¶æœ«å°¾è¿½åŠ å†…å®¹ï¼Œä¸è¦†ç›–åŸæœ‰å†…å®¹ï¼Œä½¿ç”¨
`std::ios::app`
ã€‚

```cpp
#include <fstream>

int main() {
    std::ofstream file("output.txt", std::ios::app);  // è¿½åŠ æ¨¡å¼
    if (file) {
        file << "è¿½åŠ å†…å®¹..." << std::endl;
    }
    file.close();
    return 0;
}

```

**ğŸ”¹ è¯´æ˜**

* `std::ios::app`
  **è¿½åŠ æ¨¡å¼**
  ï¼Œä¸ä¼šæ¸…ç©ºåŸæ–‡ä»¶ï¼Œå†™å…¥å†…å®¹ä¼šæ·»åŠ åˆ°æœ«å°¾ã€‚

---

### 3ï¸âƒ£ å†™å…¥äºŒè¿›åˆ¶æ–‡ä»¶

ä½¿ç”¨
`std::ios::binary`
ä»¥äºŒè¿›åˆ¶æ¨¡å¼å†™å…¥æ–‡ä»¶ï¼ˆé€‚ç”¨äºå†™å…¥ç»“æ„ä½“ã€å›¾ç‰‡ã€éŸ³é¢‘ç­‰ï¼‰ã€‚

```cpp
#include <fstream>

int main() {
    std::ofstream file("data.bin", std::ios::binary);  // ä»¥äºŒè¿›åˆ¶æ¨¡å¼æ‰“å¼€
    if (!file) {
        std::cerr << "æ— æ³•æ‰“å¼€æ–‡ä»¶!" << std::endl;
        return 1;
    }

    int number = 12345;
    file.write(reinterpret_cast<char*>(&number), sizeof(number));  // å†™å…¥äºŒè¿›åˆ¶æ•°æ®
    file.close();

    return 0;
}

```

**ğŸ”¹ è¯´æ˜**

* `std::ios::binary`
  ä»¥
  **äºŒè¿›åˆ¶**
  æ–¹å¼æ‰“å¼€æ–‡ä»¶ï¼Œé€‚ç”¨äºéæ–‡æœ¬æ•°æ®ã€‚
* `file.write(reinterpret_cast<char*>(&number), sizeof(number));`
  ç›´æ¥å†™å…¥æ•°æ®çš„
  **äºŒè¿›åˆ¶è¡¨ç¤º**
  ã€‚

---

### 4ï¸âƒ£ ä½¿ç”¨ `fstream` è¿›è¡Œè¯»å†™

`std::fstream`
æ—¢å¯ä»¥è¯»ä¹Ÿå¯ä»¥å†™ï¼Œé€‚ç”¨äºéœ€è¦ä¿®æ”¹æ–‡ä»¶çš„æƒ…å†µã€‚

```cpp
#include <fstream>

int main() {
    std::fstream file("output.txt", std::ios::in | std::ios::out | std::ios::app);
    if (!file) {
        std::cerr << "æ— æ³•æ‰“å¼€æ–‡ä»¶!" << std::endl;
        return 1;
    }

    file << "è¿™æ˜¯ä¸€ä¸ªå¯ä»¥è¯»å†™çš„æ–‡ä»¶!" << std::endl;
    file.close();

    return 0;
}

```

**ğŸ”¹ è¯´æ˜**

* `std::ios::in | std::ios::out | std::ios::app`
  ï¼š
  **å¯è¯»å¯å†™**
  ï¼Œå¹¶ä¸”
  **è¿½åŠ æ¨¡å¼**
  ã€‚

---

### 5ï¸âƒ£ ä½¿ç”¨ `fprintf()` ï¼ˆC æ–¹å¼ï¼‰

C è¯­è¨€çš„
`FILE*`
ï¼Œå¯ä»¥ä½¿ç”¨
`fprintf()`
ï¼š

```cpp
#include <cstdio>

int main() {
    FILE* file = fopen("output.txt", "w");  // "w" ä»£è¡¨å†™æ¨¡å¼ï¼Œè¦†ç›–åŸæ–‡ä»¶
    if (!file) {
        perror("æ— æ³•æ‰“å¼€æ–‡ä»¶");
        return 1;
    }

    fprintf(file, "Hello, World!\n");  // æ ¼å¼åŒ–å†™å…¥
    fclose(file);  // å…³é—­æ–‡ä»¶

    return 0;
}

```

**ğŸ”¹ è¯´æ˜**

* `fopen("output.txt", "w")`
  ä»¥å†™æ¨¡å¼æ‰“å¼€æ–‡ä»¶ï¼ˆ
  **è¦†ç›–åŸå†…å®¹**
  ï¼‰ã€‚
* `fprintf(file, "Hello, World!\n")`
  æ ¼å¼åŒ–å†™å…¥ï¼Œç±»ä¼¼
  `printf()`
  ã€‚
* `fclose(file);`
  å…³é—­æ–‡ä»¶ï¼Œé¿å…èµ„æºæ³„æ¼ã€‚

**è¿½åŠ å†™å…¥**
ï¼Œå¯ä»¥æ”¹ä¸ºï¼š

```cpp
FILE* file = fopen("output.txt", "a");  // "a" è¿½åŠ æ¨¡å¼

```

---

### 6ï¸âƒ£ ä½¿ç”¨ `write()` ä½çº§ I/O æ–¹å¼

`write()`
æ˜¯ POSIX ç³»ç»Ÿï¼ˆå¦‚ Linuxï¼‰ä¸­çš„ä½çº§ I/O æ“ä½œï¼Œå¯ä»¥æé«˜æ•ˆç‡ã€‚

```cpp
#include <fcntl.h>
#include <unistd.h>

int main() {
    int fd = open("output.txt", O_WRONLY | O_CREAT | O_TRUNC, 0644);
    if (fd == -1) {
        perror("æ— æ³•æ‰“å¼€æ–‡ä»¶");
        return 1;
    }

    const char* text = "Hello, World!\n";
    write(fd, text, 14);  // ä½çº§å†™å…¥
    close(fd);  // å…³é—­æ–‡ä»¶

    return 0;
}

```

**ğŸ”¹ è¯´æ˜**

* `open("output.txt", O_WRONLY | O_CREAT | O_TRUNC, 0644)`
  ä»¥
  **å†™æ¨¡å¼**
  æ‰“å¼€æˆ–åˆ›å»ºæ–‡ä»¶ã€‚
* `write(fd, text, 14);`
  ç›´æ¥å†™å…¥
  **å­—èŠ‚æµ**
  ã€‚
* `close(fd);`
  å…³é—­æ–‡ä»¶ã€‚

---

### æ¨èæ–¹å¼

* **ä¸€èˆ¬æ–‡æœ¬å†™å…¥**
  â†’
  `std::ofstream`
* **è¿½åŠ æ¨¡å¼**
  â†’
  `std::ofstream + std::ios::app`
* **äºŒè¿›åˆ¶æ–‡ä»¶**
  â†’
  `std::ofstream + std::ios::binary`
* **éœ€è¦è¯»å†™**
  â†’
  `std::fstream`
* **ä½çº§ I/O**
  â†’
  `write()`
  ï¼ˆé€‚ç”¨äºå¤§æ–‡ä»¶æˆ–æ€§èƒ½å…³é”®åœºæ™¯ï¼‰