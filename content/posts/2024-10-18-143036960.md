---
arturl_encode: "68747470733a:2f2f626c6f672e6373646e2e6e65742f77627375323030342f:61727469636c652f64657461696c732f313433303336393630"
layout: post
title: "å¼€æºè¡¨å•ç”Ÿæˆå™¨OpnForm"
date: 2024-10-18 10:36:57 +08:00
description: "OpnForm æ˜¯ä¸€æ¬¾å¼€æºè¡¨å•æ„å»ºå™¨ï¼Œæ—¨åœ¨ä¸ºå¼€å‘äººå‘˜å’Œç”¨æˆ·æä¾›æ”¯æŒã€‚_å¼€æºè¡¨å•"
keywords: "å¼€æºè¡¨å•"
categories: ['æœªåˆ†ç±»']
tags: ['è¡¨å•', 'ç¾¤æ™–', 'Docker']
artid: "143036960"
image:
  path: https://api.vvhan.com/api/bing?rand=sj&artid=143036960
  alt: "å¼€æºè¡¨å•ç”Ÿæˆå™¨OpnForm"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=143036960
featuredImagePreview: https://bing.ee123.net/img/rand?artid=143036960
---

# å¼€æºè¡¨å•ç”Ÿæˆå™¨OpnForm

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/f88787dd48ce47bba19a575d4f5ad05f.png)

**ä»€ä¹ˆæ˜¯ OpnForm ï¼Ÿ**

> `OpnForm`
> æ˜¯ä¸€ä¸ªå¼€æºçš„è¡¨å•æ„å»ºå·¥å…·ï¼Œæ—¨åœ¨ç®€åŒ–åˆ›å»ºè‡ªå®šä¹‰è¡¨å•çš„è¿‡ç¨‹ï¼Œç‰¹åˆ«é€‚åˆæ— ç¼–ç çŸ¥è¯†çš„ç”¨æˆ·ã€‚å®ƒé€šè¿‡äººå·¥æ™ºèƒ½ä¼˜åŒ–è¡¨å•åˆ›å»ºæµç¨‹ï¼Œæ”¯æŒå¤šç§ç”¨é€”ï¼Œå¦‚è”ç³»äººè¡¨å•ã€è°ƒæŸ¥è¡¨ç­‰ã€‚
> `OpnForm`
> æä¾›äº†ä¸€ä¸ªç›´è§‚çš„æ‹–æ”¾ç•Œé¢ï¼Œç”¨æˆ·å¯ä»¥å¿«é€Ÿåˆ›å»ºç¾è§‚çš„è¡¨å•ï¼Œå¹¶ä¸”åªéœ€ä¸åˆ°ä¸€åˆ†é’Ÿçš„æ—¶é—´å³å¯å®Œæˆã€‚

**è½¯ä»¶åŠŸèƒ½ï¼š**

* ğŸš€ æ— ä»£ç æ„å»ºå™¨ï¼Œæ”¯æŒæ— é™çš„è¡¨å•å’Œæäº¤
* ğŸ“ å„ç§è¾“å…¥ç±»å‹ï¼šæ–‡æœ¬ã€æ—¥æœŸã€URLã€æ–‡ä»¶ä¸Šä¼ ç­‰ç­‰
* ğŸŒ å¯åµŒå…¥åˆ°ä»»ä½•åœ°æ–¹
* ğŸ“§ ç”µå­é‚®ä»¶é€šçŸ¥
* ğŸ’¬ é›†æˆï¼ˆ
  `Slack`
  ã€
  `Webhooks`
  ã€
  `Discord`
  ï¼‰
* ğŸ§  è¡¨å•é€»è¾‘å’Œè‡ªå®šä¹‰
* ğŸ›¡ï¸ éªŒè¯ç ä¿æŠ¤
* ğŸ“Š è¡¨å•åˆ†æ

![](https://img-blog.csdnimg.cn/img_convert/cb8abb53cb5d8455a4ebd683764cda79.png)

## å®‰è£…

åœ¨ç¾¤æ™–ä¸Šä»¥ Docker æ–¹å¼å®‰è£…ã€‚

> æœ¬æ–‡å†™ä½œæ—¶ï¼Œä¸»é•œåƒ
> `jhumanj/opnform-api`
> çš„
> `latest`
> ç‰ˆæœ¬å¯¹åº”ä¸º
> `1.3.7`
> ï¼›

![](https://img-blog.csdnimg.cn/img_convert/c7d6ef813fb877d49e22dfad6a09405b.png)

è½¯ä»¶æ¶‰åŠåˆ°å¤šä¸ªå®¹å™¨ï¼Œé‡‡ç”¨äº†
`docker-compose`
æ–¹å¼å®‰è£…ï¼Œä½†æ²¡æœ‰ç”¨å®˜æ–¹æä¾›çš„çš„è„šæœ¬å®‰è£…æ–¹å¼ï¼Œå› ä¸ºè€è‹ä¸æƒ³ä¸‹è½½æºç ï¼Œæ‰€ä»¥å¯¹ç›®å½•ã€æ–‡ä»¶ç­‰åšäº†è°ƒæ•´

å¦‚æœä½ æƒ³ä½¿ç”¨å®˜æ–¹çš„æ–¹å¼ï¼Œå¯ä»¥å‚è€ƒå®˜æ–¹çš„æ–‡æ¡£ï¼š
<https://docs.opnform.com/deployment/docker>

ä¸‹é¢æ˜¯ä»‹ç»çš„æ˜¯è€è‹çš„çº¯æ‰‹å·¥å®‰è£…æ–¹å¼

### nginx.conf

`nginx.conf`
ä¸º
`nginx`
çš„é…ç½®æ–‡ä»¶ï¼Œç›´æ¥é‡‡ç”¨å®˜æ–¹æä¾›çš„ç‰ˆæœ¬ï¼Œæœªåšä»»ä½•ä¿®æ”¹ï¼Œæºæ–‡ä»¶åœ°å€åœ¨ï¼š
<https://github.com/JhumanJ/OpnForm/blob/main/docker/nginx.conf>

```nginx
map $original_uri $api_uri {
    ~^/api(/.*$) $1;
    default $original_uri;
}

server {
listen 80;
server_name opnform;
root /app/public;

         access_log /dev/stdout;
         error_log  /dev/stderr error;

         index index.html index.htm index.php;

         location / {
           proxy_http_version 1.1;
           proxy_pass http://ui:3000;
           proxy_set_header X-Real-IP $remote_addr;
           proxy_set_header X-Forwarded-Host $host;
           proxy_set_header X-Forwarded-Port $server_port;
           proxy_set_header Upgrade $http_upgrade;
           proxy_set_header Connection "Upgrade";
         }

         location ~/(api|open|local\/temp|forms\/assets)/ {
              set $original_uri $uri;
              try_files $uri $uri/ /index.php$is_args$args;
         }

         location ~ php$ {
            fastcgi_split_path_info ^(.+php)(/.+)$;
            fastcgi_pass api:9000;
            fastcgi_index index.php;
            include fastcgi_params;
            #fastcgi_param SCRIPT_FILENAME /usr/share/nginx/html/$fastcgi_script_name;
            fastcgi_param SCRIPT_FILENAME /usr/share/nginx/html/public/index.php;
            fastcgi_param REQUEST_URI $api_uri;
         }

}

```

### api-env.txt

`api-env.txt`
ä¸ºæœåŠ¡ç«¯çš„ç¯å¢ƒå˜é‡æ–‡ä»¶

```ini
APP_NAME="OpnForm"
APP_ENV=production
APP_KEY=base64:G4UgDosWwGfxUa4YrcvPlzq1DicnSqtW9y5igi4nFX4=
APP_DEBUG=false
APP_URL=http://192.168.0.197:8320

SELF_HOSTED=true

LOG_CHANNEL=errorlog
LOG_LEVEL=debug

FILESYSTEM_DRIVER=local

BROADCAST_CONNECTION=log

CACHE_STORE=redis
CACHE_DRIVER=redis

QUEUE_CONNECTION=redis
SESSION_DRIVER=redis
SESSION_LIFETIME=120

MAIL_MAILER=log
MAIL_HOST=
MAIL_PORT=
MAIL_USERNAME=your@email.com
MAIL_PASSWORD=
MAIL_ENCRYPTION=
MAIL_FROM_ADDRESS=your@email.com
MAIL_FROM_NAME=OpnForm

AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_DEFAULT_REGION=us-east-1
AWS_BUCKET=

PUSHER_APP_ID=
PUSHER_APP_KEY=
PUSHER_APP_SECRET=
PUSHER_APP_CLUSTER=mt1

MIX_PUSHER_APP_KEY="${PUSHER_APP_KEY}"
MIX_PUSHER_APP_CLUSTER="${PUSHER_APP_CLUSTER}"

JWT_TTL=1440
JWT_SECRET=hS2Z7AOJYhZnq4vIQ32tsWQ4SxSYfj5f2jKfCLcWxz0=

MUX_WORKSPACE_ID=
MUX_API_TOKEN=

OPEN_AI_API_KEY=

```

åŸºäºå®˜æ–¹çš„
`.env.docker`
åšäº†å‡ å¤„ä¿®æ”¹ï¼Œæºæ–‡ä»¶åœ¨ï¼š
<https://github.com/JhumanJ/OpnForm/blob/main/api/.env.docker>

* `APP_ENV`
  ï¼šä»
  `local`
  æ”¹ä¸ºäº†
  `production`
  ï¼›
* `APP_KEY`
  ï¼šä½¿ç”¨
  `openssl rand -base64 32`
  ç”Ÿæˆ

![](https://img-blog.csdnimg.cn/img_convert/6ba4538dd6672bdb880ddfe09caee7dd.png)

ä½†æ˜¯éœ€è¦åŠ ä¸Šå‰ç¼€
`base64:`
ï¼Œå¦åˆ™æ—¥å¿—ä¼šæŠ¥é”™

```log
NOTICE: PHP message: [2024-10-15 11:28:25] production.ERROR: Unsupported cipher or incorrect key length. Supported ciphers are: aes-128-cbc, aes-256-cbc, aes-128-gcm, aes-256-gcm. {"exception":"[object] (RuntimeException(code: 0): Unsupported cipher or incorrect key length. Supported ciphers are: aes-128-cbc, aes-256-cbc, aes-128-gcm, aes-256-gcm. at /usr/share/nginx/html/vendor/laravel/framework/src/Illuminate/Encryption/Encrypter.php:62)

```

* `APP_URL`
  ï¼šéœ€è¦æ ¹æ®å®é™…æƒ…å†µè¿›è¡Œä¿®æ”¹ï¼Œå…¶ä¸­
  `192.168.0.197`
  ä¸ºç¾¤æ™–ä¸»æœºçš„
  `IP`
  ï¼Œè€Œ
  `8320`
  æ˜¯å‡†å¤‡åˆ†é…ç»™
  `OpnForm`
  çš„æœ¬æœºç«¯å£ï¼›
* `JWT_SECRET`
  ï¼šä½¿ç”¨
  `openssl rand -base64 32`
  ç”Ÿæˆï¼›

å…¶ä»–å‚æ•°æœªåšä¿®æ”¹ï¼ŒåŒ…æ‹¬
`OpenAI`
ã€é‚®ä»¶ã€
`AWS`
å­˜å‚¨å’Œ
`PUSHER`
æé†’ç­‰ï¼Œå¦‚æœä½ æœ‰éœ€è¦å¯ä»¥è‡ªä¹ ä¿®æ”¹ï¼Œå®˜æ–¹æä¾›äº†ç¯å¢ƒå˜é‡çš„è¯´æ˜ï¼š
<https://docs.opnform.com/configuration/environment-variables>

### client-env.txt

`client-env.txt`
æ˜¯å‰ç«¯é¡µé¢çš„ç¯å¢ƒå˜é‡æ–‡ä»¶

```ini
NUXT_PUBLIC_APP_URL=/
NUXT_PUBLIC_API_BASE=/api
NUXT_PRIVATE_API_BASE=http://ingress/api
NUXT_PUBLIC_ENV=dev
FRONT_API_SECRET=AYSG0uDT2euWdFjsLR/bUWvwTufmnQLyJJMpuBoyYao=

```

åŸºäºå®˜æ–¹çš„
`.env.docker`
åšäº†ä¸€å¤„æ–°å¢ï¼Œæºæ–‡ä»¶åœ¨ï¼š
<https://github.com/JhumanJ/OpnForm/blob/main/client/.env.docker>

* `FRONT_API_SECRET`
  ï¼šä¹Ÿæ˜¯ä½¿ç”¨
  `openssl rand -base64 32`
  ç”Ÿæˆï¼›

### docker-compose.yml

å°†ä¸‹é¢çš„å†…å®¹ä¿å­˜ä¸º
`docker-compose.yml`
æ–‡ä»¶

å®˜æ–¹çš„æºæ–‡ä»¶ï¼š
<https://github.com/JhumanJ/OpnForm/blob/main/docker-compose.yml>

è€è‹åšäº†å¾®è°ƒï¼Œå› ä¸ºå‚æ•°æ¯”è¾ƒå¤šï¼Œä¿ç•™äº†å®˜æ–¹çš„é”šç‚¹ï¼Œä½¿å¾—å®¹å™¨
`opnform-api-worker`
å¯ä»¥å¤ç”¨
`opnform-api`
çš„ç¯å¢ƒå˜é‡å‚æ•°

```yaml
version: '3'

services:
api: &api
image: jhumanj/opnform-api:latest
container_name: opnform-api
environment: &api-environment # Add this anchor
DB_HOST: db
REDIS_HOST: redis
DB_DATABASE: ${DB_DATABASE:-forge}
DB_USERNAME: ${DB_USERNAME:-forge}
DB_PASSWORD: ${DB_PASSWORD:-forge}
DB_CONNECTION: ${DB_CONNECTION:-pgsql}
FILESYSTEM_DISK: local
LOCAL_FILESYSTEM_VISIBILITY: public
env_file:
- ./api-env.txt
volumes:
- ./storage:/usr/share/nginx/html/storage:rw

api-worker:
image: jhumanj/opnform-api:latest
container_name: opnform-api-worker
command: php artisan queue:work
environment:
<<: *api-environment
IS_API_WORKER: "true"
env_file:
- ./api-env.txt
volumes:
- ./storage:/usr/share/nginx/html/storage:rw

ui:
image: jhumanj/opnform-client:latest
container_name: opnform-ui
env_file:
- ./client-env.txt

redis:
image: redis:7
container_name: opnform-redis

db:
image: postgres:16
container_name: opnform-db
# ports:
# - 5433:5432
environment:
POSTGRES_DB: ${DB_DATABASE:-forge}
POSTGRES_USER: ${DB_USERNAME:-forge}
POSTGRES_PASSWORD: ${DB_PASSWORD:-forge}
volumes:
- ./data:/var/lib/postgresql/data

ingress:
image: nginx:1
container_name: opnform-ingress
volumes:
- ./nginx.conf:/etc/nginx/templates/default.conf.template
ports:
- 8320:80

```

è¿™éƒ¨åˆ†ç†è®ºä¸Šåªè¦ä¿®æ”¹
`opnform-ingress`
ä¸­çš„æœ¬æœºç«¯å£ï¼Œä½¿ä¹‹ä¸äº§ç”Ÿå†²çªå°±å¯ä»¥

ç„¶åæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤

```bash
# æ–°å»ºæ–‡ä»¶å¤¹ opnform å’Œ å­ç›®å½•
mkdir -p /volume1/docker/opnform/{data,storage}

# è¿›å…¥ opnform ç›®å½•
cd /volume1/docker/opnform

# å°† docker-compose.yml æ”¾å…¥å½“å‰ç›®å½•

# ä¸€é”®å¯åŠ¨
docker-compose up -d

```

![](https://img-blog.csdnimg.cn/img_convert/ef3b38cbc7b7c3f08a250de9cbfcea4d.png)

## æ³¨æ„äº‹é¡¹

ä¸€é”®å¯åŠ¨è¿‡ç¨‹ä¸­æˆ–è€…ä¹‹åï¼Œå¯èƒ½ä¼šé‡åˆ°ä¸€äº›é—®é¢˜ï¼Œè€è‹æŠŠè‡ªå·±é‡åˆ°çš„æ”¾åœ¨è¿™é‡Œï¼Œä¾›å¤§å®¶å‚è€ƒ

### è¶…æ—¶é—®é¢˜

å› ä¸ºå®¹å™¨æ¯”è¾ƒå¤šï¼Œå¯èƒ½åœ¨ä¸€é”®å¯åŠ¨è¿‡ç¨‹ä¸­ä¼šå‡ºç°è¶…æ—¶

![](https://img-blog.csdnimg.cn/img_convert/8ca4635323d83ca61d723bb6b45a3355.png)

å¯ä»¥å…ˆæ‰§è¡Œ

```bash
# å°†è¶…æ—¶æ—¶é—´è®¾ç½®ä¸º 5 åˆ†é’Ÿ
export COMPOSE_HTTP_TIMEOUT=300

```

![](https://img-blog.csdnimg.cn/img_convert/85200acc4fe23b118b2e0a95884e3c31.png)

### å®¹å™¨åœæ­¢

å¯èƒ½ä¼šé‡åˆ°æŸä¸ªå®¹å™¨åœæ­¢

![](https://img-blog.csdnimg.cn/img_convert/bb067399cd23d6d7b44f210edbd1956c.png)

å¯ä»¥å°è¯•å¼ºåˆ¶å¯åŠ¨

![](https://img-blog.csdnimg.cn/img_convert/87f79b67155e04379ddade428b58c3d1.png)

### ç™»å½•æ— ååº”

å‡å¦‚ä¸€é”®å¯åŠ¨åï¼Œä½¿ç”¨é»˜è®¤çš„è´¦å·å¯†ç ç™»å½•æ²¡æœ‰ååº”ï¼Œå¾ˆå¯èƒ½æ˜¯æ•°æ®åº“æ²¡æœ‰
`migrate`
æˆåŠŸï¼Œå¯¼è‡´åˆ›å»ºé»˜è®¤å‡­æ®å¤±è´¥

![](https://img-blog.csdnimg.cn/img_convert/619a9f32d432e48855352b0140546aaf.png)

å¯ä»¥å•ç‹¬å†æ‰§è¡Œä¸€æ¬¡

```bash
# è¿›å…¥å®¹å™¨
docker exec --user root -it opnform-api /bin/bash

# è¿ç§»æ•°æ® 
php artisan migrate:refresh --seed

```

æˆ–è€…åªç”¨ä¸€æ¡å‘½ä»¤æ¥è§£å†³

```bash
# è¿ç§»æ•°æ® 
docker-compose exec api php artisan migrate:refresh --seed

```

![](https://img-blog.csdnimg.cn/img_convert/ed746300c4e50041b4d39a9bc0dad537.png)

æ¥ä¸‹æ¥åˆ›å»ºé»˜è®¤å‡­æ®å°±å¯ä»¥äº†

```bash
# åˆ›å»ºé»˜è®¤ç”¨æˆ·
docker-compose exec api php artisan app:init-project

```

![](https://img-blog.csdnimg.cn/img_convert/743083b2d11f08d884a5767264922842.png)

## è¿è¡Œ

åœ¨æµè§ˆå™¨ä¸­è¾“å…¥
`http://ç¾¤æ™– IP:8320`
å°±èƒ½çœ‹åˆ°ä¸»ç•Œé¢

![](https://img-blog.csdnimg.cn/img_convert/56a817b04e9458f1a620cabcf4a1962a.png)

ç‚¹å·¦ä¸Šè§’çš„
`Login`
è¿›å…¥ç™»å½•ç•Œé¢

![](https://img-blog.csdnimg.cn/img_convert/a76a992b6144081885dbed362b0c599e.png)

é»˜è®¤å‡­æ®ï¼Œå¯ä»¥åœ¨
`opnform-api`
çš„æ—¥å¿—ä¸­æ‰¾åˆ°

* ç”µå­é‚®ä»¶ï¼š
  `admin@opnform.com`
* å¯†ç ï¼š
  `password`

> * è‡ªæ‰˜ç®¡ç‰ˆæœ¬ç¦æ­¢å…¬å¼€æ³¨å†Œã€‚è¯·ä½¿ç”¨ç®¡ç†å‘˜å¸æˆ·é‚€è¯·å…¶ä»–ç”¨æˆ·
> * å¦‚æœç™»å½•æ²¡ååº”ï¼Œè¯·å‚è€ƒä¸Šä¸€ä¸ªç« èŠ‚

![](https://img-blog.csdnimg.cn/img_convert/a48f08a6e743521d19a7436aa8b697bd.png)

é¦–æ¬¡ç™»å½•åï¼Œç³»ç»Ÿå°†æç¤ºæ‚¨æ›´æ”¹ç”µå­é‚®ä»¶å’Œå¯†ç 

![](https://img-blog.csdnimg.cn/img_convert/e0f728af686f120528c8494e677d6331.png)

è®¾ç½®å®Œæˆåï¼Œä¼šå›åˆ°ç™»å½•ç•Œé¢ï¼Œéœ€è¦ç”¨æ–°è´¦å·é‡æ–°ç™»å½•ï¼Œç™»å½•æˆåŠŸåçš„ä¸»ç•Œé¢

![](https://img-blog.csdnimg.cn/img_convert/838604021ae349783395eb905bb2a9b3.png)

æ–°å»º
`form`

![](https://img-blog.csdnimg.cn/img_convert/77ff9db5d966eb3ae5d684de992b4f3d.png)

å¯ä»¥ä»ä¸€ä¸ªç®€å•çš„è”ç³»äººè¡¨å¼€å§‹ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©ä»æ¨¡ç‰ˆå¯¼å…¥

![](https://img-blog.csdnimg.cn/img_convert/de4df0fafed9051ae59fd7e08879a33a.png)

æ¨¡ç‰ˆæŒºå¤šçš„

![](https://img-blog.csdnimg.cn/img_convert/538f666325ff0bf66463fe384a53aa7f.png)

è¿›å…¥æ¨¡ç‰ˆæœ‰è¯´æ˜å’Œé¢„è§ˆï¼Œç‚¹å³ä¸Šè§’çš„
`Use this template`
è¿›è¡Œé€‰æ‹©

![](https://img-blog.csdnimg.cn/img_convert/db3379af6253ad54149ea66c9274fda6.png)

é€‰æ‹©åå¯ä»¥è¿›å…¥åˆ°ç¼–è¾‘æ¨¡å¼

![](https://img-blog.csdnimg.cn/img_convert/d4fb37f40ae307a7fd5e059b3b58d667.png)

ä½ å¯ä»¥æ ¹æ®éœ€è¦è¿›è¡Œä¿®æ”¹ï¼Œä¹Ÿå¯ä»¥ç›´æ¥å‘å¸ƒ

![](https://img-blog.csdnimg.cn/img_convert/d4fb37f40ae307a7fd5e059b3b58d667.png)

åšäº†ç®€å•çš„ä¿®æ”¹ï¼Œå°†è‹±æ–‡æ”¹æˆäº†ä¸­æ–‡

![](https://img-blog.csdnimg.cn/img_convert/0544075f5d35716e21845be5a76d4ab5.png)

ç‚¹å³ä¸Šè§’çš„
`Publish Form`
å‘å¸ƒ

![](https://img-blog.csdnimg.cn/img_convert/c9e58c33d29f474565871505c110e854.png)

åœ¨å…¶ä»–æœºå™¨ä¸Šæ‰“å¼€é“¾æ¥

![](https://img-blog.csdnimg.cn/img_convert/c9c62cc0ff181d9202cea586f141ed0e.png)

æ‰‹æœºä¸Šæ‰«æäºŒç»´ç 

![](https://img-blog.csdnimg.cn/img_convert/9548ca51698cdc58a51bc0e4f4523074.jpeg)

## å‚è€ƒæ–‡æ¡£

> JhumanJ/OpnForm: Beautiful Open-Source Form Builder
>   
> åœ°å€ï¼š
> <https://github.com/JhumanJ/OpnForm>

> Beautiful forms & Surveys - OpnForm
>   
> åœ°å€ï¼š
> <https://opnform.com/>

> Docker - OpnForm Technical Docs
>   
> åœ°å€ï¼š
> <https://docs.opnform.com/deployment/docker>

> My open-source form builder just reached 2k stars on Github! : r/selfhosted
>   
> åœ°å€ï¼š
> <https://www.reddit.com/r/selfhosted/comments/1g3ego7/my_opensource_form_builder_just_reached_2k_stars/>