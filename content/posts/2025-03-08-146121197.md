---
layout: post
title: "GPT入门第8课-大语言模型的自洽性"
date: 2025-03-08 19:46:26 +0800
description: "*核心原理：**其基于的理念是一致性胜于一切。当模型针对一个问题生成多个答案时，出现频率高的答案被认为更有可能是正确的。因为错误答案往往是随机产生、彼此不一致的，而多次生成相同或相似的答案，说明模型在推理过程中达到了某种共识，这种共识体现了答案的可靠性。（self - consistency）是指在推理阶段，大模型通过生成多个答案并选择出现。的那个，来提高模型输出的。"
keywords: "【GPT入门】第8课 大语言模型的自洽性"
categories: ['大模型']
tags: ['语言模型', '自然语言处理', '人工智能']
artid: "146121197"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146121197
    alt: "GPT入门第8课-大语言模型的自洽性"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146121197
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146121197
cover: https://bing.ee123.net/img/rand?artid=146121197
image: https://bing.ee123.net/img/rand?artid=146121197
img: https://bing.ee123.net/img/rand?artid=146121197
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     【GPT入门】第8课 大语言模型的自洽性
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
    </p>
    <p>
    </p>
    <h2>
     <a id="1_2">
     </a>
     1.自洽性概念
    </h2>
    <p>
     <strong>
      大模型的自洽性
     </strong>
     （self - consistency）是指在推理阶段，大模型通过生成多个答案并选择出现
     <strong>
      频率最高
     </strong>
     的那个，来提高模型输出的
     <strong>
      准确性
     </strong>
     。以下为你详细介绍：
     <br/>
     **核心原理：**其基于的理念是一致性胜于一切。当模型针对一个问题生成多个答案时，出现频率高的答案被认为更有可能是正确的。因为错误答案往往是随机产生、彼此不一致的，而多次生成相同或相似的答案，说明模型在推理过程中达到了某种共识，这种共识体现了答案的可靠性。
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/424308eec2544a81b9029c825b53e4a5.png"/>
    </p>
    <h2>
     <a id="2_7">
     </a>
     2.代码（观察执行结果）
    </h2>
    <pre><code class="prism language-c">from openai import OpenAI

# 加载 <span class="token punctuation">.</span>env 文件到环境变量
from dotenv import load_dotenv<span class="token punctuation">,</span> find_dotenv
_ <span class="token operator">=</span> <span class="token function">load_dotenv</span><span class="token punctuation">(</span><span class="token function">find_dotenv</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

client <span class="token operator">=</span> <span class="token function">OpenAI</span><span class="token punctuation">(</span><span class="token punctuation">)</span>


prompt <span class="token operator">=</span> <span class="token string">"当我6岁时，我的妹妹是我一半年龄，现在我60岁，我的妹妹多少岁?"</span>
prompt2 <span class="token operator">=</span> <span class="token string">"当我6岁时，我的妹妹是我一半年龄，我现在60岁，我的妹妹多少岁?"</span>
prompt3 <span class="token operator">=</span> <span class="token string">"当我6岁时，我的妹妹是我一半年龄，我现在60岁啦，我的妹妹多少岁?"</span>
def <span class="token function">get_completion</span><span class="token punctuation">(</span>prompt<span class="token punctuation">,</span> model<span class="token operator">=</span><span class="token char">'gpt-3.5-turbo'</span><span class="token punctuation">)</span><span class="token operator">:</span>
    messages <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{<!-- --></span><span class="token string">"role"</span><span class="token operator">:</span><span class="token string">"user"</span><span class="token punctuation">,</span><span class="token string">"content"</span><span class="token operator">:</span>prompt<span class="token punctuation">}</span><span class="token punctuation">]</span>
    response <span class="token operator">=</span> client<span class="token punctuation">.</span>chat<span class="token punctuation">.</span>completions<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>
        model<span class="token operator">=</span>model<span class="token punctuation">,</span>
        messages<span class="token operator">=</span>messages
    <span class="token punctuation">)</span>
    <span class="token keyword">return</span> response<span class="token punctuation">.</span>choices<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>message<span class="token punctuation">.</span>content

<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"-----第一次问："</span><span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token function">get_completion</span><span class="token punctuation">(</span>prompt<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"-----第二次问："</span><span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token function">get_completion</span><span class="token punctuation">(</span>prompt2<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"-----第三次问："</span><span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token function">get_completion</span><span class="token punctuation">(</span>prompt3<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
    <p>
     答案：
    </p>
    <pre><code>-----第一次问：
53岁。
-----第二次问：
当你6岁时，你的妹妹是你一半的年龄，即3岁。因此，年龄差为3年。

现在你60岁，妹妹的年龄是60 - 3 = 57岁。所以，你的妹妹现在57岁。
-----第三次问：
妹妹现在应该是54岁。
</code></pre>
    <p>
     再次运行(什么都不改)：
    </p>
    <pre><code>-----第一次问：
当我6岁时，我的妹妹是我一半年龄，也就是3岁。现在我60岁，根据这个逻辑，我的妹妹现在应该是57岁。
-----第二次问：
如果当你6岁的时候，你妹妹是你一半的年龄，那么她当时就是3岁。现在你60岁了，所以你妹妹应该是60-6+3=57岁。
-----第三次问：
当你6岁时，你的妹妹是你一半的年龄，即3岁。你比妹妹大3岁。现在你60岁，所以你的妹妹是60 - 3 = 57岁。
</code></pre>
    <h2>
     <a id="3_60">
     </a>
     3.自洽性核心思想
    </h2>
    <p>
     核心思想：
     <strong>
      多数投票胜出
     </strong>
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f:2f626c6f672e6373646e2e6e65742f737061726b5f6465762f:61727469636c652f64657461696c732f313436313231313937" class_="artid" style="display:none">
 </p>
</div>


