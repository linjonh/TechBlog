---
layout: post
title: "elasticsearch-8.17.3部署文档"
date: 2025-03-11 21:23:07 +0800
description: "首次启动使用/opt/elasticsearch/bin/elasticsearch命令可以帮助我们自动生成证书以及账号密码，若使用其他命令需要自己使用bin/elasticsearch-reset-password -u elastic设置密码。下载地址https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-8.17.3-linux-x86_64.tar.gz。"
keywords: "elasticsearch 8.17 配置xpack"
categories: ['未分类']
tags: ['大数据', 'Elasticsearch']
artid: "146159551"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146159551
    alt: "elasticsearch-8.17.3部署文档"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146159551
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146159551
cover: https://bing.ee123.net/img/rand?artid=146159551
image: https://bing.ee123.net/img/rand?artid=146159551
img: https://bing.ee123.net/img/rand?artid=146159551
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     elasticsearch 8.17.3部署文档
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h2>
     <a id="elasticsearch_8173_0">
     </a>
     elasticsearch 8.17.3部署文档
    </h2>
    <h4>
     <a id="_1">
     </a>
     一、架构拓扑
    </h4>
    <table>
     <thead>
      <tr>
       <th>
        ip
       </th>
       <th>
        主机名
       </th>
       <th>
        角色
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        192.168.241.151
       </td>
       <td>
        slave1
       </td>
       <td>
        master
       </td>
      </tr>
      <tr>
       <td>
        192.168.241.152
       </td>
       <td>
        slave2
       </td>
       <td>
        node1
       </td>
      </tr>
      <tr>
       <td>
        192.168.241.153
       </td>
       <td>
        slave3
       </td>
       <td>
        node2
       </td>
      </tr>
     </tbody>
    </table>
    <h4>
     <a id="_7">
     </a>
     二、安装包下载——分别下载上传至所有的节点
    </h4>
    <p>
     下载地址https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-8.17.3-linux-x86_64.tar.gz
    </p>
    <pre><code class="prism language-shell"><span class="token comment">##可以使用wget</span>
<span class="token function">wget</span> https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-8.17.3-linux-x86_64.tar.gz
</code></pre>
    <h4>
     <a id="master_13">
     </a>
     三、master节点部署
    </h4>
    <h5>
     <a id="31__14">
     </a>
     3.1 调整服务器参数
    </h5>
    <pre><code class="prism language-shell"> <span class="token function">cat</span> <span class="token operator">&gt;&gt;</span> /etc/security/limits.conf <span class="token operator">&lt;&lt;</span> <span class="token string">EOF
* soft nofile 65536
* hard nofile 131072
* soft nproc 2048
* hard nproc 4096
EOF</span>
<span class="token builtin class-name">echo</span> <span class="token string">"vm.max_map_count=655360"</span> <span class="token operator">&gt;&gt;</span> /etc/sysctl.conf
<span class="token function">sysctl</span>  <span class="token parameter variable">-p</span>
<span class="token function">useradd</span> elastic
<span class="token builtin class-name">echo</span> <span class="token string">"elastic"</span> <span class="token operator">|</span> <span class="token function">passwd</span> <span class="token parameter variable">--stdin</span> elastic
</code></pre>
    <h5>
     <a id="32__27">
     </a>
     3.2 解压并赋权
    </h5>
    <pre><code class="prism language-shell"><span class="token function">tar</span> xf elasticsearch-8.17.3-linux-x86_64.tar.gz  <span class="token parameter variable">-C</span> /opt/
<span class="token function">ln</span> <span class="token parameter variable">-s</span> /opt/elasticsearch-8.17.3 /opt/elasticsearch
<span class="token function">chown</span> <span class="token parameter variable">-R</span> elastic:elastic /opt/elasticsearch*
<span class="token function">su</span> elastic
<span class="token builtin class-name">cd</span> /opt/elasticsearch
</code></pre>
    <h5>
     <a id="33__35">
     </a>
     3.3 修改配置文件
    </h5>
    <p>
     vi /opt/elasticsearch/config/elasticsearch.yml
    </p>
    <pre><code class="prism language-yml"><span class="token comment"># ======================== Elasticsearch Configuration =========================</span>
<span class="token comment">#</span>
<span class="token comment"># NOTE: Elasticsearch comes with reasonable defaults for most settings.</span>
<span class="token comment">#       Before you set out to tweak and tune the configuration, make sure you</span>
<span class="token comment">#       understand what are you trying to accomplish and the consequences.</span>
<span class="token comment">#</span>
<span class="token comment"># The primary way of configuring a node is via this file. This template lists</span>
<span class="token comment"># the most important settings you may want to configure for a production cluster.</span>
<span class="token comment">#</span>
<span class="token comment"># Please consult the documentation for further information on configuration options:</span>
<span class="token comment"># https://www.elastic.co/guide/en/elasticsearch/reference/index.html</span>
<span class="token comment">#</span>
<span class="token comment"># ---------------------------------- Cluster -----------------------------------</span>
<span class="token comment">#</span>
<span class="token comment"># Use a descriptive name for your cluster:</span>
<span class="token comment">#</span>
<span class="token key atrule">cluster.name</span><span class="token punctuation">:</span> myes
<span class="token comment">#</span>
<span class="token comment"># ------------------------------------ Node ------------------------------------</span>
<span class="token comment">#</span>
<span class="token comment"># Use a descriptive name for the node:</span>
<span class="token comment">#</span>
<span class="token key atrule">node.name</span><span class="token punctuation">:</span> slave1
<span class="token comment">#</span>
<span class="token comment"># Add custom attributes to the node:</span>
<span class="token comment">#</span>
<span class="token key atrule">node.attr.rack</span><span class="token punctuation">:</span> r1
<span class="token comment">#</span>
<span class="token comment"># ----------------------------------- Paths ------------------------------------</span>
<span class="token comment">#</span>
<span class="token comment"># Path to directory where to store the data (separate multiple locations by comma):</span>
<span class="token comment">#</span>
<span class="token key atrule">path.data</span><span class="token punctuation">:</span> /home/elastic/es/data
<span class="token comment">#</span>
<span class="token comment"># Path to log files:</span>
<span class="token comment">#</span>
<span class="token key atrule">path.logs</span><span class="token punctuation">:</span> /home/elastic/es/logs
<span class="token comment">#</span>
<span class="token comment"># ----------------------------------- Memory -----------------------------------</span>
<span class="token comment">#</span>
<span class="token comment"># Lock the memory on startup:</span>
<span class="token comment">#</span>
<span class="token comment">#bootstrap.memory_lock: true</span>
<span class="token comment">#</span>
<span class="token comment"># Make sure that the heap size is set to about half the memory available</span>
<span class="token comment"># on the system and that the owner of the process is allowed to use this</span>
<span class="token comment"># limit.</span>
<span class="token comment">#</span>
<span class="token comment"># Elasticsearch performs poorly when the system is swapping the memory.</span>
<span class="token comment">#</span>
<span class="token comment"># ---------------------------------- Network -----------------------------------</span>
<span class="token comment">#</span>
<span class="token comment"># By default Elasticsearch is only accessible on localhost. Set a different</span>
<span class="token comment"># address here to expose this node on the network:</span>
<span class="token comment">#</span>
<span class="token key atrule">network.host</span><span class="token punctuation">:</span> 0.0.0.0
<span class="token comment">#</span>
<span class="token comment"># By default Elasticsearch listens for HTTP traffic on the first free port it</span>
<span class="token comment"># finds starting at 9200. Set a specific HTTP port here:</span>
<span class="token comment">#</span>
<span class="token key atrule">http.port</span><span class="token punctuation">:</span> <span class="token number">9200</span>
<span class="token comment">#</span>
<span class="token comment"># For more information, consult the network module documentation.</span>
<span class="token comment">#</span>
<span class="token comment"># --------------------------------- Discovery ----------------------------------</span>
<span class="token comment">#</span>
<span class="token comment"># Pass an initial list of hosts to perform discovery when this node is started:</span>
<span class="token comment"># The default list of hosts is ["127.0.0.1", "[::1]"]</span>
<span class="token comment">#</span>
<span class="token key atrule">discovery.seed_hosts</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"slave1"</span><span class="token punctuation">,</span> <span class="token string">"slave2"</span><span class="token punctuation">,</span> <span class="token string">"slave3"</span><span class="token punctuation">]</span>
<span class="token comment">#</span>
<span class="token comment"># Bootstrap the cluster using an initial set of master-eligible nodes:</span>
<span class="token comment">#</span>
<span class="token key atrule">cluster.initial_master_nodes</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"slave1"</span><span class="token punctuation">]</span>
<span class="token comment">#</span>
<span class="token comment"># For more information, consult the discovery and cluster formation module documentation.</span>
<span class="token comment">#</span>
<span class="token comment"># ---------------------------------- Various -----------------------------------</span>
<span class="token comment">#</span>
<span class="token comment"># Allow wildcard deletion of indices:</span>
<span class="token comment">#</span>
<span class="token comment">#action.destructive_requires_name: false</span>

</code></pre>
    <h5>
     <a id="34_esmaster_122">
     </a>
     3.4 启动es-master
    </h5>
    <pre><code class="prism language-shell">/opt/elasticsearch/bin/elasticsearch
</code></pre>
    <p>
     显示下图表示初始化成功，图中包含账号密码
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/d4b39e637700442cadaa655085648d4a.png"/>
    </p>
    <p>
     浏览器输入https://192.168.241.150:9200验证
     <br/>
     输入账号elastic
     <br/>
     密码BOOIaTVR1B78EqALY*e1
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/de043df52df1433bb0b17d6fb3a0a3a7.png"/>
    </p>
    <h5>
     <a id="35__133">
     </a>
     3.5 调整配置
    </h5>
    <p>
     首次启动使用/opt/elasticsearch/bin/elasticsearch命令可以帮助我们自动生成证书以及账号密码，若使用其他命令需要自己使用bin/elasticsearch-reset-password -u elastic设置密码
     <br/>
     启动后可以查看配置文件目录会生成certs目录
     <br/>
     使用ctrl + c 退出 ，查看新的配置文件注释掉cluster.initial_master_nodes: [“slave1”]
    </p>
    <pre><code class="prism language-yml"><span class="token comment"># ======================== Elasticsearch Configuration =========================</span>
<span class="token comment">#</span>
<span class="token comment"># NOTE: Elasticsearch comes with reasonable defaults for most settings.</span>
<span class="token comment">#       Before you set out to tweak and tune the configuration, make sure you</span>
<span class="token comment">#       understand what are you trying to accomplish and the consequences.</span>
<span class="token comment">#</span>
<span class="token comment"># The primary way of configuring a node is via this file. This template lists</span>
<span class="token comment"># the most important settings you may want to configure for a production cluster.</span>
<span class="token comment">#</span>
<span class="token comment"># Please consult the documentation for further information on configuration options:</span>
<span class="token comment"># https://www.elastic.co/guide/en/elasticsearch/reference/index.html</span>
<span class="token comment">#</span>
<span class="token comment"># ---------------------------------- Cluster -----------------------------------</span>
<span class="token comment">#</span>
<span class="token comment"># Use a descriptive name for your cluster:</span>
<span class="token comment">#</span>
<span class="token key atrule">cluster.name</span><span class="token punctuation">:</span> myes
<span class="token comment">#</span>
<span class="token comment"># ------------------------------------ Node ------------------------------------</span>
<span class="token comment">#</span>
<span class="token comment"># Use a descriptive name for the node:</span>
<span class="token comment">#</span>
<span class="token key atrule">node.name</span><span class="token punctuation">:</span> slave1
<span class="token comment">#</span>
<span class="token comment"># Add custom attributes to the node:</span>
<span class="token comment">#</span>
<span class="token key atrule">node.attr.rack</span><span class="token punctuation">:</span> r1
<span class="token comment">#</span>
<span class="token comment"># ----------------------------------- Paths ------------------------------------</span>
<span class="token comment">#</span>
<span class="token comment"># Path to directory where to store the data (separate multiple locations by comma):</span>
<span class="token comment">#</span>
<span class="token key atrule">path.data</span><span class="token punctuation">:</span> /home/elastic/es/data
<span class="token comment">#</span>
<span class="token comment"># Path to log files:</span>
<span class="token comment">#</span>
<span class="token key atrule">path.logs</span><span class="token punctuation">:</span> /home/elastic/es/logs
<span class="token comment">#</span>
<span class="token comment"># ----------------------------------- Memory -----------------------------------</span>
<span class="token comment">#</span>
<span class="token comment"># Lock the memory on startup:</span>
<span class="token comment">#</span>
<span class="token comment">#bootstrap.memory_lock: true</span>
<span class="token comment">#</span>
<span class="token comment"># Make sure that the heap size is set to about half the memory available</span>
<span class="token comment"># on the system and that the owner of the process is allowed to use this</span>
<span class="token comment"># limit.</span>
<span class="token comment">#</span>
<span class="token comment"># Elasticsearch performs poorly when the system is swapping the memory.</span>
<span class="token comment">#</span>
<span class="token comment"># ---------------------------------- Network -----------------------------------</span>
<span class="token comment">#</span>
<span class="token comment"># By default Elasticsearch is only accessible on localhost. Set a different</span>
<span class="token comment"># address here to expose this node on the network:</span>
<span class="token comment">#</span>
<span class="token key atrule">network.host</span><span class="token punctuation">:</span> 0.0.0.0
<span class="token comment">#</span>
<span class="token comment"># By default Elasticsearch listens for HTTP traffic on the first free port it</span>
<span class="token comment"># finds starting at 9200. Set a specific HTTP port here:</span>
<span class="token comment">#</span>
<span class="token key atrule">http.port</span><span class="token punctuation">:</span> <span class="token number">9200</span>
<span class="token comment">#</span>
<span class="token comment"># For more information, consult the network module documentation.</span>
<span class="token comment">#</span>
<span class="token comment"># --------------------------------- Discovery ----------------------------------</span>
<span class="token comment">#</span>
<span class="token comment"># Pass an initial list of hosts to perform discovery when this node is started:</span>
<span class="token comment"># The default list of hosts is ["127.0.0.1", "[::1]"]</span>
<span class="token comment">#</span>
<span class="token key atrule">discovery.seed_hosts</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"slave1"</span><span class="token punctuation">,</span> <span class="token string">"slave2"</span><span class="token punctuation">,</span> <span class="token string">"slave3"</span><span class="token punctuation">]</span>
<span class="token comment">#</span>
<span class="token comment"># Bootstrap the cluster using an initial set of master-eligible nodes:</span>
<span class="token comment">#</span>
<span class="token comment">#cluster.initial_master_nodes: ["slave1"]</span>
<span class="token comment">#</span>
<span class="token comment"># For more information, consult the discovery and cluster formation module documentation.</span>
<span class="token comment">#</span>
<span class="token comment"># ---------------------------------- Various -----------------------------------</span>
<span class="token comment">#</span>
<span class="token comment"># Allow wildcard deletion of indices:</span>
<span class="token comment">#</span>
<span class="token comment">#action.destructive_requires_name: false</span>

<span class="token comment">#----------------------- BEGIN SECURITY AUTO CONFIGURATION -----------------------</span>
<span class="token comment">#</span>
<span class="token comment"># The following settings, TLS certificates, and keys have been automatically</span>
<span class="token comment"># generated to configure Elasticsearch security features on 11-03-2025 12:44:07</span>
<span class="token comment">#</span>
<span class="token comment"># --------------------------------------------------------------------------------</span>

<span class="token comment"># Enable security features</span>
<span class="token key atrule">xpack.security.enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>

<span class="token key atrule">xpack.security.enrollment.enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>

<span class="token comment"># Enable encryption for HTTP API client connections, such as Kibana, Logstash, and Agents</span>
<span class="token key atrule">xpack.security.http.ssl</span><span class="token punctuation">:</span>
  <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">keystore.path</span><span class="token punctuation">:</span> certs/http.p12

<span class="token comment"># Enable encryption and mutual authentication between cluster nodes</span>
<span class="token key atrule">xpack.security.transport.ssl</span><span class="token punctuation">:</span>
  <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">verification_mode</span><span class="token punctuation">:</span> certificate
  <span class="token key atrule">keystore.path</span><span class="token punctuation">:</span> certs/transport.p12
  <span class="token key atrule">truststore.path</span><span class="token punctuation">:</span> certs/transport.p12
<span class="token comment">#----------------------- END SECURITY AUTO CONFIGURATION -------------------------</span>
</code></pre>
    <h5>
     <a id="36__246">
     </a>
     3.6 后台重新启动
    </h5>
    <pre><code class="prism language-shell"><span class="token builtin class-name">cd</span> /opt/elasticsearch
<span class="token function">nohup</span> ./bin/elasticsearch <span class="token operator">&gt;</span> logs/elasticsearch.log <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span> <span class="token operator">&amp;</span>
</code></pre>
    <h4>
     <a id="4__251">
     </a>
     4 从节点部署
    </h4>
    <h5>
     <a id="41__252">
     </a>
     4.1 调整服务器参数
    </h5>
    <p>
     同3.1
    </p>
    <h5>
     <a id="42__254">
     </a>
     4.2 解压并赋权
    </h5>
    <p>
     同3.2
    </p>
    <h5>
     <a id="43__256">
     </a>
     4.3 修改配置文件
    </h5>
    <p>
     vi /opt/elasticsearch/config/elasticsearch.yml
    </p>
    <pre><code class="prism language-yml"><span class="token comment"># ======================== Elasticsearch Configuration =========================</span>
<span class="token comment">#</span>
<span class="token comment"># NOTE: Elasticsearch comes with reasonable defaults for most settings.</span>
<span class="token comment">#       Before you set out to tweak and tune the configuration, make sure you</span>
<span class="token comment">#       understand what are you trying to accomplish and the consequences.</span>
<span class="token comment">#</span>
<span class="token comment"># The primary way of configuring a node is via this file. This template lists</span>
<span class="token comment"># the most important settings you may want to configure for a production cluster.</span>
<span class="token comment">#</span>
<span class="token comment"># Please consult the documentation for further information on configuration options:</span>
<span class="token comment"># https://www.elastic.co/guide/en/elasticsearch/reference/index.html</span>
<span class="token comment">#</span>
<span class="token comment"># ---------------------------------- Cluster -----------------------------------</span>
<span class="token comment">#</span>
<span class="token comment"># Use a descriptive name for your cluster:</span>
<span class="token comment">#</span>
<span class="token key atrule">cluster.name</span><span class="token punctuation">:</span> myes
<span class="token comment">#</span>
<span class="token comment"># ------------------------------------ Node ------------------------------------</span>
<span class="token comment">#</span>
<span class="token comment"># Use a descriptive name for the node:</span>
<span class="token comment">#</span>
<span class="token key atrule">node.name</span><span class="token punctuation">:</span> slave2
<span class="token key atrule">node.roles</span><span class="token punctuation">:</span> <span class="token punctuation">[</span> data<span class="token punctuation">,</span> ingest <span class="token punctuation">]</span>
<span class="token comment">#</span>
<span class="token comment"># Add custom attributes to the node:</span>
<span class="token comment">#</span>
<span class="token key atrule">node.attr.rack</span><span class="token punctuation">:</span> r1
<span class="token comment">#</span>
<span class="token comment"># ----------------------------------- Paths ------------------------------------</span>
<span class="token comment">#</span>
<span class="token comment"># Path to directory where to store the data (separate multiple locations by comma):</span>
<span class="token comment">#</span>
<span class="token key atrule">path.data</span><span class="token punctuation">:</span> /home/elastic/es/data
<span class="token comment">#</span>
<span class="token comment"># Path to log files:</span>
<span class="token comment">#</span>
<span class="token key atrule">path.logs</span><span class="token punctuation">:</span> /home/elastic/es/logs
<span class="token comment">#</span>
<span class="token comment"># ----------------------------------- Memory -----------------------------------</span>
<span class="token comment">#</span>
<span class="token comment"># Lock the memory on startup:</span>
<span class="token comment">#</span>
<span class="token comment">#bootstrap.memory_lock: true</span>
<span class="token comment">#</span>
<span class="token comment"># Make sure that the heap size is set to about half the memory available</span>
<span class="token comment"># on the system and that the owner of the process is allowed to use this</span>
<span class="token comment"># limit.</span>
<span class="token comment">#</span>
<span class="token comment"># Elasticsearch performs poorly when the system is swapping the memory.</span>
<span class="token comment">#</span>
<span class="token comment"># ---------------------------------- Network -----------------------------------</span>
<span class="token comment">#</span>
<span class="token comment"># By default Elasticsearch is only accessible on localhost. Set a different</span>
<span class="token comment"># address here to expose this node on the network:</span>
<span class="token comment">#</span>
<span class="token key atrule">network.host</span><span class="token punctuation">:</span> 0.0.0.0
<span class="token comment">#</span>
<span class="token comment"># By default Elasticsearch listens for HTTP traffic on the first free port it</span>
<span class="token comment"># finds starting at 9200. Set a specific HTTP port here:</span>
<span class="token comment">#</span>
<span class="token key atrule">http.port</span><span class="token punctuation">:</span> <span class="token number">9200</span>
<span class="token comment">#</span>
<span class="token comment"># For more information, consult the network module documentation.</span>
<span class="token comment">#</span>
<span class="token comment"># --------------------------------- Discovery ----------------------------------</span>
<span class="token comment">#</span>
<span class="token comment"># Pass an initial list of hosts to perform discovery when this node is started:</span>
<span class="token comment"># The default list of hosts is ["127.0.0.1", "[::1]"]</span>
<span class="token comment">#</span>
<span class="token key atrule">discovery.seed_hosts</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"slave1"</span><span class="token punctuation">,</span> <span class="token string">"slave2"</span><span class="token punctuation">,</span> <span class="token string">"slave3"</span><span class="token punctuation">]</span>
<span class="token comment">#</span>
<span class="token comment"># Bootstrap the cluster using an initial set of master-eligible nodes:</span>
<span class="token comment">#</span>
<span class="token comment">#cluster.initial_master_nodes: ["slave1"]</span>
<span class="token comment">#</span>
<span class="token comment"># For more information, consult the discovery and cluster formation module documentation.</span>
<span class="token comment">#</span>
<span class="token comment"># ---------------------------------- Various -----------------------------------</span>
<span class="token comment">#</span>
<span class="token comment"># Allow wildcard deletion of indices:</span>
<span class="token comment">#</span>
<span class="token comment">#action.destructive_requires_name: false</span>

<span class="token comment">#----------------------- BEGIN SECURITY AUTO CONFIGURATION -----------------------</span>
<span class="token comment">#</span>
<span class="token comment"># The following settings, TLS certificates, and keys have been automatically</span>
<span class="token comment"># generated to configure Elasticsearch security features on 11-03-2025 12:44:07</span>
<span class="token comment">#</span>
<span class="token comment"># --------------------------------------------------------------------------------</span>

<span class="token comment"># Enable security features</span>
<span class="token key atrule">xpack.security.enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>

<span class="token key atrule">xpack.security.enrollment.enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>

<span class="token comment"># Enable encryption for HTTP API client connections, such as Kibana, Logstash, and Agents</span>
<span class="token key atrule">xpack.security.http.ssl</span><span class="token punctuation">:</span>
  <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">keystore.path</span><span class="token punctuation">:</span> certs/http.p12

<span class="token comment"># Enable encryption and mutual authentication between cluster nodes</span>
<span class="token key atrule">xpack.security.transport.ssl</span><span class="token punctuation">:</span>
  <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">verification_mode</span><span class="token punctuation">:</span> certificate
  <span class="token key atrule">keystore.path</span><span class="token punctuation">:</span> certs/transport.p12
  <span class="token key atrule">truststore.path</span><span class="token punctuation">:</span> certs/transport.p12
<span class="token comment">#----------------------- END SECURITY AUTO CONFIGURATION -------------------------</span>
</code></pre>
    <h5>
     <a id="44_mastermaster_368">
     </a>
     4.4 获取master相关认证密码——master节点
    </h5>
    <p>
     在slave1节点把证书拷贝到其他节点
    </p>
    <pre><code class="prism language-shell"><span class="token function">scp</span> <span class="token parameter variable">-r</span> /opt/elasticsearch/config/certs slave2:/opt/elasticsearch/config/
/opt/elasticsearch/bin/elasticsearch-keystore list
/opt/elasticsearch/bin/elasticsearch-keystore show xpack.security.http.ssl.keystore.secure_password
/opt/elasticsearch/bin/elasticsearch-keystore show xpack.security.transport.ssl.keystore.secure_password
/opt/elasticsearch/bin/elasticsearch-keystore show xpack.security.transport.ssl.truststore.secure_password
</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/5edff3c97ce8459383e74743decdfccd.png"/>
    </p>
    <h5>
     <a id="45_slaveslave_378">
     </a>
     4.5 slave节点加载密码——slave节点
    </h5>
    <pre><code class="prism language-shell">/opt/elasticsearch/bin/elasticsearch-keystore <span class="token function">add</span> xpack.security.http.ssl.keystore.secure_password
/opt/elasticsearch/bin/elasticsearch-keystore <span class="token function">add</span> xpack.security.transport.ssl.keystore.secure_password
/opt/elasticsearch/bin/elasticsearch-keystore <span class="token function">add</span> xpack.security.transport.ssl.truststore.secure_password
</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/cde71820d501435f8bc2d28e25e34ece.png"/>
    </p>
    <h5>
     <a id="46_slave_385">
     </a>
     4.6 启动slave节点
    </h5>
    <pre><code class="prism language-shell"><span class="token function">nohup</span> /opt/elasticsearch/bin/elasticsearch <span class="token operator">&gt;</span> /opt/elasticsearch/logs/elasticsearch.log <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span> <span class="token operator">&amp;</span>
</code></pre>
    <h4>
     <a id="5_elasticvuees_390">
     </a>
     5 浏览器使用elasticvue查看es集群状态
    </h4>
    <h5>
     <a id="51_elasticvue_391">
     </a>
     5.1 在浏览器点击扩展，搜索elasticvue
    </h5>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/f47ac7ecaac04f15a489f2fa25b2d754.png"/>
    </p>
    <h5>
     <a id="52__393">
     </a>
     5.2 获取添加扩展
    </h5>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/ee44ded21c8a4fb8b58c2eef27231ec0.png"/>
    </p>
    <h5>
     <a id="53__396">
     </a>
     5.3 连接集群
    </h5>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/9577c2d00a9441e2bb06012784b69641.png"/>
    </p>
    <h3>
     <a id="_398">
     </a>
     成功
    </h3>
    <p>
     <img alt="##" src="https://i-blog.csdnimg.cn/direct/b2b28f8c12ed40b9aa35279b92fdf936.png"/>
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="6874747073:3a2f2f626c6f672e6373646e2e6e65742f786863785f32352f:61727469636c652f64657461696c732f313436313539353531" class_="artid" style="display:none">
 </p>
</div>


