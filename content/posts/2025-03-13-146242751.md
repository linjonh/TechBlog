---
layout: post
title: "MySQL中有哪几种锁"
date: 2025-03-13 21:27:01 +0800
description: "MySQL中有哪几种锁？"
keywords: "MySQL中有哪几种锁？"
categories: ['Mysql']
tags: ['数据库', 'Mysql']
artid: "146242751"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146242751
    alt: "MySQL中有哪几种锁"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146242751
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146242751
cover: https://bing.ee123.net/img/rand?artid=146242751
image: https://bing.ee123.net/img/rand?artid=146242751
img: https://bing.ee123.net/img/rand?artid=146242751
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     MySQL中有哪几种锁？
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p>
     大家好，我是锋哥。今天分享关于【MySQL中有哪几种锁？
     <strong>
      】面试题。
     </strong>
     希望对大家有帮助；
    </p>
    <h6>
     <a name="t0">
     </a>
     <img alt="" height="381" src="https://i-blog.csdnimg.cn/direct/a88130c569104d218020cc495de342bd.png" width="782"/>
    </h6>
    <h3>
     MySQL中有哪几种锁？
    </h3>
    <p>
     <a href="http://java.python222.com/article/971" rel="nofollow" title="1000道 互联网大厂Java工程师 精选面试题-Java资源分享网">
      1000道 互联网大厂Java工程师 精选面试题-Java资源分享网
     </a>
    </p>
    <p>
     在MySQL中，锁是用来控制并发访问的机制，确保多个事务同时访问数据库时不会发生冲突。MySQL中主要有以下几种锁：
    </p>
    <h4>
     1.
     <strong>
      全局锁（Global Locks）
     </strong>
    </h4>
    <ul>
     <li>
      <strong>
       定义
      </strong>
      ：全局锁是最重的锁类型，锁住了整个数据库实例，所有的数据库表和操作都会受到影响。
     </li>
     <li>
      <strong>
       使用场景
      </strong>
      ：一般用于备份等需要确保数据库一致性的操作。
     </li>
     <li>
      <strong>
       例子
      </strong>
      ：
      <code>
       FLUSH TABLES WITH READ LOCK
      </code>
      ，这会锁住整个MySQL数据库。
     </li>
    </ul>
    <h4>
     2.
     <strong>
      表锁（Table Locks）
     </strong>
    </h4>
    <ul>
     <li>
      <strong>
       定义
      </strong>
      ：表锁是锁住整个数据表，防止其他事务对该表进行读写操作。
     </li>
     <li>
      <strong>
       类型
      </strong>
      ：
      <ul>
       <li>
        <strong>
         共享锁（Read Lock）
        </strong>
        ：允许其他事务读取表，但不允许修改。
       </li>
       <li>
        <strong>
         排他锁（Write Lock）
        </strong>
        ：会阻止其他事务对表进行任何读写操作。
       </li>
      </ul>
     </li>
     <li>
      <strong>
       特点
      </strong>
      ：表锁通常比行锁更粗粒度，可能会导致较大的性能瓶颈，尤其在高并发的情况下。
     </li>
     <li>
      <strong>
       例子
      </strong>
      ：
      <ul>
       <li>
        <code>
         LOCK TABLE table_name READ
        </code>
        ：为表加共享锁。
       </li>
       <li>
        <code>
         LOCK TABLE table_name WRITE
        </code>
        ：为表加排他锁。
       </li>
      </ul>
     </li>
    </ul>
    <h4>
     3.
     <strong>
      行锁（Row Locks）
     </strong>
    </h4>
    <ul>
     <li>
      <strong>
       定义
      </strong>
      ：行锁是针对数据表中某一行进行加锁，保证事务在对表的某一行数据进行操作时，其他事务不会对该行数据进行干扰。
     </li>
     <li>
      <strong>
       使用场景
      </strong>
      ：行锁适用于高并发写入操作的场景，可以最大限度地提高数据库的并发性。
     </li>
     <li>
      <strong>
       实现方式
      </strong>
      ：MySQL的InnoDB存储引擎使用行级锁。
     </li>
     <li>
      <strong>
       类型
      </strong>
      ：
      <ul>
       <li>
        <strong>
         共享锁（S锁，Shared Lock）
        </strong>
        ：允许事务读取该行数据，但不允许修改。
       </li>
       <li>
        <strong>
         排他锁（X锁，Exclusive Lock）
        </strong>
        ：会阻止其他事务对该行数据进行读写操作。
       </li>
      </ul>
     </li>
     <li>
      <strong>
       例子
      </strong>
      ：通过
      <code>
       SELECT ... FOR UPDATE
      </code>
      或者
      <code>
       SELECT ... LOCK IN SHARE MODE
      </code>
      来显式加锁行。
     </li>
    </ul>
    <h4>
     4.
     <strong>
      自增锁（Auto-Increment Locks）
     </strong>
    </h4>
    <ul>
     <li>
      <strong>
       定义
      </strong>
      ：InnoDB使用自增锁来防止自增列（
      <code>
       AUTO_INCREMENT
      </code>
      ）的值被并发访问时产生冲突。
     </li>
     <li>
      <strong>
       使用场景
      </strong>
      ：当多个事务插入记录时，防止在使用自增列的同时出现重复值或者丢失值的情况。
     </li>
     <li>
      <strong>
       特点
      </strong>
      ：自增锁会阻止其他事务同时插入记录，确保自增列的唯一性。
     </li>
    </ul>
    <h4>
     5.
     <strong>
      意向锁（Intention Locks）
     </strong>
    </h4>
    <ul>
     <li>
      <strong>
       定义
      </strong>
      ：意向锁是InnoDB存储引擎的特殊锁类型，用来表示事务打算对某个数据行加锁。它是为了提高性能而设计的，避免了在事务加锁时对全表进行扫描。
     </li>
     <li>
      <strong>
       类型
      </strong>
      ：
      <ul>
       <li>
        <strong>
         意向共享锁（IS，Intention Shared Lock）
        </strong>
        ：表示事务希望在某个行级别加共享锁。
       </li>
       <li>
        <strong>
         意向排他锁（IX，Intention Exclusive Lock）
        </strong>
        ：表示事务希望在某个行级别加排他锁。
       </li>
      </ul>
     </li>
     <li>
      <strong>
       特点
      </strong>
      ：意向锁并不直接加锁行数据，而是加在表上，用来指示事务打算对某行加锁。它是InnoDB为了优化多事务访问同一表时的性能而引入的机制。
     </li>
    </ul>
    <h4>
     6.
     <strong>
      死锁（Deadlocks）
     </strong>
    </h4>
    <ul>
     <li>
      <strong>
       定义
      </strong>
      ：死锁是指两个或多个事务在互相等待对方释放资源时，造成一种僵局，事务无法继续执行。
     </li>
     <li>
      <strong>
       解决方案
      </strong>
      ：MySQL的InnoDB存储引擎会自动检测并解决死锁，通常会回滚其中一个事务，以便其他事务继续执行。
     </li>
    </ul>
    <h4>
     总结：
    </h4>
    <p>
     MySQL的锁机制可以大致分为全局锁、表锁、行锁、意向锁和自增锁等类型，其中行锁和意向锁在InnoDB存储引擎中使用较多，能够有效提高并发性。在实际开发中，选择合适的锁类型非常重要，以保证事务的隔离性、并发性和数据一致性。
    </p>
   </div>
  </div>
  <div class="blog-extension-box" id="blogExtensionBox" style="width:400px;margin:auto;margin-top:12px">
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f63616f6c693230313331342f:61727469636c652f64657461696c732f313436323432373531" class_="artid" style="display:none">
 </p>
</div>


