---
arturl_encode: "68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f34343232303037382f:61727469636c652f64657461696c732f313436313038343034"
layout: post
title: "VueAnt-Designæ­å»ºAIèŠå¤©å¯¹è¯"
date: 2025-03-08 00:02:11 +08:00
description: "ä»Šå¤©åœ¨è¿™é‡Œä»‹ç»ä¸€ä¸‹ Ant Design Xï¼Œè¿™æ˜¯èš‚èšè®¾è®¡å›¢é˜Ÿæ¨å‡ºçš„ä¸€æ¬¾ä¸“æ³¨äºäººå·¥æ™ºèƒ½ï¼ˆAIï¼‰é¢†åŸŸçš„ç»„ä»¶åº“ï¼Œä¸»è¦é¢å‘ React ç”Ÿæ€ç³»ç»Ÿ(ç›®å‰æ”¯æŒOpenaiï¼Œé€šä¹‰åƒé—®)ã€‚å®˜æ–¹ä¹Ÿæ¨å‡ºäº†ant-design-x-vue é¢å‘ Vueã€‚å½“ç„¶æˆ‘ä»¬ä»Šå¤©çš„ä¸»é¢˜ä¹Ÿæ˜¯ä½¿ç”¨ Vue æ­å»ºã€‚"
keywords: "Vue+Ant Designæ­å»ºAIèŠå¤©å¯¹è¯"
categories: ['æœªåˆ†ç±»']
tags: ['å‰ç«¯', 'Vue', 'Javascript']
artid: "146108404"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146108404
    alt: "VueAnt-Designæ­å»ºAIèŠå¤©å¯¹è¯"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146108404
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146108404
cover: https://bing.ee123.net/img/rand?artid=146108404
image: https://bing.ee123.net/img/rand?artid=146108404
img: https://bing.ee123.net/img/rand?artid=146108404
---

# Vue+Ant Designæ­å»ºAIèŠå¤©å¯¹è¯

ä»Šå¤©åœ¨è¿™é‡Œä»‹ç»ä¸€ä¸‹ Ant Design Xï¼Œè¿™æ˜¯èš‚èšè®¾è®¡å›¢é˜Ÿæ¨å‡ºçš„ä¸€æ¬¾ä¸“æ³¨äºäººå·¥æ™ºèƒ½ï¼ˆAIï¼‰é¢†åŸŸçš„ç»„ä»¶åº“ï¼Œä¸»è¦é¢å‘ React ç”Ÿæ€ç³»ç»Ÿ(ç›®å‰æ”¯æŒOpenaiï¼Œé€šä¹‰åƒé—®)ã€‚å®˜æ–¹ä¹Ÿæ¨å‡ºäº†ant-design-x-vue é¢å‘ Vueã€‚å½“ç„¶æˆ‘ä»¬ä»Šå¤©çš„ä¸»é¢˜ä¹Ÿæ˜¯ä½¿ç”¨ Vue æ­å»ºã€‚

#### æ­å»º Vue 3 é¡¹ç›®

##### 1. åˆ›å»ºé¡¹ç›®

é¦–å…ˆï¼Œæˆ‘ä»¬å…ˆåˆ›å»ºä¸€ä¸ª Vue 3 é¡¹ç›®ï¼Œè¿™é‡Œä½¿ç”¨ Vite åˆ›å»ºï¼š

```bash
npm create vite@latest

```

éšåè·Ÿç€æç¤ºé€‰æ‹© Vue å³å¯ã€‚ä½¿ç”¨ç¼–è¾‘å™¨æ‰“å¼€é¡¹ç›®åï¼Œåœ¨ç»ˆç«¯è¿›è¡Œå®‰è£…ä¾èµ–å¹¶è¿è¡Œï¼š

```bash
npm i
npm run dev

```

è¿™æ ·æˆ‘ä»¬çš„ Vue 3 demo å°±æ­å»ºå¥½äº†ã€‚

##### 2. å®‰è£…ä¾èµ–

æ¥ä¸‹æ¥å¼€å§‹å®‰è£…
`ant-design-x-vue`
éœ€è¦çš„ä¾èµ–ï¼š

```bash
npm i ant-design-vue
npm i ant-design-x-vue
npm i @vitejs/plugin-vue-jsx

```

##### 3. åˆ›å»ºé¡¹ç›®æ¨¡æ¿ï¼ˆå¯é€‰ï¼‰

```bash
npm create vite@latest my-vue-macros -- --template vue-ts

```

#### é…ç½®æ–‡ä»¶

##### 1. é…ç½® `vite.config.ts`

```typescript
import { defineConfig } from 'vite';
import VueMacros from 'unplugin-vue-macros/vite';
import vue from '@vitejs/plugin-vue';
import vueJsx from '@vitejs/plugin-vue-jsx';

// https://vite.dev/config/
export default defineConfig({
  plugins: [
    VueMacros({
      plugins: {
        vue: vue(),
        vueJsx: vueJsx(),
      },
    }),
  ],
});

```

##### 2. é…ç½® `tsconfig.json`

```json
{
  "compilerOptions": {
    "target": "esnext",
    "module": "esnext",
    "esModuleInterop": true,
    "moduleResolution": "bundler",
    "jsx": "preserve",
    "jsxImportSource": "vue"
  }
}

```

#### `App.vue` æ¨¡æ¿

```javascript
<script setup lang="tsx">
  // å¼•å…¥ Ant Design X Vue ç›¸å…³ç»„ä»¶å’Œç±»å‹
  import {
    Attachments,
    type AttachmentsProps,
    Bubble,
    type BubbleListProps,
    Conversations,
    type ConversationsProps,
    Prompts,
    type PromptsProps,
    Sender,
    Welcome,
    useXAgent,
    useXChat,
  } from 'ant-design-x-vue';

  // å¼•å…¥ Ant Design å›¾æ ‡ç»„ä»¶
  import {
    CloudUploadOutlined,
    CommentOutlined,
    EllipsisOutlined,
    FireOutlined,
    HeartOutlined,
    PaperClipOutlined,
    PlusOutlined,
    ReadOutlined,
    ShareAltOutlined,
    SmileOutlined,
  } from '@ant-design/icons-vue';

  // å¼•å…¥ Ant Design Vue é€šç”¨ç»„ä»¶å’Œä¸»é¢˜
  import { Badge, Button, Space, theme } from 'ant-design-vue';

  // å¼•å…¥ Vue ç›¸å…³ API
  import { computed, ref, watch, type VNode } from 'vue';

  // å®šä¹‰ç»„ä»¶åç§°
  defineOptions({ name: 'PlaygroundIndependent' });

  // è¾…åŠ©å‡½æ•°ï¼šæ¨¡æ‹Ÿå»¶è¿Ÿ
  const sleep = () => new Promise((resolve) => setTimeout(resolve, 500));

  // è¾…åŠ©å‡½æ•°ï¼šæ¸²æŸ“æ ‡é¢˜
  const renderTitle = (icon: VNode, title: string) => (
    <Space align="start">
      {icon}
      <span>{title}</span>
    </Space>
  );

  // ä¼šè¯åˆ—è¡¨é»˜è®¤æ•°æ®
  const defaultConversationsItems = [
    {
      key: '0',
      label: 'What is Ant Design X?',
    },
  ];

  // å ä½æç¤ºè¯åˆ—è¡¨æ•°æ®
  const placeholderPromptsItems: PromptsProps['items'] = [
    {
      key: '1',
      label: renderTitle(<FireOutlined style={{ color: '#FF4D4F' }} />, 'Hot Topics'),
      description: 'What are you interested in?',
      children: [
        {
          key: '1-1',
          description: `What's new in X?`,
        },
        {
          key: '1-2',
          description: `What's AGI?`,
        },
        {
          key: '1-3',
          description: `Where is the doc?`,
        },
      ],
    },
    {
      key: '2',
      label: renderTitle(<ReadOutlined style={{ color: '#1890FF' }} />, 'Design Guide'),
      description: 'How to design a good product?',
      children: [
        {
          key: '2-1',
          icon: <HeartOutlined />,
          description: `Know the well`,
        },
        {
          key: '2-2',
          icon: <SmileOutlined />,
          description: `Set the AI role`,
        },
        {
          key: '2-3',
          icon: <CommentOutlined />,
          description: `Express the feeling`,
        },
      ],
    },
  ];

  // å‘é€è€…æç¤ºè¯åˆ—è¡¨æ•°æ®
  const senderPromptsItems: PromptsProps['items'] = [
    {
      key: '1',
      description: 'Hot Topics',
      icon: <FireOutlined style={{ color: '#FF4D4F' }} />,
    },
    {
      key: '2',
      description: 'Design Guide',
      icon: <ReadOutlined style={{ color: '#1890FF' }} />,
    },
  ];

  // æ¶ˆæ¯æ°”æ³¡è§’è‰²é…ç½®
  const roles: BubbleListProps['roles'] = {
    ai: {
      placement: 'start',
      typing: { step: 5, interval: 20 },
      styles: {
        content: {
          borderRadius: '16px',
        },
      },
    },
    local: {
      placement: 'end',
      variant: 'shadow',
    },
  };

  // ==================== Style ====================
  // è·å–ä¸»é¢˜ token
  const { token } = theme.useToken();

  // è®¡ç®—æ ·å¼å¯¹è±¡
  const styles = computed(() => {
    return {
      layout: {
        width: '100%',
        'min-width': '1000px',
        height: '722px',
        'border-radius': `${token.value.borderRadius}px`,
        display: 'flex',
        background: `${token.value.colorBgContainer}`,
        'font-family': `AlibabaPuHuiTi, ${token.value.fontFamily}, sans-serif`,
      },
      menu: {
        background: `${token.value.colorBgLayout}80`,
        width: '280px',
        height: '100%',
        display: 'flex',
        'flex-direction': 'column',
      },
      conversations: {
        padding: '0 12px',
        flex: 1,
        'overflow-y': 'auto',
      },
      chat: {
        height: '100%',
        width: '100%',
        'max-width': '700px',
        margin: '0 auto',
        'box-sizing': 'border-box',
        display: 'flex',
        'flex-direction': 'column',
        padding: `${token.value.paddingLG}px`,
        gap: '16px',
      },
      messages: {
        flex: 1,
      },
      placeholder: {
        'padding-top': '32px',
      },
      sender: {
        'box-shadow': token.value.boxShadow,
      },
      logo: {
        display: 'flex',
        height: '72px',
        'align-items': 'center',
        'justify-content': 'start',
        padding: '0 24px',
        'box-sizing': 'border-box',
      },
      'logo-img': {
        width: '24px',
        height: '24px',
        display: 'inline-block',
      },
      'logo-span': {
        display: 'inline-block',
        margin: '0 8px',
        'font-weight': 'bold',
        color: token.value.colorText,
        'font-size': '16px',
      },
      addBtn: {
        background: '#1677ff0f',
        border: '1px solid #1677ff34',
        width: 'calc(100% - 24px)',
        margin: '0 12px 24px 12px',
      },
    } as const;
  });

  // ==================== State ====================
  // å¤´éƒ¨å±•å¼€çŠ¶æ€
  const headerOpen = ref(false);
  // è¾“å…¥æ¡†å†…å®¹
  const content = ref('');
  // ä¼šè¯åˆ—è¡¨æ•°æ®
  const conversationsItems = ref(defaultConversationsItems);
  // å½“å‰æ¿€æ´»çš„ä¼šè¯ key
  const activeKey = ref(defaultConversationsItems[0].key);
  // é™„ä»¶åˆ—è¡¨
  const attachedFiles = ref<AttachmentsProps['items']>([]);
  // ä»£ç†è¯·æ±‚åŠ è½½çŠ¶æ€
  const agentRequestLoading = ref(false);

  // ==================== Runtime ====================
  // ä½¿ç”¨ useXAgent åˆå§‹åŒ–ä»£ç†
  const [agent] = useXAgent({
    request: async ({ message }, { onSuccess }) => {
      agentRequestLoading.value = true;
      await sleep();
      agentRequestLoading.value = false;
      onSuccess(`Mock success return. You said: ${message}`);
    },
  });

  // ä½¿ç”¨ useXChat ç®¡ç†èŠå¤©é€»è¾‘
  const { onRequest, messages, setMessages } = useXChat({
    agent: agent.value,
  });

  // ç›‘å¬æ¿€æ´»ä¼šè¯å˜åŒ–ï¼Œæ¸…ç©ºæ¶ˆæ¯åˆ—è¡¨
  watch(activeKey, () => {
    if (activeKey.value!== undefined) {
      setMessages([]);
    }
  }, { immediate: true });

  // ==================== Event ====================
  // æäº¤æ¶ˆæ¯å¤„ç†å‡½æ•°
  const onSubmit = (nextContent: string) => {
    if (!nextContent) return;
    onRequest(nextContent);
    content.value = '';
  };

  // æç¤ºè¯é¡¹ç‚¹å‡»å¤„ç†å‡½æ•°
  const onPromptsItemClick: PromptsProps['onItemClick'] = (info) => {
    onRequest(info.data.description as string);
  };

  // æ·»åŠ ä¼šè¯å¤„ç†å‡½æ•°
  const onAddConversation = () => {
    conversationsItems.value = [
      ...conversationsItems.value,
      {
        key: `${conversationsItems.value.length}`,
        label: `New Conversation ${conversationsItems.value.length}`,
      },
    ];
    activeKey.value = `${conversationsItems.value.length}`;
  };

  // ä¼šè¯ç‚¹å‡»å¤„ç†å‡½æ•°
  const onConversationClick: ConversationsProps['onActiveChange'] = (key) => {
    activeKey.value = key;
  };

  // é™„ä»¶å˜åŒ–å¤„ç†å‡½æ•°
  const handleFileChange: AttachmentsProps['onChange'] = (info) =>
    attachedFiles.value = info.fileList;

  // ==================== Nodes ====================
  // å ä½èŠ‚ç‚¹è®¡ç®—å±æ€§
  const placeholderNode = computed(() => (
    <Space direction="vertical" size={16} style={styles.value.placeholder}>
      <Welcome
        variant="borderless"
        icon="https://mdn.alipayobjects.com/huamei_iwk9zp/afts/img/A*s5sNRo5LjfQAAAAAAAAAAAAADgCCAQ/fmt.webp"
        title="Hello, I'm Ant Design X"
        description="Base on Ant Design, AGI product interface solution, create a better intelligent vision~"
        extra={
          <Space>
            <Button icon={<ShareAltOutlined />} />
            <Button icon={<EllipsisOutlined />} />
          </Space>
        }
      />
      <Prompts
        title="Do you want?"
        items={placeholderPromptsItems}
        styles={{
          list: {
            width: '100%',
          },
          item: {
            flex: 1,
          },
        }}
        onItemClick={onPromptsItemClick}
      />
    </Space>
  ));

  // æ¶ˆæ¯åˆ—è¡¨é¡¹è®¡ç®—å±æ€§
  const items = computed<BubbleListProps['items']>(() => messages.value.map(({ id, message, status }) => ({
    key: id,
    loading: status === 'loading',
    role: status === 'local'? 'local' : 'ai',
    content: message,
  })));

  // é™„ä»¶èŠ‚ç‚¹è®¡ç®—å±æ€§
  const attachmentsNode = computed(() => (
    <Badge dot={attachedFiles.value.length > 0 &&!headerOpen.value}>
      <Button type="text" icon={<PaperClipOutlined />} onClick={() => headerOpen.value =!headerOpen.value} />
    </Badge>
  ));

  // å‘é€è€…å¤´éƒ¨èŠ‚ç‚¹è®¡ç®—å±æ€§
  const senderHeader = computed(() => (
    <Sender.Header
      title="Attachments"
      open={headerOpen.value}
      onOpenChange={(open) => headerOpen.value = open}
      styles={{
        content: {
          padding: 0,
        },
      }}
    >
      <Attachments
        beforeUpload={() => false}
        items={attachedFiles.value}
        onChange={handleFileChange}
        placeholder={(type) =>
          type === 'drop'
           ? { title: 'Drop file here' }
            : {
              icon: <CloudUploadOutlined />,
              title: 'Upload files',
              description: 'Click or drag files to this area to upload',
            }
        }
      />
    </Sender.Header>
  ));

  // å¾½æ ‡èŠ‚ç‚¹è®¡ç®—å±æ€§
  const logoNode = computed(() => (
    <div style={styles.value.logo}>
      <img
        src="https://mdn.alipayobjects.com/huamei_iwk9zp/afts/img/A*eco6RrQhxbMAAAAAAAAAAAAADgCCAQ/original"
        draggable={false}
        alt="logo"
        style={styles.value['logo-img']}
      />
      <span style={styles.value['logo-span']}>Ant Design X Vue</span>
    </div>
  ));

  // å®šä¹‰æ¸²æŸ“å‡½æ•°
  defineRender(() => {
    return (
      <div style={styles.value.layout}>
        <div style={styles.value.menu}>
          {/* ğŸŒŸ Logo */}
          {logoNode.value}
          {/* ğŸŒŸ æ·»åŠ ä¼šè¯ */}
          <Button
            onClick={onAddConversation}
            type="link"
            style={styles.value.addBtn}
            icon={<PlusOutlined />}
          >
            New Conversation
          </Button>
          {/* ğŸŒŸ ä¼šè¯ç®¡ç† */}
          <Conversations
            items={conversationsItems.value}
            style={styles.value.conversations}
            activeKey={activeKey.value}
            onActiveChange={onConversationClick}
          />
        </div>
        <div style={styles.value.chat}>
          {/* ğŸŒŸ æ¶ˆæ¯åˆ—è¡¨ */}
          <Bubble.List
            items={items.value.length > 0? items.value : [{ content: placeholderNode.value, variant: 'borderless' }]}
            roles={roles}
            style={styles.value.messages}
          />
          {/* ğŸŒŸ æç¤ºè¯ */}
          <Prompts style={{ color: token.value.colorText }} items={senderPromptsItems} onItemClick={onPromptsItemClick} />
          {/* ğŸŒŸ è¾“å…¥æ¡† */}
          <Sender
            value={content.value}
            header={senderHeader.value}
            onSubmit={onSubmit}
            onChange={(value) => content.value = value}
            prefix={attachmentsNode.value}
            loading={agentRequestLoading.value}
            style={styles.value.sender}
          />
        </div>
      </div>
    );
  });
</script>

```

vueæ–‡æ¡£ï¼š

```bash
https://antd-design-x-vue.netlify.app/component/prompts.html

```

Ant Design Xæ–‡æ¡£ï¼ˆReactï¼‰ï¼š

```bash
https://ant-design-x.antgroup.com/index-cn?theme=compact

```

#### è¿è¡Œç»“æœ

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/8e62ba9561f049edb44b5e96f086bea8.png#pic_center)