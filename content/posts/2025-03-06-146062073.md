---
layout: post
title: "LeetCode-560-303前缀和思想解析"
date: 2025-03-06 10:43:55 +0800
description: "掌握这个技巧，你将更轻松地应对数组子区间和相关问题！记录前缀和，快速查找。这道题的关键点是利用。"
keywords: "LeetCode 560 & 303：前缀和思想解析**"
categories: ['每日算法']
tags: ['算法', '数据结构', 'Leetcode']
artid: "146062073"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146062073
    alt: "LeetCode-560-303前缀和思想解析"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146062073
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146062073
cover: https://bing.ee123.net/img/rand?artid=146062073
image: https://bing.ee123.net/img/rand?artid=146062073
img: https://bing.ee123.net/img/rand?artid=146062073
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     LeetCode 560 &amp; 303：前缀和思想解析**
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h2>
     <a id="LeetCode_560__303_0">
     </a>
     <strong>
      LeetCode 560 &amp; 303：前缀和思想解析
     </strong>
    </h2>
    <h3>
     <a id="_LeetCode_560__K__2">
     </a>
     <strong>
      🔥 LeetCode 560. 和为 K 的子数组
     </strong>
    </h3>
    <h4>
     <a id="__4">
     </a>
     <strong>
      📌 题目描述
     </strong>
    </h4>
    <p>
     给定一个整数数组
     <code>
      nums
     </code>
     和一个整数
     <code>
      k
     </code>
     ，请你统计并返回
     <strong>
      数组中和为
      <code>
       k
      </code>
      的子数组的个数
     </strong>
     。
    </p>
    <p>
     子数组是数组中
     <strong>
      元素的连续非空序列
     </strong>
     。
    </p>
    <h4>
     <a id="__10">
     </a>
     <strong>
      💡 解题思路
     </strong>
    </h4>
    <p>
     这道题的关键点是利用
     <strong>
      前缀和 + 哈希表
     </strong>
     进行优化，使其达到
     <code>
      O(n)
     </code>
     复杂度。
    </p>
    <h5>
     <a id="__14">
     </a>
     <strong>
      🚀 前缀和的核心思想
     </strong>
    </h5>
    <ul>
     <li>
      设
      <code>
       cur_sum
      </code>
      为当前的前缀和。
     </li>
     <li>
      目标是寻找
      <code>
       cur_sum - k
      </code>
      之前出现的次数。
     </li>
     <li>
      维护一个哈希表
      <code>
       pre_sum
      </code>
      记录所有前缀和出现的次数。
     </li>
     <li>
      每次
      <code>
       cur_sum
      </code>
      更新时，检查
      <code>
       pre_sum[cur_sum - k]
      </code>
      以统计所有符合条件的子数组。
     </li>
    </ul>
    <h4>
     <a id="__21">
     </a>
     <strong>
      🔗 代码实现
     </strong>
    </h4>
    <pre><code class="prism language-python"><span class="token keyword">from</span> collections <span class="token keyword">import</span> defaultdict
<span class="token keyword">from</span> typing <span class="token keyword">import</span> List

<span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">subarraySum</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nums<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">,</span> k<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">int</span><span class="token punctuation">:</span>
        pre_sum <span class="token operator">=</span> defaultdict<span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">)</span>
        pre_sum<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>  <span class="token comment"># 初始化，表示前缀和为 0 出现 1 次</span>
        
        cur_sum<span class="token punctuation">,</span> res <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span>
        <span class="token keyword">for</span> num <span class="token keyword">in</span> nums<span class="token punctuation">:</span>
            cur_sum <span class="token operator">+=</span> num  <span class="token comment"># 更新当前前缀和</span>
            res <span class="token operator">+=</span> pre_sum<span class="token punctuation">[</span>cur_sum <span class="token operator">-</span> k<span class="token punctuation">]</span>  <span class="token comment"># 统计之前出现的 (cur_sum - k) 次数</span>
            pre_sum<span class="token punctuation">[</span>cur_sum<span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token number">1</span>  <span class="token comment"># 记录当前前缀和的出现次数</span>
        
        <span class="token keyword">return</span> res
</code></pre>
    <h4>
     <a id="__41">
     </a>
     <strong>
      📊 时间复杂度分析
     </strong>
    </h4>
    <ul>
     <li>
      <strong>
       时间复杂度
      </strong>
      ：
      <code>
       O(n)
      </code>
      ，遍历一次数组，每次操作均为
      <code>
       O(1)
      </code>
      。
     </li>
     <li>
      <strong>
       空间复杂度
      </strong>
      ：
      <code>
       O(n)
      </code>
      ，哈希表存储前缀和。
     </li>
    </ul>
    <h4>
     <a id="__45">
     </a>
     <strong>
      📝 示例解析
     </strong>
    </h4>
    <pre><code class="prism language-python">输入<span class="token punctuation">:</span> nums <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> k <span class="token operator">=</span> <span class="token number">2</span>
输出<span class="token punctuation">:</span> <span class="token number">2</span>
</code></pre>
    <ul>
     <li>
      <code>
       pre_sum = {0:1, 1:1, 2:1, 3:1}
      </code>
     </li>
     <li>
      计算过程：
      <ul>
       <li>
        <code>
         cur_sum = 1
        </code>
        →
        <code>
         pre_sum[1 - 2] = pre_sum[-1]
        </code>
        不存在 →
        <code>
         res = 0
        </code>
       </li>
       <li>
        <code>
         cur_sum = 2
        </code>
        →
        <code>
         pre_sum[2 - 2] = pre_sum[0] = 1
        </code>
        →
        <code>
         res = 1
        </code>
       </li>
       <li>
        <code>
         cur_sum = 3
        </code>
        →
        <code>
         pre_sum[3 - 2] = pre_sum[1] = 1
        </code>
        →
        <code>
         res = 2
        </code>
       </li>
      </ul>
     </li>
    </ul>
    <p>
     这道题的技巧在于
     <strong>
      快速找到前缀和满足
      <code>
       cur_sum - k
      </code>
      的子数组
     </strong>
     ，实现
     <code>
      O(n)
     </code>
     级别的快速查找！
    </p>
    <hr/>
    <h3>
     <a id="_LeetCode_303____61">
     </a>
     <strong>
      🚀 LeetCode 303. 区域和检索 - 数组不可变
     </strong>
    </h3>
    <h4>
     <a id="__63">
     </a>
     <strong>
      📌 题目描述
     </strong>
    </h4>
    <p>
     给定一个整数数组
     <code>
      nums
     </code>
     ，实现
     <code>
      sumRange(left, right)
     </code>
     来计算
     <strong>
      索引
      <code>
       left
      </code>
      和
      <code>
       right
      </code>
      之间（包含左右端点）的元素总和
     </strong>
     。
    </p>
    <h4>
     <a id="__67">
     </a>
     <strong>
      💡 解题思路
     </strong>
    </h4>
    <ul>
     <li>
      <strong>
       前缀和优化查询
      </strong>
      ：
      <ul>
       <li>
        预计算前缀和
        <code>
         s[i]
        </code>
        ，其中
        <code>
         s[i]
        </code>
        代表
        <code>
         nums
        </code>
        <strong>
         前
         <code>
          i
         </code>
         个元素的和
        </strong>
        。
       </li>
       <li>
        <code>
         sumRange(left, right) = s[right+1] - s[left]
        </code>
        。
       </li>
      </ul>
     </li>
    </ul>
    <h4>
     <a id="__73">
     </a>
     <strong>
      🔗 代码实现
     </strong>
    </h4>
    <pre><code class="prism language-python"><span class="token keyword">from</span> typing <span class="token keyword">import</span> List

<span class="token keyword">class</span> <span class="token class-name">NumArray</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nums<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        s <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token keyword">for</span> i<span class="token punctuation">,</span> x <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">:</span>
            s<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> s<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> x  <span class="token comment"># 计算前缀和</span>
        self<span class="token punctuation">.</span>s <span class="token operator">=</span> s
    
    <span class="token keyword">def</span> <span class="token function">sumRange</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> left<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">,</span> right<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">int</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>s<span class="token punctuation">[</span>right <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span> self<span class="token punctuation">.</span>s<span class="token punctuation">[</span>left<span class="token punctuation">]</span>  <span class="token comment"># 利用前缀和计算子数组和</span>
</code></pre>
    <h4>
     <a id="__89">
     </a>
     <strong>
      📊 时间复杂度分析
     </strong>
    </h4>
    <ul>
     <li>
      <strong>
       初始化
      </strong>
      ：
      <code>
       O(n)
      </code>
      （计算前缀和）。
     </li>
     <li>
      <strong>
       查询
       <code>
        sumRange
       </code>
      </strong>
      ：
      <code>
       O(1)
      </code>
      （直接相减即可）。
     </li>
    </ul>
    <h4>
     <a id="__94">
     </a>
     <strong>
      📝 示例解析
     </strong>
    </h4>
    <pre><code class="prism language-python">输入<span class="token punctuation">:</span>
nums <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>
obj <span class="token operator">=</span> NumArray<span class="token punctuation">(</span>nums<span class="token punctuation">)</span>
obj<span class="token punctuation">.</span>sumRange<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>  <span class="token comment"># 输出: 1  (-2 + 0 + 3 = 1)</span>
obj<span class="token punctuation">.</span>sumRange<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>  <span class="token comment"># 输出: -1 (3 + (-5) + 2 + (-1) = -1)</span>
obj<span class="token punctuation">.</span>sumRange<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>  <span class="token comment"># 输出: -3 (-2 + 0 + 3 + (-5) + 2 + (-1) = -3)</span>
</code></pre>
    <hr/>
    <h3>
     <a id="__107">
     </a>
     <strong>
      🎯 重点总结
     </strong>
    </h3>
    <h4>
     <a id="560__K____109">
     </a>
     <strong>
      560. 和为 K 的子数组（前缀和 + 哈希表）
     </strong>
    </h4>
    <p>
     ✅
     <strong>
      问题：
     </strong>
     统计子数组和为
     <code>
      k
     </code>
     的个数。
     <br/>
     ✅
     <strong>
      优化方法：
     </strong>
     使用
     <code>
      哈希表 pre_sum
     </code>
     记录前缀和，快速查找
     <code>
      cur_sum - k
     </code>
     的次数。
     <br/>
     ✅
     <strong>
      时间复杂度：
     </strong>
     <code>
      O(n)
     </code>
     <br/>
     ✅
     <strong>
      空间复杂度：
     </strong>
     <code>
      O(n)
     </code>
    </p>
    <h4>
     <a id="303__115">
     </a>
     <strong>
      303. 区域和检索（前缀和优化查询）
     </strong>
    </h4>
    <p>
     ✅
     <strong>
      问题：
     </strong>
     计算区间
     <code>
      [left, right]
     </code>
     的元素总和。
     <br/>
     ✅
     <strong>
      优化方法：
     </strong>
     预计算
     <code>
      前缀和
     </code>
     ，查询时
     <code>
      O(1)
     </code>
     复杂度。
     <br/>
     ✅
     <strong>
      时间复杂度：
     </strong>
     <code>
      O(n)
     </code>
     预计算，
     <code>
      O(1)
     </code>
     查询。
     <br/>
     ✅
     <strong>
      空间复杂度：
     </strong>
     <code>
      O(n)
     </code>
    </p>
    <p>
     两道题都利用了
     <strong>
      前缀和思想
     </strong>
     ，掌握这个技巧，你将更轻松地应对数组子区间和相关问题！🔥🚀
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f71715f31373430353035392f:61727469636c652f64657461696c732f313436303632303733" class_="artid" style="display:none">
 </p>
</div>


