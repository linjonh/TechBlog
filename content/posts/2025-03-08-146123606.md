---
layout: post
title: "mitt-依赖库详解"
date: 2025-03-08 21:54:16 +0800
description: "mitt是一个极其轻量级的 JavaScript 事件发射器库，实现了发布-订阅模式。该模式允许对象间松散耦合，一个对象（发布者）可以发布事件，而其他对象（订阅者）可以监听这些事件并作出响应。适用于浏览器和 Node.js 环境。"
keywords: "mitt 依赖库详解"
categories: ['未分类']
tags: ['前端', 'Node', 'Javascript']
artid: "146123606"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146123606
    alt: "mitt-依赖库详解"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146123606
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146123606
cover: https://bing.ee123.net/img/rand?artid=146123606
image: https://bing.ee123.net/img/rand?artid=146123606
img: https://bing.ee123.net/img/rand?artid=146123606
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     mitt 依赖库详解
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h3>
     <a id="_0">
     </a>
     一、概述
    </h3>
    <p>
     <code>
      mitt
     </code>
     是一个极其轻量级的 JavaScript 事件发射器库，实现了发布-订阅模式。该模式允许对象间松散耦合，一个对象（发布者）可以发布事件，而其他对象（订阅者）可以监听这些事件并作出响应。适用于浏览器和 Node.js 环境。
    </p>
    <h3>
     <a id="_4">
     </a>
     二、安装
    </h3>
    <pre><code class="prism language-bash"><span class="token function">npm</span> <span class="token function">install</span> mitt
</code></pre>
    <h3>
     <a id="_10">
     </a>
     三、基本使用
    </h3>
    <h4>
     <a id="1__mitt_12">
     </a>
     1. 引入
     <code>
      mitt
     </code>
    </h4>
    <pre><code class="prism language-javascript"><span class="token keyword">import</span> mitt <span class="token keyword">from</span> <span class="token string">"mitt"</span><span class="token punctuation">;</span>
</code></pre>
    <h4>
     <a id="2__18">
     </a>
     2. 创建事件发射器实例
    </h4>
    <pre><code class="prism language-javascript"><span class="token keyword">const</span> emitter <span class="token operator">=</span> <span class="token function">mitt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
    <h4>
     <a id="3__24">
     </a>
     3. 订阅事件
    </h4>
    <p>
     使用
     <code>
      on
     </code>
     方法来订阅事件，该方法接收两个参数：事件名称和回调函数。当指定事件被触发时，回调函数将被执行。
    </p>
    <pre><code class="prism language-javascript"><span class="token comment">// 订阅名为 'message' 的事件</span>
emitter<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">"message"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Received message:"</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
    <h4>
     <a id="4__35">
     </a>
     4. 发布事件
    </h4>
    <p>
     使用
     <code>
      emit
     </code>
     方法来发布事件，该方法接收事件名称作为第一个参数，后续可选参数会传递给订阅该事件的回调函数。
    </p>
    <pre><code class="prism language-javascript"><span class="token comment">// 发布 'message' 事件，并传递数据</span>
emitter<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">"message"</span><span class="token punctuation">,</span> <span class="token string">"Hello, World!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
    <h4>
     <a id="5__44">
     </a>
     5. 取消订阅
    </h4>
    <p>
     使用
     <code>
      off
     </code>
     方法取消订阅事件，需要传入事件名称和要取消的回调函数引用。
    </p>
    <pre><code class="prism language-javascript"><span class="token comment">// 定义回调函数</span>
<span class="token keyword">const</span> <span class="token function-variable function">messageHandler</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Received message:"</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 订阅事件</span>
emitter<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">"message"</span><span class="token punctuation">,</span> messageHandler<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 取消订阅</span>
emitter<span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span><span class="token string">"message"</span><span class="token punctuation">,</span> messageHandler<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 此时再发布事件，已取消的回调函数不会执行</span>
emitter<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">"message"</span><span class="token punctuation">,</span> <span class="token string">"This message won't trigger the handler."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
    <h3>
     <a id="_64">
     </a>
     四、高级用法
    </h3>
    <h4>
     <a id="1__66">
     </a>
     1. 监听所有事件
    </h4>
    <p>
     <code>
      mitt
     </code>
     允许监听所有事件，使用特殊的
     <code>
      '*'
     </code>
     作为事件名称。当任何事件被触发时，该回调函数都会执行，并会接收到事件名称和传递的数据。
    </p>
    <pre><code class="prism language-javascript">emitter<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">"*"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">eventName<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Event </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>eventName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> was triggered with data:</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
emitter<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">"userLoggedIn"</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">username</span><span class="token operator">:</span> <span class="token string">"john_doe"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
    <h4>
     <a id="2__77">
     </a>
     2. 清除所有订阅
    </h4>
    <p>
     使用
     <code>
      all.clear()
     </code>
     方法可以清除所有事件的所有订阅。
    </p>
    <pre><code class="prism language-javascript">emitter<span class="token punctuation">.</span>all<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 之后发布事件不会触发任何回调</span>
emitter<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">"message"</span><span class="token punctuation">,</span> <span class="token string">"No handlers will receive this."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f36343638343039352f:61727469636c652f64657461696c732f313436313233363036" class_="artid" style="display:none">
 </p>
</div>


