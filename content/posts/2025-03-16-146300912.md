---
layout: post
title: "BUG日志Maven项目启动报错文件名或者文件扩展名过长"
date: 2025-03-16 20:34:41 +0800
description: "Windows系统下Maven项目因路径过长导致命令行执行失败。"
keywords: "BUG日志：Maven项目启动报错（文件名或者文件扩展名过长）"
categories: ['老奶奶学编程', 'Bug']
tags: ['Maven', 'Java', 'Bug']
artid: "146300912"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146300912
    alt: "BUG日志Maven项目启动报错文件名或者文件扩展名过长"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146300912
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146300912
cover: https://bing.ee123.net/img/rand?artid=146300912
image: https://bing.ee123.net/img/rand?artid=146300912
img: https://bing.ee123.net/img/rand?artid=146300912
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     BUG日志：Maven项目启动报错（文件名或者文件扩展名过长）
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h4>
     <a id="BugMaven001_1">
     </a>
     <strong>
      Bug日志编号
     </strong>
     ：[Maven-001]
    </h4>
    <p>
     <strong>
      标题
     </strong>
     ：Windows系统下Maven项目因路径过长导致命令行执行失败
    </p>
    <h4>
     <a id="1__4">
     </a>
     <strong>
      1. 问题描述
     </strong>
    </h4>
    <ul>
     <li>
      <strong>
       现象
      </strong>
      ：执行
      <code>
       mvn clean install
      </code>
      时报错：
      <br/>
      <code>
       The input line is too long
      </code>
      或
      <code>
       The filename or extension is too long
      </code>
     </li>
     <li>
      <strong>
       触发条件
      </strong>
      ：
      <ul>
       <li>
        Windows系统
       </li>
       <li>
        项目依赖过多，生成的类路径（classpath）超过命令行字符限制
       </li>
      </ul>
     </li>
     <li>
      <strong>
       影响范围
      </strong>
      ：所有需要长命令行操作的Maven命令（如测试、打包）
     </li>
    </ul>
    <hr/>
    <h4>
     <a id="2__14">
     </a>
     <strong>
      2. 环境信息
     </strong>
    </h4>
    <ul>
     <li>
      <strong>
       操作系统
      </strong>
      ：Windows 11
     </li>
     <li>
      <strong>
       Maven版本
      </strong>
      ：3.8.6
     </li>
     <li>
      <strong>
       JDK版本
      </strong>
      ：17
     </li>
     <li>
      <strong>
       复现频率
      </strong>
      ：100%（依赖量大的项目）
     </li>
    </ul>
    <hr/>
    <h4>
     <a id="3__23">
     </a>
     <strong>
      3. 技术细节
     </strong>
    </h4>
    <ul>
     <li>
      <strong>
       错误本质
      </strong>
      ：Windows命令行单条最大长度限制（默认8191字符，但受环境变量影响可能更低）
     </li>
     <li>
      <strong>
       相关文件
      </strong>
      ：
      <code>
       target/classpath.txt
      </code>
      （自动生成的类路径文件）
     </li>
     <li>
      <strong>
       关键日志
      </strong>
      ：
      <pre><code>[ERROR] Failed to execute goal ...  
The command line is too long...
</code></pre>
     </li>
    </ul>
    <hr/>
    <h4>
     <a id="4__34">
     </a>
     <strong>
      4. 根因分析
     </strong>
    </h4>
    <ul>
     <li>
      <strong>
       直接原因
      </strong>
      ：Maven生成的类路径字符串超过Windows命令行限制
     </li>
     <li>
      <strong>
       深层原因
      </strong>
      ：
      <ul>
       <li>
        项目依赖层级过深
       </li>
       <li>
        Maven本地仓库路径较长（默认在用户目录）
       </li>
       <li>
        未启用Windows长路径支持
       </li>
      </ul>
     </li>
    </ul>
    <hr/>
    <h4>
     <a id="6__43">
     </a>
     <strong>
      6. 解决方案
     </strong>
     （任选其一）
    </h4>
    <h5>
     <a id="1_45">
     </a>
     <strong>
      方案1：使用类路径文件引用
     </strong>
     （推荐）
    </h5>
    <pre><code class="prism language-xml"><span class="token comment">&lt;!-- pom.xml 添加配置 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugins</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.maven.plugins<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>maven-dependency-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>executions</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>execution</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>build-classpath<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>phase</span><span class="token punctuation">&gt;</span></span>generate-sources<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>phase</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>goals</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>goal</span><span class="token punctuation">&gt;</span></span>build-classpath<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>goal</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>goals</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>outputFile</span><span class="token punctuation">&gt;</span></span>${project.build.directory}/classpath.txt<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>outputFile</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>execution</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>executions</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugins</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">&gt;</span></span>
</code></pre>
    <h5>
     <a id="2_70">
     </a>
     <strong>
      方案2：缩短本地仓库路径
     </strong>
    </h5>
    <pre><code class="prism language-xml"><span class="token comment">&lt;!-- settings.xml 修改本地仓库位置 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>settings</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>localRepository</span><span class="token punctuation">&gt;</span></span>C:/.m2/repository<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>localRepository</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>settings</span><span class="token punctuation">&gt;</span></span>
</code></pre>
    <h5>
     <a id="3Windows_78">
     </a>
     <strong>
      方案3：启用Windows长路径支持
     </strong>
    </h5>
    <ol>
     <li>
      按
      <code>
       Win+R
      </code>
      输入
      <code>
       gpedit.msc
      </code>
     </li>
     <li>
      导航到：
      <br/>
      <code>
       计算机配置 &gt; 管理模板 &gt; 系统 &gt; 文件系统
      </code>
     </li>
     <li>
      启用：
      <br/>
      <code>
       启用 Win32 长路径
      </code>
     </li>
    </ol>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f:672e6373646e2e6e65742f323330315f38303131383035372f:61727469636c652f64657461696c732f313436333030393132" class_="artid" style="display:none">
 </p>
</div>


