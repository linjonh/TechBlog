---
layout: post
title: "第五章-动态规划"
date: 2025-03-16 22:00:55 +0800
description: "动态规划算法题目的整理"
keywords: "第五章-动态规划"
categories: ['程序设计']
tags: ['算法', '动态规划']
artid: "146302440"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146302440
    alt: "第五章-动态规划"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146302440
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146302440
cover: https://bing.ee123.net/img/rand?artid=146302440
image: https://bing.ee123.net/img/rand?artid=146302440
img: https://bing.ee123.net/img/rand?artid=146302440
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     第五章-动态规划
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h2>
     <a id="_0">
     </a>
     第五章-动态规划
    </h2>
    <blockquote>
     <p>
      写在前面：
     </p>
     <p>
      本笔记是根据acwing网站:算法基础课进行制作的，欢迎大家支持y总，听过y总的课，你绝对会对于算法产生更深的理解和更浓厚的兴趣！
     </p>
     <p>
      本笔记可能会有部分视频的截图，我不知道是不是会造成侵权，如果产生不好的影响，联系：2820402607@qq.com :happy:
     </p>
     <p>
      笔者通过正儿八经跟着y总完成了18道题目，对于“动态规划”有了一定的理解，但是若要熟练掌握，还需要持之以恒地练习和努力👊
     </p>
     <p>
      千里之行，始于足下！
     </p>
     <p>
      ps:
     </p>
     <p>
      y总动态规划（三）状况不是非常好，计数问题有翻车~
     </p>
    </blockquote>
    <p>
    </p>
    <p>
    </p>
    <h3>
     <a id="_19">
     </a>
     一、背包问题
    </h3>
    <ul>
     <li>
      0-1背包问题：每件物品最多只能使用一次
     </li>
     <li>
      完全背包
     </li>
     <li>
      多重背包及其优化
     </li>
     <li>
      分组背包
     </li>
    </ul>
    <h4>
     <a id="01_26">
     </a>
     0-1背包问题
    </h4>
    <p>
     DP
    </p>
    <ul>
     <li>
      <p>
       状态表示
       <span class="katex--inline">
        <span class="katex">
         <span class="katex-mathml">
          f 
          
         
           ( 
          
         
           i 
          
         
           , 
          
         
           j 
          
         
           ) 
          
         
        
          f(i,j)
         </span>
         <span class="katex-html">
          <span class="base">
           <span class="strut" style="height: 1em; vertical-align: -0.25em;">
           </span>
           <span class="mord mathnormal" style="margin-right: 0.1076em;">
            f
           </span>
           <span class="mopen">
            (
           </span>
           <span class="mord mathnormal">
            i
           </span>
           <span class="mpunct">
            ,
           </span>
           <span class="mspace" style="margin-right: 0.1667em;">
           </span>
           <span class="mord mathnormal" style="margin-right: 0.0572em;">
            j
           </span>
           <span class="mclose">
            )
           </span>
          </span>
         </span>
        </span>
       </span>
      </p>
      <ul>
       <li>
        集合
        <ul>
         <li>
          所有选法
         </li>
         <li>
          条件：1.只从前i个物品里面选；2.总体积&lt;=j
         </li>
        </ul>
       </li>
       <li>
        属性：如Max，Min，数量
       </li>
      </ul>
     </li>
     <li>
      <p>
       状态计算——集合的划分
      </p>
      <ul>
       <li>
        不重不漏
       </li>
       <li>
        <span class="katex--inline">
         <span class="katex">
          <span class="katex-mathml">
           f 
           
          
            ( 
           
          
            i 
           
          
            , 
           
          
            j 
           
          
            ) 
           
          
            = 
           
          
            m 
           
          
            a 
           
          
            x 
           
          
            { 
           
          
            f 
           
          
            ( 
           
          
            i 
           
          
            − 
           
          
            1 
           
          
            , 
           
          
            j 
           
          
            ) 
           
          
            , 
           
          
            f 
           
          
            ( 
           
          
            i 
           
          
            − 
           
          
            1 
           
          
            , 
           
          
            j 
           
          
            − 
           
           
           
             v 
            
           
             i 
            
           
          
            ) 
           
          
            + 
           
           
           
             w 
            
           
             i 
            
           
          
            } 
           
          
         
           f(i,j) = max\{f(i - 1, j),f(i - 1,j - v_i) + w_i\}
          </span>
          <span class="katex-html">
           <span class="base">
            <span class="strut" style="height: 1em; vertical-align: -0.25em;">
            </span>
            <span class="mord mathnormal" style="margin-right: 0.1076em;">
             f
            </span>
            <span class="mopen">
             (
            </span>
            <span class="mord mathnormal">
             i
            </span>
            <span class="mpunct">
             ,
            </span>
            <span class="mspace" style="margin-right: 0.1667em;">
            </span>
            <span class="mord mathnormal" style="margin-right: 0.0572em;">
             j
            </span>
            <span class="mclose">
             )
            </span>
            <span class="mspace" style="margin-right: 0.2778em;">
            </span>
            <span class="mrel">
             =
            </span>
            <span class="mspace" style="margin-right: 0.2778em;">
            </span>
           </span>
           <span class="base">
            <span class="strut" style="height: 1em; vertical-align: -0.25em;">
            </span>
            <span class="mord mathnormal">
             ma
            </span>
            <span class="mord mathnormal">
             x
            </span>
            <span class="mopen">
             {
             <!-- -->
            </span>
            <span class="mord mathnormal" style="margin-right: 0.1076em;">
             f
            </span>
            <span class="mopen">
             (
            </span>
            <span class="mord mathnormal">
             i
            </span>
            <span class="mspace" style="margin-right: 0.2222em;">
            </span>
            <span class="mbin">
             −
            </span>
            <span class="mspace" style="margin-right: 0.2222em;">
            </span>
           </span>
           <span class="base">
            <span class="strut" style="height: 1em; vertical-align: -0.25em;">
            </span>
            <span class="mord">
             1
            </span>
            <span class="mpunct">
             ,
            </span>
            <span class="mspace" style="margin-right: 0.1667em;">
            </span>
            <span class="mord mathnormal" style="margin-right: 0.0572em;">
             j
            </span>
            <span class="mclose">
             )
            </span>
            <span class="mpunct">
             ,
            </span>
            <span class="mspace" style="margin-right: 0.1667em;">
            </span>
            <span class="mord mathnormal" style="margin-right: 0.1076em;">
             f
            </span>
            <span class="mopen">
             (
            </span>
            <span class="mord mathnormal">
             i
            </span>
            <span class="mspace" style="margin-right: 0.2222em;">
            </span>
            <span class="mbin">
             −
            </span>
            <span class="mspace" style="margin-right: 0.2222em;">
            </span>
           </span>
           <span class="base">
            <span class="strut" style="height: 0.854em; vertical-align: -0.1944em;">
            </span>
            <span class="mord">
             1
            </span>
            <span class="mpunct">
             ,
            </span>
            <span class="mspace" style="margin-right: 0.1667em;">
            </span>
            <span class="mord mathnormal" style="margin-right: 0.0572em;">
             j
            </span>
            <span class="mspace" style="margin-right: 0.2222em;">
            </span>
            <span class="mbin">
             −
            </span>
            <span class="mspace" style="margin-right: 0.2222em;">
            </span>
           </span>
           <span class="base">
            <span class="strut" style="height: 1em; vertical-align: -0.25em;">
            </span>
            <span class="mord">
             <span class="mord mathnormal" style="margin-right: 0.0359em;">
              v
             </span>
             <span class="msupsub">
              <span class="vlist-t vlist-t2">
               <span class="vlist-r">
                <span class="vlist" style="height: 0.3117em;">
                 <span class="" style="top: -2.55em; margin-left: -0.0359em; margin-right: 0.05em;">
                  <span class="pstrut" style="height: 2.7em;">
                  </span>
                  <span class="sizing reset-size6 size3 mtight">
                   <span class="mord mathnormal mtight">
                    i
                   </span>
                  </span>
                 </span>
                </span>
                <span class="vlist-s">
                 ​
                </span>
               </span>
               <span class="vlist-r">
                <span class="vlist" style="height: 0.15em;">
                 <span class="">
                 </span>
                </span>
               </span>
              </span>
             </span>
            </span>
            <span class="mclose">
             )
            </span>
            <span class="mspace" style="margin-right: 0.2222em;">
            </span>
            <span class="mbin">
             +
            </span>
            <span class="mspace" style="margin-right: 0.2222em;">
            </span>
           </span>
           <span class="base">
            <span class="strut" style="height: 1em; vertical-align: -0.25em;">
            </span>
            <span class="mord">
             <span class="mord mathnormal" style="margin-right: 0.0269em;">
              w
             </span>
             <span class="msupsub">
              <span class="vlist-t vlist-t2">
               <span class="vlist-r">
                <span class="vlist" style="height: 0.3117em;">
                 <span class="" style="top: -2.55em; margin-left: -0.0269em; margin-right: 0.05em;">
                  <span class="pstrut" style="height: 2.7em;">
                  </span>
                  <span class="sizing reset-size6 size3 mtight">
                   <span class="mord mathnormal mtight">
                    i
                   </span>
                  </span>
                 </span>
                </span>
                <span class="vlist-s">
                 ​
                </span>
               </span>
               <span class="vlist-r">
                <span class="vlist" style="height: 0.15em;">
                 <span class="">
                 </span>
                </span>
               </span>
              </span>
             </span>
            </span>
            <span class="mclose">
             }
            </span>
           </span>
          </span>
         </span>
        </span>
       </li>
      </ul>
      <img alt="image-20250206163246264" src="https://i-blog.csdnimg.cn/img_convert/4f514e1c22ef7ce2b98943ec5212bc5c.png">
      </img>
     </li>
    </ul>
    <p>
     答案：
     <span class="katex--inline">
      <span class="katex">
       <span class="katex-mathml">
        f 
        
       
         ( 
        
       
         N 
        
       
         , 
        
       
         V 
        
       
         ) 
        
       
      
        f(N,V)
       </span>
       <span class="katex-html">
        <span class="base">
         <span class="strut" style="height: 1em; vertical-align: -0.25em;">
         </span>
         <span class="mord mathnormal" style="margin-right: 0.1076em;">
          f
         </span>
         <span class="mopen">
          (
         </span>
         <span class="mord mathnormal" style="margin-right: 0.109em;">
          N
         </span>
         <span class="mpunct">
          ,
         </span>
         <span class="mspace" style="margin-right: 0.1667em;">
         </span>
         <span class="mord mathnormal" style="margin-right: 0.2222em;">
          V
         </span>
         <span class="mclose">
          )
         </span>
        </span>
       </span>
      </span>
     </span>
    </p>
    <p>
     DP优化
    </p>
    <ul>
     <li>
      等价变换
     </li>
    </ul>
    <p>
     基础做法：
    </p>
    <pre><code class="prism language-C++">//
// Created by HUAWEI on 2025/2/6.
//
#include&lt;iostream&gt;
#include&lt;cstring&gt;
#include&lt;algorithm&gt;

using namespace std;

const int N = 1010;

int n, m;
int v[N], w[N];
int f[N][N];

int main() {
    cin &gt;&gt; n &gt;&gt; m;
    for (int i = 1; i &lt;= n; i++) { // 注意这个地方 i从1开始循环，否则会在下面带来数组越界！
        cin &gt;&gt; v[i] &gt;&gt; w[i];
    }

    for (int i = 1; i &lt;= n; i++) {
        for (int j = 1; j &lt;= m; j++) {
            f[i][j] = f[i - 1][j];
            if (j &gt;= v[i])
                f[i][j] = max(f[i][j], f[i - 1][j - v[i]] + w[i]);
        }
    }

    cout &lt;&lt; f[n][m] &lt;&lt; endl;
    return 0;
}
</code></pre>
    <p>
     滚动数组：
    </p>
    <ul>
     <li>
      如果在计算时只用到
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         f 
         
        
          ( 
         
        
          i 
         
        
          ) 
         
        
          , 
         
        
          f 
         
        
          ( 
         
        
          i 
         
        
          − 
         
        
          1 
         
        
          ) 
         
        
       
         f(i),f(i - 1)
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 1em; vertical-align: -0.25em;">
          </span>
          <span class="mord mathnormal" style="margin-right: 0.1076em;">
           f
          </span>
          <span class="mopen">
           (
          </span>
          <span class="mord mathnormal">
           i
          </span>
          <span class="mclose">
           )
          </span>
          <span class="mpunct">
           ,
          </span>
          <span class="mspace" style="margin-right: 0.1667em;">
          </span>
          <span class="mord mathnormal" style="margin-right: 0.1076em;">
           f
          </span>
          <span class="mopen">
           (
          </span>
          <span class="mord mathnormal">
           i
          </span>
          <span class="mspace" style="margin-right: 0.2222em;">
          </span>
          <span class="mbin">
           −
          </span>
          <span class="mspace" style="margin-right: 0.2222em;">
          </span>
         </span>
         <span class="base">
          <span class="strut" style="height: 1em; vertical-align: -0.25em;">
          </span>
          <span class="mord">
           1
          </span>
          <span class="mclose">
           )
          </span>
         </span>
        </span>
       </span>
      </span>
      ,那么仅仅需要声明数组
      <span class="katex--inline">
       <span class="katex">
        <span class="katex-mathml">
         f 
         
        
          ( 
         
        
          2 
         
        
          , 
         
        
          N 
         
        
          ) 
         
        
       
         f(2,N)
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 1em; vertical-align: -0.25em;">
          </span>
          <span class="mord mathnormal" style="margin-right: 0.1076em;">
           f
          </span>
          <span class="mopen">
           (
          </span>
          <span class="mord">
           2
          </span>
          <span class="mpunct">
           ,
          </span>
          <span class="mspace" style="margin-right: 0.1667em;">
          </span>
          <span class="mord mathnormal" style="margin-right: 0.109em;">
           N
          </span>
          <span class="mclose">
           )
          </span>
         </span>
        </span>
       </span>
      </span>
      即可！
     </li>
    </ul>
    <p>
     将二维数组优化为一维数组：
    </p>
    <pre><code class="prism language-C++">//
// Created by HUAWEI on 2025/2/6.
//
#include&lt;iostream&gt;
#include&lt;cstring&gt;
#include&lt;algorithm&gt;

using namespace std;

// 基础做法
//const int N = 1010;
//
//int n, m;
//int v[N], w[N];
//int f[N][N];
//
//int main() {
//    cin &gt;&gt; n &gt;&gt; m;
//    for (int i = 1; i &lt;= n; i++) { // 注意这个地方 i从1开始循环，否则会在下面带来数组越界！
//        cin &gt;&gt; v[i] &gt;&gt; w[i];
//    }
//
//    for (int i = 1; i &lt;= n; i++) {
//        for (int j = 1; j &lt;= m; j++) {
//            f[i][j] = f[i - 1][j];
//            if (j &gt;= v[i])
//                f[i][j] = max(f[i][j], f[i - 1][j - v[i]] + w[i]);
//        }
//    }
//
//    cout &lt;&lt; f[n][m] &lt;&lt; endl;
//    return 0;
//}

// 数组由二维变为一维
const int N = 1010;

int n, m;
int v[N], w[N];
int f[N];

int main() {
    cin &gt;&gt; n &gt;&gt; m;
    for (int i = 1; i &lt;= n; i++) {
        cin &gt;&gt; v[i] &gt;&gt; w[i];
    }

    for (int i = 1; i &lt;= n; i++) {
        for (int j = m; j &gt;= v[i]; j--) {
            // 思考一下为什么这个地方要倒序？ 如果 j 正序循环的话，下面这个状态转移方程的实际含义为：
            // f[i][j] = max(f[i][j], f[i][j - v[i]] + w[i]) 显然是不对的！
            f[j] = max(f[j], f[j - v[i]] + w[i]);
        }
    }

    cout &lt;&lt; f[m] &lt;&lt; endl;
    return 0;
}


</code></pre>
    <h4>
     <a id="_164">
     </a>
     完全背包问题
    </h4>
    <p>
     状态转移方程：(曲线救国~)
     <br/>
     <span class="katex--display">
      <span class="katex-display">
       <span class="katex">
        <span class="katex-mathml">
         f 
         
        
          ( 
         
        
          i 
         
        
          , 
         
        
          j 
         
        
          ) 
         
        
          = 
         
        
          m 
         
        
          a 
         
        
          x 
         
        
          { 
         
        
          f 
         
        
          ( 
         
        
          i 
         
        
          − 
         
        
          1 
         
        
          , 
         
        
          j 
         
        
          − 
         
        
          k 
         
        
          ⋅ 
         
        
          v 
         
        
          [ 
         
        
          i 
         
        
          ] 
         
        
          ) 
         
        
          + 
         
        
          w 
         
        
          ⋅ 
         
        
          w 
         
        
          [ 
         
        
          i 
         
        
          ] 
         
        
          } 
         
        
       
         f(i,j) = max\{f(i - 1, j - k \cdot v[i]) + w \cdot w[i]\}
        </span>
        <span class="katex-html">
         <span class="base">
          <span class="strut" style="height: 1em; vertical-align: -0.25em;">
          </span>
          <span class="mord mathnormal" style="margin-right: 0.1076em;">
           f
          </span>
          <span class="mopen">
           (
          </span>
          <span class="mord mathnormal">
           i
          </span>
          <span class="mpunct">
           ,
          </span>
          <span class="mspace" style="margin-right: 0.1667em;">
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0572em;">
           j
          </span>
          <span class="mclose">
           )
          </span>
          <span class="mspace" style="margin-right: 0.2778em;">
          </span>
          <span class="mrel">
           =
          </span>
          <span class="mspace" style="margin-right: 0.2778em;">
          </span>
         </span>
         <span class="base">
          <span class="strut" style="height: 1em; vertical-align: -0.25em;">
          </span>
          <span class="mord mathnormal">
           ma
          </span>
          <span class="mord mathnormal">
           x
          </span>
          <span class="mopen">
           {
           <!-- -->
          </span>
          <span class="mord mathnormal" style="margin-right: 0.1076em;">
           f
          </span>
          <span class="mopen">
           (
          </span>
          <span class="mord mathnormal">
           i
          </span>
          <span class="mspace" style="margin-right: 0.2222em;">
          </span>
          <span class="mbin">
           −
          </span>
          <span class="mspace" style="margin-right: 0.2222em;">
          </span>
         </span>
         <span class="base">
          <span class="strut" style="height: 0.854em; vertical-align: -0.1944em;">
          </span>
          <span class="mord">
           1
          </span>
          <span class="mpunct">
           ,
          </span>
          <span class="mspace" style="margin-right: 0.1667em;">
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0572em;">
           j
          </span>
          <span class="mspace" style="margin-right: 0.2222em;">
          </span>
          <span class="mbin">
           −
          </span>
          <span class="mspace" style="margin-right: 0.2222em;">
          </span>
         </span>
         <span class="base">
          <span class="strut" style="height: 0.6944em;">
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0315em;">
           k
          </span>
          <span class="mspace" style="margin-right: 0.2222em;">
          </span>
          <span class="mbin">
           ⋅
          </span>
          <span class="mspace" style="margin-right: 0.2222em;">
          </span>
         </span>
         <span class="base">
          <span class="strut" style="height: 1em; vertical-align: -0.25em;">
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0359em;">
           v
          </span>
          <span class="mopen">
           [
          </span>
          <span class="mord mathnormal">
           i
          </span>
          <span class="mclose">
           ])
          </span>
          <span class="mspace" style="margin-right: 0.2222em;">
          </span>
          <span class="mbin">
           +
          </span>
          <span class="mspace" style="margin-right: 0.2222em;">
          </span>
         </span>
         <span class="base">
          <span class="strut" style="height: 0.4445em;">
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0269em;">
           w
          </span>
          <span class="mspace" style="margin-right: 0.2222em;">
          </span>
          <span class="mbin">
           ⋅
          </span>
          <span class="mspace" style="margin-right: 0.2222em;">
          </span>
         </span>
         <span class="base">
          <span class="strut" style="height: 1em; vertical-align: -0.25em;">
          </span>
          <span class="mord mathnormal" style="margin-right: 0.0269em;">
           w
          </span>
          <span class="mopen">
           [
          </span>
          <span class="mord mathnormal">
           i
          </span>
          <span class="mclose">
           ]}
          </span>
         </span>
        </span>
       </span>
      </span>
     </span>
    </p>
    <p>
     基础做法（完全类比0-1背包问题即可）能通过14/16个数据
    </p>
    <pre><code class="prism language-C++">//
// Created by HUAWEI on 2025/2/6.
// 基础做法
//
#include&lt;iostream&gt;
#include&lt;cstring&gt;
#include&lt;algorithm&gt;

using namespace std;

const int N = 1010;

int n, m;
int v[N], w[N];
int f[N][N];

int main() {
    cin &gt;&gt; n &gt;&gt; m;
    for (int i = 1; i &lt;= n; i++) {
        cin &gt;&gt; v[i] &gt;&gt; w[i];
    }
    for (int i = 1; i &lt;= n; i++)
        for (int j = 1; j &lt;= m; j++)
            for (int k = 0; k * v[i] &lt;= j; k++) {
                f[i][j] = max(f[i][j], f[i - 1][j - k * v[i]] + k * w[i]);
            }

    cout &lt;&lt; f[n][m] &lt;&lt; endl;

    return 0;
}
</code></pre>
    <p>
     优化基础做法：
    </p>
    <p>
     公式推导
    </p>
    <p>
     <img alt="image-20250206214837291" src="https://i-blog.csdnimg.cn/img_convert/023bbdc65b4e9417075298eaf7a5ce0e.png"/>
    </p>
    <pre><code class="prism language-C++">//
// Created by HUAWEI on 2025/2/6.
// 优化做法
//
#include&lt;iostream&gt;
#include&lt;cstring&gt;
#include&lt;algorithm&gt;

using namespace std;

const int N = 1010;
int n, m;
int v[N], w[N];
int f[N][N];

int main() {
    cin &gt;&gt; n &gt;&gt; m;
    for (int i = 1; i &lt;= n; i++) {
        cin &gt;&gt; v[i] &gt;&gt; w[i];
    }
    for (int i = 1; i &lt;= n; i++)
        for (int j = 1; j &lt;= m; j++) {
            f[i][j] = f[i - 1][j]; // ??? 为什么如果不这样写，而采用注释中的写法，会有一个数据点过不去？
            // 答：保证 if 语句不成立的情况下的f[i][j]的赋值
            if (j &gt;= v[i])
                f[i][j] = max(f[i][j], f[i][j - v[i]] + w[i]);
//            if (j &gt;= v[i])
//                f[i][j] = max(f[i - 1][j], f[i][j - v[i]] + w[i]);
        }

    cout &lt;&lt; f[n][m] &lt;&lt; endl;

    return 0;
}
</code></pre>
    <p>
     0-1背包问题和完全背包问题动态转移方程比较：
    </p>
    <img alt="image-20250206222933250" src="https://i-blog.csdnimg.cn/img_convert/cfd1b078639dd760064dca0c56a8de14.png">
     <p>
      最终优化版（一维数组）
     </p>
     <pre><code class="prism language-C++">//
// Created by HUAWEI on 2025/2/6.
// 优化做法 + 1dim
//
#include&lt;iostream&gt;
#include&lt;cstring&gt;
#include&lt;algorithm&gt;

using namespace std;

const int N = 1010;
int n, m;
int v[N], w[N];
int f[N];

int main() {
    cin &gt;&gt; n &gt;&gt; m;
    for (int i = 1; i &lt;= n; i++) {
        cin &gt;&gt; v[i] &gt;&gt; w[i];
    }
    for (int i = 1; i &lt;= n; i++)
        for (int j = v[i]; j &lt;= m; j++) { // 此时不需要像0-1背包问题一样从后向前遍历了
            f[j] = max(f[j], f[j - v[i]] + w[i]);
        }

    cout &lt;&lt; f[m] &lt;&lt; endl;

    return 0;
}
</code></pre>
     <p>
      思考一下完全背包问题和多重背包问题的区别：
     </p>
     <ul>
      <li>
       完全背包问题的最大值（价值）可以用一个变量来存！
      </li>
      <li>
       多重背包问题每次求得的最大值是一个窗口内的，所以必须用单调队列来优化！
      </li>
     </ul>
     <h4>
      <a id="_294">
      </a>
      多重背包问题
     </h4>
     <p>
      暴力解法（类似于完全背包问题）：
     </p>
     <pre><code class="prism language-C++">//
// Created by HUAWEI on 2025/2/7.
//
#include&lt;iostream&gt;
#include&lt;cstring&gt;
#include&lt;algorithm&gt;

using namespace std;

const int N = 110;
int n, m;
int v[N], w[N], s[N];
int f[N][N];

int main() {
    cin &gt;&gt; n &gt;&gt; m;
    for (int i = 1; i &lt;= n; i++) {
        cin &gt;&gt; v[i] &gt;&gt; w[i] &gt;&gt; s[i];
    }
    for (int i = 1; i &lt;= n; i++)
        for (int j = 1; j &lt;= m; j++)
            for (int k = 0; k &lt;= s[i] and k * v[i] &lt;= j; k++) {// 注意这里和完全背包问题的区别：多了一个约束条件
                f[i][j] = max(f[i][j], f[i - 1][j - k * v[i]] + k * w[i]);
            }
    cout &lt;&lt; f[n][m] &lt;&lt; endl;


    return 0;
}
</code></pre>
     <p>
      为什么不能用优化完全背包问题的做法来优化多重背包问题？
     </p>
     <ul>
      <li>
       研究下面这两个公式
      </li>
     </ul>
     <p>
      <img alt="image-20250207205013284" src="https://i-blog.csdnimg.cn/img_convert/339622e1f7bad7df60d493a1a1d14d5d.png"/>
     </p>
     <ul>
      <li>
       原因是max操作无法作减法！！！
      </li>
     </ul>
     <p>
      二进制优化 + 一维数组处理：
     </p>
     <pre><code class="prism language-C++">//
// Created by HUAWEI on 2025/2/7.
//
#include&lt;iostream&gt;
#include&lt;cstring&gt;
#include&lt;algorithm&gt;

using namespace std;

const int N = 11010; // new n = N * logS_max
int n, m;
int v[N], w[N];
int f[N]; // 将二维数组优化为一维数组

int main() {
    cin &gt;&gt; n &gt;&gt; m;
    int cnt = 0; // 新标号
    for (int i = 1; i &lt;= n; i++) {
        int a, b, c;
        cin &gt;&gt; a &gt;&gt; b &gt;&gt; c;
        for (int k = 1; k &lt;= c; k *= 2) {
            cnt++;
            v[cnt] = a * k;
            w[cnt] = b * k;
            c = c - k;
        }
        if (c &gt; 0) {
            cnt++;
            v[cnt] = a * c;
            w[cnt] = b * c;
        }
    }
    n = cnt; // 更新一下 n
    for (int i = 1; i &lt;= n; i++)
        for (int j = m; j &gt;= v[i]; j--) {
            f[j] = max(f[j], f[j - v[i]] + w[i]);
        }

    cout &lt;&lt; f[m] &lt;&lt; endl;

    return 0;
}
</code></pre>
     <h4>
      <a id="_385">
      </a>
      分组背包问题
     </h4>
     <img alt="image-20250208004303999" src="https://i-blog.csdnimg.cn/img_convert/8439d8dc334cb005e9b70158e7aefb26.png">
      <p>
       在把二维数组优化为一维时，需要注意的事项：
      </p>
      <ul>
       <li>
        如果在枚举时用的是上一层的数据，那么就从大到小枚举体积；如果用的是本层的数据，那就从小到大枚举体积。
       </li>
      </ul>
      <pre><code class="prism language-C++">//
// Created by HUAWEI on 2025/2/8.
//
#include&lt;iostream&gt;
#include&lt;cstring&gt;
#include&lt;algorithm&gt;

using namespace std;

const int N = 110;
int s[N], v[N][N], w[N][N];
int f[N]; // 将二维数组优化为一维数组，降低空间复杂度！
int n, m;

int main() {
    cin &gt;&gt; n &gt;&gt; m;
    for (int i = 1; i &lt;= n; i++) {
        cin &gt;&gt; s[i];
        for (int j = 1; j &lt;= s[i]; j++) {
            cin &gt;&gt; v[i][j] &gt;&gt; w[i][j];
        }
    }
    for (int i = 1; i &lt;= n; i++)
        for (int j = m; j &gt;= 0; j--)
            for (int k = 0; k &lt;= s[i]; k++) {
                // 在第i组物品中选择第几个
                if (j &gt;= v[i][k])
                    f[j] = max(f[j], f[j - v[i][k]] + w[i][k]);
            }

    cout &lt;&lt; f[m] &lt;&lt; endl;
    return 0;
}
</code></pre>
      <h3>
       <a id="DP_429">
       </a>
       二、线性DP
      </h3>
      <p>
       线性DP：递推方程明显的线性关系
      </p>
      <h4>
       <a id="_433">
       </a>
       数字三角形
      </h4>
      <p>
       <img alt="image-20250208142010850" src="https://i-blog.csdnimg.cn/img_convert/b0bec075776710feb96ee360040c4da9.png"/>
      </p>
      <p>
       如何设置DP问题中的下标？
      </p>
      <ul>
       <li>
        一般是从1开始，因为运算中可能会涉及
        <code>
         f[i - 1]
        </code>
       </li>
      </ul>
      <p>
       动态规划的时间复杂度：
      </p>
      <ul>
       <li>
        <span class="katex--inline">
         <span class="katex">
          <span class="katex-mathml">
           O 
         
        
          ( 
         
        
          状态数 
         
        
          × 
         
        
          转移数 
         
        
          ) 
         
        
       
         O(状态数 \times 转移数)
          </span>
          <span class="katex-html">
           <span class="base">
            <span class="strut" style="height: 1em; vertical-align: -0.25em;">
            </span>
            <span class="mord mathnormal" style="margin-right: 0.0278em;">
             O
            </span>
            <span class="mopen">
             (
            </span>
            <span class="mord cjk_fallback">
             状态数
            </span>
            <span class="mspace" style="margin-right: 0.2222em;">
            </span>
            <span class="mbin">
             ×
            </span>
            <span class="mspace" style="margin-right: 0.2222em;">
            </span>
           </span>
           <span class="base">
            <span class="strut" style="height: 1em; vertical-align: -0.25em;">
            </span>
            <span class="mord cjk_fallback">
             转移数
            </span>
            <span class="mclose">
             )
            </span>
           </span>
          </span>
         </span>
        </span>
       </li>
      </ul>
      <pre><code class="prism language-C++">//
// Created by HUAWEI on 2025/2/8.
//
#include&lt;iostream&gt;
#include&lt;cstring&gt;
#include&lt;algorithm&gt;

using namespace std;

const int N = 510, inf = 0x3f3f3f3f;
int a[N][N];
int f[N][N];
int n;

int main() {
    cin &gt;&gt; n;
    for (int i = 1; i &lt;= n; i++)
        for (int j = 1; j &lt;= i; j++) {
            cin &gt;&gt; a[i][j];
        }
    for (int i = 0; i &lt;= n; i++)
        for (int j = 0; j &lt;= n; j++) {
            f[i][j] = -inf;
        }
    f[1][1] = a[1][1];
    for (int i = 2; i &lt;= n; i++)
        for (int j = 1; j &lt;= n; j++) {
            f[i][j] = max(f[i - 1][j], f[i - 1][j - 1]) + a[i][j];
        }
    int res = -inf;
    for (int j = 1; j &lt;= n; j++)
        res = max(res, f[n][j]);
    cout &lt;&lt; res &lt;&lt; endl;
    return 0;
}
</code></pre>
      <h4>
       <a id="_483">
       </a>
       最长上升子序列
      </h4>
      <p>
       <img alt="image-20250209200532135" src="https://i-blog.csdnimg.cn/img_convert/b9c534cefb81b7282e0bc445f02a9d03.png"/>
      </p>
      <p>
       <strong>
        基础代码：
       </strong>
      </p>
      <pre><code class="prism language-C++">//
// Created by HUAWEI on 2025/2/9.
//
#include&lt;iostream&gt;
#include&lt;algorithm&gt;
#include&lt;cstring&gt;

using namespace std;

const int N = 1010;

int n;
int a[N], f[N];


int main() {
    cin &gt;&gt; n;
    for (int i = 1; i &lt;= n; i++)
        cin &gt;&gt; a[i];
    for (int i = 1; i &lt;= n; i++) {
        f[i] = 1;
        for (int j = 1; j &lt;= i - 1; j++) {
            if (a[j] &lt; a[i])
                f[i] = max(f[i], f[j] + 1);
        }
    }

    int res = -1e9;
    for (int i = 1; i &lt;= n; i++) {
        res = max(res, f[i]);
    }

    cout &lt;&lt; res &lt;&lt; endl;
    return 0;
}
</code></pre>
      <p>
       上述代码时间复杂度：
       <span class="katex--inline">
        <span class="katex">
         <span class="katex-mathml">
          O 
        
       
         ( 
        
        
        
          n 
         
        
          2 
         
        
       
         ) 
        
       
      
        O(n^2)
         </span>
         <span class="katex-html">
          <span class="base">
           <span class="strut" style="height: 1.0641em; vertical-align: -0.25em;">
           </span>
           <span class="mord mathnormal" style="margin-right: 0.0278em;">
            O
           </span>
           <span class="mopen">
            (
           </span>
           <span class="mord">
            <span class="mord mathnormal">
             n
            </span>
            <span class="msupsub">
             <span class="vlist-t">
              <span class="vlist-r">
               <span class="vlist" style="height: 0.8141em;">
                <span class="" style="top: -3.063em; margin-right: 0.05em;">
                 <span class="pstrut" style="height: 2.7em;">
                 </span>
                 <span class="sizing reset-size6 size3 mtight">
                  <span class="mord mtight">
                   2
                  </span>
                 </span>
                </span>
               </span>
              </span>
             </span>
            </span>
           </span>
           <span class="mclose">
            )
           </span>
          </span>
         </span>
        </span>
       </span>
      </p>
      <p>
       记录最长上升子序列的方案代码：使用一个数组记录一下转移过程中上个子序列的最后数字的序号即可，略
      </p>
      <p>
       <strong>
        优化方法：
       </strong>
      </p>
      <img alt="image-20250218170548998" src="https://i-blog.csdnimg.cn/img_convert/2633b563f2c46f7e962fd60fc22573f3.png">
       <p>
        横坐标表示以x长度的最长上升子序列，纵坐标表示该序列结尾的值。
       </p>
       <h5>
        <a id="_537">
        </a>
        补充：整数二分
       </h5>
       <img alt="image-20250218175226928" src="https://i-blog.csdnimg.cn/img_convert/04013631e5810c02b3f2663662f23fa3.png"/>
       <p>
        如何理解：
       </p>
       <img alt="image-20250218175502038" src="https://i-blog.csdnimg.cn/img_convert/958acf8f688926227645b028ac22209c.png"/>
       <p>
        这里我尝试不用y总的方法，而是用程序设计助教的方法去做~
       </p>
       <pre><code class="prism language-C++">//
// Created by HUAWEI on 2025/2/18.
// 注意这个题目中整数二分法的使用
//
#include&lt;iostream&gt;
#include&lt;cstring&gt;
#include&lt;algorithm&gt;

using namespace std;

const int N = 1e5 + 10;
int a[N];
int q[N]; // 动态更新不同长度最长上升子序列的末值
int n;


int main() {
    scanf("%d", &amp;n);
    for (int i = 1; i &lt;= n; i++) {
        scanf("%d", &amp;a[i]);
    }
    int len = 0; // 最大长度
    for (int i = 1; i &lt;= n; i++) {
        int l = 0, r = len + 1;
        while (r - l &gt; 1) {
            // 整数二分
            int mid = (r + l) &gt;&gt; 1;
            if (q[mid] &gt;= a[i])
                r = mid;
            else
                l = mid;
        }
        len = max(len, l + 1);
        q[l + 1] = a[i];
    }
    cout &lt;&lt; len &lt;&lt; endl;
    return 0;
}
</code></pre>
       <h4>
        <a id="_592">
        </a>
        最长公共子序列
       </h4>
       <p>
        <img alt="image-20250209232439725" src="https://i-blog.csdnimg.cn/img_convert/e9c032f048278d6b4d21b502114a8aa2.png"/>
       </p>
       <p>
        如何理解00，01，10，11？
       </p>
       <ul>
        <li>
         不选
         <code>
          a[i]
         </code>
         不选
         <code>
          b[j]
         </code>
        </li>
        <li>
         不选
         <code>
          a[i]
         </code>
         选
         <code>
          b[j]
         </code>
        </li>
        <li>
         …
        </li>
       </ul>
       <p>
        代码如下：
       </p>
       <pre><code class="prism language-C++">//
// Created by HUAWEI on 2025/2/9.
//
#include&lt;iostream&gt;
#include&lt;cstring&gt;
#include&lt;algorithm&gt;

using namespace std;

const int N = 1010;
char a[N], b[N];
int f[N][N];
int n, m;

int main() {
    scanf("%d%d", &amp;n, &amp;m);
    scanf("%s%s", a + 1, b + 1); // 注意细节，从第一个字符的位置读入

    for (int i = 1; i &lt;= n; i++)
        for (int j = 1; j &lt;= m; j++) {
            f[i][j] = max(f[i - 1][j], f[i][j - 1]);
            if (a[i] == b[j])
                f[i][j] = max(f[i][j], f[i - 1][j - 1] + 1);
        }

    printf("%d\n", f[n][m]);

    return 0;
}
</code></pre>
       <h4>
        <a id="_636">
        </a>
        最短编辑距离
       </h4>
       <blockquote>
        <p>
         补充：
        </p>
        <p>
         如何理解DP？
        </p>
        <ul>
         <li>
          DP是对于暴搜的一种优化，每个状态表示很多个情况！而暴搜是对于每种情况进行简单地枚举。
         </li>
         <li>
          以空间换时间！
         </li>
        </ul>
       </blockquote>
       <p>
        分析：
        <br/>
        <img alt="image-20250218204130069" src="https://i-blog.csdnimg.cn/img_convert/cdf4a93f0c493954aed26f784dd25ab6.png"/>
       </p>
       <p>
        代码：
       </p>
       <pre><code class="prism language-C++">//
// Created by HUAWEI on 2025/2/18.
//
#include&lt;iostream&gt;
#include&lt;cstring&gt;
#include&lt;algorithm&gt;

using namespace std;

const int N = 1010;

int n, m;
char a[N], b[N];
int f[N][N];

int main() {
    scanf("%d%s", &amp;n, a + 1);
    scanf("%d%s", &amp;m, b + 1);

    // 初始化f数组
    for (int i = 1; i &lt;= n; i++) {
        f[i][0] = i;
    }
    for (int j = 1; j &lt;= m; j++) {
        f[0][j] = j;
    }

    for (int i = 1; i &lt;= n; i++)
        for (int j = 1; j &lt;= m; j++) {
            f[i][j] = min(f[i - 1][j] + 1, f[i][j - 1] + 1);
            if (a[i] == b[j])
                f[i][j] = min(f[i][j], f[i - 1][j - 1]);
            else
                f[i][j] = min(f[i][j], f[i - 1][j - 1] + 1);
        }

    cout &lt;&lt; f[n][m] &lt;&lt; endl;


    return 0;
}
</code></pre>
       <h4>
        <a id="_694">
        </a>
        编辑距离
       </h4>
       <p>
        代码：
       </p>
       <pre><code class="prism language-C++">//
// Created by HUAWEI on 2025/2/19.
//
#include&lt;iostream&gt;
#include&lt;cstring&gt;
#include&lt;algorithm&gt;

using namespace std;


const int N = 1010, M = 20;

char str[N][M];
int f[M][M];
int n, m;

int edit_len(char a[], char b[]) {
    // int f[M][M];
    int la = strlen(a + 1), lb = strlen(b + 1);
    // 初始化
    for (int i = 1; i &lt;= la; i++)
        f[i][0] = i;
    for (int j = 1; j &lt;= lb; j++)
        f[0][j] = j;

    for (int i = 1; i &lt;= la; i++)
        for (int j = 1; j &lt;= lb; j++) {
            f[i][j] = min(f[i - 1][j] + 1, f[i][j - 1] + 1);
            f[i][j] = min(f[i][j], f[i - 1][j - 1] + (a[i] != b[j]));
        }
    return f[la][lb];
}


int main() {
    scanf("%d%d", &amp;n, &amp;m);
    for (int i = 1; i &lt;= n; i++)
        scanf("%s", str[i] + 1);

    for (int i = 1; i &lt;= m; i++) {
        char s[M];
        int len;
        scanf("%s%d", s + 1, &amp;len);

        int res = 0;
        for (int j = 1; j &lt;= n; j++) {
            if (edit_len(str[j], s) &lt;= len) {
                res++;
            }
        }
        printf("%d\n", res);
    }

    return 0;
}
</code></pre>
       <p>
        注：
       </p>
       <ul>
        <li>
         我遇到了一个很抽象的问题，如果将f构建在edit_len函数里面，就不能通过；如果构建在全局，就可以通过；
        </li>
        <li>
         怀疑是acwing OJ自身的问题！
        </li>
       </ul>
       <h3>
        <a id="DP_761">
        </a>
        三、区间DP
       </h3>
       <h4>
        <a id="_763">
        </a>
        石子合并
       </h4>
       <p>
        状态转移方程：
       </p>
       <img alt="image-20250215162437092" src="https://i-blog.csdnimg.cn/img_convert/38684843912a8f50e6a8fe5f6b243bf0.png"/>
       <p>
        注：
       </p>
       <ul>
        <li>
         s[N]:前缀数组
        </li>
       </ul>
       <p>
        需要想一下如何循环~
       </p>
       <p>
        动态规划的递归写法——记忆化搜索
       </p>
       <p>
        区间DP的一般模式：
       </p>
       <ol>
        <li>
         先循环区间长度从小到大
        </li>
        <li>
         在循环区间的左端点
        </li>
       </ol>
       <pre><code class="prism language-C++">//
// Created by HUAWEI on 2025/2/15.
//
#include&lt;iostream&gt;
#include&lt;cstring&gt;
#include&lt;algorithm&gt;

using namespace std;

const int N = 310;

int s[N];
int f[N][N];
int n;


int main() {
    cin &gt;&gt; n;
    for (int i = 1; i &lt;= n; i++)
        cin &gt;&gt; s[i];
    for (int i = 1; i &lt;= n; i++)
        s[i] += s[i - 1]; // 前缀数组

    for (int len = 1; len &lt;= n - 1; len++)
        for (int i = 1; i &lt;= n - len; i++) {
            int l = i;
            int r = i + len;
            f[l][r] = 1e9;
            for (int k = l; k &lt;= r - 1; k++) {
                f[l][r] = min(f[l][r], f[l][k] + f[k + 1][r] + s[r] - s[l - 1]);
            }
        }

    cout &lt;&lt; f[1][n] &lt;&lt; endl;
    return 0;
}
</code></pre>
       <h3>
        <a id="DP_821">
        </a>
        四、计数类DP
       </h3>
       <h4>
        <a id="_823">
        </a>
        整数划分
       </h4>
       <p>
        法一：
       </p>
       <p>
        完全背包问题的思想
       </p>
       <img alt="image-20250220162121699" src="https://i-blog.csdnimg.cn/img_convert/a72ad214ce51c83cb3559a786b968297.png"/>
       <p>
        如何理解
        <span class="katex--inline">
         <span class="katex">
          <span class="katex-mathml">
           f 
        
       
         [ 
        
       
         i 
        
       
         ] 
        
       
         [ 
        
       
         j 
        
       
         ] 
        
       
      
        f[i][j]
          </span>
          <span class="katex-html">
           <span class="base">
            <span class="strut" style="height: 1em; vertical-align: -0.25em;">
            </span>
            <span class="mord mathnormal" style="margin-right: 0.1076em;">
             f
            </span>
            <span class="mopen">
             [
            </span>
            <span class="mord mathnormal">
             i
            </span>
            <span class="mclose">
             ]
            </span>
            <span class="mopen">
             [
            </span>
            <span class="mord mathnormal" style="margin-right: 0.0572em;">
             j
            </span>
            <span class="mclose">
             ]
            </span>
           </span>
          </span>
         </span>
        </span>
        ?
       </p>
       <ul>
        <li>
         前
         <span class="katex--inline">
          <span class="katex">
           <span class="katex-mathml">
            i 
         
        
       
         i
           </span>
           <span class="katex-html">
            <span class="base">
             <span class="strut" style="height: 0.6595em;">
             </span>
             <span class="mord mathnormal">
              i
             </span>
            </span>
           </span>
          </span>
         </span>
         个数，加和的值为
         <span class="katex--inline">
          <span class="katex">
           <span class="katex-mathml">
            j 
         
        
       
         j
           </span>
           <span class="katex-html">
            <span class="base">
             <span class="strut" style="height: 0.854em; vertical-align: -0.1944em;">
             </span>
             <span class="mord mathnormal" style="margin-right: 0.0572em;">
              j
             </span>
            </span>
           </span>
          </span>
         </span>
        </li>
        <li>
         状态转移方程：
         <span class="katex--inline">
          <span class="katex">
           <span class="katex-mathml">
            f 
         
        
          ( 
         
        
          i 
         
        
          , 
         
        
          j 
         
        
          ) 
         
        
          = 
         
        
          f 
         
        
          ( 
         
        
          i 
         
        
          − 
         
        
          1 
         
        
          , 
         
        
          j 
         
        
          ) 
         
        
          + 
         
        
          f 
         
        
          ( 
         
        
          i 
         
        
          − 
         
        
          1 
         
        
          , 
         
        
          j 
         
        
          − 
         
        
          i 
         
        
          ) 
         
        
          + 
         
        
          . 
         
        
          . 
         
        
          . 
         
        
          + 
         
        
          f 
         
        
          ( 
         
        
          i 
         
        
          − 
         
        
          1 
         
        
          , 
         
        
          j 
         
        
          − 
         
        
          s 
         
        
          i 
         
        
          ) 
         
        
       
         f(i,j) = f(i - 1, j) + f(i - 1, j - i) + ... + f(i - 1, j - s i)
           </span>
           <span class="katex-html">
            <span class="base">
             <span class="strut" style="height: 1em; vertical-align: -0.25em;">
             </span>
             <span class="mord mathnormal" style="margin-right: 0.1076em;">
              f
             </span>
             <span class="mopen">
              (
             </span>
             <span class="mord mathnormal">
              i
             </span>
             <span class="mpunct">
              ,
             </span>
             <span class="mspace" style="margin-right: 0.1667em;">
             </span>
             <span class="mord mathnormal" style="margin-right: 0.0572em;">
              j
             </span>
             <span class="mclose">
              )
             </span>
             <span class="mspace" style="margin-right: 0.2778em;">
             </span>
             <span class="mrel">
              =
             </span>
             <span class="mspace" style="margin-right: 0.2778em;">
             </span>
            </span>
            <span class="base">
             <span class="strut" style="height: 1em; vertical-align: -0.25em;">
             </span>
             <span class="mord mathnormal" style="margin-right: 0.1076em;">
              f
             </span>
             <span class="mopen">
              (
             </span>
             <span class="mord mathnormal">
              i
             </span>
             <span class="mspace" style="margin-right: 0.2222em;">
             </span>
             <span class="mbin">
              −
             </span>
             <span class="mspace" style="margin-right: 0.2222em;">
             </span>
            </span>
            <span class="base">
             <span class="strut" style="height: 1em; vertical-align: -0.25em;">
             </span>
             <span class="mord">
              1
             </span>
             <span class="mpunct">
              ,
             </span>
             <span class="mspace" style="margin-right: 0.1667em;">
             </span>
             <span class="mord mathnormal" style="margin-right: 0.0572em;">
              j
             </span>
             <span class="mclose">
              )
             </span>
             <span class="mspace" style="margin-right: 0.2222em;">
             </span>
             <span class="mbin">
              +
             </span>
             <span class="mspace" style="margin-right: 0.2222em;">
             </span>
            </span>
            <span class="base">
             <span class="strut" style="height: 1em; vertical-align: -0.25em;">
             </span>
             <span class="mord mathnormal" style="margin-right: 0.1076em;">
              f
             </span>
             <span class="mopen">
              (
             </span>
             <span class="mord mathnormal">
              i
             </span>
             <span class="mspace" style="margin-right: 0.2222em;">
             </span>
             <span class="mbin">
              −
             </span>
             <span class="mspace" style="margin-right: 0.2222em;">
             </span>
            </span>
            <span class="base">
             <span class="strut" style="height: 0.854em; vertical-align: -0.1944em;">
             </span>
             <span class="mord">
              1
             </span>
             <span class="mpunct">
              ,
             </span>
             <span class="mspace" style="margin-right: 0.1667em;">
             </span>
             <span class="mord mathnormal" style="margin-right: 0.0572em;">
              j
             </span>
             <span class="mspace" style="margin-right: 0.2222em;">
             </span>
             <span class="mbin">
              −
             </span>
             <span class="mspace" style="margin-right: 0.2222em;">
             </span>
            </span>
            <span class="base">
             <span class="strut" style="height: 1em; vertical-align: -0.25em;">
             </span>
             <span class="mord mathnormal">
              i
             </span>
             <span class="mclose">
              )
             </span>
             <span class="mspace" style="margin-right: 0.2222em;">
             </span>
             <span class="mbin">
              +
             </span>
             <span class="mspace" style="margin-right: 0.2222em;">
             </span>
            </span>
            <span class="base">
             <span class="strut" style="height: 0.6667em; vertical-align: -0.0833em;">
             </span>
             <span class="mord">
              ...
             </span>
             <span class="mspace" style="margin-right: 0.2222em;">
             </span>
             <span class="mbin">
              +
             </span>
             <span class="mspace" style="margin-right: 0.2222em;">
             </span>
            </span>
            <span class="base">
             <span class="strut" style="height: 1em; vertical-align: -0.25em;">
             </span>
             <span class="mord mathnormal" style="margin-right: 0.1076em;">
              f
             </span>
             <span class="mopen">
              (
             </span>
             <span class="mord mathnormal">
              i
             </span>
             <span class="mspace" style="margin-right: 0.2222em;">
             </span>
             <span class="mbin">
              −
             </span>
             <span class="mspace" style="margin-right: 0.2222em;">
             </span>
            </span>
            <span class="base">
             <span class="strut" style="height: 0.854em; vertical-align: -0.1944em;">
             </span>
             <span class="mord">
              1
             </span>
             <span class="mpunct">
              ,
             </span>
             <span class="mspace" style="margin-right: 0.1667em;">
             </span>
             <span class="mord mathnormal" style="margin-right: 0.0572em;">
              j
             </span>
             <span class="mspace" style="margin-right: 0.2222em;">
             </span>
             <span class="mbin">
              −
             </span>
             <span class="mspace" style="margin-right: 0.2222em;">
             </span>
            </span>
            <span class="base">
             <span class="strut" style="height: 1em; vertical-align: -0.25em;">
             </span>
             <span class="mord mathnormal">
              s
             </span>
             <span class="mord mathnormal">
              i
             </span>
             <span class="mclose">
              )
             </span>
            </span>
           </span>
          </span>
         </span>
         (其实隐含的就是第
         <span class="katex--inline">
          <span class="katex">
           <span class="katex-mathml">
            i 
         
        
       
         i
           </span>
           <span class="katex-html">
            <span class="base">
             <span class="strut" style="height: 0.6595em;">
             </span>
             <span class="mord mathnormal">
              i
             </span>
            </span>
           </span>
          </span>
         </span>
         个数选几个)
        </li>
       </ul>
       <p>
        如何进行优化？
        <br/>
        <span class="katex--display">
         <span class="katex-display">
          <span class="katex">
           <span class="katex-mathml">
            f 
         
        
          ( 
         
        
          i 
         
        
          , 
         
        
          j 
         
        
          ) 
         
        
          = 
         
        
          f 
         
        
          ( 
         
        
          i 
         
        
          − 
         
        
          1 
         
        
          , 
         
        
          j 
         
        
          ) 
         
        
          + 
         
        
          f 
         
        
          ( 
         
        
          i 
         
        
          − 
         
        
          1 
         
        
          , 
         
        
          j 
         
        
          − 
         
        
          i 
         
        
          ) 
         
        
          + 
         
        
          f 
         
        
          ( 
         
        
          i 
         
        
          − 
         
        
          1 
         
        
          , 
         
        
          j 
         
        
          − 
         
        
          2 
         
        
          i 
         
        
          ) 
         
        
          . 
         
        
          . 
         
        
          . 
         
        
          + 
         
        
          f 
         
        
          ( 
         
        
          i 
         
        
          − 
         
        
          1 
         
        
          , 
         
        
          j 
         
        
          − 
         
        
          s 
         
        
          i 
         
        
          ) 
         
         
        
          f 
         
        
          ( 
         
        
          i 
         
        
          , 
         
        
          j 
         
        
          − 
         
        
          i 
         
        
          ) 
         
        
          = 
         
        
          f 
         
        
          ( 
         
        
          i 
         
        
          − 
         
        
          1 
         
        
          , 
         
        
          j 
         
        
          − 
         
        
          i 
         
        
          ) 
         
        
          + 
         
        
          f 
         
        
          ( 
         
        
          i 
         
        
          − 
         
        
          1 
         
        
          , 
         
        
          j 
         
        
          − 
         
        
          2 
         
        
          i 
         
        
          ) 
         
        
          + 
         
        
          . 
         
        
          . 
         
        
          . 
         
        
          + 
         
        
          f 
         
        
          ( 
         
        
          j 
         
        
          − 
         
        
          s 
         
        
          i 
         
        
          ) 
         
        
       
         f(i,j) = f(i - 1, j) + f(i - 1, j - i) + f(i - 1, j - 2i) ... + f(i - 1, j - s i) \\ f(i, j - i) = f(i - 1, j - i) + f(i - 1, j - 2i) + ... + f(j - si)
           </span>
           <span class="katex-html">
            <span class="base">
             <span class="strut" style="height: 1em; vertical-align: -0.25em;">
             </span>
             <span class="mord mathnormal" style="margin-right: 0.1076em;">
              f
             </span>
             <span class="mopen">
              (
             </span>
             <span class="mord mathnormal">
              i
             </span>
             <span class="mpunct">
              ,
             </span>
             <span class="mspace" style="margin-right: 0.1667em;">
             </span>
             <span class="mord mathnormal" style="margin-right: 0.0572em;">
              j
             </span>
             <span class="mclose">
              )
             </span>
             <span class="mspace" style="margin-right: 0.2778em;">
             </span>
             <span class="mrel">
              =
             </span>
             <span class="mspace" style="margin-right: 0.2778em;">
             </span>
            </span>
            <span class="base">
             <span class="strut" style="height: 1em; vertical-align: -0.25em;">
             </span>
             <span class="mord mathnormal" style="margin-right: 0.1076em;">
              f
             </span>
             <span class="mopen">
              (
             </span>
             <span class="mord mathnormal">
              i
             </span>
             <span class="mspace" style="margin-right: 0.2222em;">
             </span>
             <span class="mbin">
              −
             </span>
             <span class="mspace" style="margin-right: 0.2222em;">
             </span>
            </span>
            <span class="base">
             <span class="strut" style="height: 1em; vertical-align: -0.25em;">
             </span>
             <span class="mord">
              1
             </span>
             <span class="mpunct">
              ,
             </span>
             <span class="mspace" style="margin-right: 0.1667em;">
             </span>
             <span class="mord mathnormal" style="margin-right: 0.0572em;">
              j
             </span>
             <span class="mclose">
              )
             </span>
             <span class="mspace" style="margin-right: 0.2222em;">
             </span>
             <span class="mbin">
              +
             </span>
             <span class="mspace" style="margin-right: 0.2222em;">
             </span>
            </span>
            <span class="base">
             <span class="strut" style="height: 1em; vertical-align: -0.25em;">
             </span>
             <span class="mord mathnormal" style="margin-right: 0.1076em;">
              f
             </span>
             <span class="mopen">
              (
             </span>
             <span class="mord mathnormal">
              i
             </span>
             <span class="mspace" style="margin-right: 0.2222em;">
             </span>
             <span class="mbin">
              −
             </span>
             <span class="mspace" style="margin-right: 0.2222em;">
             </span>
            </span>
            <span class="base">
             <span class="strut" style="height: 0.854em; vertical-align: -0.1944em;">
             </span>
             <span class="mord">
              1
             </span>
             <span class="mpunct">
              ,
             </span>
             <span class="mspace" style="margin-right: 0.1667em;">
             </span>
             <span class="mord mathnormal" style="margin-right: 0.0572em;">
              j
             </span>
             <span class="mspace" style="margin-right: 0.2222em;">
             </span>
             <span class="mbin">
              −
             </span>
             <span class="mspace" style="margin-right: 0.2222em;">
             </span>
            </span>
            <span class="base">
             <span class="strut" style="height: 1em; vertical-align: -0.25em;">
             </span>
             <span class="mord mathnormal">
              i
             </span>
             <span class="mclose">
              )
             </span>
             <span class="mspace" style="margin-right: 0.2222em;">
             </span>
             <span class="mbin">
              +
             </span>
             <span class="mspace" style="margin-right: 0.2222em;">
             </span>
            </span>
            <span class="base">
             <span class="strut" style="height: 1em; vertical-align: -0.25em;">
             </span>
             <span class="mord mathnormal" style="margin-right: 0.1076em;">
              f
             </span>
             <span class="mopen">
              (
             </span>
             <span class="mord mathnormal">
              i
             </span>
             <span class="mspace" style="margin-right: 0.2222em;">
             </span>
             <span class="mbin">
              −
             </span>
             <span class="mspace" style="margin-right: 0.2222em;">
             </span>
            </span>
            <span class="base">
             <span class="strut" style="height: 0.854em; vertical-align: -0.1944em;">
             </span>
             <span class="mord">
              1
             </span>
             <span class="mpunct">
              ,
             </span>
             <span class="mspace" style="margin-right: 0.1667em;">
             </span>
             <span class="mord mathnormal" style="margin-right: 0.0572em;">
              j
             </span>
             <span class="mspace" style="margin-right: 0.2222em;">
             </span>
             <span class="mbin">
              −
             </span>
             <span class="mspace" style="margin-right: 0.2222em;">
             </span>
            </span>
            <span class="base">
             <span class="strut" style="height: 1em; vertical-align: -0.25em;">
             </span>
             <span class="mord">
              2
             </span>
             <span class="mord mathnormal">
              i
             </span>
             <span class="mclose">
              )
             </span>
             <span class="mord">
              ...
             </span>
             <span class="mspace" style="margin-right: 0.2222em;">
             </span>
             <span class="mbin">
              +
             </span>
             <span class="mspace" style="margin-right: 0.2222em;">
             </span>
            </span>
            <span class="base">
             <span class="strut" style="height: 1em; vertical-align: -0.25em;">
             </span>
             <span class="mord mathnormal" style="margin-right: 0.1076em;">
              f
             </span>
             <span class="mopen">
              (
             </span>
             <span class="mord mathnormal">
              i
             </span>
             <span class="mspace" style="margin-right: 0.2222em;">
             </span>
             <span class="mbin">
              −
             </span>
             <span class="mspace" style="margin-right: 0.2222em;">
             </span>
            </span>
            <span class="base">
             <span class="strut" style="height: 0.854em; vertical-align: -0.1944em;">
             </span>
             <span class="mord">
              1
             </span>
             <span class="mpunct">
              ,
             </span>
             <span class="mspace" style="margin-right: 0.1667em;">
             </span>
             <span class="mord mathnormal" style="margin-right: 0.0572em;">
              j
             </span>
             <span class="mspace" style="margin-right: 0.2222em;">
             </span>
             <span class="mbin">
              −
             </span>
             <span class="mspace" style="margin-right: 0.2222em;">
             </span>
            </span>
            <span class="base">
             <span class="strut" style="height: 1em; vertical-align: -0.25em;">
             </span>
             <span class="mord mathnormal">
              s
             </span>
             <span class="mord mathnormal">
              i
             </span>
             <span class="mclose">
              )
             </span>
            </span>
            <span class="mspace newline">
            </span>
            <span class="base">
             <span class="strut" style="height: 1em; vertical-align: -0.25em;">
             </span>
             <span class="mord mathnormal" style="margin-right: 0.1076em;">
              f
             </span>
             <span class="mopen">
              (
             </span>
             <span class="mord mathnormal">
              i
             </span>
             <span class="mpunct">
              ,
             </span>
             <span class="mspace" style="margin-right: 0.1667em;">
             </span>
             <span class="mord mathnormal" style="margin-right: 0.0572em;">
              j
             </span>
             <span class="mspace" style="margin-right: 0.2222em;">
             </span>
             <span class="mbin">
              −
             </span>
             <span class="mspace" style="margin-right: 0.2222em;">
             </span>
            </span>
            <span class="base">
             <span class="strut" style="height: 1em; vertical-align: -0.25em;">
             </span>
             <span class="mord mathnormal">
              i
             </span>
             <span class="mclose">
              )
             </span>
             <span class="mspace" style="margin-right: 0.2778em;">
             </span>
             <span class="mrel">
              =
             </span>
             <span class="mspace" style="margin-right: 0.2778em;">
             </span>
            </span>
            <span class="base">
             <span class="strut" style="height: 1em; vertical-align: -0.25em;">
             </span>
             <span class="mord mathnormal" style="margin-right: 0.1076em;">
              f
             </span>
             <span class="mopen">
              (
             </span>
             <span class="mord mathnormal">
              i
             </span>
             <span class="mspace" style="margin-right: 0.2222em;">
             </span>
             <span class="mbin">
              −
             </span>
             <span class="mspace" style="margin-right: 0.2222em;">
             </span>
            </span>
            <span class="base">
             <span class="strut" style="height: 0.854em; vertical-align: -0.1944em;">
             </span>
             <span class="mord">
              1
             </span>
             <span class="mpunct">
              ,
             </span>
             <span class="mspace" style="margin-right: 0.1667em;">
             </span>
             <span class="mord mathnormal" style="margin-right: 0.0572em;">
              j
             </span>
             <span class="mspace" style="margin-right: 0.2222em;">
             </span>
             <span class="mbin">
              −
             </span>
             <span class="mspace" style="margin-right: 0.2222em;">
             </span>
            </span>
            <span class="base">
             <span class="strut" style="height: 1em; vertical-align: -0.25em;">
             </span>
             <span class="mord mathnormal">
              i
             </span>
             <span class="mclose">
              )
             </span>
             <span class="mspace" style="margin-right: 0.2222em;">
             </span>
             <span class="mbin">
              +
             </span>
             <span class="mspace" style="margin-right: 0.2222em;">
             </span>
            </span>
            <span class="base">
             <span class="strut" style="height: 1em; vertical-align: -0.25em;">
             </span>
             <span class="mord mathnormal" style="margin-right: 0.1076em;">
              f
             </span>
             <span class="mopen">
              (
             </span>
             <span class="mord mathnormal">
              i
             </span>
             <span class="mspace" style="margin-right: 0.2222em;">
             </span>
             <span class="mbin">
              −
             </span>
             <span class="mspace" style="margin-right: 0.2222em;">
             </span>
            </span>
            <span class="base">
             <span class="strut" style="height: 0.854em; vertical-align: -0.1944em;">
             </span>
             <span class="mord">
              1
             </span>
             <span class="mpunct">
              ,
             </span>
             <span class="mspace" style="margin-right: 0.1667em;">
             </span>
             <span class="mord mathnormal" style="margin-right: 0.0572em;">
              j
             </span>
             <span class="mspace" style="margin-right: 0.2222em;">
             </span>
             <span class="mbin">
              −
             </span>
             <span class="mspace" style="margin-right: 0.2222em;">
             </span>
            </span>
            <span class="base">
             <span class="strut" style="height: 1em; vertical-align: -0.25em;">
             </span>
             <span class="mord">
              2
             </span>
             <span class="mord mathnormal">
              i
             </span>
             <span class="mclose">
              )
             </span>
             <span class="mspace" style="margin-right: 0.2222em;">
             </span>
             <span class="mbin">
              +
             </span>
             <span class="mspace" style="margin-right: 0.2222em;">
             </span>
            </span>
            <span class="base">
             <span class="strut" style="height: 0.6667em; vertical-align: -0.0833em;">
             </span>
             <span class="mord">
              ...
             </span>
             <span class="mspace" style="margin-right: 0.2222em;">
             </span>
             <span class="mbin">
              +
             </span>
             <span class="mspace" style="margin-right: 0.2222em;">
             </span>
            </span>
            <span class="base">
             <span class="strut" style="height: 1em; vertical-align: -0.25em;">
             </span>
             <span class="mord mathnormal" style="margin-right: 0.1076em;">
              f
             </span>
             <span class="mopen">
              (
             </span>
             <span class="mord mathnormal" style="margin-right: 0.0572em;">
              j
             </span>
             <span class="mspace" style="margin-right: 0.2222em;">
             </span>
             <span class="mbin">
              −
             </span>
             <span class="mspace" style="margin-right: 0.2222em;">
             </span>
            </span>
            <span class="base">
             <span class="strut" style="height: 1em; vertical-align: -0.25em;">
             </span>
             <span class="mord mathnormal">
              s
             </span>
             <span class="mord mathnormal">
              i
             </span>
             <span class="mclose">
              )
             </span>
            </span>
           </span>
          </span>
         </span>
        </span>
        <br/>
        所以我们可以得到：
        <br/>
        <span class="katex--display">
         <span class="katex-display">
          <span class="katex">
           <span class="katex-mathml">
            f 
         
        
          ( 
         
        
          i 
         
        
          , 
         
        
          j 
         
        
          ) 
         
        
          = 
         
        
          f 
         
        
          ( 
         
        
          i 
         
        
          − 
         
        
          1 
         
        
          , 
         
        
          j 
         
        
          ) 
         
        
          + 
         
        
          f 
         
        
          ( 
         
        
          i 
         
        
          , 
         
        
          j 
         
        
          − 
         
        
          i 
         
        
          ) 
         
        
       
         f(i, j) = f(i - 1, j) + f(i, j - i)
           </span>
           <span class="katex-html">
            <span class="base">
             <span class="strut" style="height: 1em; vertical-align: -0.25em;">
             </span>
             <span class="mord mathnormal" style="margin-right: 0.1076em;">
              f
             </span>
             <span class="mopen">
              (
             </span>
             <span class="mord mathnormal">
              i
             </span>
             <span class="mpunct">
              ,
             </span>
             <span class="mspace" style="margin-right: 0.1667em;">
             </span>
             <span class="mord mathnormal" style="margin-right: 0.0572em;">
              j
             </span>
             <span class="mclose">
              )
             </span>
             <span class="mspace" style="margin-right: 0.2778em;">
             </span>
             <span class="mrel">
              =
             </span>
             <span class="mspace" style="margin-right: 0.2778em;">
             </span>
            </span>
            <span class="base">
             <span class="strut" style="height: 1em; vertical-align: -0.25em;">
             </span>
             <span class="mord mathnormal" style="margin-right: 0.1076em;">
              f
             </span>
             <span class="mopen">
              (
             </span>
             <span class="mord mathnormal">
              i
             </span>
             <span class="mspace" style="margin-right: 0.2222em;">
             </span>
             <span class="mbin">
              −
             </span>
             <span class="mspace" style="margin-right: 0.2222em;">
             </span>
            </span>
            <span class="base">
             <span class="strut" style="height: 1em; vertical-align: -0.25em;">
             </span>
             <span class="mord">
              1
             </span>
             <span class="mpunct">
              ,
             </span>
             <span class="mspace" style="margin-right: 0.1667em;">
             </span>
             <span class="mord mathnormal" style="margin-right: 0.0572em;">
              j
             </span>
             <span class="mclose">
              )
             </span>
             <span class="mspace" style="margin-right: 0.2222em;">
             </span>
             <span class="mbin">
              +
             </span>
             <span class="mspace" style="margin-right: 0.2222em;">
             </span>
            </span>
            <span class="base">
             <span class="strut" style="height: 1em; vertical-align: -0.25em;">
             </span>
             <span class="mord mathnormal" style="margin-right: 0.1076em;">
              f
             </span>
             <span class="mopen">
              (
             </span>
             <span class="mord mathnormal">
              i
             </span>
             <span class="mpunct">
              ,
             </span>
             <span class="mspace" style="margin-right: 0.1667em;">
             </span>
             <span class="mord mathnormal" style="margin-right: 0.0572em;">
              j
             </span>
             <span class="mspace" style="margin-right: 0.2222em;">
             </span>
             <span class="mbin">
              −
             </span>
             <span class="mspace" style="margin-right: 0.2222em;">
             </span>
            </span>
            <span class="base">
             <span class="strut" style="height: 1em; vertical-align: -0.25em;">
             </span>
             <span class="mord mathnormal">
              i
             </span>
             <span class="mclose">
              )
             </span>
            </span>
           </span>
          </span>
         </span>
        </span>
        <br/>
        注意可以将高维数组优化为一维数组，注意第二层循环是从前向后遍历！
       </p>
       <pre><code class="prism language-C++">//
// Created by HUAWEI on 2025/2/20.
//
#include&lt;iostream&gt;
#include&lt;cstring&gt;
#include&lt;algorithm&gt;

using namespace std;

const int N = 1010, mod = 1e9 + 7;

int n;
int f[N];


int main() {
    cin &gt;&gt; n;

    f[0] = 1; // 无论是多少个数相加，最终加和为0，方案只有一种

    for (int i = 1; i &lt;= n; i++)
        for (int j = i; j &lt;= n; j++) {
            f[j] = (f[j] + f[j - i]) % mod;
        }

    cout &lt;&lt; f[n] &lt;&lt; endl;


    return 0;
}
</code></pre>
       <p>
        法二：
       </p>
       <p>
        另辟蹊径~
       </p>
       <img alt="image-20250220175454097" src="https://i-blog.csdnimg.cn/img_convert/7edc7d743a2ee276bea525c227e6ebb3.png"/>
       <p>
        这个方法太抽象了，很难自己想到
       </p>
       <pre><code class="prism language-C++">//
// Created by HUAWEI on 2025/2/20.
//
#include&lt;iostream&gt;
#include&lt;cstring&gt;
#include&lt;algorithm&gt;

using namespace std;

const int N = 1010, mod = 1e9 + 7;

int n;
int f[N][N];

int main() {
    cin &gt;&gt; n;

    // 初始化
    f[1][1] = 1;

    for (int i = 2; i &lt;= n; i++)
        for (int j = 1; j &lt;= i; j++) {
            f[i][j] = (f[i - 1][j - 1] + f[i - j][j]) % mod;
        }

    int res = 0;
    for (int i = 1; i &lt;= n; i++)
        res = (res + f[n][i]) % mod;

    cout &lt;&lt; res &lt;&lt; endl;

    return 0;
}
</code></pre>
       <h3>
        <a id="DP_924">
        </a>
        五、数位统计DP
       </h3>
       <h4>
        <a id="_926">
        </a>
        计数问题
       </h4>
       <p>
        分类讨论
       </p>
       <p>
        举例说明：
       </p>
       <img alt="image-20250225153359238" src="https://i-blog.csdnimg.cn/img_convert/d4258b0ef44aff7c9e4cb6529ec9babb.png"/>
       <hr/>
       <img alt="image-20250316115627138" src="https://i-blog.csdnimg.cn/img_convert/4ad99837548469579e5ebed6d18b7fff.png"/>
       <p>
        上图是针对于
        <span class="katex--inline">
         <span class="katex">
          <span class="katex-mathml">
           x 
        
       
         &gt; 
        
       
         0 
        
       
      
        x &gt; 0
          </span>
          <span class="katex-html">
           <span class="base">
            <span class="strut" style="height: 0.5782em; vertical-align: -0.0391em;">
            </span>
            <span class="mord mathnormal">
             x
            </span>
            <span class="mspace" style="margin-right: 0.2778em;">
            </span>
            <span class="mrel">
             &gt;
            </span>
            <span class="mspace" style="margin-right: 0.2778em;">
            </span>
           </span>
           <span class="base">
            <span class="strut" style="height: 0.6444em;">
            </span>
            <span class="mord">
             0
            </span>
           </span>
          </span>
         </span>
        </span>
        的情况，如果
        <span class="katex--inline">
         <span class="katex">
          <span class="katex-mathml">
           x 
        
       
         = 
        
       
         0 
        
       
      
        x = 0
          </span>
          <span class="katex-html">
           <span class="base">
            <span class="strut" style="height: 0.4306em;">
            </span>
            <span class="mord mathnormal">
             x
            </span>
            <span class="mspace" style="margin-right: 0.2778em;">
            </span>
            <span class="mrel">
             =
            </span>
            <span class="mspace" style="margin-right: 0.2778em;">
            </span>
           </span>
           <span class="base">
            <span class="strut" style="height: 0.6444em;">
            </span>
            <span class="mord">
             0
            </span>
           </span>
          </span>
         </span>
        </span>
        ,需要注意前导零的处理，在情况一这里：
       </p>
       <img alt="image-20250316115835444" src="https://i-blog.csdnimg.cn/img_convert/7b888787e6c0887dfb19b852f7bb3fc2.png"/>
       <p>
        需要将 000 改为 001
       </p>
       <p>
        代码如下：
       </p>
       <pre><code class="prism language-C++">//
// Created by HUAWEI on 2025/3/16.
//
#include&lt;iostream&gt;
#include&lt;cstring&gt;
#include&lt;algorithm&gt;
#include&lt;vector&gt;

using namespace std;

int power10(int x) {
    int res = 1;
    while (x--) {
        res *= 10;
    }
    return res;
}

int get_(vector&lt;int&gt; num, int h, int l) {
    int res = 0;
    for (int i = h; i &gt;= l; i--) {
        res = 10 * res + num[i];
    }
    return res;
}

int count_num(int x, int s) { // s 代表需要计数的数字
    if (!x)
        return 0; // count_num 计算的是 1 ~ x 之间每个数字出现的次数，需要对于 x == 0 进行特判
    vector&lt;int&gt; num;

    while (x) {
        // num 中高位在后，低位在前
        num.push_back(x % 10);
        x = x / 10;
    }

    int n = num.size(), res = 0;
    for (int i = n - 1 - !s; i &gt;= 0; i--) {
        // 计算 d 位 0 的个数时， 如果 d 位是最高位，则不需要计算，因为不可能存在这种情况
        if (i &lt; (n - 1)) // 如果 d 是最高位，分类中的第一种情况直接不讨论
            res += (get_(num, n - 1, i + 1) - !s) * power10(i);

        if (num[i] == s) {
            res += get_(num, i - 1, 0) + 1;
        } else if (num[i] &gt; s) {
            res += power10(i);
        }

    }
    return res;
}

int main() {
    int a, b;
    while (cin &gt;&gt; a &gt;&gt; b, a) {
        if (a &gt; b)
            swap(a, b);
        for (int i = 0; i &lt; 10; i++) {
            cout &lt;&lt; count_num(b, i) - count_num(a - 1, i) &lt;&lt; " ";
        }
        cout &lt;&lt; endl;
    }

    return 0;
}
</code></pre>
       <blockquote>
        <p>
         注意：
        </p>
        <ul>
         <li>
          采用前缀和类似的思想，计算出
          <code>
           count_num(b, i)
          </code>
          和
          <code>
           count_num(a - 1, i)
          </code>
          作差即可
         </li>
         <li>
          对于每一位（d）出现的数字进行枚举，可以考虑d一般的位置，随后在针对d位于首位进行特判分析
         </li>
         <li>
          先在纸上分析明白再去编写代码
         </li>
         <li>
          一定要考虑清楚先导零的情况！
         </li>
        </ul>
       </blockquote>
       <h3>
        <a id="DP_1022">
        </a>
        六、状态压缩DP
       </h3>
       <blockquote>
        <p>
         有明显的特点：
        </p>
        <p>
         n 必须满足
         <span class="katex--inline">
          <span class="katex">
           <span class="katex-mathml">
            n 
         
        
          &lt; 
         
        
          20 
         
        
       
         n &lt; 20
           </span>
           <span class="katex-html">
            <span class="base">
             <span class="strut" style="height: 0.5782em; vertical-align: -0.0391em;">
             </span>
             <span class="mord mathnormal">
              n
             </span>
             <span class="mspace" style="margin-right: 0.2778em;">
             </span>
             <span class="mrel">
              &lt;
             </span>
             <span class="mspace" style="margin-right: 0.2778em;">
             </span>
            </span>
            <span class="base">
             <span class="strut" style="height: 0.6444em;">
             </span>
             <span class="mord">
              20
             </span>
            </span>
           </span>
          </span>
         </span>
        </p>
       </blockquote>
       <h4>
        <a id="_1028">
        </a>
        蒙德里安的梦想
       </h4>
       <p>
        状态实际是一个整数，但是要把它看作二进制数
       </p>
       <blockquote>
        <p>
         以下理解给后来可能有疑惑的同学：
         <br/>
         1、题目等价于按照列来横着放置小方块。（其他人写的行放置小方块）
         <br/>
         2、f(i,j):摆放第i列，i-1列伸出来横着的方格状态为j的方案数，j为一个二进制数，范围是0～行数位数的二进制范围；
         <br/>
         3、i-1列转移到i列满足：(j &amp; k) == 0,其中k是i-1列的状态；
         <br/>
         4、同时每个有效的状态满足：j | k 不存在连续奇数个零，即每个格子只能用纵向的格子来填；
        </p>
       </blockquote>
       <p>
        又及
       </p>
       <blockquote>
        <p>
         f[i, j]的i是从0开始的，0是第一列，m - 1是最后一列，所以f[m, 0]是指第m - 1列摆满的方案数。同理f[i, j]表示第i - 1列伸出的状态是j的方案数。
        </p>
       </blockquote>
       <pre><code class="prism language-C++">//
// Created by HUAWEI on 2025/2/25.
//
#include&lt;iostream&gt;
#include&lt;cstring&gt;
#include&lt;algorithm&gt;

#define int long long

using namespace std;

const int N = 13, M = 1 &lt;&lt; 13;
bool st[M];
int f[N][M];

signed main() {
    int n, m;
    while (cin &gt;&gt; n &gt;&gt; m, n | m) {
        int sol_num = 1 &lt;&lt; n;

        // 处理st, 方便判断是否存在连续奇数个0
        for (int i = 0; i &lt; sol_num; i++) {
            st[i] = true;
            int cnt = 0; // 连续 0 的个数
            for (int j = 0; j &lt; n; j++) {
                if (i &gt;&gt; j &amp; 1) {
                    if (cnt &amp; 1)
                        st[i] = false;
                    cnt = 0;
                } else {
                    cnt++;
                }
            }
            if (cnt &amp; 1)
                st[i] = false;
        }

        memset(f, 0, sizeof f); // 处理每组数据时记得都要初始化f
        // 初始化f数组
        f[0][0] = 1;
        for (int i = 1; i &lt;= m; i++)
            for (int j = 0; j &lt; sol_num; j++)
                for (int k = 0; k &lt; sol_num; k++) {
                    if (st[k | j] and !(k &amp; j))
                        f[i][j] += f[i - 1][k];
                }
        cout &lt;&lt; f[m][0] &lt;&lt; endl;
    }


    return 0;
}
</code></pre>
       <p>
        有几个易错点记一下：
       </p>
       <ul>
        <li>
         动态规划最外层的枚举范围
        </li>
        <li>
         处理多组数据时记得每次都要初始化
        </li>
        <li>
         位运算的优先级
        </li>
       </ul>
       <h4>
        <a id="Hamilton_1103">
        </a>
        最短Hamilton路径
       </h4>
       <img alt="image-20250310195510590" src="https://i-blog.csdnimg.cn/img_convert/9abe02b67390451d1d512182bdbc9b7d.png"/>
       <pre><code class="prism language-C++">//
// Created by HUAWEI on 2025/3/10.
//

#include&lt;iostream&gt;
#include&lt;cstring&gt;
#include&lt;algorithm&gt;

using namespace std;

const int N = 22, M = 1 &lt;&lt; N;
int w[N][N];
int f[M][N];


int main() {
    int n;
    cin &gt;&gt; n;
    for (int i = 0; i &lt; n; i++)
        for (int j = 0; j &lt; n; j++)
            cin &gt;&gt; w[i][j];

    memset(f, 0x3f, sizeof f);
    f[1][0] = 0; // 注意如何初始化的

    for (int i = 0; i &lt; (1 &lt;&lt; n); i++)
        for (int j = 0; j &lt; n; j++) {
            if (i &gt;&gt; j &amp; 1) {
                for (int k = 0; k &lt; n; k++) {
                    if (i &gt;&gt; k &amp; 1) {
                        f[i][j] = min(f[i][j], f[i - (1 &lt;&lt; j)][k] + w[k][j]);
                    }
                }
            }
        }

    cout &lt;&lt; f[(1 &lt;&lt; n) - 1][n - 1] &lt;&lt; endl;
    return 0;
}
</code></pre>
       <p>
        需要注意的地方：
       </p>
       <ul>
        <li>
         代码中
         <code>
          i，j, k
         </code>
         的表示和讲解视频中的一样，
         <code>
          i
         </code>
         表示的是经过路径的状态压缩表示，
         <code>
          j
         </code>
         表示的是走到的目标点，
         <code>
          k
         </code>
         表示的是倒数第二个结点，如下公式所示：
        </li>
       </ul>
       <p>
        <span class="katex--display">
         <span class="katex-display">
          <span class="katex">
           <span class="katex-mathml">
            i 
         
        
          ⇝ 
         
        
          k 
         
        
          → 
         
        
          j 
         
        
       
         i \leadsto k \rightarrow j
           </span>
           <span class="katex-html">
            <span class="base">
             <span class="strut" style="height: 0.6595em;">
             </span>
             <span class="mord mathnormal">
              i
             </span>
             <span class="mspace" style="margin-right: 0.2778em;">
             </span>
             <span class="mrel amsrm">
              ⇝
             </span>
             <span class="mspace" style="margin-right: 0.2778em;">
             </span>
            </span>
            <span class="base">
             <span class="strut" style="height: 0.6944em;">
             </span>
             <span class="mord mathnormal" style="margin-right: 0.0315em;">
              k
             </span>
             <span class="mspace" style="margin-right: 0.2778em;">
             </span>
             <span class="mrel">
              →
             </span>
             <span class="mspace" style="margin-right: 0.2778em;">
             </span>
            </span>
            <span class="base">
             <span class="strut" style="height: 0.854em; vertical-align: -0.1944em;">
             </span>
             <span class="mord mathnormal" style="margin-right: 0.0572em;">
              j
             </span>
            </span>
           </span>
          </span>
         </span>
        </span>
       </p>
       <h3>
        <a id="DP_1157">
        </a>
        七、树形DP
       </h3>
       <h4>
        <a id="DP_1159">
        </a>
        没有上司的舞会(树形DP最为经典的一个问题)
       </h4>
       <p>
        <img alt="image-20250313145910731" src="https://i-blog.csdnimg.cn/img_convert/3ff57a1fe527f76291b6c601a1afe621.png"/>
       </p>
       <p>
        状态转移方程如下：
       </p>
       <p>
        <span class="katex--display">
         <span class="katex-display">
          <span class="katex">
           <span class="katex-mathml">
            f 
         
        
          ( 
         
        
          u 
         
        
          , 
         
        
          0 
         
        
          ) 
         
        
          = 
         
        
          Σ 
           
        
          m 
         
        
          a 
         
        
          x 
         
        
          ( 
         
        
          f 
         
        
          ( 
         
         
         
           s 
          
         
           i 
          
         
        
          , 
         
        
          0 
         
        
          ) 
         
        
          , 
         
        
          f 
         
        
          ( 
         
         
         
           s 
          
         
           i 
          
         
        
          , 
         
        
          1 
         
        
          ) 
         
        
          ) 
         
         
        
          f 
         
        
          ( 
         
        
          u 
         
        
          , 
         
        
          1 
         
        
          ) 
         
        
          = 
         
        
          Σ 
           
        
          f 
         
        
          ( 
         
         
         
           s 
          
         
           i 
          
         
        
          , 
         
        
          0 
         
        
          ) 
         
        
          + 
         
        
          h 
         
        
          ( 
         
        
          u 
         
        
          ) 
         
        
       
         f(u, 0) = \Sigma \; max (f(s_i, 0), f(s_i, 1)) \\ f(u, 1) = \Sigma \; f(s_i, 0) + h(u)
           </span>
           <span class="katex-html">
            <span class="base">
             <span class="strut" style="height: 1em; vertical-align: -0.25em;">
             </span>
             <span class="mord mathnormal" style="margin-right: 0.1076em;">
              f
             </span>
             <span class="mopen">
              (
             </span>
             <span class="mord mathnormal">
              u
             </span>
             <span class="mpunct">
              ,
             </span>
             <span class="mspace" style="margin-right: 0.1667em;">
             </span>
             <span class="mord">
              0
             </span>
             <span class="mclose">
              )
             </span>
             <span class="mspace" style="margin-right: 0.2778em;">
             </span>
             <span class="mrel">
              =
             </span>
             <span class="mspace" style="margin-right: 0.2778em;">
             </span>
            </span>
            <span class="base">
             <span class="strut" style="height: 1em; vertical-align: -0.25em;">
             </span>
             <span class="mord">
              Σ
             </span>
             <span class="mspace" style="margin-right: 0.2778em;">
             </span>
             <span class="mord mathnormal">
              ma
             </span>
             <span class="mord mathnormal">
              x
             </span>
             <span class="mopen">
              (
             </span>
             <span class="mord mathnormal" style="margin-right: 0.1076em;">
              f
             </span>
             <span class="mopen">
              (
             </span>
             <span class="mord">
              <span class="mord mathnormal">
               s
              </span>
              <span class="msupsub">
               <span class="vlist-t vlist-t2">
                <span class="vlist-r">
                 <span class="vlist" style="height: 0.3117em;">
                  <span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;">
                   <span class="pstrut" style="height: 2.7em;">
                   </span>
                   <span class="sizing reset-size6 size3 mtight">
                    <span class="mord mathnormal mtight">
                     i
                    </span>
                   </span>
                  </span>
                 </span>
                 <span class="vlist-s">
                  ​
                 </span>
                </span>
                <span class="vlist-r">
                 <span class="vlist" style="height: 0.15em;">
                  <span class="">
                  </span>
                 </span>
                </span>
               </span>
              </span>
             </span>
             <span class="mpunct">
              ,
             </span>
             <span class="mspace" style="margin-right: 0.1667em;">
             </span>
             <span class="mord">
              0
             </span>
             <span class="mclose">
              )
             </span>
             <span class="mpunct">
              ,
             </span>
             <span class="mspace" style="margin-right: 0.1667em;">
             </span>
             <span class="mord mathnormal" style="margin-right: 0.1076em;">
              f
             </span>
             <span class="mopen">
              (
             </span>
             <span class="mord">
              <span class="mord mathnormal">
               s
              </span>
              <span class="msupsub">
               <span class="vlist-t vlist-t2">
                <span class="vlist-r">
                 <span class="vlist" style="height: 0.3117em;">
                  <span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;">
                   <span class="pstrut" style="height: 2.7em;">
                   </span>
                   <span class="sizing reset-size6 size3 mtight">
                    <span class="mord mathnormal mtight">
                     i
                    </span>
                   </span>
                  </span>
                 </span>
                 <span class="vlist-s">
                  ​
                 </span>
                </span>
                <span class="vlist-r">
                 <span class="vlist" style="height: 0.15em;">
                  <span class="">
                  </span>
                 </span>
                </span>
               </span>
              </span>
             </span>
             <span class="mpunct">
              ,
             </span>
             <span class="mspace" style="margin-right: 0.1667em;">
             </span>
             <span class="mord">
              1
             </span>
             <span class="mclose">
              ))
             </span>
            </span>
            <span class="mspace newline">
            </span>
            <span class="base">
             <span class="strut" style="height: 1em; vertical-align: -0.25em;">
             </span>
             <span class="mord mathnormal" style="margin-right: 0.1076em;">
              f
             </span>
             <span class="mopen">
              (
             </span>
             <span class="mord mathnormal">
              u
             </span>
             <span class="mpunct">
              ,
             </span>
             <span class="mspace" style="margin-right: 0.1667em;">
             </span>
             <span class="mord">
              1
             </span>
             <span class="mclose">
              )
             </span>
             <span class="mspace" style="margin-right: 0.2778em;">
             </span>
             <span class="mrel">
              =
             </span>
             <span class="mspace" style="margin-right: 0.2778em;">
             </span>
            </span>
            <span class="base">
             <span class="strut" style="height: 1em; vertical-align: -0.25em;">
             </span>
             <span class="mord">
              Σ
             </span>
             <span class="mspace" style="margin-right: 0.2778em;">
             </span>
             <span class="mord mathnormal" style="margin-right: 0.1076em;">
              f
             </span>
             <span class="mopen">
              (
             </span>
             <span class="mord">
              <span class="mord mathnormal">
               s
              </span>
              <span class="msupsub">
               <span class="vlist-t vlist-t2">
                <span class="vlist-r">
                 <span class="vlist" style="height: 0.3117em;">
                  <span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;">
                   <span class="pstrut" style="height: 2.7em;">
                   </span>
                   <span class="sizing reset-size6 size3 mtight">
                    <span class="mord mathnormal mtight">
                     i
                    </span>
                   </span>
                  </span>
                 </span>
                 <span class="vlist-s">
                  ​
                 </span>
                </span>
                <span class="vlist-r">
                 <span class="vlist" style="height: 0.15em;">
                  <span class="">
                  </span>
                 </span>
                </span>
               </span>
              </span>
             </span>
             <span class="mpunct">
              ,
             </span>
             <span class="mspace" style="margin-right: 0.1667em;">
             </span>
             <span class="mord">
              0
             </span>
             <span class="mclose">
              )
             </span>
             <span class="mspace" style="margin-right: 0.2222em;">
             </span>
             <span class="mbin">
              +
             </span>
             <span class="mspace" style="margin-right: 0.2222em;">
             </span>
            </span>
            <span class="base">
             <span class="strut" style="height: 1em; vertical-align: -0.25em;">
             </span>
             <span class="mord mathnormal">
              h
             </span>
             <span class="mopen">
              (
             </span>
             <span class="mord mathnormal">
              u
             </span>
             <span class="mclose">
              )
             </span>
            </span>
           </span>
          </span>
         </span>
        </span>
        <br/>
        时间复杂度分析：
       </p>
       <ul>
        <li>
         每个结点计算
         <span class="katex--inline">
          <span class="katex">
           <span class="katex-mathml">
            f 
         
        
          ( 
         
        
          u 
         
        
          , 
         
        
          0 
         
        
          ) 
         
        
          , 
         
        
          f 
         
        
          ( 
         
        
          u 
         
        
          , 
         
        
          1 
         
        
          ) 
         
        
       
         f(u, 0), f(u, 1)
           </span>
           <span class="katex-html">
            <span class="base">
             <span class="strut" style="height: 1em; vertical-align: -0.25em;">
             </span>
             <span class="mord mathnormal" style="margin-right: 0.1076em;">
              f
             </span>
             <span class="mopen">
              (
             </span>
             <span class="mord mathnormal">
              u
             </span>
             <span class="mpunct">
              ,
             </span>
             <span class="mspace" style="margin-right: 0.1667em;">
             </span>
             <span class="mord">
              0
             </span>
             <span class="mclose">
              )
             </span>
             <span class="mpunct">
              ,
             </span>
             <span class="mspace" style="margin-right: 0.1667em;">
             </span>
             <span class="mord mathnormal" style="margin-right: 0.1076em;">
              f
             </span>
             <span class="mopen">
              (
             </span>
             <span class="mord mathnormal">
              u
             </span>
             <span class="mpunct">
              ,
             </span>
             <span class="mspace" style="margin-right: 0.1667em;">
             </span>
             <span class="mord">
              1
             </span>
             <span class="mclose">
              )
             </span>
            </span>
           </span>
          </span>
         </span>
         时间复杂度：
         <span class="katex--inline">
          <span class="katex">
           <span class="katex-mathml">
            2 
         
        
          n 
         
        
       
         2n
           </span>
           <span class="katex-html">
            <span class="base">
             <span class="strut" style="height: 0.6444em;">
             </span>
             <span class="mord">
              2
             </span>
             <span class="mord mathnormal">
              n
             </span>
            </span>
           </span>
          </span>
         </span>
        </li>
        <li>
         在计算
         <span class="katex--inline">
          <span class="katex">
           <span class="katex-mathml">
            f 
         
        
          ( 
         
        
          u 
         
        
          , 
         
        
          0 
         
        
          ) 
         
        
          , 
         
        
          f 
         
        
          ( 
         
        
          u 
         
        
          , 
         
        
          1 
         
        
          ) 
         
        
       
         f(u, 0), f(u, 1)
           </span>
           <span class="katex-html">
            <span class="base">
             <span class="strut" style="height: 1em; vertical-align: -0.25em;">
             </span>
             <span class="mord mathnormal" style="margin-right: 0.1076em;">
              f
             </span>
             <span class="mopen">
              (
             </span>
             <span class="mord mathnormal">
              u
             </span>
             <span class="mpunct">
              ,
             </span>
             <span class="mspace" style="margin-right: 0.1667em;">
             </span>
             <span class="mord">
              0
             </span>
             <span class="mclose">
              )
             </span>
             <span class="mpunct">
              ,
             </span>
             <span class="mspace" style="margin-right: 0.1667em;">
             </span>
             <span class="mord mathnormal" style="margin-right: 0.1076em;">
              f
             </span>
             <span class="mopen">
              (
             </span>
             <span class="mord mathnormal">
              u
             </span>
             <span class="mpunct">
              ,
             </span>
             <span class="mspace" style="margin-right: 0.1667em;">
             </span>
             <span class="mord">
              1
             </span>
             <span class="mclose">
              )
             </span>
            </span>
           </span>
          </span>
         </span>
         时需要考虑到
         <span class="katex--inline">
          <span class="katex">
           <span class="katex-mathml">
            u 
         
        
       
         u
           </span>
           <span class="katex-html">
            <span class="base">
             <span class="strut" style="height: 0.4306em;">
             </span>
             <span class="mord mathnormal">
              u
             </span>
            </span>
           </span>
          </span>
         </span>
         的所有孩子，而这棵树总的孩子数量应该是边数
         <span class="katex--inline">
          <span class="katex">
           <span class="katex-mathml">
            m 
         
        
          = 
         
        
          n 
         
        
          − 
         
        
          1 
         
        
       
         m = n - 1
           </span>
           <span class="katex-html">
            <span class="base">
             <span class="strut" style="height: 0.4306em;">
             </span>
             <span class="mord mathnormal">
              m
             </span>
             <span class="mspace" style="margin-right: 0.2778em;">
             </span>
             <span class="mrel">
              =
             </span>
             <span class="mspace" style="margin-right: 0.2778em;">
             </span>
            </span>
            <span class="base">
             <span class="strut" style="height: 0.6667em; vertical-align: -0.0833em;">
             </span>
             <span class="mord mathnormal">
              n
             </span>
             <span class="mspace" style="margin-right: 0.2222em;">
             </span>
             <span class="mbin">
              −
             </span>
             <span class="mspace" style="margin-right: 0.2222em;">
             </span>
            </span>
            <span class="base">
             <span class="strut" style="height: 0.6444em;">
             </span>
             <span class="mord">
              1
             </span>
            </span>
           </span>
          </span>
         </span>
        </li>
        <li>
         所以时间复杂度：
         <span class="katex--inline">
          <span class="katex">
           <span class="katex-mathml">
            O 
         
        
          ( 
         
        
          n 
         
        
          ) 
         
        
       
         O(n)
           </span>
           <span class="katex-html">
            <span class="base">
             <span class="strut" style="height: 1em; vertical-align: -0.25em;">
             </span>
             <span class="mord mathnormal" style="margin-right: 0.0278em;">
              O
             </span>
             <span class="mopen">
              (
             </span>
             <span class="mord mathnormal">
              n
             </span>
             <span class="mclose">
              )
             </span>
            </span>
           </span>
          </span>
         </span>
        </li>
       </ul>
       <pre><code class="prism language-C++">//
// Created by HUAWEI on 2025/3/13.
//
#include&lt;iostream&gt;
#include&lt;algorithm&gt;
#include&lt;cstring&gt;

using namespace std;

const int N = 6010;
int happy[N];
int h[N], e[N], ne[N], idx; // 把链式前向星的板子倍数
int f[N][2];
bool root_if[N]; // 找到根节点

void add(int a, int b) {
    e[idx] = b;
    ne[idx] = h[a];
    h[a] = idx++;
}

void dfs(int u) {
    f[u][1] += happy[u];
    for (int i = h[u]; ~i; i = ne[i]) {
        int j = e[i];
        dfs(j);

        f[u][0] += max(f[j][0], f[j][1]);
        f[u][1] += f[j][0];
    }
}

int main() {
    int n;
    cin &gt;&gt; n;
    for (int i = 1; i &lt;= n; i++)
        cin &gt;&gt; happy[i];

    memset(h, -1, sizeof(h)); // 使用链式前向星一定记得初始化 h 数组

    for (int i = 0; i &lt; n - 1; i++) {
        int l, k;
        cin &gt;&gt; l &gt;&gt; k;
        add(k, l);
        root_if[l] = true;
    }

    int root = 1;
    while (root_if[root]) {
        root++; //找到根节点
    }

    dfs(root);

    cout &lt;&lt; max(f[root][0], f[root][1]) &lt;&lt; endl;


    return 0;
}
</code></pre>
       <p>
        需要注意的点：
       </p>
       <ul>
        <li>
         链式前向星如何使用！把板子背下来
         <ul>
          <li>
           <code>
            for (int i = h[u]; ~i; i = ne[i])
           </code>
           中
           <code>
            ~i
           </code>
           的使用
          </li>
          <li>
           <code>
            memset(h, -1, sizeof(h)); // 使用链式前向星一定记得初始化 h 数组
           </code>
          </li>
         </ul>
        </li>
       </ul>
       <h3>
        <a id="_1244">
        </a>
        八、记忆化搜索
       </h3>
       <blockquote>
        <p>
         前面所用的都是循环的写法来写，本部分研究递归的写法。
        </p>
        <p>
         记忆化搜索的优点：
        </p>
        <ul>
         <li>
          代码复杂度很小，但是时间会稍微长一点，而且递归的层数如果很多的话可能会爆栈
         </li>
        </ul>
       </blockquote>
       <h4>
        <a id="_1252">
        </a>
        滑雪
       </h4>
       <blockquote>
        <p>
         搜索过程不能存在环（环形依赖）！
        </p>
        <ul>
         <li>
          这一点是显然成立的！可以想一想为什么！
         </li>
        </ul>
       </blockquote>
       <img alt="image-20250313174933374" src="https://i-blog.csdnimg.cn/img_convert/c68941b1291965b3359dd1347f3219d7.png"/>
       <p>
        基础版代码：
       </p>
       <pre><code class="prism language-C++">//
// Created by HUAWEI on 2025/3/13.
//
#include&lt;iostream&gt;
#include&lt;cstring&gt;
#include&lt;algorithm&gt;

using namespace std;

const int N = 310;
int g[N][N], f[N][N];
int r, c;

int dx[4] = {-1, 1, 0, 0}, dy[4] = {0, 0, -1, 1};

int dp(int x, int y) {
    int &amp;v = f[x][y]; // 坐标原点定为矩阵的左上角
    if (v != -1)
        return v;
    v = 1;
    for (int i = 0; i &lt;= 3; i++) {
        if (x + dx[i] &lt;= r and x + dx[i] &gt;= 1 and y + dy[i] &lt;= c and y + dy[i] &gt;= 1 and
            g[x + dx[i]][y + dy[i]] &lt; g[x][y]) {
            v = max(v, 1 + dp(x + dx[i], y + dy[i]));
        }
    }
    return v;
}

int main() {
    scanf("%d%d", &amp;r, &amp;c);
    for (int i = 1; i &lt;= r; i++)
        for (int j = 1; j &lt;= c; j++) {
            scanf("%d", &amp;g[i][j]);
        }

    memset(f, -1, sizeof f);

    int res = 0;
    for (int i = 1; i &lt;= r; i++)
        for (int j = 1; j &lt;= c; j++) {
            res = max(res, dp(i, j));
        }

    printf("%d\n", res);
    return 0;
}
</code></pre>
       <p>
        提示：
       </p>
       <ul>
        <li>
         把矩阵边缘设置为
         <code>
          inf
         </code>
         可以减少递归时的判断条件
        </li>
       </ul>
       <p>
        注意：
       </p>
       <ul>
        <li>
         初始化
         <code>
          memset(f, -1, sizeof f)
         </code>
         !
        </li>
       </ul>
       <p>
        优化版代码：
       </p>
       <pre><code class="prism language-C++">//
// Created by HUAWEI on 2025/3/13.
//
#include&lt;iostream&gt;
#include&lt;cstring&gt;
#include&lt;algorithm&gt;

#define inf 0x3f3f3f3f
using namespace std;

const int N = 310;
int g[N][N], f[N][N];
int r, c;

int dx[4] = {-1, 1, 0, 0}, dy[4] = {0, 0, -1, 1};

int dp(int x, int y) {
    int &amp;v = f[x][y]; // 坐标原点定为矩阵的左上角
    if (v != -1)
        return v;
    v = 1;
    for (int i = 0; i &lt;= 3; i++) {
        int a = x + dx[i], b = y + dy[i];
        if (g[a][b] &lt; g[x][y])
            v = max(v, 1 + dp(a, b));
    }
    return v;
}

int main() {
    scanf("%d%d", &amp;r, &amp;c);
    for (int i = 1; i &lt;= r; i++)
        for (int j = 1; j &lt;= c; j++) {
            scanf("%d", &amp;g[i][j]);
        }
    for (int i = 0; i &lt;= r + 1; i++)
        for (int j = 0; j &lt;= c + 1; j++) {
            if (i == 0 or i == r + 1 or j == 0 or j == c + 1)
                g[i][j] = inf;
        }
    memset(f, -1, sizeof f);

    int res = 0;
    for (int i = 1; i &lt;= r; i++)
        for (int j = 1; j &lt;= c; j++) {
            res = max(res, dp(i, j));
        }

    printf("%d\n", res);
    return 0;
}
</code></pre>
      </img>
     </img>
    </img>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f67:2e6373646e2e6e65742f617070726f78696d6174656c795f2f:61727469636c652f64657461696c732f313436333032343430" class_="artid" style="display:none">
 </p>
</div>


