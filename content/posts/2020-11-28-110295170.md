---
arturl_encode: "68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f34343939363039302f:61727469636c652f64657461696c732f313130323935313730"
layout: post
title: "Cå°æ¸¸æˆè´ªåƒè›‡è¯¦ç»†è¿‡ç¨‹å…¨éƒ¨ä»£ç "
date: 2020-11-28 22:44:41 +0800
description: "æ–‡ç« ç›®å½•ä¸€ã€ä»‹ç»1ï¼‰èƒŒæ™¯2ï¼‰ç¯å¢ƒ3ï¼‰æ¼”ç¤ºæ¸¸æˆè¿‡ç¨‹æ–‡ä»¶æ ¼å¼4)åŸºæœ¬é€»è¾‘æ¦‚è¿°i æ¸¸æˆä¸»ä½“ii åˆ·æ–°iii"
keywords: "c#è¯­è¨€ç¼–å†™è´ªåƒè›‡ä»£ç "
categories: ['C']
tags: ['æ¸¸æˆ', 'Winform', 'C', '.Net']
artid: "110295170"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=110295170
    alt: "Cå°æ¸¸æˆè´ªåƒè›‡è¯¦ç»†è¿‡ç¨‹å…¨éƒ¨ä»£ç "
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=110295170
featuredImagePreview: https://bing.ee123.net/img/rand?artid=110295170
---

# C#å°æ¸¸æˆâ€”â€”è´ªåƒè›‡~è¯¦ç»†è¿‡ç¨‹+å…¨éƒ¨ä»£ç 

###### ä¸€ä¸ªå¥½ç©çš„ğŸâ€¦â€¦

#### æ–‡ç« ç›®å½•

* + - * + [ä¸€ä¸ªå¥½ç©çš„ğŸâ€¦â€¦](#_1)
* [ä¸€ã€ä»‹ç»](#_3)
* + [1ï¼‰èƒŒæ™¯](#1_5)
  + [2ï¼‰ç¯å¢ƒ](#2_9)
  + [3ï¼‰æ¼”ç¤º](#3_17)
  + - [æ¸¸æˆè¿‡ç¨‹](#_19)
    - [æ–‡ä»¶æ ¼å¼](#_24)
  + [4)åŸºæœ¬é€»è¾‘æ¦‚è¿°](#4_29)
  + - [i æ¸¸æˆä¸»ä½“](#i__31)
    - [ii åˆ·æ–°](#ii__35)
    - [iii æ§åˆ¶è›‡çš„ç§»åŠ¨](#iii__39)
    - [iiii ä¿å­˜æœ€é«˜è®°å½•](#iiii__43)
    - [iiiii åƒé£Ÿç‰©](#iiiii__51)
    - [iiiiii è®°å½•ç”¨æˆ·çš„è¾“å…¥ï¼ˆå¾ˆé‡è¦ï¼‰](#iiiiii_____55)
* [äºŒã€æ­¥éª¤](#_61)
* + [1ï¼‰ControlFrmçª—ä½“](#1ControlFrm_63)
  + [2ï¼‰GameFrmçª—ä½“ï¼šæ¸¸æˆçª—ä½“](#2GameFrm_103)
  + - [i å˜é‡](#i____107)
    - [ii çª—ä½“åŠ è½½äº‹ä»¶](#ii___139)
    - [iii ç©å®¶æ•²å‡»é”®ç›˜çš„äº‹ä»¶](#iii_______164)
    - [iiii timer1 tickäº‹ä»¶ï¼š](#iiii___timer1_tick_208)
    - [iiiii ç›¸å…³æ–¹æ³•](#iiiii_____243)
    - * [è›‡ç§»åŠ¨çš„æ–¹æ³•](#_245)
      * [æ“¦é™¤è›‡èº«](#_332)
      * [ç”Ÿæˆé£Ÿç‰©](#_344)
      * [åˆ¤æ–­æ˜¯å¦åƒåˆ°é£Ÿç‰©](#_371)
      * [ä»ç£ç›˜æ–‡ä»¶ä¸­è·å–å†å²æœ€é«˜åˆ†](#_384)
      * [æ’­æ”¾éŸ³ä¹](#_409)
      * [æ­»ä¹‹å‰åˆ¤æ–­æ˜¯å¦æ‰“ç ´äº†è®°å½•](#_434)
    - [iiiiii timer2äº‹ä»¶](#iiiiii____timer2_451)
* [ä¸‰ã€æœ€å](#_462)
* + [1ï¼‰æ•´ä¸ªå·¥ç¨‹æ–‡ä»¶](#1_464)
  + [2ï¼‰æ‰©å±•](#2_476)
  + [3ï¼‰æœ€å](#3_491)

## ä¸€ã€ä»‹ç»

### 1ï¼‰èƒŒæ™¯

ä¸€åˆ°æœŸæœ«è¯¾å°±åŸºæœ¬æ²¡äº†ã€‚é—²æ¥æ— äº‹ï¼Œæ•´ç†ä¸€ä¸‹ä¹‹å‰å†™çš„C#çš„ä¸€ä¸ªå°æ¸¸æˆâ€”â€”è´ªåƒè›‡ã€‚ä»Šå¹´ç–«æƒ…åœ¨å®¶å†™çš„ï¼Œè›®æœ‰è¶£çš„å§ï¼

### 2ï¼‰ç¯å¢ƒ

ç³»ç»Ÿï¼šWindows 10

ç¯å¢ƒï¼š.Net Framework 4.7

å¹³å°ï¼šVS 2019

### 3ï¼‰æ¼”ç¤º

#### æ¸¸æˆè¿‡ç¨‹

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/126c924d3776526a66c879075b066437.gif#pic_center)

#### æ–‡ä»¶æ ¼å¼

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/b2359fff754c9bf57aa6ad5dfc77e735.png#pic_center)

### 4)åŸºæœ¬é€»è¾‘æ¦‚è¿°

#### i æ¸¸æˆä¸»ä½“

å£°æ˜Labelç±»å‹çš„äºŒç»´æ•°ç»„ï¼Œè¡¨ç¤ºæ¯ä¸€ä¸ªæ ¼å­ï¼Œç”¨ä¸åŒçš„é¢œè‰²æ¥åŒºåˆ†è›‡å’Œåœ°å›¾ï¼ˆä¾‹å¦‚ï¼Œè¡¨ç¤ºè›‡èº«çš„labelçš„BackColorè®¾ç½®ä¸ºè“è‰²ï¼Œé£Ÿç‰©è®¾ç½®ä¸ºçº¢è‰²ï¼Œå…¶ä»–çš„è®¾ç½®ä¸ºç»¿è‰²ï¼‰;

#### ii åˆ·æ–°

é€šè¿‡timeråˆ·æ–°ã€‚æ¯ä¸€æ¬¡åˆ·æ–°ï¼Œè›‡ä¼šæœç€å…¶è›‡å¤´çš„æ–¹å‘ç§»åŠ¨ä¸€æ ¼ã€‚æ‰€ä»¥é€šè¿‡å¯¹timerçš„intervalå±æ€§æ§åˆ¶è›‡ç§»åŠ¨çš„å¿«æ…¢ã€‚

#### iii æ§åˆ¶è›‡çš„ç§»åŠ¨

åœ¨timerä¸­ï¼ŒåŒæ—¶åˆ¤æ–­æœ‰æ— é”®ç›˜ï¼ˆwï¼Œsï¼Œaï¼Œdï¼‰çš„è¾“å…¥ï¼Œè¿›è¡Œæ”¹å˜è›‡çš„ç§»åŠ¨æ–¹å‘ï¼ˆä¹Ÿæ˜¯é€šè¿‡ä¿®æ”¹labelçš„é¢œè‰²å®ç°ï¼‰ã€‚

#### iiii ä¿å­˜æœ€é«˜è®°å½•

ç¨‹åºè‡ªåŠ¨åˆ›å»ºäºŒè¿›åˆ¶æ–‡ä»¶
MaxScore.dat
ï¼Œæ¯æ¬¡æ¸¸æˆç»“æŸæ—¶ï¼Œè¯»å–æ•°æ®ï¼Œåˆ¤æ–­å¤§å°ï¼Œå¹¶ä¿å­˜ã€‚

è¯¥æ–‡ä»¶è·¯å¾„æ˜¯ç¨‹åºçš„binç›®å½•Debugä¸‹ã€‚

#### iiiii åƒé£Ÿç‰©

randomç”Ÿæˆé£Ÿç‰©çš„ä½ç½®ï¼Œå°†è¯¥ä½ç½®çš„labelé¢œè‰²è®¾ç½®ä¸ºçº¢è‰²ï¼Œå°±å¯ä»¥åƒäº†ã€‚åœ¨timerä¸­åˆ¤æ–­æ˜¯å¦åƒåˆ°äº†é£Ÿç‰©ï¼Œè¿›è¡Œå¢é•¿çš„æ“ä½œã€‚

#### iiiiii è®°å½•ç”¨æˆ·çš„è¾“å…¥ï¼ˆå¾ˆé‡è¦ï¼‰

æœ‰æ—¶ç”¨æˆ·æœ‰å¯èƒ½è¿ç»­è¾“å…¥å¤šä¸ªå€¼ï¼ˆå¦‚ä¸Šä¸Šä¸Šå·¦å·¦ï¼‰ï¼Œè¿™äº›å€¼è¾“å…¥çš„é—´éš”å¯èƒ½ä¼šå°äºtimerçš„intervalå€¼ï¼Œé€ æˆ
â€ä¸Šä¸€ä¸ªåŠ¨ä½œè¿˜æ²¡æœ‰å®Œæˆï¼Œç›´æ¥è¿›è¡Œä¸‹ä¸€ä¸ªåŠ¨ä½œäº†ï¼Œä»è€Œå¯¼è‡´è¯¯åˆ¤æ­»äº¡ï¼â€

æˆ‘çš„è§£å†³åŠæ³•æ˜¯ï¼šç”¨stringå­—ç¬¦ä¸²è®°å½•ç”¨æˆ·çš„è¾“å…¥ï¼Œæ¯æ¬¡è¾“å…¥éƒ½åŠ åˆ°è¯¥å­—ç¬¦ä¸²çš„æœ«å°¾ã€‚è€Œæ¯æ¬¡çš„timerä»è¯¥å­—ç¬¦ä¸²çš„ä¸²é¦–å–å€¼ï¼Œè¿™æ ·ä¸€æ¥ï¼Œç©å®¶å¯ä»¥çš„è¿ç»­è¾“å…¥ï¼Œä¸å½±å“timerçš„åˆ·æ–°ã€‚

## äºŒã€æ­¥éª¤

### 1ï¼‰ControlFrmçª—ä½“

é¡¹ç›®çš„åˆå§‹è¿è¡Œçš„çª—ä½“ï¼Œå°±ä¸‰ä¸ªæŒ‰é’®ï¼Œåˆ†åˆ«æ‰“å¼€ä¸åŒçš„çª—ä½“ï¼š

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/07e268385f90d67dd5d6037f341f2d51.png#pic_center)

ä»£ç é€»è¾‘å¦‚ä¸‹ï¼š

```csharp
namespace è´ªåƒè›‡
{
    public partial class ControlFrm : Form
    {
        public ControlFrm()
        {
            InitializeComponent();
        }
        //â€œå…³äºâ€æŒ‰é’®click
        private void button3_Click(object sender, EventArgs e)
        {
            AboutMe hf = new AboutMe();
            hf.ShowDialog();
        }
        //â€œç©æ³•ä»‹ç»â€æŒ‰é’®click
        private void button2_Click(object sender, EventArgs e)
        {
            HowToPlay htp = new HowToPlay();
            htp.ShowDialog();
        }
        //â€œå¼€å§‹æ¸¸æˆâ€æŒ‰é’®click
        private void button1_Click(object sender, EventArgs e)
        {
            GameFrm gf = new GameFrm();
            gf.ShowDialog();
        }
    }
}

```

### 2ï¼‰GameFrmçª—ä½“ï¼šæ¸¸æˆçª—ä½“

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/88cc7eb15a8d794077f3b074bc295d21.png#pic_center)

#### i å˜é‡

```csharp
//ç»˜åˆ¶åœ°å›¾
int mapX = 40, mapY = 20;//è®¾å®šæ¸¸æˆåœ°å›¾è¾¹ç•Œ
Label[,] mapArray;//å®šä¹‰åœ°å›¾æ ¼å­çš„äºŒç»´æ•°ç»„
List<int> snakeX = new List<int> { 0, 1, 2 }ï¼›//snakeX[snakeX.Count-1]æ˜¯è›‡çš„å¤´éƒ¨ã€‚å³åˆå§‹æ—¶å¤´éƒ¨ä¸º2
List<int> snakeY = new List<int> { 1, 1, 1 };//åˆ©ç”¨é›†åˆå­˜æ”¾è›‡èº«
int foodX, foodY;//é£Ÿç‰©çš„åæ ‡ç‚¹
string kCode = "D";//æ§åˆ¶è›‡ç§»åŠ¨çš„æ–¹å‘,åˆå§‹å€¼å‘å³
//levelç­‰çº§snakeX.Count>=10
int[] level = { 300, 250, 200, 150, 100 };//å€¼æ˜¯timerçš„æ—¶é—´ï¼Œç­‰çº§è¶Šé«˜æ—¶é—´è¶ŠçŸ­
int k = 0;//ç­‰çº§
//æšä¸¾ï¼Œæ¸¸æˆä¸­çš„èƒŒæ™¯éŸ³ä¹ï¼Œåƒé£Ÿç‰©ä»¥åŠæ­»äº¡éŸ³ä¹
public enum Sound
{
    background, eat, gameover
};

//å¾—åˆ†
int Score = 0;
//å†å²æœ€é«˜åˆ†
int MaxScore;
//å­˜å‚¨æœ€é«˜åˆ†è®°å½•çš„æ–‡ä»¶è·¯å¾„
string path = "MaxScore.dat";

//å­—ç¬¦ä¸²é˜Ÿåˆ—ï¼Œé”®ç›˜æ¯æ¬¡çš„è¾“å…¥åˆ™å…¥é˜Ÿ
string ClikRecord = "";

#endregion

```

#### ii çª—ä½“åŠ è½½äº‹ä»¶

```csharp
private void Form1_Load(object sender, EventArgs e)
{
    //ä»ç£ç›˜æ–‡ä»¶ä¸­è·å–å†å²æœ€é«˜åˆ†
    GetMaxScore();
    //1ã€åˆ›å»ºåœ°å›¾
    GreateMap();
    //2ã€åˆ›å»ºè›‡èº«
    GreateSnake();
    //3ã€åˆ›å»ºé£Ÿç‰©
    GreateFood();
    //4ã€è›‡èº«ç§»åŠ¨ï¼ˆæ­»äº¡ã€åƒé£Ÿç‰©ï¼‰
    timer1.Start();//è®¡æ—¶å™¨å¼€å¯
    //5ã€æ’­æ”¾éŸ³ä¹
    PlayerMusic(Sound.background);
    //åˆå§‹åŒ–çª—ä½“ä¸‹éƒ¨çš„çŠ¶æ€æ 
    toolStripStatusLabel3.Text = "         å½“å‰å¾—åˆ†ï¼š" + Score.ToString();
    toolStripStatusLabel4.Text = "         å†å²æœ€é«˜å¾—åˆ†ï¼š" + MaxScore.ToString();
    toolStripStatusLabel1.Text = DateTime.Now.ToString();//æ—¥æœŸæ—¶é—´
    toolStripStatusLabel2.Text = "                å½“å‰ç­‰çº§ï¼š" + (k + 1).ToString();
} 

```

#### iii ç©å®¶æ•²å‡»é”®ç›˜çš„äº‹ä»¶

```csharp
private void Form1_KeyDown(object sender, KeyEventArgs e)
{
    string newKey = e.KeyCode.ToString();
    //æ³¨æ„ï¼Œå½“è›‡å‘å³æ—¶ä¸èƒ½ç›´æ¥å‘å·¦ã€‚åŒç†ï¼Œå…¶ä»–æƒ…å†µä¹Ÿç±»ä¼¼
    List<string> list = new List<string>() { "A", "W", "D", "S", "P" ,"L"};
    if(list.Contains(newKey)==false)//è‹¥æŒ‰ä¸‹çš„é”®ä¸æ˜¯è¿™å…­ä¸ªé”®çš„è¯
    {
        return;
    }
    if(kCode=="A"&&newKey=="D"||
       kCode == "D" && newKey == "A" ||
       kCode == "W" && newKey == "S" ||
       kCode == "S" && newKey == "W" )
    {
        return;
    }
    if (newKey == "P")
    {
        timer1.Stop();
        return;
    }
    if(newKey=="L")
    {
        timer1.Start();
        return;
    }
    //ä¿®å¤BUGï¼š
    //è¿™é‡Œä¸€ä¸ªBUGçš„æƒ…å†µï¼šåœ¨æ¸¸æˆæ—¶ï¼Œå‡å¦‚è›‡çš„æ–¹å‘ä¸ºDï¼Œå¿«é€Ÿæ•²å‡»é”®ç›˜Wã€Dæ—¶ï¼Œ
    //ç¨‹åºä¼šæ¥ä¸åŠè¿›å…¥timeräº‹ä»¶ï¼Œè¿™æ—¶è›‡çš„çŠ¶æ€ä¸èƒ½ç»å†Wï¼Œç›´æ¥åˆ°Dï¼Œé€ æˆåé¢çš„ç¨‹åº
    //ä¼šåˆ¤æ–­è›‡å’¬åˆ°äº†è‡ªå·±ã€‚
    //åŠæ³•ï¼šåŠ å…¥stringç±»å‹çš„ClikRecordå½“ä½œé”®ç›˜è¾“å…¥é˜Ÿåˆ—ï¼Œåœ¨timeräº‹ä»¶ä¸­å–å…¶ç¬¬ä¸€ä¸ªå­—ç¬¦ã€‚
    //åŒæ—¶ä»è¦åŠ å…¥kCode=newKeyï¼Œè‹¥ä¸åŠ çš„è¯ï¼Œåˆ™å‰é¢çš„kcodeå¯èƒ½ä¼šç­‰äºç°åœ¨çš„newkeyï¼Œå³ä½¿ä»–ä»¬æ²¡æœ‰æŒ¨ç€
    kCode = newKey;
    ClikRecord = ClikRecord + newKey;
} 
#endregion


```

æ­¤å¤„çš„â€œä¿®å¤BUGâ€å°±æ˜¯æˆ‘å¼€å§‹çš„æ—¶å€™è¯´çš„ï¼šæœ‰æ—¶ç”¨æˆ·æœ‰å¯èƒ½è¿ç»­è¾“å…¥å¤šä¸ªå€¼ï¼ˆå¦‚ä¸Šä¸Šä¸Šå·¦å·¦ï¼‰ï¼Œè¿™äº›å€¼è¾“å…¥çš„é—´éš”å¯èƒ½ä¼šå°äºtimerçš„intervalå€¼ï¼Œé€ æˆ
â€ä¸Šä¸€ä¸ªåŠ¨ä½œè¿˜æ²¡æœ‰å®Œæˆï¼Œç›´æ¥è¿›è¡Œä¸‹ä¸€ä¸ªåŠ¨ä½œäº†ï¼Œä»è€Œå¯¼è‡´è¯¯åˆ¤æ­»äº¡ï¼â€

#### iiii timer1 tickäº‹ä»¶ï¼š

è¿™ä¸ªå°±æ˜¯å¯¹è›‡è¿›è¡Œæ“ä½œåˆ·æ–°çš„äº‹ä»¶

```csharp
private void timer1_Tick(object sender, EventArgs e)
{
    //çª—ä½“ä¸‹éƒ¨çš„çŠ¶æ€æ ä¿æŒæ›´æ–°
    toolStripStatusLabel3.Text = "                å½“å‰å¾—åˆ†ï¼š" + Score.ToString();
    toolStripStatusLabel2.Text = "                 å½“å‰ç­‰çº§ï¼š" + (k + 1).ToString();
    
    if(Score%10==0 && Score/10<=2)
    {
        k = Score / 10; //å½“å¾—åˆ†åœ¨20ä»¥å†…æ—¶ï¼Œè®¾ç½®ç­‰çº§
        timer1.Interval = level[k]; //æ ¹æ®ä¸åŒçš„ç­‰çº§è®¾ç½®ä¸åŒçš„intervalå€¼ï¼Œä¸‹åŒ
    }
    if(Score%10==0 && Score/10==4)
    {
        k++;//ç­‰çº§åŠ 1
        timer1.Interval = level[k];
    }
    if (Score % 10 == 0 && Score / 10 == 6)
    {
        k++;
        timer1.Interval = level[k];
    }
    if (ClikRecord.Length>0)
    {
        kCode = ClikRecord.Substring(0, 1);//å–ç¬¬ä¸€ä¸ªå­—ç¬¦çš„å­—ç¬¦ä¸²
        ClikRecord = ClikRecord.Substring(1, ClikRecord.Length - 1);
    }
    SnakeMove();//è›‡ç§»åŠ¨æ–¹æ³•
}

```

#### iiiii ç›¸å…³æ–¹æ³•

##### è›‡ç§»åŠ¨çš„æ–¹æ³•

```csharp
private void SnakeMove()
{
    //1ã€æ“¦é™¤
    ClearSnake();
    //2ã€ä¿®æ”¹åæ ‡
    if (kCode != "P"&&kCode!="L")
    {
        for (int i = 0; i < snakeX.Count - 1; i++)//snakeX.Count-1å¿½ç•¥å¤´éƒ¨
        {
            snakeX[i] = snakeX[i + 1];
            snakeY[i] = snakeY[i + 1];
        }
        switch (kCode)
        {
            case "A":
                snakeX[snakeX.Count - 1]--;//å¤´éƒ¨åæ ‡å‡1
                break;
            case "W":
                snakeY[snakeX.Count - 1]--;
                break;
            case "D":
                snakeX[snakeX.Count - 1]++;
                break;
            case "S":
                snakeY[snakeX.Count - 1]++;
                break;
        }
    }
    //3ã€åƒé£Ÿç‰©
    if(EatFood())//è‹¥åƒåˆ°äº†é£Ÿç‰©
    {
        Score++;//å¾—åˆ†åŠ 1
        PlayerMusic(Sound.eat);//æ’­æ”¾åƒé£Ÿç‰©çš„å£°éŸ³
        snakeX.Add(0);
        snakeY.Add(0);//å¢åŠ ä¸€ä¸ªå…ƒç´ ï¼Œå€¼å…ˆä¸ç®¡ï¼Œå°±æŒ‰0å§
        //è›‡èº«è¿˜åŸ
        for(int i=snakeY.Count-1;i>0;i--)
        {
            snakeX[i] = snakeX[i - 1];
            snakeY[i] = snakeY[i - 1];
        }
        GreateFood();//é‡æ–°ç”Ÿæˆä¸€ä¸ªé£Ÿç‰©
    }

    //4ã€åˆ¤æ–­æ˜¯å¦å’¬åˆ°è‡ªå·±çš„èº«ä½“ï¼ˆåªéœ€åˆ¤æ–­å¤´éƒ¨ä¸èº«ä½“æ˜¯å¦é‡å å³å¯ï¼‰
    for (int i=0;i<snakeX.Count-1;i++)
    {
        if(snakeX[snakeX.Count-1]==snakeX[i]&&
            snakeY[snakeX.Count-1]==snakeY[i])
        {
            timer1.Stop();
            PlayerMusic(Sound.gameover);//æ’­æ”¾æ­»äº¡çš„éŸ³ä¹
            MessageBox.Show("ä½ æŠŠè‡ªå·±å’¬æ­»äº†ï¼ï¼ï¼");
            if(Score>MaxScore)//å¦‚æœæ‰“ç ´äº†è®°å½•
            {
                BreadARecord();//å°†æ–°çºªå½•å†™å…¥æ–‡ä»¶
            }
            this.Close();
            return;
        }
    }
    //5ã€åˆ¤æ–­è›‡æ˜¯å¦è¶…å‡ºè¾¹ç•Œ
    if(snakeX[snakeX.Count-1]<0||
        snakeY[snakeX.Count-1]<0||
        snakeX[snakeX.Count-1]>mapX-1||
        snakeY[snakeX.Count-1]>mapY-1)
    {
        timer1.Stop();
        PlayerMusic(Sound.gameover);//æ’­æ”¾æ­»äº¡çš„éŸ³ä¹
        MessageBox.Show("ä½ æ’å¢™ä¸Šäº†ï¼ï¼ï¼");
        if (Score > MaxScore)//å¦‚æœæ‰“ç ´äº†è®°å½•
        {
            BreadARecord();//å°†æ–°çºªå½•å†™å…¥æ–‡ä»¶
        }
        this.Close();
        return;
    }
    //6ã€é‡æ–°æ˜¾ç¤º
    GreateSnake();
}

```

##### æ“¦é™¤è›‡èº«

```csharp
private void ClearSnake()
{
    for (int i = 0; i < snakeX.Count; i++)
    {
        mapArray[snakeY[i], snakeX[i]].BackColor = Color.Green;//labelæ•°ç»„mapArry,æ ¹æ®è›‡èº«çš„ä¸‹æ ‡ï¼Œæ”¹å˜labelçš„é¢œè‰²å½“ä½œè›‡èº«
    }
}

```

##### ç”Ÿæˆé£Ÿç‰©

```csharp
private void GreateFood()
{
    bool flag;//æ ‡è®°æ˜¯å¦é‡å 
    do
    {
        flag = false;
        Random r = new Random();
        foodX = r.Next(mapX);//0-39
        foodY = r.Next(mapY);//0-19
        for(int i=0;i<snakeX.Count;i++)
        {
            if(snakeX[i]==foodX&&snakeY[i]==foodY)//å¦‚æœé£Ÿç‰©ä¸è›‡èº«é‡å 
            {
                flag = true;
                break;
            }
        }
    } while (flag);//è‹¥flagä¸ºtrueï¼Œåˆ™è¡¨ç¤ºé‡å ï¼Œåˆ™é‡æ–°å¾ªç¯
    
    mapArray[foodY, foodX].BackColor = Color.Red;
}


```

##### åˆ¤æ–­æ˜¯å¦åƒåˆ°é£Ÿç‰©

```csharp
private bool EatFood()
{
     if(snakeX[snakeX.Count-1]==foodX&&snakeY[snakeX.Count-1]==foodY)
     {
        return true;
     }
     return false;
}

```

##### ä»ç£ç›˜æ–‡ä»¶ä¸­è·å–å†å²æœ€é«˜åˆ†

```csharp
private void GetMaxScore()
{
    if(File.Exists(path)==false)//è‹¥ä¸å­˜åœ¨æ­¤æ–‡ä»¶
    {
        FileStream fs = new FileStream(path, FileMode.Create, FileAccess.Write);
        BinaryWriter bw = new BinaryWriter(fs);
        bw.Write(0);
        MaxScore = 0;
        fs.Close();
        bw.Close();
    }
    else
    {
        FileStream fs = new FileStream(path, FileMode.Open, FileAccess.Read);
        BinaryReader br = new BinaryReader(fs);
        MaxScore = br.ReadInt32();
        fs.Close();
        br.Close();
    }  
}

```

##### æ’­æ”¾éŸ³ä¹

åœ¨æ¸¸æˆå¼€å§‹ã€æ¸¸æˆç»“æŸã€åƒåˆ°é£Ÿç‰©å’Œæ’å¢™æ—¶å‘å‡ºç›¸åº”çš„å£°éŸ³

```csharp
SoundPlayer soundPlayer = new SoundPlayer();
private void PlayerMusic(Sound s)
{
    switch (s)
    {
        case Sound.background:
            soundPlayer.SoundLocation = "1.wav";
            break;
        case Sound.eat:
            soundPlayer.SoundLocation = "2.wav";
            break;
        case Sound.gameover:
            soundPlayer.SoundLocation = "4.wav";
            break;
    }
    soundPlayer.Play();//æ’­æ”¾
}


```

##### æ­»ä¹‹å‰åˆ¤æ–­æ˜¯å¦æ‰“ç ´äº†è®°å½•

```csharp
private void BreadARecord()
{
    //å°†æ–°çºªå½•å†™å…¥æ–‡ä»¶
    FileStream fs = new FileStream(path, FileMode.Truncate, FileAccess.Write);
    BinaryWriter bw = new BinaryWriter(fs);
    bw.Write(Score);
    fs.Close();
    bw.Close();
    //å‘Šè¯‰ç©å®¶è¿™ä¸ªå¥½æ¶ˆæ¯
    MessageBox.Show("æ­å–œä½ ï¼Œåˆ›é€ äº†æ–°çºªå½•ï¼ï¼ï¼");
}
#endregion

```

#### iiiiii timer2äº‹ä»¶

è¿™å°±ä¸€ä¸ªä½œç”¨ï¼šåˆ·æ–°åœ¨çŠ¶æ€æ çš„æ—¶é—´

```csharp
private void timer2_Tick(object sender, EventArgs e)
{
    toolStripStatusLabel1.Text = DateTime.Now.ToString();//æ—¥æœŸæ—¶é—´
}

```

## ä¸‰ã€æœ€å

### 1ï¼‰æ•´ä¸ªå·¥ç¨‹æ–‡ä»¶

å…¶å®ä¸Šé¢å·²ç»åŒ…å«äº†æ‰€æœ‰ä»£ç ã€‚ä½ åªéœ€è¦ç¨å¾®åŠ¨åŠ¨æ‰‹ï¼Œå°±èƒ½å†™å‡ºæ¥å®Œæ•´çš„ç¨‹åºäº†ã€‚

æˆ‘å»ºè®®ä½ è‡ªå·±åŠ¨æ‰‹å†™å†™ã€‚æˆ–è€…ä½ éœ€è¦å¸®å¿™çš„è¯å¯ä»¥è”ç³»æˆ‘ï¼

å¦‚æœä½ éœ€è¦å®Œæˆçš„æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥ç§ä¿¡æˆ‘ï¼

è¿™é‡Œæ˜¯å…¨éƒ¨ä»£ç ï¼š
<https://github.com/GoodZheng/Snake_.Net-csharp>

æœ‰å¸®åŠ©çš„è¯å¯ä»¥ç»™ä¸ªstarï¼Œå¤šè°¢å¤šè°¢ã€‚

### 2ï¼‰æ‰©å±•

æœ‰ä»€ä¹ˆæ‰©å±•çš„æ€è·¯å—ï¼Ÿ

1ã€å¼„æˆè›‡å¤´å’Œè›‡èº«ä¸ä¸€æ ·å§ï¼Œæ¯”å¦‚è¿™æ ·çš„è›‡ï¼Ÿå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆ~

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/460ca63c8edfa7084dd35015955a542f.png#pic_center)

2ã€é•¿æŒ‰ä¸€ä¸ªæ–¹å‘é”®èƒ½è¿›è¡ŒåŠ é€Ÿï¼Ÿ
  
3ã€ç”Ÿæˆä¸€äº›ç‰¹æ®Šçš„é£Ÿç‰©ï¼Œæ¯”å¦‚åƒäº†èƒ½
åŠ ä¸€æ¡å‘½
ï¼Ÿ

ç­‰ç­‰å§ï¼Œçœ‹ä½ è‡ªç”±å‘æŒ¥ã€‚

### 3ï¼‰æœ€å

æœ‰ä»€ä¹ˆå¯ä»¥æ”¹è¿›çš„åœ°æ–¹è¯·ç•™è¨€å‘ã€‚
  

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*
  
Donâ€™t forget follow and like!!!
  
å•¥æ„æ€ï¼Ÿæˆ‘æƒ³æƒ³â€¦â€¦
åˆ«å¿˜äº†ç‚¹èµ+å…³æ³¨
~~~~
~~~~~~------
~~~~~~å“ˆå“ˆå“ˆå“ˆå“ˆ~~~~~~~~~~~~
--------------

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/32758a86c51d2b5d356d773f576c8284.gif#pic_center)