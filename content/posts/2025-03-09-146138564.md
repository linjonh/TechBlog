---
layout: post
title: "SpringBoot参数校验Valid-与-Validated-详解"
date: 2025-03-09 20:56:23 +0800
description: "SpringBoot参数校验：@Valid 与 @Validated 详解"
keywords: "SpringBoot参数校验：@Valid 与 @Validated 详解"
categories: ['开发规范', 'Springcloud', 'Springboot']
tags: ['Validated', 'Valid', 'Spring', 'Java', 'Boot']
artid: "146138564"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146138564
    alt: "SpringBoot参数校验Valid-与-Validated-详解"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146138564
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146138564
cover: https://bing.ee123.net/img/rand?artid=146138564
image: https://bing.ee123.net/img/rand?artid=146138564
img: https://bing.ee123.net/img/rand?artid=146138564
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     SpringBoot参数校验：@Valid 与 @Validated 详解
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h2>
     <a id="SpringBootValid__Validated__0">
     </a>
     SpringBoot参数校验：@Valid 与 @Validated 详解
    </h2>
    <hr/>
    <h3>
     <a id="_4">
     </a>
     一、案例（参数校验的必要性）
    </h3>
    <p>
     传统方式（无注解）的缺点：
    </p>
    <pre><code class="prism language-java"><span class="token comment">// 需要手动校验每个字段，代码冗余且易出错</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">register</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 手动校验每个字段</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getEmail</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token operator">!</span><span class="token function">isValidEmail</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getEmail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token string">"邮箱格式错误"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getPassword</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">8</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token string">"密码长度需≥8位"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 校验逻辑与业务代码耦合，难以复用</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     <strong>
      问题总结
     </strong>
     ：
    </p>
    <ul>
     <li>
      <strong>
       代码冗余
      </strong>
      ：相同校验逻辑重复编写
     </li>
     <li>
      <strong>
       维护困难
      </strong>
      ：校验规则分散，修改成本高
     </li>
     <li>
      <strong>
       可读性差
      </strong>
      ：业务逻辑被大量
      <code>
       if-else
      </code>
      淹没
     </li>
    </ul>
    <p>
     <strong>
      注解方式的优势
     </strong>
     ：
    </p>
    <pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Email</span><span class="token punctuation">(</span>message <span class="token operator">=</span> <span class="token string">"邮箱格式不合法"</span><span class="token punctuation">)</span>  <span class="token comment">// 一行注解替代复杂校验</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> email<span class="token punctuation">;</span>
    
    <span class="token annotation punctuation">@Size</span><span class="token punctuation">(</span>min <span class="token operator">=</span> <span class="token number">8</span><span class="token punctuation">,</span> message <span class="token operator">=</span> <span class="token string">"密码长度需≥8位"</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> password<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">"/register"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">register</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Valid</span> <span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">User</span> user<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> 
    <span class="token comment">// 校验逻辑由框架自动处理</span>
    <span class="token keyword">return</span> <span class="token string">"success"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     <strong>
      核心优势
     </strong>
     ：
    </p>
    <ul>
     <li>
      声明式校验：通过注解自动完成参数验证
     </li>
     <li>
      代码简洁：减少冗余的
      <code>
       if-else
      </code>
      判断
     </li>
     <li>
      统一规范：标准化校验规则，降低维护成本
     </li>
    </ul>
    <hr/>
    <h3>
     <a id="Valid__54">
     </a>
     二、@Valid 注解
    </h3>
    <h4>
     <a id="_56">
     </a>
     简介
    </h4>
    <ul>
     <li>
      <strong>
       Java标准注解
      </strong>
      （javax.validation）
     </li>
     <li>
      用于触发 Bean Validation 校验机制
     </li>
     <li>
      可校验
      <strong>
       方法参数
      </strong>
      和
      <strong>
       成员属性
      </strong>
     </li>
    </ul>
    <h4>
     <a id="SpringBoot_62">
     </a>
     SpringBoot配置
    </h4>
    <pre><code class="prism language-xml"><span class="token comment">&lt;!-- pom.xml 必须依赖 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-validation<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre>
    <h4>
     <a id="_72">
     </a>
     使用示例
    </h4>
    <pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@NotNull</span><span class="token punctuation">(</span>message <span class="token operator">=</span> <span class="token string">"用户名不能为空"</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    
    <span class="token annotation punctuation">@Min</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token number">18</span><span class="token punctuation">,</span> message <span class="token operator">=</span> <span class="token string">"年龄必须≥18岁"</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> age<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">"/users"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">createUser</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Valid</span> <span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">User</span> user<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token comment">// 触发校验</span>
    <span class="token keyword">return</span> <span class="token string">"success"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <h4>
     <a id="_89">
     </a>
     全局异常处理（核心实践）
    </h4>
    <pre><code class="prism language-java"><span class="token annotation punctuation">@RestControllerAdvice</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GlobalExceptionHandler</span> <span class="token punctuation">{<!-- --></span>
    
    <span class="token comment">// 处理@Valid/@Validated抛出的校验异常</span>
    <span class="token annotation punctuation">@ExceptionHandler</span><span class="token punctuation">(</span><span class="token class-name">MethodArgumentNotValidException</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">handleValidationException</span><span class="token punctuation">(</span><span class="token class-name">MethodArgumentNotValidException</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> errors <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ex<span class="token punctuation">.</span><span class="token function">getBindingResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getFieldErrors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>error <span class="token operator">-&gt;</span> 
            errors<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>error<span class="token punctuation">.</span><span class="token function">getField</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> error<span class="token punctuation">.</span><span class="token function">getDefaultMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token class-name">ResponseEntity</span><span class="token punctuation">.</span><span class="token function">badRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">body</span><span class="token punctuation">(</span>errors<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     <strong>
      效果
     </strong>
     ：自动返回结构化错误信息（字段名+错误描述）
    </p>
    <hr/>
    <h3>
     <a id="Validated__110">
     </a>
     三、@Validated 注解
    </h3>
    <h4>
     <a id="_112">
     </a>
     简介
    </h4>
    <ul>
     <li>
      <strong>
       Spring框架注解
      </strong>
      （org.springframework.validation.annotation）(@Validated是Spring框架提供的，导入springboot的依赖就会自动导入这个依赖)
     </li>
     <li>
      支持分组校验（Group Validation）
     </li>
     <li>
      可标注在
      <strong>
       类、方法、参数
      </strong>
      上
     </li>
    </ul>
    <h4>
     <a id="_118">
     </a>
     核心功能
    </h4>
    <pre><code class="prism language-java"><span class="token comment">// 分组接口定义</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">CreateGroup</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span> 
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UpdateGroup</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@NotBlank</span><span class="token punctuation">(</span>groups <span class="token operator">=</span> <span class="token class-name">CreateGroup</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    
    <span class="token annotation punctuation">@NotNull</span><span class="token punctuation">(</span>groups <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token class-name">CreateGroup</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">UpdateGroup</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> age<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 使用分组校验</span>
<span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">"/users"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">createUser</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Validated</span><span class="token punctuation">(</span><span class="token class-name">CreateGroup</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">User</span> user<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token string">"success"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
    <h3>
     <a id="_140">
     </a>
     四、常用校验注解
    </h3>
    <p>
     最常用的注解：
    </p>
    <table>
     <thead>
      <tr>
       <th align="left">
        注解
       </th>
       <th align="left">
        说明
       </th>
       <th align="left">
        示例
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td align="left">
        <code>
         @NotNull
        </code>
       </td>
       <td align="left">
        值不能为null
       </td>
       <td align="left">
        <code>
         @NotNull(message="字段必填")
        </code>
       </td>
      </tr>
      <tr>
       <td align="left">
        <code>
         @NotBlank
        </code>
       </td>
       <td align="left">
        字符串非空（trim后）
       </td>
       <td align="left">
        适用于用户名、密码等
       </td>
      </tr>
      <tr>
       <td align="left">
        <code>
         @Min/@Max
        </code>
       </td>
       <td align="left">
        数值范围限制
       </td>
       <td align="left">
        <code>
         @Min(18)
        </code>
       </td>
      </tr>
      <tr>
       <td align="left">
        <code>
         @Pattern
        </code>
       </td>
       <td align="left">
        正则表达式校验
       </td>
       <td align="left">
        <code>
         @Pattern(regexp="^1[3-9]\\d{9}$")
        </code>
       </td>
      </tr>
      <tr>
       <td align="left">
        <code>
         @Valid
        </code>
       </td>
       <td align="left">
        嵌套对象校验
       </td>
       <td align="left">
        用于对象内的子对象属性
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     比较常用的注解：
    </p>
    <table>
     <thead>
      <tr>
       <th align="left">
        注解
       </th>
       <th align="left">
        适用类型
       </th>
       <th align="left">
        说明
       </th>
       <th align="left">
        示例
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td align="left">
        <code>
         @Future
        </code>
       </td>
       <td align="left">
        Date
       </td>
       <td align="left">
        日期必须在未来
       </td>
       <td align="left">
        <code>
         @Future(message="截止时间无效")
        </code>
       </td>
      </tr>
      <tr>
       <td align="left">
        <code>
         @Digits
        </code>
       </td>
       <td align="left">
        数值类型
       </td>
       <td align="left">
        整数位和小数位限制
       </td>
       <td align="left">
        <code>
         @Digits(integer=3, fraction=2)
        </code>
       </td>
      </tr>
      <tr>
       <td align="left">
        <code>
         @Negative
        </code>
       </td>
       <td align="left">
        数值类型
       </td>
       <td align="left">
        必须为负数
       </td>
       <td align="left">
        常用于财务系统
       </td>
      </tr>
      <tr>
       <td align="left">
        <code>
         @NotEmpty
        </code>
       </td>
       <td align="left">
        集合/字符串
       </td>
       <td align="left">
        集合非空或字符串长度&gt;0
       </td>
       <td align="left">
        比
        <code>
         @NotBlank
        </code>
        更宽松
       </td>
      </tr>
     </tbody>
    </table>
    <h4>
     <a id="_161">
     </a>
     组合注解（自定义）
    </h4>
    <pre><code class="prism language-java"><span class="token comment">// 自定义手机号校验注解</span>
<span class="token annotation punctuation">@Documented</span>
<span class="token annotation punctuation">@Constraint</span><span class="token punctuation">(</span>validatedBy <span class="token operator">=</span> <span class="token class-name">PhoneValidator</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token constant">FIELD</span><span class="token punctuation">,</span> <span class="token constant">PARAMETER</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token constant">RUNTIME</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">Phone</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">String</span> <span class="token function">message</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">"手机号格式不合法"</span><span class="token punctuation">;</span>
    <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">groups</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">Payload</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">payload</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 校验逻辑实现</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PhoneValidator</span> <span class="token keyword">implements</span> <span class="token class-name">ConstraintValidator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Phone</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Pattern</span> <span class="token constant">PHONE_PATTERN</span> <span class="token operator">=</span> <span class="token class-name">Pattern</span><span class="token punctuation">.</span><span class="token function">compile</span><span class="token punctuation">(</span><span class="token string">"^1[3-9]\\d{9}$"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isValid</span><span class="token punctuation">(</span><span class="token class-name">String</span> value<span class="token punctuation">,</span> <span class="token class-name">ConstraintValidatorContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> value <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token constant">PHONE_PATTERN</span><span class="token punctuation">.</span><span class="token function">matcher</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">matches</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     <strong>
      使用场景
     </strong>
     ：复用企业特定校验规则（如公司内部员工编号）
    </p>
    <hr/>
    <h3>
     <a id="Valid__Validated__190">
     </a>
     五、@Valid 与 @Validated 区别
    </h3>
    <table>
     <thead>
      <tr>
       <th align="left">
        特性
       </th>
       <th align="left">
        @Valid
       </th>
       <th align="left">
        @Validated
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td align="left">
        <strong>
         标准规范
        </strong>
       </td>
       <td align="left">
        JSR-303/JSR-349 标准
       </td>
       <td align="left">
        Spring 框架扩展
       </td>
      </tr>
      <tr>
       <td align="left">
        <strong>
         分组校验
        </strong>
       </td>
       <td align="left">
        不支持
       </td>
       <td align="left">
        支持
       </td>
      </tr>
      <tr>
       <td align="left">
        <strong>
         嵌套校验
        </strong>
       </td>
       <td align="left">
        需要显式添加@Valid
       </td>
       <td align="left">
        不自动支持嵌套校验
       </td>
      </tr>
      <tr>
       <td align="left">
        <strong>
         作用位置
        </strong>
       </td>
       <td align="left">
        方法参数、成员属性
       </td>
       <td align="left">
        类、方法、参数
       </td>
      </tr>
     </tbody>
    </table>
    <hr/>
    <h3>
     <a id="_201">
     </a>
     六.高频问题与最佳实践
    </h3>
    <h4>
     <a id="_203">
     </a>
     常见问题排查
    </h4>
    <ol>
     <li>
      <strong>
       注解不生效
      </strong>
      ：
      <ul>
       <li>
        检查是否忘记添加
        <code>
         @Valid
        </code>
        /
        <code>
         @Validated
        </code>
       </li>
       <li>
        确保校验对象未被
        <code>
         @RequestBody
        </code>
        等注解错误包裹
       </li>
      </ul>
     </li>
     <li>
      <strong>
       嵌套校验失败
      </strong>
      ：
      <ul>
       <li>
        确认在嵌套对象属性上添加了
        <code>
         @Valid
        </code>
       </li>
      </ul>
     </li>
    </ol>
    <h4>
     <a id="_211">
     </a>
     性能优化建议
    </h4>
    <ul>
     <li>
      <strong>
       避免过度校验
      </strong>
      ：在Controller层做基础校验，复杂逻辑放到Service层
     </li>
     <li>
      <strong>
       使用分组校验
      </strong>
      ：减少不必要的校验开销
     </li>
    </ul>
    <h4>
     <a id="_216">
     </a>
     高级技巧
    </h4>
    <pre><code class="prism language-java"><span class="token comment">// 动态分组校验（根据请求参数决定校验组）</span>
<span class="token annotation punctuation">@Validated</span>
<span class="token annotation punctuation">@RestController</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserController</span> <span class="token punctuation">{<!-- --></span>
    
    <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">"/users"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">createUser</span><span class="token punctuation">(</span>
        <span class="token annotation punctuation">@RequestParam</span> <span class="token class-name">String</span> type<span class="token punctuation">,</span>
        <span class="token annotation punctuation">@Validated</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token class-name">Default</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> type<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"vip"</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token class-name">VipGroup</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token operator">:</span> <span class="token class-name">Default</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span> 
        <span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">User</span> user
    <span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token string">"success"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     <strong>
      实现原理
     </strong>
     ：利用Spring EL表达式动态选择校验组
    </p>
    <hr/>
    <h3>
     <a id="_239">
     </a>
     七、重点总结
    </h3>
    <ol>
     <li>
      <strong>
       优先使用场景
      </strong>
      ：
      <ul>
       <li>
        优先使用
        <code>
         @Valid
        </code>
        的场景：嵌套对象校验、与非Spring框架整合
       </li>
       <li>
        优先使用
        <code>
         @Validated
        </code>
        的场景：需要分组校验、校验Service层方法参数
       </li>
      </ul>
     </li>
     <li>
      <strong>
       配置要点
      </strong>
      ：
      <ul>
       <li>
        要想使用
        <code>
         @Valid
        </code>
        必须添加
        <code>
         spring-boot-starter-validation
        </code>
        依赖
       </li>
       <li>
        校验失败会抛出
        <code>
         MethodArgumentNotValidException
        </code>
       </li>
      </ul>
     </li>
     <li>
      <strong>
       最佳实践
      </strong>
      ：
     </li>
    </ol>
    <pre><code class="prism language-java"><span class="token comment">// 嵌套校验示例</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Order</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Valid</span>  <span class="token comment">// 必须显式添加</span>
    <span class="token keyword">private</span> <span class="token class-name">User</span> user<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 分组校验示例</span>
<span class="token annotation punctuation">@Validated</span><span class="token punctuation">(</span><span class="token class-name">UpdateGroup</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">updateUser</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">User</span> user<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
</code></pre>
    <p>
     ​ 4.
     <strong>
      校验流程
     </strong>
     ：
     <br/>
     ​ 请求参数 → 注解声明 → 自动校验 → 异常处理（@ControllerAdvice）
    </p>
    <p>
     ​ 5.
     <strong>
      相较传统参数校验优势
     </strong>
     ：
    </p>
    <ul>
     <li>
      减少70%以上的参数校验代码量
     </li>
     <li>
      通过统一异常处理实现错误响应的标准化
     </li>
     <li>
      提升代码可维护性和团队协作效率
     </li>
    </ul>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f6d305f36333934393230332f:61727469636c652f64657461696c732f313436313338353634" class_="artid" style="display:none">
 </p>
</div>


