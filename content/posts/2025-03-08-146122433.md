---
layout: post
title: "OpenCV视频解码全流程详解"
date: 2025-03-08 20:50:38 +0800
description: "本文手把手拆解OpenCV视频解码的每个环节，从摄像头捕获到网络流处理一网打尽！文末附【帧率翻倍】的隐藏参数设置技巧。"
keywords: "OpenCV视频解码全流程详解"
categories: ['未分类']
tags: ['音视频', '计算机视觉', '深度学习', '人工智能', 'Opencv', 'Ffmpeg']
artid: "146122433"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146122433
    alt: "OpenCV视频解码全流程详解"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146122433
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146122433
cover: https://bing.ee123.net/img/rand?artid=146122433
image: https://bing.ee123.net/img/rand?artid=146122433
img: https://bing.ee123.net/img/rand?artid=146122433
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     OpenCV视频解码全流程详解
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-light" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <blockquote>
     <p>
      本文手把手拆解OpenCV视频解码的每个环节，从摄像头捕获到网络流处理一网打尽！文末附【帧率翻倍】的隐藏参数设置技巧。
     </p>
    </blockquote>
    <hr/>
    <h2>
     <a id="__3">
     </a>
     🛠️ 环境准备
    </h2>
    <h3>
     <a id="_4">
     </a>
     基础依赖
    </h3>
    <pre><code class="prism language-bash"><span class="token comment"># Ubuntu安装命令</span>
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> libopencv-dev python3-opencv ffmpeg
<span class="token comment"># 验证安装（输出应有FFMPEG=YES）</span>
pkg-config <span class="token parameter variable">--modversion</span> opencv4
</code></pre>
    <h2>
     <a id="__11">
     </a>
     🔧 四步核心解码流程
    </h2>
    <h3>
     <a id="1_12">
     </a>
     步骤1：视频源初始化
    </h3>
    <pre><code class="prism language-python"><span class="token keyword">import</span> cv2

<span class="token comment"># 支持多种输入源</span>
source <span class="token operator">=</span> <span class="token number">0</span>                  <span class="token comment"># 默认摄像头</span>
<span class="token comment"># source = "test.mp4"       # 本地文件</span>
<span class="token comment"># source = "rtsp://example" # 网络流</span>

cap <span class="token operator">=</span> cv2<span class="token punctuation">.</span>VideoCapture<span class="token punctuation">(</span>source<span class="token punctuation">)</span>

<span class="token comment"># 关键参数校验</span>
<span class="token keyword">if</span> <span class="token keyword">not</span> cap<span class="token punctuation">.</span>isOpened<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"无法打开视频源: </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>source<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
    exit<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># 获取视频属性</span>
fps <span class="token operator">=</span> cap<span class="token punctuation">.</span>get<span class="token punctuation">(</span>cv2<span class="token punctuation">.</span>CAP_PROP_FPS<span class="token punctuation">)</span>
width <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>cap<span class="token punctuation">.</span>get<span class="token punctuation">(</span>cv2<span class="token punctuation">.</span>CAP_PROP_FRAME_WIDTH<span class="token punctuation">)</span><span class="token punctuation">)</span>
height <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>cap<span class="token punctuation">.</span>get<span class="token punctuation">(</span>cv2<span class="token punctuation">.</span>CAP_PROP_FRAME_HEIGHT<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"视频规格：</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>width<span class="token punctuation">}</span></span><span class="token string">x</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>height<span class="token punctuation">}</span></span><span class="token string"> @ </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>fps<span class="token punctuation">:</span><span class="token format-spec">.2f</span><span class="token punctuation">}</span></span><span class="token string">fps"</span></span><span class="token punctuation">)</span>
</code></pre>
    <h3>
     <a id="2_34">
     </a>
     步骤2：帧读取循环（生产级写法）
    </h3>
    <pre><code class="prism language-python"><span class="token comment"># 配置重试机制</span>
max_retries <span class="token operator">=</span> <span class="token number">3</span>
current_retry <span class="token operator">=</span> <span class="token number">0</span>

<span class="token keyword">while</span> cap<span class="token punctuation">.</span>isOpened<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    ret<span class="token punctuation">,</span> frame <span class="token operator">=</span> cap<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span>
    
    <span class="token comment"># 异常处理三连击</span>
    <span class="token keyword">if</span> <span class="token keyword">not</span> ret<span class="token punctuation">:</span>
        <span class="token keyword">if</span> current_retry <span class="token operator">&lt;</span> max_retries<span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"帧读取失败，重试 </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>current_retry<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>max_retries<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
            current_retry <span class="token operator">+=</span> <span class="token number">1</span>
            <span class="token keyword">continue</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"连续失败超过阈值，终止读取"</span><span class="token punctuation">)</span>
            <span class="token keyword">break</span>
    
    current_retry <span class="token operator">=</span> <span class="token number">0</span>  <span class="token comment"># 重置重试计数器</span>
    
    <span class="token comment"># 基础处理示例</span>
    rgb_frame <span class="token operator">=</span> cv2<span class="token punctuation">.</span>cvtColor<span class="token punctuation">(</span>frame<span class="token punctuation">,</span> cv2<span class="token punctuation">.</span>COLOR_BGR2RGB<span class="token punctuation">)</span>
    
    <span class="token comment"># 显示监控窗口</span>
    cv2<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span><span class="token string">'Video Preview'</span><span class="token punctuation">,</span> rgb_frame<span class="token punctuation">)</span>
    
    <span class="token comment"># 退出控制（带延迟计算）</span>
    key <span class="token operator">=</span> cv2<span class="token punctuation">.</span>waitKey<span class="token punctuation">(</span><span class="token builtin">max</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token operator">/</span>fps<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span> <span class="token number">0xFF</span>
    <span class="token keyword">if</span> key <span class="token operator">==</span> <span class="token builtin">ord</span><span class="token punctuation">(</span><span class="token string">'q'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">break</span>
</code></pre>
    <h3>
     <a id="3_66">
     </a>
     步骤3：资源释放（防内存泄漏）
    </h3>
    <pre><code class="prism language-python"><span class="token comment"># 标准释放</span>
cap<span class="token punctuation">.</span>release<span class="token punctuation">(</span><span class="token punctuation">)</span>
cv2<span class="token punctuation">.</span>destroyAllWindows<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># 深度清理（处理异常退出）</span>
<span class="token keyword">if</span> <span class="token string">'cap'</span> <span class="token keyword">in</span> <span class="token builtin">locals</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">and</span> cap<span class="token punctuation">.</span>isOpened<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    cap<span class="token punctuation">.</span>release<span class="token punctuation">(</span><span class="token punctuation">)</span>
cv2<span class="token punctuation">.</span>waitKey<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>  <span class="token comment"># 确保窗口关闭</span>
<span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    cv2<span class="token punctuation">.</span>destroyAllWindows<span class="token punctuation">(</span><span class="token punctuation">)</span>
    cv2<span class="token punctuation">.</span>waitKey<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
步骤<span class="token number">4</span>：日志与监控（生产环境必备）
python
复制
<span class="token comment"># 记录关键指标</span>
<span class="token keyword">import</span> time

start_time <span class="token operator">=</span> time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span>
frame_count <span class="token operator">=</span> <span class="token number">0</span>

<span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
    <span class="token comment"># ...读取帧...</span>
    frame_count <span class="token operator">+=</span> <span class="token number">1</span>
    
    <span class="token comment"># 实时计算帧率</span>
    <span class="token keyword">if</span> frame_count <span class="token operator">%</span> <span class="token number">30</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
        elapsed <span class="token operator">=</span> time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> start_time
        real_fps <span class="token operator">=</span> frame_count <span class="token operator">/</span> elapsed
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"实时帧率: </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>real_fps<span class="token punctuation">:</span><span class="token format-spec">.2f</span><span class="token punctuation">}</span></span><span class="token string"> | 解码延迟: </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span><span class="token number">1000</span><span class="token operator">/</span>real_fps<span class="token punctuation">:</span><span class="token format-spec">.1f</span><span class="token punctuation">}</span></span><span class="token string">ms"</span></span><span class="token punctuation">)</span>
</code></pre>
    <h2>
     <a id="__98">
     </a>
     ⚠️ 常见问题排查指南
    </h2>
    <h3>
     <a id="1_99">
     </a>
     问题1：视频无法打开
    </h3>
    <pre><code class="prism language-python"><span class="token comment"># 诊断脚本</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"后端接口:"</span><span class="token punctuation">,</span> cap<span class="token punctuation">.</span>getBackendName<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"编解码器:"</span><span class="token punctuation">,</span> cap<span class="token punctuation">.</span>get<span class="token punctuation">(</span>cv2<span class="token punctuation">.</span>CAP_PROP_FOURCC<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"权限检查:"</span><span class="token punctuation">,</span> os<span class="token punctuation">.</span>access<span class="token punctuation">(</span>source<span class="token punctuation">,</span> os<span class="token punctuation">.</span>R_OK<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
    <h3>
     <a id="2_106">
     </a>
     问题2：花屏/绿帧
    </h3>
    <pre><code class="prism language-python"><span class="token comment"># 添加帧校验</span>
<span class="token keyword">if</span> frame <span class="token keyword">is</span> <span class="token boolean">None</span> <span class="token keyword">or</span> frame<span class="token punctuation">.</span>size <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"获取到空帧，跳过处理"</span><span class="token punctuation">)</span>
    <span class="token keyword">continue</span>

<span class="token comment"># 检查颜色通道</span>
<span class="token keyword">if</span> frame<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token number">3</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"异常颜色通道数: </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>frame<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
    frame <span class="token operator">=</span> cv2<span class="token punctuation">.</span>cvtColor<span class="token punctuation">(</span>frame<span class="token punctuation">,</span> cv2<span class="token punctuation">.</span>COLOR_BGRA2BGR<span class="token punctuation">)</span>
</code></pre>
    <h3>
     <a id="3_118">
     </a>
     问题3：内存暴涨
    </h3>
    <pre><code class="prism language-python"><span class="token comment"># 限制缓存帧数</span>
<span class="token keyword">from</span> collections <span class="token keyword">import</span> deque

frame_buffer <span class="token operator">=</span> deque<span class="token punctuation">(</span>maxlen<span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">)</span>  <span class="token comment"># 只保留最近30帧</span>

<span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
    ret<span class="token punctuation">,</span> frame <span class="token operator">=</span> cap<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span>
    frame_buffer<span class="token punctuation">.</span>append<span class="token punctuation">(</span>frame<span class="token punctuation">)</span>
</code></pre>
    <h2>
     <a id="__129">
     </a>
     🚀 性能调优参数
    </h2>
    <h3>
     <a id="1__130">
     </a>
     1. 硬件加速配置
    </h3>
    <p>
     ···python
    </p>
    <h2>
     <a id="CUDAOpenCV_contrib_132">
     </a>
     CUDA加速（需编译OpenCV contrib模块）
    </h2>
    <p>
     cap = cv2.VideoCapture(source, cv2.CAP_FFMPEG)
     <br/>
     cap.set(cv2.CAP_PROP_HW_ACCELERATION, cv2.VIDEO_ACCELERATION_ANY)
    </p>
    <pre><code>## 2. 网络流优化
```python
# RTSP专用参数
os.environ["OPENCV_FFMPEG_CAPTURE_OPTIONS"] = "rtsp_transport;tcp|buffer_size;1024000"
</code></pre>
    <h3>
     <a id="3__141">
     </a>
     3. 内存优化
    </h3>
    <pre><code class="prism language-python"><span class="token comment"># 使用UMat减少拷贝</span>
success<span class="token punctuation">,</span> frame <span class="token operator">=</span> cap<span class="token punctuation">.</span>read_umat<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 返回UMat对象</span>
</code></pre>
    <p>
     📌 终极技巧：
    </p>
    <ul>
     <li>
      开启FFmpeg日志分析：export OPENCV_FFMPEG_DEBUG=1
     </li>
     <li>
      强制指定解码器：cv2.CAP_PROP_CODEC_PREFERENCE= cv2.VIDEO_ACCELERATION_ANY
     </li>
     <li>
      实时监控GPU内存：nvidia-smi -l 1
     </li>
    </ul>
    <h3>
     <a id="__152">
     </a>
     🎥 视频解码核心流程图
    </h3>
    <div class="mermaid">
     <svg class="mermaid-svg" height="808.7424926757812" id="mermaid-svg-jupidPdlD0ojdUrd" viewbox="0 0 433.11248779296875 808.7424926757812" width="433.11248779296875" xmlns="http://www.w3.org/2000/svg">
      <style>
       #mermaid-svg-jupidPdlD0ojdUrd {font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}#mermaid-svg-jupidPdlD0ojdUrd .error-icon{fill:#552222;}#mermaid-svg-jupidPdlD0ojdUrd .error-text{fill:#552222;stroke:#552222;}#mermaid-svg-jupidPdlD0ojdUrd .edge-thickness-normal{stroke-width:2px;}#mermaid-svg-jupidPdlD0ojdUrd .edge-thickness-thick{stroke-width:3.5px;}#mermaid-svg-jupidPdlD0ojdUrd .edge-pattern-solid{stroke-dasharray:0;}#mermaid-svg-jupidPdlD0ojdUrd .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-svg-jupidPdlD0ojdUrd .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-svg-jupidPdlD0ojdUrd .marker{fill:#333333;stroke:#333333;}#mermaid-svg-jupidPdlD0ojdUrd .marker.cross{stroke:#333333;}#mermaid-svg-jupidPdlD0ojdUrd svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-svg-jupidPdlD0ojdUrd .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#333;}#mermaid-svg-jupidPdlD0ojdUrd .cluster-label text{fill:#333;}#mermaid-svg-jupidPdlD0ojdUrd .cluster-label span{color:#333;}#mermaid-svg-jupidPdlD0ojdUrd .label text,#mermaid-svg-jupidPdlD0ojdUrd span{fill:#333;color:#333;}#mermaid-svg-jupidPdlD0ojdUrd .node rect,#mermaid-svg-jupidPdlD0ojdUrd .node circle,#mermaid-svg-jupidPdlD0ojdUrd .node ellipse,#mermaid-svg-jupidPdlD0ojdUrd .node polygon,#mermaid-svg-jupidPdlD0ojdUrd .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaid-svg-jupidPdlD0ojdUrd .node .label{text-align:center;}#mermaid-svg-jupidPdlD0ojdUrd .node.clickable{cursor:pointer;}#mermaid-svg-jupidPdlD0ojdUrd .arrowheadPath{fill:#333333;}#mermaid-svg-jupidPdlD0ojdUrd .edgePath .path{stroke:#333333;stroke-width:2.0px;}#mermaid-svg-jupidPdlD0ojdUrd .flowchart-link{stroke:#333333;fill:none;}#mermaid-svg-jupidPdlD0ojdUrd .edgeLabel{background-color:#e8e8e8;text-align:center;}#mermaid-svg-jupidPdlD0ojdUrd .edgeLabel rect{opacity:0.5;background-color:#e8e8e8;fill:#e8e8e8;}#mermaid-svg-jupidPdlD0ojdUrd .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#mermaid-svg-jupidPdlD0ojdUrd .cluster text{fill:#333;}#mermaid-svg-jupidPdlD0ojdUrd .cluster span{color:#333;}#mermaid-svg-jupidPdlD0ojdUrd div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#mermaid-svg-jupidPdlD0ojdUrd :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}
      </style>
      <g>
       <g class="output">
        <g class="clusters">
        </g>
        <g class="edgePaths">
         <g class="edgePath LS-A LE-B" id="L-A-B" style="opacity: 1;">
          <path class="path" d="M285.1125030517578,54L285.1125030517578,58.166666666666664C285.1125030517578,62.333333333333336,285.1125030517578,70.66666666666667,285.1958363850911,79.08333371480306C285.2791697184245,87.50000076293945,285.4458363850911,96.00000152587889,285.5291697184245,100.25000190734863L285.6125030517578,104.50000228881835" marker-end="url(#arrowhead1070)" style="fill:none">
          </path>
          <defs>
           <marker id="arrowhead1070" markerheight="6" markerunits="strokeWidth" markerwidth="8" orient="auto" refx="9" refy="5" viewbox="0 0 10 10">
            <path class="arrowheadPath" d="M 0 0 L 10 5 L 0 10 z" style="stroke-width: 1; stroke-dasharray: 1, 0;">
            </path>
           </marker>
          </defs>
         </g>
         <g class="edgePath LS-B LE-C" id="L-B-C" style="opacity: 1;">
          <path class="path" d="M252.5727351909555,261.20272710379743L246.16269650108924,272.959354699128C239.75265781122297,284.7159822944587,226.93258043149038,308.22923748512,220.52254174162408,326.3191984137839C214.1125030517578,344.40915934244794,214.1125030517578,357.07582600911456,214.1125030517578,363.40915934244794L214.1125030517578,369.74249267578125" marker-end="url(#arrowhead1071)" style="fill:none">
          </path>
          <defs>
           <marker id="arrowhead1071" markerheight="6" markerunits="strokeWidth" markerwidth="8" orient="auto" refx="9" refy="5" viewbox="0 0 10 10">
            <path class="arrowheadPath" d="M 0 0 L 10 5 L 0 10 z" style="stroke-width: 1; stroke-dasharray: 1, 0;">
            </path>
           </marker>
          </defs>
         </g>
         <g class="edgePath LS-B LE-D" id="L-B-D" style="opacity: 1;">
          <path class="path" d="M318.65227250676327,261.2027300872307L324.89564426426233,272.95935718532246C331.13901602176145,284.71598428341423,343.62575953675963,308.22923847959777,349.86913129425875,326.31919891102285C356.1125030517578,344.40915934244794,356.1125030517578,357.07582600911456,356.1125030517578,363.40915934244794L356.1125030517578,369.74249267578125" marker-end="url(#arrowhead1072)" style="fill:none">
          </path>
          <defs>
           <marker id="arrowhead1072" markerheight="6" markerunits="strokeWidth" markerwidth="8" orient="auto" refx="9" refy="5" viewbox="0 0 10 10">
            <path class="arrowheadPath" d="M 0 0 L 10 5 L 0 10 z" style="stroke-width: 1; stroke-dasharray: 1, 0;">
            </path>
           </marker>
          </defs>
         </g>
         <g class="edgePath LS-C LE-E" id="L-C-E" style="opacity: 1;">
          <path class="path" d="M214.1125030517578,415.74249267578125L214.1125030517578,419.90915934244794C214.1125030517578,424.07582600911456,214.1125030517578,432.40915934244794,214.19583638509116,440.82582600911456C214.27916971842447,449.24249267578125,214.44583638509116,457.74249267578125,214.52916971842447,461.99249267578125L214.6125030517578,466.24249267578125" marker-end="url(#arrowhead1073)" style="fill:none">
          </path>
          <defs>
           <marker id="arrowhead1073" markerheight="6" markerunits="strokeWidth" markerwidth="8" orient="auto" refx="9" refy="5" viewbox="0 0 10 10">
            <path class="arrowheadPath" d="M 0 0 L 10 5 L 0 10 z" style="stroke-width: 1; stroke-dasharray: 1, 0;">
            </path>
           </marker>
          </defs>
         </g>
         <g class="edgePath LS-E LE-F" id="L-E-F" style="opacity: 1;">
          <path class="path" d="M178.20255158820822,546.8325412122317L157.67816824448667,559.1508664561567C137.15378490076512,571.4691917000815,96.10501821332201,596.1058421879314,75.58063486960046,614.7575007651897C55.056251525878906,633.4091593424479,55.056251525878906,646.0758260091146,55.056251525878906,652.4091593424479L55.056251525878906,658.7424926757812" marker-end="url(#arrowhead1074)" style="fill:none">
          </path>
          <defs>
           <marker id="arrowhead1074" markerheight="6" markerunits="strokeWidth" markerwidth="8" orient="auto" refx="9" refy="5" viewbox="0 0 10 10">
            <path class="arrowheadPath" d="M 0 0 L 10 5 L 0 10 z" style="stroke-width: 1; stroke-dasharray: 1, 0;">
            </path>
           </marker>
          </defs>
         </g>
         <g class="edgePath LS-E LE-G" id="L-E-G" style="opacity: 1;">
          <path class="path" d="M248.62117984134568,549.2338158861934L265.20306704308103,561.1519286844581C281.7849542448164,573.0700414827227,314.9487286482871,596.906267079252,331.53061585002246,615.1577132108499C348.1125030517578,633.4091593424479,348.1125030517578,646.0758260091146,348.1125030517578,652.4091593424479L348.1125030517578,658.7424926757812" marker-end="url(#arrowhead1075)" style="fill:none">
          </path>
          <defs>
           <marker id="arrowhead1075" markerheight="6" markerunits="strokeWidth" markerwidth="8" orient="auto" refx="9" refy="5" viewbox="0 0 10 10">
            <path class="arrowheadPath" d="M 0 0 L 10 5 L 0 10 z" style="stroke-width: 1; stroke-dasharray: 1, 0;">
            </path>
           </marker>
          </defs>
         </g>
         <g class="edgePath LS-F LE-H" id="L-F-H" style="opacity: 1;">
          <path class="path" d="M55.056251525878906,704.7424926757812L55.056251525878906,708.9091593424479C55.056251525878906,713.0758260091146,55.056251525878906,721.4091593424479,55.056251525878906,729.7424926757812C55.056251525878906,738.0758260091146,55.056251525878906,746.4091593424479,55.056251525878906,750.5758260091146L55.056251525878906,754.7424926757812" marker-end="url(#arrowhead1076)" style="fill:none">
          </path>
          <defs>
           <marker id="arrowhead1076" markerheight="6" markerunits="strokeWidth" markerwidth="8" orient="auto" refx="9" refy="5" viewbox="0 0 10 10">
            <path class="arrowheadPath" d="M 0 0 L 10 5 L 0 10 z" style="stroke-width: 1; stroke-dasharray: 1, 0;">
            </path>
           </marker>
          </defs>
         </g>
         <g class="edgePath LS-H LE-E" id="L-H-E" style="opacity: 1;">
          <path class="path" d="M94.37487204869589,754.7424926757812L101.49781054920622,750.5758260091146C108.62074904971654,746.4091593424479,122.86662605073718,738.0758260091146,129.9895645512475,725.9091593424479C137.1125030517578,713.7424926757812,137.1125030517578,697.7424926757812,137.1125030517578,679.5758260091146C137.1125030517578,661.4091593424479,137.1125030517578,641.0758260091146,145.7020803812487,620.3320700052722C154.29165771073954,599.5883140014297,171.4708123697213,578.434135327078,180.0603896992122,567.8570459899023L188.64996702870306,557.2799566527265" marker-end="url(#arrowhead1077)" style="fill:none">
          </path>
          <defs>
           <marker id="arrowhead1077" markerheight="6" markerunits="strokeWidth" markerwidth="8" orient="auto" refx="9" refy="5" viewbox="0 0 10 10">
            <path class="arrowheadPath" d="M 0 0 L 10 5 L 0 10 z" style="stroke-width: 1; stroke-dasharray: 1, 0;">
            </path>
           </marker>
          </defs>
         </g>
         <g class="edgePath LS-G LE-I" id="L-G-I" style="opacity: 1;">
          <path class="path" d="M348.1125030517578,704.7424926757812L348.1125030517578,708.9091593424479C348.1125030517578,713.0758260091146,348.1125030517578,721.4091593424479,348.1125030517578,729.7424926757812C348.1125030517578,738.0758260091146,348.1125030517578,746.4091593424479,348.1125030517578,750.5758260091146L348.1125030517578,754.7424926757812" marker-end="url(#arrowhead1078)" style="fill:none">
          </path>
          <defs>
           <marker id="arrowhead1078" markerheight="6" markerunits="strokeWidth" markerwidth="8" orient="auto" refx="9" refy="5" viewbox="0 0 10 10">
            <path class="arrowheadPath" d="M 0 0 L 10 5 L 0 10 z" style="stroke-width: 1; stroke-dasharray: 1, 0;">
            </path>
           </marker>
          </defs>
         </g>
         <g class="edgePath LS-I LE-E" id="L-I-E" style="opacity: 1;">
          <path class="path" d="M385.0083363850911,754.7424926757812L391.6923641628689,750.5758260091146C398.37639194064667,746.4091593424479,411.7444474962022,738.0758260091146,418.42847527398004,725.9091593424479C425.1125030517578,713.7424926757812,425.1125030517578,697.7424926757812,425.1125030517578,679.5758260091146C425.1125030517578,661.4091593424479,425.1125030517578,641.0758260091146,396.71941362086346,617.9689154400089C368.3263241899692,594.8620048709032,311.5401453281806,568.9815170660252,283.1470558972863,556.0412731635862L254.75396646639197,543.1010292611471" marker-end="url(#arrowhead1079)" style="fill:none">
          </path>
          <defs>
           <marker id="arrowhead1079" markerheight="6" markerunits="strokeWidth" markerwidth="8" orient="auto" refx="9" refy="5" viewbox="0 0 10 10">
            <path class="arrowheadPath" d="M 0 0 L 10 5 L 0 10 z" style="stroke-width: 1; stroke-dasharray: 1, 0;">
            </path>
           </marker>
          </defs>
         </g>
         <g class="edgePath LS-E LE-J" id="L-E-J" style="opacity: 1;">
          <path class="path" d="M214.6125030517578,583.2424926757812L214.52916971842447,589.4924926757812C214.44583638509116,595.7424926757812,214.27916971842447,608.2424926757812,214.19583638509116,620.8258260091146C214.1125030517578,633.4091593424479,214.1125030517578,646.0758260091146,214.1125030517578,652.4091593424479L214.1125030517578,658.7424926757812" marker-end="url(#arrowhead1080)" style="fill:none">
          </path>
          <defs>
           <marker id="arrowhead1080" markerheight="6" markerunits="strokeWidth" markerwidth="8" orient="auto" refx="9" refy="5" viewbox="0 0 10 10">
            <path class="arrowheadPath" d="M 0 0 L 10 5 L 0 10 z" style="stroke-width: 1; stroke-dasharray: 1, 0;">
            </path>
           </marker>
          </defs>
         </g>
        </g>
        <g class="edgeLabels">
         <g class="edgeLabel" style="opacity: 1;" transform="">
          <g class="label" transform="translate(0,0)">
           <rect height="0" rx="0" ry="0" width="0">
           </rect>
           <foreignobject height="0" width="0">
            <div style="display: inline-block; white-space: nowrap;">
             <span class="edgeLabel L-LS-A' L-LE-B" id="L-L-A-B">
             </span>
            </div>
           </foreignobject>
          </g>
         </g>
         <g class="edgeLabel" style="opacity: 1;" transform="translate(214.1125030517578,331.74249267578125)">
          <g class="label" transform="translate(-16,-13)">
           <rect height="26" rx="0" ry="0" width="32">
           </rect>
           <foreignobject height="26" width="32">
            <div style="display: inline-block; white-space: nowrap;">
             <span class="edgeLabel L-LS-B' L-LE-C" id="L-L-B-C">
              成功
             </span>
            </div>
           </foreignobject>
          </g>
         </g>
         <g class="edgeLabel" style="opacity: 1;" transform="translate(356.1125030517578,331.74249267578125)">
          <g class="label" transform="translate(-16,-13)">
           <rect height="26" rx="0" ry="0" width="32">
           </rect>
           <foreignobject height="26" width="32">
            <div style="display: inline-block; white-space: nowrap;">
             <span class="edgeLabel L-LS-B' L-LE-D" id="L-L-B-D">
              失败
             </span>
            </div>
           </foreignobject>
          </g>
         </g>
         <g class="edgeLabel" style="opacity: 1;" transform="">
          <g class="label" transform="translate(0,0)">
           <rect height="0" rx="0" ry="0" width="0">
           </rect>
           <foreignobject height="0" width="0">
            <div style="display: inline-block; white-space: nowrap;">
             <span class="edgeLabel L-LS-C' L-LE-E" id="L-L-C-E">
             </span>
            </div>
           </foreignobject>
          </g>
         </g>
         <g class="edgeLabel" style="opacity: 1;" transform="translate(55.056251525878906,620.7424926757812)">
          <g class="label" transform="translate(-16,-13)">
           <rect height="26" rx="0" ry="0" width="32">
           </rect>
           <foreignobject height="26" width="32">
            <div style="display: inline-block; white-space: nowrap;">
             <span class="edgeLabel L-LS-E' L-LE-F" id="L-L-E-F">
              成功
             </span>
            </div>
           </foreignobject>
          </g>
         </g>
         <g class="edgeLabel" style="opacity: 1;" transform="translate(348.1125030517578,620.7424926757812)">
          <g class="label" transform="translate(-16,-13)">
           <rect height="26" rx="0" ry="0" width="32">
           </rect>
           <foreignobject height="26" width="32">
            <div style="display: inline-block; white-space: nowrap;">
             <span class="edgeLabel L-LS-E' L-LE-G" id="L-L-E-G">
              失败
             </span>
            </div>
           </foreignobject>
          </g>
         </g>
         <g class="edgeLabel" style="opacity: 1;" transform="">
          <g class="label" transform="translate(0,0)">
           <rect height="0" rx="0" ry="0" width="0">
           </rect>
           <foreignobject height="0" width="0">
            <div style="display: inline-block; white-space: nowrap;">
             <span class="edgeLabel L-LS-F' L-LE-H" id="L-L-F-H">
             </span>
            </div>
           </foreignobject>
          </g>
         </g>
         <g class="edgeLabel" style="opacity: 1;" transform="">
          <g class="label" transform="translate(0,0)">
           <rect height="0" rx="0" ry="0" width="0">
           </rect>
           <foreignobject height="0" width="0">
            <div style="display: inline-block; white-space: nowrap;">
             <span class="edgeLabel L-LS-H' L-LE-E" id="L-L-H-E">
             </span>
            </div>
           </foreignobject>
          </g>
         </g>
         <g class="edgeLabel" style="opacity: 1;" transform="">
          <g class="label" transform="translate(0,0)">
           <rect height="0" rx="0" ry="0" width="0">
           </rect>
           <foreignobject height="0" width="0">
            <div style="display: inline-block; white-space: nowrap;">
             <span class="edgeLabel L-LS-G' L-LE-I" id="L-L-G-I">
             </span>
            </div>
           </foreignobject>
          </g>
         </g>
         <g class="edgeLabel" style="opacity: 1;" transform="">
          <g class="label" transform="translate(0,0)">
           <rect height="0" rx="0" ry="0" width="0">
           </rect>
           <foreignobject height="0" width="0">
            <div style="display: inline-block; white-space: nowrap;">
             <span class="edgeLabel L-LS-I' L-LE-E" id="L-L-I-E">
             </span>
            </div>
           </foreignobject>
          </g>
         </g>
         <g class="edgeLabel" style="opacity: 1;" transform="translate(214.1125030517578,620.7424926757812)">
          <g class="label" transform="translate(-16,-13)">
           <rect height="26" rx="0" ry="0" width="32">
           </rect>
           <foreignobject height="26" width="32">
            <div style="display: inline-block; white-space: nowrap;">
             <span class="edgeLabel L-LS-E' L-LE-J" id="L-L-E-J">
              结束
             </span>
            </div>
           </foreignobject>
          </g>
         </g>
        </g>
        <g class="nodes">
         <g class="node default" id="flowchart-A-858" style="opacity: 1;" transform="translate(285.1125030517578,31)">
          <rect class="label-container" height="46" rx="0" ry="0" width="68" x="-34" y="-23">
          </rect>
          <g class="label" transform="translate(0,0)">
           <g transform="translate(-24,-13)">
            <foreignobject height="26" width="48">
             <div style="display: inline-block; white-space: nowrap;">
              视频源
             </div>
            </foreignobject>
           </g>
          </g>
         </g>
         <g class="node default" id="flowchart-B-859" style="opacity: 1;" transform="translate(285.1125030517578,198.87124633789062)">
          <polygon class="label-container" points="94.87124862670899,0 189.74249725341798,-94.87124862670899 94.87124862670899,-189.74249725341798 0,-94.87124862670899" transform="translate(-94.87124862670899,94.87124862670899)">
          </polygon>
          <g class="label" transform="translate(0,0)">
           <g transform="translate(-72.4124984741211,-13)">
            <foreignobject height="26" width="144.8249969482422">
             <div style="display: inline-block; white-space: nowrap;">
              初始化VideoCapture
             </div>
            </foreignobject>
           </g>
          </g>
         </g>
         <g class="node default" id="flowchart-C-861" style="opacity: 1;" transform="translate(214.1125030517578,392.74249267578125)">
          <rect class="label-container" height="46" rx="0" ry="0" width="100" x="-50" y="-23">
          </rect>
          <g class="label" transform="translate(0,0)">
           <g transform="translate(-40,-13)">
            <foreignobject height="26" width="80">
             <div style="display: inline-block; white-space: nowrap;">
              读取元数据
             </div>
            </foreignobject>
           </g>
          </g>
         </g>
         <g class="node default" id="flowchart-D-863" style="opacity: 1;" transform="translate(356.1125030517578,392.74249267578125)">
          <rect class="label-container" height="46" rx="0" ry="0" width="84" x="-42" y="-23">
          </rect>
          <g class="label" transform="translate(0,0)">
           <g transform="translate(-32,-13)">
            <foreignobject height="26" width="64">
             <div style="display: inline-block; white-space: nowrap;">
              错误处理
             </div>
            </foreignobject>
           </g>
          </g>
         </g>
         <g class="node default" id="flowchart-E-865" style="opacity: 1;" transform="translate(214.1125030517578,524.2424926757812)">
          <polygon class="label-container" points="58.5,0 117,-58.5 58.5,-117 0,-58.5" transform="translate(-58.5,58.5)">
          </polygon>
          <g class="label" transform="translate(0,0)">
           <g transform="translate(-32,-13)">
            <foreignobject height="26" width="64">
             <div style="display: inline-block; white-space: nowrap;">
              逐帧读取
             </div>
            </foreignobject>
           </g>
          </g>
         </g>
         <g class="node default" id="flowchart-F-867" style="opacity: 1;" transform="translate(55.056251525878906,681.7424926757812)">
          <rect class="label-container" height="46" rx="0" ry="0" width="94.11250305175781" x="-47.056251525878906" y="-23">
          </rect>
          <g class="label" transform="translate(0,0)">
           <g transform="translate(-37.056251525878906,-13)">
            <foreignobject height="26" width="74.11250305175781">
             <div style="display: inline-block; white-space: nowrap;">
              解码为Mat
             </div>
            </foreignobject>
           </g>
          </g>
         </g>
         <g class="node default" id="flowchart-G-869" style="opacity: 1;" transform="translate(348.1125030517578,681.7424926757812)">
          <rect class="label-container" height="46" rx="0" ry="0" width="84" x="-42" y="-23">
          </rect>
          <g class="label" transform="translate(0,0)">
           <g transform="translate(-32,-13)">
            <foreignobject height="26" width="64">
             <div style="display: inline-block; white-space: nowrap;">
              异常处理
             </div>
            </foreignobject>
           </g>
          </g>
         </g>
         <g class="node default" id="flowchart-H-871" style="opacity: 1;" transform="translate(55.056251525878906,777.7424926757812)">
          <rect class="label-container" height="46" rx="0" ry="0" width="84" x="-42" y="-23">
          </rect>
          <g class="label" transform="translate(0,0)">
           <g transform="translate(-32,-13)">
            <foreignobject height="26" width="64">
             <div style="display: inline-block; white-space: nowrap;">
              图像处理
             </div>
            </foreignobject>
           </g>
          </g>
         </g>
         <g class="node default" id="flowchart-I-875" style="opacity: 1;" transform="translate(348.1125030517578,777.7424926757812)">
          <rect class="label-container" height="46" rx="0" ry="0" width="92.4000015258789" x="-46.20000076293945" y="-23">
          </rect>
          <g class="label" transform="translate(0,0)">
           <g transform="translate(-36.20000076293945,-13)">
            <foreignobject height="26" width="72.4000015258789">
             <div style="display: inline-block; white-space: nowrap;">
              重试/跳过
             </div>
            </foreignobject>
           </g>
          </g>
         </g>
         <g class="node default" id="flowchart-J-879" style="opacity: 1;" transform="translate(214.1125030517578,681.7424926757812)">
          <rect class="label-container" height="46" rx="0" ry="0" width="84" x="-42" y="-23">
          </rect>
          <g class="label" transform="translate(0,0)">
           <g transform="translate(-32,-13)">
            <foreignobject height="26" width="64">
             <div style="display: inline-block; white-space: nowrap;">
              释放资源
             </div>
            </foreignobject>
           </g>
          </g>
         </g>
        </g>
       </g>
      </g>
     </svg>
    </div>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f4d656d6f72795f6d756d752f:61727469636c652f64657461696c732f313436313232343333" class_="artid" style="display:none">
 </p>
</div>


