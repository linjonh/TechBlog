---
layout: post
title: "VLAN和Trunk实验"
date: 2025-03-13 15:50:42 +0800
description: "1.按照图示给所有路由器（此处充当pc机）配置IP地址2.SW1和SW2上分别创建vlan10和vlan20，要求R1和R3属于vlan10，R2和R4属于vlan203.SW1和SW2相连的接口配置类型为trunk类型，允许vlan10和vlan20通过4.测试效果，同一vlan的路由器可以互通，不同vlan的路由器无法互通。"
keywords: "VLAN和Trunk实验"
categories: ['未分类']
tags: ['网络', '智能路由器']
artid: "146233384"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146233384
    alt: "VLAN和Trunk实验"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146233384
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146233384
cover: https://bing.ee123.net/img/rand?artid=146233384
image: https://bing.ee123.net/img/rand?artid=146233384
img: https://bing.ee123.net/img/rand?artid=146233384
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     VLAN和Trunk实验
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h2>
     <a id="VLANTrunk_0">
     </a>
     VLAN和Trunk实验
    </h2>
    <h3>
     <a id="_2">
     </a>
     实验拓扑
    </h3>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/caf8b54de427443988e84010683e6bfa.png"/>
    </p>
    <h3>
     <a id="_9">
     </a>
     实验需求
    </h3>
    <p>
     1.按照图示给所有路由器（此处充当pc机）配置IP地址
    </p>
    <p>
     2.SW1和SW2上分别创建vlan10和vlan20，要求R1和R3属于vlan10，R2和R4属于vlan20
    </p>
    <p>
     3.SW1和SW2相连的接口配置类型为trunk类型，允许vlan10和vlan20通过
    </p>
    <p>
     4.测试效果，同一vlan的路由器可以互通，不同vlan的路由器无法互通
    </p>
    <h3>
     <a id="_21">
     </a>
     实验步骤
    </h3>
    <h6>
     <a id="1IP_23">
     </a>
     1.路由器配置IP地址
    </h6>
    <pre><code class="prism language-powershell">在R1上
&lt;H3C&gt;system-view 
System View: <span class="token keyword">return</span> to User View with Ctrl+Z<span class="token punctuation">.</span>
<span class="token namespace">[H3C]</span>sysname R1
<span class="token namespace">[R1]</span>int g0/0
<span class="token namespace">[R1-GigabitEthernet0/0]</span>ip address 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>1 24
<span class="token namespace">[R1-GigabitEthernet0/0]</span>display ip interface brief 
<span class="token operator">*</span>down: administratively down
<span class="token punctuation">(</span>s<span class="token punctuation">)</span>: spoofing  <span class="token punctuation">(</span>l<span class="token punctuation">)</span>: loopback
Interface           Physical Protocol IP address/Mask    VPN instance Description  
GE0/0               up       up       192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>1/24     <span class="token operator">--</span>           <span class="token operator">--</span>
GE0/1               down     down     <span class="token operator">--</span>                 <span class="token operator">--</span>           <span class="token operator">--</span>
GE0/2               down     down     <span class="token operator">--</span>                 <span class="token operator">--</span>           <span class="token operator">--</span>
GE5/0               down     down     <span class="token operator">--</span>                 <span class="token operator">--</span>           <span class="token operator">--</span>
GE5/1               down     down     <span class="token operator">--</span>                 <span class="token operator">--</span>           <span class="token operator">--</span>
GE6/0               down     down     <span class="token operator">--</span>                 <span class="token operator">--</span>           <span class="token operator">--</span>
GE6/1               down     down     <span class="token operator">--</span>                 <span class="token operator">--</span>           <span class="token operator">--</span>
Ser1/0              down     down     <span class="token operator">--</span>                 <span class="token operator">--</span>           <span class="token operator">--</span>
Ser2/0              down     down     <span class="token operator">--</span>                 <span class="token operator">--</span>           <span class="token operator">--</span>
Ser3/0              down     down     <span class="token operator">--</span>                 <span class="token operator">--</span>           <span class="token operator">--</span>
Ser4/0              down     down     <span class="token operator">--</span>                 <span class="token operator">--</span>           <span class="token operator">--</span>
<span class="token namespace">[R1-GigabitEthernet0/0]</span>

在R2上
&lt;H3C&gt;system-view 
System View: <span class="token keyword">return</span> to User View with Ctrl+Z<span class="token punctuation">.</span>
<span class="token namespace">[H3C]</span>sysname R2
<span class="token namespace">[R2]</span>int g0/0
<span class="token namespace">[R2-GigabitEthernet0/0]</span>ip address 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>2 24
<span class="token namespace">[R2-GigabitEthernet0/0]</span>display ip interface brief 
<span class="token operator">*</span>down: administratively down
<span class="token punctuation">(</span>s<span class="token punctuation">)</span>: spoofing  <span class="token punctuation">(</span>l<span class="token punctuation">)</span>: loopback
Interface           Physical Protocol IP address/Mask    VPN instance Description  
GE0/0               up       up       192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>2/24     <span class="token operator">--</span>           <span class="token operator">--</span>
GE0/1               down     down     <span class="token operator">--</span>                 <span class="token operator">--</span>           <span class="token operator">--</span>
GE0/2               down     down     <span class="token operator">--</span>                 <span class="token operator">--</span>           <span class="token operator">--</span>
GE5/0               down     down     <span class="token operator">--</span>                 <span class="token operator">--</span>           <span class="token operator">--</span>
GE5/1               down     down     <span class="token operator">--</span>                 <span class="token operator">--</span>           <span class="token operator">--</span>
GE6/0               down     down     <span class="token operator">--</span>                 <span class="token operator">--</span>           <span class="token operator">--</span>
GE6/1               down     down     <span class="token operator">--</span>                 <span class="token operator">--</span>           <span class="token operator">--</span>
Ser1/0              down     down     <span class="token operator">--</span>                 <span class="token operator">--</span>           <span class="token operator">--</span>
Ser2/0              down     down     <span class="token operator">--</span>                 <span class="token operator">--</span>           <span class="token operator">--</span>
Ser3/0              down     down     <span class="token operator">--</span>                 <span class="token operator">--</span>           <span class="token operator">--</span>
Ser4/0              down     down     <span class="token operator">--</span>                 <span class="token operator">--</span>           <span class="token operator">--</span>
<span class="token namespace">[R2-GigabitEthernet0/0]</span>

在R3上
&lt;H3C&gt;system-view 
System View: <span class="token keyword">return</span> to User View with Ctrl+Z<span class="token punctuation">.</span>
<span class="token namespace">[H3C]</span>sysname R3
<span class="token namespace">[R3]</span>int g0/0
<span class="token namespace">[R3-GigabitEthernet0/0]</span>ip address 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>3 24
<span class="token namespace">[R3-GigabitEthernet0/0]</span>display ip interface brief 
<span class="token operator">*</span>down: administratively down
<span class="token punctuation">(</span>s<span class="token punctuation">)</span>: spoofing  <span class="token punctuation">(</span>l<span class="token punctuation">)</span>: loopback
Interface           Physical Protocol IP address/Mask    VPN instance Description  
GE0/0               up       up       192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>3/24     <span class="token operator">--</span>           <span class="token operator">--</span>
GE0/1               down     down     <span class="token operator">--</span>                 <span class="token operator">--</span>           <span class="token operator">--</span>
GE0/2               down     down     <span class="token operator">--</span>                 <span class="token operator">--</span>           <span class="token operator">--</span>
GE5/0               down     down     <span class="token operator">--</span>                 <span class="token operator">--</span>           <span class="token operator">--</span>
GE5/1               down     down     <span class="token operator">--</span>                 <span class="token operator">--</span>           <span class="token operator">--</span>
GE6/0               down     down     <span class="token operator">--</span>                 <span class="token operator">--</span>           <span class="token operator">--</span>
GE6/1               down     down     <span class="token operator">--</span>                 <span class="token operator">--</span>           <span class="token operator">--</span>
Ser1/0              down     down     <span class="token operator">--</span>                 <span class="token operator">--</span>           <span class="token operator">--</span>
Ser2/0              down     down     <span class="token operator">--</span>                 <span class="token operator">--</span>           <span class="token operator">--</span>
Ser3/0              down     down     <span class="token operator">--</span>                 <span class="token operator">--</span>           <span class="token operator">--</span>
Ser4/0              down     down     <span class="token operator">--</span>                 <span class="token operator">--</span>           <span class="token operator">--</span>
<span class="token namespace">[R3-GigabitEthernet0/0]</span>

在R4上
&lt;H3C&gt;system-view 
System View: <span class="token keyword">return</span> to User View with Ctrl+Z<span class="token punctuation">.</span>
<span class="token namespace">[H3C]</span>sysname R4
<span class="token namespace">[R4]</span>int g0/0
<span class="token namespace">[R4-GigabitEthernet0/0]</span>ip address 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>4 24
<span class="token namespace">[R4-GigabitEthernet0/0]</span>display ip interface brief 
<span class="token operator">*</span>down: administratively down
<span class="token punctuation">(</span>s<span class="token punctuation">)</span>: spoofing  <span class="token punctuation">(</span>l<span class="token punctuation">)</span>: loopback
Interface           Physical Protocol IP address/Mask    VPN instance Description  
GE0/0               up       up       192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>4/24     <span class="token operator">--</span>           <span class="token operator">--</span>
GE0/1               down     down     <span class="token operator">--</span>                 <span class="token operator">--</span>           <span class="token operator">--</span>
GE0/2               down     down     <span class="token operator">--</span>                 <span class="token operator">--</span>           <span class="token operator">--</span>
GE5/0               down     down     <span class="token operator">--</span>                 <span class="token operator">--</span>           <span class="token operator">--</span>
GE5/1               down     down     <span class="token operator">--</span>                 <span class="token operator">--</span>           <span class="token operator">--</span>
GE6/0               down     down     <span class="token operator">--</span>                 <span class="token operator">--</span>           <span class="token operator">--</span>
GE6/1               down     down     <span class="token operator">--</span>                 <span class="token operator">--</span>           <span class="token operator">--</span>
Ser1/0              down     down     <span class="token operator">--</span>                 <span class="token operator">--</span>           <span class="token operator">--</span>
Ser2/0              down     down     <span class="token operator">--</span>                 <span class="token operator">--</span>           <span class="token operator">--</span>
Ser3/0              down     down     <span class="token operator">--</span>                 <span class="token operator">--</span>           <span class="token operator">--</span>
Ser4/0              down     down     <span class="token operator">--</span>                 <span class="token operator">--</span>           <span class="token operator">--</span>
<span class="token namespace">[R4-GigabitEthernet0/0]</span>
</code></pre>
    <h6>
     <a id="2_121">
     </a>
     2.测试四台路由器是否互通
    </h6>
    <pre><code class="prism language-powershell">在R1上测试
<span class="token namespace">[R1]</span>ping 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>2
Ping 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>2 <span class="token punctuation">(</span>192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>2<span class="token punctuation">)</span>: 56 <span class="token keyword">data</span> bytes<span class="token punctuation">,</span> press CTRL+C to <span class="token keyword">break</span>
56 bytes <span class="token keyword">from</span> 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>2: icmp_seq=0 ttl=255 time=1<span class="token punctuation">.</span>322 ms
56 bytes <span class="token keyword">from</span> 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>2: icmp_seq=1 ttl=255 time=0<span class="token punctuation">.</span>704 ms
56 bytes <span class="token keyword">from</span> 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>2: icmp_seq=2 ttl=255 time=0<span class="token punctuation">.</span>649 ms
56 bytes <span class="token keyword">from</span> 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>2: icmp_seq=3 ttl=255 time=0<span class="token punctuation">.</span>407 ms
56 bytes <span class="token keyword">from</span> 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>2: icmp_seq=4 ttl=255 time=0<span class="token punctuation">.</span>492 ms

<span class="token operator">--</span><span class="token operator">-</span> Ping statistics <span class="token keyword">for</span> 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>2 <span class="token operator">--</span><span class="token operator">-</span>
5 packet<span class="token punctuation">(</span>s<span class="token punctuation">)</span> transmitted<span class="token punctuation">,</span> 5 packet<span class="token punctuation">(</span>s<span class="token punctuation">)</span> received<span class="token punctuation">,</span> 0<span class="token punctuation">.</span>0% packet loss
round-trip min/avg/max/std-dev = 0<span class="token punctuation">.</span>407/0<span class="token punctuation">.</span>715/1<span class="token punctuation">.</span>322/0<span class="token punctuation">.</span>322 ms
<span class="token namespace">[R1]</span><span class="token operator">%</span>Mar 13 15:33:42:421 2025 R1 PING/6/PING_STATISTICS: Ping statistics <span class="token keyword">for</span> 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>2: 5 packet<span class="token punctuation">(</span>s<span class="token punctuation">)</span> transmitted<span class="token punctuation">,</span> 5 packet<span class="token punctuation">(</span>s<span class="token punctuation">)</span> received<span class="token punctuation">,</span> 0<span class="token punctuation">.</span>0% packet loss<span class="token punctuation">,</span> round-trip min/avg/max/std-dev = 0<span class="token punctuation">.</span>407/0<span class="token punctuation">.</span>715/1<span class="token punctuation">.</span>322/0<span class="token punctuation">.</span>322 ms<span class="token punctuation">.</span>

<span class="token namespace">[R1]</span>ping 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>3
Ping 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>3 <span class="token punctuation">(</span>192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>3<span class="token punctuation">)</span>: 56 <span class="token keyword">data</span> bytes<span class="token punctuation">,</span> press CTRL+C to <span class="token keyword">break</span>
56 bytes <span class="token keyword">from</span> 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>3: icmp_seq=0 ttl=255 time=2<span class="token punctuation">.</span>937 ms
56 bytes <span class="token keyword">from</span> 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>3: icmp_seq=1 ttl=255 time=1<span class="token punctuation">.</span>287 ms
56 bytes <span class="token keyword">from</span> 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>3: icmp_seq=2 ttl=255 time=1<span class="token punctuation">.</span>324 ms
56 bytes <span class="token keyword">from</span> 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>3: icmp_seq=3 ttl=255 time=0<span class="token punctuation">.</span>909 ms
56 bytes <span class="token keyword">from</span> 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>3: icmp_seq=4 ttl=255 time=1<span class="token punctuation">.</span>273 ms

<span class="token operator">--</span><span class="token operator">-</span> Ping statistics <span class="token keyword">for</span> 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>3 <span class="token operator">--</span><span class="token operator">-</span>
5 packet<span class="token punctuation">(</span>s<span class="token punctuation">)</span> transmitted<span class="token punctuation">,</span> 5 packet<span class="token punctuation">(</span>s<span class="token punctuation">)</span> received<span class="token punctuation">,</span> 0<span class="token punctuation">.</span>0% packet loss
round-trip min/avg/max/std-dev = 0<span class="token punctuation">.</span>909/1<span class="token punctuation">.</span>546/2<span class="token punctuation">.</span>937/0<span class="token punctuation">.</span>712 ms
<span class="token namespace">[R1]</span><span class="token operator">%</span>Mar 13 15:33:46:677 2025 R1 PING/6/PING_STATISTICS: Ping statistics <span class="token keyword">for</span> 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>3: 5 packet<span class="token punctuation">(</span>s<span class="token punctuation">)</span> transmitted<span class="token punctuation">,</span> 5 packet<span class="token punctuation">(</span>s<span class="token punctuation">)</span> received<span class="token punctuation">,</span> 0<span class="token punctuation">.</span>0% packet loss<span class="token punctuation">,</span> round-trip min/avg/max/std-dev = 0<span class="token punctuation">.</span>909/1<span class="token punctuation">.</span>546/2<span class="token punctuation">.</span>937/0<span class="token punctuation">.</span>712 ms<span class="token punctuation">.</span>

<span class="token namespace">[R1]</span>ping 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>4
Ping 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>4 <span class="token punctuation">(</span>192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>4<span class="token punctuation">)</span>: 56 <span class="token keyword">data</span> bytes<span class="token punctuation">,</span> press CTRL+C to <span class="token keyword">break</span>
56 bytes <span class="token keyword">from</span> 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>4: icmp_seq=0 ttl=255 time=2<span class="token punctuation">.</span>350 ms
56 bytes <span class="token keyword">from</span> 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>4: icmp_seq=1 ttl=255 time=1<span class="token punctuation">.</span>049 ms
56 bytes <span class="token keyword">from</span> 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>4: icmp_seq=2 ttl=255 time=1<span class="token punctuation">.</span>099 ms
56 bytes <span class="token keyword">from</span> 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>4: icmp_seq=3 ttl=255 time=1<span class="token punctuation">.</span>308 ms
56 bytes <span class="token keyword">from</span> 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>4: icmp_seq=4 ttl=255 time=1<span class="token punctuation">.</span>046 ms

<span class="token operator">--</span><span class="token operator">-</span> Ping statistics <span class="token keyword">for</span> 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>4 <span class="token operator">--</span><span class="token operator">-</span>
5 packet<span class="token punctuation">(</span>s<span class="token punctuation">)</span> transmitted<span class="token punctuation">,</span> 5 packet<span class="token punctuation">(</span>s<span class="token punctuation">)</span> received<span class="token punctuation">,</span> 0<span class="token punctuation">.</span>0% packet loss
round-trip min/avg/max/std-dev = 1<span class="token punctuation">.</span>046/1<span class="token punctuation">.</span>370/2<span class="token punctuation">.</span>350/0<span class="token punctuation">.</span>499 ms
<span class="token namespace">[R1]</span><span class="token operator">%</span>Mar 13 15:33:50:508 2025 R1 PING/6/PING_STATISTICS: Ping statistics <span class="token keyword">for</span> 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>4: 5 packet<span class="token punctuation">(</span>s<span class="token punctuation">)</span> transmitted<span class="token punctuation">,</span> 5 packet<span class="token punctuation">(</span>s<span class="token punctuation">)</span> received<span class="token punctuation">,</span> 0<span class="token punctuation">.</span>0% packet loss<span class="token punctuation">,</span> round-trip min/avg/max/std-dev = 1<span class="token punctuation">.</span>046/1<span class="token punctuation">.</span>370/2<span class="token punctuation">.</span>350/0<span class="token punctuation">.</span>499 ms<span class="token punctuation">.</span>

</code></pre>
    <h6>
     <a id="3SW1SW2vlan10vlan20SW1SW2g101vlan10g102vlan20_168">
     </a>
     3.
     <strong>
      在交换机SW1和SW2上分别创建vlan10和vlan20，
      <strong>
       SW1和SW2都把g1/0/1接口加入vlan10，g1/0/2接口加入vlan20
      </strong>
     </strong>
    </h6>
    <pre><code class="prism language-powershell">在SW1上
&lt;H3C&gt;system-view 
System View: <span class="token keyword">return</span> to User View with Ctrl+Z<span class="token punctuation">.</span>
<span class="token namespace">[H3C]</span>sysname SW1
<span class="token namespace">[SW1]</span>vlan 10
<span class="token namespace">[SW1-vlan10]</span>port g1/0/1
<span class="token namespace">[SW1-vlan10]</span>qu
<span class="token namespace">[SW1]</span>vlan 20
<span class="token namespace">[SW1-vlan20]</span>port g1/0/2
<span class="token namespace">[SW1-vlan20]</span>qu
<span class="token namespace">[SW1]</span>

在SW2上
&lt;H3C&gt;system-view 
System View: <span class="token keyword">return</span> to User View with Ctrl+Z<span class="token punctuation">.</span>
<span class="token namespace">[H3C]</span>sysname SW2
<span class="token namespace">[SW2]</span>vlan 10
<span class="token namespace">[SW2-vlan10]</span>port g1/0/1
<span class="token namespace">[SW2-vlan10]</span>qu
<span class="token namespace">[SW2]</span>vlan 20
<span class="token namespace">[SW2-vlan20]</span>port g1/0/2
<span class="token namespace">[SW2-vlan20]</span>qu
<span class="token namespace">[SW2]</span>
</code></pre>
    <h6>
     <a id="4SW1SW2g103trunkvlan10vlan20_198">
     </a>
     4.
     <strong>
      SW1和SW2的g1/0/3接口都配置为trunk，允许vlan10和vlan20通过
     </strong>
    </h6>
    <pre><code class="prism language-powershell">在SW1上把g1/0/3接口配置为Trunk类型，并允许vlan10和vlan20通过
<span class="token namespace">[SW1]</span>int g1/0/3
<span class="token namespace">[SW1-GigabitEthernet1/0/3]</span>port link-<span class="token function">type</span> trunk        		<span class="token operator">/</span><span class="token operator">/</span>将接口类型改为trunk
<span class="token namespace">[SW1-GigabitEthernet1/0/3]</span>port trunk permit vlan 10 20 		<span class="token operator">/</span><span class="token operator">/</span>放行vlan10和vlan20
<span class="token namespace">[SW1-GigabitEthernet1/0/3]</span>display this						<span class="token operator">/</span><span class="token operator">/</span>查看当前接口下配置信息
<span class="token comment">#</span>
interface GigabitEthernet1/0/3
 port link-mode bridge
 port link-<span class="token function">type</span> trunk
 port trunk permit vlan 1 10 20
 combo enable fiber
<span class="token comment">#</span>
<span class="token keyword">return</span>
<span class="token namespace">[SW1-GigabitEthernet1/0/3]</span>

在SW2上把g1/0/3接口配置为Trunk类型，并允许vlan10和vlan20通过
<span class="token namespace">[SW2]</span>int g1/0/3
<span class="token namespace">[SW2-GigabitEthernet1/0/3]</span>port link-<span class="token function">type</span> trunk
<span class="token namespace">[SW2-GigabitEthernet1/0/3]</span>port trunk permit vlan 10 20
<span class="token namespace">[SW2-GigabitEthernet1/0/3]</span>display this
<span class="token comment">#</span>
interface GigabitEthernet1/0/3
 port link-mode bridge
 port link-<span class="token function">type</span> trunk
 port trunk permit vlan 1 10 20
 combo enable fiber
<span class="token comment">#</span>
<span class="token keyword">return</span>
<span class="token namespace">[SW2-GigabitEthernet1/0/3]</span>
</code></pre>
    <h6>
     <a id="5R1PINGR3PINGR2R4_234">
     </a>
     5.
     <strong>
      测试结果，R1可以PING通R3，但无法PING通R2和R4
     </strong>
    </h6>
    <pre><code class="prism language-powershell">在R1上pingR2
<span class="token namespace">[R1]</span>ping 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>2
Ping 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>2 <span class="token punctuation">(</span>192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>2<span class="token punctuation">)</span>: 56 <span class="token keyword">data</span> bytes<span class="token punctuation">,</span> press CTRL+C to <span class="token keyword">break</span>
Request time out
Request time out
Request time out
Request time out
Request time out

<span class="token operator">--</span><span class="token operator">-</span> Ping statistics <span class="token keyword">for</span> 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>2 <span class="token operator">--</span><span class="token operator">-</span>
5 packet<span class="token punctuation">(</span>s<span class="token punctuation">)</span> transmitted<span class="token punctuation">,</span> 0 packet<span class="token punctuation">(</span>s<span class="token punctuation">)</span> received<span class="token punctuation">,</span> 100<span class="token punctuation">.</span>0% packet loss
<span class="token namespace">[R1]</span><span class="token operator">%</span>Mar 13 15:44:47:912 2025 R1 PING/6/PING_STATISTICS: Ping statistics <span class="token keyword">for</span> 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>2: 5 packet<span class="token punctuation">(</span>s<span class="token punctuation">)</span> transmitted<span class="token punctuation">,</span> 0 packet<span class="token punctuation">(</span>s<span class="token punctuation">)</span> received<span class="token punctuation">,</span> 100<span class="token punctuation">.</span>0% packet loss<span class="token punctuation">.</span>

在R1上pingR3
<span class="token namespace">[R1]</span>ping 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>3
Ping 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>3 <span class="token punctuation">(</span>192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>3<span class="token punctuation">)</span>: 56 <span class="token keyword">data</span> bytes<span class="token punctuation">,</span> press CTRL+C to <span class="token keyword">break</span>
56 bytes <span class="token keyword">from</span> 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>3: icmp_seq=0 ttl=255 time=1<span class="token punctuation">.</span>053 ms
56 bytes <span class="token keyword">from</span> 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>3: icmp_seq=1 ttl=255 time=0<span class="token punctuation">.</span>615 ms
56 bytes <span class="token keyword">from</span> 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>3: icmp_seq=2 ttl=255 time=1<span class="token punctuation">.</span>157 ms
56 bytes <span class="token keyword">from</span> 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>3: icmp_seq=3 ttl=255 time=1<span class="token punctuation">.</span>041 ms
56 bytes <span class="token keyword">from</span> 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>3: icmp_seq=4 ttl=255 time=1<span class="token punctuation">.</span>410 ms

<span class="token operator">--</span><span class="token operator">-</span> Ping statistics <span class="token keyword">for</span> 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>3 <span class="token operator">--</span><span class="token operator">-</span>
5 packet<span class="token punctuation">(</span>s<span class="token punctuation">)</span> transmitted<span class="token punctuation">,</span> 5 packet<span class="token punctuation">(</span>s<span class="token punctuation">)</span> received<span class="token punctuation">,</span> 0<span class="token punctuation">.</span>0% packet loss
round-trip min/avg/max/std-dev = 0<span class="token punctuation">.</span>615/1<span class="token punctuation">.</span>055/1<span class="token punctuation">.</span>410/0<span class="token punctuation">.</span>257 ms
<span class="token namespace">[R1]</span><span class="token operator">%</span>Mar 13 15:45:13:276 2025 R1 PING/6/PING_STATISTICS: Ping statistics <span class="token keyword">for</span> 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>3: 5 packet<span class="token punctuation">(</span>s<span class="token punctuation">)</span> transmitted<span class="token punctuation">,</span> 5 packet<span class="token punctuation">(</span>s<span class="token punctuation">)</span> received<span class="token punctuation">,</span> 0<span class="token punctuation">.</span>0% packet loss<span class="token punctuation">,</span> round-trip min/avg/max/std-dev = 0<span class="token punctuation">.</span>615/1<span class="token punctuation">.</span>055/1<span class="token punctuation">.</span>410/0<span class="token punctuation">.</span>257 ms<span class="token punctuation">.</span>

在R1上pingR4
<span class="token namespace">[R1]</span>ping 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>4
Ping 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>4 <span class="token punctuation">(</span>192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>4<span class="token punctuation">)</span>: 56 <span class="token keyword">data</span> bytes<span class="token punctuation">,</span> press CTRL+C to <span class="token keyword">break</span>
Request time out
Request time out
Request time out
Request time out
Request time out

<span class="token operator">--</span><span class="token operator">-</span> Ping statistics <span class="token keyword">for</span> 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>4 <span class="token operator">--</span><span class="token operator">-</span>
5 packet<span class="token punctuation">(</span>s<span class="token punctuation">)</span> transmitted<span class="token punctuation">,</span> 0 packet<span class="token punctuation">(</span>s<span class="token punctuation">)</span> received<span class="token punctuation">,</span> 100<span class="token punctuation">.</span>0% packet loss
<span class="token namespace">[R1]</span><span class="token operator">%</span>Mar 13 15:45:46:526 2025 R1 PING/6/PING_STATISTICS: Ping statistics <span class="token keyword">for</span> 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>4: 5 packet<span class="token punctuation">(</span>s<span class="token punctuation">)</span> transmitted<span class="token punctuation">,</span> 0 packet<span class="token punctuation">(</span>s<span class="token punctuation">)</span> received<span class="token punctuation">,</span> 100<span class="token punctuation">.</span>0% packet loss<span class="token punctuation">.</span>

</code></pre>
    <p>
     <strong>
      实验效果成功实现
     </strong>
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f6d305f36343530353735322f:61727469636c652f64657461696c732f313436323333333834" class_="artid" style="display:none">
 </p>
</div>


