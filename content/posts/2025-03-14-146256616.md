---
layout: post
title: "Vue上传PDF功能"
date: 2025-03-14 16:50:18 +0800
description: "JavaScript/TypeScript 中的模块导入语法，用于从 Element Plus 组件库中导入 ElUpload 和 ElDialog 两个组件从 @element-plus/icons-vue 图标库中按需导入多个图标的语法。UploadFilled：一个“上传”图标，通常用于表示文件上传操作。导出一个 Vue 组件，使其可以在其他文件中被导入和使用。"
keywords: "【Vue】上传PDF功能"
categories: ['Vue', 'Flask']
tags: ['前端', 'Vue', 'Pdf']
artid: "146256616"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146256616
    alt: "Vue上传PDF功能"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146256616
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146256616
cover: https://bing.ee123.net/img/rand?artid=146256616
image: https://bing.ee123.net/img/rand?artid=146256616
img: https://bing.ee123.net/img/rand?artid=146256616
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     【Vue】上传PDF功能
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-light" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
    </p>
    <p>
    </p>
    <h2>
     <a id="Vue_1">
     </a>
     一、Vue代码结构
    </h2>
    <hr/>
    <p>
     Vue 组件的代码通常主要分为以下几个部分：
    </p>
    <p>
     template：定义组件的 HTML 结构。
     <br/>
     script：定义组件的逻辑（数据、方法、生命周期等）。
     <br/>
     style：定义组件的样式。
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/4978ac9e7ef84801badf988da6169e8e.png"/>
    </p>
    <h3>
     <a id="1_templateHTML_9">
     </a>
     1. template（HTML结构部分）
    </h3>
    <p>
     主界面的按钮点击弹出详情界面的对话框
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/3658da5151fa4e81a58977421f546af9.png"/>
    </p>
    <pre><code class="prism language-bash"><span class="token operator">&lt;</span>el-dialog
  v-model<span class="token operator">=</span><span class="token string">"uploadFileDialogVisible"</span>
   <span class="token assign-left variable">title</span><span class="token operator">=</span><span class="token string">"上传文件"</span>
   <span class="token assign-left variable">width</span><span class="token operator">=</span><span class="token string">"600px"</span>
   @open<span class="token operator">=</span><span class="token string">"handleDialogOpen"</span>
 <span class="token operator">&gt;</span>
   <span class="token operator">&lt;</span>el-upload
     <span class="token assign-left variable">class</span><span class="token operator">=</span><span class="token string">"upload-demo"</span>
     drag
     <span class="token assign-left variable">action</span><span class="token operator">=</span><span class="token string">"http://140.207.201.32:8090/upload/upload"</span>
     multiple
   <span class="token operator">&gt;</span>
     <span class="token operator">&lt;</span>el-icon <span class="token assign-left variable">class</span><span class="token operator">=</span><span class="token string">"el-icon--upload"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>upload-filled /<span class="token operator">&gt;</span><span class="token operator">&lt;</span>/el-icon<span class="token operator">&gt;</span>
     <span class="token operator">&lt;</span>div <span class="token assign-left variable">class</span><span class="token operator">=</span><span class="token string">"el-upload__text"</span><span class="token operator">&gt;</span>
       拖拽文件到此处或 <span class="token operator">&lt;</span>em<span class="token operator">&gt;</span>点击上传<span class="token operator">&lt;</span>/em<span class="token operator">&gt;</span>
     <span class="token operator">&lt;</span>/div<span class="token operator">&gt;</span>
     <span class="token operator">&lt;</span>template <span class="token comment">#tip&gt;</span>
       <span class="token operator">&lt;</span>div <span class="token assign-left variable">class</span><span class="token operator">=</span><span class="token string">"el-upload__tip"</span><span class="token operator">&gt;</span>
         支持上传 PDF、Word、TXT 等文档文件
       <span class="token operator">&lt;</span>/div<span class="token operator">&gt;</span>
     <span class="token operator">&lt;</span>/template<span class="token operator">&gt;</span>
   <span class="token operator">&lt;</span>/el-upload<span class="token operator">&gt;</span>
 <span class="token operator">&lt;</span>/el-dialog<span class="token operator">&gt;</span>
</code></pre>
    <p>
     外层容器：el-dialog，这是 Element Plus 提供的对话框组件，用于弹出一个模态窗口。
     <br/>
     属性：v-model=“uploadFileDialogVisible”：
     <br/>
     使用 Vue 的 v-model 双向绑定控制对话框的显示和隐藏。uploadFileDialogVisible 是一个布尔值，当为 true 时，对话框显示；当为 false 时，对话框隐藏。
     <br/>
     title=“上传文件”：设置对话框的标题为“上传文件”。
     <br/>
     width=“600px”：设置对话框的宽度为 600 像素。
     <br/>
     @open=“handleDialogOpen”：监听对话框打开的事件，当对话框打开时，调用 handleDialogOpen 方法
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/d51032a1363241a681cdcb11234b64b5.png"/>
    </p>
    <ul>
     <li>
      【属性解释】
      <br/>
      使用基于 Element Plus 组件库的文件上传组件 (el-upload)，用于实现文件上传功能。
      <br/>
      drag：启用拖拽上传功能，用户可以将文件拖拽到上传区域。
      <br/>
      multiple：允许用户一次选择多个文件上传。
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/4021950bc87b447a9823b62464749001.png">
       <br/>
       auto-upload=“false”：设置为 false，表示用户选择文件后不会自动上传，需要手动触发上传操作。
       <br/>
       action=“http://140.207xxx:8081/uploadpdf”：指定文件上传的目标地址（后端接口地址）。
       <br/>
       on-success=“handleUploadSuccess”：文件上传成功时的回调函数，handleUploadSuccess 是用户自定义的方法。
       <br/>
       before-upload=“beforeUpload”：文件上传前的钩子函数，beforeUpload 是用户自定义的方法，通常用于文件校验（如文件类型、大小等）
       <br/>
       name=“file”：上传文件的字段名，后端接口通过该字段名获取文件。
       <br/>
       accept=“.pdf,.doc,.docx,.md,.txt,.png,.jpg,.jpeg”：限制用户只能选择指定类型的文件（PDF、Word、Markdown、TXT、PNG、JPG）。
      </img>
     </li>
     <li>
      【插槽内容】
      <br/>
      默认插槽：上传区域的内容，包括图标和提示文字。
     </li>
    </ul>
    <pre><code class="prism language-bash"><span class="token operator">&lt;</span>el-icon <span class="token assign-left variable">class</span><span class="token operator">=</span><span class="token string">"el-icon--upload"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>upload-filled /<span class="token operator">&gt;</span><span class="token operator">&lt;</span>/el-icon<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>div <span class="token assign-left variable">class</span><span class="token operator">=</span><span class="token string">"el-upload__text"</span><span class="token operator">&gt;</span>
  拖拽文件到此处或 <span class="token operator">&lt;</span>em<span class="token operator">&gt;</span>点击上传<span class="token operator">&lt;</span>/em<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>/div<span class="token operator">&gt;</span>
</code></pre>
    <p>
     el-icon 是 Element Plus 的图标组件，upload-filled 是上传图标。
     <br/>
     el-upload__text 是上传区域的提示文字。
    </p>
    <p>
     tip 插槽：上传区域的额外提示信息。
    </p>
    <pre><code class="prism language-bash"><span class="token operator">&lt;</span>template <span class="token comment">#tip&gt;</span>
  <span class="token operator">&lt;</span>div <span class="token assign-left variable">class</span><span class="token operator">=</span><span class="token string">"el-upload__tip"</span><span class="token operator">&gt;</span>支持上传 PDF、Word、Markdown、TXT 文件以及 PNG/JPG 图片，单个文件不超过 10MB<span class="token operator">&lt;</span>/div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>/template<span class="token operator">&gt;</span>
</code></pre>
    <p>
     外层容器：div class=“upload-list” 这是一个包含已上传文件列表的容器。
     <br/>
     class=“upload-list” 是自定义的 CSS 类名，用于样式控制。
     <br/>
     v-if=“uploadedFiles.length &gt; 0”：使用 Vue 的 v-if 指令动态控制该容器的显示。
     <br/>
     只有当 uploadedFiles 数组的长度大于 0（即有已上传的文件）时，才会渲染该容器。
    </p>
    <pre><code class="prism language-bash"><span class="token operator">&lt;</span><span class="token operator">!</span>-- 显示上传列表 --<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>div <span class="token assign-left variable">class</span><span class="token operator">=</span><span class="token string">"upload-list"</span> v-if<span class="token operator">=</span><span class="token string">"uploadedFiles.length &gt; 0"</span><span class="token operator">&gt;</span>
   <span class="token operator">&lt;</span>h<span class="token operator"><span class="token file-descriptor important">4</span>&gt;</span>已上传文件<span class="token operator">&lt;</span>/h<span class="token operator"><span class="token file-descriptor important">4</span>&gt;</span>
   <span class="token operator">&lt;</span>el-table :data<span class="token operator">=</span><span class="token string">"uploadedFiles"</span> <span class="token assign-left variable">style</span><span class="token operator">=</span><span class="token string">"width: 100%"</span><span class="token operator">&gt;</span>
     <span class="token operator">&lt;</span>el-table-column <span class="token assign-left variable">prop</span><span class="token operator">=</span><span class="token string">"name"</span> <span class="token assign-left variable">label</span><span class="token operator">=</span><span class="token string">"文件名"</span> /<span class="token operator">&gt;</span>
     <span class="token operator">&lt;</span>el-table-column <span class="token assign-left variable">prop</span><span class="token operator">=</span><span class="token string">"size"</span> <span class="token assign-left variable">label</span><span class="token operator">=</span><span class="token string">"大小"</span> <span class="token assign-left variable">width</span><span class="token operator">=</span><span class="token string">"120"</span> /<span class="token operator">&gt;</span>
     <span class="token operator">&lt;</span>el-table-column <span class="token assign-left variable">prop</span><span class="token operator">=</span><span class="token string">"status"</span> <span class="token assign-left variable">label</span><span class="token operator">=</span><span class="token string">"状态"</span> <span class="token assign-left variable">width</span><span class="token operator">=</span><span class="token string">"120"</span> /<span class="token operator">&gt;</span>
   <span class="token operator">&lt;</span>/el-table<span class="token operator">&gt;</span>
 <span class="token operator">&lt;</span>/div<span class="token operator">&gt;</span>
</code></pre>
    <h3>
     <a id="2_script_92">
     </a>
     2. script部分（定义数据、方法）
    </h3>
    <pre><code class="prism language-bash"><span class="token function">import</span> <span class="token punctuation">{<!-- --></span>ElUpload ,ElDialog<span class="token punctuation">}</span> from <span class="token string">'element-plus'</span><span class="token punctuation">;</span>
</code></pre>
    <p>
     JavaScript/TypeScript 中的模块导入语法，用于从 Element Plus 组件库中导入 ElUpload 和 ElDialog 两个组件
    </p>
    <pre><code class="prism language-bash"><span class="token function">import</span> <span class="token punctuation">{<!-- --></span> Plus as IconPlus, Setting, UploadFilled <span class="token punctuation">}</span> from <span class="token string">'@element-plus/icons-vue'</span>
</code></pre>
    <p>
     从 @element-plus/icons-vue 图标库中按需导入多个图标的语法。
     <br/>
     UploadFilled：一个“上传”图标，通常用于表示文件上传操作。
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/80eb6972a09b4cb0be058fefaba383e6.png">
      <br/>
      导出一个 Vue 组件，使其可以在其他文件中被导入和使用。
     </img>
    </p>
    <pre><code class="prism language-bash"><span class="token builtin class-name">export</span> default <span class="token punctuation">{<!-- --></span>
  name: <span class="token string">'CommonLayout'</span>, 
  components: <span class="token punctuation">{<!-- --></span>
    ElContainer,
    ElAside,
    ElMain,
    ElIcon,
    ElAvatar,
    KnowledgeDialog,
    Plus,
    Files,
    ElUpload,
    ElDialog,
    UploadFilled
  <span class="token punctuation">}</span>,
</code></pre>
    <p>
     data 选项，用于定义组件的响应式数据，之前设定了一个表单，初始化为false就开始的时候不会被显示
    </p>
    <pre><code class="prism language-bash"><span class="token function-name function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token builtin class-name">return</span> <span class="token punctuation">{<!-- --></span>
      isCollapsed: false,
      uploadFileDialogVisible: false,
      Plus: IconPlus,
      Setting 
    <span class="token punctuation">}</span>
</code></pre>
    <p>
     在 Vue 中，data 必须是一个函数，返回一个对象。对象中的属性会自动变为响应式的，当数据变化时，视图会自动更新。
     <br/>
     isCollapsed: false：这是一个布尔值，通常用于控制某个元素的展开/折叠状态。例如，可以用于控制侧边栏的折叠状态：
     <br/>
     uploadFileDialogVisible: false：这是一个布尔值，通常用于控制文件上传对话框的显示和隐藏。
     <br/>
     Plus: IconPlus：这是一个图标组件，通常用于在模板中显示“加号”图标。
     <br/>
     Setting：这是一个图标组件，通常用于在模板中显示“设置”图标。
    </p>
    <pre><code class="prism language-bash">methods: <span class="token punctuation">{<!-- --></span>
	<span class="token function-name function">uploadFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      // 添加调试日志
      console.log<span class="token punctuation">(</span><span class="token string">'点击上传按钮前:'</span>, this.uploadFileDialogVisible<span class="token punctuation">)</span>
      this.uploadFileDialogVisible <span class="token operator">=</span> <span class="token boolean">true</span>
      console.log<span class="token punctuation">(</span><span class="token string">'点击上传按钮后:'</span>, this.uploadFileDialogVisible<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>,
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
    <p>
     定义组件的方法（函数），用于处理逻辑或响应用户交互。在 Vue 中，methods 是一个对象，包含多个方法。这些方法可以在模板中通过事件绑定或其他方式调用。
    </p>
    <p>
     但其实有些功能elementui已经封装的很好了，在HTML的地方就已经完成前后端发送消息了，methods这个地方目前是处理前端的逻辑，比如打开视图，打印控制台消息
    </p>
    <h3>
     <a id="3_style_154">
     </a>
     3. style
    </h3>
    <p>
     主要就是css样式表
    </p>
    <h2>
     <a id="Flask_157">
     </a>
     二、后端Flask代码结构
    </h2>
    <hr/>
    <h3>
     <a id="1__159">
     </a>
     1. 蓝图
    </h3>
    <p>
     蓝图是 Flask 中用于组织路由和视图函数的工具，可以将应用拆分为多个模块，便于管理和维护。
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/c7dca28c6f644b75a40631fc24675671.png">
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/bc040dcadc7a44fd9646163798bac7cf.png"/>
     </img>
    </p>
    <h3>
     <a id="2__163">
     </a>
     2. 路由处理请求
    </h3>
    <p>
     定义了一个 Flask 蓝图（Blueprint），并为其添加了一个路由，用于处理文件上传的 POST 请求。
    </p>
    <pre><code class="prism language-bash">upload_bp <span class="token operator">=</span> Blueprint<span class="token punctuation">(</span><span class="token string">'upload_bp'</span>, __name__<span class="token punctuation">)</span>

@upload_bp.route<span class="token punctuation">(</span><span class="token string">'/upload'</span>, <span class="token assign-left variable">methods</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'POST'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
def upload<span class="token punctuation">(</span><span class="token punctuation">)</span>:
</code></pre>
    <p>
     视图函数 upload 是处理文件上传的核心逻辑部分。
    </p>
    <pre><code class="prism language-bash">def upload<span class="token punctuation">(</span><span class="token punctuation">)</span>:
    try:
        print<span class="token punctuation">(</span><span class="token string">"<span class="token entity" title="\n">\n</span>=== 开始处理文件上传请求 ==="</span><span class="token punctuation">)</span>
        <span class="token comment"># 检查是否有文件被上传</span>
        <span class="token keyword">if</span> <span class="token string">'file'</span> not <span class="token keyword">in</span> request.files:
            <span class="token builtin class-name">return</span> jsonify<span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
                <span class="token string">'code'</span><span class="token builtin class-name">:</span> <span class="token number">400</span>,
                <span class="token string">'message'</span><span class="token builtin class-name">:</span> <span class="token string">'没有文件被上传'</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>, <span class="token number">400</span>

        <span class="token function">file</span> <span class="token operator">=</span> request.files<span class="token punctuation">[</span><span class="token string">'file'</span><span class="token punctuation">]</span>

        <span class="token comment"># 检查文件名是否为空</span>
        <span class="token keyword">if</span> file.filename <span class="token operator">==</span> <span class="token string">''</span><span class="token builtin class-name">:</span>
            <span class="token builtin class-name">return</span> jsonify<span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
                <span class="token string">'code'</span><span class="token builtin class-name">:</span> <span class="token number">400</span>, 
                <span class="token string">'message'</span><span class="token builtin class-name">:</span> <span class="token string">'未选择文件'</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>, <span class="token number">400</span>

        <span class="token comment"># 检查是否是PDF文件</span>
        <span class="token keyword">if</span> not file.filename.endswith<span class="token punctuation">(</span><span class="token string">'.pdf'</span><span class="token punctuation">)</span>:
            <span class="token builtin class-name">return</span> jsonify<span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
                <span class="token string">'code'</span><span class="token builtin class-name">:</span> <span class="token number">400</span>,
                <span class="token string">'message'</span><span class="token builtin class-name">:</span> <span class="token string">'只能上传PDF文件'</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>, <span class="token number">400</span>

        <span class="token comment"># 构建保存路径</span>
        save_path <span class="token operator">=</span> os.path.join<span class="token punctuation">(</span>DATABASES_FOLDER, <span class="token string">"upload_pdf"</span><span class="token punctuation">)</span>
        
        <span class="token comment"># 确保目录存在</span>
        os.makedirs<span class="token punctuation">(</span>save_path, <span class="token assign-left variable">exist_ok</span><span class="token operator">=</span>True<span class="token punctuation">)</span>
        
        <span class="token comment"># 保存文件</span>
        file_path <span class="token operator">=</span> os.path.join<span class="token punctuation">(</span>save_path, file.filename<span class="token punctuation">)</span>
        file.save<span class="token punctuation">(</span>file_path<span class="token punctuation">)</span>

        print<span class="token punctuation">(</span>f<span class="token string">"文件已保存到: {file_path}"</span><span class="token punctuation">)</span>
        print<span class="token punctuation">(</span><span class="token string">"=== 文件上传处理完成 ===<span class="token entity" title="\n">\n</span>"</span><span class="token punctuation">)</span>

        <span class="token builtin class-name">return</span> jsonify<span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
            <span class="token string">'code'</span><span class="token builtin class-name">:</span> <span class="token number">200</span>,
            <span class="token string">'message'</span><span class="token builtin class-name">:</span> <span class="token string">'文件上传成功'</span>,
            <span class="token string">'filename'</span><span class="token builtin class-name">:</span> file.filename
        <span class="token punctuation">}</span><span class="token punctuation">)</span>, <span class="token number">200</span>

    except Exception as e:
        print<span class="token punctuation">(</span>f<span class="token string">"文件上传出错: {str(e)}"</span><span class="token punctuation">)</span>
        <span class="token builtin class-name">return</span> jsonify<span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
            <span class="token string">'code'</span><span class="token builtin class-name">:</span> <span class="token number">500</span>,
            <span class="token string">'message'</span><span class="token builtin class-name">:</span> f<span class="token string">'文件上传失败: {str(e)}'</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>, <span class="token number">500</span>
</code></pre>
    <p>
     使用 request.files 获取上传的文件。
     <br/>
     使用 os.path.join 构建文件保存路径。DATABASES_FOLDER 是一个常量，表示文件保存的根目录。使用 file.save 将文件保存到指定路径。
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f71715f34333932303833382f:61727469636c652f64657461696c732f313436323536363136" class_="artid" style="display:none">
 </p>
</div>


