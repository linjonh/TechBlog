---
layout: post
title: "机器学习案列基于随机森林的运动能量消耗预测分析实战"
date: 2025-03-08 21:41:19 +0800
description: "核心规律：运动时长是能量消耗的决定性因素模型优势：RF实现R²=0.997的高精度预测应用场景：健身APP卡路里计算、运动手环算法优化完整代码&数据集下载私信我！！！技术交流。"
keywords: "【机器学习案列】基于随机森林的运动能量消耗预测分析实战"
categories: ['机器学习']
tags: ['随机森林', '机器学习', '人工智能']
artid: "146123405"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146123405
    alt: "机器学习案列基于随机森林的运动能量消耗预测分析实战"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146123405
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146123405
cover: https://bing.ee123.net/img/rand?artid=146123405
image: https://bing.ee123.net/img/rand?artid=146123405
img: https://bing.ee123.net/img/rand?artid=146123405
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     【机器学习案列】基于随机森林的运动能量消耗预测分析实战
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="./../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="./../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <blockquote>
     <p>
      🧑 博主简介：曾任某智慧城市类企业
      <code>
       算法总监
      </code>
      ，目前在美国市场的物流公司从事
      <code>
       高级算法工程师
      </code>
      一职，深耕人工智能领域，精通python数据挖掘、可视化、机器学习等，发表过AI相关的专利并多次在AI类比赛中获奖。CSDN人工智能领域的优质创作者，提供AI相关的技术咨询、项目开发和个性化解决方案等服务，如有需要请站内私信或者联系任意文章底部的的VX名片（ID：
      <code>
       xf982831907
      </code>
      ）
     </p>
    </blockquote>
    <blockquote>
     <p>
      💬 博主粉丝群介绍：① 群内初中生、高中生、本科生、研究生、博士生遍布，可互相学习，交流困惑。② 热榜top10的常客也在群里，也有数不清的万粉大佬，可以交流写作技巧，上榜经验，涨粉秘籍。③ 群内也有职场精英，大厂大佬，可交流技术、面试、找工作的经验。④ 进群免费赠送写作秘籍一份，助你由写作小白晋升为创作大佬。⑤ 进群赠送CSDN评论防封脚本，送真活跃粉丝，助你提升文章热度。有兴趣的加文末联系方式，备注自己的CSDN昵称，拉你进群，互相学习共同进步。
     </p>
    </blockquote>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/afcf144472ba428aaa75866392fec38d.gif#pic_center"/>
    </p>
    <p>
    </p>
    <p>
    </p>
    <h2>
     <a id="_10">
     </a>
     一、背景描述
    </h2>
    <p>
     本数据集包含了来自不同用户的多项体征数据，包括性别、年龄、身高、体重等基本信息，以及运动持续时间、心率和体温等与身体活动相关的数据。
     <br/>
     通过分析这些数据，可以探索用户在进行身体活动时的热量消耗情况，即目标变量Calories，从而为个性化健身计划或健康管理提供数据支持。
    </p>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/img_convert/fba6c9ada15f71f3e884a1a0d7c42f97.png"/>
    </p>
    <h2>
     <a id="_17">
     </a>
     二、数据说明
    </h2>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/img_convert/e52694f076ebc414d15624cfb928583f.png"/>
    </p>
    <p>
     数据来源：
     <br/>
     <a href="https://www.kaggle.com/datasets/ruchikakumbhar/calories-burnt-prediction" rel="nofollow">
      https://www.kaggle.com/datasets/ruchikakumbhar/calories-burnt-prediction
     </a>
    </p>
    <h2>
     <a id="_24">
     </a>
     三、技术实现
    </h2>
    <h3>
     <a id="31__25">
     </a>
     3.1 环境配置
    </h3>
    <pre><code class="prism language-python"><span class="token comment"># 核心库依赖</span>
<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
<span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>ensemble <span class="token keyword">import</span> RandomForestRegressor
<span class="token keyword">from</span> xgboost <span class="token keyword">import</span> XGBRegressor
<span class="token keyword">import</span> seaborn <span class="token keyword">as</span> sns
</code></pre>
    <h3>
     <a id="32__34">
     </a>
     3.2 数据预处理
    </h3>
    <pre><code class="prism language-python"><span class="token comment"># 加载数据并清洗</span>
data <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">'calories.csv'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>drop<span class="token punctuation">(</span>columns<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'User_ID'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
data<span class="token punctuation">.</span>columns <span class="token operator">=</span> data<span class="token punctuation">.</span>columns<span class="token punctuation">.</span><span class="token builtin">str</span><span class="token punctuation">.</span>lower<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># 异常值处理（以身高为例）</span>
Q1 <span class="token operator">=</span> data<span class="token punctuation">[</span><span class="token string">'height'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>quantile<span class="token punctuation">(</span><span class="token number">0.25</span><span class="token punctuation">)</span>
Q3 <span class="token operator">=</span> data<span class="token punctuation">[</span><span class="token string">'height'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>quantile<span class="token punctuation">(</span><span class="token number">0.75</span><span class="token punctuation">)</span>
data <span class="token operator">=</span> data<span class="token punctuation">[</span><span class="token punctuation">(</span>data<span class="token punctuation">[</span><span class="token string">'height'</span><span class="token punctuation">]</span> <span class="token operator">&gt;</span> Q1<span class="token operator">-</span><span class="token number">1.5</span><span class="token operator">*</span><span class="token punctuation">(</span>Q3<span class="token operator">-</span>Q1<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span> <span class="token punctuation">(</span>data<span class="token punctuation">[</span><span class="token string">'height'</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> Q3<span class="token operator">+</span><span class="token number">1.5</span><span class="token operator">*</span><span class="token punctuation">(</span>Q3<span class="token operator">-</span>Q1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
</code></pre>
    <ul>
     <li>
      <strong>
       数据维度
      </strong>
      : 15,000样本 × 8特征
     </li>
     <li>
      <strong>
       特征组成
      </strong>
      :
      <ul>
       <li>
        基础体征：性别、年龄、身高(cm)、体重(kg)
       </li>
       <li>
        运动指标：持续时间(min)、心率(bpm)、体温(℃)
       </li>
       <li>
        目标变量：卡路里(Cal)
       </li>
      </ul>
     </li>
     <li>
      <strong>
       数据质量
      </strong>
      : 无缺失值，检测到身高/体重异常值
     </li>
    </ul>
    <h2>
     <a id="_53">
     </a>
     四、数据分析
    </h2>
    <h3>
     <a id="41__54">
     </a>
     4.1 关键统计指标
    </h3>
    <pre><code class="prism language-python">data<span class="token punctuation">.</span>describe<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>T
</code></pre>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/img_convert/3443eadcb95a36dc7dc16510a5e361c8.png"/>
    </p>
    <h3>
     <a id="42__61">
     </a>
     4.2 可视化分析
    </h3>
    <pre><code class="prism language-python"><span class="token comment"># 相关性热力图</span>
plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
sns<span class="token punctuation">.</span>heatmap<span class="token punctuation">(</span>data<span class="token punctuation">.</span>corr<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> annot<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> cmap<span class="token operator">=</span><span class="token string">'coolwarm'</span><span class="token punctuation">)</span>
</code></pre>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/img_convert/ff05d04dd50b48122e514f834186370f.png"/>
    </p>
    <p>
     1.持续时间越长，燃烧的卡路里就越高。
     <br/>
     2.心率越快，燃烧的卡路里就越高。
     <br/>
     3.年龄和燃烧的卡路里具有较弱的相关性。
     <br/>
     4.持续时间增加会导致心率和体温增加。
    </p>
    <h2>
     <a id="_75">
     </a>
     五、预测建模
    </h2>
    <h3>
     <a id="51__76">
     </a>
     5.1 特征工程
    </h3>
    <pre><code class="prism language-python">encoder <span class="token operator">=</span> LabelEncoder<span class="token punctuation">(</span><span class="token punctuation">)</span>

model_data <span class="token operator">=</span> data<span class="token punctuation">.</span>copy<span class="token punctuation">(</span><span class="token punctuation">)</span>
model_data<span class="token punctuation">[</span><span class="token string">'gender'</span><span class="token punctuation">]</span> <span class="token operator">=</span> encoder<span class="token punctuation">.</span>fit_transform<span class="token punctuation">(</span>model_data<span class="token punctuation">[</span><span class="token string">'gender'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

model_data<span class="token punctuation">.</span>sample<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
</code></pre>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/img_convert/4fcefb86e27f599d7092702981ba5568.png"/>
    </p>
    <h3>
     <a id="52__88">
     </a>
     5.2 数据集划分
    </h3>
    <pre><code class="prism language-python">x <span class="token operator">=</span> model_data<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'gender'</span><span class="token punctuation">,</span> <span class="token string">'age'</span><span class="token punctuation">,</span> <span class="token string">'height'</span><span class="token punctuation">,</span> <span class="token string">'weight'</span><span class="token punctuation">,</span> <span class="token string">'duration'</span><span class="token punctuation">,</span> <span class="token string">'heart_rate'</span><span class="token punctuation">,</span>
                <span class="token string">'body_temp'</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
y <span class="token operator">=</span> model_data<span class="token punctuation">[</span><span class="token string">'calories'</span><span class="token punctuation">]</span>

x_train<span class="token punctuation">,</span> x_test<span class="token punctuation">,</span> y_train<span class="token punctuation">,</span> y_test <span class="token operator">=</span> train_test_split<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> 
                                                    train_size<span class="token operator">=</span><span class="token number">0.7</span><span class="token punctuation">,</span> 
                                                    random_state<span class="token operator">=</span><span class="token number">42</span><span class="token punctuation">)</span>
</code></pre>
    <h3>
     <a id="53__99">
     </a>
     5.3 随机森林建模
    </h3>
    <pre><code class="prism language-python">rf_model <span class="token operator">=</span> RandomForestRegressor<span class="token punctuation">(</span>n_estimators<span class="token operator">=</span><span class="token number">1000</span><span class="token punctuation">,</span> 
                                 max_depth<span class="token operator">=</span><span class="token number">15</span><span class="token punctuation">,</span> 
                                 max_features<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">,</span> 
                                 oob_score<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> 
                                 random_state<span class="token operator">=</span><span class="token number">42</span><span class="token punctuation">)</span>

rf_model<span class="token punctuation">.</span>fit<span class="token punctuation">(</span>x_train<span class="token punctuation">,</span> y_train<span class="token punctuation">)</span>
rf_predicted <span class="token operator">=</span> rf_model<span class="token punctuation">.</span>predict<span class="token punctuation">(</span>x_test<span class="token punctuation">)</span>
rf_score <span class="token operator">=</span> rf_model<span class="token punctuation">.</span>score<span class="token punctuation">(</span>x_test<span class="token punctuation">,</span> y_test<span class="token punctuation">)</span>
rf_mae <span class="token operator">=</span> mean_absolute_error<span class="token punctuation">(</span>y_test<span class="token punctuation">,</span> rf_predicted<span class="token punctuation">)</span>
rf_oob <span class="token operator">=</span> rf_model<span class="token punctuation">.</span>oob_score_

rf_df <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token string">'model'</span><span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token string">'Random Forest'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> 
                      <span class="token string">'r2_score'</span><span class="token punctuation">:</span><span class="token punctuation">[</span>rf_score<span class="token punctuation">]</span><span class="token punctuation">,</span> 
                      <span class="token string">'rf_mae'</span><span class="token punctuation">:</span><span class="token punctuation">[</span>rf_mae<span class="token punctuation">]</span><span class="token punctuation">,</span> 
                      <span class="token string">'oob_score'</span><span class="token punctuation">:</span><span class="token punctuation">[</span>rf_oob<span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/img_convert/4c245d44c155381f48c6d770059c54a4.png"/>
    </p>
    <h3>
     <a id="54__121">
     </a>
     5.4 预测结果可视化
    </h3>
    <pre><code class="prism language-python">sns<span class="token punctuation">.</span>scatterplot<span class="token punctuation">(</span>x<span class="token operator">=</span>x_test<span class="token punctuation">[</span><span class="token string">'heart_rate'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> 
                y<span class="token operator">=</span>y_test<span class="token punctuation">,</span> 
                color<span class="token operator">=</span>sns<span class="token punctuation">.</span>color_palette<span class="token punctuation">(</span><span class="token string">'viridis'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
sns<span class="token punctuation">.</span>lineplot<span class="token punctuation">(</span>x<span class="token operator">=</span>x_test<span class="token punctuation">[</span><span class="token string">'heart_rate'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> 
             y<span class="token operator">=</span>rf_predicted<span class="token punctuation">,</span> 
             color<span class="token operator">=</span>sns<span class="token punctuation">.</span>color_palette<span class="token punctuation">(</span><span class="token string">'viridis'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/img_convert/041f6bf4789955941751e4632cf7ad55.png"/>
    </p>
    <h3>
     <a id="55__134">
     </a>
     5.5 特征重要性
    </h3>
    <pre><code class="prism language-python"><span class="token comment"># 获取特征重要性</span>
feature_importances <span class="token operator">=</span> rf_model<span class="token punctuation">.</span>feature_importances_
feature_names <span class="token operator">=</span> x<span class="token punctuation">.</span>columns

<span class="token comment"># 绘制特征重要性条形图</span>
sns<span class="token punctuation">.</span>barplot<span class="token punctuation">(</span>x<span class="token operator">=</span>feature_importances<span class="token punctuation">,</span> y<span class="token operator">=</span>feature_names<span class="token punctuation">,</span> palette<span class="token operator">=</span><span class="token string">"viridis"</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>xlabel<span class="token punctuation">(</span><span class="token string">"Importance"</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>ylabel<span class="token punctuation">(</span><span class="token string">"Features"</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"Feature Importances"</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/img_convert/33225df7aa66a82dc9ee94e035d900b4.png"/>
    </p>
    <p>
     <strong>
      关键结论
     </strong>
     ：
    </p>
    <ol>
     <li>
      运动持续时间贡献度达62.8%
     </li>
     <li>
      心率(21.4%)和体温(9.7%)为次要因素
     </li>
     <li>
      身高/体重等静态特征影响小于5%
     </li>
    </ol>
    <h2>
     <a id="_156">
     </a>
     六、模型部署
    </h2>
    <pre><code class="prism language-python"><span class="token comment"># 保存最佳模型</span>
<span class="token keyword">import</span> joblib
joblib<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>model<span class="token punctuation">,</span> <span class="token string">'calorie_predictor.pkl'</span><span class="token punctuation">)</span>

<span class="token comment"># 预测示例</span>
test_sample <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">175</span><span class="token punctuation">,</span> <span class="token number">70</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">120</span><span class="token punctuation">,</span> <span class="token number">40.5</span><span class="token punctuation">]</span><span class="token punctuation">]</span>  <span class="token comment"># 男性，30岁，运动30分钟</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>rf_model<span class="token punctuation">.</span>predict<span class="token punctuation">(</span>scaler<span class="token punctuation">.</span>transform<span class="token punctuation">(</span>test_sample<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 输出: [245.6]</span>
</code></pre>
    <p>
     <img alt="" src="https://i-blog.csdnimg.cn/img_convert/c85827d85324e7165054d4835efa44e3.png"/>
    </p>
    <h2>
     <a id="_169">
     </a>
     七、总结
    </h2>
    <ol>
     <li>
      <strong>
       核心规律
      </strong>
      ：运动时长是能量消耗的决定性因素
     </li>
     <li>
      <strong>
       模型优势
      </strong>
      ：RF实现R²=0.997的高精度预测
     </li>
     <li>
      <strong>
       应用场景
      </strong>
      ：健身APP卡路里计算、运动手环算法优化
     </li>
    </ol>
    <p>
     <strong>
      完整代码&amp;数据集下载
     </strong>
     ：
     <strong>
      私信我！！！
     </strong>
    </p>
    <hr/>
    <h3>
     <a id="_178">
     </a>
     <strong>
      技术交流
     </strong>
     ：欢迎在评论区探讨特征工程优化方案或模型改进思路！
    </h3>
   </div>
   <link href="./../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="./../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
  <div class="blog-extension-box" id="blogExtensionBox" style="width:400px;margin:auto;margin-top:12px">
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f71715f33383631343037342f:61727469636c652f64657461696c732f313436313233343035" class_="artid" style="display:none">
 </p>
</div>


