---
layout: post
title: "ç½‘ç»œå·¥å…·ä¹‹æµé‡æµ‹è¯•å·¥å…·nuttcpå®‰è£…å’Œä½¿ç”¨"
date: 2022-01-05 08:00:00 +0800
description: "nuttcpæ˜¯ä¸€ç§ç½‘ç»œæ€§èƒ½æµ‹é‡å·¥å…·ï¼Œä¾›ç½‘ç»œå’Œç³»ç»Ÿç®¡ç†å‘˜ä½¿ç”¨ã€‚å®ƒæœ€åŸºæœ¬çš„ç”¨é€”æ˜¯ç¡®å®šåŸå§‹TCPï¼ˆæˆ–UDP"
keywords: "nuttcp"
categories: ['è¿ç»´å·¥å…·ç ”ç©¶']
tags: ['ç½‘ç»œæµé‡æµ‹è¯•', 'æµ‹è¯•å·¥å…·', 'å¸¦å®½æµ‹è¯•', 'Tcp', 'Nuttcp']
artid: "122242074"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=122242074
    alt: "ç½‘ç»œå·¥å…·ä¹‹æµé‡æµ‹è¯•å·¥å…·nuttcpå®‰è£…å’Œä½¿ç”¨"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=122242074
featuredImagePreview: https://bing.ee123.net/img/rand?artid=122242074
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     ç½‘ç»œå·¥å…·ä¹‹æµé‡æµ‹è¯•å·¥å…·nuttcpå®‰è£…å’Œä½¿ç”¨
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-light" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h2>
     <a id="nuttcp_0">
     </a>
     ä¸€ã€nuttcpç®€ä»‹
    </h2>
    <p>
     nuttcpæ˜¯ä¸€ç§ç½‘ç»œæ€§èƒ½æµ‹é‡å·¥å…·ï¼Œä¾›ç½‘ç»œå’Œç³»ç»Ÿç®¡ç†å‘˜ä½¿ç”¨ã€‚å®ƒæœ€åŸºæœ¬çš„ç”¨é€”æ˜¯ç¡®å®šåŸå§‹TCPï¼ˆæˆ–UDPï¼‰ç½‘ç»œå±‚ååé‡ï¼Œæ–¹æ³•æ˜¯é€šè¿‡å°†å†…å­˜ç¼“å†²åŒºä»æºç³»ç»Ÿè·¨äº’è¿ç½‘ç»œä¼ è¾“åˆ°ç›®æ ‡ç³»ç»Ÿï¼Œæˆ–è€…ä¼ è¾“æŒ‡å®šæ—¶é—´é—´éš”çš„æ•°æ®ï¼Œæˆ–è€…ä¼ è¾“æŒ‡å®šæ•°é‡çš„å­—èŠ‚ã€‚é™¤äº†ä»¥Mbpsä¸ºå•ä½æŠ¥å‘Šå·²å®ç°çš„ç½‘ç»œååé‡å¤–ï¼Œnuttcpè¿˜æä¾›ä¸æ•°æ®ä¼ è¾“ç›¸å…³çš„å…¶ä»–æœ‰ç”¨ä¿¡æ¯ï¼Œå¦‚ç”¨æˆ·ã€ç³»ç»Ÿå’ŒæŒ‚é’Ÿæ—¶é—´ã€å‘å°„æœºå’Œæ¥æ”¶æœºCPUåˆ©ç”¨ç‡ä»¥åŠä¸¢å¤±ç™¾åˆ†æ¯”ï¼ˆå¯¹äºUDPä¼ è¾“ï¼‰ã€‚
     <br/>
     nuttcpåŸºäºnttcpï¼Œè€Œnttcpåˆæ˜¯Silicon Graphicsï¼ˆSGIï¼‰åœ¨åŸå§‹ttcpä¸Šçš„ä¸€ä¸ªå¢å¼ºï¼Œttcpæ˜¯1984å¹´12æœˆå‰æŸä¸ªæ—¶å€™ç”±BRLçš„Mike Muussç¼–å†™çš„ï¼Œç”¨äºæ¯”è¾ƒU.C.Berkeleyå’ŒBBNçš„TCPå †æ ˆæ€§èƒ½ï¼Œä»¥å¸®åŠ©DARPAå†³å®šå°†å“ªä¸ªç‰ˆæœ¬æ”¾åœ¨ç¬¬ä¸€ä¸ªBSD Unixç‰ˆæœ¬ä¸­ã€‚nuttcpé™¤äº†åŸºæœ¬çš„ttcp/nttcpä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€äº›æœ‰ç”¨çš„ç‰¹æ€§ï¼Œä¾‹å¦‚æœåŠ¡å™¨æ¨¡å¼ã€é€Ÿç‡é™åˆ¶ã€å¤šä¸ªå¹¶è¡Œæµå’ŒåŸºäºè®¡æ—¶å™¨çš„ä½¿ç”¨ã€‚æœ€è¿‘çš„å˜åŒ–åŒ…æ‹¬IPv6æ”¯æŒã€IPv4å¤šæ’­ä»¥åŠè®¾ç½®æœ€å¤§æ®µå¤§å°æˆ–TOS/DSCPä½çš„èƒ½åŠ›ã€‚nuttcpæ­£åœ¨ä¸æ–­å‘å±•ï¼Œä»¥æ»¡è¶³å‡ºç°çš„æ–°éœ€æ±‚ï¼Œå¹¶æ·»åŠ æ‰€éœ€çš„æ–°åŠŸèƒ½ã€‚nuttcpå·²ç»æˆåŠŸæ„å»ºå¹¶è¿è¡Œåœ¨å„ç§Solarisã€SGIå’ŒPPC/X86 Linuxç³»ç»Ÿä¸Šï¼Œå¹¶ä¸”å¯èƒ½åœ¨å¤§å¤šæ•°Unixç‰ˆæœ¬ä¸Šè¿è¡Œè‰¯å¥½ã€‚å®ƒè¿˜æˆåŠŸåœ°ç”¨äºå„ç§ç‰ˆæœ¬çš„Windowsæ“ä½œç³»ç»Ÿã€‚
    </p>
    <h2>
     <a id="_3">
     </a>
     äºŒã€å®‰è£…æ­¥éª¤
    </h2>
    <h3>
     <a id="1_4">
     </a>
     1ã€ä¸‹è½½è½¯ä»¶åŒ…
    </h3>
    <blockquote>
     <p>
      nuttcpå½“å‰æœ€æ–°ç‰ˆæœ¬ä¸º8.2.2ï¼Œå‘å¸ƒæ—¶é—´æ˜¯2020å¹´5æœˆ11å·ã€‚
      <br/>
      <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://i-blog.csdnimg.cn/blog_migrate/0732a20b77d448db52cc04c3b4793cef.png"/>
     </p>
    </blockquote>
    <blockquote>
     <p>
      [root@s145 opt]# wget http://nuttcp.net/nuttcp/nuttcp-8.2.2.tar.bz2
     </p>
    </blockquote>
    <h3>
     <a id="2bzip2_9">
     </a>
     2ã€å®‰è£…bzip2å‹ç¼©å·¥å…·
    </h3>
    <blockquote>
     <p>
      [root@s145 opt]# yum install -y bzip2
     </p>
    </blockquote>
    <h3>
     <a id="3_11">
     </a>
     3ã€è§£å‹è½¯ä»¶åŒ…
    </h3>
    <blockquote>
     <p>
      [root@s145 opt]# tar -jxvf nuttcp-8.2.2.tar.bz2
     </p>
    </blockquote>
    <h3>
     <a id="4nuttcp_13">
     </a>
     4ã€ç¼–è¯‘nuttcp
    </h3>
    <blockquote>
     <p>
      [root@s145 nuttcp-8.2.2]# gcc -O2 -o nuttcp nuttcp-8.2.2.c
      <br/>
      <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://i-blog.csdnimg.cn/blog_migrate/a106c71af02ea357faec5f8600f6f46c.png"/>
     </p>
    </blockquote>
    <h3>
     <a id="5_16">
     </a>
     5ã€æŸ¥çœ‹å‘½ä»¤ç‰ˆæœ¬
    </h3>
    <blockquote>
     <p>
      [root@s145 nuttcp-8.2.2]# ./nuttcp -V
      <br/>
      nuttcp-8.2.2
     </p>
    </blockquote>
    <h2>
     <a id="_19">
     </a>
     ä¸‰ã€ä½¿ç”¨ç¤ºä¾‹
    </h2>
    <h3>
     <a id="1nuttcp_20">
     </a>
     1ã€è·å–nuttcpå‘½ä»¤å¸®åŠ©
    </h3>
    <blockquote>
     <p>
      [root@s145 nuttcp-8.2.2]# ./nuttcp --help
     </p>
    </blockquote>
    <h3>
     <a id="2nutcp_server_22">
     </a>
     2ã€å¼€å¯nutcp server
    </h3>
    <blockquote>
     <p>
      [root@s145 nuttcp-8.2.2]# ./nuttcp -S
      <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://i-blog.csdnimg.cn/blog_migrate/f7c04e0dda0c32be207ff6b1c9754929.png"/>
     </p>
    </blockquote>
    <h3>
     <a id="3sender_25">
     </a>
     3ã€senderä¸»æœºä¸Šå‘é€æ•°æ®åŒ…
    </h3>
    <blockquote>
     <p>
      #é»˜è®¤å‘é€10ç§’é’Ÿçš„æ•°æ®åŒ…
      <br/>
      [root@s142 nuttcp-8.2.2]# ./nuttcp 192.168.0.145
      <br/>
      115.2640 MB / 10.33 sec = 93.6465 Mbps 0 %TX 11 %RX 0 retrans 1539 KB-cwnd 1.63 msRTT
      <br/>
      #è¯´æ˜s142å’Œs145ä¸»æœºä¹‹é—´å¸¦å®½æ˜¯100M
      <br/>
      [root@s146 nuttcp-8.2.2]# ./nuttcp 192.168.0.145
      <br/>
      27935.5000 MB / 10.00 sec = 23436.2504 Mbps 73 %TX 97 %RX 0 retrans 2040 KB-cwnd 1.02 msRTT
      <br/>
      #s146å’Œs145ä¸»æœºæ˜¯ä¸¤ä¸ªè™šæ‹Ÿæœºï¼Œåœ¨åŒä¸€ä¸ªå®¿ä¸»æœºä¸Šå¸¦å®½å¯è¾¾23Gbpsã€‚
     </p>
    </blockquote>
    <h3>
     <a id="4server_33">
     </a>
     4ã€å¯åŠ¨serveræ—¶æŒ‡å®šç›‘å¬ç«¯å£
    </h3>
    <blockquote>
     <p>
      #nuttcpæ”¯æŒå¯åŠ¨å¤šä¸ªserver
      <br/>
      [root@s145 nuttcp-8.2.2]# ./nuttcp -S -P5001
      <br/>
      [root@s145 nuttcp-8.2.2]# netstat -tnpl
      <br/>
      Active Internet connections (only servers)
      <br/>
      Proto Recv-Q Send-Q Local Address Foreign Address State PID/Program name
      <br/>
      tcp 0 0 0.0.0.0:5000 0.0.0.0:* LISTEN 11262/./nuttcp
      <br/>
      tcp 0 0 0.0.0.0:5001 0.0.0.0:* LISTEN 11282/./nuttcp
      <br/>
      tcp 0 0 0.0.0.0:22 0.0.0.0:* LISTEN 3494/sshd
      <br/>
      tcp 0 0 127.0.0.1:25 0.0.0.0:* LISTEN 4490/master
      <br/>
      tcp6 0 0 :::3306 ::ğŸ˜— LISTEN 27669/mysqld
      <br/>
      tcp6 0 0 :::22 ::ğŸ˜— LISTEN 3494/sshd
      <br/>
      tcp6 0 0 ::1:25 ::ğŸ˜— LISTEN 4490/master
     </p>
    </blockquote>
    <h3>
     <a id="515001G_46">
     </a>
     5ã€å‘é€1500å­—èŠ‚å¤§å°çš„åŒ…1G
    </h3>
    <blockquote>
     <p>
      [root@s146 nuttcp-8.2.2]# ./nuttcp -n1G -l1500 192.168.0.145
      <br/>
      1023.9987 MB / 9.64 sec = 891.1428 Mbps 99 %TX 69 %RX 0 retrans 159 KB-cwnd 1.07 msRTT
     </p>
    </blockquote>
    <h3>
     <a id="61_50">
     </a>
     6ã€é—´éš”1ç§’å±•ç¤ºæ•°æ®
    </h3>
    <blockquote>
     <p>
      [root@s142 nuttcp-8.2.2]# ./nuttcp -i1 192.168.0.145
      <br/>
      11.1250 MB / 1.00 sec = 93.3333 Mbps 0 retrans 547 KB-cwnd
      <br/>
      11.2500 MB / 1.00 sec = 94.3723 Mbps 0 retrans 1073 KB-cwnd
      <br/>
      11.1875 MB / 1.00 sec = 93.8473 Mbps 0 retrans 1539 KB-cwnd
      <br/>
      11.2500 MB / 1.00 sec = 94.3722 Mbps 0 retrans 1539 KB-cwnd
      <br/>
      11.1875 MB / 1.00 sec = 93.8467 Mbps 0 retrans 1539 KB-cwnd
      <br/>
      11.1875 MB / 1.00 sec = 93.8483 Mbps 0 retrans 1539 KB-cwnd
      <br/>
      11.2500 MB / 1.00 sec = 94.3714 Mbps 0 retrans 1539 KB-cwnd
      <br/>
      11.1875 MB / 1.00 sec = 93.8479 Mbps 0 retrans 1539 KB-cwnd
      <br/>
      11.1875 MB / 1.00 sec = 93.8476 Mbps 0 retrans 1539 KB-cwnd
      <br/>
      11.1875 MB / 1.00 sec = 93.8442 Mbps 0 retrans 1539 KB-cwnd
      <br/>
      <br/>
      115.3814 MB / 10.30 sec = 93.9696 Mbps 0 %TX 9 %RX 0 retrans 1539 KB-cwnd 1.60 msRTT
     </p>
    </blockquote>
    <h3>
     <a id="7_64">
     </a>
     7ã€åå‘æµ‹è¯•
    </h3>
    <p>
     <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://i-blog.csdnimg.cn/blog_migrate/3c6ae7c7a5dce041f14325386b77657d.png"/>
    </p>
    <h3>
     <a id="82M_66">
     </a>
     8ã€è®¾ç½®å‘å°„æœºçª—å£ä¸º2M
    </h3>
    <blockquote>
     <p>
      [root@s142 nuttcp-8.2.2]# ./nuttcp -w2m 192.168.0.145
      <br/>
      nuttcp-t: Warning: send window size 212992 &lt; requested window size 2097152
      <br/>
      nuttcp-r: Warning: receive window size 212992 &lt; requested window size 2097152
      <br/>
      112.4138 MB / 10.03 sec = 94.0136 Mbps 0 %TX 10 %RX 0 retrans 209 KB-cwnd 1.78 msRTT
     </p>
    </blockquote>
    <h3>
     <a id="9udp_71">
     </a>
     9ã€ä½¿ç”¨udpè¿›è¡Œæµ‹è¯•
    </h3>
    <p>
     <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://i-blog.csdnimg.cn/blog_migrate/5c9f74b8aef1a6a8ad3d2f6f032b48b5.png"/>
    </p>
    <h3>
     <a id="101080Mbps_UDP5_74">
     </a>
     10ã€10ä¸ªæ•°æ®åŒ…çš„çªå‘å‘é€80Mbps UDPåŒ…å¹¶æŒç»­5ç§’
    </h3>
    <p>
     <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://i-blog.csdnimg.cn/blog_migrate/6b6419bf36b2573725e039fad097009e.png"/>
    </p>
    <h2>
     <a id="nuttcp_77">
     </a>
     å››ã€nuttcpå‘½ä»¤å¸¸ç”¨å‚æ•°å»ºè®¾
    </h2>
    <table>
     <thead>
      <tr>
       <th align="left">
        å‚æ•°
       </th>
       <th align="left">
        å‚æ•°è¯´æ˜
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td align="left">
        -S
       </td>
       <td align="left">
        æœåŠ¡å™¨æ¨¡å¼
       </td>
      </tr>
      <tr>
       <td align="left">
        -p##
       </td>
       <td align="left">
        è¦å‘é€åˆ°çš„ç«¯å£å·
       </td>
      </tr>
      <tr>
       <td align="left">
        -P##
       </td>
       <td align="left">
        æ§åˆ¶è¿æ¥ç«¯å£å·ï¼Œé»˜è®¤5000
       </td>
      </tr>
      <tr>
       <td align="left">
        -T##
       </td>
       <td align="left">
        ä¼ è¾“è¶…æ—¶ï¼Œå•ä½ä¸ºç§’ï¼ˆæˆ–ï¼ˆm
       </td>
      </tr>
      <tr>
       <td align="left">
        -i##
       </td>
       <td align="left">
        æ¥æ”¶å™¨é—´éš”æŠ¥å‘Šï¼Œä»¥ç§’ï¼ˆæˆ–ï¼ˆm
       </td>
      </tr>
      <tr>
       <td align="left">
        -r
       </td>
       <td align="left">
        åå‘
       </td>
      </tr>
      <tr>
       <td align="left">
        -N##
       </td>
       <td align="left">
        å¹³è¡Œæµçš„æ•°é‡
       </td>
      </tr>
      <tr>
       <td align="left">
        -u
       </td>
       <td align="left">
        ä½¿ç”¨UDPè€Œä¸æ˜¯TCP
       </td>
      </tr>
      <tr>
       <td align="left">
        -R 90m
       </td>
       <td align="left">
        ï¼ˆUDPçš„é€Ÿç‡é™åˆ¶ï¼‰
       </td>
      </tr>
      <tr>
       <td align="left">
        -Ri
       </td>
       <td align="left">
        è®¾ç½®æ•°æ®åŒ…çªå‘å¤§å°
       </td>
      </tr>
      <tr>
       <td align="left">
        -w##
       </td>
       <td align="left">
        å‘å°„æœº|æ¥æ”¶æœºTCPçª—å£å¤§å°ï¼Œå•ä½ä¸ºKBï¼ˆæˆ–ï¼ˆm | mï¼‰Bæˆ–ï¼ˆg | gï¼‰Bï¼‰
       </td>
      </tr>
      <tr>
       <td align="left">
        -xt
       </td>
       <td align="left">
        è·Ÿè¸ªè·¯ç”±åŠŸèƒ½ã€‚å®ƒæ˜¾ç¤ºäº†ä»æœåŠ¡å™¨åˆ°å®¢æˆ·ç«¯çš„è·¯ç”±ï¼Œåä¹‹äº¦ç„¶
       </td>
      </tr>
     </tbody>
    </table>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c:6f672e6373646e2e6e65742f6361726566726565323030352f:61727469636c652f64657461696c732f313232323432303734" class_="artid" style="display:none">
 </p>
</div>


