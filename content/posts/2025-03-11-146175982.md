---
arturl_encode: "68747470733a2f:2f626c6f672e6373646e2e6e65742f73686d696c796e6e5f2f:61727469636c652f64657461696c732f313436313735393832"
layout: post
title: "2025Electron-åŸºç¡€äºŒè¿›ç¨‹æ¨¡å‹ä¸‰å¤§æ ¸å¿ƒ"
date: 2025-03-11 12:56:00 +08:00
description: "Electron IPCé€šä¿¡ï¼šä½¿ç”¨ invoke/handle å’Œ send/on è¿›è¡Œé€šä¿¡ã€‚"
keywords: "ã€2025ã€‘Electron åŸºç¡€äºŒï¼ˆè¿›ç¨‹æ¨¡å‹ä¸‰å¤§æ ¸å¿ƒï¼‰"
categories: ['Electron']
tags: ['å‰ç«¯', 'Javascript', 'Electron']
artid: "146175982"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146175982
    alt: "2025Electron-åŸºç¡€äºŒè¿›ç¨‹æ¨¡å‹ä¸‰å¤§æ ¸å¿ƒ"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146175982
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146175982
cover: https://bing.ee123.net/img/rand?artid=146175982
image: https://bing.ee123.net/img/rand?artid=146175982
img: https://bing.ee123.net/img/rand?artid=146175982
---

# ã€2025ã€‘Electron åŸºç¡€äºŒï¼ˆè¿›ç¨‹æ¨¡å‹ä¸‰å¤§æ ¸å¿ƒï¼‰

## Electron åŸºç¡€ ï¼ˆå¤šè¿›ç¨‹æ¶æ„è§£æï¼‰

æºä»£ç ä»“åº“ï¼š
  
[Githubä»“åº“ã€electron\_gitã€‘](https://github.com/IsMShmily/electron_git)

### 1ã€Electron å¤šè¿›ç¨‹éƒ½æ˜¯ä»€ä¹ˆ

1. **ä¸»è¿›ç¨‹ (Main Process)**
2. **æ¸²æŸ“è¿›ç¨‹ (Renderer Process)**
3. **é¢„åŠ è½½è„šæœ¬ (Preload Script)**

##### æ‰“ä¸ªæ¯”æ–¹ï¼šå…¬å¸é‡Œçš„ä¸‰ä¸ªå…³é”®è§’è‰²

å‡è®¾ä½ è¦å¼€ä¸€å®¶å…¬å¸ï¼ˆå¼€å‘ä¸€ä¸ªæ¡Œé¢åº”ç”¨ï¼‰ï¼Œè¿™ä¸ªå…¬å¸éœ€è¦ä¸‰ä¸ªæ ¸å¿ƒè§’è‰²ï¼š

1. **è‘£äº‹é•¿ï¼ˆä¸»è¿›ç¨‹ï¼‰**
   ï¼šæ•´ä¸ªå…¬å¸åªæœ‰ä¸€ä¸ªè‘£äº‹é•¿ï¼Œä»–æŒæ¡æ‰€æœ‰æ ¸å¿ƒæƒåŠ›ï¼š

   * âœ… å†³å®šå…¬å¸ä»€ä¹ˆæ—¶å€™å¼€é—¨/å…³é—¨ï¼ˆåº”ç”¨å¯åŠ¨é€€å‡ºï¼‰
   * âœ… æ‹›è˜æ–°å‘˜å·¥ï¼ˆåˆ›å»ºæ–°çª—å£ï¼‰
   * âœ… ç›´æ¥è”ç³»æ”¿åºœæœºå…³ï¼ˆè°ƒç”¨ç³»ç»Ÿçº§APIï¼‰
   * âœ… ä¿ç®¡å…¬å¸ä¿é™©æŸœé’¥åŒ™ï¼ˆè®¿é—®æœ¬åœ°æ–‡ä»¶ï¼‰
2. **æ™®é€šå‘˜å·¥ï¼ˆæ¸²æŸ“è¿›ç¨‹ï¼‰**
   ï¼šæ¯ä¸ªå‘˜å·¥è´Ÿè´£ä¸€ä¸ªçª—å£çš„æ¥å¾…å·¥ä½œï¼š

   * ğŸ–¥ï¸ æ¯äººåªè´Ÿè´£ä¸€ä¸ªåŠäº‹çª—å£ï¼ˆæ¯ä¸ªçª—å£å¯¹åº”ä¸€ä¸ªæ¸²æŸ“è¿›ç¨‹ï¼‰
   * ğŸ¨ ä¸“é—¨æè£…ä¿®è®¾è®¡ï¼ˆè´Ÿè´£ç•Œé¢UIå±•ç¤ºï¼‰
   * ğŸ”’ ä¸èƒ½ç›´æ¥è¿›ä¿é™©åº“ï¼ˆé»˜è®¤ä¸èƒ½è®¿é—®æ•æ„ŸåŠŸèƒ½ï¼‰
   * ğŸ’¬ æœ‰äº‹å¾—æ‰“æŠ¥å‘Šè¯·ç¤ºï¼ˆé€šè¿‡IPCé€šä¿¡æ‰¾è‘£äº‹é•¿ï¼‰
3. **ç§˜ä¹¦ï¼ˆé¢„åŠ è½½è„šæœ¬ï¼‰**
   ï¼šè‘£äº‹é•¿å®‰æ’åœ¨å‘˜å·¥èº«è¾¹çš„åŠ©æ‰‹ï¼š

   * ğŸ“ å¸®å‘˜å·¥è½¬è¾¾éœ€æ±‚ç»™è‘£äº‹é•¿ï¼ˆæ¡¥æ¥é€šä¿¡ï¼‰
   * ğŸ›¡ï¸ ç›¯ç€å‘˜å·¥åˆ«ä¹±æ¥ï¼ˆå®‰å…¨éš”ç¦»ï¼‰
   * ğŸ“‹ åªç»™å‘˜å·¥æœ‰é™çš„ç”³è¯·è¡¨ï¼ˆæš´éœ²æœ‰é™APIï¼‰

---

#### å®é™…å·¥ä½œæµç¨‹ä¸¾ä¾‹ï¼šç”¨æˆ·ç‚¹å‡»"æ‰“å¼€æ–‡ä»¶"æŒ‰é’®

##### æ­¥éª¤1ï¼šå‘˜å·¥æ”¶åˆ°ç”¨æˆ·è¯·æ±‚

```js
// rendererå±‚
// å‘˜å·¥ï¼ˆæ¸²æŸ“è¿›ç¨‹ï¼‰çš„æ—¥å¸¸å·¥ä½œ
function handleOpenFileClick() {
  // ä¸èƒ½ç›´æ¥æ“ä½œæ–‡ä»¶ï¼Œå¾—æ‰¾ç§˜ä¹¦å¸®å¿™
  window.API.sendRequest('open-file')
}

```

##### æ­¥éª¤2ï¼šç§˜ä¹¦è½¬è¾¾éœ€æ±‚

```js
// preloadå±‚
// ç§˜ä¹¦ï¼ˆé¢„åŠ è½½è„šæœ¬ï¼‰çš„å·¥ä½œæ‰‹å†Œ
contextBridge.exposeInMainWorld('API', {
  sendRequest: (type) => {
    ipcRenderer.send('to-boss', type) // æ‰“ç”µè¯ç»™è‘£äº‹é•¿
  }
})

```

##### æ­¥éª¤3ï¼š è‘£äº‹é•¿å¤„ç†é‡è¦äº‹åŠ¡

```js
// mainå±‚
// è‘£äº‹é•¿ï¼ˆä¸»è¿›ç¨‹ï¼‰çš„æƒé™
ipcMain.on('to-boss', (event, type) => {
  if (type === 'open-file') {
    const file = dialog.showOpenDialogSync() // ç›´æ¥è°ƒç”¨ç³»ç»Ÿå¯¹è¯æ¡†
    event.sender.send('reply', file) // æŠŠç»“æœä¼ å›å»
  }
})

```

##### æ­¥éª¤4ï¼šç§˜ä¹¦æŠŠç»“æœè½¬äº¤å‘˜å·¥

```js
// å‘˜å·¥æ”¶åˆ°å›å¤åçš„æ“ä½œ
ipcRenderer.on('reply', (event, file) => {
  document.getElementById('file-path').textContent = file
})

```

### 2ã€Electron è¿›ç¨‹å¦‚ä½•é€šä¿¡

Electron IPCé€šä¿¡ï¼šä½¿ç”¨ invoke/handle å’Œ send/on è¿›è¡Œé€šä¿¡

#### ä¸€ã€invoke/handle vs send/on åœºæ™¯è¯¦è§£

| ç‰¹æ€§ | invoke/handle | send/on |
| --- | --- | --- |
| é€šä¿¡æ–¹å‘ | åŒå‘ï¼ˆéœ€è¦å“åº”ï¼‰ | å•å‘/åŒå‘ï¼ˆéœ€æ‰‹åŠ¨å›å¤ï¼‰ |
| è¿”å›å€¼å¤„ç† | è‡ªåŠ¨è¿”å›Promise | éœ€æ‰‹åŠ¨ç›‘å¬å›å¤äº‹ä»¶ |
| é”™è¯¯å¤„ç† | è‡ªåŠ¨ä¼ é€’rejecté”™è¯¯ | éœ€é¢å¤–é”™è¯¯äº‹ä»¶å¤„ç† |
| ä»£ç ç®€æ´åº¦ | â­â­â­â­ | â­â­ |
| å…¸å‹ä½¿ç”¨åœºæ™¯ | è·å–æ•°æ®ã€æ‰§è¡Œæ“ä½œå¹¶ç­‰å¾…ç»“æœ | é€šçŸ¥äº‹ä»¶ã€çŠ¶æ€æ¨é€ã€å®æ—¶æ¶ˆæ¯ |

#### äºŒã€ä»€ä¹ˆæ—¶å€™è¯¥ç”¨ invoke/handleï¼Ÿ

###### åœºæ™¯1ï¼šéœ€è¦ç­‰å¾…æ“ä½œç»“æœçš„å¼‚æ­¥ä»»åŠ¡

```javascript
// æ¸²æŸ“è¿›ç¨‹
const result = await ipcRenderer.invoke('read-file', '/path/to/file')

// ä¸»è¿›ç¨‹
ipcMain.handle('read-file', async (event, path) => {
  return fs.promises.readFile(path, 'utf-8')
})

```

##### åœºæ™¯2ï¼šéœ€è¦æ˜ç¡®çŸ¥é“æ“ä½œæ˜¯å¦æˆåŠŸ

```js
// è‡ªåŠ¨é”™è¯¯ä¼ é€’
try {
  await ipcRenderer.invoke('dangerous-operation')
} catch (error) {
  showErrorDialog(error.message)
}

```

##### åœºæ™¯3ï¼šé“¾å¼å¼‚æ­¥æ“ä½œ

```js
// é¡ºåºæ‰§è¡Œå¤šä¸ªä¾èµ–æ“ä½œ
const user = await ipc.invoke('get-user', id)
const orders = await ipc.invoke('get-orders', user.id)
const analytics = await ipc.invoke('generate-report', orders)

```

#### ä¸‰ã€ä»€ä¹ˆæ—¶å€™è¯¥ç”¨ send/onï¼Ÿ

##### åœºæ™¯1ï¼šå•å‘é€šçŸ¥ä¸éœ€è¦å“åº”

```js
// æ¸²æŸ“è¿›ç¨‹ï¼šä¸éœ€è¦ç­‰å¾…å›å¤
ipcRenderer.send('window-minimize')

// ä¸»è¿›ç¨‹
ipcMain.on('window-minimize', () => {
  mainWindow.minimize()
})

```

##### åœºæ™¯2ï¼šä¸»è¿›ç¨‹ä¸»åŠ¨æ¨é€æ¶ˆæ¯

```js
// ä¸»è¿›ç¨‹ï¼šæ£€æµ‹åˆ°æ–°ç‰ˆæœ¬æ—¶å¹¿æ’­
mainWindow.webContents.send('update-available', {
  version: '2.0.0',
  releaseNotes: '...'
})

// æ¸²æŸ“è¿›ç¨‹
ipcRenderer.on('update-available', (event, info) => {
  showUpdateDialog(info)
})

```

##### åœºæ™¯3ï¼šå¤šä¸ªæ¸²æŸ“è¿›ç¨‹ååŒå·¥ä½œ

```js
// ä¸»è¿›ç¨‹ï¼šä¸­è½¬æ¶ˆæ¯
ipcMain.on('chat-message', (event, msg) => {
  // å¹¿æ’­ç»™æ‰€æœ‰çª—å£
  BrowserWindow.getAllWindows().forEach(win => {
    win.webContents.send('new-message', msg)
  })
})

```