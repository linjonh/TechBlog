---
layout: post
title: "二-十-三趣学设计模式-之-解释器模式"
date: 2025-03-05 21:00:08 +0800
description: "解释器模式就像创建一个“计算引擎”，将算术“表达式”翻译成计算机可以理解的计算指令！🗣️+💻"
keywords: "(二 十 三)趣学设计模式 之 解释器模式！"
categories: ['设计模式']
tags: ['设计模式', '解释器模式', 'Java']
artid: "146022124"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146022124
    alt: "二-十-三趣学设计模式-之-解释器模式"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146022124
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146022124
cover: https://bing.ee123.net/img/rand?artid=146022124
image: https://bing.ee123.net/img/rand?artid=146022124
img: https://bing.ee123.net/img/rand?artid=146022124
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     (二 十 三)趣学设计模式 之 解释器模式！
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-light" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/7eae419dffe6445583fd44f700e7b3ec.png#pic_center"/>
    </p>
    <blockquote>
     <p>
     </p>
     <br/>
     🌟我的其他文章也讲解的比较有趣😁，如果喜欢博主的讲解方式，可以多多支持一下，感谢🤗！
     <br/>
     🌟了解备忘录模式请看：
     <a href="https://blog.csdn.net/qq_56158663/article/details/146022005?spm=1001.2014.3001.5501">
      (二 十 二)趣学设计模式 之 备忘录模式！
     </a>
     <p>
     </p>
    </blockquote>
    <p>
     <mark>
      这篇是设计模式专栏的最后一篇了，更多设计模式文章请看专栏 :
      <a href="https://blog.csdn.net/qq_56158663/category_12900538.html?spm=1001.2014.3001.5482">
       ✨设计模式专栏
      </a>
     </mark>
     <br/>
     其他优质专栏： 【🎇
     <a href="https://blog.csdn.net/qq_56158663/category_12893955.html">
      SpringBoot
     </a>
     】【🎉
     <a href="https://blog.csdn.net/qq_56158663/category_12898733.html">
      多线程
     </a>
     】【🎨
     <a href="https://blog.csdn.net/qq_56158663/category_12894622.html">
      Redis
     </a>
     】…等
    </p>
    <blockquote>
     <p>
      如果喜欢作者的讲解方式，可以点赞收藏加关注，你的支持就是我的动力
      <br/>
      ✨更多文章请看个人主页：
      <a href="https://blog.csdn.net/qq_56158663?spm=1010.2135.3001.5343">
       码熔burning
      </a>
     </p>
    </blockquote>
    <h3>
     <a id="__13">
     </a>
     一、 啥是解释器模式？
    </h3>
    <p>
     想象一下，你正在开发一个简单的计算器 🧮，你需要解析用户输入的算术表达式，比如 “1 + 2 * 3” ➕。 你需要将这个表达式分解成不同的部分，然后根据这些部分来计算结果。
    </p>
    <p>
     <strong>
      解释器模式，给定一个语言，定义它的文法的一种表示，并定义一个解释器，这个解释器使用该表示来解释语言中的句子！
     </strong>
     简单来说，就是定义一种语法规则，然后创建一个解释器来解析符合这种规则的语句 🗣️。
    </p>
    <p>
     <strong>
      简单来说，就是创建一个“计算引擎”，将算术“表达式”翻译成计算机可以理解的计算指令！
     </strong>
     🗣️+💻
    </p>
    <ul>
     <li>
      <strong>
       你需要定义一种简单的语言：
      </strong>
      就像你需要定义算术表达式的语法 ➕！
     </li>
     <li>
      <strong>
       你需要解析这种语言的语句：
      </strong>
      就像你需要解析 “1 + 2 * 3” 这个表达式 🧮！
     </li>
     <li>
      <strong>
       你需要根据解析结果执行相应的操作：
      </strong>
      就像你需要根据表达式计算出结果 7 ➗！
     </li>
    </ul>
    <h3>
     <a id="__25">
     </a>
     二、 为什么要用解释器模式？
    </h3>
    <p>
     用解释器模式，好处多多 👍：
    </p>
    <ul>
     <li>
      <strong>
       易于扩展：
      </strong>
      可以很容易地添加新的运算符 ➕！
     </li>
     <li>
      <strong>
       灵活性高：
      </strong>
      可以灵活地组合不同的运算符 🤸！
     </li>
     <li>
      <strong>
       易于实现：
      </strong>
      对于简单的表达式，实现起来比较容易 ✍️！
     </li>
    </ul>
    <h3>
     <a id="__33">
     </a>
     三、 解释器模式的实现方式
    </h3>
    <p>
     解释器模式主要包含以下几个角色：
    </p>
    <ul>
     <li>
      <strong>
       抽象表达式（AbstractExpression）：
      </strong>
      声明一个抽象的解释操作，这个接口为抽象语法树中所有的节点所共享 🌳。
     </li>
     <li>
      <strong>
       终结符表达式（TerminalExpression）：
      </strong>
      实现与文法中的终结符相关联的解释操作。一个句子中的每个终结符需要该类的一个实例 📍。
     </li>
     <li>
      <strong>
       非终结符表达式（NonterminalExpression）：
      </strong>
      实现与文法中的非终结符相关联的解释操作。句子中的每条规则需要该类的一个实例 🔗。
     </li>
     <li>
      <strong>
       上下文（Context）：
      </strong>
      包含解释器之外的一些全局信息 🌍。
     </li>
     <li>
      <strong>
       客户端（Client）：
      </strong>
      构建表示特定句子的抽象语法树。然后调用解释操作 🧑‍💻。
     </li>
    </ul>
    <p>
     <strong>
      代码示例：
     </strong>
    </p>
    <pre><code class="prism language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">HashMap</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Map</span></span><span class="token punctuation">;</span>

<span class="token comment">// 抽象表达式：算术表达式</span>
<span class="token keyword">interface</span> <span class="token class-name">Expression</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> <span class="token function">interpret</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> variables<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 解释</span>
<span class="token punctuation">}</span>

<span class="token comment">// 终结符表达式：数字</span>
<span class="token keyword">class</span> <span class="token class-name">NumberExpression</span> <span class="token keyword">implements</span> <span class="token class-name">Expression</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> number<span class="token punctuation">;</span> <span class="token comment">// 数字</span>

    <span class="token keyword">public</span> <span class="token class-name">NumberExpression</span><span class="token punctuation">(</span><span class="token keyword">int</span> number<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>number <span class="token operator">=</span> number<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">interpret</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> variables<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> number<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 终结符表达式：变量</span>
<span class="token keyword">class</span> <span class="token class-name">VariableExpression</span> <span class="token keyword">implements</span> <span class="token class-name">Expression</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span> <span class="token comment">// 变量名</span>

    <span class="token keyword">public</span> <span class="token class-name">VariableExpression</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">interpret</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> variables<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>variables<span class="token punctuation">.</span><span class="token function">containsKey</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// 默认值为 0</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> variables<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 非终结符表达式：加法</span>
<span class="token keyword">class</span> <span class="token class-name">AddExpression</span> <span class="token keyword">implements</span> <span class="token class-name">Expression</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token class-name">Expression</span> left<span class="token punctuation">;</span> <span class="token comment">// 左表达式</span>
    <span class="token keyword">private</span> <span class="token class-name">Expression</span> right<span class="token punctuation">;</span> <span class="token comment">// 右表达式</span>

    <span class="token keyword">public</span> <span class="token class-name">AddExpression</span><span class="token punctuation">(</span><span class="token class-name">Expression</span> left<span class="token punctuation">,</span> <span class="token class-name">Expression</span> right<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>left <span class="token operator">=</span> left<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>right <span class="token operator">=</span> right<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">interpret</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> variables<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> left<span class="token punctuation">.</span><span class="token function">interpret</span><span class="token punctuation">(</span>variables<span class="token punctuation">)</span> <span class="token operator">+</span> right<span class="token punctuation">.</span><span class="token function">interpret</span><span class="token punctuation">(</span>variables<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 非终结符表达式：减法</span>
<span class="token keyword">class</span> <span class="token class-name">SubtractExpression</span> <span class="token keyword">implements</span> <span class="token class-name">Expression</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token class-name">Expression</span> left<span class="token punctuation">;</span> <span class="token comment">// 左表达式</span>
    <span class="token keyword">private</span> <span class="token class-name">Expression</span> right<span class="token punctuation">;</span> <span class="token comment">// 右表达式</span>

    <span class="token keyword">public</span> <span class="token class-name">SubtractExpression</span><span class="token punctuation">(</span><span class="token class-name">Expression</span> left<span class="token punctuation">,</span> <span class="token class-name">Expression</span> right<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>left <span class="token operator">=</span> left<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>right <span class="token operator">=</span> right<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">interpret</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> variables<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> left<span class="token punctuation">.</span><span class="token function">interpret</span><span class="token punctuation">(</span>variables<span class="token punctuation">)</span> <span class="token operator">-</span> right<span class="token punctuation">.</span><span class="token function">interpret</span><span class="token punctuation">(</span>variables<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 客户端</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 表达式：x + y - 10</span>
        <span class="token class-name">VariableExpression</span> x <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VariableExpression</span><span class="token punctuation">(</span><span class="token string">"x"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">VariableExpression</span> y <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VariableExpression</span><span class="token punctuation">(</span><span class="token string">"y"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">NumberExpression</span> ten <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">NumberExpression</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Expression</span> expression <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SubtractExpression</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">AddExpression</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">,</span> ten<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 上下文：变量赋值</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> variables <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        variables<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"x"</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        variables<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"y"</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 解释表达式</span>
        <span class="token keyword">int</span> result <span class="token operator">=</span> expression<span class="token punctuation">.</span><span class="token function">interpret</span><span class="token punctuation">(</span>variables<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"表达式: x + y - 10"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"x = 5, y = 8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"结果："</span> <span class="token operator">+</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
    <p>
     <strong>
      分析：
     </strong>
    </p>
    <ul>
     <li>
      <code>
       Expression
      </code>
      是抽象表达式，定义了
      <code>
       interpret
      </code>
      方法，用于解释表达式。
     </li>
     <li>
      <code>
       NumberExpression
      </code>
      和
      <code>
       VariableExpression
      </code>
      是终结符表达式，分别代表数字和变量，实现了
      <code>
       interpret
      </code>
      方法，用于返回数字的值和变量的值。
     </li>
     <li>
      <code>
       AddExpression
      </code>
      和
      <code>
       SubtractExpression
      </code>
      是非终结符表达式，分别代表加法和减法，实现了
      <code>
       interpret
      </code>
      方法，用于计算加法和减法的结果。
     </li>
    </ul>
    <p>
     <strong>
      完整的输出结果：
     </strong>
    </p>
    <pre><code>表达式: x + y - 10
x = 5, y = 8
结果：3
</code></pre>
    <h3>
     <a id="__155">
     </a>
     四、 解释器模式的优缺点
    </h3>
    <p>
     <strong>
      优点：
     </strong>
    </p>
    <ul>
     <li>
      易于扩展 ➕！
     </li>
     <li>
      灵活性高 🤸！
     </li>
     <li>
      易于实现 ✍️！
     </li>
    </ul>
    <p>
     <strong>
      缺点：
     </strong>
    </p>
    <ul>
     <li>
      对于复杂的语法，实现起来比较困难 🤯！
     </li>
     <li>
      执行效率较低 🐌！
     </li>
     <li>
      难以维护（当语法规则变得复杂时） 🚧！
     </li>
    </ul>
    <h3>
     <a id="__169">
     </a>
     五、 解释器模式的应用场景
    </h3>
    <ul>
     <li>
      <strong>
       需要定义一种简单的语言：
      </strong>
      就像你需要定义算术表达式的语法 ➕！
     </li>
     <li>
      <strong>
       需要解析这种语言的语句：
      </strong>
      就像你需要解析 “1 + 2 * 3” 这个表达式 🧮！
     </li>
     <li>
      <strong>
       需要根据解析结果执行相应的操作：
      </strong>
      就像你需要根据表达式计算出结果 7 ➗！
     </li>
     <li>
      <strong>
       例如：SQL 解析、正则表达式、编译器等 💻！
      </strong>
     </li>
    </ul>
    <h3>
     <a id="__176">
     </a>
     六、 总结
    </h3>
    <ul>
     <li>
      解释器模式就像创建一个“计算引擎”，将算术“表达式”翻译成计算机可以理解的计算指令！ 🗣️+💻
     </li>
     <li>
      优点是易于扩展、灵活性高、易于实现！ 👍
     </li>
     <li>
      缺点是对于复杂语法实现困难、执行效率低、难以维护！ 👎
     </li>
     <li>
      适用于需要定义一种简单的语言，并解析这种语言的语句的场景！ 🎯
     </li>
    </ul>
    <p>
     希望这个例子能让你彻底理解解释器模式！ 💯 祝你学习愉快！ 😄
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f71715f35363135383636332f:61727469636c652f64657461696c732f313436303232313234" class_="artid" style="display:none">
 </p>
</div>


