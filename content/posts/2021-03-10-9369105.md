---
layout: post
title: "Java-xml-添加节点"
date: 2021-03-10 02:59:58 +0800
description: "本文介绍了一个使用Java操作XML文件的具体示例，包括创建XML节点并将其保存到现有XML文件中。"
keywords: "java xml添加节点"
categories: ['基础', 'Java']
tags: ['无标签']
artid: "9369105"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=9369105
    alt: "Java-xml-添加节点"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=9369105
featuredImagePreview: https://bing.ee123.net/img/rand?artid=9369105
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Java xml 添加节点
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="./../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="./../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <div class="content mod-cs-content text-content clearfix" id="content" style="">
     <p style="padding-bottom:0px; margin:0px; padding-left:0px; padding-right:0px; padding-top:0px">
      <strong>
       建立一个xml文件test.xml，文件内容如下
      </strong>
     </p>
     <p style="padding-bottom:0px; margin:0px; padding-left:0px; padding-right:0px; padding-top:0px">
      &lt;?xml version="1.0" encoding="GB2312" standalone="no"?&gt;&lt;PhoneInfo&gt;
      <br/>
      &lt;/PhoneInfo&gt;
     </p>
     <p style="padding-bottom:0px; margin:0px; padding-left:0px; padding-right:0px; padding-top:0px">
      <strong>
       通过java操作生成xml节点的文件test.java，文件内容：
      </strong>
     </p>
     <p style="padding-bottom:0px; margin:0px; padding-left:0px; padding-right:0px; padding-top:0px">
      package com.pb.test;
      <br/>
      import java.io.FileOutputStream;
      <br/>
      import javax.xml.parsers.DocumentBuilder;
      <br/>
      import javax.xml.parsers.DocumentBuilderFactory;
      <br/>
      import javax.xml.transform.OutputKeys;
      <br/>
      import javax.xml.transform.Transformer;
      <br/>
      import javax.xml.transform.TransformerFactory;
      <br/>
      import javax.xml.transform.dom.DOMSource;
      <br/>
      import javax.xml.transform.stream.StreamResult;
      <br/>
      import org.w3c.dom.Document;
      <br/>
      import org.w3c.dom.Element;
      <br/>
      import org.w3c.dom.Node;
      <br/>
      import org.w3c.dom.NodeList;
      <br/>
      public class Test {
      <!-- -->
      <br/>
      <br/>
      public static void main(String[] args) {
      <!-- -->
      <br/>
      try {
      <!-- -->
      <br/>
      // 1.得到DOM解析器的工厂实例
      <br/>
      DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
      <br/>
      // 2.从DOM工厂里获取DOM解析器
      <br/>
      DocumentBuilder db = dbf.newDocumentBuilder();
      <br/>
      // 3.解析XML文档，得到document，即DOM树
      <br/>
      Document doc = db.parse("src/test.xml");
      <br/>
      // 创建节点
      <br/>
      Element brandElement = doc.createElement("Brand");
      <br/>
      brandElement.setAttribute("name", "华为");
      <br/>
      //创建type节点
      <br/>
      Element typeElement=doc.createElement("Type");
      <br/>
      typeElement.setAttribute("name", "U8650");
      <br/>
      //添加父子关系
      <br/>
      brandElement.appendChild(typeElement);
      <br/>
      Element phoneElement=(Element)doc.getElementsByTagName("PhoneInfo").item(0);
      <br/>
      phoneElement.appendChild(brandElement);
      <br/>
      //保存xml文件
      <br/>
      TransformerFactory transformerFactory=TransformerFactory.newInstance();
      <br/>
      Transformer transformer=transformerFactory.newTransformer();
      <br/>
      DOMSource domSource=new DOMSource(doc);
      <br/>
      //设置编码类型
      <br/>
      transformer.setOutputProperty(OutputKeys.ENCODING, "GB2312");
      <br/>
      StreamResult result=new StreamResult(new FileOutputStream("src/test.xml"));
      <br/>
      //把DOM树转换为xml文件
      <br/>
      transformer.transform(domSource, result);
      <br/>
      } catch (Exception ex) {
      <!-- -->
      <br/>
      System.out.println(ex.getMessage());
      <br/>
      }
      <br/>
      }
      <br/>
      }
     </p>
    </div>
   </div>
  </div>
 </article>
 <p alt="6874:7470733a2f2f626c6f672e6373646e2e6e65742f4761676e5f:732f61727469636c652f64657461696c732f39333639313035" class_="artid" style="display:none">
 </p>
</div>


