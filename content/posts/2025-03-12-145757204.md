---
layout: post
title: "react实现一个列表的拖拽排序react实现拖拽"
date: 2025-03-12 09:27:08 +0800
description: "比较流行的有react-beautiful-dnd和dnd-kit，可能还有react-sortable-hoc，不过这个好像已经不再维护了。我的项目里使用了antd，antd表格有一个示例还是挺像的，本来我想用Table实现，它自带拖拽。这个作者最后推荐了dnd-kit所以我最后选择了这个库，但其实我这个需求用react-beautiful-dnd‌ 也能实现。您还需要确保安装了对等依赖项。这里有两个版本，我不想用immutability-helper库，觉得多一个依赖没啥意义，所以我去掉了。"
keywords: "react-dnd"
categories: ['前端', 'React']
tags: ['前端框架', '前端', 'React']
artid: "145757204"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=145757204
    alt: "react实现一个列表的拖拽排序react实现拖拽"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=145757204
featuredImagePreview: https://bing.ee123.net/img/rand?artid=145757204
cover: https://bing.ee123.net/img/rand?artid=145757204
image: https://bing.ee123.net/img/rand?artid=145757204
img: https://bing.ee123.net/img/rand?artid=145757204
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     react实现一个列表的拖拽排序(react实现拖拽)
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-light" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h2>
     <a id="_0">
     </a>
     需求场景：
    </h2>
    <p>
     我的项目里需要实现一个垂直列表的拖拽排序，效果图如下图：
     <br/>
     <img alt="效果截图" src="https://i-blog.csdnimg.cn/direct/a649d9d243b74b67bd474597295173cc.png"/>
    </p>
    <h2>
     <a id="_3">
     </a>
     技术调研：
    </h2>
    <h3>
     <a id="antd_Table_4">
     </a>
     借用antd Table实现：
    </h3>
    <p>
     我的项目里使用了antd，antd表格有一个示例还是挺像的，本来我想用Table实现，它自带拖拽。但后来想了一下，还要改antd的样式，而且布局不灵活。
     <br/>
     <img alt="antd 拖拽排序截图" src="https://i-blog.csdnimg.cn/direct/3e0cc0eefbcb4245aac90e958098471d.png"/>
    </p>
    <p>
     <a href="https://4x-ant-design.antgroup.com/components/table-cn/#components-table-demo-drag-sorting" rel="nofollow">
      antd Table 拖拽排序
     </a>
    </p>
    <h3>
     <a id="_10">
     </a>
     库调研:
    </h3>
    <p>
     核心库分类与特点
    </p>
    <h4>
     <a id="reactdnd_13">
     </a>
     react-dnd‌
    </h4>
    <p>
     ‌核心能力‌：基于 HTML5 拖拽 API 设计，支持复杂场景（跨容器、嵌套拖拽）‌
     <br/>
     ‌优势‌：灵活度高，可搭配 HTML5Backend 或自定义后端实现多端兼容‌
     <br/>
     ‌缺点‌：需手动处理动画效果，开发成本较高‌
     <br/>
     <a href="https://github.com/react-dnd/react-dnd">
      github react-dnd
     </a>
     <br/>
     请参阅网站上的文档、教程和示例(这个需要用梯子才能访问)：
     <br/>
     http://react-dnd.github.io/react-dnd/
    </p>
    <h4>
     <a id="reactbeautifuldnd_20">
     </a>
     ‌react-beautiful-dnd‌
    </h4>
    <p>
     ‌核心能力‌：专注列表拖拽排序，内置流畅动画和视觉反馈‌
     <br/>
     ‌优势‌：API 简洁，适合垂直/水平列表场景‌
     <br/>
     ‌缺点‌：维护停滞（2025年已不推荐新项目使用）
    </p>
    <p>
     <a href="https://github.com/react-dnd/react-dnd">
      github react-dnd
     </a>
     <br/>
     请参阅网站上的文档、教程和示例(这个需要用梯子才能访问)：
     <br/>
     http://react-dnd.github.io/react-dnd/
    </p>
    <p>
     适合复杂拖拽场景
     <br/>
     这个库的相同作者：pragmatic-drag-and-drop （这个库更强大灵活）
     <br/>
     <a href="https://github.com/atlassian/react-beautiful-dnd/issues/2672">
      react-beautiful-dnd issues 2672
     </a>
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/9b416e099550446592acdde55a74376c.png">
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/3f394bb2e27e4b2fa40721d0176234a0.png"/>
     </img>
    </p>
    <p>
     这个作者最后推荐了dnd-kit所以我最后选择了这个库，但其实我这个需求用react-beautiful-dnd‌ 也能实现。
    </p>
    <p>
     <a href="https://react-beautiful-dnd.netlify.app/iframe.html?id=board--simple" rel="nofollow">
      react-beautiful-dnd 例子地址
     </a>
     <br/>
     <img alt="效果截图" src="https://i-blog.csdnimg.cn/direct/4a0fd73750ac4b17a9fc7916238c3a86.png"/>
    </p>
    <h4>
     <a id="dndkit_41">
     </a>
     ‌dnd-kit‌
    </h4>
    <p>
     ‌核心能力‌：模块化设计，支持拖拽、排序、缩放等多种交互‌
     <br/>
     ‌优势‌：性能优异（基于 CSS Transform），支持触控设备‌
     <br/>
     ‌适用场景‌：现代 React 项目优先选择（活跃维护）‌
     <br/>
     轻量级（核心包仅 4KB）
     <br/>
     提供完整的 ‌拖拽动画/碰撞检测‌
     <br/>
     官方文档：dndkit.com
    </p>
    <h4>
     <a id="reactsortablehoc_49">
     </a>
     ‌react-sortable-hoc‌
    </h4>
    <p>
     ‌核心能力‌：通过高阶组件快速实现拖拽排序‌
     <br/>
     ‌缺点‌：已停止维护，仅适合老旧项目兼容‌
    </p>
    <h4>
     <a id="reactgridlayout_53">
     </a>
     ‌react-grid-layout‌
    </h4>
    <p>
     ‌核心能力‌：网格布局拖拽（如仪表盘、表单设计器）‌
     <br/>
     ‌优势‌：内置响应式布局算法，支持拖拽+缩放‌
     <br/>
     比较流行的有react-beautiful-dnd和dnd-kit，可能还有react-sortable-hoc，不过这个好像已经不再维护了。现在应该推荐使用比较新的库，比如dnd-kit，因为它更轻量且维护活跃。
    </p>
    <h4>
     <a id="2025_58">
     </a>
     选型建议（2025年）
    </h4>
    <table>
     <thead>
      <tr>
       <th>
        需求场景
       </th>
       <th>
        推荐库
       </th>
       <th>
        关键理由
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        复杂交互（跨容器）
       </td>
       <td>
        react-dnd
       </td>
       <td>
        灵活性高，支持自定义后端
       </td>
      </tr>
      <tr>
       <td>
        列表排序+动画
       </td>
       <td>
        dnd-kit
       </td>
       <td>
        性能优，维护活跃，API 友好
       </td>
      </tr>
      <tr>
       <td>
        网格布局拖拽
       </td>
       <td>
        react-grid-layout
       </td>
       <td>
        专为网格设计，支持响应式
       </td>
      </tr>
      <tr>
       <td>
        老旧项目维护
       </td>
       <td>
        react-sortable-hoc
       </td>
       <td>
        快速适配旧代码，无需重构
       </td>
      </tr>
     </tbody>
    </table>
    <h3>
     <a id="dndkit_67">
     </a>
     使用dnd-kit的步骤与代码：
    </h3>
    <h4>
     <a id="_68">
     </a>
     官网文档使用即了解：
    </h4>
    <p>
     例子demo：
     <br/>
     <a href="https://master--5fc05e08a4a65d0021ae0bf2.chromatic.com/?path=/story/presets-sortable-vertical--basic-setup" rel="nofollow">
      dnd-kit 垂直拖拽例子
     </a>
     <br/>
     <a href="https://master--5fc05e08a4a65d0021ae0bf2.chromatic.com/?path=/story/presets-sortable-vertical--drag-handle" rel="nofollow">
      dnd-kit 垂直拖拽例子 带手柄
     </a>
     <br/>
     <img alt="效果截图" src="https://i-blog.csdnimg.cn/direct/ada247bda635482d8cd7d3828f65c5e5.png">
      <br/>
      切换到 Docs 然后 右下角有个showCode就能看到代码了：
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/9a45660408f240db9044e0430e27ca30.png">
       <br/>
       其实这个demo就大致符合我的需求，我只需要修改一下布局即可！
      </img>
     </img>
    </p>
    <h4>
     <a id="_77">
     </a>
     实现效果步骤：
    </h4>
    <h5>
     <a id="dndkit__react_78">
     </a>
     安装dnd-kit (使用 react版本即可):
    </h5>
    <pre><code class="prism language-bash"><span class="token function">npm</span> <span class="token function">install</span> @dnd-kit/react
</code></pre>
    <h5>
     <a id="_82">
     </a>
     使用官网例子:
    </h5>
    <p>
     官网例子，点击Docs就能查看一些示例的基础代码：
     <br/>
     <img alt="官网例子代码查看" src="https://i-blog.csdnimg.cn/direct/a968daaf56364650bf5f42c235963581.png"/>
    </p>
    <pre><code class="prism language-javascript"><span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> useSortable <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@dnd-kit/react/sortable'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">Sortable</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{<!-- --></span> id<span class="token punctuation">,</span> index <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span> ref <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useSortable</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> id<span class="token punctuation">,</span> index <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>li ref<span class="token operator">=</span><span class="token punctuation">{<!-- --></span>ref<span class="token punctuation">}</span> className<span class="token operator">=</span><span class="token string">"item"</span><span class="token operator">&gt;</span>Item <span class="token punctuation">{<!-- --></span>id<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">const</span> items <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>ul className<span class="token operator">=</span><span class="token string">"list"</span><span class="token operator">&gt;</span>
      <span class="token punctuation">{<!-- --></span>items<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">id<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
        <span class="token operator">&lt;</span>Sortable key<span class="token operator">=</span><span class="token punctuation">{<!-- --></span>id<span class="token punctuation">}</span> id<span class="token operator">=</span><span class="token punctuation">{<!-- --></span>id<span class="token punctuation">}</span> index<span class="token operator">=</span><span class="token punctuation">{<!-- --></span>index<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token punctuation">)</span><span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>
</code></pre>
    <p>
     <img alt="效果截图" src="https://i-blog.csdnimg.cn/direct/e68e828299714331a55e9b9cbe65ff7f.png">
      <br/>
      如果能拖动说明引入成功了！只需要修改一下布局即可。
      <br/>
      <a href="https://next.dndkit.com/react/quickstart" rel="nofollow">
       dnd-kit react 官网档
      </a>
      <br/>
      <a href="https://experimental--5fc05e08a4a65d0021ae0bf2.chromatic.com/?path=/story/react-sortable--example" rel="nofollow">
       dnd-kit react官网例子
      </a>
     </img>
    </p>
    <h3>
     <a id="reactdnd_115">
     </a>
     使用react-dnd的步骤与代码：
    </h3>
    <h4>
     <a id="_116">
     </a>
     官网文档使用即了解：
    </h4>
    <p>
     官网的例子代码：
     <a href="https://github.com/react-dnd/react-dnd/tree/main/packages/examples">
      github react-dnd examples示例代码
     </a>
    </p>
    <p>
     <a href="https://react-dnd.github.io/react-dnd/examples/sortable/simple" rel="nofollow">
      例子网址https://react-dnd.github.io/react-dnd/examples/sortable/simple
     </a>
     <br/>
     <img alt="例子截图" src="https://i-blog.csdnimg.cn/direct/f874eb08a7fa46a18fb8157d4a9528a1.png">
      <br/>
      这个的代码地址：
      <a href="https://github.com/react-dnd/react-dnd/tree/main/packages/examples/src/04-sortable/simple">
       sortable simple
       <br/>
      </a>
     </img>
    </p>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/ab74345317964d0085872126e0313c6f.png"/>
     <br/>
     react-dnd-main\packages\examples\src\04-sortable\simple：
     <br/>
     <img alt="下载下后的截图" src="https://i-blog.csdnimg.cn/direct/6f53715c2fff44cd8c97955f14024cce.png"/>
     <br/>
     index.ts没什么用可以不用看。
    </p>
    <p>
     <strong>
      建议之际gitcloe 下来或者 下载成zip在本地打开更方便！
     </strong>
    </p>
    <h4>
     <a id="reactdnd_130">
     </a>
     具体实现react-dnd：
    </h4>
    <h5>
     <a id="reactdnd_132">
     </a>
     下载react-dnd:
    </h5>
    <pre><code class="prism language-bash"><span class="token function">npm</span> <span class="token function">install</span> react-dnd react-dnd-html5-backend
</code></pre>
    <h5>
     <a id="_137">
     </a>
     把官网的例子放到项目里：
    </h5>
    <p>
     把官网的例子放到代码里看看能不能运行，能的话说明依赖下载成功。
     <br/>
     <a href="https://codesandbox.io/p/sandbox/react-dnd-example-12-kkqpklk3q7" rel="nofollow">
      react-dnd 推拽排序例子
     </a>
     <br/>
     <img alt="代码截图" src="https://i-blog.csdnimg.cn/direct/dfcda60f61f64698952291f619fbee7e.png"/>
    </p>
    <h6>
     <a id="_indextsx_141">
     </a>
     新建一个组件 index.tsx:
    </h6>
    <pre><code class="prism language-javascript"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Example <span class="token keyword">from</span> <span class="token string">'./Container'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> DndProvider <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-dnd'</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> HTML5Backend <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-dnd-html5-backend'</span>
<span class="token comment">// 定义一个名为App的函数</span>
<span class="token keyword">const</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">// 返回一个div元素，类名为App</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>DndProvider backend<span class="token operator">=</span><span class="token punctuation">{<!-- --></span>HTML5Backend<span class="token punctuation">}</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Example <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>DndProvider<span class="token operator">&gt;</span>

  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> App
</code></pre>
    <h6>
     <a id="Cardtsx_160">
     </a>
     新建一个Card.tsx:
    </h6>
    <pre><code class="prism language-javascript">
<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span> useRef <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> useDrag<span class="token punctuation">,</span> useDrop <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-dnd'</span>
<span class="token comment">// import { ItemTypes } from './ItemTypes.js'</span>
<span class="token keyword">const</span> style <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">border</span><span class="token operator">:</span> <span class="token string">'1px dashed gray'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">padding</span><span class="token operator">:</span> <span class="token string">'0.5rem 1rem'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">marginBottom</span><span class="token operator">:</span> <span class="token string">'.5rem'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">backgroundColor</span><span class="token operator">:</span> <span class="token string">'white'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">cursor</span><span class="token operator">:</span> <span class="token string">'move'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">Card</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{<!-- --></span> id<span class="token punctuation">,</span> text<span class="token punctuation">,</span> index<span class="token punctuation">,</span> moveCard <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">const</span> ref <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span><span class="token punctuation">{<!-- --></span> handlerId <span class="token punctuation">}</span><span class="token punctuation">,</span> drop<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useDrop</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">accept</span><span class="token operator">:</span> <span class="token string">"card"</span><span class="token punctuation">,</span>
    <span class="token function">collect</span><span class="token punctuation">(</span><span class="token parameter">monitor</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">handlerId</span><span class="token operator">:</span> monitor<span class="token punctuation">.</span><span class="token function">getHandlerId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">hover</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> monitor</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>ref<span class="token punctuation">.</span>current<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">const</span> dragIndex <span class="token operator">=</span> item<span class="token punctuation">.</span>index
      <span class="token keyword">const</span> hoverIndex <span class="token operator">=</span> index
      <span class="token comment">// Don't replace items with themselves</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>dragIndex <span class="token operator">===</span> hoverIndex<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// Determine rectangle on screen</span>
      <span class="token keyword">const</span> hoverBoundingRect <span class="token operator">=</span> ref<span class="token punctuation">.</span>current<span class="token operator">?.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token comment">// Get vertical middle</span>
      <span class="token keyword">const</span> hoverMiddleY <span class="token operator">=</span>
        <span class="token punctuation">(</span>hoverBoundingRect<span class="token punctuation">.</span>bottom <span class="token operator">-</span> hoverBoundingRect<span class="token punctuation">.</span>top<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span>
      <span class="token comment">// Determine mouse position</span>
      <span class="token keyword">const</span> clientOffset <span class="token operator">=</span> monitor<span class="token punctuation">.</span><span class="token function">getClientOffset</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token comment">// Get pixels to the top</span>
      <span class="token keyword">const</span> hoverClientY <span class="token operator">=</span> clientOffset<span class="token punctuation">.</span>y <span class="token operator">-</span> hoverBoundingRect<span class="token punctuation">.</span>top
      <span class="token comment">// Only perform the move when the mouse has crossed half of the items height</span>
      <span class="token comment">// When dragging downwards, only move when the cursor is below 50%</span>
      <span class="token comment">// When dragging upwards, only move when the cursor is above 50%</span>
      <span class="token comment">// Dragging downwards</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>dragIndex <span class="token operator">&lt;</span> hoverIndex <span class="token operator">&amp;&amp;</span> hoverClientY <span class="token operator">&lt;</span> hoverMiddleY<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// Dragging upwards</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>dragIndex <span class="token operator">&gt;</span> hoverIndex <span class="token operator">&amp;&amp;</span> hoverClientY <span class="token operator">&gt;</span> hoverMiddleY<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// Time to actually perform the action</span>
      <span class="token function">moveCard</span><span class="token punctuation">(</span>dragIndex<span class="token punctuation">,</span> hoverIndex<span class="token punctuation">)</span>
      <span class="token comment">// Note: we're mutating the monitor item here!</span>
      <span class="token comment">// Generally it's better to avoid mutations,</span>
      <span class="token comment">// but it's good here for the sake of performance</span>
      <span class="token comment">// to avoid expensive index searches.</span>
      item<span class="token punctuation">.</span>index <span class="token operator">=</span> hoverIndex
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span><span class="token punctuation">{<!-- --></span> isDragging <span class="token punctuation">}</span><span class="token punctuation">,</span> drag<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useDrag</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"card"</span><span class="token punctuation">,</span>
    <span class="token function-variable function">item</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span> id<span class="token punctuation">,</span> index <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">collect</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">monitor</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">isDragging</span><span class="token operator">:</span> monitor<span class="token punctuation">.</span><span class="token function">isDragging</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> opacity <span class="token operator">=</span> isDragging <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> <span class="token number">1</span>
  <span class="token function">drag</span><span class="token punctuation">(</span><span class="token function">drop</span><span class="token punctuation">(</span>ref<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div ref<span class="token operator">=</span><span class="token punctuation">{<!-- --></span>ref<span class="token punctuation">}</span> style<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span> <span class="token operator">...</span>style<span class="token punctuation">,</span> opacity <span class="token punctuation">}</span><span class="token punctuation">}</span> data<span class="token operator">-</span>handler<span class="token operator">-</span>id<span class="token operator">=</span><span class="token punctuation">{<!-- --></span>handlerId<span class="token punctuation">}</span><span class="token operator">&gt;</span>
      <span class="token punctuation">{<!-- --></span>text<span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre>
    <h6>
     <a id="Containertsx_241">
     </a>
     新建一个Container.tsx:
    </h6>
    <pre><code class="prism language-javascript">
<span class="token keyword">import</span> update <span class="token keyword">from</span> <span class="token string">'immutability-helper'</span>
<span class="token keyword">import</span> React<span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span> useCallback<span class="token punctuation">,</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> Card <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./Card.js'</span>
<span class="token keyword">const</span> style <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">400</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> <span class="token function-variable function">Container</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>cards<span class="token punctuation">,</span> setCards<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
      <span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'Write a cool JS library'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'Make it generic enough'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
        <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'Write README'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
        <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'Create some examples'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
        <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'Spam in Twitter and IRC to promote it (note that this element is taller than the others)'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span>
        <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'???'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">7</span><span class="token punctuation">,</span>
        <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'PROFIT'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> moveCard <span class="token operator">=</span> <span class="token function">useCallback</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">dragIndex<span class="token punctuation">,</span> hoverIndex</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
      <span class="token function">setCards</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">prevCards</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
        <span class="token function">update</span><span class="token punctuation">(</span>prevCards<span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span>
          <span class="token literal-property property">$splice</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">[</span>dragIndex<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token punctuation">[</span>hoverIndex<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> prevCards<span class="token punctuation">[</span>dragIndex<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> renderCard <span class="token operator">=</span> <span class="token function">useCallback</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">card<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>Card
          key<span class="token operator">=</span><span class="token punctuation">{<!-- --></span>card<span class="token punctuation">.</span>id<span class="token punctuation">}</span>
          index<span class="token operator">=</span><span class="token punctuation">{<!-- --></span>index<span class="token punctuation">}</span>
          id<span class="token operator">=</span><span class="token punctuation">{<!-- --></span>card<span class="token punctuation">.</span>id<span class="token punctuation">}</span>
          text<span class="token operator">=</span><span class="token punctuation">{<!-- --></span>card<span class="token punctuation">.</span>text<span class="token punctuation">}</span>
          moveCard<span class="token operator">=</span><span class="token punctuation">{<!-- --></span>moveCard<span class="token punctuation">}</span>
        <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token punctuation">{<!-- --></span>style<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{<!-- --></span>cards<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">card<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">renderCard</span><span class="token punctuation">(</span>card<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> Container
</code></pre>
    <p>
     如果你使用的是jsx后缀改为jsx即可，这个例子需要单独下载一个immutability-helper:
    </p>
    <pre><code class="prism language-bash">cnpm <span class="token function">install</span> immutability-helper
</code></pre>
    <p>
     <a href="https://www.npmjs.com/package/immutability-helper" rel="nofollow">
      npm immutability-helper
     </a>
    </p>
    <pre><code class="prism language-bash">‌immutability-helper‌是一个小型JavaScript库，旨在提供一种方便的方法来无副作用地修改数据，同时保持原始数据源的不变性。它由Kolodny创建，主要功能是创建数据的副本并对其进行修改，而不是直接修改原数据‌

主要功能和用法
immutability-helper提供了一系列API来操作不可变数据，包括：

<span class="token variable">$push</span>：将数组中的所有项推送到目标数组中。
<span class="token variable">$unshift</span>：将数组中的所有项插入到目标数组的开头。
<span class="token variable">$splice</span>：对目标数组进行多次操作。
<span class="token variable">$set</span>：用任意值替换目标。
<span class="token variable">$toggle</span>：切换目标数组中指定下标的布尔值。
<span class="token variable">$unset</span>：从目标对象中移除指定的键列表。
<span class="token variable">$merge</span>：将参数对象的键与目标合并。
<span class="token variable">$apply</span>：将当前值传递给函数进行处理‌

</code></pre>
    <p>
     <img alt="效果图" src="https://i-blog.csdnimg.cn/direct/f1419daed0644588b7bf3affda9a98e2.png"/>
    </p>
    <h5>
     <a id="_337">
     </a>
     我的需求实现代码:
    </h5>
    <h6>
     <a id="_indextsx_338">
     </a>
     新建一个组件 index.tsx:
    </h6>
    <pre><code class="prism language-javascript"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Example <span class="token keyword">from</span> <span class="token string">'./Container'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> DndProvider <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-dnd'</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> HTML5Backend <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-dnd-html5-backend'</span>
<span class="token comment">// 定义一个名为App的函数</span>
<span class="token keyword">const</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">// 返回一个div元素，类名为App</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>DndProvider backend<span class="token operator">=</span><span class="token punctuation">{<!-- --></span>HTML5Backend<span class="token punctuation">}</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Example <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>DndProvider<span class="token operator">&gt;</span>

  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> App

</code></pre>
    <h6>
     <a id="Cardtsx_358">
     </a>
     新建一个Card.tsx:
    </h6>
    <pre><code class="prism language-javascript"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span> useRef <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> useDrag<span class="token punctuation">,</span> useDrop <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-dnd'</span>  <span class="token comment">// 拖拽库核心API</span>
<span class="token keyword">import</span> <span class="token string">"./index.less"</span>
<span class="token keyword">import</span> moveIcon <span class="token keyword">from</span> <span class="token string">"@/assets/img/icon/move.png"</span><span class="token punctuation">;</span>  <span class="token comment">// 拖拽手柄图标</span>
<span class="token keyword">import</span> closeIcon <span class="token keyword">from</span> <span class="token string">"@/assets/img/icon/close.png"</span><span class="token punctuation">;</span>  <span class="token comment">// 关闭按钮图标</span>

<span class="token comment">/**
 * 可拖拽排序卡片组件
 * @param {number} id - 卡片唯一标识
 * @param {string} text - 卡片显示文本
 * @param {number} index - 卡片在列表中的位置索引
 * @param {function} moveCard - 卡片位置交换回调
 * @param {function} closeCard - 卡片关闭回调
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">Card</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{<!-- --></span> id<span class="token punctuation">,</span> text<span class="token punctuation">,</span> index<span class="token punctuation">,</span> moveCard<span class="token punctuation">,</span> closeCard <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">// 引用DOM节点用于拖拽定位</span>
  <span class="token keyword">const</span> ref <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>

  <span class="token comment">/* 放置区域配置 */</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span><span class="token punctuation">{<!-- --></span> handlerId <span class="token punctuation">}</span><span class="token punctuation">,</span> drop<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useDrop</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">accept</span><span class="token operator">:</span> <span class="token string">"card"</span><span class="token punctuation">,</span>  <span class="token comment">// 只接受同类型拖拽元素</span>
    <span class="token function-variable function">collect</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">monitor</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
      <span class="token comment">// 获取拖拽源的处理器ID（用于调试）</span>
      <span class="token literal-property property">handlerId</span><span class="token operator">:</span> monitor<span class="token punctuation">.</span><span class="token function">getHandlerId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">// 悬停时触发排序逻辑</span>
    <span class="token function">hover</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> monitor</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>ref<span class="token punctuation">.</span>current<span class="token punctuation">)</span> <span class="token keyword">return</span>
      
      <span class="token keyword">const</span> dragIndex <span class="token operator">=</span> item<span class="token punctuation">.</span>index    <span class="token comment">// 拖拽元素的原始索引</span>
      <span class="token keyword">const</span> hoverIndex <span class="token operator">=</span> index        <span class="token comment">// 当前卡片的索引</span>
      
      <span class="token comment">// 相同位置不处理</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>dragIndex <span class="token operator">===</span> hoverIndex<span class="token punctuation">)</span> <span class="token keyword">return</span>

      <span class="token comment">// 获取当前卡片布局信息</span>
      <span class="token keyword">const</span> hoverBoundingRect <span class="token operator">=</span> ref<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token comment">// 计算卡片垂直中点</span>
      <span class="token keyword">const</span> hoverMiddleY <span class="token operator">=</span> <span class="token punctuation">(</span>hoverBoundingRect<span class="token punctuation">.</span>bottom <span class="token operator">-</span> hoverBoundingRect<span class="token punctuation">.</span>top<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span>
      <span class="token comment">// 获取鼠标当前位置</span>
      <span class="token keyword">const</span> clientOffset <span class="token operator">=</span> monitor<span class="token punctuation">.</span><span class="token function">getClientOffset</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token comment">// 计算鼠标相对于卡片顶部的位置</span>
      <span class="token keyword">const</span> hoverClientY <span class="token operator">=</span> clientOffset<span class="token punctuation">.</span>y <span class="token operator">-</span> hoverBoundingRect<span class="token punctuation">.</span>top

      <span class="token comment">/* 拖拽方向判断逻辑 */</span>
      <span class="token comment">// 向下拖拽：仅当鼠标超过50%高度时触发交换</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>dragIndex <span class="token operator">&lt;</span> hoverIndex <span class="token operator">&amp;&amp;</span> hoverClientY <span class="token operator">&lt;</span> hoverMiddleY<span class="token punctuation">)</span> <span class="token keyword">return</span>
      <span class="token comment">// 向上拖拽：仅当鼠标超过50%高度时触发交换</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>dragIndex <span class="token operator">&gt;</span> hoverIndex <span class="token operator">&amp;&amp;</span> hoverClientY <span class="token operator">&gt;</span> hoverMiddleY<span class="token punctuation">)</span> <span class="token keyword">return</span>

      <span class="token comment">// 执行卡片位置交换</span>
      <span class="token function">moveCard</span><span class="token punctuation">(</span>dragIndex<span class="token punctuation">,</span> hoverIndex<span class="token punctuation">)</span>
      <span class="token comment">// 性能优化：直接修改监控项索引避免重复计算</span>
      item<span class="token punctuation">.</span>index <span class="token operator">=</span> hoverIndex
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token comment">/* 拖拽行为配置 */</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span><span class="token punctuation">{<!-- --></span> isDragging <span class="token punctuation">}</span><span class="token punctuation">,</span> drag<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useDrag</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"card"</span><span class="token punctuation">,</span>  <span class="token comment">// 拖拽类型标识</span>
    <span class="token function-variable function">item</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
      <span class="token comment">// 传递拖拽所需数据</span>
      id<span class="token punctuation">,</span>
      index
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function-variable function">collect</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">monitor</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
      <span class="token comment">// 收集拖拽状态</span>
      <span class="token literal-property property">isDragging</span><span class="token operator">:</span> monitor<span class="token punctuation">.</span><span class="token function">isDragging</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token comment">// 将拖拽和放置逻辑绑定到同一DOM节点</span>
  <span class="token function">drag</span><span class="token punctuation">(</span><span class="token function">drop</span><span class="token punctuation">(</span>ref<span class="token punctuation">)</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div
      ref<span class="token operator">=</span><span class="token punctuation">{<!-- --></span>ref<span class="token punctuation">}</span>
      className<span class="token operator">=</span><span class="token punctuation">{<!-- --></span>isDragging <span class="token operator">?</span> <span class="token string">"move list_item"</span> <span class="token operator">:</span> <span class="token string">"no_move list_item"</span><span class="token punctuation">}</span>  <span class="token comment">// 拖拽时应用特殊样式</span>
      data<span class="token operator">-</span>handler<span class="token operator">-</span>id<span class="token operator">=</span><span class="token punctuation">{<!-- --></span>handlerId<span class="token punctuation">}</span>  <span class="token comment">// 调试用标识</span>
    <span class="token operator">&gt;</span>
      <span class="token punctuation">{<!-- --></span><span class="token comment">/* 拖拽手柄 */</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token punctuation">{<!-- --></span>moveIcon<span class="token punctuation">}</span> alt<span class="token operator">=</span><span class="token string">"move_icon"</span> className<span class="token operator">=</span><span class="token string">'move_icon'</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      
      <span class="token punctuation">{<!-- --></span><span class="token comment">/* 卡片内容 */</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">'list_item_content'</span><span class="token operator">&gt;</span>
        <span class="token punctuation">{<!-- --></span>text<span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

      <span class="token punctuation">{<!-- --></span><span class="token comment">/* 关闭按钮 */</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span>img 
        src<span class="token operator">=</span><span class="token punctuation">{<!-- --></span>closeIcon<span class="token punctuation">}</span> 
        alt<span class="token operator">=</span><span class="token string">"close_icon"</span> 
        className<span class="token operator">=</span><span class="token string">'close_icon'</span> 
        onClick<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">closeCard</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">}</span>  <span class="token comment">// 传递当前卡片ID</span>
      <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre>
    <h6>
     <a id="Containertsx_461">
     </a>
     新建一个Container.tsx:
    </h6>
    <pre><code class="prism language-javascript"><span class="token comment">// 引入依赖库</span>
<span class="token keyword">import</span> update <span class="token keyword">from</span> <span class="token string">'immutability-helper'</span>  <span class="token comment">// 不可变数据操作工具</span>
<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span> useCallback<span class="token punctuation">,</span> useEffect<span class="token punctuation">,</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> Card <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./Card.js'</span>  <span class="token comment">// 自定义卡片组件</span>

<span class="token comment">// 容器样式</span>
<span class="token keyword">const</span> style <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">400</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">Container</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">// 卡片初始状态</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>cards<span class="token punctuation">,</span> setCards<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'策略类型'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'策略场景'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'上周'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'近一月'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'今年以来'</span> <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">)</span>

  <span class="token comment">// 卡片副本状态（当前未实际使用）</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>cardCopy<span class="token punctuation">,</span> setCardCopy<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span>cards<span class="token punctuation">)</span>

  <span class="token comment">// 同步主状态到副本状态</span>
  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>cards<span class="token punctuation">,</span> <span class="token string">"cardCopy"</span><span class="token punctuation">)</span>
    <span class="token function">setCardCopy</span><span class="token punctuation">(</span>cards<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>cards<span class="token punctuation">]</span><span class="token punctuation">)</span>

  <span class="token comment">/**
   * 卡片移动逻辑
   * @param dragIndex 拖拽卡片的原始位置
   * @param hoverIndex 拖拽目标位置
   */</span>
  <span class="token keyword">const</span> moveCard <span class="token operator">=</span> <span class="token function">useCallback</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">dragIndex<span class="token punctuation">,</span> hoverIndex</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">setCards</span><span class="token punctuation">(</span><span class="token parameter">prevCards</span> <span class="token operator">=&gt;</span> 
      <span class="token function">update</span><span class="token punctuation">(</span>prevCards<span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">$splice</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">[</span>dragIndex<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token comment">// 删除原始位置的元素</span>
          <span class="token punctuation">[</span>hoverIndex<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> prevCards<span class="token punctuation">[</span>dragIndex<span class="token punctuation">]</span><span class="token punctuation">]</span>  <span class="token comment">// 在目标位置插入拖拽元素</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

  <span class="token comment">// const moveCard = useCallback((dragIndex, hoverIndex) =&gt; {<!-- --></span>
  <span class="token comment">//   setCards(prevCards =&gt; {<!-- --></span>
  <span class="token comment">//     // 创建新数组副本</span>
  <span class="token comment">//     const newCards = [...prevCards]</span>
  <span class="token comment">//     // 提取被拖拽元素</span>
  <span class="token comment">//     const draggedCard = newCards[dragIndex]</span>
  <span class="token comment">//     // 删除原位置元素</span>
  <span class="token comment">//     newCards.splice(dragIndex, 1)</span>
  <span class="token comment">//     // 插入到新位置</span>
  <span class="token comment">//     newCards.splice(hoverIndex, 0, draggedCard)</span>
  <span class="token comment">//     return newCards</span>
  <span class="token comment">//   })</span>
  <span class="token comment">// }, [])</span>

  <span class="token comment">/**
   * 关闭卡片逻辑（当前实现存在问题）
   * @param id 卡片ID
   * @param index 卡片索引
   */</span>
  <span class="token keyword">const</span> closeCard <span class="token operator">=</span> <span class="token function">useCallback</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">setCards</span><span class="token punctuation">(</span><span class="token parameter">prevCards</span> <span class="token operator">=&gt;</span>
      <span class="token comment">// 使用 filter 创建新数组，排除目标卡片</span>
      prevCards<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">card</span> <span class="token operator">=&gt;</span> card<span class="token punctuation">.</span>id <span class="token operator">!==</span> id<span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

  <span class="token comment">// 渲染单个卡片</span>
  <span class="token keyword">const</span> renderCard <span class="token operator">=</span> <span class="token function">useCallback</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">card<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>Card
        key<span class="token operator">=</span><span class="token punctuation">{<!-- --></span>card<span class="token punctuation">.</span>id<span class="token punctuation">}</span>
        index<span class="token operator">=</span><span class="token punctuation">{<!-- --></span>index<span class="token punctuation">}</span>
        id<span class="token operator">=</span><span class="token punctuation">{<!-- --></span>card<span class="token punctuation">.</span>id<span class="token punctuation">}</span>
        text<span class="token operator">=</span><span class="token punctuation">{<!-- --></span>card<span class="token punctuation">.</span>text<span class="token punctuation">}</span>
        moveCard<span class="token operator">=</span><span class="token punctuation">{<!-- --></span>moveCard<span class="token punctuation">}</span>
        closeCard<span class="token operator">=</span><span class="token punctuation">{<!-- --></span>closeCard<span class="token punctuation">}</span>
      <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
      <span class="token punctuation">{<!-- --></span><span class="token comment">/* 卡片容器 */</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token punctuation">{<!-- --></span>style<span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token punctuation">{<!-- --></span>cards<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">card<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">renderCard</span><span class="token punctuation">(</span>card<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Container
</code></pre>
    <p>
     这里有两个版本，我不想用immutability-helper库，觉得多一个依赖没啥意义，所以我去掉了。
    </p>
    <pre><code class="prism language-javascript"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span> useCallback<span class="token punctuation">,</span> useEffect<span class="token punctuation">,</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> Card <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./Card.js'</span>  <span class="token comment">// 自定义卡片组件</span>

<span class="token comment">// 容器样式</span>
<span class="token keyword">const</span> style <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">400</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">Container</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">// 卡片初始状态</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>cards<span class="token punctuation">,</span> setCards<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'策略类型'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'策略场景'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'上周'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'近一月'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'今年以来'</span> <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">)</span>

  <span class="token comment">// 卡片副本状态（当前未实际使用）</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>cardCopy<span class="token punctuation">,</span> setCardCopy<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span>cards<span class="token punctuation">)</span>

  <span class="token comment">// 同步主状态到副本状态</span>
  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>cards<span class="token punctuation">,</span> <span class="token string">"cardCopy"</span><span class="token punctuation">)</span>
    <span class="token function">setCardCopy</span><span class="token punctuation">(</span>cards<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>cards<span class="token punctuation">]</span><span class="token punctuation">)</span>


  <span class="token comment">/**
     * 卡片移动逻辑
     * @param dragIndex 拖拽卡片的原始位置
     * @param hoverIndex 拖拽目标位置
  */</span>
  <span class="token keyword">const</span> moveCard <span class="token operator">=</span> <span class="token function">useCallback</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">dragIndex<span class="token punctuation">,</span> hoverIndex</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">setCards</span><span class="token punctuation">(</span><span class="token parameter">prevCards</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">// 创建新数组副本</span>
      <span class="token keyword">const</span> newCards <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>prevCards<span class="token punctuation">]</span>
      <span class="token comment">// 提取被拖拽元素</span>
      <span class="token keyword">const</span> draggedCard <span class="token operator">=</span> newCards<span class="token punctuation">[</span>dragIndex<span class="token punctuation">]</span>
      <span class="token comment">// 删除原位置元素</span>
      newCards<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>dragIndex<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
      <span class="token comment">// 插入到新位置</span>
      newCards<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>hoverIndex<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> draggedCard<span class="token punctuation">)</span>
      <span class="token keyword">return</span> newCards
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

  <span class="token comment">/**
   * 关闭卡片逻辑（当前实现存在问题）
   * @param id 卡片ID
   * @param index 卡片索引
   */</span>
  <span class="token keyword">const</span> closeCard <span class="token operator">=</span> <span class="token function">useCallback</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">setCards</span><span class="token punctuation">(</span><span class="token parameter">prevCards</span> <span class="token operator">=&gt;</span>
      <span class="token comment">// 使用 filter 创建新数组，排除目标卡片</span>
      prevCards<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">card</span> <span class="token operator">=&gt;</span> card<span class="token punctuation">.</span>id <span class="token operator">!==</span> id<span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

  <span class="token comment">// 渲染单个卡片</span>
  <span class="token keyword">const</span> renderCard <span class="token operator">=</span> <span class="token function">useCallback</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">card<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>Card
        key<span class="token operator">=</span><span class="token punctuation">{<!-- --></span>card<span class="token punctuation">.</span>id<span class="token punctuation">}</span>
        index<span class="token operator">=</span><span class="token punctuation">{<!-- --></span>index<span class="token punctuation">}</span>
        id<span class="token operator">=</span><span class="token punctuation">{<!-- --></span>card<span class="token punctuation">.</span>id<span class="token punctuation">}</span>
        text<span class="token operator">=</span><span class="token punctuation">{<!-- --></span>card<span class="token punctuation">.</span>text<span class="token punctuation">}</span>
        moveCard<span class="token operator">=</span><span class="token punctuation">{<!-- --></span>moveCard<span class="token punctuation">}</span>
        closeCard<span class="token operator">=</span><span class="token punctuation">{<!-- --></span>closeCard<span class="token punctuation">}</span>
      <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
      <span class="token punctuation">{<!-- --></span><span class="token comment">/* 卡片容器 */</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token punctuation">{<!-- --></span>style<span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token punctuation">{<!-- --></span>cards<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">card<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">renderCard</span><span class="token punctuation">(</span>card<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Container
</code></pre>
    <h2>
     <a id="_650">
     </a>
     总结：
    </h2>
    <p>
     dnd-kit 有react版本也有 所有库都能用的版本：
     <br/>
     @dnd-kit/react 就是react版本
     <br/>
     @dnd-kit/core就是所有都能用的版本
     <br/>
     我这个需求简单，我直接用了react版本，使用很简单！
     <br/>
     <em>
      <strong>
       如果你需求复杂，我还是建议使用 dnd-kit的！！
      </strong>
     </em>
     <br/>
     相对来看 dnd-kit/react相对实现简单，具体用什么你自己来定夺。
     <br/>
     react-dnd也还可以，不过我还是倾向于 dnd-kit，别的作者也推荐使用这个。
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f34343035383732352f:61727469636c652f64657461696c732f313435373537323034" class_="artid" style="display:none">
 </p>
</div>


