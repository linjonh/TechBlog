---
layout: post
title: 2024-12-24-å¾®ä¿¡å°ç¨‹åº-----è‡ªå®šä¹‰ç»„ä»¶
date: 2024-12-24 14:35:30 +0800
categories: ['å¾®ä¿¡å°ç¨‹åº']
tags: ['å¾®ä¿¡å°ç¨‹åº', 'Notepad', 'å°ç¨‹åº']
image:
  path: https://api.vvhan.com/api/bing?rand=sj&artid=136302412
  alt: å¾®ä¿¡å°ç¨‹åº-----è‡ªå®šä¹‰ç»„ä»¶
artid: 136302412
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=136302412
featuredImagePreview: https://bing.ee123.net/img/rand?artid=136302412
---

# å¾®ä¿¡å°ç¨‹åº --- è‡ªå®šä¹‰ç»„ä»¶

### è‡ªå®šä¹‰ç»„ä»¶

#### 1. åˆ›å»º-æ³¨å†Œ-ä½¿ç”¨ç»„ä»¶

**ç»„ä»¶ä»‹ç»**

å°ç¨‹åºç›®å‰å·²ç»æ”¯æŒç»„ä»¶åŒ–å¼€å‘ï¼Œå¯ä»¥å°†é¡µé¢ä¸­çš„åŠŸèƒ½æ¨¡å—æŠ½å–æˆè‡ªå®šä¹‰ç»„ä»¶ï¼Œä»¥ä¾¿åœ¨ä¸åŒçš„é¡µé¢ä¸­é‡å¤ä½¿ç”¨ï¼›

ä¹Ÿå¯ä»¥å°†å¤æ‚çš„é¡µé¢æ‹†åˆ†æˆå¤šä¸ªä½è€¦åˆçš„æ¨¡å—ï¼Œæœ‰åŠ©äºä»£ç ç»´æŠ¤ã€‚

å¼€å‘ä¸­å¸¸è§çš„ç»„ä»¶æœ‰ä¸¤ç§:

1. å…¬å…±ç»„ä»¶ï¼šå°†é¡µé¢å†…çš„åŠŸèƒ½æ¨¡å—æŠ½è±¡æˆè‡ªå®šä¹‰ç»„ä»¶ï¼Œä»¥ä¾¿åœ¨ä¸åŒçš„é¡µé¢ä¸­é‡å¤ä½¿ç”¨
2. é¡µé¢ç»„ä»¶ï¼šå°†å¤æ‚çš„é¡µé¢æ‹†åˆ†æˆå¤šä¸ªä½è€¦åˆçš„æ¨¡å—ï¼Œæœ‰åŠ©äºä»£ç ç»´æŠ¤

å¦‚æœæ˜¯å…¬å…±ç»„ä»¶ï¼Œå»ºè®®å°†å…¶æ”¾åœ¨å°ç¨‹åºçš„ç›®å½•ä¸‹çš„
`components`
æ–‡ä»¶å¤¹ä¸­

å¦‚æœæ˜¯é¡µé¢ç»„ä»¶ï¼Œå»ºè®®å°†å…¶æ”¾åœ¨å°ç¨‹åºå¯¹åº”é¡µé¢ç›®å½•ä¸‹ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥æ”¾åˆ°é¡µé¢çš„
`components`
æ–‡ä»¶å¤¹ä¸­

åŒæ—¶å»ºè®®ï¼š
**ä¸€ä¸ªç»„ä»¶ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œæ–‡ä»¶å¤¹åç§°å’Œç»„ä»¶åç§°ä¿æŒä¸€è‡´**

> ğŸ“Œ
> **æ³¨æ„äº‹é¡¹**
> ï¼š
>
> 1. è‡ªå®šä¹‰ç»„ä»¶çš„éœ€è¦åœ¨
>    `json`
>    æ–‡ä»¶ä¸­éœ€è¦é…ç½®
>    `component`
>    å­—æ®µè®¾ä¸º
>    `true`
> 2. è‡ªå®šä¹‰ç»„ä»¶é€šè¿‡
>    `Component`
>    æ„é€ å™¨è¿›è¡Œæ„å»ºï¼Œåœ¨æ„é€ å™¨ä¸­å¯ä»¥æŒ‡å®šç»„ä»¶çš„å±æ€§ã€æ•°æ®ã€æ–¹æ³•ç­‰

**åˆ›å»ºè‡ªå®šä¹‰ç»„ä»¶ï¼š**

åˆ›å»ºç»„ä»¶çš„æ­¥éª¤å¾ˆç®€å•ï¼Œä»¥å…¬å…±ç»„ä»¶ä¸ºä¾‹ï¼Œåˆ›å»ºçš„æ­¥éª¤å¦‚ä¸‹ï¼š

1. åœ¨å°ç¨‹åºçš„ç›®å½•ä¸‹æ–°å»º
   `components`
   æ–‡ä»¶å¤¹
2. åœ¨
   `components`
   æ–‡ä»¶å¤¹ä¸Šï¼Œç‚¹å‡»å³é”®ï¼Œé€‰æ‹©
   `æ–°å»ºæ–‡ä»¶å¤¹`
   ï¼Œç„¶åè¾“å…¥æ–‡ä»¶å¤¹åç§°ï¼Œæˆ‘ä»¬å»ºè®®æ–‡ä»¶å¤¹çš„åç§°å’Œç»„ä»¶çš„åç§°ä¿æŒä¸€è‡´ï¼Œè¿™æ ·æ–¹ä¾¿åæœŸå¯¹ç»„ä»¶è¿›è¡Œç»´æŠ¤ã€‚æˆ‘ä»¬è¿™é‡Œæ–°çš„çš„ç»„ä»¶åç§°å«åšï¼š
   `custom-checkbox`
3. åœ¨æ–°å»ºçš„ç»„ä»¶æ–‡ä»¶å¤¹ä¸Šï¼Œç‚¹å‡»å³é”®ï¼Œé€‰æ‹©
   `æ–°å»º Component`
   ï¼Œç„¶åè¾“å…¥ç»„ä»¶çš„åç§°ï¼Œç»„ä»¶çš„åç§°å»ºè®®å’Œæ–‡ä»¶å¤¹ä¿æŒä¸€è‡´
4. æ­¤æ—¶å°±å·²ç»åˆ›å»ºäº†ä¸€ä¸ªåŠŸèƒ½ç»„ä»¶

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/ae713dbcdc7f3253a92d42dfbbdfdb1f.png)
  
**ä½¿ç”¨è‡ªå®šä¹‰ç»„ä»¶**

å¼€å‘ä¸­å¸¸è§çš„ç»„ä»¶ä¸»è¦åˆ†ä¸º å…¬å…±ç»„ä»¶ å’Œ é¡µé¢ç»„ä»¶ ä¸¤ç§ï¼Œå› æ­¤æ³¨å†Œç»„ä»¶çš„æ–¹å¼ä¹Ÿåˆ†ä¸ºä¸¤ç§ï¼š

1. å…¨å±€æ³¨å†Œï¼šåœ¨
   `app.json`
   æ–‡ä»¶ä¸­é…ç½®
   `usingComponents`
   èŠ‚ç‚¹è¿›è¡Œå¼•ç”¨å£°æ˜ï¼Œæ³¨å†Œåå¯åœ¨ä»»æ„ç»„ä»¶ä½¿ç”¨
2. å±€éƒ¨æ³¨å†Œï¼šåœ¨é¡µé¢çš„
   `json`
   æ–‡ä»¶ä¸­é…ç½®
   `usingComponents`
   èŠ‚ç‚¹è¿›è¡Œå¼•ç”¨å£°æ˜ï¼Œåªå¯åœ¨å½“å‰é¡µé¢ä½¿ç”¨

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/1cb167196c3eee9b633835adbb33b701.png)

åœ¨é…ç½®
`usingComponents`
èŠ‚ç‚¹è¿›è¡Œå¼•ç”¨å£°æ˜æ—¶ï¼Œéœ€è¦æä¾›è‡ªå®šä¹‰ç»„ä»¶çš„æ ‡ç­¾åå’Œå¯¹åº”çš„è‡ªå®šä¹‰ç»„ä»¶æ–‡ä»¶è·¯å¾„ï¼Œè¯­æ³•å¦‚ä¸‹ï¼š

```json
{
  "usingComponents": {
    "è‡ªå®šä¹‰ç»„ä»¶çš„æ ‡ç­¾å": "è‡ªå®šä¹‰ç»„ä»¶æ–‡ä»¶è·¯å¾„"
  }
}

```

è¿™æ ·ï¼Œåœ¨é¡µé¢çš„
`wxml`
ä¸­å°±å¯ä»¥åƒä½¿ç”¨åŸºç¡€ç»„ä»¶ä¸€æ ·ä½¿ç”¨è‡ªå®šä¹‰ç»„ä»¶ã€‚èŠ‚ç‚¹åå³è‡ªå®šä¹‰ç»„ä»¶çš„æ ‡ç­¾åï¼ŒèŠ‚ç‚¹å±æ€§å³ä¼ é€’ç»™ç»„ä»¶çš„å±æ€§å€¼ã€‚

```json
{
  "usingComponents": {
    "custom-checkbox": "/components/custom-checkbox/custom-checkbox"
  }
}

```

```html
<!--pages/index/index.wxml-->

<view>
  <!-- å°†å¯¼å…¥çš„è‡ªå®šä¹‰ç»„ä»¶å½“æˆæ ‡ç­¾ä½¿ç”¨ -->
  <custom-checkbox
                   />
</view>


```

#### 2. è‡ªå®šä¹‰ç»„ä»¶-æ•°æ®å’Œæ–¹æ³•

åœ¨ç»„ä»¶çš„ .js ä¸­ï¼Œéœ€è¦è°ƒç”¨
`Component`
æ–¹æ³•åˆ›å»ºè‡ªå®šä¹‰ç»„ä»¶ï¼Œ
`Component`
ä¸­æœ‰ä»¥ä¸‹ä¸¤ä¸ªå±æ€§ï¼š

`data`
æ•°æ®ï¼šç»„ä»¶çš„å†…éƒ¨æ•°æ®

`methods`
æ–¹æ³•ï¼šåœ¨ç»„ä»¶ä¸­äº‹ä»¶å¤„ç†ç¨‹åºéœ€è¦å†™åˆ°
`methods`
ä¸­æ‰å¯ä»¥

**è½åœ°ä»£ç ï¼š**

`â¡ï¸ components/custom-checkbox/custom-checkbox.wxml`

```html
<!--components/custom-checkbox/custom-checkbox.wxml-->
<!-- <text>æˆ‘æ˜¯è‡ªå®šä¹‰ç»„ä»¶</text> -->

<view class="custom-checkbox-container">
  <view class="custom-checkbox-box">
    <checkbox checked="{{ isChecked }}" bindtap="updateChecked" />
  </view>
</view>

```

`â¡ï¸ components/custom-checkbox/custom-checkbox.wxss`

```css
/* components/custom-checkbox/custom-checkbox.wxss */

.custom-checkbox-container {
  display: inline-block;
}

```

`â¡ï¸ components/custom-checkbox/custom-checkbox.js`

```js
Component({

  /**
   * ç»„ä»¶çš„åˆå§‹æ•°æ®ï¼šç”¨æ¥å®šä¹‰å½“å‰ç»„ä»¶å†…éƒ¨æ‰€éœ€è¦ä½¿ç”¨çš„æ•°æ®
   */
  data: {
    isChecked: false
  },

  /**
   * ç»„ä»¶çš„æ–¹æ³•åˆ—è¡¨ï¼šåœ¨ç»„ä»¶ä¸­ï¼Œæ‰€æœ‰çš„äº‹ä»¶å¤„ç†ç¨‹åºéƒ½éœ€è¦å†™åˆ° methods æ–¹æ³•ä¸­
   */
  methods: {
    
    // æ›´æ–°å¤é€‰æ¡†çš„çŠ¶æ€
    updateChecked () {

      this.setData({
        isChecked: !this.data.isChecked
      })

      console.log(this.data.isChecked)
    }

  }
  
})

```

`â¡ï¸ app.json`

```json
{
  "usingComponents": {
    "custom-checkbox": "./components/custom-checkbox/custom-checkbox"
  }
}

```

`â¡ï¸ index.wxml`

```html
<custom-checkbox />

<view class="line"></view>

<custom-checkbox />


```

#### 3. è‡ªå®šä¹‰ç»„ä»¶-å±æ€§

å±æ€§ Properties æ˜¯æŒ‡ç»„ä»¶çš„å¯¹å¤–å±æ€§ï¼Œä¸»è¦ç”¨æ¥æ¥æ”¶ç»„ä»¶ä½¿ç”¨è€…ä¼ é€’ç»™ç»„ä»¶å†…éƒ¨çš„æ•°æ®ï¼Œå’Œ data ä¸€åŒç”¨äºç»„ä»¶çš„æ¨¡æ¿æ¸²æŸ“

> ğŸ“Œ æ³¨æ„äº‹é¡¹ï¼š
>
> 1. è®¾ç½®å±æ€§ç±»å‹éœ€è¦ä½¿ç”¨ type å±æ€§ï¼Œå±æ€§ç±»å‹æ˜¯å¿…å¡«é¡¹ï¼Œvalue å±æ€§ä¸ºé»˜è®¤å€¼
> 2. å±æ€§ç±»å‹å¯ä»¥ä¸º Stringã€Numberã€Booleanã€Objectã€Array ï¼Œä¹Ÿå¯ä»¥ä¸º null è¡¨ç¤ºä¸é™åˆ¶ç±»å‹

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/a29f87811a2720eab196fcb725b29cd2.png)

**è½åœ°ä»£ç ï¼š**

`â¡ï¸ index.wxml`

```html
<!-- label æ–‡æœ¬æ˜¾ç¤ºçš„å†…å®¹ -->
<!-- position æ§åˆ¶æ–‡æœ¬æ˜¾ç¤ºçš„ä½ç½® -->

<custom-checkbox label="æˆ‘å·²é˜…è¯»å¹¶åŒæ„ ç”¨æˆ·åè®® å’Œ éšç§åè®®" position="right" />

<view class="line"></view>

<custom-checkbox label="åŒ¿åæäº¤" position="left" />


```

`â¡ï¸ components/custom-checkbox/custom-checkbox.wxml`

```html
<!--components/custom-checkbox/custom-checkbox.wxml-->
<!-- <text>æˆ‘æ˜¯è‡ªå®šä¹‰ç»„ä»¶</text> -->

<view class="custom-checkbox-container">
+   <view class="custom-checkbox-box {{ position === 'right' ? 'right' : 'left' }}">
+     <checkbox class="custom-checkbox" checked="{{ isChecked }}" bindtap="updateChecked" />
+ 
+     <view>
+       <text>{{ label }}</text>
+     </view>
  </view>
</view>


```

`â¡ï¸ components/custom-checkbox/custom-checkbox.wxss`

```css
/* components/custom-checkbox/custom-checkbox.wxss */

.custom-checkbox-container {
  display: inline-block;
}

.custom-checkbox-box {
  display: flex;
  align-items: center;
}

.custom-checkbox-box.left {
  flex-direction: row-reverse;
}

.custom-checkbox-box.right {
  flex-direction: row;
}

.custom-checkbox {
  margin-left: 10rpx;
}


```

`â¡ï¸ components/custom-checkbox/custom-checkbox.js`

```js
Component({

+   /**
+    * ç»„ä»¶çš„å±æ€§åˆ—è¡¨ï¼šç»„ä»¶çš„å¯¹å¤–å±æ€§ï¼Œä¸»è¦ç”¨æ¥æ¥æ”¶ç»„ä»¶ä½¿ç”¨è€…ä¼ é€’ç»™ç»„ä»¶å†…éƒ¨çš„å±æ€§ä»¥åŠæ•°æ®
+    */
+   properties: {
+     // å¦‚æœéœ€è¦æ¥æ”¶ä¼ é€’çš„å±æ€§ï¼Œæœ‰ä¸¤ç§æ–¹å¼ï¼šå…¨å†™ã€ç®€å†™
+     // label: String
+ 
+     label: {
+       // type ç»„ä»¶ä½¿ç”¨è€…ä¼ é€’çš„æ•°æ®ç±»å‹
+       // æ•°æ®ç±»å‹ï¼šStringã€Numberã€Booleanã€Objectã€Array
+       // ä¹Ÿå¯ä»¥è®¾ç½®ä¸º nullï¼Œè¡¨ç¤ºä¸é™åˆ¶ç±»å‹
+       type: String,
+       value: ''
+     },
+ 
+     // æ–‡å­—æ˜¾ç¤ºä½ç½®
+     position: {
+       type: String,
+       value: 'right'
+     }
+   },

  /**
   * ç»„ä»¶çš„åˆå§‹æ•°æ®ï¼šç”¨æ¥å®šä¹‰å½“å‰ç»„ä»¶å†…éƒ¨æ‰€éœ€è¦ä½¿ç”¨çš„æ•°æ®
   */
  data: {
    isChecked: false
  },

  /**
   * ç»„ä»¶çš„æ–¹æ³•åˆ—è¡¨ï¼šåœ¨ç»„ä»¶ä¸­ï¼Œæ‰€æœ‰çš„äº‹ä»¶å¤„ç†ç¨‹åºéƒ½éœ€è¦å†™åˆ° methods æ–¹æ³•ä¸­
   */
  methods: {
    
    // æ›´æ–°å¤é€‰æ¡†çš„çŠ¶æ€
    updateChecked () {

      this.setData({
        isChecked: !this.data.isChecked,
+        // label: 'åœ¨ç»„ä»¶å†…éƒ¨ä¹Ÿå¯ä»¥ä¿®æ”¹ properties ä¸­çš„æ•°æ®'
      })

+       // åœ¨ JS ä¸­å¯ä»¥è®¿é—®å’Œè·å– properties ä¸­çš„æ•°æ®
+       // ä½†æ˜¯ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä¸å»ºè®®ä¿®æ”¹ï¼Œå› ä¸ºä¼šé€ æˆæ•°æ®æµçš„æ··ä¹±
+       // console.log(this.properties.label)
      // console.log(this.data.isChecked)
    }

  }
  
})

```

#### 4. ç»„ä»¶ wxml çš„ slot

åœ¨ä½¿ç”¨åŸºç¡€ç»„ä»¶æ—¶ï¼Œå¯ä»¥ç»™ç»„ä»¶ä¼ é€’å­èŠ‚ç‚¹ä¼ é€’å†…å®¹ï¼Œä»è€Œå°†å†…å®¹å±•ç¤ºåˆ°é¡µé¢ä¸­ï¼Œè‡ªå®šä¹‰ç»„ä»¶ä¹Ÿå¯ä»¥æ¥æ”¶å­èŠ‚ç‚¹å†…å®¹

åªä¸è¿‡åœ¨ç»„ä»¶æ¨¡æ¿ä¸­éœ€è¦å®šä¹‰
`<slot />`
èŠ‚ç‚¹ï¼Œç”¨äºæ‰¿è½½ç»„ä»¶å¼•ç”¨æ—¶æä¾›çš„å­èŠ‚ç‚¹

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/995d532c55b5de811141ff286240e1e9.png)

é»˜è®¤æƒ…å†µä¸‹ï¼Œä¸€ä¸ªç»„ä»¶çš„ wxml ä¸­åªèƒ½æœ‰ä¸€ä¸ª slot ã€‚éœ€è¦ä½¿ç”¨å¤š slot æ—¶ï¼Œå¯ä»¥åœ¨ç»„ä»¶ js ä¸­å£°æ˜å¯ç”¨ã€‚

åŒæ—¶éœ€è¦ç»™ slot æ·»åŠ  name æ¥åŒºåˆ†ä¸åŒçš„ slotï¼Œç»™å­èŠ‚ç‚¹å†…å®¹æ·»åŠ  slot å±æ€§æ¥å°†èŠ‚ç‚¹æ’å…¥åˆ° å¯¹åº”çš„ slot ä¸­

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/25963f34f1a8cee32bab952d510ea278.png)

**çŸ¥è¯†ç‚¹è®²è§£ï¼š**

`â¡ï¸ custom01.html`

```html
<view>
  <slot name="slot-top" />
  <!-- slot å°±æ˜¯ç”¨æ¥æ¥æ”¶ã€æ‰¿è½½å­èŠ‚ç‚¹å†…å®¹ -->
  <!-- slot åªæ˜¯ä¸€ä¸ªå ä½ç¬¦ï¼Œå­èŠ‚ç‚¹å†…å®¹ä¼šå°† slot è¿›è¡Œæ›¿æ¢ -->
  <!-- é»˜è®¤æ’æ§½ -->
  <view><slot /></view>

  <slot name="slot-bottom" />
</view>

```

`â¡ï¸ custom01.js`

```js
// components/custom01/custom01.js

Component({

  options: {
    // å¯ç”¨å¤š slot æ”¯æŒ
    multipleSlots: true
  }

})

```

`â¡ï¸ cart.wxml`

```html
<custom01>
  <text slot="slot-top">æˆ‘éœ€è¦æ˜¾ç¤ºåˆ°é¡¶éƒ¨</text>
    
  <!-- é»˜è®¤æƒ…å†µä¸‹ï¼Œè‡ªå®šä¹‰ç»„ä»¶çš„å­èŠ‚ç‚¹å†…å®¹ä¸ä¼šè¿›è¡Œå±•ç¤º -->
  <!-- å¦‚æœæƒ³å†…å®¹è¿›è¡Œå±•ç¤ºï¼Œéœ€è¦å†ç»„ä»¶æ¨¡æ¿ä¸­å®šä¹‰ slot èŠ‚ç‚¹ -->
  æˆ‘æ˜¯å­èŠ‚ç‚¹å†…å®¹
    
  <text slot="slot-bottom">æˆ‘éœ€è¦æ˜¾ç¤ºåˆ°ä½éƒ¨</text>
</custom01>


```

**å®Œå–„å¤é€‰æ¡†æ¡ˆä¾‹**

`â¡ï¸ custom-checkbox.html`

```html
<!--components/custom-checkbox/custom-checkbox.wxml-->
<!-- <text>æˆ‘æ˜¯è‡ªå®šä¹‰ç»„ä»¶</text> -->

<view class="custom-checkbox-container">
  <view class="custom-checkbox-box {{ position === 'right' ? 'right' : 'left' }}">
    <checkbox class="custom-checkbox" checked="{{ isChecked }}" bindtap="updateChecked" />

+     <view>
+       <!-- lable å’Œ å­èŠ‚ç‚¹å†…å®¹éƒ½è¿›è¡Œäº†å±•ç¤º -->
+       <!-- è¦ä¹ˆå±•ç¤º lable è¦ä¹ˆå±•ç¤º å­èŠ‚ç‚¹å†…å®¹ -->
+       <!-- å¦‚æœç”¨æˆ·ä¼ é€’äº† lable å±æ€§ï¼Œå°±å±•ç¤º lable -->
+       <!-- å¦‚æœç”¨æˆ·æ²¡æœ‰ä¼ é€’ lable å±æ€§ï¼Œå°±å±•ç¤º å­èŠ‚ç‚¹å†…å®¹ -->
+       <text wx:if="{{ label !== '' }}">{{ label }}</text>
+ 
+       <slot wx:else />
+     </view>
  </view>
</view>


```

`â¡ï¸ index.html`

```html
<!-- label æ–‡æœ¬æ˜¾ç¤ºçš„å†…å®¹ -->
<!-- position æ§åˆ¶æ–‡æœ¬æ˜¾ç¤ºçš„ä½ç½® -->
<custom-checkbox label="æˆ‘å·²é˜…è¯»å¹¶åŒæ„ ç”¨æˆ·åè®® å’Œ éšç§åè®®" position="right">
  æˆ‘å·²é˜…è¯»å¹¶åŒæ„ ç”¨æˆ·åè®® å’Œ éšç§åè®® - 111
</custom-checkbox>

<view class="line"></view>

<custom-checkbox label="åŒ¿åæäº¤" position="left">
  åŒ¿åæäº¤ - 222
</custom-checkbox>


```

#### 5. ç»„ä»¶æ ·å¼ä»¥åŠæ³¨æ„äº‹é¡¹

**é€‰æ‹©å™¨ä½¿ç”¨æ³¨æ„äº‹é¡¹ï¼š**

ç±»ä¼¼äºé¡µé¢ï¼Œè‡ªå®šä¹‰ç»„ä»¶æ‹¥æœ‰è‡ªå·±çš„
`wxss`
æ ·å¼ï¼Œç»„ä»¶å¯¹åº”
`wxss`
æ–‡ä»¶çš„æ ·å¼ï¼Œåªå¯¹ç»„ä»¶wxmlå†…çš„èŠ‚ç‚¹ç”Ÿæ•ˆã€‚

ç¼–å†™ç»„ä»¶æ ·å¼æ—¶ï¼Œéœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š

1. app.wxss æˆ–é¡µé¢çš„ wxss ä¸­ä½¿ç”¨äº†æ ‡ç­¾åï¼ˆviewï¼‰é€‰æ‹©å™¨ï¼ˆæˆ–ä¸€äº›å…¶ä»–ç‰¹æ®Šé€‰æ‹©å™¨ï¼‰æ¥ç›´æ¥æŒ‡å®šæ ·å¼
     
   è¿™äº›é€‰æ‹©å™¨ä¼šå½±å“åˆ°é¡µé¢å’Œå…¨éƒ¨ç»„ä»¶ï¼Œé€šå¸¸æƒ…å†µä¸‹è¿™æ˜¯ä¸æ¨èçš„åšæ³•
2. ç»„ä»¶å’Œå¼•ç”¨ç»„ä»¶çš„é¡µé¢ä¸èƒ½ä½¿ç”¨ id é€‰æ‹©å™¨(#a)ã€å±æ€§é€‰æ‹©å™¨([a]) å’Œ æ ‡ç­¾åé€‰æ‹©å™¨ï¼Œè¯·æ”¹ç”¨ class é€‰æ‹©å™¨
3. ç»„ä»¶å’Œå¼•ç”¨ç»„ä»¶çš„é¡µé¢ä¸­ä½¿ç”¨åä»£é€‰æ‹©å™¨ï¼ˆ.a .bï¼‰åœ¨ä¸€äº›æç«¯æƒ…å†µä¸‹ä¼šæœ‰éé¢„æœŸçš„è¡¨ç°ï¼Œå¦‚é‡ï¼Œè¯·é¿å…ä½¿ç”¨
4. å­å…ƒç´ é€‰æ‹©å™¨ï¼ˆ.a>.bï¼‰åªèƒ½ç”¨äº view ç»„ä»¶ä¸å…¶å­èŠ‚ç‚¹ä¹‹é—´ï¼Œç”¨äºå…¶ä»–ç»„ä»¶å¯èƒ½å¯¼è‡´éé¢„æœŸçš„æƒ…å†µã€‚
5. ç»§æ‰¿æ ·å¼ï¼Œå¦‚ font ã€ color ï¼Œä¼šä»ç»„ä»¶å¤–ç»§æ‰¿åˆ°ç»„ä»¶å†…ã€‚
6. é™¤ç»§æ‰¿æ ·å¼å¤–ï¼Œ å…¨å±€ä¸­çš„æ ·å¼ã€ç»„ä»¶æ‰€åœ¨é¡µé¢çš„çš„æ ·å¼å¯¹è‡ªå®šä¹‰ç»„ä»¶æ— æ•ˆ (é™¤éæ›´æ”¹ç»„ä»¶æ ·å¼éš”ç¦»é€‰é¡¹)

```css
#a { } /* åœ¨ç»„ä»¶ä¸­ä¸èƒ½ä½¿ç”¨ */
[a] { } /* åœ¨ç»„ä»¶ä¸­ä¸èƒ½ä½¿ç”¨ */
button { } /* åœ¨ç»„ä»¶ä¸­ä¸èƒ½ä½¿ç”¨ */
.a > .b { } /* é™¤é .a æ˜¯ view ç»„ä»¶èŠ‚ç‚¹ï¼Œå¦åˆ™ä¸ä¸€å®šä¼šç”Ÿæ•ˆ */

```

**è½åœ°ä»£ç ï¼š**

`â¡ï¸ custom02.wxml`

```html
<text id="content" class="content son">
  <text class="label">ç»™è‡ªå®šä¹‰ç»„ä»¶è®¾ç½®æ ·å¼</text>
</text>

```

`â¡ï¸ custom02.wxss`

```scss
/* components/custom02/custom02.wxss */

/* ç¬¬ä¸€ä¸ªæ³¨æ„äº‹é¡¹ï¼šåœ¨è‡ªå®šä¹‰çš„ wxss æ–‡ä»¶ä¸­ï¼Œä¸å…è®¸ä½¿ç”¨æ ‡ç­¾é€‰æ‹©å™¨ï¼ŒID é€‰æ‹©å™¨ï¼Œå±æ€§é€‰æ‹©å™¨ */
/* è¯·æ”¹ä¸º class é€‰æ‹©å™¨ */
/* text {
  color: lightseagreen;
} */

/* #content {
  color: lightseagreen;
} */

/* [id=content] {
  color: lightseagreen;
} */

/* .content {
  color: lightseagreen;
} */

/* ç¬¬äºŒä¸ªæ³¨æ„äº‹é¡¹ï¼šå­é€‰æ‹©å™¨ï¼Œåªèƒ½ç”¨äº view å’Œ å­ç»„ä»¶ï¼Œç”¨äºå…¶ä»–ç»„ä»¶å¯èƒ½ä¼šå‡ºç°æ ·å¼å¤±æ•ˆçš„é—®é¢˜ */
/* .content > .label {
  color: lightseagreen;
} */

/* ç¬¬ä¸‰ä¸ªæ³¨æ„äº‹é¡¹ï¼šç»§æ‰¿æ ·å¼ï¼Œä¾‹å¦‚ï¼šcolor\font éƒ½ä¼šä»ç»„ä»¶å¤–ç»§æ‰¿ */

/* ç¬¬å››ä¸ªæ³¨æ„äº‹é¡¹ï¼šå…¨å±€æ ·å¼ã€ç»„ä»¶æ‰€åœ¨é¡µé¢çš„æ ·å¼æ–‡ä»¶ä¸­çš„æ ·å¼éƒ½å¯¹è‡ªå®šä¹‰ç»„ä»¶æ— æ•ˆ */

/* ç¬¬äº”ä¸ªæ³¨æ„äº‹é¡¹ï¼šå®˜æ–¹ä¸æ¨èåšæ³• */
/* ä¸å»ºè®®åœ¨ å…¨å±€æ ·å¼æ–‡ä»¶ ä»¥åŠ çˆ¶çº§é¡µé¢ä¹‹é—´ä½¿ç”¨æ ‡ç­¾é€‰æ‹©å™¨è®¾ç½®æ ·å¼ */
/* å¦‚æœæ˜¯åœ¨å…¨å±€æ ·å¼æ–‡ä»¶ä¸­è®¾ç½®æ ·å¼ï¼Œä¼šå½±å“é¡¹ç›®ä¸­å…¨éƒ¨çš„ç›¸åŒç»„ä»¶ */
/* å¦‚æœæ˜¯å†é¡µé¢æ ·å¼æ–‡ä»¶ä¸­è®¾ç½®æ ·å¼ï¼Œä¼šå½±å“å½“å‰é¡µé¢æ‰€æœ‰çš„ç›¸åŒç»„ä»¶ */

/* ç¬¬å…­ä¸ªæ³¨æ„äº‹é¡¹ï¼š */
/* ç»„ä»¶å’Œç»„ä»¶ä½¿ç”¨è€…ï¼Œå¦‚æœä½¿ç”¨äº†åä»£é€‰æ‹©å™¨ï¼Œå¯èƒ½ä¼šå‡ºç°ä¸€äº›éé¢„æœŸæƒ…å†µ */
/* å¦‚æœå‡ºç°ï¼Œè¯·é¿å… */


```

`â¡ï¸ cate.wxml`

```html
<view class="custom parent">
  <view>
    <custom02 />

    <view class="son test">æˆ‘æ˜¯çˆ¶çº§é¡µé¢ä¸­çš„ç»“æ„</view>
  </view>
</view>

```

`â¡ï¸ cate.wxss`

```scss
/* pages/cate/cate.wxss */

/* .custom  {
  color: lightseagreen;
  font-size: 50rpx;
} */

/* .label {
  color: lightseagreen;
} */

/* text {
  color: lightseagreen;
} */

.parent .son.test {
  color: lightsalmon;
}

```

`â¡ï¸ app.wxss`

```scss
/* .label {
  color: lightseagreen;
} */

/* text {
  color: lightseagreen;
} */


```

#### 6. ç»„ä»¶æ ·å¼éš”ç¦»

é»˜è®¤æƒ…å†µä¸‹ï¼Œè‡ªå®šä¹‰ç»„ä»¶çš„æ ·å¼åªå—åˆ°è‡ªå®šä¹‰ç»„ä»¶ wxss çš„å½±å“ã€‚é™¤éä»¥ä¸‹ä¸¤ç§æƒ…å†µï¼š

1. `app.wxss`
   æˆ–é¡µé¢çš„
   `wxss`
   ä¸­ä½¿ç”¨äº†æ ‡ç­¾åï¼ˆviewï¼‰é€‰æ‹©å™¨ï¼ˆæˆ–ä¸€äº›å…¶ä»–ç‰¹æ®Šé€‰æ‹©å™¨ï¼‰æ¥ç›´æ¥æŒ‡å®šæ ·å¼ï¼Œè¿™äº›é€‰æ‹©å™¨ä¼šå½±å“åˆ°é¡µé¢å’Œå…¨éƒ¨ç»„ä»¶ã€‚é€šå¸¸æƒ…å†µä¸‹è¿™æ˜¯ä¸æ¨èçš„åšæ³•ã€‚
2. æŒ‡å®šç‰¹æ®Šçš„æ ·å¼éš”ç¦»é€‰é¡¹
   `styleIsolation`

   ```js
   Component({
     options: {
       styleIsolation: 'isolated'
     }
   })

   ```

`styleIsolation`
é€‰é¡¹å®ƒæ”¯æŒä»¥ä¸‹å–å€¼ï¼š

* `isolated`
  è¡¨ç¤ºå¯ç”¨æ ·å¼éš”ç¦»ï¼Œåœ¨è‡ªå®šä¹‰ç»„ä»¶å†…å¤–ï¼Œä½¿ç”¨ class æŒ‡å®šçš„æ ·å¼å°†ä¸ä¼šç›¸äº’å½±å“ï¼ˆä¸€èˆ¬æƒ…å†µä¸‹çš„é»˜è®¤å€¼ï¼‰ï¼›
* `apply-shared`
  è¡¨ç¤ºé¡µé¢ wxss æ ·å¼å°†å½±å“åˆ°è‡ªå®šä¹‰ç»„ä»¶ï¼Œä½†è‡ªå®šä¹‰ç»„ä»¶ wxss ä¸­æŒ‡å®šçš„æ ·å¼ä¸ä¼šå½±å“é¡µé¢ï¼›
* `shared`
  è¡¨ç¤ºé¡µé¢ wxss æ ·å¼å°†å½±å“åˆ°è‡ªå®šä¹‰ç»„ä»¶ï¼Œè‡ªå®šä¹‰ç»„ä»¶ wxss ä¸­æŒ‡å®šçš„æ ·å¼ä¹Ÿä¼šå½±å“é¡µé¢å’Œå…¶ä»–è®¾ç½®äº†
  `apply-shared`
  æˆ–
  `shared`
  çš„è‡ªå®šä¹‰ç»„ä»¶ã€‚

**è½åœ°ä»£ç ï¼š**

`â¡ï¸ custom03.wxml`

```html
<!--components/custom03/custom03.wxml-->

<text class="label">æ¼”ç¤ºç»„ä»¶æ ·å¼éš”ç¦»</text>

```

`â¡ï¸ custom03.wxss`

```scss
/* components/custom03/custom03.wxss */

.test {
  color: lightseagreen;
  font-size: 50rpx;
}

```

`â¡ï¸ custom03.js`

```js
// components/custom03/custom03.js
Component({

  options: {

    // styleIsolationï¼šé…ç½®ç»„ä»¶æ ·å¼éš”ç¦»

    // isolatedï¼šå¼€å¯æ ·å¼éš”ç¦»ï¼Œé»˜è®¤å€¼
    // åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œè‡ªå®šä¹‰ç»„ä»¶å’Œç»„ä»¶ä½¿ç”¨è€…å¦‚æœå­˜åœ¨ç›¸åŒçš„ç±»åï¼Œç±»åä¸ä¼šç›¸äº’å½±å“

    // apply-sharedï¼šè¡¨ç¤ºç»„ä»¶ä½¿ç”¨è€…ã€é¡µé¢çš„ wxss æ ·å¼èƒ½å¤Ÿå½±å“åˆ°è‡ªå®šä¹‰ç»„ä»¶
    // ä½†æ˜¯è‡ªå®šä¹‰ç»„ä»¶çš„æ ·å¼ä¸ä¼šå½±å“ç»„ä»¶ä½¿ç”¨è€…ã€é¡µé¢çš„ wxss æ ·å¼
    // styleIsolation: "apply-shared"

    // sharedï¼šè¡¨ç¤ºç»„ä»¶ä½¿ç”¨è€…ã€é¡µé¢çš„ wxss æ ·å¼èƒ½å¤Ÿå½±å“åˆ°è‡ªå®šä¹‰ç»„ä»¶
    // è‡ªå®šä¹‰ç»„ä»¶çš„æ ·å¼ä¼šå½±å“ç»„ä»¶ä½¿ç”¨è€…ã€é¡µé¢çš„ wxss æ ·å¼
    // å’Œå…¶ä»–ä½¿ç”¨äº† apply-share ä»¥åŠ share å±æ€§çš„è‡ªå®šä¹‰ç»„ä»¶
    styleIsolation: 'shared'

  }
    
})

```

`â¡ï¸ cate.wxml`

```html
<custom03 />

```

`â¡ï¸ cate.wxss`

```scss
.label {
  color: lightsalmon;
}

```

#### 7. æ‹“å±•-å°ç¨‹åºä¿®æ”¹checkboxæ ·å¼

**çŸ¥è¯†ç‚¹ï¼š**

æŠ€å·§ï¼šåœ¨å®˜æ–¹æ–‡æ¡£ï¼Œæ‰¾åˆ°å®˜æ–¹æä¾›çš„æ¡ˆä¾‹ï¼Œå®¡æŸ¥å…ƒç´ ï¼Œå°±èƒ½çœ‹åˆ°å¯¹åº”çš„ç±»å

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/1aaca4efe8afecf77d609fa72ed006e9.png)

> ğŸ“Œ
> **æ³¨æ„äº‹é¡¹**
>
> 1. .custom-checkbox .wx-checkbox-input {}ï¼šå¤é€‰æ¡†æ²¡æœ‰é€‰ä¸­æ—¶é»˜è®¤çš„æ ·å¼
> 2. .custom-checkbox .wx-checkbox-input-checked {}ï¼š å¤é€‰æ¡†é€‰ä¸­æ—¶é»˜è®¤çš„æ ·å¼
> 3. .custom-checkbox .wx-checkbox-input.wx-checkbox-input-checked:before {}ï¼šå¤é€‰æ¡†é€‰ä¸­æ—¶ âˆš æ ·å¼
>
> è¿™å‡ ä¸ªç±»åï¼Œåœ¨å…¨å±€æ ·å¼æ–‡ä»¶ã€é¡µé¢æ ·å¼æ–‡ä»¶éƒ½å¯ä»¥å¯¹ä¿®æ”¹å¤é€‰æ¡†æ ·å¼ï¼Œ
>
> **`ä½†æ˜¯åœ¨è‡ªå®šä¹‰ç»„ä»¶å†…éƒ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œéœ€è¦æ·»åŠ  styleIsolation: 'shared' å±æ€§`**

**è½åœ°ä»£ç ï¼š**

`â¡ï¸ components/custom-checkbox/custom-checkbox.wxss`

```scss
/* å¤é€‰æ¡†ç»„ä»¶æ˜¯å…¬å…±ç»„ä»¶ */
/* ä»¥åéœ€è¦å†å¤šä¸ªé¡µé¢æˆ–è€…éœ€è¦å†å¤šä¸ªé¡¹ç›®ä¸­è¿›è¡Œä½¿ç”¨ */
/* æ‰€ä»¥å‘¢ï¼Œéœ€è¦å…ˆç»™å¤é€‰æ¡†ç»„ä»¶å‡†å¤‡ã€è®¾ç½®ä¸€äº›é»˜è®¤æ ·å¼ */
/* å¦‚æœåœ¨å…¶ä»–é¡µé¢æˆ–è€…å…¶ä»–é¡¹ç›®ä¸­ä½¿ç”¨çš„æ—¶å€™ï¼Œå‘ç°æ ·å¼ä¸ç¬¦åˆäº§å“éœ€æ±‚ */
/* å¯ä»¥è¿›è¡Œä¿®æ”¹ã€å¯¹é»˜è®¤çš„æ ·å¼è¿›è¡Œä¿®æ”¹ */

/* 1. éœ€è¦ç»™å¤é€‰æ¡†è®¾ç½®é»˜è®¤æ ·å¼ */
/* éœ€è¦å…ˆæ‰¾åˆ°å°ç¨‹åºç»™å¤é€‰æ¡†æä¾›çš„ç±»åï¼Œé€šè¿‡å°ç¨‹åºç»™æä¾›çš„ç±»åä¿®æ”¹æ‰å¯ä»¥ */
/* éœ€è¦å…ˆæ‰“å¼€å°ç¨‹åºå¼€å‘æ–‡æ¡£ï¼Œæ‰¾åˆ°å¤é€‰æ¡†æ–‡æ¡£ï¼Œå®¡æŸ¥å…ƒç´ ï¼Œè¿›è¡ŒæŸ¥æ‰¾ */

/* åœ¨è‡ªå®šä¹‰ç»„ä»¶ä¸­ï¼Œä¸èƒ½ç›´æ¥ä¿®æ”¹å¤é€‰æ¡†æ ·å¼ */
/* å¦‚æœéœ€è¦è¿›è¡Œä¿®æ”¹ï¼Œéœ€è¦è®¾ç½® styleIsolation æ‰å¯ä»¥ */
/* sharedï¼šä¿®æ”¹å…¶ä»–é¡µé¢çš„æ ·å¼ã€ç»„ä»¶ä½¿ç”¨è€…çš„æ ·å¼ã€ä»¥åŠå…¶ä»–ä½¿ç”¨äº† share ä»¥åŠ apply-share çš„ç»„ä»¶ */
/* è¿™æ—¶å€™ï¼Œä¸æ˜¯æƒ³è¦çš„ç»“æœ */
/* éœ€æ±‚æ˜¯ï¼šåªæƒ³å½±å“å½“å‰ç»„ä»¶ï¼Œå¯ä»¥æ·»åŠ å‘½åç©ºé—´ */

/* å¤é€‰æ¡†æ²¡æœ‰é€‰ä¸­æ—¶é»˜è®¤çš„æ ·å¼ */
.custom-checkbox .wx-checkbox-input {
  width: 24rpx !important;
  height: 24rpx !important;
  border-radius: 50% !important;
  border: 1px solid #fda007 !important;
  margin-top: -6rpx;
}

/* å¤é€‰æ¡†é€‰ä¸­æ—¶é»˜è®¤çš„æ ·å¼ */
.custom-checkbox .wx-checkbox-input-checked {
  background-color: #fda007 !important;
}

/* å¤é€‰æ¡†é€‰ä¸­æ—¶ âˆš æ ·å¼ */
.custom-checkbox .wx-checkbox-input.wx-checkbox-input-checked:before {
  font-size: 22rpx;
  color: #fff;
}

/* 2. ç»„ä»¶ä½¿ç”¨è€…ä¹Ÿèƒ½å¤Ÿä¿®æ”¹é»˜è®¤çš„æ ·å¼ */


```

`â¡ï¸ components/custom-checkbox/custom-checkbox.js`

```js
Component({

  options: {
    styleIsolation: 'shared'
  }
  
})

```

`â¡ï¸ index.wxss`

```scss
/* ç»„ä»¶ä½¿ç”¨è€…ä¿®æ”¹å¤é€‰æ¡†çš„æ ·å¼ */
.custom .custom-checkbox .wx-checkbox-input {
  border: 1px solid lightseagreen !important;
}

.custom .custom-checkbox .wx-checkbox-input-checked {
  background-color: lightseagreen !important;
}


```

#### 8. æ•°æ®ç›‘å¬å™¨

**çŸ¥è¯†ç‚¹ï¼š**

æ•°æ®ç›‘å¬å™¨å¯ä»¥ç”¨äºç›‘å¬å’Œå“åº”ä»»ä½•å±æ€§å’Œæ•°æ®å­—æ®µçš„å˜åŒ–ï¼Œæœ‰æ—¶ï¼Œéœ€è¦åœ¨ä¸€äº›æ•°æ®å­—æ®µè¢« setData è®¾ç½®æ—¶ï¼Œéœ€è¦æ‰§è¡Œä¸€äº›æ“ä½œã€‚é‚£ä¹ˆå°±å¯ä»¥ä½¿ç”¨
`observers`
æ•°æ®ç›‘å¬å™¨æ¥å®ç°ã€‚è¯­æ³•å¦‚ä¸‹ï¼š

```js
Component({
  data: {
    num: 10,
    count: 1,
    obj: { name: 'Tom', age: 10 },
    arr: [1, 2, 3]
  },
  observers: {
    // key æ˜¯éœ€è¦æ£€æµ‹æ•°æ®
    // value æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå‡½æ•°æ¥æ”¶ä¸€ä¸ªå½¢å‚ä½œä¸ºå‚æ•°ï¼Œæ˜¯æœ€æ–°çš„å€¼
    num: function(newNum) {
      console.log(newNum)
    },
    
    // æ•°æ®ç›‘å¬å™¨æ”¯æŒç›‘å¬å±æ€§æˆ–å†…éƒ¨æ•°æ®çš„å˜åŒ–ï¼Œå¯ä»¥åŒæ—¶ç›‘å¬å¤šä¸ª
    'num, count': function (newNum, newCount) {
       console.log(newNum, newCount)
    }
    
    // ç›‘å¬å™¨å¯ä»¥ç›‘å¬å­æ•°æ®å­—æ®µ
    'obj.age': function(newAge) {
      console.log(newAge)
    },
    
    // å¦‚æœéœ€è¦ç›‘å¬æ‰€æœ‰å­æ•°æ®å­—æ®µçš„å˜åŒ–ï¼Œå¯ä»¥ä½¿ç”¨é€šé…ç¬¦ ** 
    'obj.**': function(newAge) {
      console.log(newAge)
    },
        
    'arr[0]': function (val) {}
  }
})

```

#### 9. ç»„ä»¶é—´é€šä¿¡ä¸äº‹ä»¶

##### 9.1 çˆ¶å¾€å­ä¼ å€¼

**çŸ¥è¯†ç‚¹ï¼š**

çˆ¶ç»„ä»¶å¦‚æœéœ€è¦å‘å­ç»„ä»¶ä¼ é€’æŒ‡å®šå±æ€§çš„æ•°æ®ï¼Œåœ¨ WXML ä¸­éœ€è¦ä½¿ç”¨æ•°æ®ç»‘å®šçš„æ–¹å¼

ä¸æ™®é€šçš„ WXML æ¨¡æ¿ç±»ä¼¼ï¼Œä½¿ç”¨æ•°æ®ç»‘å®šï¼Œè¿™æ ·å°±å¯ä»¥å‘å­ç»„ä»¶çš„å±æ€§ä¼ é€’åŠ¨æ€æ•°æ®ã€‚

çˆ¶ç»„ä»¶å¦‚æœéœ€è¦å‘å­ç»„ä»¶ä¼ é€’æ•°æ®ï¼Œåªéœ€è¦ä¸¤ä¸ªæ­¥éª¤ï¼š

1.åœ¨çˆ¶ç»„ä»¶ WXML ä¸­ä½¿ç”¨ æ•°æ®ç»‘å®š çš„æ–¹å¼å‘å­ç»„ä»¶ä¼ é€’åŠ¨æ€æ•°æ®

2.å­ç»„ä»¶å†…éƒ¨ä½¿ç”¨ properties æ¥æ”¶çˆ¶ç»„ä»¶ä¼ é€’çš„æ•°æ®å³å¯

**çŸ¥è¯†ç‚¹ä»£ç ï¼š**

```html
<!-- å¼•ç”¨ç»„ä»¶çš„é¡µé¢æ¨¡æ¿ -->
<view>
  <costom prop-a="{{ name }}" prop-b="{{ age }}" />
</view>

```

åœ¨ç»„ä»¶å†…éƒ¨ï¼Œéœ€è¦åœ¨
`Component`
æ„é€ å™¨ä¸­é€šè¿‡
`properties`
æ¥æ”¶ä¼ é€’çš„æ•°æ®ï¼Œæ¥æ”¶æ–¹å¼æœ‰ä¸¤ç§ï¼š

```js
Component({
  /**
   * ç»„ä»¶çš„å±æ€§åˆ—è¡¨ props
   */
  properties: {
    propA: {
      type: String, // ä¼ é€’çš„æ•°æ®ç±»å‹
      value: '' // é»˜è®¤å€¼
    },
    propB: Number // ç®€åŒ–çš„å®šä¹‰æ–¹å¼
  },

  // coding...
})


```

åœ¨å­ç»„ä»¶ä¸­ä¹Ÿå¯ä»¥é€šè¿‡
`this.setData()`
å¯¹
`properties`
ä¸­çš„æ•°æ®è¿›è¡Œä¿®æ”¹ï¼Œä½†æ˜¯ä¸€èˆ¬ä¸å»ºè®®ä¿®æ”¹

```js
// components/custom01/custom01.js
Component({

  /**
   * ç»„ä»¶çš„æ–¹æ³•åˆ—è¡¨
   */
  methods: {
    // ä¿®æ”¹åˆ—è¡¨ä¸­çš„æ•°æ®
    updateProp () {
      this.setData({
        propB: this.properties.propB + 1
      })
    }
  }
})


```

**å¤é€‰æ¡†ç»„ä»¶æ¡ˆä¾‹ï¼š**

`â¡ï¸ index.js`

```js
Page({

  data: {
    isChecked: true
  },
    
  // coding...

})

```

`â¡ï¸ index.wxml`

```html
<custom-checkbox
  label="æˆ‘å·²é˜…è¯»å¹¶åŒæ„ ç”¨æˆ·åè®® å’Œ éšç§åè®®"
  position="right"
+   checked="{{ isChecked }}">
  æˆ‘å·²é˜…è¯»å¹¶åŒæ„ ç”¨æˆ·åè®® å’Œ éšç§åè®® - 111
</custom-checkbox>

```

`â¡ï¸ components/custom-checkbox/custom-checkbox.js`

```js
Component({

  options: {
    styleIsolation: 'shared'
  },

  properties: {
    
    // coding...

    // å¤é€‰æ¡†ç»„ä»¶å…¬å…±ç»„ä»¶
    // éœ€è¦å†å¤šä¸ªé¡µé¢ã€åœ¨å¤šä¸ªé¡¹ç›®ä¸­è¿›è¡Œä½¿ç”¨
    // åœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œæœ‰çš„åœ°æ–¹å¸Œæœ›é»˜è®¤æ˜¯é€‰ä¸­çš„æ•ˆæœï¼Œæœ‰çš„åœ°æ–¹å¸Œæœ›é»˜è®¤æ˜¯æ²¡æœ‰è¢«é€‰ä¸­çš„æ•ˆæœ
    // æ€ä¹ˆå¤„ç† ï¼Ÿ
    // é¦–å…ˆè®©å¤é€‰æ¡†é»˜è®¤è¿˜æ˜¯æ²¡æœ‰è¢«é€‰ä¸­çš„æ•ˆæœ
    // å¦‚æœå¸Œæœ›å¤é€‰æ¡†é»˜è®¤è¢«é€‰ä¸­ï¼Œè¿™æ—¶å€™ä¼ é€’å±æ€§(checked=true)åˆ°å¤é€‰æ¡†ç»„ä»¶
+     checked: {
+       type: Boolean,
+       value: false
+     }
  },

  /**
   * ç»„ä»¶çš„åˆå§‹æ•°æ®ï¼šç”¨æ¥å®šä¹‰å½“å‰ç»„ä»¶å†…éƒ¨æ‰€éœ€è¦ä½¿ç”¨çš„æ•°æ®
   */
  data: {
    isChecked: false
  },

+   observers: {
+     // å¦‚æœéœ€è¦å°† properties ä¸­çš„æ•°æ®èµ‹å€¼ç»™ data
+     // å¯ä»¥ä½¿ç”¨ observers è¿›è¡Œå¤„ç†
+     checked: function (newChecked) {
+       // console.log(newChecked)
+       this.setData({
+         isChecked: newChecked
+       })
+     }
+   },

  /**
   * ç»„ä»¶çš„æ–¹æ³•åˆ—è¡¨ï¼šåœ¨ç»„ä»¶ä¸­ï¼Œæ‰€æœ‰çš„äº‹ä»¶å¤„ç†ç¨‹åºéƒ½éœ€è¦å†™åˆ° methods æ–¹æ³•ä¸­
   */
  methods: {
    
    // æ›´æ–°å¤é€‰æ¡†çš„çŠ¶æ€
    updateChecked () {

      this.setData({
+         isChecked: !this.data.isChecked,
+         // checked: !this.properties.checked
        // label: 'åœ¨ç»„ä»¶å†…éƒ¨ä¹Ÿå¯ä»¥ä¿®æ”¹ properties ä¸­çš„æ•°æ®'
      })

      // åœ¨ JS ä¸­å¯ä»¥è®¿é—®å’Œè·å– properties ä¸­çš„æ•°æ®
      // ä½†æ˜¯ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä¸å»ºè®®ä¿®æ”¹ï¼Œå› ä¸ºä¼šé€ æˆæ•°æ®æµçš„æ··ä¹±
      // console.log(this.properties.label)
      // console.log(this.data.isChecked)
    }

  }
  
})

```

`â¡ï¸ components/custom-checkbox/custom-checkbox.wxml`

```html
<!--components/custom-checkbox/custom-checkbox.wxml-->
<!-- <text>æˆ‘æ˜¯è‡ªå®šä¹‰ç»„ä»¶</text> -->

<view class="custom-checkbox-container">
  <view class="custom-checkbox-box {{ position === 'right' ? 'right' : 'left' }}">
+     <checkbox class="custom-checkbox" checked="{{ isChecked }}" bindtap="updateChecked" />

    <view class="content">
      <!-- lable å’Œ å­èŠ‚ç‚¹å†…å®¹éƒ½è¿›è¡Œäº†å±•ç¤º -->
      <!-- è¦ä¹ˆå±•ç¤º lable è¦ä¹ˆå±•ç¤º å­èŠ‚ç‚¹å†…å®¹ -->
      <!-- å¦‚æœç”¨æˆ·ä¼ é€’äº† lable å±æ€§ï¼Œå°±å±•ç¤º lable -->
      <!-- å¦‚æœç”¨æˆ·æ²¡æœ‰ä¼ é€’ lable å±æ€§ï¼Œå°±å±•ç¤º å­èŠ‚ç‚¹å†…å®¹ -->
      <text wx:if="{{ label !== '' }}">{{ label }}</text>

      <slot wx:else />
    </view>
  </view>
</view>


```

##### 9.2 å­å¾€çˆ¶ä¼ å€¼

å­ç»„ä»¶å¦‚æœéœ€è¦å‘çˆ¶ç»„ä»¶ä¼ é€’æ•°æ®ï¼Œå¯ä»¥é€šè¿‡å°ç¨‹åºæä¾›çš„äº‹ä»¶ç³»ç»Ÿå®ç°ä¼ é€’ä¼ é€’ï¼Œå¯ä»¥ä¼ é€’ä»»æ„æ•°æ®ã€‚

äº‹ä»¶ç³»ç»Ÿæ˜¯ç»„ä»¶é—´é€šä¿¡çš„ä¸»è¦æ–¹å¼ä¹‹ä¸€ï¼Œè‡ªå®šä¹‰ç»„ä»¶å¯ä»¥è§¦å‘ä»»æ„çš„äº‹ä»¶ï¼Œå¼•ç”¨ç»„ä»¶çš„é¡µé¢å¯ä»¥ç›‘å¬è¿™äº›äº‹ä»¶ï¼Œæµç¨‹å¦‚ä¸‹ï¼š

1. è‡ªå®šä¹‰ç»„ä»¶è§¦å‘äº‹ä»¶æ—¶ï¼Œéœ€è¦ä½¿ç”¨
   `triggerEvent`
   æ–¹æ³•å‘å°„ä¸€ä¸ªè‡ªå®šä¹‰çš„äº‹ä»¶
2. è‡ªå®šä¹‰ç»„ä»¶æ ‡ç­¾ä¸Šé€šè¿‡ bind æ–¹æ³•ç›‘å¬å‘å°„çš„äº‹ä»¶

**è§¦å‘äº‹ä»¶ï¼š**

```html
<!-- åœ¨è‡ªå®šä¹‰ç»„ä»¶ä¸­ -->
<button type="primary" plain bindtap="sendData">ä¼ é€’æ•°æ®</button>

```

```js
// components/custom05/custom05.js
Component({

  // ç»„ä»¶çš„åˆå§‹æ•°æ®
  data: {
    num: 666
  },

  // ç»„ä»¶çš„æ–¹æ³•åˆ—è¡¨
  methods: {

    // å°†æ•°æ®ä¼ é€’ç»™çˆ¶ç»„ä»¶
    sendData () {

      // å¦‚æœéœ€è¦å°†æ•°æ®ä¼ é€’ç»™çˆ¶ç»„ä»¶
      // éœ€è¦ä½¿ç”¨ triggerEvent å‘å°„è‡ªå®šä¹‰äº‹ä»¶
      // ç¬¬äºŒä¸ªå‚æ•°ï¼Œæ˜¯æºå¸¦çš„å‚æ•°
      this.triggerEvent('myevent', this.data.num)
      
    }

  }
})

```

**ç›‘å¬äº‹ä»¶ï¼š**

```html
<view>{{ num }}</view>
<!-- éœ€è¦åœ¨è‡ªå®šä¹‰ç»„ä»¶æ ‡ç­¾ä¸Šé€šè¿‡ bind æ–¹æ³•ç»‘å®šè‡ªå®šä¹‰äº‹ä»¶ï¼ŒåŒæ—¶ç»‘å®šäº‹ä»¶å¤„ç†å‡½æ•° -->
<custom05 bind:myevent="getData" />

```

```js
Page({

  data: {
    num: ''
  },

  getData (event) {
    // å¯ä»¥é€šè¿‡äº‹ä»¶å¯¹è±¡.detail è·å–å­ç»„ä»¶ä¼ é€’ç»™çˆ¶ç»„ä»¶çš„æ•°æ®
    // console.log(event)
    this.setData({
      num: event.detail
    })
  }

})


```

**å¤é€‰æ¡†ç»„ä»¶æ¡ˆä¾‹ï¼š**

`â¡ï¸ components/custom-checkbox/custom-checkbox.js`

```js
Component({

  /**
   * ç»„ä»¶çš„æ–¹æ³•åˆ—è¡¨ï¼šåœ¨ç»„ä»¶ä¸­ï¼Œæ‰€æœ‰çš„äº‹ä»¶å¤„ç†ç¨‹åºéƒ½éœ€è¦å†™åˆ° methods æ–¹æ³•ä¸­
   */
  methods: {
    
    // æ›´æ–°å¤é€‰æ¡†çš„çŠ¶æ€
    updateChecked () {

      this.setData({
        isChecked: !this.data.isChecked,
        // label: 'åœ¨ç»„ä»¶å†…éƒ¨ä¹Ÿå¯ä»¥ä¿®æ”¹ properties ä¸­çš„æ•°æ®'
      })

      // åœ¨ JS ä¸­å¯ä»¥è®¿é—®å’Œè·å– properties ä¸­çš„æ•°æ®
      // ä½†æ˜¯ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä¸å»ºè®®ä¿®æ”¹ï¼Œå› ä¸ºä¼šé€ æˆæ•°æ®æµçš„æ··ä¹±
      // console.log(this.properties.label)
      // console.log(this.data.isChecked)

+       // ç›®å‰å¤é€‰æ¡†ç»„ä»¶çš„çŠ¶æ€æ˜¯å­˜å‚¨åœ¨å¤é€‰æ¡†ç»„ä»¶å†…éƒ¨çš„ã€å­˜å‚¨åœ¨è‡ªå®šä¹‰ç»„ä»¶å†…éƒ¨çš„
+       // ä½†æ˜¯ï¼Œåœ¨ä»¥åå®é™…å¼€å‘ä¸­ï¼Œç»„ä»¶ä½¿ç”¨è€…ã€çˆ¶ç»„ä»¶æœ‰æ—¶å€™ä¹Ÿéœ€è¦è·å–åˆ°å¤é€‰æ¡†å†…éƒ¨çš„çŠ¶æ€
+       // æ€ä¹ˆåŠ ï¼Ÿ
+       // è¿™æ—¶å€™ï¼Œè‡ªå®šä¹‰ç»„ä»¶å†…éƒ¨å°±éœ€è¦å‘å°„ä¸€ä¸ªè‡ªå®šä¹‰äº‹ä»¶ï¼Œ
+       // å¦‚æœç»„ä»¶ä½¿ç”¨è€…ã€çˆ¶ç»„ä»¶éœ€è¦ä½¿ç”¨æ•°æ®ï¼Œç»‘å®šè‡ªå®šä¹‰äº‹ä»¶è¿›è¡Œè·å–å³å¯
+       this.triggerEvent('changechecked', this.data.isChecked)
    }

  }
  
})

```

`â¡ï¸ index.html`

```html
<custom-checkbox
  label="æˆ‘å·²é˜…è¯»å¹¶åŒæ„ ç”¨æˆ·åè®® å’Œ éšç§åè®®"
  position="right"
  checked="{{ isChecked }}"
  class="getchild"
+  bind:changechecked="getData"
>
  æˆ‘å·²é˜…è¯»å¹¶åŒæ„ ç”¨æˆ·åè®® å’Œ éšç§åè®® - 111
</custom-checkbox>

```

`â¡ï¸ index.js`

```js
Page({

  data: {
    isChecked: true
  },

  getData (event) {
    console.log(event.detail)

    if (event.detail) {
      console.log('æäº¤')
    } else {
      console.log('è¯·åŒæ„åè®®ï¼')
    }
  }

})

```

##### 9.3 è·å–ç»„ä»¶å®ä¾‹

å¦‚æœå‰é¢ä¸¤ç§æ–¹å¼ä¸è¶³ä»¥æ»¡è¶³éœ€è¦ã€‚

å¯åœ¨çˆ¶ç»„ä»¶é‡Œè°ƒç”¨
`this.selectComponent()`
ï¼Œè·å–å­ç»„ä»¶çš„å®ä¾‹å¯¹è±¡ï¼Œå°±å¯ä»¥ç›´æ¥æ‹¿åˆ°å­ç»„ä»¶çš„ä»»æ„æ•°æ®å’Œæ–¹æ³•ã€‚è°ƒç”¨æ—¶éœ€è¦ä¼ å…¥ä¸€ä¸ªåŒ¹é…é€‰æ‹©å™¨
`selector`
ï¼Œå¦‚ï¼š
`this.selectComponent(".my-component")`
ã€‚

```html
<!-- çˆ¶ç»„ä»¶ -->
<costom bind:myevent="getData" class="custom" />
<button bindtap="getChildComponent"></button>

```

```js
// çˆ¶ç»„ä»¶
Page({
  data: {},
  getChildComponent: function () {
    const child = this.selectComponent('.custom')
    console.log(child)
  }
})

```

**å¤é€‰æ¡†ç»„ä»¶æ¡ˆä¾‹ï¼š**

`â¡ï¸ index.html`

```html
<custom-checkbox
  label="æˆ‘å·²é˜…è¯»å¹¶åŒæ„ ç”¨æˆ·åè®® å’Œ éšç§åè®®"
  position="right"
  checked="{{ isChecked }}"
+   class="child"
+  id="child"
  bind:changechecked="getData"
>
  æˆ‘å·²é˜…è¯»å¹¶åŒæ„ ç”¨æˆ·åè®® å’Œ éšç§åè®® - 111
</custom-checkbox>

<button type="primary" plain bindtap="getChild">è·å–å­ç»„ä»¶å®ä¾‹å¯¹è±¡</button>


```

`â¡ï¸ index.js`

```js
Page({

  // coding...

  // è·å–å­ç»„ä»¶çš„å®ä¾‹å¯¹è±¡
  getChild () {

    // this.selectComponent æ–¹æ³•è·å–å­ç»„ä»¶å®ä¾‹å¯¹è±¡
    // è·å–åˆ°å®ä¾‹å¯¹è±¡ä»¥åï¼Œå°±èƒ½è·å–å­ç»„ä»¶æ‰€æœ‰çš„æ•°æ®ã€ä¹Ÿèƒ½è°ƒç”¨å­ç»„ä»¶çš„æ–¹æ³•
    const res = this.selectComponent('#child')
    console.log(res.data.isChecked)

  }

})

```

#### 10. ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ

ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸï¼šæŒ‡çš„æ˜¯ç»„ä»¶è‡ªèº«çš„ä¸€äº›é’©å­å‡½æ•°ï¼Œè¿™äº›å‡½æ•°åœ¨ç‰¹å®šçš„æ—¶é—´èŠ‚ç‚¹æ—¶è¢«è‡ªåŠ¨è§¦å‘

ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°éœ€è¦åœ¨
`lifetimes`
å­—æ®µå†…è¿›è¡Œå£°æ˜

æœ€é‡è¦çš„ç”Ÿå‘½å‘¨æœŸæ˜¯
`created`
`attached`
`detached`
åŒ…å«ä¸€ä¸ªç»„ä»¶ç”Ÿå‘½å‘¨æœŸæµç¨‹çš„æœ€ä¸»è¦æ—¶é—´ç‚¹

| å®šä¹‰æ®µ | æè¿° |
| --- | --- |
| `created` | åœ¨ç»„ä»¶å®ä¾‹åˆšåˆšè¢«åˆ›å»ºæ—¶æ‰§è¡Œï¼Œæ³¨æ„æ­¤æ—¶ä¸èƒ½è°ƒç”¨ `setData` ï¼ˆè¿˜æ²¡æœ‰å¯¹æ¨¡æ¿è§£æï¼‰ |
| `attached` | åœ¨ç»„ä»¶å®ä¾‹è¿›å…¥é¡µé¢èŠ‚ç‚¹æ ‘æ—¶æ‰§è¡Œ (æ¨¡æ¿å·²ç»è§£æå®Œæ¯•ï¼Œå¹¶ä¸”æŒ‚è½½åˆ°é¡µé¢ä¸Š) |
| ready | åœ¨ç»„ä»¶å¸ƒå±€å®Œæˆåæ‰§è¡Œ |
| moved | åœ¨ç»„ä»¶å®ä¾‹è¢«ç§»åŠ¨åˆ°èŠ‚ç‚¹æ ‘å¦ä¸€ä¸ªä½ç½®æ—¶æ‰§è¡Œ |
| `detached` | åœ¨ç»„ä»¶å®ä¾‹è¢«ä»é¡µé¢èŠ‚ç‚¹æ ‘ç§»é™¤æ—¶æ‰§è¡Œ (ç»„ä»¶è¢«é”€æ¯äº†) |

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/859c4716b87c51c7596e69c21da67eed.png)

1. ã€ç»„ä»¶å®ä¾‹åˆšåˆšè¢«åˆ›å»ºå¥½æ—¶ã€‘ï¼Œ
   `created`
   ç”Ÿå‘½å‘¨æœŸè¢«è§¦å‘ã€‚æ­¤æ—¶ï¼Œç»„ä»¶æ•°æ®
   `this.data`
   å°±æ˜¯åœ¨
   `Component`
   æ„é€ å™¨ä¸­å®šä¹‰çš„æ•°æ®
   `data`
   ã€‚
   **æ­¤æ—¶è¿˜ä¸èƒ½è°ƒç”¨
   `setData`
   ã€‚**
   é€šå¸¸æƒ…å†µä¸‹ï¼Œè¿™ä¸ªç”Ÿå‘½å‘¨æœŸåªåº”è¯¥ç”¨äºç»™ç»„ä»¶
   `this`
   æ·»åŠ ä¸€äº›è‡ªå®šä¹‰å±æ€§å­—æ®µã€‚
2. ã€åœ¨ç»„ä»¶å®Œå…¨åˆå§‹åŒ–å®Œæ¯•ã€‘ã€è¿›å…¥é¡µé¢èŠ‚ç‚¹æ ‘åï¼Œ
   `attached`
   ç”Ÿå‘½å‘¨æœŸè¢«è§¦å‘ã€‚æ­¤æ—¶ï¼Œ
   `this.data`
   å·²è¢«åˆå§‹åŒ–ä¸ºç»„ä»¶çš„å½“å‰å€¼ã€‚è¿™ä¸ªç”Ÿå‘½å‘¨æœŸå¾ˆæœ‰ç”¨ï¼Œç»å¤§å¤šæ•°åˆå§‹åŒ–å·¥ä½œå¯ä»¥åœ¨è¿™ä¸ªæ—¶æœºè¿›è¡Œã€‚
3. ã€åœ¨ç»„ä»¶ç¦»å¼€é¡µé¢èŠ‚ç‚¹æ ‘åã€‘ï¼Œ
   `detached`
   ç”Ÿå‘½å‘¨æœŸè¢«è§¦å‘ã€‚é€€å‡ºä¸€ä¸ªé¡µé¢æ—¶ï¼Œå¦‚æœç»„ä»¶è¿˜åœ¨é¡µé¢èŠ‚ç‚¹æ ‘ä¸­ï¼Œåˆ™
   `detached`
   ä¼šè¢«è§¦å‘ã€‚

```js
Component({
  
  lifetimes: {
    created: function () {
      // åœ¨ç»„ä»¶å®ä¾‹åˆšåˆšè¢«åˆ›å»ºæ—¶æ‰§è¡Œï¼Œæ³¨æ„æ­¤æ—¶ä¸èƒ½è°ƒç”¨ setData 
      // ä¸€èˆ¬ç”¨æ¥ä¸ºç»„ä»¶æ·»åŠ ä¸€äº›è‡ªå®šä¹‰å±æ€§å­—æ®µã€‚
    },
    attached: function() {
      // attached åœ¨ç»„ä»¶å®Œå…¨åˆå§‹åŒ–å®Œæ¯•ã€è¿›å…¥é¡µé¢èŠ‚ç‚¹æ ‘åæ‰§è¡Œ
      // æ¨¡æ¿å·²ç»è§£æå®Œæ¯•ï¼Œå¹¶ä¸”æŒ‚è½½åˆ°é¡µé¢ä¸Š
      // ä¸€èˆ¬éƒ½æ˜¯åœ¨è¿™é‡Œå†™å¯¹åº”çš„äº¤äº’
    },
    detached: function() {
      // åœ¨ç»„ä»¶å®ä¾‹è¢«ä»é¡µé¢èŠ‚ç‚¹æ ‘ç§»é™¤æ—¶æ‰§è¡Œ
    },
    
    // coding...
  }
    
  // coding...
})

```

#### 11. ç»„ä»¶æ‰€åœ¨é¡µé¢çš„ç”Ÿå‘½å‘¨æœŸ

ç»„ä»¶è¿˜æœ‰ä¸€äº›ç‰¹æ®Šçš„ç”Ÿå‘½å‘¨æœŸï¼Œè¿™ç±»ç”Ÿå‘½å‘¨æœŸå’Œç»„ä»¶æ²¡æœ‰å¾ˆå¼ºçš„å…³è”

ä¸»è¦ç”¨äºç»„ä»¶å†…éƒ¨ç›‘å¬çˆ¶ç»„ä»¶çš„å±•ç¤ºã€éšè—çŠ¶æ€ï¼Œä»è€Œæ–¹ä¾¿ç»„ä»¶å†…éƒ¨æ‰§è¡Œä¸€äº›ä¸šåŠ¡é€»è¾‘çš„å¤„ç†

ç»„ä»¶æ‰€åœ¨é¡µé¢çš„ç”Ÿå‘½å‘¨æœŸæœ‰ 4 ä¸ªï¼š showã€ hideã€ resizeã€ routeDoneï¼Œéœ€è¦åœ¨
`pageLifetimes`
å­—æ®µå†…è¿›è¡Œå£°æ˜

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/91a88f0efbb62260bcee9e6e8a1d3af3.png)

```js
// components/custom06/custom06.js
Component({

  // coding...

  // ç»„ä»¶æ‰€åœ¨é¡µé¢çš„ç”Ÿå‘½å‘¨æœŸ
  pageLifetimes: {

    // ç›‘å¬ç»„ä»¶æ‰€åœ¨çš„é¡µé¢å±•ç¤º(åå°åˆ‡å‰å°)çŠ¶æ€
    show () {
      console.log('ç»„ä»¶æ‰€åœ¨çš„é¡µé¢è¢«å±•ç¤º')
    },

    // ç›‘å¬ç»„ä»¶æ‰€åœ¨çš„é¡µé¢éšè—(å‰å°åˆ‡åå°ã€ç‚¹å‡» tabBar)çŠ¶æ€
    hide () {
      console.log('ç»„ä»¶æ‰€åœ¨çš„é¡µé¢è¢«éšè—')
    }

  }

})


```

#### 12. å°ç¨‹åºç”Ÿå‘½å‘¨æœŸæ€»ç»“

å°ç¨‹åºå†·å¯åŠ¨ï¼Œé’©å­å‡½æ•°æ‰§è¡Œçš„é¡ºåº

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/da3e38d9e284cd04c77e20859bb79eac.png)

ä¿ç•™å½“å‰é¡µé¢(navigate) ä»¥åŠ å…³é—­å½“å‰é¡µé¢(redirect)

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/34c72d8197698018bb051a8ea71d27ba.png)

åˆ‡åå° ä»¥åŠ åˆ‡å‰å°(çƒ­å¯åŠ¨)

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/878ec465444a523a1e417c9f7ba81ca3.png)

#### 13. æ‹“å±•ï¼šä½¿ç”¨ Component æ„é€ é¡µé¢

Component æ–¹æ³•ç”¨äºåˆ›å»ºè‡ªå®šä¹‰ç»„ä»¶

å°ç¨‹åºçš„é¡µé¢ä¹Ÿå¯ä»¥è§†ä¸ºè‡ªå®šä¹‰ç»„ä»¶ï¼Œå› æ­¤é¡µé¢ä¹Ÿå¯ä»¥ä½¿ç”¨ Component æ–¹æ³•è¿›è¡Œåˆ›å»ºï¼Œä»è€Œå®ç°å¤æ‚çš„é¡µé¢é€»è¾‘å¼€å‘

> ğŸ“Œ
> **æ³¨æ„äº‹é¡¹ï¼š**
>
> 1. è¦æ±‚å¯¹åº” json æ–‡ä»¶ä¸­åŒ…å« usingComponents å®šä¹‰æ®µ
> 2. é¡µé¢ä½¿ç”¨ Component æ„é€ å™¨åˆ›å»ºï¼Œéœ€è¦å®šä¹‰ä¸æ™®é€šç»„ä»¶ä¸€æ ·çš„å­—æ®µä¸å®ä¾‹æ–¹æ³•
> 3. é¡µé¢ Page ä¸­çš„ä¸€äº›ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼ˆå¦‚ onLoad() ç­‰ä»¥â€œonâ€å¼€å¤´çš„æ–¹æ³•ï¼‰ï¼Œåœ¨ Component ä¸­è¦å†™åœ¨ methods å±æ€§ä¸­æ‰èƒ½ç”Ÿæ•ˆ
> 4. ç»„ä»¶çš„å±æ€§ Properties å¯ä»¥ç”¨äºæ¥æ”¶é¡µé¢çš„å‚æ•°ï¼Œåœ¨ onLoad() ä¸­å¯ä»¥é€šè¿‡ this.data æ‹¿åˆ°å¯¹åº”çš„é¡µé¢å‚æ•°

**è½åœ°ä»£ç ï¼š**

```js
Component({

  // ä¸ºä»€ä¹ˆéœ€è¦ä½¿ç”¨ Component æ–¹æ³•è¿›è¡Œæ„é€ é¡µé¢
  // Component æ–¹æ³•åŠŸèƒ½æ¯” Page æ–¹æ³•å¼ºå¤§å¾ˆå¤š
  // å¦‚æœä½¿ç”¨ Component æ–¹æ³•æ„é€ é¡µé¢ï¼Œå¯ä»¥å®ç°æ›´åŠ å¤æ‚çš„é¡µé¢é€»è¾‘å¼€å‘

  // å°ç¨‹åºé¡µé¢ä¹Ÿå¯ä»¥ä½¿ç”¨ Component æ–¹æ³•è¿›è¡Œæ„é€ 
  // æ³¨æ„äº‹é¡¹ï¼š
  // 1. è¦æ±‚ .json æ–‡ä»¶ä¸­å¿…é¡»åŒ…å« usingComponents å­—æ®µ
  // 2. é‡Œé¢çš„é…ç½®é¡¹éœ€è¦å’Œ Component ä¸­çš„é…ç½®é¡¹ä¿æŒä¸€è‡´
  // 3. é¡µé¢ä¸­ Page æ–¹æ³•æœ‰ä¸€äº›é’©å­å‡½æ•°ã€äº‹ä»¶ç›‘å¬æ–¹æ³•ï¼Œè¿™äº›é’©å­å‡½æ•°ã€äº‹ä»¶ç›‘å¬æ–¹æ³•å¿…é¡»æ–¹æ³• methods å¯¹è±¡ä¸­
  // 4. ç»„ä»¶çš„å±æ€§ properties ä¹Ÿå¯ä»¥æ¥å—é¡µé¢çš„å‚æ•°ï¼Œåœ¨ onLoad é’©å­å‡½æ•°ä¸­å¯ä»¥é€šè¿‡ this.data è¿›è¡Œè·å–

  properties: {
    id: String,
    title: String
  },

  data: {
    name: 'tom'
  },

  // onLoad () {
  //   console.log('é¡µé¢åŠ è½½ - 1')
  // },

  methods: {

    // æ›´æ–° name
    updateName() {
      this.setData({
        name: 'jerry'
      })
    },

    onLoad (options) {
      // console.log('é¡µé¢åŠ è½½ - 2')
      // console.log(options)
      console.log(this.data.id)
      console.log(this.data.title)
      console.log(this.properties.id)
    },

  }

})

```

#### 14. æ‹“å±•ï¼šbehaviors

å°ç¨‹åºçš„ behaviors æ–¹æ³•æ˜¯ä¸€ç§ä»£ç å¤ç”¨çš„æ–¹å¼ï¼Œå¯ä»¥å°†ä¸€äº›é€šç”¨çš„é€»è¾‘å’Œæ–¹æ³•æå–å‡ºæ¥ï¼Œç„¶ååœ¨å¤šä¸ªç»„ä»¶ä¸­å¤ç”¨ï¼Œä»è€Œå‡å°‘ä»£ç å†—ä½™ï¼Œæé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§ã€‚

**å¦‚æœéœ€è¦ behavior å¤ç”¨ä»£ç ï¼Œéœ€è¦ä½¿ç”¨ Behavior() æ–¹æ³•**
ï¼Œæ¯ä¸ª behavior å¯ä»¥åŒ…å«ä¸€ç»„å±æ€§ã€æ•°æ®ã€ç”Ÿå‘½å‘¨æœŸå‡½æ•°å’Œæ–¹æ³•

ç»„ä»¶å¼•ç”¨å®ƒæ—¶ï¼Œå®ƒçš„å±æ€§ã€æ•°æ®å’Œæ–¹æ³•ä¼šè¢«åˆå¹¶åˆ°ç»„ä»¶ä¸­ï¼Œç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¹Ÿä¼šåœ¨å¯¹åº”æ—¶æœºè¢«è°ƒç”¨ã€‚

**æ³¨å†Œ behaviorï¼š**

å¦‚æœéœ€è¦æ³¨å†Œä¸€ä¸ª
`behavior`
ï¼Œéœ€è¦å€ŸåŠ©
`Behavior()`
æ–¹æ³•ï¼Œæ¥å—ä¸€ä¸ª
`Object`
ç±»å‹çš„å‚æ•°

```js
// my-behavior.js

module.exports = Behavior({
  behaviors: [],
  properties: {
    myBehaviorProperty: {
      type: String
    }
  },
  data: {
    myBehaviorData: 'my-behavior-data'
  },
  created: function () {
    console.log('[my-behavior] created')
  },
  attached: function () {
    console.log('[my-behavior] attached')
  },
  ready: function () {
    console.log('[my-behavior] ready')
  },

  methods: {
    myBehaviorMethod: function () {
      console.log('[my-behavior] log by myBehaviorMehtod')
    },
  }
})

```

**ä½¿ç”¨ behaviorï¼š**

```js
// my-component.js
const myBehavior = require('my-behavior')

Component({
  behaviors: [myBehavior]
  
  // coding...
})

```

**ç»„ä»¶å’Œå®ƒå¼•ç”¨çš„ behavior ä¸­å¯ä»¥åŒ…å«åŒåçš„å­—æ®µï¼Œå¯¹è¿™äº›å­—æ®µçš„å¤„ç†æ–¹æ³•å¦‚ä¸‹ï¼š**

1. å¦‚æœæœ‰åŒåçš„å±æ€§æˆ–æ–¹æ³•ï¼Œé‡‡ç”¨ â€œå°±è¿‘åŸåˆ™â€ï¼Œç»„ä»¶ä¼šè¦†ç›– behavior ä¸­çš„åŒåå±æ€§æˆ–æ–¹æ³•
2. å¦‚æœæœ‰åŒåçš„æ•°æ®å­—æ®µä¸”éƒ½æ˜¯å¯¹è±¡ç±»å‹ï¼Œä¼šè¿›è¡Œå¯¹è±¡åˆå¹¶ï¼Œå…¶ä½™æƒ…å†µä¼š é‡‡ç”¨ â€œå°±è¿‘åŸåˆ™â€ è¿›è¡Œæ•°æ®è¦†ç›–
3. ç”Ÿå‘½å‘¨æœŸå‡½æ•°å’Œ observers ä¸ä¼šç›¸äº’è¦†ç›–ï¼Œä¼šæ˜¯åœ¨å¯¹åº”è§¦å‘æ—¶æœºè¢«é€ä¸ªè°ƒç”¨ï¼Œä¹Ÿå°±æ˜¯éƒ½ä¼šè¢«æ‰§è¡Œ

è¯¦ç»†çš„è§„åˆ™ï¼š
[åŒåå­—æ®µçš„è¦†ç›–å’Œç»„åˆè§„åˆ™](https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/behaviors.html#%E5%90%8C%E5%90%8D%E5%AD%97%E6%AE%B5%E7%9A%84%E8%A6%86%E7%9B%96%E5%92%8C%E7%BB%84%E5%90%88%E8%A7%84%E5%88%99)

#### 15. æ‹“å±•ï¼šå¤–éƒ¨æ ·å¼ç±»

é»˜è®¤æƒ…å†µä¸‹ï¼Œç»„ä»¶å’Œç»„ä»¶ä½¿ç”¨è€…ä¹‹é—´å¦‚æœå­˜åœ¨ç›¸åŒçš„ç±»åä¸ä¼šç›¸äº’å½±å“ï¼Œç»„ä»¶ä½¿ç”¨è€…å¦‚æœæƒ³ä¿®æ”¹ç»„ä»¶çš„æ ·å¼ï¼Œéœ€è¦å°±è§£é™¤æ ·å¼éš”ç¦»ï¼Œä½†æ˜¯è§£é™¤æ ·å¼éš”ç¦»ä»¥åï¼Œåœ¨æç«¯æƒ…å†µä¸‹ï¼Œä¼šäº§ç”Ÿæ ·å¼å†²çªã€CSS åµŒå¥—å¤ªæ·±ç­‰é—®é¢˜ï¼Œä»è€Œç»™æˆ‘ä»¬çš„å¼€å‘å¸¦æ¥ä¸€å®šçš„éº»çƒ¦ã€‚

**å¤–éƒ¨æ ·å¼ç±»ï¼šåœ¨ä½¿ç”¨ç»„ä»¶æ—¶ï¼Œç»„ä»¶ä½¿ç”¨è€…å¯ä»¥ç»™ç»„ä»¶ä¼ å…¥ CSS ç±»åï¼Œé€šè¿‡ä¼ å…¥çš„ç±»åä¿®æ”¹ç»„ä»¶çš„æ ·å¼ã€‚**

å¦‚æœéœ€è¦ä½¿ç”¨å¤–éƒ¨æ ·å¼ç±»ä¿®æ”¹ç»„ä»¶çš„æ ·å¼ï¼Œ
**åœ¨ Component ä¸­éœ€è¦ç”¨ externalClasses å®šä¹‰è‹¥å¹²ä¸ªå¤–éƒ¨æ ·å¼ç±»ã€‚**

å¤–éƒ¨æ ·å¼ç±»çš„ä½¿ç”¨æ­¥éª¤ï¼š

1.åœ¨ Component ä¸­ç”¨ externalClasses å®šä¹‰æ®µå®šä¹‰è‹¥å¹²ä¸ªå¤–éƒ¨æ ·å¼ç±»

2.è‡ªå®šä¹‰ç»„ä»¶æ ‡ç­¾é€šè¿‡ å±æ€§ç»‘å®š çš„æ–¹å¼æä¾›ä¸€ä¸ªæ ·å¼ç±»ï¼Œå±æ€§æ˜¯ externalClasses å®šä¹‰çš„å…ƒç´ ï¼Œå±æ€§å€¼æ˜¯ä¼ é€’çš„ç±»å

3.å°†æ¥å—åˆ°çš„æ ·å¼ç±»ç”¨äºè‡ªå®šä¹‰ç»„ä»¶å†…éƒ¨

> ğŸ“Œ
> **æ³¨æ„äº‹é¡¹ï¼š**
>
> â€‹ åœ¨åŒä¸€ä¸ªèŠ‚ç‚¹ä¸Šä½¿ç”¨æ™®é€šæ ·å¼ç±»å’Œå¤–éƒ¨æ ·å¼ç±»æ—¶ï¼Œä¸¤ä¸ªç±»çš„ä¼˜å…ˆçº§æ˜¯æœªå®šä¹‰çš„
>
> â€‹ å› æ­¤éœ€è¦æ·»åŠ  !important ä»¥ä¿è¯å¤–éƒ¨æ ·å¼ç±»çš„ä¼˜å…ˆçº§

**è½åœ°ä»£ç ï¼š**

`â¡ï¸ custom09.js`

```js
// components/custom09/custom09.js
Component({

  // ç»„ä»¶æ¥å—çš„å¤–éƒ¨æ ·å¼ç±»
  externalClasses: ['extend-class']
})

```

`â¡ï¸ custom09.wxml`

```html
<!-- åœ¨åŒä¸€ä¸ªèŠ‚ç‚¹ä¸Šï¼Œå¦‚æœå­˜åœ¨å¤–éƒ¨æ ·å¼ç±» å’Œ æ™®é€šçš„æ ·å¼ç±» -->
<!-- ä¸¤ä¸ªç±»çš„ä¼˜å…ˆçº§æ˜¯æœªå®šä¹‰çš„ -->
<!-- å»ºè®®ï¼šåœ¨ä½¿ç”¨å¤–éƒ¨æ ·å¼ç±»çš„æ—¶ï¼Œæ ·å¼éœ€è¦é€šè¿‡ !important æ·»åŠ æƒé‡ -->
<view class="extend-class box">é€šè¿‡å¤–éƒ¨æ ·å¼ç±»ä¿®æ”¹ç»„ä»¶çš„æ ·å¼</view>


```

`â¡ï¸ custom09.wxss`

```scss
.box {
  color: lightseagreen;
}

```

`â¡ï¸ profile.wxml`

```html
<!-- å±æ€§æ˜¯åœ¨ externalClasses é‡Œé¢å®šä¹‰çš„å…ƒç´  -->
<!-- å±æ€§å€¼å¿…é¡»æ˜¯ä¸€ä¸ªç±»å -->
<custom09 extend-class="my-class" />

```

`â¡ï¸ profile.wxss`

```scss
/* pages/index/index.wxss */

.my-class {
  color: lightsalmon !important;
}

```

#### 16. å®Œå–„å¤é€‰æ¡†æ¡ˆä¾‹å¹¶æ€»ç»“è‡ªå®šä¹‰ç»„ä»¶

**æ€»ç»“è‡ªå®šä¹‰ç»„ä»¶ï¼š**

1. ç»„ä»¶åŸºæœ¬ä½¿ç”¨ï¼šæ•°æ®ã€å±æ€§ã€æ–¹æ³•ã€æ’æ§½
2. ç»„ä»¶æ ·å¼ä½¿ç”¨ï¼šç»„ä»¶æ ·å¼ã€æ³¨æ„äº‹é¡¹ã€æ ·å¼éš”ç¦»ã€å¤–éƒ¨æ ·å¼ç±»
3. ç»„ä»¶é€šä¿¡ä¼ å€¼ï¼šçˆ¶å¾€å­ä¼ å€¼ã€å­å¾€çˆ¶ä¼ å€¼ã€è·å–ç»„ä»¶å®ä¾‹
4. ç»„ä»¶ç”Ÿå‘½å‘¨æœŸï¼šç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸã€ç»„ä»¶æ‰€åœ¨é¡µé¢çš„ç”Ÿå‘½å‘¨æœŸã€æ€»ç»“äº†å°ç¨‹åºå…¨éƒ¨çš„ç”Ÿå‘½å‘¨æœŸ
5. ç»„ä»¶æ•°æ®ç›‘å¬å™¨ï¼šobservers
6. ç»„ä»¶æ‹“å±•ï¼šä½¿ç”¨ Component æ„é€ é¡µé¢ã€ç»„ä»¶å¤ç”¨æœºåˆ¶ behaviors ç­‰

**å®Œå–„å¤é€‰æ¡†æ¡ˆä¾‹**

`â¡ï¸ components/custom-checkbox/custom-checkbox.wxml`

```html
<!--components/custom-checkbox/custom-checkbox.wxml-->
<!-- <text>æˆ‘æ˜¯è‡ªå®šä¹‰ç»„ä»¶</text> -->

<view class="custom-checkbox-container">
  <view class="custom-checkbox-box {{ position === 'right' ? 'right' : 'left' }}">
+    <label class="custom-label">
      <checkbox class="custom-checkbox" checked="{{ isChecked }}" bindtap="updateChecked" />

      <view class="content">
        <!-- lable å’Œ å­èŠ‚ç‚¹å†…å®¹éƒ½è¿›è¡Œäº†å±•ç¤º -->
        <!-- è¦ä¹ˆå±•ç¤º lable è¦ä¹ˆå±•ç¤º å­èŠ‚ç‚¹å†…å®¹ -->
        <!-- å¦‚æœç”¨æˆ·ä¼ é€’äº† lable å±æ€§ï¼Œå°±å±•ç¤º lable -->
        <!-- å¦‚æœç”¨æˆ·æ²¡æœ‰ä¼ é€’ lable å±æ€§ï¼Œå°±å±•ç¤º å­èŠ‚ç‚¹å†…å®¹ -->
        <text wx:if="{{ label !== '' }}">{{ label }}</text>

        <slot wx:else />
      </view>
+    </label>
  </view>
</view>


```

`â¡ï¸ components/custom-checkbox/custom-checkbox.wxss`

```scss
+ .custom-checkbox-box .custom-label {
  display: flex;
  align-items: center;
}


```

68747470733a2f2f62:6c6f672e6373646e2e6e65742f71715f36333335383835392f:61727469636c652f64657461696c732f313336333032343132