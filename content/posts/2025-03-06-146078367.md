---
layout: post
title: "Qtday5"
date: 2025-03-06 19:40:21 +0800
description: "【运行结果】：点Play按钮后，线程运行滑块从最左端向右移动到最右端停止。要画2个部分：QSlider的槽、QSlider滑块；进度条通过线程自己动起来。"
keywords: "Qt：day5"
categories: ['未分类']
tags: ['开发语言', 'Qt']
artid: "146078367"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146078367
    alt: "Qtday5"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146078367
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146078367
cover: https://bing.ee123.net/img/rand?artid=146078367
image: https://bing.ee123.net/img/rand?artid=146078367
img: https://bing.ee123.net/img/rand?artid=146078367
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Qt：day5
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p>
     一、作业1
    </p>
    <p>
     将一个 QSlider，使用QSS语句，画成一个进度条：
    </p>
    <p>
     要画2个部分：QSlider的槽、QSlider滑块；
    </p>
    <p>
     进度条通过线程自己动起来。
    </p>
    <p>
    </p>
    <p>
     【运行结果】：点Play按钮后，线程运行滑块从最左端向右移动到最右端停止。
    </p>
    <p>
     <img alt="" height="390" src="https://i-blog.csdnimg.cn/direct/ce2abc6678a744d7b7bfbb9b180ec8a6.png" width="473"/>
    </p>
    <p>
    </p>
    <p>
     【Headers / mythread.h】：
    </p>
    <pre><code class="language-cpp">#ifndef MYTHREAD_H
#define MYTHREAD_H

#include &lt;QThread&gt;

class myThread : public QThread
{
    Q_OBJECT
public:
    explicit myThread(QObject* parent = nullptr);

signals:
    void sendSignal();

protected:
    virtual void run() override;
};

#endif // MYTHREAD_H


</code></pre>
    <p>
    </p>
    <p>
     【Headers / widget.h】：
    </p>
    <pre><code class="language-cpp">#ifndef WIDGET_H
#define WIDGET_H

#include &lt;QWidget&gt;
#include &lt;QThread&gt;
#include "mythread.h"

QT_BEGIN_NAMESPACE
namespace Ui { class Widget; }
QT_END_NAMESPACE

class Widget : public QWidget
{
    Q_OBJECT

public:
    Widget(QWidget *parent = nullptr);
    ~Widget();

private slots:
    void on_pushButton_clicked();
    void rcvSignal();

private:
    Ui::Widget *ui;
    myThread* thread;
};
#endif // WIDGET_H


</code></pre>
    <p>
    </p>
    <p>
     【Sources  / mythread.cpp】：
    </p>
    <pre><code class="language-cpp">#include "mythread.h"
#include &lt;QDebug&gt;
#include &lt;QThread&gt;

myThread::myThread(QObject* parent)
    :QThread(parent)
{

}

void myThread::run()
{
    while(!isInterruptionRequested()){ //检测线程是否被请求退出
        emit sendSignal();
        QThread::usleep(100000); // 0.1s
    }
}


</code></pre>
    <p>
    </p>
    <p>
     【Sources  / widget.cpp】：
    </p>
    <pre><code class="language-cpp">#include "widget.h"
#include "ui_widget.h"
#include "mythread.h"

Widget::Widget(QWidget *parent)
    : QWidget(parent)
    , ui(new Ui::Widget)
{
    ui-&gt;setupUi(this);

    //QString qss = "QSlider::sub-page{background-color:blue} QSlider::groove:horizontal{background-color:red}";
    QString qss = "QSlider::groove:horizontal { background: gray; } "
                  "QSlider::sub-page:horizontal { background: blue; } "
                  "QSlider::handle:horizontal { background: white; width: 10px; }";

    ui-&gt;horizontalSlider-&gt;setStyleSheet(qss);
    ui-&gt;horizontalSlider-&gt;setMaximum(100);

    thread = new myThread(this);
    QObject::connect(thread, &amp;myThread::sendSignal, this, &amp;Widget::rcvSignal);
}

Widget::~Widget()
{
    if(thread){
        thread-&gt;quit();
        thread-&gt;wait();
        //thread-&gt;terminate();
        delete thread;
    }
    delete ui;
}


void Widget::on_pushButton_clicked()
{
    thread-&gt;start();
}

void Widget::rcvSignal()
{
    int currentValue = ui-&gt;horizontalSlider-&gt;value();
    if(currentValue &lt; ui-&gt;horizontalSlider-&gt;maximum()){
        ui-&gt;horizontalSlider-&gt;setValue(currentValue + 1);
    }
}


</code></pre>
    <p>
    </p>
    <p>
     【Sources  / main.cpp】：
    </p>
    <pre><code class="language-cpp">#include "widget.h"

#include &lt;QApplication&gt;

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);
    Widget w;
    w.show();
    return a.exec();
}


</code></pre>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f62:6c6f672e6373646e2e6e65742f6c6f6e6773707974686f6e2f:61727469636c652f64657461696c732f313436303738333637" class_="artid" style="display:none">
 </p>
</div>


