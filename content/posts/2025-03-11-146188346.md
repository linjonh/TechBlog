---
layout: post
title: "Linux学习十五故障排除ICMP,Ping,Traceroute,网络统计,数据包分析"
date: 2025-03-11 21:32:47 +0800
description: "故障排除是任何 Linux 用户或管理员的基本技能。这涉及识别和解决 Linux 系统中的问题。这些问题的范围包括常见的系统错误、硬件或软件问题、网络连接问题以及系统资源的管理。Linux 中的故障排除过程通常涉及使用命令行工具、检查系统和应用程序日志文件、了解系统进程，有时还涉及深入研究 Linux 内核。有效故障排除的关键是了解 Linux 的工作原理并熟悉常见的命令行工具。此外，能够解释错误消息、使用 Linux 的内置调试工具以及了解常见问题症状可以加快解决时间。该命令是一种常用的故障排除工具"
keywords: "Linux学习(十五)(故障排除(ICMP,Ping,Traceroute,网络统计,数据包分析))"
categories: ['未分类']
tags: ['网络', '学习', 'Linux']
artid: "146188346"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146188346
    alt: "Linux学习十五故障排除ICMP,Ping,Traceroute,网络统计,数据包分析"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146188346
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146188346
cover: https://bing.ee123.net/img/rand?artid=146188346
image: https://bing.ee123.net/img/rand?artid=146188346
img: https://bing.ee123.net/img/rand?artid=146188346
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Linux学习(十五)(故障排除(ICMP,Ping,Traceroute,网络统计,数据包分析))
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <p style="margin-left:.5rem; margin-right:0; text-align:start">
     <span style="color:#374151">
      <span style="background-color:#ffffff">
       故障排除是任何 Linux 用户或管理员的基本技能。这涉及识别和解决 Linux 系统中的问题。这些问题的范围包括常见的系统错误、硬件或软件问题、网络连接问题以及系统资源的管理。Linux 中的故障排除过程通常涉及使用命令行工具、检查系统和应用程序日志文件、了解系统进程，有时还涉及深入研究 Linux 内核。
      </span>
     </span>
    </p>
    <p style="margin-left:.5rem; margin-right:0; text-align:start">
     <span style="color:#374151">
      <span style="background-color:#ffffff">
       有效故障排除的关键是了解 Linux 的工作原理并熟悉常见的命令行工具。此外，能够解释错误消息、使用 Linux 的内置调试工具以及了解常见问题症状可以加快解决时间。
      </span>
     </span>
    </p>
    <pre class="has" style="margin-left:0; margin-right:0; text-align:start"><code class="language-astro-code"># example of using a command-line tool for troubleshooting
top</code></pre>
    <p style="margin-left:.5rem; margin-right:0; text-align:start">
     <span style="color:#374151">
      <span style="background-color:#ffffff">
       该命令是一种常用的故障排除工具，可提供系统上运行的进程的动态实时视图。它对于识别可能导致性能问题的资源密集型进程特别有用。
       <code>
        top
       </code>
      </span>
     </span>
    </p>
    <h4>
     🕵️♂️
     <strong>
      Linux故障排除就像侦探破案
     </strong>
    </h4>
    <p>
     <strong>
      核心思路：
     </strong>
     像侦探一样收集线索（日志）、分析证据（系统状态）、锁定嫌犯（问题根源）
    </p>
    <hr/>
    <h4>
     🚨
     <strong>
      案件调查步骤
     </strong>
    </h4>
    <h5>
     1️⃣
     <strong>
      现场勘查（查看系统状态）
     </strong>
    </h5>
    <p>
    </p>
    <pre><code>top                  # 查看实时"人流监控"（进程资源占用）
htop                 # 升级版监控（更直观，支持鼠标操作）</code></pre>
    <pre></pre>
    <ul>
     <li>
      <p>
       <strong>
        关键线索
       </strong>
       ：CPU占用90%的"可疑分子"（异常进程）
      </p>
     </li>
     <li>
      <p>
       <strong>
        行动
       </strong>
       ：按
       <code>
        P
       </code>
       按CPU排序，按
       <code>
        k
       </code>
       终止可疑进程
      </p>
     </li>
    </ul>
    <h5>
     2️⃣
     <strong>
      调取监控（查看日志）
     </strong>
    </h5>
    <p>
    </p>
    <pre><code>journalctl -xe       # 查看系统"监控录像"（最新日志）
tail -f /var/log/syslog  # 实时追踪"案发现场"</code></pre>
    <pre></pre>
    <ul>
     <li>
      <p>
       <strong>
        常见案发现场
       </strong>
       ：
      </p>
      <ul>
       <li>
        <p>
         <code>
          /var/log/auth.log
         </code>
         → 登录安全记录
        </p>
       </li>
       <li>
        <p>
         <code>
          /var/log/nginx/error.log
         </code>
         → Web服务错误
        </p>
       </li>
      </ul>
     </li>
    </ul>
    <h5>
     3️⃣
     <strong>
      排查物证（检查硬件）
     </strong>
    </h5>
    <p>
    </p>
    <pre><code>dmesg | grep -i error  # 检查"物证报告"（硬件错误）
smartctl -a /dev/sda  # 检测硬盘"健康状态"</code></pre>
    <p>
     📌
     <strong>
      作用：查看系统日志，找出可能的硬件错误
     </strong>
    </p>
    <h5>
     <strong>
      解析
     </strong>
    </h5>
    <ul>
     <li>
      <code>
       dmesg
      </code>
      👉 显示系统日志，包含开机信息、硬件检测、驱动加载等内容。
     </li>
     <li>
      <code>
       |
      </code>
      👉 管道操作符，把
      <code>
       dmesg
      </code>
      的输出传给
      <code>
       grep
      </code>
      处理。
     </li>
     <li>
      <code>
       grep -i error
      </code>
      👉 搜索日志中**包含“error”（错误）**的行，
      <code>
       -i
      </code>
      让匹配不区分大小写。
     </li>
    </ul>
    <h5>
     <strong>
      示例
     </strong>
    </h5>
    <pre><code>dmesg | grep -i error</code></pre>
    <p>
     如果系统有错误，可能会输出：
    </p>
    <pre><code>[  145.123456] ata1.00: failed command: READ FPDMA QUEUED
[  145.123789] blk_update_request: I/O error, dev sda, sector 123456
[  200.987654] EXT4-fs error (device sda1): ext4_find_entry:xxxx: reading directory #xxxxxxx offset xxxx
</code></pre>
    <p>
     <strong>
      解释
     </strong>
     ：
    </p>
    <ul>
     <li>
      <code>
       I/O error, dev sda
      </code>
      👉 硬盘读写错误。
     </li>
     <li>
      <code>
       EXT4-fs error
      </code>
      👉 磁盘文件系统出错，可能有坏道。
     </li>
    </ul>
    <p>
     ✅
     <strong>
      结论
     </strong>
     ：如果发现错误日志，说明
     <strong>
      硬件（尤其是硬盘）可能有问题
     </strong>
     ，建议进一步检测。
    </p>
    <p>
     📌
     <strong>
      作用：查询硬盘的 S.M.A.R.T.（自我监测分析报告）信息，判断硬盘是否健康
     </strong>
    </p>
    <h5>
     <strong>
      解析
     </strong>
    </h5>
    <ul>
     <li>
      <code>
       smartctl
      </code>
      👉 一个检测硬盘健康状态的工具，属于
      <code>
       smartmontools
      </code>
      软件包。
     </li>
     <li>
      <code>
       -a
      </code>
      👉 显示所有 S.M.A.R.T. 信息（包括温度、坏道、寿命等）。
     </li>
     <li>
      <code>
       /dev/sda
      </code>
      👉 指定要检测的硬盘（
      <code>
       sda
      </code>
      是系统的第一块硬盘）。
     </li>
    </ul>
    <h5>
     <strong>
      示例
     </strong>
    </h5>
    <pre><code>smartctl -a /dev/sda</code></pre>
    <p>
     可能输出：
    </p>
    <pre><code>ID# ATTRIBUTE_NAME          VALUE WORST THRESH TYPE      UPDATED  WHEN_FAILED RAW_VALUE
  5  Reallocated_Sector_Ct   10    10    36    Pre-fail  Always   FAILING_NOW  100
  9  Power_On_Hours         30000  100   0     Old_age   Always   -           30000
194  Temperature_Celsius    35     50    0     Old_age   Always   -           35
</code></pre>
    <p>
     <strong>
      解释
     </strong>
     ：
    </p>
    <ul>
     <li>
      <code>
       Reallocated_Sector_Ct
      </code>
      （重映射扇区数）👉
      <strong>
       数值大于 0 说明硬盘有坏道
      </strong>
      ，100 说明已经有 100 个坏块。
     </li>
     <li>
      <code>
       Power_On_Hours
      </code>
      （开机时间）👉
      <strong>
       硬盘运行时间
      </strong>
      ，30000 小时（≈3.4 年）。
     </li>
     <li>
      <code>
       Temperature_Celsius
      </code>
      （温度）👉
      <strong>
       硬盘温度
      </strong>
      ，35℃（正常）。
     </li>
    </ul>
    <p>
     ✅
     <strong>
      结论
     </strong>
     ：
    </p>
    <ul>
     <li>
      <strong>
       如果
       <code>
        Reallocated_Sector_Ct
       </code>
       有值，说明硬盘有坏道，建议更换硬盘！
      </strong>
     </li>
     <li>
      <strong>
       如果
       <code>
        Power_On_Hours
       </code>
       太高（&gt;40,000 小时），说明硬盘已经很老，容易出问题。
      </strong>
     </li>
     <li>
      <strong>
       如果温度高于 50℃，可能需要改善散热。
      </strong>
     </li>
    </ul>
    <p>
    </p>
    <p>
     <strong>
      解释
     </strong>
     ：
    </p>
    <ul>
     <li>
      <code>
       Reallocated_Sector_Ct
      </code>
      （重映射扇区数）👉
      <strong>
       数值大于 0 说明硬盘有坏道
      </strong>
      ，100 说明已经有 100 个坏块。
     </li>
     <li>
      <code>
       Power_On_Hours
      </code>
      （开机时间）👉
      <strong>
       硬盘运行时间
      </strong>
      ，30000 小时（≈3.4 年）。
     </li>
     <li>
      <code>
       Temperature_Celsius
      </code>
      （温度）👉
      <strong>
       硬盘温度
      </strong>
      ，35℃（正常）。
     </li>
    </ul>
    <p>
     ✅
     <strong>
      结论
     </strong>
     ：
    </p>
    <ul>
     <li>
      <strong>
       如果
       <code>
        Reallocated_Sector_Ct
       </code>
       有值，说明硬盘有坏道，建议更换硬盘！
      </strong>
     </li>
     <li>
      <strong>
       如果
       <code>
        Power_On_Hours
       </code>
       太高（&gt;40,000 小时），说明硬盘已经很老，容易出问题。
      </strong>
     </li>
     <li>
      <strong>
       如果温度高于 50℃，可能需要改善散热。
      </strong>
     </li>
    </ul>
    <p>
    </p>
    <h4>
     <strong>
      总结
     </strong>
    </h4>
    <table>
     <thead>
      <tr>
       <th>
        命令
       </th>
       <th>
        作用
       </th>
       <th>
        主要关注点
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        `dmesg
       </td>
       <td>
        grep -i error`
       </td>
       <td>
        查系统日志，检查硬件错误
       </td>
      </tr>
      <tr>
       <td>
        <code>
         smartctl -a /dev/sda
        </code>
       </td>
       <td>
        查询硬盘健康状况
       </td>
       <td>
        <code>
         Reallocated_Sector_Ct
        </code>
        、
        <code>
         Power_On_Hours
        </code>
        、
        <code>
         Temperature_Celsius
        </code>
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     💡
     <strong>
      如果
      <code>
       dmesg
      </code>
      发现 I/O 错误，或者
      <code>
       smartctl
      </code>
      发现坏道，说明硬盘可能要坏了，需要尽快备份数据！
     </strong>
     🚨
    </p>
    <p>
    </p>
    <hr/>
    <h4>
     🔧
     <strong>
      侦探工具箱（常用命令）
     </strong>
    </h4>
    <table>
     <thead>
      <tr>
       <th>
        工具
       </th>
       <th>
        用途
       </th>
       <th>
        生活比喻
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        <code>
         strace
        </code>
       </td>
       <td>
        追踪程序行为
       </td>
       <td>
        给嫌疑人戴定位器
       </td>
      </tr>
      <tr>
       <td>
        <code>
         nc
        </code>
        /
        <code>
         telnet
        </code>
       </td>
       <td>
        测试网络端口
       </td>
       <td>
        检查电话线路是否畅通
       </td>
      </tr>
      <tr>
       <td>
        <code>
         df -h
        </code>
       </td>
       <td>
        查看磁盘空间
       </td>
       <td>
        检查仓库是否爆满
       </td>
      </tr>
      <tr>
       <td>
        <code>
         ping
        </code>
       </td>
       <td>
        测试网络连通性
       </td>
       <td>
        测试对讲机信号
       </td>
      </tr>
      <tr>
       <td>
        <code>
         lsof
        </code>
       </td>
       <td>
        查看文件占用情况
       </td>
       <td>
        查谁在占用保险箱
       </td>
      </tr>
     </tbody>
    </table>
    <hr/>
    <h4>
     🌰
     <strong>
      经典案件侦破
     </strong>
    </h4>
    <p>
     <strong>
      案件：网站突然无法访问
     </strong>
    </p>
    <ol>
     <li>
      <p>
       <strong>
        初步勘查
       </strong>
       ：
      </p>
      <pre><code>systemctl status nginx  # 发现服务异常停止</code></pre>
     </li>
     <li>
      <p>
       <strong>
        调取监控
       </strong>
       ：
      </p>
      <pre><code>journalctl -u nginx --since "10 minutes ago"  # 发现端口冲突</code></pre>
      <pre></pre>
     </li>
     <li>
      <p>
       <strong>
        锁定嫌犯
       </strong>
       ：
      </p>
      <pre><code>ss -tulnp | grep :80  # 发现Apache占用了80端口</code></pre>
      <pre></pre>
     </li>
     <li>
      <p>
       <strong>
        解决问题
       </strong>
       ：
      </p>
      <pre><code>sudo systemctl stop httpd  # 停用Apache
sudo systemctl start nginx # 启动Nginx</code></pre>
      <pre></pre>
     </li>
    </ol>
    <hr/>
    <h4>
     ⚠️
     <strong>
      侦探守则（注意事项）
     </strong>
    </h4>
    <ol>
     <li>
      <p>
       <strong>
        保护现场
       </strong>
       ：遇到问题先别重启，保留现场证据
      </p>
     </li>
     <li>
      <p>
       <strong>
        逐项排查
       </strong>
       ：从简单到复杂（先检查网络→服务→配置）
      </p>
     </li>
     <li>
      <p>
       <strong>
        善用手册
       </strong>
       ：
       <code>
        man 命令
       </code>
       或
       <code>
        命令 --help
       </code>
       获取线索
      </p>
     </li>
     <li>
      <p>
       <strong>
        隔离测试
       </strong>
       ：最小化重现环境，避免干扰
      </p>
     </li>
    </ol>
    <hr/>
    <h4>
     💡
     <strong>
      破案技巧
     </strong>
    </h4>
    <ul>
     <li>
      <p>
       <strong>
        时间回溯
       </strong>
       ：
      </p>
      <pre><code>sudo grep "ERROR" /var/log/* -r --since "2023-10-01"</code></pre>
     </li>
     <li>
      <p>
       <strong>
        压力测试
       </strong>
       ：
      </p>
      <pre><code>stress --cpu 8 --timeout 60s  # 模拟高负载测试</code></pre>
     </li>
     <li>
      <p>
       <strong>
        快照还原
       </strong>
       ：
      </p>
      <pre><code>timeshift --restore  # 使用系统快照回到案发前</code></pre>
      <pre></pre>
     </li>
    </ul>
    <hr/>
    <p>
     <strong>
      总结：
     </strong>
     记住这个破案口诀：
    </p>
    <pre><code>一查状态二看报错，  
三验网络四测硬件，  
日志监控是金钥匙，  
隔离验证保平安。</code></pre>
    <pre></pre>
    <p>
     掌握这些技能，你就能成为Linux世界的"福尔摩斯"！ 🎩🔍
    </p>
    <h2 id="icmp" style="margin-left:.625rem; margin-right:0; text-align:start">
     <strong>
      <span style="color:var(--tw-prose-headings)">
       <span style="background-color:#ffffff">
        ICMP
       </span>
      </span>
     </strong>
    </h2>
    <p style="margin-left:.5rem; margin-right:0; text-align:start">
     <span style="color:#374151">
      <span style="background-color:#ffffff">
       Internet 控制消息协议 （ICMP） 是一种支持协议，主要由网络设备用于将更新或错误信息传达给其他设备。在 Linux 环境中排查网络问题时，ICMP 是一个关键方面。它可用于发送错误消息，例如，指示请求的服务不可用或无法访问主机或路由器。ICMP 还可用于中继查询消息。
      </span>
     </span>
    </p>
    <p style="margin-left:.5rem; margin-right:0; text-align:start">
     <span style="color:#374151">
      <span style="background-color:#ffffff">
       在 Linux 系统中，与 ICMP 相关的常见命令行工具包括 和 ，两者都用于诊断网络状态，通常是故障排除工作的一部分。
       <code>
        ping
       </code>
       <code>
        traceroute
       </code>
      </span>
     </span>
    </p>
    <pre class="has" style="margin-left:0; margin-right:0; text-align:start"><code class="language-astro-code"># Use of ICMP via the ping command to send an echo request to a specific host
ping www.google.com</code></pre>
    <p style="margin-left:.5rem; margin-right:0; text-align:start">
     <span style="color:#374151">
      <span style="background-color:#ffffff">
       这个简单而有效的工具在任何 Linux 网络故障排除库中都不应错过。
      </span>
     </span>
    </p>
    <p>
     好的，我用「快递员送包裹」的比喻来解释 ICMP 协议和相关工具，让你像查快递一样排查网络问题：
    </p>
    <hr/>
    <h4>
     ​
     <strong>
      ICMP 协议 = 快递员之间的沟通纸条
     </strong>
    </h4>
    <p>
     想象你要寄快递（发送数据包），但中途可能出问题：
    </p>
    <ul>
     <li>
      🚚 ​
      <strong>
       正常流程
      </strong>
      ：快递员（数据包）顺利到达目的地
     </li>
     <li>
      ❌ ​
      <strong>
       异常情况
      </strong>
      ：地址写错、路断了、对方拒收
      <br/>
      这时快递员会用 ICMP 协议写「纸条」通知你问题在哪！
     </li>
    </ul>
    <hr/>
    <h4>
     ​
     <strong>
      ICMP 的两种核心功能
     </strong>
    </h4>
    <ol>
     <li>
      ​
      <strong>
       报错通知
      </strong>
      ​（类似快递退回单）
      <ul>
       <li>
        例子：
        <code>
         Destination Unreachable
        </code>
        （地址不存在）
       </li>
       <li>
        场景：访问的网站 IP 写错了，路由器返回这个错误
       </li>
      </ul>
     </li>
     <li>
      ​
      <strong>
       网络探测
      </strong>
      ​（类似物流跟踪）
      <ul>
       <li>
        例子：
        <code>
         Echo Request/Reply
        </code>
        （回声检测）
       </li>
       <li>
        场景：用
        <code>
         ping
        </code>
        测试是否能到达目标服务器
       </li>
      </ul>
     </li>
    </ol>
    <hr/>
    <h4>
     ​
     <strong>
      Linux 中的 ICMP 工具：快递追踪器
     </strong>
    </h4>
    <h5>
     ​
     <strong>
      1️⃣
      <code>
       ping
      </code>
      ：检查包裹是否能送达
     </strong>
    </h5>
    <pre><code>ping www.google.com  # 向谷歌服务器发送探测包</code></pre>
    <p>
     <strong>
      输出示例
     </strong>
     👇
    </p>
    <pre><code>64 bytes from 172.217.160.68: icmp_seq=1 ttl=54 time=25.3 ms
64 bytes from 172.217.160.68: icmp_seq=2 ttl=54 time=26.1 ms</code></pre>
    <p>
     <strong>
      结果解读
     </strong>
     ：
    </p>
    <ul>
     <li>
      <code>
       time=25.3 ms
      </code>
      → 网络延迟（越低越好）
     </li>
     <li>
      <code>
       ttl=54
      </code>
      → 数据包经过的路由器跳数（初始值通常64或128）
     </li>
     <li>
      如果显示
      <code>
       请求超时
      </code>
      ，说明网络不通或对方屏蔽了 ICMP
     </li>
    </ul>
    <p>
     <strong>
      适用场景
     </strong>
     ：
    </p>
    <ul>
     <li>
      快速测试网站/IP 是否能访问
     </li>
     <li>
      检查本地网络是否正常（先
      <code>
       ping 路由器IP
      </code>
      ）
     </li>
    </ul>
    <hr/>
    <h5>
     ​
     <strong>
      2️⃣
      <code>
       traceroute
      </code>
      ：跟踪包裹的运输路线
     </strong>
    </h5>
    <pre><code>traceroute www.baidu.com  # 显示数据包经过的所有路由器</code></pre>
    <p>
     <strong>
      输出示例
     </strong>
     👇
    </p>
    <pre><code> 1  192.168.1.1 (192.168.1.1)  2.123 ms  1.987 ms  1.845 ms  
 2  10.10.10.1 (10.10.10.1)  10.234 ms  10.123 ms  9.876 ms  
 3  202.96.128.86 (电信骨干网)  25.678 ms  26.123 ms  25.987 ms  
 ...  </code></pre>
    <p>
     <strong>
      原理
     </strong>
     ：
    </p>
    <ul>
     <li>
      故意发送 TTL（存活时间）递增的数据包
     </li>
     <li>
      每经过一个路由器，TTL 减1，当 TTL=0 时路由器返回 ICMP 超时消息
     </li>
     <li>
      通过这种方式「逼」路由器们暴露自己的 IP
     </li>
    </ul>
    <p>
     <strong>
      适用场景
     </strong>
     ：
    </p>
    <ul>
     <li>
      定位网络卡在哪一跳（比如第3跳延迟暴增）
     </li>
     <li>
      排查跨国网站访问慢的问题
     </li>
    </ul>
    <hr/>
    <h4>
     ​
     <strong>
      ICMP 的常见错误类型
     </strong>
    </h4>
    <table>
     <thead>
      <tr>
       <th>
        ICMP 错误类型
       </th>
       <th>
        比喻
       </th>
       <th>
        可能原因
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        <code>
         Destination Unreachable
        </code>
       </td>
       <td>
        快递员说「地址不存在」
       </td>
       <td>
        目标 IP 错误/防火墙拦截
       </td>
      </tr>
      <tr>
       <td>
        <code>
         Time Exceeded
        </code>
       </td>
       <td>
        快递员说「包裹运输超时」
       </td>
       <td>
        网络环路或 TTL 设置过小
       </td>
      </tr>
      <tr>
       <td>
        <code>
         Redirect
        </code>
       </td>
       <td>
        快递员说「换条更快的路走」
       </td>
       <td>
        路由器优化路径
       </td>
      </tr>
      <tr>
       <td>
        <code>
         Source Quench
        </code>
       </td>
       <td>
        快递员说「发慢点，我忙不过来了」
       </td>
       <td>
        网络拥堵（现已很少使用）
       </td>
      </tr>
     </tbody>
    </table>
    <hr/>
    <h4>
     ​
     <strong>
      实际故障排查案例
     </strong>
    </h4>
    <h5>
     ​
     <strong>
      问题
     </strong>
     ：电脑能上微信但打不开网页
    </h5>
    <p>
     <strong>
      排查步骤
     </strong>
     ：
    </p>
    <ol>
     <li>
      <code>
       ping 114.114.114.114
      </code>
      → 测试是否能连国内 DNS
      <ul>
       <li>
        如果通 → 说明网络连接正常
       </li>
       <li>
        不通 → 检查本地网络或网线
       </li>
      </ul>
     </li>
     <li>
      <code>
       ping www.baidu.com
      </code>
      → 测试域名解析
      <ul>
       <li>
        如果通 → 浏览器问题或 HTTPS 证书错误
       </li>
       <li>
        不通 → DNS 设置错误（修改
        <code>
         /etc/resolv.conf
        </code>
        ）
       </li>
      </ul>
     </li>
    </ol>
    <hr/>
    <h4>
     ​
     <strong>
      ICMP 的局限性
     </strong>
    </h4>
    <ul>
     <li>
      ​
      <strong>
       可能被防火墙屏蔽
      </strong>
      ：很多服务器关闭 ICMP 响应（防攻击）
     </li>
     <li>
      ​
      <strong>
       不代表端口可用
      </strong>
      ：即使能
      <code>
       ping
      </code>
      通，不代表 80（HTTP）端口开放
      <ul>
       <li>
        端口检测需用
        <code>
         telnet 目标IP 80
        </code>
        或
        <code>
         nc -zv 目标IP 80
        </code>
       </li>
      </ul>
     </li>
    </ul>
    <hr/>
    <h4>
     ​
     <strong>
      其他相关工具
     </strong>
    </h4>
    <ul>
     <li>
      ​**
      <code>
       mtr
      </code>
      **：
      <code>
       ping
      </code>
      +
      <code>
       traceroute
      </code>
      合体版，实时监控每跳的丢包率
      <pre><code>mtr www.github.com  # 动态显示网络路径质量</code></pre>
     </li>
     <li>
      ​**
      <code>
       nmap
      </code>
      **：检测目标是否屏蔽 ICMP
      <pre><code>nmap -sn 192.168.1.1  # 用多种方式探测主机是否在线</code></pre>
     </li>
    </ul>
    <hr/>
    <p>
     <strong>
      总结
     </strong>
     ：
     <br/>
     ICMP 就像网络世界的「信使系统」，
     <code>
      ping
     </code>
     是打电话问对方「在吗？」，
     <code>
      traceroute
     </code>
     是查通话经过哪些中转站。掌握这些工具，你就能像侦探一样顺藤摸瓜找到网络问题的源头！
    </p>
    <h2 id="ping" style="margin-left:.625rem; margin-right:0; text-align:start">
     <strong>
      <span style="color:var(--tw-prose-headings)">
       <span style="background-color:#ffffff">
        ping
       </span>
      </span>
     </strong>
    </h2>
    <p style="margin-left:.5rem; margin-right:0; text-align:start">
     <span style="color:#374151">
      <span style="background-color:#ffffff">
       <code>
        Ping
       </code>
       是在 Linux作系统上进行网络故障排除时的关键工具。该命令允许您检查主机与目标计算机（可以是另一台计算机、服务器或网络上的任何设备）之间的连接状态。此诊断工具将 ICMP（互联网控制消息协议）ECHO_REQUEST数据包发送到目标主机并侦听ECHO_RESPONSE返回，从而深入了解连接的运行状况和速度。
       <code>
        ping
       </code>
      </span>
     </span>
    </p>
    <pre class="has" style="margin-left:0; margin-right:0; text-align:start"><code class="language-astro-code">ping &lt;target IP or hostname&gt;</code></pre>
    <p style="margin-left:.5rem; margin-right:0; text-align:start">
     <span style="color:#374151">
      <span style="background-color:#ffffff">
       如果到达目标主机时遇到任何问题，可以识别此问题并提供反馈，使其成为排查网络问题的重要组件。在许多情况下，它是 Linux 用户在诊断网络连接问题时首先使用的工具。
       <code>
        ping
       </code>
      </span>
     </span>
    </p>
    <p style="margin-left:.5rem; margin-right:0; text-align:start">
    </p>
    <p>
     好的，用「打电话」和「回声探测」的比喻来解释
     <code>
      ping
     </code>
     ，保证你听完就能掌握精髓：
    </p>
    <hr/>
    <h4>
     ​**
     <code>
      ping
     </code>
     = 网络世界的「电话测试仪」​**
    </h4>
    <p>
     想象你想确认朋友手机是否开机，你会：
     <br/>
     1️⃣ ​
     <strong>
      打电话
     </strong>
     → 如果朋友接了，说明线路正常
     <br/>
     2️⃣ ​
     <strong>
      听嘟嘟声
     </strong>
     → 如果响铃后无人接听，可能对方关机
     <br/>
     3️⃣ ​
     <strong>
      数响铃时间
     </strong>
     → 判断距离远近（延迟高低）
    </p>
    <p>
     <code>
      ping
     </code>
     就是用 ICMP 协议做类似的事情，只不过探测对象是网络设备！
    </p>
    <hr/>
    <h4>
     ​
     <strong>
      基础用法：打一通网络电话
     </strong>
    </h4>
    <pre><code>ping www.baidu.com  # 给百度服务器打电话</code></pre>
    <p>
     <strong>
      输出示例
     </strong>
     👇
    </p>
    <pre><code>PING www.a.shifen.com (14.119.104.189) 56(84) bytes of data.
64 bytes from 14.119.104.189: icmp_seq=1 ttl=54 time=28.3 ms
64 bytes from 14.119.104.189: icmp_seq=2 ttl=54 time=27.9 ms
^C  # 按 Ctrl+C 停止
--- 统计报告 ---
2 packets transmitted, 2 received, 0% packet loss, time 1001ms
rtt min/avg/max/mdev = 27.934/28.114/28.295/0.180 ms</code></pre>
    <p>
     <strong>
      关键信息解读
     </strong>
     ：
    </p>
    <ul>
     <li>
      ​**
      <code>
       time=28.3 ms
      </code>
      ** → 延迟（越低网速越快，游戏玩家最关注这个）
     </li>
     <li>
      ​**
      <code>
       ttl=54
      </code>
      ** → 初始值通常 64（Linux）或 128（Windows），每经过一个路由器减1
      <ul>
       <li>
        如果看到
        <code>
         ttl=112
        </code>
        ，说明经过了 128-112=16 个路由器
       </li>
      </ul>
     </li>
     <li>
      ​**
      <code>
       0% packet loss
      </code>
      ** → 丢包率（&gt;5% 可能影响视频通话）
     </li>
    </ul>
    <hr/>
    <h4>
     ​
     <strong>
      常见场景与操作技巧
     </strong>
    </h4>
    <h5>
     ​
     <strong>
      场景1：快速测试网络通不通
     </strong>
    </h5>
    <pre><code>ping -c 4 114.114.114.114  # 只打4次电话就挂断</code></pre>
    <p>
     <strong>
      输出
     </strong>
     ：
    </p>
    <pre><code>--- 114.114.114.114 ping statistics ---
4 packets transmitted, 4 received, 0% packet loss  # 全通说明网络正常</code></pre>
    <h5>
     ​
     <strong>
      场景2：检测网络稳定性（持续监控）​
     </strong>
    </h5>
    <pre><code>ping -i 0.5 www.qq.com  # 每0.5秒打一次电话</code></pre>
    <p>
     <strong>
      用途
     </strong>
     ：
    </p>
    <ul>
     <li>
      玩游戏时检测网络是否波动
     </li>
     <li>
      按
      <code>
       Ctrl + \
      </code>
      强制退出无限循环
     </li>
    </ul>
    <h5>
     ​
     <strong>
      场景3：排查「能上微信但打不开网页」​
     </strong>
    </h5>
    <pre><code>ping 114.114.114.114     # 测试DNS服务器是否可达
ping www.baidu.com       # 测试域名解析是否正常</code></pre>
    <p>
     <strong>
      结论
     </strong>
     ：
    </p>
    <ul>
     <li>
      第一个通，第二个不通 → 可能是 DNS 问题（修改
      <code>
       /etc/resolv.conf
      </code>
      ）
     </li>
     <li>
      两个都不通 → 检查路由器或光猫
     </li>
    </ul>
    <hr/>
    <h4>
     ​
     <strong>
      常见错误与应对措施
     </strong>
    </h4>
    <h5>
     ​
     <strong>
      错误1：未知的主机（DNS解析失败）​
     </strong>
    </h5>
    <pre><code>ping: www.xxx.com: 未知的名称或服务</code></pre>
    <p>
     <strong>
      解决方案
     </strong>
     ：
    </p>
    <ol>
     <li>
      换用 IP 测试：
      <code>
       ping 8.8.8.8
      </code>
      （Google DNS）
     </li>
     <li>
      检查 DNS 设置：
      <code>
       cat /etc/resolv.conf
      </code>
     </li>
    </ol>
    <h5>
     ​
     <strong>
      错误2：请求超时（网络不通或屏蔽）​
     </strong>
    </h5>
    <pre><code>From 192.168.1.1 icmp_seq=1 Destination Host Unreachable</code></pre>
    <p>
     <strong>
      排查步骤
     </strong>
     ：
    </p>
    <ol>
     <li>
      <code>
       ping 路由器IP
      </code>
      （如 192.168.1.1） → 确认内网是否正常
     </li>
     <li>
      <code>
       ping 8.8.8.8
      </code>
      → 确认外网是否连通
     </li>
     <li>
      目标服务器可能禁用了 ICMP（比如某些云主机）
     </li>
    </ol>
    <h5>
     ​
     <strong>
      错误3：高延迟/高丢包
     </strong>
    </h5>
    <pre><code>time=350 ms  # 延迟高于 200ms 就影响视频会议
50% packet loss  # 丢包严重会导致卡顿</code></pre>
    <p>
     <strong>
      应对
     </strong>
     ：
    </p>
    <ul>
     <li>
      用
      <code>
       mtr 目标IP
      </code>
      检查哪一跳路由器有问题
     </li>
     <li>
      联系网络运营商报修
     </li>
    </ul>
    <hr/>
    <h4>
     ​
     <strong>
      高级技巧（参数大全）​
     </strong>
    </h4>
    <table>
     <thead>
      <tr>
       <th>
        参数
       </th>
       <th>
        命令示例
       </th>
       <th>
        作用
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        <code>
         -c
        </code>
       </td>
       <td>
        <code>
         ping -c 5 IP
        </code>
       </td>
       <td>
        指定发送次数
       </td>
      </tr>
      <tr>
       <td>
        <code>
         -i
        </code>
       </td>
       <td>
        <code>
         ping -i 0.1 IP
        </code>
       </td>
       <td>
        加快探测频率（默认1秒）
       </td>
      </tr>
      <tr>
       <td>
        <code>
         -s
        </code>
       </td>
       <td>
        <code>
         ping -s 1000 IP
        </code>
       </td>
       <td>
        加大数据包尺寸（测试大包传输）
       </td>
      </tr>
      <tr>
       <td>
        <code>
         -W
        </code>
       </td>
       <td>
        <code>
         ping -W 3 IP
        </code>
       </td>
       <td>
        超时时间设为3秒（默认10秒）
       </td>
      </tr>
      <tr>
       <td>
        <code>
         -q
        </code>
       </td>
       <td>
        <code>
         ping -q -c 10 IP
        </code>
       </td>
       <td>
        只显示统计结果（安静模式）
       </td>
      </tr>
     </tbody>
    </table>
    <hr/>
    <h4>
     ​
     <strong>
      总结：ping 的三大核心作用
     </strong>
    </h4>
    <ol>
     <li>
      ​
      <strong>
       网络连通性测试
      </strong>
      → 确认设备是否在线
     </li>
     <li>
      ​
      <strong>
       延迟与稳定性监测
      </strong>
      → 评估网络质量
     </li>
     <li>
      ​
      <strong>
       初步故障定位
      </strong>
      → 区分是内网问题还是外网问题
     </li>
    </ol>
    <p>
     <strong>
      排查网络问题的黄金口诀
     </strong>
     ：
    </p>
    <pre><code>一 ping 网关，二 ping DNS，三 ping 公网IP  
全都不通查网线，部分不通找路由！</code></pre>
    <h2 id="traceroute" style="margin-left:.625rem; margin-right:0; text-align:start">
     <strong>
      <span style="color:var(--tw-prose-headings)">
       <span style="background-color:#ffffff">
        路由跟踪
       </span>
      </span>
     </strong>
    </h2>
    <p style="margin-left:.5rem; margin-right:0; text-align:start">
     <span style="color:#374151">
      <span style="background-color:#ffffff">
       Traceroute 是一种网络诊断工具，在 Linux 系统中广泛用于故障排除。它旨在显示数据包从运行 traceroute 的系统到指定目标系统或网站的路径。它用于识别路由问题、提供延迟测量，并在数据包通过 Internet 时弄清楚网络结构。
      </span>
     </span>
    </p>
    <p style="margin-left:.5rem; margin-right:0; text-align:start">
     <span style="color:#374151">
      <span style="background-color:#ffffff">
       沿路由的每次跳转都会测试多次（默认值为 3，但可以更改），并显示每个数据包的往返时间。如果某些数据包无法到达目的地，traceroute 可以帮助诊断故障发生的位置。
      </span>
     </span>
    </p>
    <p style="margin-left:.5rem; margin-right:0; text-align:start">
     <span style="color:#374151">
      <span style="background-color:#ffffff">
       在 Linux 中跟踪路由可以通过执行命令来实现，该命令允许您发现 Internet 协议数据包在到达目的地时遵循的路由。
       <code>
        traceroute
       </code>
      </span>
     </span>
    </p>
    <pre class="has" style="margin-left:0; margin-right:0; text-align:start"><code class="language-astro-code">$ traceroute www.example.com</code></pre>
    <p>
     我来用快递送货的例子帮你理解 traceroute 的工作原理：
    </p>
    <p>
     假设你从北京寄快递到上海的朋友家，但快递中途要经过多个中转站：
    </p>
    <ol>
     <li>
      <p>
       你寄出快递时在包裹上标记"有效期=1天"
      </p>
     </li>
     <li>
      <p>
       第一个中转站（天津）收到后发现有效期只剩0天，就会：
      </p>
      <ul>
       <li>
        <p>
         销毁包裹
        </p>
       </li>
       <li>
        <p>
         给你发回一条短信："包裹在天津超时了"
        </p>
       </li>
      </ul>
     </li>
     <li>
      <p>
       你记录下天津站的响应时间（比如0.5ms）
      </p>
     </li>
     <li>
      <p>
       接着你重新寄出包裹，标记"有效期=2天"
      </p>
     </li>
     <li>
      <p>
       这次包裹能到达第二个中转站（济南），同样会收到超时通知
      </p>
     </li>
     <li>
      <p>
       重复这个过程直到包裹到达上海朋友家
      </p>
     </li>
    </ol>
    <p>
     📊 执行
     <code>
      traceroute www.example.com
     </code>
     的输出示例：
    </p>
    <p>
     复制
    </p>
    <pre>1  192.168.1.1 (路由器)  1.234 ms  1.456 ms  1.567 ms
2  61.128.192.1 (广州电信)  5.678 ms  5.712 ms  5.801 ms
3  202.97.12.34 (骨干网节点)  12.345 ms  12.401 ms  12.512 ms
...
10  203.0.113.5 (目标服务器)  38.901 ms  39.012 ms  39.123 ms</pre>
    <p>
     🔑 关键点解析：
    </p>
    <ul>
     <li>
      <p>
       每行代表一个网络节点（路由器/服务器）
      </p>
     </li>
     <li>
      <p>
       三个时间值对应三次探测的往返延迟
      </p>
     </li>
     <li>
      <p>
       星号(*) 表示该次探测未得到响应
      </p>
     </li>
     <li>
      <p>
       延迟突增的位置往往暗示网络瓶颈
      </p>
     </li>
    </ul>
    <p>
     💡 实用技巧：
    </p>
    <ol>
     <li>
      <p>
       用
       <code>
        -I
       </code>
       参数使用ICMP协议（类似ping）
       <br/>
       <code>
        traceroute -I baidu.com
       </code>
      </p>
     </li>
     <li>
      <p>
       遇到星号时尝试增加探测次数：
       <br/>
       <code>
        traceroute -q 5 github.com
       </code>
      </p>
     </li>
     <li>
      <p>
       限制最大跳数（适合内网排查）：
       <br/>
       <code>
        traceroute -m 10 192.168.0.100
       </code>
      </p>
     </li>
    </ol>
    <p>
     ⚠️ 注意：某些网络设备会屏蔽traceroute探测，这时候会出现连续星号，并不一定代表网络故障。
    </p>
    <h2 id="netstat" style="margin-left:.625rem; margin-right:0; text-align:start">
     <strong>
      <span style="color:var(--tw-prose-headings)">
       <span style="background-color:#ffffff">
        Netstat
       </span>
      </span>
     </strong>
    </h2>
    <p style="margin-left:.5rem; margin-right:0; text-align:start">
     <span style="color:#374151">
      <span style="background-color:#ffffff">
       Netstat 是 network statistics 的缩写，是 Linux 系统中用于网络故障排除和性能测量的内置命令行工具。它提供协议的统计信息、开放端口列表、路由表信息和其他重要的网络详细信息。管理员和开发人员使用 netstat 来检查网络问题并了解系统如何与其他系统通信。
      </span>
     </span>
    </p>
    <p style="margin-left:.5rem; margin-right:0; text-align:start">
     <span style="color:#374151">
      <span style="background-color:#ffffff">
       由于它支持各种命令行选项，它的功能得到了扩展，这些选项可以单独或组合使用来微调输出。这些可能包括显示数字地址而不是名称 （）、持续监视 （） 或发现特定协议上的连接 （， ）。
       <code>
        -n
       </code>
       <code>
        -c
       </code>
       <code>
        -t
       </code>
       <code>
        -u
       </code>
      </span>
     </span>
    </p>
    <p style="margin-left:.5rem; margin-right:0; text-align:start">
     <span style="color:#374151">
      <span style="background-color:#ffffff">
       以下是 netstat 通常如何使用的简短片段：
      </span>
     </span>
    </p>
    <pre class="has" style="margin-left:0; margin-right:0; text-align:start"><code class="language-astro-code"># List all connections with numerical values.
netstat -n</code></pre>
    <p>
     好的，用「电话总机控制台」来比喻
     <code>
      netstat
     </code>
     ，让你像查电话线路一样掌握网络连接状态：
    </p>
    <hr/>
    <h4>
     ​**
     <code>
      netstat
     </code>
     = 网络连接的电话交换机面板**
    </h4>
    <p>
     想象你管理一个公司的电话系统，需要知道：
    </p>
    <ol>
     <li>
      ​
      <strong>
       哪些分机正在通话
      </strong>
      → 查看活动连接
     </li>
     <li>
      ​
      <strong>
       哪些分机等待来电
      </strong>
      → 查看监听端口
     </li>
     <li>
      ​
      <strong>
       电话线路路由表
      </strong>
      → 查看网络路由配置
     </li>
    </ol>
    <p>
     <code>
      netstat
     </code>
     就是这样一个实时显示所有「电话线路」（网络连接）状态的控制面板！
    </p>
    <hr/>
    <h4>
     ​
     <strong>
      常用场景速查手册
     </strong>
    </h4>
    <h5>
     ​
     <strong>
      场景1：查看所有正在通话的线路（活动连接）​
     </strong>
    </h5>
    <pre><code>netstat -natp  # 组合参数大法</code></pre>
    <p>
     <strong>
      参数解释
     </strong>
     ：
    </p>
    <ul>
     <li>
      <code>
       -n
      </code>
      ：显示数字地址（不解析域名）
     </li>
     <li>
      <code>
       -a
      </code>
      ：显示所有连接（包括监听中的）
     </li>
     <li>
      <code>
       -t
      </code>
      ：TCP协议
     </li>
     <li>
      <code>
       -p
      </code>
      ：显示进程PID/名称
     </li>
    </ul>
    <p>
     <strong>
      输出示例
     </strong>
     👇
    </p>
    <pre><code>Proto Recv-Q Send-Q Local Address    Foreign Address     State       PID/Program name  
tcp        0      0 192.168.1.100:22 110.242.68.3:56789   ESTABLISHED 1234/sshd: user  
tcp6       0      0 :::80            :::*                LISTEN      5678/nginx</code></pre>
    <p>
     <strong>
      关键列解读
     </strong>
     ：
    </p>
    <ul>
     <li>
      <code>
       Local Address
      </code>
      ：本机IP和端口
     </li>
     <li>
      <code>
       Foreign Address
      </code>
      ：对方IP和端口
     </li>
     <li>
      <code>
       State
      </code>
      ：连接状态（ESTABLISHED=通话中，LISTEN=待机中）
     </li>
     <li>
      <code>
       PID/Program
      </code>
      ：哪个程序在使用这个连接
     </li>
    </ul>
    <hr/>
    <h5>
     ​
     <strong>
      场景2：查谁在偷听电话（监听中的端口）​
     </strong>
    </h5>
    <pre><code>netstat -tulnp  # 组合拳出击</code></pre>
    <p>
     <strong>
      参数解释
     </strong>
     ：
    </p>
    <ul>
     <li>
      <code>
       -t
      </code>
      ：TCP协议
     </li>
     <li>
      <code>
       -u
      </code>
      ：UDP协议
     </li>
     <li>
      <code>
       -l
      </code>
      ：仅显示监听中的端口
     </li>
     <li>
      <code>
       -p
      </code>
      ：显示进程信息
     </li>
    </ul>
    <p>
     <strong>
      输出示例
     </strong>
     👇
    </p>
    <pre><code>Proto Recv-Q Send-Q Local Address   Foreign Address    State    PID/Program  
tcp        0      0 0.0.0.0:22      0.0.0.0:*          LISTEN   1234/sshd  
tcp6       0      0 :::80           :::*               LISTEN   5678/nginx  
udp        0      0 0.0.0.0:68      0.0.0.0:*                  7890/dhclient</code></pre>
    <p>
     <strong>
      典型应用
     </strong>
     ：
    </p>
    <ul>
     <li>
      确认Web服务器是否在监听80端口
     </li>
     <li>
      检查是否有可疑后门程序在监听端口
     </li>
    </ul>
    <hr/>
    <h5>
     ​
     <strong>
      场景3：查电话线路统计（网络流量统计）​
     </strong>
    </h5>
    <pre><code>netstat -s  # 查看协议统计信息</code></pre>
    <p>
     <strong>
      输出重点
     </strong>
     ：
    </p>
    <pre><code>Tcp:
    3245 active connections openings  
    12 failed connection attempts  
    892 segments retransmitted  

Ip:
    25675 total packets received  
    0 invalid addresses  </code></pre>
    <p>
     <strong>
      用途
     </strong>
     ：
    </p>
    <ul>
     <li>
      诊断TCP重传率过高（网络质量差）
     </li>
     <li>
      检查UDP丢包情况
     </li>
    </ul>
    <hr/>
    <h4>
     ​
     <strong>
      实用排查案例
     </strong>
    </h4>
    <h5>
     ​
     <strong>
      问题1：端口被占用导致服务启动失败
     </strong>
    </h5>
    <p>
     <strong>
      步骤
     </strong>
     ：
    </p>
    <pre><code># 1. 查哪个进程占用了80端口
netstat -tulnp | grep :80

# 2. 根据PID结束进程
kill -9 5678</code></pre>
    <h5>
     ​
     <strong>
      问题2：怀疑服务器被植入后门
     </strong>
    </h5>
    <p>
     <strong>
      步骤
     </strong>
     ：
    </p>
    <pre><code>netstat -natp | grep ESTAB  
# 重点检查Foreign Address是否有陌生IP连接</code></pre>
    <hr/>
    <h4>
     ​
     <strong>
      参数对照表（新手必存）​
     </strong>
    </h4>
    <table>
     <thead>
      <tr>
       <th>
        参数
       </th>
       <th>
        作用
       </th>
       <th>
        常用组合
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        <code>
         -n
        </code>
       </td>
       <td>
        禁用域名解析（显示IP）
       </td>
       <td>
        <code>
         -nat
        </code>
        /
        <code>
         -nau
        </code>
       </td>
      </tr>
      <tr>
       <td>
        <code>
         -a
        </code>
       </td>
       <td>
        显示所有连接
       </td>
       <td>
        <code>
         -a
        </code>
       </td>
      </tr>
      <tr>
       <td>
        <code>
         -t
        </code>
       </td>
       <td>
        仅显示TCP协议
       </td>
       <td>
        <code>
         -tuln
        </code>
       </td>
      </tr>
      <tr>
       <td>
        <code>
         -u
        </code>
       </td>
       <td>
        仅显示UDP协议
       </td>
       <td>
        <code>
         -tuln
        </code>
       </td>
      </tr>
      <tr>
       <td>
        <code>
         -l
        </code>
       </td>
       <td>
        仅显示监听中的端口
       </td>
       <td>
        <code>
         -tuln
        </code>
       </td>
      </tr>
      <tr>
       <td>
        <code>
         -p
        </code>
       </td>
       <td>
        显示进程信息
       </td>
       <td>
        <code>
         -p
        </code>
       </td>
      </tr>
      <tr>
       <td>
        <code>
         -s
        </code>
       </td>
       <td>
        统计各协议数据量
       </td>
       <td>
        <code>
         -s
        </code>
       </td>
      </tr>
      <tr>
       <td>
        <code>
         -r
        </code>
       </td>
       <td>
        显示路由表
       </td>
       <td>
        <code>
         -r
        </code>
       </td>
      </tr>
     </tbody>
    </table>
    <hr/>
    <h4>
     ​
     <strong>
      升级替代工具：
      <code>
       ss
      </code>
      命令
     </strong>
    </h4>
    <p>
     <strong>
      特点
     </strong>
     ：更快更现代（逐渐替代
     <code>
      netstat
     </code>
     ）
     <br/>
     <strong>
      常用命令
     </strong>
     ：
    </p>
    <pre><code>ss -tunlp  # 参数含义与netstat类似</code></pre>
    <hr/>
    <h4>
     ​
     <strong>
      总结口诀
     </strong>
    </h4>
    <pre><code>查连接用 netstat，参数组合别搞差  
-n 显示纯数字，-a 所有连接查  
-t TCP u是UDP，-l 监听要记牢  
-p 显示进程号，-s 统计顶呱呱  
遇到问题别慌张，先查端口后杀它！</code></pre>
    <div style="text-align:start">
     <div id="topic-content">
      <h2 id="packet-analysis" style="margin-left:.625rem; margin-right:0">
       <span style="color:var(--tw-prose-body)">
        <span style="background-color:#ffffff">
         <strong>
          <span style="color:var(--tw-prose-headings)">
           数据包分析
          </span>
         </strong>
        </span>
       </span>
      </h2>
      <p style="margin-left:.5rem; margin-right:0">
       <span style="color:var(--tw-prose-body)">
        <span style="background-color:#ffffff">
         在 Linux 系统管理和网络故障排除领域，数据包分析是一项关键技能。它涉及使用工具和技术来捕获和分析网络流量。通过检查通过网络发送和接收的数据，系统和网络管理员可以识别和排查性能不佳、连接问题和安全漏洞等问题。
        </span>
       </span>
      </p>
      <p style="margin-left:.5rem; margin-right:0">
       <span style="color:var(--tw-prose-body)">
        <span style="background-color:#ffffff">
         tcpdump 和 Wireshark 等工具是实现此目的的常见实用程序。它们显示数据包级别的详细信息，以提供网络活动的完整图片。这些对于网络诊断和调试与网络协议相关的问题特别有用。
        </span>
       </span>
      </p>
      <p style="margin-left:.5rem; margin-right:0">
       <span style="color:var(--tw-prose-body)">
        <span style="background-color:#ffffff">
         在 Linux 系统命令中使用 tcpdump 捕获数据包的基本示例可能如下所示：
        </span>
       </span>
      </p>
      <pre class="has" style="margin-left:0; margin-right:0"><code class="language-astro-code">sudo tcpdump -i eth0</code></pre>
      <p>
       <code>
        eth0
       </code>
       是 Linux 系统中 ​
       <strong>
        第一个以太网网络接口的名称
       </strong>
       ，可以理解为你的电脑或服务器上的第一个物理网卡（或虚拟网卡）。
       <br/>
       它的命名规则是：​**"eth"（Ethernet 的缩写）+ 数字编号**，比如
       <code>
        eth0
       </code>
       、
       <code>
        eth1
       </code>
       分别代表第一个、第二个以太网接口。
      </p>
      <hr/>
      <h4>
       ​
       <strong>
        通俗解释
       </strong>
      </h4>
      <p>
       想象你的电脑有多个「网线插口」：
      </p>
      <ul>
       <li>
        <code>
         eth0
        </code>
        → 第一个插口（比如连接路由器的网线）
       </li>
       <li>
        <code>
         eth1
        </code>
        → 第二个插口（如果有额外的网卡）
       </li>
       <li>
        <code>
         wlan0
        </code>
        → 无线网卡（Wi-Fi）
       </li>
       <li>
        <code>
         lo
        </code>
        → 虚拟的「回环接口」（用于本机内部通信）
       </li>
      </ul>
      <hr/>
      <h4>
       ​
       <strong>
        命令中的用途
       </strong>
      </h4>
      <p>
       在
       <code>
        sudo tcpdump -i eth0 host 192.168.1.100
       </code>
       中：
      </p>
      <ul>
       <li>
        <code>
         -i eth0
        </code>
        表示 ​
        <strong>
         监听（抓包）通过
         <code>
          eth0
         </code>
         接口的网络流量
        </strong>
       </li>
       <li>
        如果不指定
        <code>
         -i
        </code>
        ，
        <code>
         tcpdump
        </code>
        会默认监听第一个非回环接口（通常是
        <code>
         eth0
        </code>
        ）
       </li>
      </ul>
      <hr/>
      <h4>
       ​
       <strong>
        如何查看所有网络接口？
       </strong>
      </h4>
      <pre><code>ip link show  # 查看所有网络接口的名称和状态</code></pre>
      <p>
       输出类似👇：
      </p>
      <pre><code>1: lo: &lt;LOOPBACK,UP&gt; ...   # 回环接口（虚拟）
2: eth0: &lt;BROADCAST,UP&gt; ... # 第一个以太网接口（物理网卡）
3: wlan0: &lt;BROADCAST,UP&gt; ... # 无线网卡</code></pre>
      <hr/>
      <h4>
       ​
       <strong>
        常见接口类型
       </strong>
      </h4>
      <table>
       <thead>
        <tr>
         <th>
          接口名称
         </th>
         <th>
          用途
         </th>
         <th>
          示例场景
         </th>
        </tr>
       </thead>
       <tbody>
        <tr>
         <td>
          <code>
           eth0
          </code>
         </td>
         <td>
          物理有线网卡
         </td>
         <td>
          连接路由器的网线
         </td>
        </tr>
        <tr>
         <td>
          <code>
           wlan0
          </code>
         </td>
         <td>
          无线网卡
         </td>
         <td>
          连接 Wi-Fi
         </td>
        </tr>
        <tr>
         <td>
          <code>
           lo
          </code>
         </td>
         <td>
          本地回环接口（虚拟）
         </td>
         <td>
          本机内部服务通信（如访问 127.0.0.1）
         </td>
        </tr>
        <tr>
         <td>
          <code>
           docker0
          </code>
         </td>
         <td>
          Docker 创建的虚拟接口
         </td>
         <td>
          容器网络通信
         </td>
        </tr>
        <tr>
         <td>
          <code>
           tun0
          </code>
         </td>
         <td>
          VPN 隧道接口
         </td>
         <td>
          连接 OpenVPN 时使用
         </td>
        </tr>
       </tbody>
      </table>
      <hr/>
      <h4>
       ​
       <strong>
        为什么需要指定
        <code>
         eth0
        </code>
        ？
       </strong>
      </h4>
      <ul>
       <li>
        如果服务器有多个网卡（比如
        <code>
         eth0
        </code>
        接内网，
        <code>
         eth1
        </code>
        接外网），指定接口可以精准抓包
       </li>
       <li>
        避免抓取无关流量（比如
        <code>
         lo
        </code>
        回环接口的本地通信）
       </li>
      </ul>
      <hr/>
      <h4>
       ​
       <strong>
        扩展知识：现代 Linux 的接口命名
       </strong>
      </h4>
      <p>
       新版本 Linux 可能使用 ​
       <strong>
        基于固件/拓扑的命名规则
       </strong>
       ​（如
       <code>
        enp0s3
       </code>
       、
       <code>
        ens33
       </code>
       ），但原理与
       <code>
        eth0
       </code>
       相同。
       <br/>
       可以通过以下命令查看：
      </p>
      <pre><code>ls /sys/class/net  # 列出所有网络接口名称</code></pre>
      <p style="margin-left:.5rem; margin-right:0">
       <span style="color:var(--tw-prose-body)">
        <span style="background-color:#ffffff">
         此命令捕获并显示通过网络接口传输或接收的数据包。
         <code>
          eth0
         </code>
        </span>
       </span>
      </p>
      <p>
       用物流中心监控系统来比喻数据包分析的工作原理：
      </p>
      <p>
       <strong>
        场景
       </strong>
       ：假设你管理一个大型国际物流中心，所有包裹都要经过分拣扫描仪
      </p>
      <h4>
       📦 核心工具解析
      </h4>
      <h5>
       1.
       <strong>
        tcpdump
       </strong>
       - 实时包裹扫描仪
      </h5>
      <p>
      </p>
      <pre><code>sudo tcpdump -i eth0 host 192.168.1.100</code></pre>
      <ul>
       <li>
        <p>
         <strong>
          功能
         </strong>
         ：就像在传送带上安装的X光扫描仪
        </p>
       </li>
       <li>
        <p>
         <strong>
          操作员视角
         </strong>
         ：
        </p>
        <ul>
         <li>
          <p>
           看到所有经过eth0传送带的包裹（数据包）
          </p>
         </li>
         <li>
          <p>
           只关注发往/来自192.168.1.100货架的包裹
          </p>
         </li>
         <li>
          <p>
           实时显示包裹标签信息（源/目的IP、端口等）
          </p>
         </li>
        </ul>
       </li>
      </ul>
      <h5>
       2.
       <strong>
        Wireshark
       </strong>
       - 包裹分析实验室
      </h5>
      <p>
      </p>
      <pre><code>tshark -r capture.pcap  # 命令行版分析工具</code></pre>
      <ul>
       <li>
        <p>
         <strong>
          功能
         </strong>
         ：将扫描记录带回实验室深度检测
        </p>
       </li>
       <li>
        <p>
         <strong>
          技术员视角
         </strong>
         ：
        </p>
        <ul>
         <li>
          <p>
           拆解包裹外层包装（解码协议头）
          </p>
         </li>
         <li>
          <p>
           化验包裹内容物（查看Payload数据）
          </p>
         </li>
         <li>
          <p>
           发现异常包裹（恶意流量分析）
          </p>
         </li>
        </ul>
       </li>
      </ul>
      <h4>
       🛠️ 实战案例演示
      </h4>
      <p>
       <strong>
        需求
       </strong>
       ：排查网站访问缓慢问题
      </p>
      <p>
       <strong>
        步骤
       </strong>
       ：
      </p>
      <ol>
       <li>
        <p>
         启动物流监控（开始抓包）
        </p>
        <pre><code>sudo tcpdump -i eth0 port 80 -w web.pcap</code></pre>
       </li>
       <li>
        <p>
         复现问题（访问目标网站）
        </p>
       </li>
       <li>
        <p>
         停止抓包后分析：
        </p>
        <pre><code>wireshark web.pcap  # 图形化分析</code></pre>
       </li>
      </ol>
      <p>
       <strong>
        关键分析点
       </strong>
       ：
      </p>
      <ul>
       <li>
        <p>
         查找红色标记的破损包裹（TCP重传包）
        </p>
       </li>
       <li>
        <p>
         检查包裹到达时间间隔（网络延迟）
        </p>
       </li>
       <li>
        <p>
         识别异常运输路线（错误路由）
        </p>
       </li>
      </ul>
      <h4>
       📋 数据包标签解读示例
      </h4>
      <p>
      </p>
      <pre><code>15:03:22.123456 IP 192.168.1.5.54321 &gt; 203.0.113.10.80: Flags [P.], seq 1:100, ack 1, win 256, length 99</code></pre>
      <ul>
       <li>
        <p>
         <strong>
          时间戳
         </strong>
         ：15点03分22秒
        </p>
       </li>
       <li>
        <p>
         <strong>
          包裹流向
         </strong>
         ：从192.168.1.5的54321端口 -&gt; 203.0.113.10的80端口
        </p>
       </li>
       <li>
        <p>
         <strong>
          包裹状态
         </strong>
         ：重要数据（PUSH标志）
        </p>
       </li>
       <li>
        <p>
         <strong>
          物流编号
         </strong>
         ：包裹序列号1-100，已确认收到1号包裹
        </p>
       </li>
       <li>
        <p>
         <strong>
          包裹尺寸
         </strong>
         ：99字节
        </p>
       </li>
      </ul>
      <h4>
       🔧 实用技巧锦囊
      </h4>
      <ol>
       <li>
        <p>
         <strong>
          精准过滤
         </strong>
         ：
        </p>
        <pre><code>tcpdump 'tcp port 443 and (host 1.1.1.1 or host 8.8.8.8)'
​host 1.1.1.1：目标或来源是 1.1.1.1（Cloudflare 的 DNS 服务器）。
​host 8.8.8.8：目标或来源是 8.8.8.8（Google 的 DNS 服务器）。
​or：逻辑「或」，满足其中一个 IP 即可。
​and：逻辑「与」，同时满足 TCP 443 端口和 IP 条件。
扩展：常见协议与端口对照
端口	协议	用途
443	TCP	HTTPS 加密网页
53	UDP/TCP	DNS 域名解析
80	TCP	HTTP 明文网页
22	TCP	SSH 安全登录
​示例输出
15:30:22.123 IP 192.168.1.100.54321 &gt; 1.1.1.1.443: Flags [S], seq 123456, win 64240
15:30:22.456 IP 1.1.1.1.443 &gt; 192.168.1.100.54321: Flags [S.], seq 654321, ack 123457, win 65535 ​
Flags [S]：TCP 握手的第一步（SYN）。​Flags [S.]：SYN-ACK 响应，表示服务端同意建立连接。
</code></pre>
       </li>
       <li>
        <p>
         <strong>
          抓取内容
         </strong>
         （慎用）：
        </p>
        <h4>
         <strong>
          命令作用
         </strong>
        </h4>
        <p>
         <code>
          tcpdump -A -s0 port 21
         </code>
         就像在快递分拣中心 ​
         <strong>
          拆开所有发往 21 号货架（FTP 端口）的包裹，并直接查看里面的纸质文件内容
         </strong>
         。
         <br/>
         由于 FTP 协议默认不加密，此命令可捕获 ​
         <strong>
          用户名、密码、传输的文件名
         </strong>
         等敏感信息。
        </p>
        <hr/>
        <h4>
         ​
         <strong>
          参数拆解
         </strong>
        </h4>
        <table>
         <thead>
          <tr>
           <th>
            参数
           </th>
           <th>
            作用
           </th>
           <th>
            类比解释
           </th>
          </tr>
         </thead>
         <tbody>
          <tr>
           <td>
            <code>
             -A
            </code>
           </td>
           <td>
            以 ASCII 格式显示数据包内容
           </td>
           <td>
            把包裹里的文件转成可读的文字
           </td>
          </tr>
          <tr>
           <td>
            <code>
             -s0
            </code>
           </td>
           <td>
            抓取完整数据包（不截断）
           </td>
           <td>
            拆开整个包裹，不遗漏任何内容
           </td>
          </tr>
          <tr>
           <td>
            <code>
             port 21
            </code>
           </td>
           <td>
            只监控 FTP 控制端口流量
           </td>
           <td>
            只检查 21 号货架的包裹
           </td>
          </tr>
         </tbody>
        </table>
        <hr/>
        <h4>
         ​
         <strong>
          典型输出示例
         </strong>
        </h4>
        <pre><code>17:30:45.123 IP 192.168.1.100.54321 &gt; 203.0.113.5.21: Flags [P.], seq 1:15, ack 1, win 502
E..5..@.@.X...........5...P...e....5....USER alice&lt;0d0a&gt;  # ← 用户名明文！
17:30:45.456 IP 192.168.1.100.54321 &gt; 203.0.113.5.21: Flags [P.], seq 15:29, ack 1, win 502
E..5..@.@.X...........5...P...e....5....PASS p@ssw0rd&lt;0d0a&gt;  # ← 密码明文！</code></pre>
        <pre><code>tcpdump -A -s0 port 21  # 显示FTP明文内容
</code></pre>
       </li>
       <li>
        <p>
         <strong>
          流量统计
         </strong>
         ：
        </p>
        <p>
         你提到的这条命令是使用
         <code>
          tshark
         </code>
         （Wireshark 的命令行版本）对抓包文件进行流量统计分析的实用技巧。让我们用物流数据分析的场景来类比解释：
        </p>
        <hr/>
        <h4>
         🚚 命令解析
        </h4>
        <p>
        </p>
        <pre><code>tshark -r traffic.pcap -qz io,stat,60</code></pre>
        <table>
         <thead>
          <tr>
           <th>
            参数/语法
           </th>
           <th>
            技术含义
           </th>
           <th>
            现实比喻
           </th>
          </tr>
         </thead>
         <tbody>
          <tr>
           <td>
            <strong>
             <code>
              -r traffic.pcap
             </code>
            </strong>
           </td>
           <td>
            指定读取（read）的抓包文件
           </td>
           <td>
            调取「高速公路监控中心」某天的监控录像带
           </td>
          </tr>
          <tr>
           <td>
            <strong>
             <code>
              -q
             </code>
            </strong>
           </td>
           <td>
            安静模式（quiet），不显示实时抓包信息
           </td>
           <td>
            分析时不显示监控实时画面，只输出统计报表
           </td>
          </tr>
          <tr>
           <td>
            <strong>
             <code>
              -z
             </code>
            </strong>
           </td>
           <td>
            启动统计模块（z代表"statistics"）
           </td>
           <td>
            启用「智能交通分析系统」
           </td>
          </tr>
          <tr>
           <td>
            <strong>
             <code>
              io,stat
             </code>
            </strong>
           </td>
           <td>
            统计模块名称：输入输出统计（Input/Output Statistics）
           </td>
           <td>
            统计每个时段的车辆流量和货物运输量
           </td>
          </tr>
          <tr>
           <td>
            <strong>
             <code>
              60
             </code>
            </strong>
           </td>
           <td>
            统计间隔（单位：秒）
           </td>
           <td>
            将监控录像按每分钟分段分析
           </td>
          </tr>
         </tbody>
        </table>
       </li>
       <li>
        <h5>
         分解说明：
        </h5>
       </li>
       <li>
        <p>
         <strong>
          <code>
           -r traffic.pcap
          </code>
         </strong>
         <br/>
         ➡️ 相当于打开「物流中心过去24小时的监控录像」（读取已保存的抓包文件）
        </p>
       </li>
       <li>
        <p>
         <strong>
          <code>
           -qz io,stat,60
          </code>
         </strong>
         <br/>
         ➡️ 执行「自动化的运输报表生成系统」，参数分解：
        </p>
        <ul>
         <li>
          <p>
           <strong>
            <code>
             io,stat
            </code>
           </strong>
           ：统计输入输出流量（Input/Output Statistics）
          </p>
         </li>
         <li>
          <p>
           <strong>
            <code>
             60
            </code>
           </strong>
           ：将监控录像
           <strong>
            按60秒为单位分段分析
           </strong>
          </p>
         </li>
        </ul>
       </li>
       <li>
        <hr/>
        <h4>
         📊 典型输出示例
        </h4>
        <p>
        </p>
        <pre><code>===================================================================
| Duration | Packets | Bytes |  bps  |   B/s   |   MB   |
|   60.00  |  12456  |  98M  | 13107 | 1638.4  |  1.56  |
|   60.00  |   8543  |  73M  |  9733 | 1216.6  |  1.16  |
|   60.00  |  15234  | 124M  | 16512 | 2064.0  |  1.97  |
===================================================================</code></pre>
        <hr/>
        <h4>
         📦 数据列解读（物流中心版）
        </h4>
       </li>
       <li>
        <p>
         <strong>
          Duration (时长)
         </strong>
         <br/>
         ➡️ 分析的时间窗口（每60秒一个统计周期）
        </p>
       </li>
       <li>
        <p>
         <strong>
          Packets (数据包数量)
         </strong>
         <br/>
         ➡️ 该时段经过传送带的包裹总数（1个包裹=1个数据包）
        </p>
       </li>
       <li>
        <p>
         <strong>
          Bytes (字节数)
         </strong>
         <br/>
         ➡️ 该时段运输的货物总重量（1字节=1克货物）
        </p>
       </li>
       <li>
        <p>
         <strong>
          bps (bits per second)
         </strong>
         <br/>
         ➡️ 传送带实时负载率（比特/秒，1字节=8比特）
        </p>
       </li>
       <li>
        <p>
         <strong>
          B/s (Bytes per second)
         </strong>
         <br/>
         ➡️ 实际货运吞吐量（字节/秒）
        </p>
       </li>
       <li>
        <p>
         <strong>
          MB (兆字节)
         </strong>
         <br/>
         ➡️ 该时段运输的货物总重量（换算为MB单位）
        </p>
       </li>
       <li>
        <hr/>
        <h4>
         🔍 实战应用场景
        </h4>
        <h5>
         案例：排查网络带宽异常
        </h5>
       </li>
       <li>
        <p>
         <strong>
          发现异常时段
         </strong>
         <br/>
         👉 观察哪段时间的「bps」或「MB」列数值异常增高
        </p>
       </li>
       <li>
        <p>
         <strong>
          定位问题类型
         </strong>
         ：
        </p>
        <ul>
         <li>
          <p>
           <strong>
            突发高bps + 高Packets
           </strong>
           → 可能遭遇DDoS攻击（海量小包）
          </p>
         </li>
         <li>
          <p>
           <strong>
            持续高MB + 正常Packets
           </strong>
           → 大文件传输/数据泄露
          </p>
         </li>
         <li>
          <p>
           <strong>
            bps周期性波动
           </strong>
           → 正常业务流量（如整点备份）
          </p>
         </li>
        </ul>
       </li>
       <li>
        <p>
         <strong>
          结合原始数据
         </strong>
        </p>
        <pre><code># 定位到异常时间段后，提取该时段详细通信记录
editcap -A "2023-08-01 14:30:00" -B "2023-08-01 14:31:00" traffic.pcap suspicious.pcap
wireshark suspicious.pcap</code></pre>
       </li>
       <li>
        <h5>
         变体3：TopN 会话排行
        </h5>
        <p>
        </p>
        <pre><code>tshark -r traffic.pcap -qz conv,tcp  # 统计TCP会话流量TOP榜</code></pre>
        <hr/>
        <h4>
         💡 注意事项
        </h4>
       </li>
       <li>
        <p>
         <strong>
          权限问题
         </strong>
         ：分析抓包文件时可能需要
         <code>
          sudo
         </code>
         权限
        </p>
       </li>
       <li>
        <p>
         <strong>
          时间精度
         </strong>
         ：统计粒度（60秒）可根据需要调整，建议：
        </p>
        <ul>
         <li>
          <p>
           故障排查：5-10秒精细粒度
          </p>
         </li>
         <li>
          <p>
           趋势分析：300-600秒大粒度
          </p>
         </li>
        </ul>
       </li>
       <li>
        <p>
         <strong>
          数据可视化
         </strong>
         ：可将输出导入Excel生成流量曲线图
        </p>
       </li>
       <li>
        <p>
         （扩展思考：对比
         <code>
          iftop
         </code>
         和
         <code>
          nload
         </code>
         等实时流量监控工具，这个命令的优势在于能对历史数据进行回溯分析）
        </p>
        <hr/>
        <h4>
         ⚙️ 扩展技巧
        </h4>
        <h5>
         变体1：实时流量监控
        </h5>
        <p>
        </p>
        <pre><code>tshark -i eth0 -qz io,stat,10  # 每10秒刷新一次实时统计</code></pre>
        <h5>
         变体2：协议分布统计
        </h5>
        <p>
        </p>
        <pre><code>tshark -r traffic.pcap -qz io,stat,60,http,tcp  # 单独统计HTTP和TCP流量</code></pre>
        <pre><code>tshark -r traffic.pcap -qz io,stat,60  # 每分钟流量统计</code></pre>
       </li>
      </ol>
      <h4>
       🚨 安全检测示例
      </h4>
      <p>
       <strong>
        检测DDOS攻击
       </strong>
       ：
      </p>
      <pre><code>tcpdump -nn 'dst port 80' | awk '{print $3}' | sort | uniq -c | sort -nr</code></pre>
      <h5>
       <strong>
        抓取快递包裹：
        <code>
         tcpdump -nn 'dst port 80'
        </code>
       </strong>
      </h5>
      <ul>
       <li>
        ​**
        <code>
         -nn
        </code>
        **：不解析域名和端口名称（保持数字格式，类似快递单只写编号不写名字）
       </li>
       <li>
        ​**
        <code>
         dst port 80
        </code>
        **：只抓取目标端口是 80 的流量（HTTP 包裹）
       </li>
       <li>
        ​
        <strong>
         输出示例
        </strong>
        ：
        <pre><code>12:34:56.789 IP 192.168.1.100.54321 &gt; 203.0.113.5.80: Flags [S], ...</code></pre>
       </li>
      </ul>
      <h5>
       <strong>
        统计包裹数量：
        <code>
         uniq -c
        </code>
       </strong>
      </h5>
      <ul>
       <li>
        ​**
        <code>
         -c
        </code>
        **：统计每个地址出现的次数
       </li>
       <li>
        ​
        <strong>
         输出
        </strong>
        ：
        <pre><code>1 198.51.100.10.80
2 203.0.113.5.80</code></pre>
       </li>
      </ul>
      <h5>
       <strong>
        按数量倒序排列：
        <code>
         sort -nr
        </code>
       </strong>
      </h5>
      <ul>
       <li>
        ​**
        <code>
         -n
        </code>
        **：按数字排序（默认按字符排序会出错，比如 10 &lt; 2）
       </li>
       <li>
        ​**
        <code>
         -r
        </code>
        **：逆序（从大到小）
       </li>
       <li>
        ​
        <strong>
         最终输出
        </strong>
        ：
        <pre><code>2 203.0.113.5.80
1 198.51.100.10.80</code></pre>
       </li>
      </ul>
      <hr/>
      <h4>
       ​
       <strong>
        记忆口诀
       </strong>
      </h4>
      <pre><code>一抓二提三排序，四统五排结果齐。
-nn 抓包禁解析，awk 提列看第三。
sort 整理做铺垫，uniq -c 数出现。
sort -nr 倒排序，流量统计最清晰。</code></pre>
      <p>
       输出示例：
      </p>
      <pre><code>3258 61.177.172.10
1245 183.251.61.102
987 122.114.27.214</code></pre>
      <pre></pre>
      <p>
       显示：IP 61.177.172.10在短时间内发送了3258个到80端口的请求
      </p>
      <h4>
       📚 学习路径建议
      </h4>
      <ol>
       <li>
        <p>
         先掌握基础过滤器语法
        </p>
       </li>
       <li>
        <p>
         从分析HTTP流量开始练习
        </p>
       </li>
       <li>
        <p>
         逐步过渡到TCP流重组分析
        </p>
       </li>
       <li>
        <p>
         最后挑战TLS加密流量分析
        </p>
       </li>
      </ol>
      <p>
       （小贴士：Wireshark官网提供各种协议的示例抓包文件，是绝佳的学习资料）
      </p>
     </div>
    </div>
    <div style="text-align:start">
     <div>
     </div>
    </div>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f:2f626c6f672e6373646e2e6e65742f736f6c6f6d6f6e7a772f:61727469636c652f64657461696c732f313436313838333436" class_="artid" style="display:none">
 </p>
</div>


