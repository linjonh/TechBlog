---
layout: post
title: "物联网萤石云获取登录的accessToken工具类"
date: 2024-12-13 14:07:21 +0800
description: "刚刚接触物联网，萤石云平台，编写萤石云获取登录的accessToken工具类我接手写公司物联网的模块"
keywords: "萤石token怎么得"
categories: ['工作经验']
tags: ['Java']
artid: "105611789"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=105611789
    alt: "物联网萤石云获取登录的accessToken工具类"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=105611789
featuredImagePreview: https://bing.ee123.net/img/rand?artid=105611789
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     物联网萤石云获取登录的accessToken工具类
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="./../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="./../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <p>
     刚刚接触物联网，萤石云平台，编写萤石云获取登录的accessToken工具类
     <br/>
     我接手写公司物联网的模块，入坑不少，主要不知道有哪些东西要写。
     <br/>
     总结流程：
     <br/>
     1.先边设备调试好（摄像头），在手机上看到画面
     <br/>
     1.1获取获取appKey
     <br/>
     萤石云开放平台appKey申请可在开放平台官网注册登录
     <a href="https://open.ys7.com/view/app/app_edit.html" rel="nofollow">
      https://open.ys7.com/view/app/app_edit.html（官网）
     </a>
     ，填写正确的信息后开放平台会发放到您的账号下。appKey和appSecret是开放平台应用的秘钥，请不要请泄露，如若泄露可将appSecret重置即可。
     <br/>
     1.2手机上下载萤石云视频app
     <br/>
     1.3如果设备是二手的（别人使用过），还需要修改设备的IP地址
     <br/>
     1.4电脑下载设备网络搜索
     <br/>
     1.4.1 百度网盘下载：
     <a href="https://pan.baidu.com/s/1HNC8l2Lvh5_4-OMO_8LWPQ" rel="nofollow">
      https://pan.baidu.com/s/1HNC8l2Lvh5_4-OMO_8LWPQ
     </a>
     <br/>
     提取码：6j4u
     <br/>
     1.4.2加QQ群：829336169 下载：SADPToo V3.0.2.4.rar压缩包（我习惯工作上使用的软件都会上传到这个群，下次下载就直接下载速度快）
     <br/>
     1.5安装设备网络搜索，直接解压，直接运行，下一步就行
     <br/>
     1.6打开设备网络搜索
     <br/>
     修改设备的IP，（查询自己电脑的IP：打开cmd命令：ipconfig,如果不会我以前有写过这文章）
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/blog_migrate/dc5ab68a85d4476983b67f55a5e11a27.png">
      <br/>
      1.7，登录萤石云视频app，添加设备扫一扫就可以添加成功了
      <br/>
      1.8，自己可以看到画面
      <br/>
      2.现在开始写Java代码了（开心 高兴）
      <br/>
      2.1萤石云官方文档：
      <a href="https://open.ys7.com/doc/zh/book/index/user.html" rel="nofollow">
       https://open.ys7.com/doc/zh/book/index/user.html
      </a>
      <br/>
      2.1获取登录的accessToken
     </img>
    </p>
    <pre><code class="prism language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>smartfarm<span class="token punctuation">.</span>base<span class="token punctuation">.</span>monitor<span class="token punctuation">.</span>core<span class="token punctuation">.</span>util<span class="token punctuation">;</span>

<span class="token keyword">import</span> java<span class="token punctuation">.</span>io<span class="token punctuation">.</span>IOException<span class="token punctuation">;</span>

<span class="token keyword">import</span> net<span class="token punctuation">.</span>sf<span class="token punctuation">.</span>json<span class="token punctuation">.</span>JSONObject<span class="token punctuation">;</span>

<span class="token keyword">import</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>http<span class="token punctuation">.</span>HttpEntity<span class="token punctuation">;</span>
<span class="token keyword">import</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>http<span class="token punctuation">.</span>ParseException<span class="token punctuation">;</span>
<span class="token keyword">import</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>http<span class="token punctuation">.</span>client<span class="token punctuation">.</span>ClientProtocolException<span class="token punctuation">;</span>
<span class="token keyword">import</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>http<span class="token punctuation">.</span>client<span class="token punctuation">.</span>methods<span class="token punctuation">.</span>CloseableHttpResponse<span class="token punctuation">;</span>
<span class="token keyword">import</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>http<span class="token punctuation">.</span>client<span class="token punctuation">.</span>methods<span class="token punctuation">.</span>HttpPost<span class="token punctuation">;</span>
<span class="token keyword">import</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>http<span class="token punctuation">.</span>impl<span class="token punctuation">.</span>client<span class="token punctuation">.</span>CloseableHttpClient<span class="token punctuation">;</span>
<span class="token keyword">import</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>http<span class="token punctuation">.</span>impl<span class="token punctuation">.</span>client<span class="token punctuation">.</span>HttpClientBuilder<span class="token punctuation">;</span>
<span class="token keyword">import</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>http<span class="token punctuation">.</span>util<span class="token punctuation">.</span>EntityUtils<span class="token punctuation">;</span>

<span class="token comment">/**
 * 获取登录的accessToken
 * @author lyq
 *
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GetTokenUtil</span> <span class="token punctuation">{<!-- --></span>

	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token comment">//我自己的密匙</span>
		String AppKey<span class="token operator">=</span><span class="token string">"7fec057876c445f9b919ed9bb8bfd821"</span><span class="token punctuation">;</span>
		String Secret<span class="token operator">=</span><span class="token string">"afa8b6fdced65f379c13e371c9967721"</span><span class="token punctuation">;</span>
		Token t<span class="token operator">=</span><span class="token function">getSnapUrl</span><span class="token punctuation">(</span>AppKey<span class="token punctuation">,</span> Secret<span class="token punctuation">)</span><span class="token punctuation">;</span>
		System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAccessToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getExpireTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> Token <span class="token function">getSnapUrl</span><span class="token punctuation">(</span>String AppKey<span class="token punctuation">,</span>String Secret<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
		<span class="token comment">// 获得Http客户端(可以理解为:你得先有一个浏览器;注意:实际上HttpClient与浏览器是不一样的)</span>
		CloseableHttpClient httpClient <span class="token operator">=</span> HttpClientBuilder<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		
		<span class="token comment">// 封装参数</span>
		StringBuffer params <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		params<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"appKey="</span><span class="token operator">+</span> AppKey<span class="token punctuation">)</span><span class="token punctuation">;</span>
		params<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"&amp;"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		params<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"appSecret="</span><span class="token operator">+</span>Secret<span class="token punctuation">)</span><span class="token punctuation">;</span>
		
		<span class="token comment">// 创建Post请求</span>
		HttpPost httpPost <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HttpPost</span><span class="token punctuation">(</span><span class="token string">"https://open.ys7.com/api/lapp/token/get"</span> <span class="token operator">+</span> <span class="token string">"?"</span> <span class="token operator">+</span> params<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// 设置ContentType(注:如果只是传普通参数的话,ContentType不一定非要用application/json)</span>
		httpPost<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">"Content-Type"</span><span class="token punctuation">,</span> <span class="token string">"application/json;charset=utf8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
		<span class="token comment">// 响应模型</span>
		CloseableHttpResponse response <span class="token operator">=</span> null<span class="token punctuation">;</span>
		
		<span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
			<span class="token comment">// 由客户端执行(发送)Post请求</span>
			response <span class="token operator">=</span> httpClient<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>httpPost<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">// 从响应模型中获取响应实体</span>
			HttpEntity responseEntity <span class="token operator">=</span> response<span class="token punctuation">.</span><span class="token function">getEntity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		
			<span class="token keyword">if</span> <span class="token punctuation">(</span>responseEntity <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				<span class="token comment">//返回数据</span>
				String responseString <span class="token operator">=</span> EntityUtils<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>responseEntity<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token comment">//生成实体类（responseString就可以看到数据的）</span>
				JSONObject jsonObject <span class="token operator">=</span> JSONObject<span class="token punctuation">.</span><span class="token function">fromObject</span><span class="token punctuation">(</span>responseString<span class="token punctuation">)</span><span class="token punctuation">;</span>
				Token t <span class="token operator">=</span> <span class="token punctuation">(</span>Token<span class="token punctuation">)</span> JSONObject<span class="token punctuation">.</span><span class="token function">toBean</span><span class="token punctuation">(</span>jsonObject<span class="token punctuation">,</span> Token<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">return</span> t<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ClientProtocolException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ParseException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
				<span class="token comment">// 释放资源</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>httpClient <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
					httpClient<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>response <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
					response<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> null<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre>
    <p>
     2.3获取获取设备状态信息
    </p>
    <pre><code class="prism language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>smartfarm<span class="token punctuation">.</span>base<span class="token punctuation">.</span>monitor<span class="token punctuation">.</span>core<span class="token punctuation">.</span>util<span class="token punctuation">;</span>

<span class="token keyword">import</span> java<span class="token punctuation">.</span>io<span class="token punctuation">.</span>IOException<span class="token punctuation">;</span>

<span class="token keyword">import</span> net<span class="token punctuation">.</span>sf<span class="token punctuation">.</span>json<span class="token punctuation">.</span>JSONObject<span class="token punctuation">;</span>

<span class="token keyword">import</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>http<span class="token punctuation">.</span>HttpEntity<span class="token punctuation">;</span>
<span class="token keyword">import</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>http<span class="token punctuation">.</span>ParseException<span class="token punctuation">;</span>
<span class="token keyword">import</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>http<span class="token punctuation">.</span>client<span class="token punctuation">.</span>ClientProtocolException<span class="token punctuation">;</span>
<span class="token keyword">import</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>http<span class="token punctuation">.</span>client<span class="token punctuation">.</span>methods<span class="token punctuation">.</span>CloseableHttpResponse<span class="token punctuation">;</span>
<span class="token keyword">import</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>http<span class="token punctuation">.</span>client<span class="token punctuation">.</span>methods<span class="token punctuation">.</span>HttpPost<span class="token punctuation">;</span>
<span class="token keyword">import</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>http<span class="token punctuation">.</span>impl<span class="token punctuation">.</span>client<span class="token punctuation">.</span>CloseableHttpClient<span class="token punctuation">;</span>
<span class="token keyword">import</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>http<span class="token punctuation">.</span>impl<span class="token punctuation">.</span>client<span class="token punctuation">.</span>HttpClientBuilder<span class="token punctuation">;</span>
<span class="token keyword">import</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>http<span class="token punctuation">.</span>util<span class="token punctuation">.</span>EntityUtils<span class="token punctuation">;</span>

<span class="token comment">/**
 * 获取设备状态信息
 * @author lyq
 *
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SnapUtil</span> <span class="token punctuation">{<!-- --></span>

	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token comment">//我自己的密匙</span>
		String AppKey<span class="token operator">=</span><span class="token string">"7fec057876c445f9b919ed9bb8bfd821"</span><span class="token punctuation">;</span>
		String Secret<span class="token operator">=</span><span class="token string">"afa8b6fdced65f379c13e371c9967721"</span><span class="token punctuation">;</span>
		String accessToken<span class="token operator">=</span><span class="token string">"at.60haqycfbqoizem15csgx1q21lmn85q6-4jmaids8bm-130mqh2-iamhp5emw"</span><span class="token punctuation">;</span>
		<span class="token comment">//获取登录的accessToken</span>
		<span class="token comment">//String accessToken=GetTokenUtil.getSnapUrl(AppKey,Secret).getData().getAccessToken();</span>
		<span class="token keyword">int</span> channel<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
		String deviceSerial<span class="token operator">=</span><span class="token string">"C16499527"</span><span class="token punctuation">;</span>
		System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token function">stateInformation</span><span class="token punctuation">(</span>accessToken<span class="token punctuation">,</span> deviceSerial<span class="token punctuation">,</span>channel<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	 
			

	<span class="token comment">/**  获取设备状态信息
	 * accessToken	String	授权过程获取的access_token	Y
	 * deviceSerial	String	设备序列号,存在英文字母的设备序列号，字母需为大写	Y
	 * channel	int	通道号,默认为1	N
	 * @param accessToken
	 * @param deviceSerial
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> String <span class="token function">stateInformation</span><span class="token punctuation">(</span>String accessToken<span class="token punctuation">,</span>String deviceSerial<span class="token punctuation">,</span><span class="token keyword">int</span> channel<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
		<span class="token comment">// 获得Http客户端(可以理解为:你得先有一个浏览器;注意:实际上HttpClient与浏览器是不一样的)</span>
		CloseableHttpClient httpClient <span class="token operator">=</span> HttpClientBuilder<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// 封装参数</span>
		StringBuffer params <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		params<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"accessToken="</span><span class="token operator">+</span> accessToken<span class="token punctuation">)</span><span class="token punctuation">;</span>
		params<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"&amp;"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		params<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"deviceSerial="</span><span class="token operator">+</span>deviceSerial<span class="token punctuation">)</span><span class="token punctuation">;</span>
		params<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"&amp;"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		params<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"channel="</span><span class="token operator">+</span>channel<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// 创建Post请求</span>
		HttpPost httpPost <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HttpPost</span><span class="token punctuation">(</span><span class="token string">"https://open.ys7.com/api/lapp/device/status/get"</span> <span class="token operator">+</span> <span class="token string">"?"</span> <span class="token operator">+</span> params<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// 设置ContentType(注:如果只是传普通参数的话,ContentType不一定非要用application/json)</span>
		httpPost<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">"Content-Type"</span><span class="token punctuation">,</span> <span class="token string">"application/json;charset=utf8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// 响应模型</span>
		CloseableHttpResponse response <span class="token operator">=</span> null<span class="token punctuation">;</span>

		<span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
			<span class="token comment">// 由客户端执行(发送)Post请求</span>
			response <span class="token operator">=</span> httpClient<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>httpPost<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">// 从响应模型中获取响应实体</span>
			HttpEntity responseEntity <span class="token operator">=</span> response<span class="token punctuation">.</span><span class="token function">getEntity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span>responseEntity <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				String responseString <span class="token operator">=</span> EntityUtils<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>responseEntity<span class="token punctuation">)</span><span class="token punctuation">;</span>
				JSONObject jsonObject <span class="token operator">=</span> JSONObject<span class="token punctuation">.</span><span class="token function">fromObject</span><span class="token punctuation">(</span>responseString<span class="token punctuation">)</span><span class="token punctuation">;</span>
				Picture p <span class="token operator">=</span> <span class="token punctuation">(</span>Picture<span class="token punctuation">)</span> JSONObject<span class="token punctuation">.</span><span class="token function">toBean</span><span class="token punctuation">(</span>jsonObject<span class="token punctuation">,</span> Picture<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">return</span> p<span class="token punctuation">.</span><span class="token function">getCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ClientProtocolException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ParseException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
				<span class="token comment">// 释放资源</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>httpClient <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
					httpClient<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>response <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
					response<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> null<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>

</code></pre>
    <p>
     现在后台就可以操控设备了
    </p>
    <p>
     如果有帮助就关注一下，没有帮助的就不强求，
     <br/>
     滴水之恩，当涌泉相报，那是你没有绝望，
     <br/>
     跳槽工作了3个星期了，星期一到星期五加班到7点，回到家9点
     <br/>
     星期六星期日，不是自己就是学新的东西，
     <br/>
     能不裸辞，就尽量不要裸辞了，裸辞之后，可能还没有上一家好，
     <br/>
     我在以前的公司6点准时走 哈哈哈
     <br/>
     加油干！！！ 死刚Java
    </p>
   </div>
   <link href="./../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="./../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f34333937343436362f:61727469636c652f64657461696c732f313035363131373839" class_="artid" style="display:none">
 </p>
</div>


