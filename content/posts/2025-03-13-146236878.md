---
layout: post
title: "搭建阿里云专有网络VPC"
date: 2025-03-13 22:11:03 +0800
description: "阿里云专有网络VPC搭建 搭建云上私有云"
keywords: "vpc服务器搭建教程"
categories: ['网络']
tags: ['云服务', '专有网络Vpc']
artid: "146236878"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146236878
    alt: "搭建阿里云专有网络VPC"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146236878
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146236878
cover: https://bing.ee123.net/img/rand?artid=146236878
image: https://bing.ee123.net/img/rand?artid=146236878
img: https://bing.ee123.net/img/rand?artid=146236878
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     搭建阿里云专有网络VPC
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="htmledit_views" id="content_views">
    <hr id="hr-toc" name="tableOfContents"/>
    <p>
    </p>
    <p>
     创建vpc不需要费用，会自动生成交换机和路由表，但vpc下属的资源需要收费。
    </p>
    <p>
     主要需要创建ecs资源、弹性公网IP、一个弹性公网IP可以实现多个互联网服务。
    </p>
    <h2 id="%E4%B8%80%E3%80%81%E6%A6%82%E8%BF%B0" name="%E4%B8%80%E3%80%81%E6%A6%82%E8%BF%B0">
     一、概述
    </h2>
    <p>
     <img alt="" height="615" src="https://i-blog.csdnimg.cn/direct/f870d80ae16f45a78d2f7c983754dc76.png" width="1920"/>
    </p>
    <h2 id="%E4%BA%8C%E3%80%81%E4%B8%93%E6%9C%89%E7%BD%91%E7%BB%9Cvpc" name="%E4%BA%8C%E3%80%81%E4%B8%93%E6%9C%89%E7%BD%91%E7%BB%9Cvpc">
     二、专有网络vpc
    </h2>
    <p>
     <img alt="" height="302" src="https://i-blog.csdnimg.cn/direct/881f3662f5bc47a7920b3536c09f512d.png" width="1919"/>
    </p>
    <h3 id="2.1%20vpc%E5%9F%BA%E6%9C%AC%E4%BF%A1%E6%81%AF" name="2.1%20vpc%E5%9F%BA%E6%9C%AC%E4%BF%A1%E6%81%AF">
     2.1 vpc基本信息
    </h3>
    <p>
     <img alt="" height="499" src="https://i-blog.csdnimg.cn/direct/201f76fca4034c2893b00da4f648378f.png" width="1920"/>
    </p>
    <h3 id="2.2%C2%A0vpc%E8%B5%84%E6%BA%90%E7%AE%A1%E7%90%86" name="2.2%C2%A0vpc%E8%B5%84%E6%BA%90%E7%AE%A1%E7%90%86">
     2.2 vpc资源管理
    </h3>
    <p>
     <img alt="" height="641" src="https://i-blog.csdnimg.cn/direct/adc46b4b203d4db2b701abc4ccbd7116.png" width="1920"/>
    </p>
    <h3 id="2.3%20vpc%E7%BD%91%E6%AE%B5%E7%AE%A1%E7%90%86" name="2.3%20vpc%E7%BD%91%E6%AE%B5%E7%AE%A1%E7%90%86">
     2.3 vpc网段管理
    </h3>
    <p>
     <img alt="" height="404" src="https://i-blog.csdnimg.cn/direct/d29ae3ce22c143c2a8cdfb359c36ee7b.png" width="1920"/>
    </p>
    <h2 id="%E4%B8%89%E3%80%81%E4%BA%A4%E6%8D%A2%E6%9C%BA" name="%E4%B8%89%E3%80%81%E4%BA%A4%E6%8D%A2%E6%9C%BA">
     三、交换机
    </h2>
    <p>
     一个vpc有多个交换机，每个交换机管理一个网段，交换机网段必须在vpc网段之内，交换机可以新建ecs、slb、rds
    </p>
    <p>
     <img alt="" height="441" src="https://i-blog.csdnimg.cn/direct/6634037be5dd4ecdb988370902819ce2.png" width="1920"/>
    </p>
    <p>
     路由表在创建vpc时自动生成 ，路由表需要绑定路由器和网关
    </p>
    <p>
     <img alt="" height="777" src="https://i-blog.csdnimg.cn/direct/178dce2e0c984546a1666ec07672d56f.png" width="1920"/>
    </p>
    <h2 id="%E5%9B%9B%E3%80%81NAT%E7%BD%91%E5%85%B3" name="%E5%9B%9B%E3%80%81NAT%E7%BD%91%E5%85%B3">
     四、NAT网关
    </h2>
    <h3 id="4.1%20%E7%BB%91%E5%AE%9A%E5%BC%B9%E6%80%A7%E5%85%AC%E7%BD%91IP" name="4.1%20%E7%BB%91%E5%AE%9A%E5%BC%B9%E6%80%A7%E5%85%AC%E7%BD%91IP">
     4.1 绑定弹性公网IP
    </h3>
    <p>
     需要先购买弹性公网IP，绑定公网NAT网关，其中自动生成SNAT用于内网访问外网
    </p>
    <p>
     <img alt="" height="516" src="https://i-blog.csdnimg.cn/direct/afb535b946e64cc5b92821d5bd159e00.png" width="1920"/>
    </p>
    <h3 id="4.2%20NAT%E7%BD%91%E5%85%B3%E4%BF%A1%E6%81%AF" name="4.2%20NAT%E7%BD%91%E5%85%B3%E4%BF%A1%E6%81%AF">
     4.2 NAT网关信息
    </h3>
    <p>
     <img alt="" height="587" src="https://i-blog.csdnimg.cn/direct/407e56a4617f45bbb7f6489c5a9e5aba.png" width="1920"/>
    </p>
    <h3 id="4.3%20%E7%BB%91%E5%AE%9A%E7%9A%84%E5%BC%B9%E6%80%A7%E5%85%AC%E7%BD%91IP" name="4.3%20%E7%BB%91%E5%AE%9A%E7%9A%84%E5%BC%B9%E6%80%A7%E5%85%AC%E7%BD%91IP">
     4.3 绑定的弹性公网IP
    </h3>
    <p>
     <img alt="" height="459" src="https://i-blog.csdnimg.cn/direct/9e8bcfaf0c0f4df29181b041807c9e37.png" width="1920"/>
    </p>
    <h3 id="4.4%20DNAT" name="4.4%20DNAT">
     4.4 DNAT
    </h3>
    <p>
     DNAT端口映射，此处对外开放了81端口
    </p>
    <p>
     <img alt="" height="650" src="https://i-blog.csdnimg.cn/direct/ff8040c39acf4aca999d62e770a76ba6.png" width="1920"/>
    </p>
    <p>
     <img alt="" height="254" src="https://i-blog.csdnimg.cn/direct/76d8de36262349a691b0a4898ab14cca.png" width="850"/>
    </p>
    <h3 id="4.5%20SNAT" name="4.5%20SNAT">
     4.5 SNAT
    </h3>
    <p>
     SNAT内网访问外网，此处不做限制，限制在ACL做，这里系统默认开通运行访问外网
    </p>
    <p>
     <img alt="" height="650" src="https://i-blog.csdnimg.cn/direct/0144bcbb23354bad937841533b365c62.png" width="1920"/>
    </p>
    <h2 id="%E4%BA%94%E3%80%81%E5%BC%B9%E6%80%A7%E5%85%AC%E7%BD%91IP" name="%E4%BA%94%E3%80%81%E5%BC%B9%E6%80%A7%E5%85%AC%E7%BD%91IP">
     五、弹性公网IP
    </h2>
    <p>
     弹性公网IP绑定后会NAT后，会自动生成SNAT和DNAT，
    </p>
    <p>
     <img alt="" height="486" src="https://i-blog.csdnimg.cn/direct/7fb7d506f85f4f64a700a4a7a15843b1.png" width="1920"/>
    </p>
    <h2 id="%E5%85%AD%E3%80%81%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6ACL%EF%BC%88%E7%BB%91%E5%AE%9A%E4%BA%A4%E6%8D%A2%E6%9C%BA%EF%BC%89" name="%E5%85%AD%E3%80%81%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6ACL%EF%BC%88%E7%BB%91%E5%AE%9A%E4%BA%A4%E6%8D%A2%E6%9C%BA%EF%BC%89">
     六、访问控制ACL（绑定交换机）
    </h2>
    <h3 id="6.1%20%E5%85%A5%E6%96%B9%E5%90%91" name="6.1%20%E5%85%A5%E6%96%B9%E5%90%91">
     6.1 入方向
    </h3>
    <p>
     负责外网黑名单收集
    </p>
    <p>
     <img alt="" height="795" src="https://i-blog.csdnimg.cn/direct/d62c1f9865934651a858ea4aca28d229.png" width="1920"/>
    </p>
    <h3 id="6.2%20%E5%87%BA%E6%96%B9%E9%9D%A2" name="6.2%20%E5%87%BA%E6%96%B9%E9%9D%A2">
     6.2 出方面
    </h3>
    <p>
     默认允许访问外网，所有端口出方向放通，禁止8.8.8.8访问是我自行添加，且该记录在优先级放通全网高，所以无法访问。
    </p>
    <p>
     <img alt="" height="818" src="https://i-blog.csdnimg.cn/direct/4ebd2965f58a45bba6fa8f6a2e315e79.png" width="1920"/>
    </p>
    <p>
     <img alt="" height="153" src="https://i-blog.csdnimg.cn/direct/97c4b4806502461eb7b4904d6473941e.png" width="825"/>
    </p>
    <p>
     弹性公网IP解绑NAT网关，需要先删除DNAT和SNAT
    </p>
    <h2 id="%E4%B8%83%E3%80%81%E5%BC%B9%E6%80%A7%E5%85%AC%E7%BD%91IP%E7%BB%91%E5%AE%9A%E4%B8%8D%E5%90%8C%E8%B5%84%E6%BA%90" name="%E4%B8%83%E3%80%81%E5%BC%B9%E6%80%A7%E5%85%AC%E7%BD%91IP%E7%BB%91%E5%AE%9A%E4%B8%8D%E5%90%8C%E8%B5%84%E6%BA%90">
     七、弹性公网IP绑定不同资源
    </h2>
    <h3 id="7.1%20%E8%A7%A3%E7%BB%91NAT%E7%BD%91%E5%85%B3" name="7.1%20%E8%A7%A3%E7%BB%91NAT%E7%BD%91%E5%85%B3">
     7.1 解绑NAT网关
    </h3>
    <p>
     <img alt="" height="429" src="https://i-blog.csdnimg.cn/direct/fe16ee25e139430184336843ccfc979f.png" width="1579"/>
    </p>
    <p>
     解绑后内网服务器无法访问外网
    </p>
    <p>
     <img alt="" height="159" src="https://i-blog.csdnimg.cn/direct/9fe695a0ae264ebcabf75c5eaf5fe8a5.png" width="865"/>
    </p>
    <p>
     解绑后弹性公网IP处于未绑定转态，可以绑定以下资源
    </p>
    <p>
     <img alt="" height="491" src="https://i-blog.csdnimg.cn/direct/8745afdf761b4d2981800713c04fec7a.png" width="1920"/>
    </p>
    <p>
     <img alt="" height="453" src="https://i-blog.csdnimg.cn/direct/263851cd0595418fa802fe79802af550.png" width="575"/>
    </p>
    <h3 id="7.2%20%E5%BC%B9%E6%80%A7%E5%85%AC%E7%BD%91IP%E7%BB%91%E5%AE%9A%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1CLB" name="7.2%20%E5%BC%B9%E6%80%A7%E5%85%AC%E7%BD%91IP%E7%BB%91%E5%AE%9A%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1CLB">
     7.2 弹性公网IP绑定负载均衡CLB
    </h3>
    <p>
     此处直接绑定CLB负载IP，此时访问CLB4000端口可以直接访问到服务，但我们通常不会这样做这种危险的操作，这直接把内网负载均衡器直接暴露在外网环境。
    </p>
    <p>
     <img alt="" height="489" src="https://i-blog.csdnimg.cn/direct/bac0df6821b64464ac03530602816c0a.png" width="1920"/>
    </p>
    <p>
     <img alt="" height="259" src="https://i-blog.csdnimg.cn/direct/cadfaaf518194d5b91c7cc4d9c3451d4.png" width="854"/>
    </p>
    <h3 id="7.3%20%E5%BC%B9%E6%80%A7%E5%85%AC%E7%BD%91IP%E7%BB%91%E5%AE%9A%E6%9C%8D%E5%8A%A1%E5%99%A8ECS" name="7.3%20%E5%BC%B9%E6%80%A7%E5%85%AC%E7%BD%91IP%E7%BB%91%E5%AE%9A%E6%9C%8D%E5%8A%A1%E5%99%A8ECS">
     7.3 弹性公网IP绑定服务器ECS
    </h3>
    <p>
     再次解绑直接绑定真实服务器ECS，此时直接访问80端口即可访问，但我们通常不会这样做这种危险的操作，这直接把内网主机直接暴露在外网环境。
    </p>
    <p>
     <img alt="" height="489" src="https://i-blog.csdnimg.cn/direct/eab35dbf3e16462699ae08b22e9109fa.png" width="1920"/>
    </p>
    <p>
     <img alt="" height="253" src="https://i-blog.csdnimg.cn/direct/b3f5d8bccc2d404f8d5928ee68d1a7dd.png" width="805"/>
    </p>
    <h2 id="%E5%85%AB%E3%80%81%E5%AE%89%E5%85%A8%E7%BB%84" name="%E5%85%AB%E3%80%81%E5%AE%89%E5%85%A8%E7%BB%84">
     八、安全组
    </h2>
    <p>
     安全组==&gt;安全组模块在ecs控制面板下
    </p>
    <h3 id="8.1%20%E5%85%A5%E6%96%B9%E5%90%91" name="8.1%20%E5%85%A5%E6%96%B9%E5%90%91">
     8.1 入方向
    </h3>
    <p>
     负责服务器真实端口开放。此处放通80端口nginx对外服务
    </p>
    <p>
     <img alt="" height="797" src="https://i-blog.csdnimg.cn/direct/8dc3a6e27af64307934fed9210008368.png" width="1920"/>
    </p>
    <h3 id="8.2%20%E5%87%BA%E6%96%B9%E5%90%91" name="8.2%20%E5%87%BA%E6%96%B9%E5%90%91">
     8.2 出方向
    </h3>
    <p>
     默认放行
    </p>
    <p>
     <img alt="" height="690" src="https://i-blog.csdnimg.cn/direct/d9078c74a6d04074879a9df947a33186.png" width="1920"/>
    </p>
    <h2 id="%E4%B9%9D%E3%80%81%E4%BC%A0%E7%BB%9F%E5%9E%8B%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1CLB" name="%E4%B9%9D%E3%80%81%E4%BC%A0%E7%BB%9F%E5%9E%8B%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1CLB">
     九、传统型负载均衡CLB
    </h2>
    <p>
     vpc资源管理==&gt;传统型负载均衡CLB（私网）==&gt;负载均衡SLB控制台
    </p>
    <p>
     CLB可以当做是一台内网反向代理服务器（CLB内网四层负载），占用一个内网ip，该例子为192.168.1.210
    </p>
    <p>
     <img alt="" height="513" src="https://i-blog.csdnimg.cn/direct/08ff875f16e349bba46d2f2a8712f36f.png" width="1920"/>
    </p>
    <h3 id="9.1%20CLB%E5%AE%9E%E4%BE%8B%E8%AF%A6%E6%83%85" name="9.1%20CLB%E5%AE%9E%E4%BE%8B%E8%AF%A6%E6%83%85">
     9.1 CLB实例详情
    </h3>
    <p>
     <img alt="" height="653" src="https://i-blog.csdnimg.cn/direct/b830f9ffdcc843289d759118574060c8.png" width="1920"/>
    </p>
    <h3 id="9.2%20%E7%9B%91%E5%90%AC" name="9.2%20%E7%9B%91%E5%90%AC">
     9.2 监听
    </h3>
    <p>
     一个CLB实例可监听多个端口，每个端口对应一个服务，每个服务对应一个服务器组，此处监听4000端口，服务器组为slb-group1，slb-group1实际是ip为192.168.1.209的nginx服务器，通常来说服务器组需要包含多个，已达到流量分发的目的。
    </p>
    <p>
     这样在对外服务配置DNAT时就需要把内部地址改成CLB地址和4000端口，而不是真实服务器地址和80端口。
    </p>
    <p>
     <img alt="" height="451" src="https://i-blog.csdnimg.cn/direct/a7ac1f640b6b4daca0e5a847ac917c23.png" width="1920"/>
    </p>
    <p>
     <img alt="" height="456" src="https://i-blog.csdnimg.cn/direct/442bdcd90ddb4201b8ee0e73fe9014d0.png" width="1920"/>
    </p>
    <p>
     <img alt="" height="573" src="https://i-blog.csdnimg.cn/direct/6f86e723823b4354a43e3bc0cdda4660.png" width="1920"/>
    </p>
    <p>
     弹性公网IP绑定NAT网关，DNAT绑定负载CLB4000端口
    </p>
    <p>
     <img alt="" height="455" src="https://i-blog.csdnimg.cn/direct/12b47e1d943b4f788c40c86ba1e80163.png" width="1398"/>
    </p>
    <p>
     弹性公网IP绑定NAT网关，DNAT绑定真实服务器80端口
    </p>
    <p>
     <img alt="" height="474" src="https://i-blog.csdnimg.cn/direct/c3d1d08175d049ec996b5dbfbe38fd10.png" width="1407"/>
    </p>
    <h2 id="%E5%8D%81%E3%80%81%E8%B5%84%E6%BA%90%E5%9B%9E%E6%94%B6" name="%E5%8D%81%E3%80%81%E8%B5%84%E6%BA%90%E5%9B%9E%E6%94%B6">
     十、资源回收
    </h2>
    <p>
     除了收费资源要及时删除，弹性公网IP、服务器ces、负载均衡clb，删除vpc还需要删除安全组、交换机、acl（删除acl要先解绑交换机）。路由表无需手动删除，vpc删除后自动删除。
    </p>
   </div>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f672e:6373646e2e6e65742f77656978696e5f34383837383434302f:61727469636c652f64657461696c732f313436323336383738" class_="artid" style="display:none">
 </p>
</div>


