---
layout: post
title: "Jenkins2.346.1部署Java应用"
date: 2025-03-07 12:00:15 +0800
description: "jenkins 2.346.1版本的安装及使用"
keywords: "jenkis2.346.1的插件版本对照"
categories: ['工具类']
tags: ['Jenkins', 'Java']
artid: "146085954"
image:
    path: https://api.vvhan.com/api/bing?rand=sj&artid=146085954
    alt: "Jenkins2.346.1部署Java应用"
render_with_liquid: false
featuredImage: https://bing.ee123.net/img/rand?artid=146085954
featuredImagePreview: https://bing.ee123.net/img/rand?artid=146085954
cover: https://bing.ee123.net/img/rand?artid=146085954
image: https://bing.ee123.net/img/rand?artid=146085954
img: https://bing.ee123.net/img/rand?artid=146085954
---

<div class="blog-content-box">
 <div class="article-header-box">
  <div class="article-header">
   <div class="article-title-box">
    <h1 class="title-article" id="articleContentId">
     Jenkins2.346.1部署Java应用
    </h1>
   </div>
  </div>
 </div>
 <article class="baidu_pl">
  <div class="article_content clearfix" id="article_content">
   <link href="../../assets/css/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
   <link href="../../assets/css/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
   <div class="markdown_views prism-atom-one-dark" id="content_views">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
     <path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
     </path>
    </svg>
    <h2>
     <a id="Jenkins_0">
     </a>
     一、Jenkins安装前准备
    </h2>
    <h3>
     <a id="1JDK18_1">
     </a>
     1、JDK1.8环境
    </h3>
    <h4>
     <a id="11_2">
     </a>
     1-1、版本支持
    </h4>
    <blockquote>
     <p>
      JDK与Jenkins版本对照：https://www.jenkins.io/doc/book/platform-information/support-policy-java/
     </p>
    </blockquote>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/5c563681d7214ce5bfef26485ba23487.png"/>
    </p>
    <h4>
     <a id="12JDK18_7">
     </a>
     1-2、安装JDK1.8
    </h4>
    <blockquote>
     <p>
      安装说明：
      <a href="https://blog.csdn.net/liyb1078422974/article/details/109674483?spm=1001.2014.3001.5502">
       https://blog.csdn.net/liyb1078422974/article/details/109674483?spm=1001.2014.3001.5502
      </a>
     </p>
    </blockquote>
    <h3>
     <a id="2Git_11">
     </a>
     2、Git环境
    </h3>
    <blockquote>
     <p>
      注：使用的是
      <a href="https://gitee.com/" rel="nofollow">
       Gitee
      </a>
      存放项目
     </p>
    </blockquote>
    <pre><code class="prism language-powershell"><span class="token comment"># Git安装（Linux服务器自带的）</span>
yum <span class="token operator">-</span>y install git

<span class="token comment"># 查看版本</span>
git <span class="token operator">-</span>v 或 git <span class="token operator">--</span>version
<span class="token comment"># 结果显示：git version 2.43.5</span>
</code></pre>
    <h3>
     <a id="3Maven_24">
     </a>
     3、Maven环境
    </h3>
    <h4>
     <a id="31_25">
     </a>
     3-1、下载地址
    </h4>
    <blockquote>
     <p>
      maven最新使用版本：http://maven.apache.org/download.cgi
      <br/>
      maven历史可下载版本：https://archive.apache.org/dist/maven/maven-3/
      <br/>
      maven历史对应jdk的版本：https://maven.apache.org/docs/history.html
     </p>
    </blockquote>
    <h4>
     <a id="32maven363_31">
     </a>
     3-2、安装maven3.6.3
    </h4>
    <ul>
     <li>
      下载地址（在历史可下载版本）
     </li>
    </ul>
    <p>
     <a href="https://archive.apache.org/dist/maven/maven-3/3.6.3/binaries/apache-maven-3.6.3-bin.tar.gz" rel="nofollow">
      https://archive.apache.org/dist/maven/maven-3/3.6.3/binaries/apache-maven-3.6.3-bin.tar.gz
     </a>
    </p>
    <ul>
     <li>
      安装命令
     </li>
    </ul>
    <pre><code class="prism language-powershell"><span class="token comment"># 1. wget 下载安装包（非最新版本）</span>
wget https:<span class="token operator">/</span><span class="token operator">/</span>archive<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>org/dist/maven/maven-3/3<span class="token punctuation">.</span>6<span class="token punctuation">.</span>3/binaries/apache-maven-3<span class="token punctuation">.</span>6<span class="token punctuation">.</span>3-bin<span class="token punctuation">.</span>tar<span class="token punctuation">.</span>gz

<span class="token comment"># 2. 使用wget；如果出现：-bash: wget: command not found问题，说明未安装。执行安装命令</span>
<span class="token comment"># 移除老版wget</span>
yum remove wget
<span class="token comment"># 安装wget（wget安装后，重新下载maven的安装包）</span>
yum install <span class="token operator">-</span>y wget

<span class="token comment"># 3. 解压安装包（解压在当前目录下）</span>
tar <span class="token operator">-</span>zxvf apache-maven-3<span class="token punctuation">.</span>6<span class="token punctuation">.</span>3-bin<span class="token punctuation">.</span>tar<span class="token punctuation">.</span>gz

<span class="token comment">#  4. 配置环境变量</span>
vim ~<span class="token operator">/</span><span class="token punctuation">.</span>bash_profile

<span class="token comment"># 5. 在bash_profile中，加入以下程序</span>
export M2_HOME=<span class="token operator">/</span>app/maven/apache-maven-3<span class="token punctuation">.</span>6<span class="token punctuation">.</span>3/bin
export PATH=<span class="token variable">$M2_HOME</span>:<span class="token variable">$PATH</span>

<span class="token comment"># 6. 配置生效</span>
source ~<span class="token operator">/</span><span class="token punctuation">.</span>bash_profile
</code></pre>
    <blockquote>
     <p>
      注：各环境文件配置说明
      <br/>
      /etc/profile 是Linux系统中的系统级配置文件，它对所有用户都有效
      <br/>
      ~/.bash_profile 是用户的个人配置文件，它只对当前用户有效。
      <br/>
      ~/.bashrc 也是用户的个人配置文件，它在用户开启一个新的 shell 会话时被加载。
      <br/>
      ~/.bashrc 的作用与~/.bash_profile类似，但它更侧重于单个 shell 会话的配置。
     </p>
    </blockquote>
    <h3>
     <a id="4node_69">
     </a>
     4、node环境
    </h3>
    <h4>
     <a id="41NVM_70">
     </a>
     4-1、安装NVM
    </h4>
    <blockquote>
     <p>
      注：支持安装多个版本的node，并控制使用版本
      <br/>
      NVM官网地址：
      <a href="https://nvm.uihtm.com/#nvm-linux" rel="nofollow">
       https://nvm.uihtm.com/#nvm-linux
      </a>
     </p>
    </blockquote>
    <pre><code class="prism language-powershell"><span class="token comment"># 1. 安装nvm</span>
<span class="token comment"># 方式1（curl -o-命令的作用是将下载的内容输出到标准输出（stdout），而不是保存到文件。）</span>
curl <span class="token operator">-</span>o- https:<span class="token operator">/</span><span class="token operator">/</span>raw<span class="token punctuation">.</span>githubusercontent<span class="token punctuation">.</span>com/nvm-sh/nvm/v0<span class="token punctuation">.</span>39<span class="token punctuation">.</span>7/install<span class="token punctuation">.</span>sh <span class="token punctuation">|</span> bash
<span class="token comment"># 方式2 【推荐】（wget -qO- 的作用就是让wget以安静模式下载文件，并将下载的内容输出到标准输出。）</span>
wget <span class="token operator">-</span>qO- https:<span class="token operator">/</span><span class="token operator">/</span>raw<span class="token punctuation">.</span>githubusercontent<span class="token punctuation">.</span>com/nvm-sh/nvm/v0<span class="token punctuation">.</span>39<span class="token punctuation">.</span>7/install<span class="token punctuation">.</span>sh <span class="token punctuation">|</span> bash

<span class="token comment"># 2、安装结果如下图</span>
<span class="token comment"># 根据图片所示：nvm已配置在~/.bashrc内</span>
<span class="token comment"># 如果未配置：则在以下任一文件中均可 </span>
<span class="token comment"># ~/.bash_profile, ~/.zshrc, ~/.profile, or ~/.bashrc, 在文件尾部添加nvm命令所在路径</span>

<span class="token comment"># 3、如果没有.nvm目录则创建</span>
mkdir <span class="token operator">-</span>p ~<span class="token operator">/</span><span class="token punctuation">.</span>nvm

<span class="token comment"># 4.如果没有自动配置环境时，则手工加</span>
export NVM_DIR=<span class="token string">"<span class="token variable">$HOME</span>/.nvm"</span>
<span class="token punctuation">[</span> <span class="token operator">-</span>s <span class="token string">"<span class="token variable">$NVM_DIR</span>/nvm.sh"</span> <span class="token punctuation">]</span> &amp;&amp; \<span class="token punctuation">.</span> <span class="token string">"<span class="token variable">$NVM_DIR</span>/nvm.sh"</span>  <span class="token comment"># This loads nvm</span>
<span class="token punctuation">[</span> <span class="token operator">-</span>s <span class="token string">"<span class="token variable">$NVM_DIR</span>/bash_completion"</span> <span class="token punctuation">]</span> &amp;&amp; \<span class="token punctuation">.</span> <span class="token string">"<span class="token variable">$NVM_DIR</span>/bash_completion"</span>  <span class="token comment"># This loads nvm bash_completion</span>

<span class="token comment"># 5. 重新加载配置文件</span>
source ~<span class="token operator">/</span><span class="token punctuation">.</span>bashrc 
</code></pre>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/9c315d25efa44213b45f641004f8f282.png"/>
    </p>
    <h4>
     <a id="42node_99">
     </a>
     4-2、安装node
    </h4>
    <pre><code class="prism language-powershell"><span class="token comment"># 指定安装版本</span>
nvm install 20<span class="token punctuation">.</span>18<span class="token punctuation">.</span>1

<span class="token comment"># 指定使用node的版本</span>
nvm use 20<span class="token punctuation">.</span>18<span class="token punctuation">.</span>1

</code></pre>
    <h2>
     <a id="Jenkins_110">
     </a>
     二、Jenkins开始安装
    </h2>
    <h3>
     <a id="1Jenkins23461_111">
     </a>
     1、Jenkins2.346.1版本下载
    </h3>
    <h4>
     <a id="11war_112">
     </a>
     1-1、war安装方式（使用）
    </h4>
    <ul>
     <li>
      下载war包
     </li>
    </ul>
    <p>
     <a href="https://get.jenkins.io/war-stable/2.346.1/jenkins.war" rel="nofollow">
      https://get.jenkins.io/war-stable/2.346.1/jenkins.war
     </a>
    </p>
    <ul>
     <li>
      tomcat启动war
     </li>
    </ul>
    <blockquote>
     <p>
      ① 把war放入tomcat webapps下
      <br/>
      ② 设置端口号
      <br/>
      ③ 启动tomcat服务
     </p>
    </blockquote>
    <h4>
     <a id="21rpm_123">
     </a>
     2-1、镜像rpm安装
    </h4>
    <blockquote>
     <p>
      注：只有最新版的，旧版的已经不支持了
     </p>
    </blockquote>
    <pre><code class="prism language-powershell"><span class="token comment"># 旧版Jenkins下载</span>
rpm <span class="token operator">-</span>ivh jenkins-2<span class="token punctuation">.</span>249<span class="token punctuation">.</span>2-1<span class="token punctuation">.</span>1<span class="token punctuation">.</span>noarch<span class="token punctuation">.</span>rpm

<span class="token comment"># 如果之前安装过其它的版本，就会报冲突，解压会失败，需要卸载</span>
<span class="token comment"># 注：解压前，不要用其它命令删除，不然无用。</span>
<span class="token comment"># 如果之前被删除过，可以先安装原版本的，再进行删除</span>
rpm <span class="token operator">-</span>e jenkins-2<span class="token punctuation">.</span>249<span class="token punctuation">.</span>2-1<span class="token punctuation">.</span>1

<span class="token comment"># 查看jenkins.war文件所在路径：显示 jenkins: /usr/lib/jenkins</span>
whereis jenkins

<span class="token comment"># 进入</span>
cd <span class="token operator">/</span>usr/lib/jenkins

<span class="token comment"># 启动服务 或者 使用容器tomcat启动</span>
sudo service jenkins <span class="token function">start</span>
</code></pre>
    <blockquote>
     <p>
      注：解压得到的jenkins.war，也可以通过tomcat启动，把war包移动到tomcat的webapp下，然后更改catalina.sh文件种的java_home地址，最后配置下自己需要的端口号（默认：8080），启动容器。
     </p>
    </blockquote>
    <h3>
     <a id="2Jenkins_148">
     </a>
     2、Jenkins启动后配置
    </h3>
    <h4>
     <a id="21_149">
     </a>
     2-1、在日志中查看管理员密码
    </h4>
    <p>
     搜索：/root/.jenkins/secrets/initialAdminPassword，如下图日志所示
     <br/>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/9258971df160498fb3f775d353fe17ff.png"/>
    </p>
    <h4>
     <a id="22_152">
     </a>
     2-2、登录界面前的配置
    </h4>
    <ul>
     <li>
      在/root/.jenkins/secrets/initialAdminPassword下，输入管理密码
     </li>
     <li>
      输入成功后，进入【下一步】选择，
      <strong>
       自定义插件
      </strong>
      还是
      <strong>
       推荐插件
      </strong>
     </li>
     <li>
      注：使用
      <strong>
       推荐插件
      </strong>
      ，默认下载的插件只支持最新高版本的Jenkins。2.346.1不支持，如下所示
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/25182731619746b5a6cb44ade8583d10.png"/>
     </li>
     <li>
      最终选择【自定义插件】，进入下一页，选择**“无”**，不安装任何插件。
     </li>
     <li>
      最终进入jenkins界面
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/d7a7c2c8608f422eaebf5c95eface881.png"/>
     </li>
    </ul>
    <h3>
     <a id="3Jenkins_162">
     </a>
     3、安装Jenkins依赖的插件
    </h3>
    <h4>
     <a id="31_163">
     </a>
     3-1、方式一：下载插件
    </h4>
    <ul>
     <li>
      注：下载的插件要支持当前Jenkins的版本
     </li>
     <li>
      插件与Jenkins版本：
      <a href="https://updates.jenkins-ci.org/download/plugins/" rel="nofollow">
       https://updates.jenkins-ci.org/download/plugins/
      </a>
      ，如下所示：
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/5c9413783fab41f5a1dc537d6cf23874.png"/>
     </li>
    </ul>
    <h5>
     <a id="311_168">
     </a>
     3-1-1、人工部署插件
    </h5>
    <ul>
     <li>
      菜单选择：系统管理 =&gt; 插件管理 =&gt; 高级
      <br/>
      <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/341d9919521843eab73826f2f8b61252.png">
       <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/4167c83f8ab74941b13e379373c12ab8.png"/>
      </img>
     </li>
    </ul>
    <h5>
     <a id="312_172">
     </a>
     3-1-2、插件之间依赖关系
    </h5>
    <ul>
     <li>
      1、部署maven-plugin.hpi插件，需要部署它依赖的插件（自行摸索，未记录-太多了）
     </li>
     <li>
      2、如果有找不到的插件跳过就好（有几个插件不支持此版本，如：asm-api、json-api）
     </li>
     <li>
      3、经测试能部署所依赖的包，如下链接：
      <a href="https://download.csdn.net/download/liyb1078422974/90464057">
       https://download.csdn.net/download/liyb1078422974/90464057
      </a>
     </li>
    </ul>
    <h4>
     <a id="32_177">
     </a>
     3-2、方式二、直接使用安装好的插件
    </h4>
    <h5>
     <a id="321_jenkins_179">
     </a>
     3-2-1、 进入jenkins（安装好的）插件存放处
    </h5>
    <pre><code class="prism language-powershell"><span class="token comment"># 进入jenkins的插件处</span>
 cd ~<span class="token operator">/</span><span class="token punctuation">.</span>jenkins/plugins/
</code></pre>
    <h5>
     <a id="322_186">
     </a>
     3-2-2、下载安装好的插件
    </h5>
    <p>
     注：原先若有安装的插件，记得先备份
    </p>
    <p>
     可用插件下载地址：
     <a href="https://download.csdn.net/download/liyb1078422974/90464065">
      https://download.csdn.net/download/liyb1078422974/90464065
     </a>
    </p>
    <h2>
     <a id="Jenkins__192">
     </a>
     三、Jenkins 开始打包配置
    </h2>
    <h3>
     <a id="1_193">
     </a>
     1、新建任务
    </h3>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/ef48f2f960ab4956bc592cb4a236b8dd.png"/>
    </p>
    <h3>
     <a id="2_195">
     </a>
     2、基础配置
    </h3>
    <blockquote>
     <p>
      显示构建日志保存天数 和 记录数
     </p>
    </blockquote>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/c5db3da2a8814039ae7f933c45dab1dc.png"/>
    </p>
    <h3>
     <a id="3_200">
     </a>
     3、源码管理
    </h3>
    <blockquote>
     <p>
      若无口令，则先添加
     </p>
    </blockquote>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/407cfe8bf61744c0822864a1a339ea0d.png"/>
    </p>
    <h3>
     <a id="4_205">
     </a>
     4、指定分支版本
    </h3>
    <blockquote>
     <p>
      默认master
     </p>
    </blockquote>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/536f93004efe49f7a34cb4aa5c181ba6.png"/>
    </p>
    <h3>
     <a id="5_210">
     </a>
     5、指定进入打包项目
    </h3>
    <blockquote>
     <p>
      一个地址控制多个项目时，只打包单个项目
     </p>
    </blockquote>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/4679c8f4dba84979a7414501a25d06fe.png"/>
    </p>
    <h3>
     <a id="6_215">
     </a>
     6、构建
    </h3>
    <p>
     <img alt="在这里插入图片描述" src="https://i-blog.csdnimg.cn/direct/6bca2e6b89074e08a684f72695331be2.png"/>
    </p>
    <pre><code class="prism language-powershell"><span class="token comment"># ######## 打包 ########</span>
<span class="token comment"># 获取本用户的maven环境变量</span>
source <span class="token operator">/</span>etc/profile
<span class="token comment"># 当前所在目录</span>
<span class="token function">pwd</span>
<span class="token comment"># 打包</span>
mvn clean install

<span class="token comment">######## 远程部署 ########</span>
<span class="token comment"># 使用密码（/home/update/release自定义远程路径）</span>
<span class="token comment"># 远程传输</span>
sshpass <span class="token operator">-</span>p <span class="token string">'密码'</span> scp <span class="token operator">-</span>r 文件 username@ip:<span class="token operator">/</span>home/update/release
<span class="token comment"># 执行远程服务的sh（注：可自带参数-也可以不需要）</span>
sshpass <span class="token operator">-</span>p <span class="token string">'密码'</span> ssh username@ip <span class="token string">"bash /home/update/release/update.sh <span class="token variable">$param1</span>"</span>

<span class="token comment"># 使用密钥文件</span>
<span class="token comment"># 远程传输（/home/update/release自定义远程路径）</span>
sshpass <span class="token operator">-</span>i 文件路径<span class="token operator">/</span>文件名 scp <span class="token operator">-</span>r 文件 username@ip:<span class="token operator">/</span>home/update/release
<span class="token comment"># 执行远程服务的sh（注：可自带参数-也可以不需要）</span>
sshpass <span class="token operator">-</span>i 文件路径<span class="token operator">/</span>文件名 ssh username@ip <span class="token string">"bash /home/update/release/update.sh <span class="token variable">$param1</span>"</span>

</code></pre>
    <p>
     OK！到这基本上就结束了，其他可自行慢慢摸索。。。。。。
    </p>
   </div>
   <link href="../../assets/css/markdown_views-a5d25dd831.css" rel="stylesheet"/>
   <link href="../../assets/css/style-e504d6a974.css" rel="stylesheet"/>
  </div>
 </article>
 <p alt="68747470733a2f2f626c6f67:2e6373646e2e6e65742f6c697962313037383432323937342f:61727469636c652f64657461696c732f313436303835393534" class_="artid" style="display:none">
 </p>
</div>


