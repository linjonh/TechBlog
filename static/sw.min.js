!function(){"use strict";var e=!1,t={};function c(e){const c=new URL(e),s=c.pathname;if(!c.protocol.startsWith("http"))return!1;for(const e of t.urlPrefixes)if(c.href.startsWith(e))return!1;for(const e of t.paths)if(s.startsWith(e))return!1;return!0}!async function(){swconf=await fetch("./assets/data/swconfig.json"),console.log("swconf="),console.log(swconf),e=swconf.purge,t=swconf.interceptor}(),self.addEventListener("install",(t=>{e||t.waitUntil(caches.open(swconf.cacheName).then((e=>e.addAll(swconf.resources))))})),self.addEventListener("activate",(t=>{t.waitUntil(caches.keys().then((t=>Promise.all(t.map((t=>e||t!==swconf.cacheName?caches.delete(t):void 0))))))})),self.addEventListener("message",(e=>{"SKIP_WAITING"===e.data&&self.skipWaiting()}));const s="https://cors-proxy-rho-red.vercel.app/",n="https://cors-proxy-rho-red.vercel.app";function r(t,s){t.respondWith(caches.match(s).then((t=>t||fetch(s).then((t=>{const n=s.url;if(e||"GET"!==s.method||!c(n))return t;let r=t.clone();return caches.open(swconf.cacheName).then((e=>{e.put(s,r)})),t})))))}self.addEventListener("fetch",(t=>{let a=t.request;if(!a.headers.has("range"))if(!a.url.includes("csdnimg.cn")&&!a.url.includes("https://www.cloudflare-terms-of-service-abuse.com/")||a.url.includes(n))a.url.includes(n)&&a.url.endsWith(".ts")?function(t,r){t.waitUntil((async()=>{const t=await caches.match(r);if(t)return t;let a=r.url.replace(n+"/","");const o=await caches.keys();for(const t of o){const o=await caches.open(t),i=await o.keys();for(const t of i){const i=await o.match(t),l=await i.text();let h=t.url;if(h.endsWith(".m3u8")&&l.includes(a)){let o=decodeURIComponent(h);o=o.replace(s,"");let i=new URL(a,o.substring(0,o.lastIndexOf("/")+1));i=s+i.href;const l=new Request(i,{method:r.method,headers:r.headers,body:r.body,mode:r.mode,credentials:r.credentials,cache:r.cache,redirect:r.redirect,referrer:n,integrity:r.integrity});let d;const f=await fetch(l);if(f.redirected){const e=s+f.url;d=await fetch(e),d.status}else d=f;const u=t.url;if(e||"GET"!==t.method||!c(u))return d;let w=d.clone();return(await caches.open(swconf.cacheName)).put(t,w),d}}}return fetch(r)})())}(t,a):r(t,a);else{const e=a.url;r(t,new Request(s+e,{method:a.method,headers:a.headers,body:a.body,mode:a.mode,credentials:a.credentials,cache:a.cache,redirect:a.redirect,referrer:n,integrity:a.integrity}))}}))}();
